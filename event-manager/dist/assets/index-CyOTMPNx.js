function yd(t,e){for(var r=0;r<e.length;r++){const s=e[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();var us=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function px(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return t[s]}})}),r}var J0={exports:{}},Bl={},e1={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jo=Symbol.for("react.element"),mx=Symbol.for("react.portal"),xx=Symbol.for("react.fragment"),wx=Symbol.for("react.strict_mode"),yx=Symbol.for("react.profiler"),vx=Symbol.for("react.provider"),Ex=Symbol.for("react.context"),_x=Symbol.for("react.forward_ref"),Cx=Symbol.for("react.suspense"),bx=Symbol.for("react.memo"),Ax=Symbol.for("react.lazy"),Xh=Symbol.iterator;function Sx(t){return t===null||typeof t!="object"?null:(t=Xh&&t[Xh]||t["@@iterator"],typeof t=="function"?t:null)}var t1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r1=Object.assign,n1={};function Us(t,e,r){this.props=t,this.context=e,this.refs=n1,this.updater=r||t1}Us.prototype.isReactComponent={};Us.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Us.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function i1(){}i1.prototype=Us.prototype;function Ed(t,e,r){this.props=t,this.context=e,this.refs=n1,this.updater=r||t1}var _d=Ed.prototype=new i1;_d.constructor=Ed;r1(_d,Us.prototype);_d.isPureReactComponent=!0;var Kh=Array.isArray,s1=Object.prototype.hasOwnProperty,Cd={current:null},o1={key:!0,ref:!0,__self:!0,__source:!0};function a1(t,e,r){var s,a={},l=null,h=null;if(e!=null)for(s in e.ref!==void 0&&(h=e.ref),e.key!==void 0&&(l=""+e.key),e)s1.call(e,s)&&!o1.hasOwnProperty(s)&&(a[s]=e[s]);var x=arguments.length-2;if(x===1)a.children=r;else if(1<x){for(var p=Array(x),g=0;g<x;g++)p[g]=arguments[g+2];a.children=p}if(t&&t.defaultProps)for(s in x=t.defaultProps,x)a[s]===void 0&&(a[s]=x[s]);return{$$typeof:Jo,type:t,key:l,ref:h,props:a,_owner:Cd.current}}function Ix(t,e){return{$$typeof:Jo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jo}function Nx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var qh=/\/+/g;function Cu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Nx(""+t.key):e.toString(36)}function Wa(t,e,r,s,a){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var h=!1;if(t===null)h=!0;else switch(l){case"string":case"number":h=!0;break;case"object":switch(t.$$typeof){case Jo:case mx:h=!0}}if(h)return h=t,a=a(h),t=s===""?"."+Cu(h,0):s,Kh(a)?(r="",t!=null&&(r=t.replace(qh,"$&/")+"/"),Wa(a,e,r,"",function(g){return g})):a!=null&&(bd(a)&&(a=Ix(a,r+(!a.key||h&&h.key===a.key?"":(""+a.key).replace(qh,"$&/")+"/")+t)),e.push(a)),1;if(h=0,s=s===""?".":s+":",Kh(t))for(var x=0;x<t.length;x++){l=t[x];var p=s+Cu(l,x);h+=Wa(l,e,r,p,a)}else if(p=Sx(t),typeof p=="function")for(t=p.call(t),x=0;!(l=t.next()).done;)l=l.value,p=s+Cu(l,x++),h+=Wa(l,e,r,p,a);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return h}function pa(t,e,r){if(t==null)return t;var s=[],a=0;return Wa(t,s,"","",function(l){return e.call(r,l,a++)}),s}function Tx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fr={current:null},Ha={transition:null},Rx={ReactCurrentDispatcher:fr,ReactCurrentBatchConfig:Ha,ReactCurrentOwner:Cd};function l1(){throw Error("act(...) is not supported in production builds of React.")}Ue.Children={map:pa,forEach:function(t,e,r){pa(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return pa(t,function(){e++}),e},toArray:function(t){return pa(t,function(e){return e})||[]},only:function(t){if(!bd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ue.Component=Us;Ue.Fragment=xx;Ue.Profiler=yx;Ue.PureComponent=Ed;Ue.StrictMode=wx;Ue.Suspense=Cx;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rx;Ue.act=l1;Ue.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=r1({},t.props),a=t.key,l=t.ref,h=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,h=Cd.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var x=t.type.defaultProps;for(p in e)s1.call(e,p)&&!o1.hasOwnProperty(p)&&(s[p]=e[p]===void 0&&x!==void 0?x[p]:e[p])}var p=arguments.length-2;if(p===1)s.children=r;else if(1<p){x=Array(p);for(var g=0;g<p;g++)x[g]=arguments[g+2];s.children=x}return{$$typeof:Jo,type:t.type,key:a,ref:l,props:s,_owner:h}};Ue.createContext=function(t){return t={$$typeof:Ex,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vx,_context:t},t.Consumer=t};Ue.createElement=a1;Ue.createFactory=function(t){var e=a1.bind(null,t);return e.type=t,e};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(t){return{$$typeof:_x,render:t}};Ue.isValidElement=bd;Ue.lazy=function(t){return{$$typeof:Ax,_payload:{_status:-1,_result:t},_init:Tx}};Ue.memo=function(t,e){return{$$typeof:bx,type:t,compare:e===void 0?null:e}};Ue.startTransition=function(t){var e=Ha.transition;Ha.transition={};try{t()}finally{Ha.transition=e}};Ue.unstable_act=l1;Ue.useCallback=function(t,e){return fr.current.useCallback(t,e)};Ue.useContext=function(t){return fr.current.useContext(t)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(t){return fr.current.useDeferredValue(t)};Ue.useEffect=function(t,e){return fr.current.useEffect(t,e)};Ue.useId=function(){return fr.current.useId()};Ue.useImperativeHandle=function(t,e,r){return fr.current.useImperativeHandle(t,e,r)};Ue.useInsertionEffect=function(t,e){return fr.current.useInsertionEffect(t,e)};Ue.useLayoutEffect=function(t,e){return fr.current.useLayoutEffect(t,e)};Ue.useMemo=function(t,e){return fr.current.useMemo(t,e)};Ue.useReducer=function(t,e,r){return fr.current.useReducer(t,e,r)};Ue.useRef=function(t){return fr.current.useRef(t)};Ue.useState=function(t){return fr.current.useState(t)};Ue.useSyncExternalStore=function(t,e,r){return fr.current.useSyncExternalStore(t,e,r)};Ue.useTransition=function(){return fr.current.useTransition()};Ue.version="18.3.1";e1.exports=Ue;var X=e1.exports;const en=vd(X),Ox=yd({__proto__:null,default:en},[X]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kx=X,Px=Symbol.for("react.element"),Dx=Symbol.for("react.fragment"),Mx=Object.prototype.hasOwnProperty,Lx=kx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bx={key:!0,ref:!0,__self:!0,__source:!0};function u1(t,e,r){var s,a={},l=null,h=null;r!==void 0&&(l=""+r),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(h=e.ref);for(s in e)Mx.call(e,s)&&!Bx.hasOwnProperty(s)&&(a[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)a[s]===void 0&&(a[s]=e[s]);return{$$typeof:Px,type:t,key:l,ref:h,props:a,_owner:Lx.current}}Bl.Fragment=Dx;Bl.jsx=u1;Bl.jsxs=u1;J0.exports=Bl;var _=J0.exports,sc={},c1={exports:{}},Dr={},d1={exports:{}},h1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(re,te){var xe=re.length;re.push(te);e:for(;0<xe;){var me=xe-1>>>1,ce=re[me];if(0<a(ce,te))re[me]=te,re[xe]=ce,xe=me;else break e}}function r(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var te=re[0],xe=re.pop();if(xe!==te){re[0]=xe;e:for(var me=0,ce=re.length,he=ce>>>1;me<he;){var ke=2*(me+1)-1,Je=re[ke],ue=ke+1,Nt=re[ue];if(0>a(Je,xe))ue<ce&&0>a(Nt,Je)?(re[me]=Nt,re[ue]=xe,me=ue):(re[me]=Je,re[ke]=xe,me=ke);else if(ue<ce&&0>a(Nt,xe))re[me]=Nt,re[ue]=xe,me=ue;else break e}}return te}function a(re,te){var xe=re.sortIndex-te.sortIndex;return xe!==0?xe:re.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var h=Date,x=h.now();t.unstable_now=function(){return h.now()-x}}var p=[],g=[],y=1,v=null,b=3,N=!1,O=!1,L=!1,j=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(re){for(var te=r(g);te!==null;){if(te.callback===null)s(g);else if(te.startTime<=re)s(g),te.sortIndex=te.expirationTime,e(p,te);else break;te=r(g)}}function B(re){if(L=!1,I(re),!O)if(r(p)!==null)O=!0,je(W);else{var te=r(g);te!==null&&le(B,te.startTime-re)}}function W(re,te){O=!1,L&&(L=!1,k(D),D=-1),N=!0;var xe=b;try{for(I(te),v=r(p);v!==null&&(!(v.expirationTime>te)||re&&!Y());){var me=v.callback;if(typeof me=="function"){v.callback=null,b=v.priorityLevel;var ce=me(v.expirationTime<=te);te=t.unstable_now(),typeof ce=="function"?v.callback=ce:v===r(p)&&s(p),I(te)}else s(p);v=r(p)}if(v!==null)var he=!0;else{var ke=r(g);ke!==null&&le(B,ke.startTime-te),he=!1}return he}finally{v=null,b=xe,N=!1}}var $=!1,U=null,D=-1,C=5,F=-1;function Y(){return!(t.unstable_now()-F<C)}function K(){if(U!==null){var re=t.unstable_now();F=re;var te=!0;try{te=U(!0,re)}finally{te?se():($=!1,U=null)}}else $=!1}var se;if(typeof R=="function")se=function(){R(K)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,q=Oe.port2;Oe.port1.onmessage=K,se=function(){q.postMessage(null)}}else se=function(){j(K,0)};function je(re){U=re,$||($=!0,se())}function le(re,te){D=j(function(){re(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(re){re.callback=null},t.unstable_continueExecution=function(){O||N||(O=!0,je(W))},t.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<re?Math.floor(1e3/re):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return r(p)},t.unstable_next=function(re){switch(b){case 1:case 2:case 3:var te=3;break;default:te=b}var xe=b;b=te;try{return re()}finally{b=xe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(re,te){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var xe=b;b=re;try{return te()}finally{b=xe}},t.unstable_scheduleCallback=function(re,te,xe){var me=t.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?me+xe:me):xe=me,re){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=xe+ce,re={id:y++,callback:te,priorityLevel:re,startTime:xe,expirationTime:ce,sortIndex:-1},xe>me?(re.sortIndex=xe,e(g,re),r(p)===null&&re===r(g)&&(L?(k(D),D=-1):L=!0,le(B,xe-me))):(re.sortIndex=ce,e(p,re),O||N||(O=!0,je(W))),re},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(re){var te=b;return function(){var xe=b;b=te;try{return re.apply(this,arguments)}finally{b=xe}}}})(h1);d1.exports=h1;var jx=d1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fx=X,Pr=jx;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f1=new Set,Oo={};function Gi(t,e){ks(t,e),ks(t+"Capture",e)}function ks(t,e){for(Oo[t]=e,t=0;t<e.length;t++)f1.add(e[t])}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oc=Object.prototype.hasOwnProperty,Ux=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yh={},Zh={};function zx(t){return oc.call(Zh,t)?!0:oc.call(Yh,t)?!1:Ux.test(t)?Zh[t]=!0:(Yh[t]=!0,!1)}function Vx(t,e,r,s){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Wx(t,e,r,s){if(e===null||typeof e>"u"||Vx(t,e,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gr(t,e,r,s,a,l,h){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=h}var tr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tr[t]=new gr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tr[e]=new gr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tr[t]=new gr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tr[t]=new gr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tr[t]=new gr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tr[t]=new gr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tr[t]=new gr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tr[t]=new gr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tr[t]=new gr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ad=/[\-:]([a-z])/g;function Sd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ad,Sd);tr[e]=new gr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ad,Sd);tr[e]=new gr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ad,Sd);tr[e]=new gr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tr[t]=new gr(t,1,!1,t.toLowerCase(),null,!1,!1)});tr.xlinkHref=new gr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tr[t]=new gr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Id(t,e,r,s){var a=tr.hasOwnProperty(e)?tr[e]:null;(a!==null?a.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Wx(e,r,a,s)&&(r=null),s||a===null?zx(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,s=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?t.setAttributeNS(s,e,r):t.setAttribute(e,r))))}var Mn=Fx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ma=Symbol.for("react.element"),hs=Symbol.for("react.portal"),fs=Symbol.for("react.fragment"),Nd=Symbol.for("react.strict_mode"),ac=Symbol.for("react.profiler"),g1=Symbol.for("react.provider"),p1=Symbol.for("react.context"),Td=Symbol.for("react.forward_ref"),lc=Symbol.for("react.suspense"),uc=Symbol.for("react.suspense_list"),Rd=Symbol.for("react.memo"),Xn=Symbol.for("react.lazy"),m1=Symbol.for("react.offscreen"),Qh=Symbol.iterator;function so(t){return t===null||typeof t!="object"?null:(t=Qh&&t[Qh]||t["@@iterator"],typeof t=="function"?t:null)}var _t=Object.assign,bu;function go(t){if(bu===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);bu=e&&e[1]||""}return`
`+bu+t}var Au=!1;function Su(t,e){if(!t||Au)return"";Au=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(g){var s=g}Reflect.construct(t,[],e)}else{try{e.call()}catch(g){s=g}t.call(e.prototype)}else{try{throw Error()}catch(g){s=g}t()}}catch(g){if(g&&s&&typeof g.stack=="string"){for(var a=g.stack.split(`
`),l=s.stack.split(`
`),h=a.length-1,x=l.length-1;1<=h&&0<=x&&a[h]!==l[x];)x--;for(;1<=h&&0<=x;h--,x--)if(a[h]!==l[x]){if(h!==1||x!==1)do if(h--,x--,0>x||a[h]!==l[x]){var p=`
`+a[h].replace(" at new "," at ");return t.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",t.displayName)),p}while(1<=h&&0<=x);break}}}finally{Au=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?go(t):""}function Hx(t){switch(t.tag){case 5:return go(t.type);case 16:return go("Lazy");case 13:return go("Suspense");case 19:return go("SuspenseList");case 0:case 2:case 15:return t=Su(t.type,!1),t;case 11:return t=Su(t.type.render,!1),t;case 1:return t=Su(t.type,!0),t;default:return""}}function cc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fs:return"Fragment";case hs:return"Portal";case ac:return"Profiler";case Nd:return"StrictMode";case lc:return"Suspense";case uc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case p1:return(t.displayName||"Context")+".Consumer";case g1:return(t._context.displayName||"Context")+".Provider";case Td:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rd:return e=t.displayName||null,e!==null?e:cc(t.type)||"Memo";case Xn:e=t._payload,t=t._init;try{return cc(t(e))}catch{}}return null}function Gx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cc(e);case 8:return e===Nd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function di(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function x1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $x(t){var e=x1(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(h){s=""+h,l.call(this,h)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(h){s=""+h},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xa(t){t._valueTracker||(t._valueTracker=$x(t))}function w1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),s="";return t&&(s=x1(t)?t.checked?"true":"false":t.value),t=s,t!==r?(e.setValue(t),!0):!1}function rl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dc(t,e){var r=e.checked;return _t({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Jh(t,e){var r=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;r=di(e.value!=null?e.value:r),t._wrapperState={initialChecked:s,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function y1(t,e){e=e.checked,e!=null&&Id(t,"checked",e,!1)}function hc(t,e){y1(t,e);var r=di(e.value),s=e.type;if(r!=null)s==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fc(t,e.type,r):e.hasOwnProperty("defaultValue")&&fc(t,e.type,di(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ef(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function fc(t,e,r){(e!=="number"||rl(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var po=Array.isArray;function As(t,e,r,s){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&s&&(t[r].defaultSelected=!0)}else{for(r=""+di(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,s&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function gc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return _t({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tf(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ne(92));if(po(r)){if(1<r.length)throw Error(ne(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:di(r)}}function v1(t,e){var r=di(e.value),s=di(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),s!=null&&(t.defaultValue=""+s)}function rf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function E1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?E1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wa,_1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,s,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,s,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wa=wa||document.createElement("div"),wa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ko(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var vo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xx=["Webkit","ms","Moz","O"];Object.keys(vo).forEach(function(t){Xx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vo[e]=vo[t]})});function C1(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||vo.hasOwnProperty(t)&&vo[t]?(""+e).trim():e+"px"}function b1(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=C1(r,e[r],s);r==="float"&&(r="cssFloat"),s?t.setProperty(r,a):t[r]=a}}var Kx=_t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mc(t,e){if(e){if(Kx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function xc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wc=null;function Od(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yc=null,Ss=null,Is=null;function nf(t){if(t=ra(t)){if(typeof yc!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=Vl(e),yc(t.stateNode,t.type,e))}}function A1(t){Ss?Is?Is.push(t):Is=[t]:Ss=t}function S1(){if(Ss){var t=Ss,e=Is;if(Is=Ss=null,nf(t),e)for(t=0;t<e.length;t++)nf(e[t])}}function I1(t,e){return t(e)}function N1(){}var Iu=!1;function T1(t,e,r){if(Iu)return t(e,r);Iu=!0;try{return I1(t,e,r)}finally{Iu=!1,(Ss!==null||Is!==null)&&(N1(),S1())}}function Po(t,e){var r=t.stateNode;if(r===null)return null;var s=Vl(r);if(s===null)return null;r=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ne(231,e,typeof r));return r}var vc=!1;if(Rn)try{var oo={};Object.defineProperty(oo,"passive",{get:function(){vc=!0}}),window.addEventListener("test",oo,oo),window.removeEventListener("test",oo,oo)}catch{vc=!1}function qx(t,e,r,s,a,l,h,x,p){var g=Array.prototype.slice.call(arguments,3);try{e.apply(r,g)}catch(y){this.onError(y)}}var Eo=!1,nl=null,il=!1,Ec=null,Yx={onError:function(t){Eo=!0,nl=t}};function Zx(t,e,r,s,a,l,h,x,p){Eo=!1,nl=null,qx.apply(Yx,arguments)}function Qx(t,e,r,s,a,l,h,x,p){if(Zx.apply(this,arguments),Eo){if(Eo){var g=nl;Eo=!1,nl=null}else throw Error(ne(198));il||(il=!0,Ec=g)}}function $i(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function R1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sf(t){if($i(t)!==t)throw Error(ne(188))}function Jx(t){var e=t.alternate;if(!e){if(e=$i(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var r=t,s=e;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return sf(a),t;if(l===s)return sf(a),e;l=l.sibling}throw Error(ne(188))}if(r.return!==s.return)r=a,s=l;else{for(var h=!1,x=a.child;x;){if(x===r){h=!0,r=a,s=l;break}if(x===s){h=!0,s=a,r=l;break}x=x.sibling}if(!h){for(x=l.child;x;){if(x===r){h=!0,r=l,s=a;break}if(x===s){h=!0,s=l,r=a;break}x=x.sibling}if(!h)throw Error(ne(189))}}if(r.alternate!==s)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?t:e}function O1(t){return t=Jx(t),t!==null?k1(t):null}function k1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=k1(t);if(e!==null)return e;t=t.sibling}return null}var P1=Pr.unstable_scheduleCallback,of=Pr.unstable_cancelCallback,e2=Pr.unstable_shouldYield,t2=Pr.unstable_requestPaint,Rt=Pr.unstable_now,r2=Pr.unstable_getCurrentPriorityLevel,kd=Pr.unstable_ImmediatePriority,D1=Pr.unstable_UserBlockingPriority,sl=Pr.unstable_NormalPriority,n2=Pr.unstable_LowPriority,M1=Pr.unstable_IdlePriority,jl=null,yn=null;function i2(t){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(jl,t,void 0,(t.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:a2,s2=Math.log,o2=Math.LN2;function a2(t){return t>>>=0,t===0?32:31-(s2(t)/o2|0)|0}var ya=64,va=4194304;function mo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ol(t,e){var r=t.pendingLanes;if(r===0)return 0;var s=0,a=t.suspendedLanes,l=t.pingedLanes,h=r&268435455;if(h!==0){var x=h&~a;x!==0?s=mo(x):(l&=h,l!==0&&(s=mo(l)))}else h=r&~a,h!==0?s=mo(h):l!==0&&(s=mo(l));if(s===0)return 0;if(e!==0&&e!==s&&!(e&a)&&(a=s&-s,l=e&-e,a>=l||a===16&&(l&4194240)!==0))return e;if(s&4&&(s|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)r=31-on(e),a=1<<r,s|=t[r],e&=~a;return s}function l2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function u2(t,e){for(var r=t.suspendedLanes,s=t.pingedLanes,a=t.expirationTimes,l=t.pendingLanes;0<l;){var h=31-on(l),x=1<<h,p=a[h];p===-1?(!(x&r)||x&s)&&(a[h]=l2(x,e)):p<=e&&(t.expiredLanes|=x),l&=~x}}function _c(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function L1(){var t=ya;return ya<<=1,!(ya&4194240)&&(ya=64),t}function Nu(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ea(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-on(e),t[e]=r}function c2(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-on(r),l=1<<a;e[a]=0,s[a]=-1,t[a]=-1,r&=~l}}function Pd(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var s=31-on(r),a=1<<s;a&e|t[s]&e&&(t[s]|=e),r&=~a}}var Qe=0;function B1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var j1,Dd,F1,U1,z1,Cc=!1,Ea=[],ri=null,ni=null,ii=null,Do=new Map,Mo=new Map,qn=[],d2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function af(t,e){switch(t){case"focusin":case"focusout":ri=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":Do.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mo.delete(e.pointerId)}}function ao(t,e,r,s,a,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:r,eventSystemFlags:s,nativeEvent:l,targetContainers:[a]},e!==null&&(e=ra(e),e!==null&&Dd(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function h2(t,e,r,s,a){switch(e){case"focusin":return ri=ao(ri,t,e,r,s,a),!0;case"dragenter":return ni=ao(ni,t,e,r,s,a),!0;case"mouseover":return ii=ao(ii,t,e,r,s,a),!0;case"pointerover":var l=a.pointerId;return Do.set(l,ao(Do.get(l)||null,t,e,r,s,a)),!0;case"gotpointercapture":return l=a.pointerId,Mo.set(l,ao(Mo.get(l)||null,t,e,r,s,a)),!0}return!1}function V1(t){var e=Pi(t.target);if(e!==null){var r=$i(e);if(r!==null){if(e=r.tag,e===13){if(e=R1(r),e!==null){t.blockedOn=e,z1(t.priority,function(){F1(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ga(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=bc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var s=new r.constructor(r.type,r);wc=s,r.target.dispatchEvent(s),wc=null}else return e=ra(r),e!==null&&Dd(e),t.blockedOn=r,!1;e.shift()}return!0}function lf(t,e,r){Ga(t)&&r.delete(e)}function f2(){Cc=!1,ri!==null&&Ga(ri)&&(ri=null),ni!==null&&Ga(ni)&&(ni=null),ii!==null&&Ga(ii)&&(ii=null),Do.forEach(lf),Mo.forEach(lf)}function lo(t,e){t.blockedOn===e&&(t.blockedOn=null,Cc||(Cc=!0,Pr.unstable_scheduleCallback(Pr.unstable_NormalPriority,f2)))}function Lo(t){function e(a){return lo(a,t)}if(0<Ea.length){lo(Ea[0],t);for(var r=1;r<Ea.length;r++){var s=Ea[r];s.blockedOn===t&&(s.blockedOn=null)}}for(ri!==null&&lo(ri,t),ni!==null&&lo(ni,t),ii!==null&&lo(ii,t),Do.forEach(e),Mo.forEach(e),r=0;r<qn.length;r++)s=qn[r],s.blockedOn===t&&(s.blockedOn=null);for(;0<qn.length&&(r=qn[0],r.blockedOn===null);)V1(r),r.blockedOn===null&&qn.shift()}var Ns=Mn.ReactCurrentBatchConfig,al=!0;function g2(t,e,r,s){var a=Qe,l=Ns.transition;Ns.transition=null;try{Qe=1,Md(t,e,r,s)}finally{Qe=a,Ns.transition=l}}function p2(t,e,r,s){var a=Qe,l=Ns.transition;Ns.transition=null;try{Qe=4,Md(t,e,r,s)}finally{Qe=a,Ns.transition=l}}function Md(t,e,r,s){if(al){var a=bc(t,e,r,s);if(a===null)ju(t,e,s,ll,r),af(t,s);else if(h2(a,t,e,r,s))s.stopPropagation();else if(af(t,s),e&4&&-1<d2.indexOf(t)){for(;a!==null;){var l=ra(a);if(l!==null&&j1(l),l=bc(t,e,r,s),l===null&&ju(t,e,s,ll,r),l===a)break;a=l}a!==null&&s.stopPropagation()}else ju(t,e,s,null,r)}}var ll=null;function bc(t,e,r,s){if(ll=null,t=Od(s),t=Pi(t),t!==null)if(e=$i(t),e===null)t=null;else if(r=e.tag,r===13){if(t=R1(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ll=t,null}function W1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(r2()){case kd:return 1;case D1:return 4;case sl:case n2:return 16;case M1:return 536870912;default:return 16}default:return 16}}var Jn=null,Ld=null,$a=null;function H1(){if($a)return $a;var t,e=Ld,r=e.length,s,a="value"in Jn?Jn.value:Jn.textContent,l=a.length;for(t=0;t<r&&e[t]===a[t];t++);var h=r-t;for(s=1;s<=h&&e[r-s]===a[l-s];s++);return $a=a.slice(t,1<s?1-s:void 0)}function Xa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _a(){return!0}function uf(){return!1}function Mr(t){function e(r,s,a,l,h){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=l,this.target=h,this.currentTarget=null;for(var x in t)t.hasOwnProperty(x)&&(r=t[x],this[x]=r?r(l):l[x]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?_a:uf,this.isPropagationStopped=uf,this}return _t(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=_a)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=_a)},persist:function(){},isPersistent:_a}),e}var zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bd=Mr(zs),ta=_t({},zs,{view:0,detail:0}),m2=Mr(ta),Tu,Ru,uo,Fl=_t({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uo&&(uo&&t.type==="mousemove"?(Tu=t.screenX-uo.screenX,Ru=t.screenY-uo.screenY):Ru=Tu=0,uo=t),Tu)},movementY:function(t){return"movementY"in t?t.movementY:Ru}}),cf=Mr(Fl),x2=_t({},Fl,{dataTransfer:0}),w2=Mr(x2),y2=_t({},ta,{relatedTarget:0}),Ou=Mr(y2),v2=_t({},zs,{animationName:0,elapsedTime:0,pseudoElement:0}),E2=Mr(v2),_2=_t({},zs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),C2=Mr(_2),b2=_t({},zs,{data:0}),df=Mr(b2),A2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function N2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=I2[t])?!!e[t]:!1}function jd(){return N2}var T2=_t({},ta,{key:function(t){if(t.key){var e=A2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?S2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jd,charCode:function(t){return t.type==="keypress"?Xa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),R2=Mr(T2),O2=_t({},Fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hf=Mr(O2),k2=_t({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jd}),P2=Mr(k2),D2=_t({},zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),M2=Mr(D2),L2=_t({},Fl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),B2=Mr(L2),j2=[9,13,27,32],Fd=Rn&&"CompositionEvent"in window,_o=null;Rn&&"documentMode"in document&&(_o=document.documentMode);var F2=Rn&&"TextEvent"in window&&!_o,G1=Rn&&(!Fd||_o&&8<_o&&11>=_o),ff=" ",gf=!1;function $1(t,e){switch(t){case"keyup":return j2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gs=!1;function U2(t,e){switch(t){case"compositionend":return X1(e);case"keypress":return e.which!==32?null:(gf=!0,ff);case"textInput":return t=e.data,t===ff&&gf?null:t;default:return null}}function z2(t,e){if(gs)return t==="compositionend"||!Fd&&$1(t,e)?(t=H1(),$a=Ld=Jn=null,gs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return G1&&e.locale!=="ko"?null:e.data;default:return null}}var V2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!V2[t.type]:e==="textarea"}function K1(t,e,r,s){A1(s),e=ul(e,"onChange"),0<e.length&&(r=new Bd("onChange","change",null,r,s),t.push({event:r,listeners:e}))}var Co=null,Bo=null;function W2(t){sg(t,0)}function Ul(t){var e=xs(t);if(w1(e))return t}function H2(t,e){if(t==="change")return e}var q1=!1;if(Rn){var ku;if(Rn){var Pu="oninput"in document;if(!Pu){var mf=document.createElement("div");mf.setAttribute("oninput","return;"),Pu=typeof mf.oninput=="function"}ku=Pu}else ku=!1;q1=ku&&(!document.documentMode||9<document.documentMode)}function xf(){Co&&(Co.detachEvent("onpropertychange",Y1),Bo=Co=null)}function Y1(t){if(t.propertyName==="value"&&Ul(Bo)){var e=[];K1(e,Bo,t,Od(t)),T1(W2,e)}}function G2(t,e,r){t==="focusin"?(xf(),Co=e,Bo=r,Co.attachEvent("onpropertychange",Y1)):t==="focusout"&&xf()}function $2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ul(Bo)}function X2(t,e){if(t==="click")return Ul(e)}function K2(t,e){if(t==="input"||t==="change")return Ul(e)}function q2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ln=typeof Object.is=="function"?Object.is:q2;function jo(t,e){if(ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!oc.call(e,a)||!ln(t[a],e[a]))return!1}return!0}function wf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yf(t,e){var r=wf(t);t=0;for(var s;r;){if(r.nodeType===3){if(s=t+r.textContent.length,t<=e&&s>=e)return{node:r,offset:e-t};t=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=wf(r)}}function Z1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Z1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Q1(){for(var t=window,e=rl();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=rl(t.document)}return e}function Ud(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Y2(t){var e=Q1(),r=t.focusedElem,s=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Z1(r.ownerDocument.documentElement,r)){if(s!==null&&Ud(r)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,l=Math.min(s.start,a);s=s.end===void 0?l:Math.min(s.end,a),!t.extend&&l>s&&(a=s,s=l,l=a),a=yf(r,l);var h=yf(r,s);a&&h&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==h.node||t.focusOffset!==h.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),l>s?(t.addRange(e),t.extend(h.node,h.offset)):(e.setEnd(h.node,h.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Z2=Rn&&"documentMode"in document&&11>=document.documentMode,ps=null,Ac=null,bo=null,Sc=!1;function vf(t,e,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Sc||ps==null||ps!==rl(s)||(s=ps,"selectionStart"in s&&Ud(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),bo&&jo(bo,s)||(bo=s,s=ul(Ac,"onSelect"),0<s.length&&(e=new Bd("onSelect","select",null,e,r),t.push({event:e,listeners:s}),e.target=ps)))}function Ca(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ms={animationend:Ca("Animation","AnimationEnd"),animationiteration:Ca("Animation","AnimationIteration"),animationstart:Ca("Animation","AnimationStart"),transitionend:Ca("Transition","TransitionEnd")},Du={},J1={};Rn&&(J1=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function zl(t){if(Du[t])return Du[t];if(!ms[t])return t;var e=ms[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in J1)return Du[t]=e[r];return t}var eg=zl("animationend"),tg=zl("animationiteration"),rg=zl("animationstart"),ng=zl("transitionend"),ig=new Map,Ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fi(t,e){ig.set(t,e),Gi(e,[t])}for(var Mu=0;Mu<Ef.length;Mu++){var Lu=Ef[Mu],Q2=Lu.toLowerCase(),J2=Lu[0].toUpperCase()+Lu.slice(1);fi(Q2,"on"+J2)}fi(eg,"onAnimationEnd");fi(tg,"onAnimationIteration");fi(rg,"onAnimationStart");fi("dblclick","onDoubleClick");fi("focusin","onFocus");fi("focusout","onBlur");fi(ng,"onTransitionEnd");ks("onMouseEnter",["mouseout","mouseover"]);ks("onMouseLeave",["mouseout","mouseover"]);ks("onPointerEnter",["pointerout","pointerover"]);ks("onPointerLeave",["pointerout","pointerover"]);Gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ew=new Set("cancel close invalid load scroll toggle".split(" ").concat(xo));function _f(t,e,r){var s=t.type||"unknown-event";t.currentTarget=r,Qx(s,e,void 0,t),t.currentTarget=null}function sg(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var s=t[r],a=s.event;s=s.listeners;e:{var l=void 0;if(e)for(var h=s.length-1;0<=h;h--){var x=s[h],p=x.instance,g=x.currentTarget;if(x=x.listener,p!==l&&a.isPropagationStopped())break e;_f(a,x,g),l=p}else for(h=0;h<s.length;h++){if(x=s[h],p=x.instance,g=x.currentTarget,x=x.listener,p!==l&&a.isPropagationStopped())break e;_f(a,x,g),l=p}}}if(il)throw t=Ec,il=!1,Ec=null,t}function ht(t,e){var r=e[Oc];r===void 0&&(r=e[Oc]=new Set);var s=t+"__bubble";r.has(s)||(og(e,t,2,!1),r.add(s))}function Bu(t,e,r){var s=0;e&&(s|=4),og(r,t,s,e)}var ba="_reactListening"+Math.random().toString(36).slice(2);function Fo(t){if(!t[ba]){t[ba]=!0,f1.forEach(function(r){r!=="selectionchange"&&(ew.has(r)||Bu(r,!1,t),Bu(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ba]||(e[ba]=!0,Bu("selectionchange",!1,e))}}function og(t,e,r,s){switch(W1(e)){case 1:var a=g2;break;case 4:a=p2;break;default:a=Md}r=a.bind(null,e,r,t),a=void 0,!vc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),s?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function ju(t,e,r,s,a){var l=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var h=s.tag;if(h===3||h===4){var x=s.stateNode.containerInfo;if(x===a||x.nodeType===8&&x.parentNode===a)break;if(h===4)for(h=s.return;h!==null;){var p=h.tag;if((p===3||p===4)&&(p=h.stateNode.containerInfo,p===a||p.nodeType===8&&p.parentNode===a))return;h=h.return}for(;x!==null;){if(h=Pi(x),h===null)return;if(p=h.tag,p===5||p===6){s=l=h;continue e}x=x.parentNode}}s=s.return}T1(function(){var g=l,y=Od(r),v=[];e:{var b=ig.get(t);if(b!==void 0){var N=Bd,O=t;switch(t){case"keypress":if(Xa(r)===0)break e;case"keydown":case"keyup":N=R2;break;case"focusin":O="focus",N=Ou;break;case"focusout":O="blur",N=Ou;break;case"beforeblur":case"afterblur":N=Ou;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=cf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=w2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=P2;break;case eg:case tg:case rg:N=E2;break;case ng:N=M2;break;case"scroll":N=m2;break;case"wheel":N=B2;break;case"copy":case"cut":case"paste":N=C2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=hf}var L=(e&4)!==0,j=!L&&t==="scroll",k=L?b!==null?b+"Capture":null:b;L=[];for(var R=g,I;R!==null;){I=R;var B=I.stateNode;if(I.tag===5&&B!==null&&(I=B,k!==null&&(B=Po(R,k),B!=null&&L.push(Uo(R,B,I)))),j)break;R=R.return}0<L.length&&(b=new N(b,O,null,r,y),v.push({event:b,listeners:L}))}}if(!(e&7)){e:{if(b=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",b&&r!==wc&&(O=r.relatedTarget||r.fromElement)&&(Pi(O)||O[On]))break e;if((N||b)&&(b=y.window===y?y:(b=y.ownerDocument)?b.defaultView||b.parentWindow:window,N?(O=r.relatedTarget||r.toElement,N=g,O=O?Pi(O):null,O!==null&&(j=$i(O),O!==j||O.tag!==5&&O.tag!==6)&&(O=null)):(N=null,O=g),N!==O)){if(L=cf,B="onMouseLeave",k="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(L=hf,B="onPointerLeave",k="onPointerEnter",R="pointer"),j=N==null?b:xs(N),I=O==null?b:xs(O),b=new L(B,R+"leave",N,r,y),b.target=j,b.relatedTarget=I,B=null,Pi(y)===g&&(L=new L(k,R+"enter",O,r,y),L.target=I,L.relatedTarget=j,B=L),j=B,N&&O)t:{for(L=N,k=O,R=0,I=L;I;I=ns(I))R++;for(I=0,B=k;B;B=ns(B))I++;for(;0<R-I;)L=ns(L),R--;for(;0<I-R;)k=ns(k),I--;for(;R--;){if(L===k||k!==null&&L===k.alternate)break t;L=ns(L),k=ns(k)}L=null}else L=null;N!==null&&Cf(v,b,N,L,!1),O!==null&&j!==null&&Cf(v,j,O,L,!0)}}e:{if(b=g?xs(g):window,N=b.nodeName&&b.nodeName.toLowerCase(),N==="select"||N==="input"&&b.type==="file")var W=H2;else if(pf(b))if(q1)W=K2;else{W=$2;var $=G2}else(N=b.nodeName)&&N.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(W=X2);if(W&&(W=W(t,g))){K1(v,W,r,y);break e}$&&$(t,b,g),t==="focusout"&&($=b._wrapperState)&&$.controlled&&b.type==="number"&&fc(b,"number",b.value)}switch($=g?xs(g):window,t){case"focusin":(pf($)||$.contentEditable==="true")&&(ps=$,Ac=g,bo=null);break;case"focusout":bo=Ac=ps=null;break;case"mousedown":Sc=!0;break;case"contextmenu":case"mouseup":case"dragend":Sc=!1,vf(v,r,y);break;case"selectionchange":if(Z2)break;case"keydown":case"keyup":vf(v,r,y)}var U;if(Fd)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else gs?$1(t,r)&&(D="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(G1&&r.locale!=="ko"&&(gs||D!=="onCompositionStart"?D==="onCompositionEnd"&&gs&&(U=H1()):(Jn=y,Ld="value"in Jn?Jn.value:Jn.textContent,gs=!0)),$=ul(g,D),0<$.length&&(D=new df(D,t,null,r,y),v.push({event:D,listeners:$}),U?D.data=U:(U=X1(r),U!==null&&(D.data=U)))),(U=F2?U2(t,r):z2(t,r))&&(g=ul(g,"onBeforeInput"),0<g.length&&(y=new df("onBeforeInput","beforeinput",null,r,y),v.push({event:y,listeners:g}),y.data=U))}sg(v,e)})}function Uo(t,e,r){return{instance:t,listener:e,currentTarget:r}}function ul(t,e){for(var r=e+"Capture",s=[];t!==null;){var a=t,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Po(t,r),l!=null&&s.unshift(Uo(t,l,a)),l=Po(t,e),l!=null&&s.push(Uo(t,l,a))),t=t.return}return s}function ns(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Cf(t,e,r,s,a){for(var l=e._reactName,h=[];r!==null&&r!==s;){var x=r,p=x.alternate,g=x.stateNode;if(p!==null&&p===s)break;x.tag===5&&g!==null&&(x=g,a?(p=Po(r,l),p!=null&&h.unshift(Uo(r,p,x))):a||(p=Po(r,l),p!=null&&h.push(Uo(r,p,x)))),r=r.return}h.length!==0&&t.push({event:e,listeners:h})}var tw=/\r\n?/g,rw=/\u0000|\uFFFD/g;function bf(t){return(typeof t=="string"?t:""+t).replace(tw,`
`).replace(rw,"")}function Aa(t,e,r){if(e=bf(e),bf(t)!==e&&r)throw Error(ne(425))}function cl(){}var Ic=null,Nc=null;function Tc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rc=typeof setTimeout=="function"?setTimeout:void 0,nw=typeof clearTimeout=="function"?clearTimeout:void 0,Af=typeof Promise=="function"?Promise:void 0,iw=typeof queueMicrotask=="function"?queueMicrotask:typeof Af<"u"?function(t){return Af.resolve(null).then(t).catch(sw)}:Rc;function sw(t){setTimeout(function(){throw t})}function Fu(t,e){var r=e,s=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){t.removeChild(a),Lo(e);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);Lo(e)}function si(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Vs=Math.random().toString(36).slice(2),xn="__reactFiber$"+Vs,zo="__reactProps$"+Vs,On="__reactContainer$"+Vs,Oc="__reactEvents$"+Vs,ow="__reactListeners$"+Vs,aw="__reactHandles$"+Vs;function Pi(t){var e=t[xn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[On]||r[xn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Sf(t);t!==null;){if(r=t[xn])return r;t=Sf(t)}return e}t=r,r=t.parentNode}return null}function ra(t){return t=t[xn]||t[On],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function Vl(t){return t[zo]||null}var kc=[],ws=-1;function gi(t){return{current:t}}function gt(t){0>ws||(t.current=kc[ws],kc[ws]=null,ws--)}function ct(t,e){ws++,kc[ws]=t.current,t.current=e}var hi={},ar=gi(hi),Cr=gi(!1),Fi=hi;function Ps(t,e){var r=t.type.contextTypes;if(!r)return hi;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=e[l];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function br(t){return t=t.childContextTypes,t!=null}function dl(){gt(Cr),gt(ar)}function If(t,e,r){if(ar.current!==hi)throw Error(ne(168));ct(ar,e),ct(Cr,r)}function ag(t,e,r){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in e))throw Error(ne(108,Gx(t)||"Unknown",a));return _t({},r,s)}function hl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hi,Fi=ar.current,ct(ar,t),ct(Cr,Cr.current),!0}function Nf(t,e,r){var s=t.stateNode;if(!s)throw Error(ne(169));r?(t=ag(t,e,Fi),s.__reactInternalMemoizedMergedChildContext=t,gt(Cr),gt(ar),ct(ar,t)):gt(Cr),ct(Cr,r)}var Sn=null,Wl=!1,Uu=!1;function lg(t){Sn===null?Sn=[t]:Sn.push(t)}function lw(t){Wl=!0,lg(t)}function pi(){if(!Uu&&Sn!==null){Uu=!0;var t=0,e=Qe;try{var r=Sn;for(Qe=1;t<r.length;t++){var s=r[t];do s=s(!0);while(s!==null)}Sn=null,Wl=!1}catch(a){throw Sn!==null&&(Sn=Sn.slice(t+1)),P1(kd,pi),a}finally{Qe=e,Uu=!1}}return null}var ys=[],vs=0,fl=null,gl=0,Vr=[],Wr=0,Ui=null,In=1,Nn="";function Ii(t,e){ys[vs++]=gl,ys[vs++]=fl,fl=t,gl=e}function ug(t,e,r){Vr[Wr++]=In,Vr[Wr++]=Nn,Vr[Wr++]=Ui,Ui=t;var s=In;t=Nn;var a=32-on(s)-1;s&=~(1<<a),r+=1;var l=32-on(e)+a;if(30<l){var h=a-a%5;l=(s&(1<<h)-1).toString(32),s>>=h,a-=h,In=1<<32-on(e)+a|r<<a|s,Nn=l+t}else In=1<<l|r<<a|s,Nn=t}function zd(t){t.return!==null&&(Ii(t,1),ug(t,1,0))}function Vd(t){for(;t===fl;)fl=ys[--vs],ys[vs]=null,gl=ys[--vs],ys[vs]=null;for(;t===Ui;)Ui=Vr[--Wr],Vr[Wr]=null,Nn=Vr[--Wr],Vr[Wr]=null,In=Vr[--Wr],Vr[Wr]=null}var kr=null,Or=null,xt=!1,sn=null;function cg(t,e){var r=Hr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Tf(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kr=t,Or=si(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kr=t,Or=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ui!==null?{id:In,overflow:Nn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Hr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,kr=t,Or=null,!0):!1;default:return!1}}function Pc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dc(t){if(xt){var e=Or;if(e){var r=e;if(!Tf(t,e)){if(Pc(t))throw Error(ne(418));e=si(r.nextSibling);var s=kr;e&&Tf(t,e)?cg(s,r):(t.flags=t.flags&-4097|2,xt=!1,kr=t)}}else{if(Pc(t))throw Error(ne(418));t.flags=t.flags&-4097|2,xt=!1,kr=t}}}function Rf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kr=t}function Sa(t){if(t!==kr)return!1;if(!xt)return Rf(t),xt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tc(t.type,t.memoizedProps)),e&&(e=Or)){if(Pc(t))throw dg(),Error(ne(418));for(;e;)cg(t,e),e=si(e.nextSibling)}if(Rf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Or=si(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Or=null}}else Or=kr?si(t.stateNode.nextSibling):null;return!0}function dg(){for(var t=Or;t;)t=si(t.nextSibling)}function Ds(){Or=kr=null,xt=!1}function Wd(t){sn===null?sn=[t]:sn.push(t)}var uw=Mn.ReactCurrentBatchConfig;function co(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var s=r.stateNode}if(!s)throw Error(ne(147,t));var a=s,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(h){var x=a.refs;h===null?delete x[l]:x[l]=h},e._stringRef=l,e)}if(typeof t!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,t))}return t}function Ia(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Of(t){var e=t._init;return e(t._payload)}function hg(t){function e(k,R){if(t){var I=k.deletions;I===null?(k.deletions=[R],k.flags|=16):I.push(R)}}function r(k,R){if(!t)return null;for(;R!==null;)e(k,R),R=R.sibling;return null}function s(k,R){for(k=new Map;R!==null;)R.key!==null?k.set(R.key,R):k.set(R.index,R),R=R.sibling;return k}function a(k,R){return k=ui(k,R),k.index=0,k.sibling=null,k}function l(k,R,I){return k.index=I,t?(I=k.alternate,I!==null?(I=I.index,I<R?(k.flags|=2,R):I):(k.flags|=2,R)):(k.flags|=1048576,R)}function h(k){return t&&k.alternate===null&&(k.flags|=2),k}function x(k,R,I,B){return R===null||R.tag!==6?(R=Xu(I,k.mode,B),R.return=k,R):(R=a(R,I),R.return=k,R)}function p(k,R,I,B){var W=I.type;return W===fs?y(k,R,I.props.children,B,I.key):R!==null&&(R.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Xn&&Of(W)===R.type)?(B=a(R,I.props),B.ref=co(k,R,I),B.return=k,B):(B=el(I.type,I.key,I.props,null,k.mode,B),B.ref=co(k,R,I),B.return=k,B)}function g(k,R,I,B){return R===null||R.tag!==4||R.stateNode.containerInfo!==I.containerInfo||R.stateNode.implementation!==I.implementation?(R=Ku(I,k.mode,B),R.return=k,R):(R=a(R,I.children||[]),R.return=k,R)}function y(k,R,I,B,W){return R===null||R.tag!==7?(R=ji(I,k.mode,B,W),R.return=k,R):(R=a(R,I),R.return=k,R)}function v(k,R,I){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Xu(""+R,k.mode,I),R.return=k,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ma:return I=el(R.type,R.key,R.props,null,k.mode,I),I.ref=co(k,null,R),I.return=k,I;case hs:return R=Ku(R,k.mode,I),R.return=k,R;case Xn:var B=R._init;return v(k,B(R._payload),I)}if(po(R)||so(R))return R=ji(R,k.mode,I,null),R.return=k,R;Ia(k,R)}return null}function b(k,R,I,B){var W=R!==null?R.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return W!==null?null:x(k,R,""+I,B);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ma:return I.key===W?p(k,R,I,B):null;case hs:return I.key===W?g(k,R,I,B):null;case Xn:return W=I._init,b(k,R,W(I._payload),B)}if(po(I)||so(I))return W!==null?null:y(k,R,I,B,null);Ia(k,I)}return null}function N(k,R,I,B,W){if(typeof B=="string"&&B!==""||typeof B=="number")return k=k.get(I)||null,x(R,k,""+B,W);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case ma:return k=k.get(B.key===null?I:B.key)||null,p(R,k,B,W);case hs:return k=k.get(B.key===null?I:B.key)||null,g(R,k,B,W);case Xn:var $=B._init;return N(k,R,I,$(B._payload),W)}if(po(B)||so(B))return k=k.get(I)||null,y(R,k,B,W,null);Ia(R,B)}return null}function O(k,R,I,B){for(var W=null,$=null,U=R,D=R=0,C=null;U!==null&&D<I.length;D++){U.index>D?(C=U,U=null):C=U.sibling;var F=b(k,U,I[D],B);if(F===null){U===null&&(U=C);break}t&&U&&F.alternate===null&&e(k,U),R=l(F,R,D),$===null?W=F:$.sibling=F,$=F,U=C}if(D===I.length)return r(k,U),xt&&Ii(k,D),W;if(U===null){for(;D<I.length;D++)U=v(k,I[D],B),U!==null&&(R=l(U,R,D),$===null?W=U:$.sibling=U,$=U);return xt&&Ii(k,D),W}for(U=s(k,U);D<I.length;D++)C=N(U,k,D,I[D],B),C!==null&&(t&&C.alternate!==null&&U.delete(C.key===null?D:C.key),R=l(C,R,D),$===null?W=C:$.sibling=C,$=C);return t&&U.forEach(function(Y){return e(k,Y)}),xt&&Ii(k,D),W}function L(k,R,I,B){var W=so(I);if(typeof W!="function")throw Error(ne(150));if(I=W.call(I),I==null)throw Error(ne(151));for(var $=W=null,U=R,D=R=0,C=null,F=I.next();U!==null&&!F.done;D++,F=I.next()){U.index>D?(C=U,U=null):C=U.sibling;var Y=b(k,U,F.value,B);if(Y===null){U===null&&(U=C);break}t&&U&&Y.alternate===null&&e(k,U),R=l(Y,R,D),$===null?W=Y:$.sibling=Y,$=Y,U=C}if(F.done)return r(k,U),xt&&Ii(k,D),W;if(U===null){for(;!F.done;D++,F=I.next())F=v(k,F.value,B),F!==null&&(R=l(F,R,D),$===null?W=F:$.sibling=F,$=F);return xt&&Ii(k,D),W}for(U=s(k,U);!F.done;D++,F=I.next())F=N(U,k,D,F.value,B),F!==null&&(t&&F.alternate!==null&&U.delete(F.key===null?D:F.key),R=l(F,R,D),$===null?W=F:$.sibling=F,$=F);return t&&U.forEach(function(K){return e(k,K)}),xt&&Ii(k,D),W}function j(k,R,I,B){if(typeof I=="object"&&I!==null&&I.type===fs&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case ma:e:{for(var W=I.key,$=R;$!==null;){if($.key===W){if(W=I.type,W===fs){if($.tag===7){r(k,$.sibling),R=a($,I.props.children),R.return=k,k=R;break e}}else if($.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Xn&&Of(W)===$.type){r(k,$.sibling),R=a($,I.props),R.ref=co(k,$,I),R.return=k,k=R;break e}r(k,$);break}else e(k,$);$=$.sibling}I.type===fs?(R=ji(I.props.children,k.mode,B,I.key),R.return=k,k=R):(B=el(I.type,I.key,I.props,null,k.mode,B),B.ref=co(k,R,I),B.return=k,k=B)}return h(k);case hs:e:{for($=I.key;R!==null;){if(R.key===$)if(R.tag===4&&R.stateNode.containerInfo===I.containerInfo&&R.stateNode.implementation===I.implementation){r(k,R.sibling),R=a(R,I.children||[]),R.return=k,k=R;break e}else{r(k,R);break}else e(k,R);R=R.sibling}R=Ku(I,k.mode,B),R.return=k,k=R}return h(k);case Xn:return $=I._init,j(k,R,$(I._payload),B)}if(po(I))return O(k,R,I,B);if(so(I))return L(k,R,I,B);Ia(k,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,R!==null&&R.tag===6?(r(k,R.sibling),R=a(R,I),R.return=k,k=R):(r(k,R),R=Xu(I,k.mode,B),R.return=k,k=R),h(k)):r(k,R)}return j}var Ms=hg(!0),fg=hg(!1),pl=gi(null),ml=null,Es=null,Hd=null;function Gd(){Hd=Es=ml=null}function $d(t){var e=pl.current;gt(pl),t._currentValue=e}function Mc(t,e,r){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===r)break;t=t.return}}function Ts(t,e){ml=t,Hd=Es=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_r=!0),t.firstContext=null)}function $r(t){var e=t._currentValue;if(Hd!==t)if(t={context:t,memoizedValue:e,next:null},Es===null){if(ml===null)throw Error(ne(308));Es=t,ml.dependencies={lanes:0,firstContext:t}}else Es=Es.next=t;return e}var Di=null;function Xd(t){Di===null?Di=[t]:Di.push(t)}function gg(t,e,r,s){var a=e.interleaved;return a===null?(r.next=r,Xd(e)):(r.next=a.next,a.next=r),e.interleaved=r,kn(t,s)}function kn(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Kn=!1;function Kd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Tn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function oi(t,e,r){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Ge&2){var a=s.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),s.pending=e,kn(t,r)}return a=s.interleaved,a===null?(e.next=e,Xd(s)):(e.next=a.next,a.next=e),s.interleaved=e,kn(t,r)}function Ka(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,Pd(t,r)}}function kf(t,e){var r=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var h={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=h:l=l.next=h,r=r.next}while(r!==null);l===null?a=l=e:l=l.next=e}else a=l=e;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:s.shared,effects:s.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function xl(t,e,r,s){var a=t.updateQueue;Kn=!1;var l=a.firstBaseUpdate,h=a.lastBaseUpdate,x=a.shared.pending;if(x!==null){a.shared.pending=null;var p=x,g=p.next;p.next=null,h===null?l=g:h.next=g,h=p;var y=t.alternate;y!==null&&(y=y.updateQueue,x=y.lastBaseUpdate,x!==h&&(x===null?y.firstBaseUpdate=g:x.next=g,y.lastBaseUpdate=p))}if(l!==null){var v=a.baseState;h=0,y=g=p=null,x=l;do{var b=x.lane,N=x.eventTime;if((s&b)===b){y!==null&&(y=y.next={eventTime:N,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var O=t,L=x;switch(b=e,N=r,L.tag){case 1:if(O=L.payload,typeof O=="function"){v=O.call(N,v,b);break e}v=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=L.payload,b=typeof O=="function"?O.call(N,v,b):O,b==null)break e;v=_t({},v,b);break e;case 2:Kn=!0}}x.callback!==null&&x.lane!==0&&(t.flags|=64,b=a.effects,b===null?a.effects=[x]:b.push(x))}else N={eventTime:N,lane:b,tag:x.tag,payload:x.payload,callback:x.callback,next:null},y===null?(g=y=N,p=v):y=y.next=N,h|=b;if(x=x.next,x===null){if(x=a.shared.pending,x===null)break;b=x,x=b.next,b.next=null,a.lastBaseUpdate=b,a.shared.pending=null}}while(!0);if(y===null&&(p=v),a.baseState=p,a.firstBaseUpdate=g,a.lastBaseUpdate=y,e=a.shared.interleaved,e!==null){a=e;do h|=a.lane,a=a.next;while(a!==e)}else l===null&&(a.shared.lanes=0);Vi|=h,t.lanes=h,t.memoizedState=v}}function Pf(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(ne(191,a));a.call(s)}}}var na={},vn=gi(na),Vo=gi(na),Wo=gi(na);function Mi(t){if(t===na)throw Error(ne(174));return t}function qd(t,e){switch(ct(Wo,e),ct(Vo,t),ct(vn,na),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pc(e,t)}gt(vn),ct(vn,e)}function Ls(){gt(vn),gt(Vo),gt(Wo)}function mg(t){Mi(Wo.current);var e=Mi(vn.current),r=pc(e,t.type);e!==r&&(ct(Vo,t),ct(vn,r))}function Yd(t){Vo.current===t&&(gt(vn),gt(Vo))}var vt=gi(0);function wl(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zu=[];function Zd(){for(var t=0;t<zu.length;t++)zu[t]._workInProgressVersionPrimary=null;zu.length=0}var qa=Mn.ReactCurrentDispatcher,Vu=Mn.ReactCurrentBatchConfig,zi=0,Et=null,Ft=null,Gt=null,yl=!1,Ao=!1,Ho=0,cw=0;function ir(){throw Error(ne(321))}function Qd(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ln(t[r],e[r]))return!1;return!0}function Jd(t,e,r,s,a,l){if(zi=l,Et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qa.current=t===null||t.memoizedState===null?gw:pw,t=r(s,a),Ao){l=0;do{if(Ao=!1,Ho=0,25<=l)throw Error(ne(301));l+=1,Gt=Ft=null,e.updateQueue=null,qa.current=mw,t=r(s,a)}while(Ao)}if(qa.current=vl,e=Ft!==null&&Ft.next!==null,zi=0,Gt=Ft=Et=null,yl=!1,e)throw Error(ne(300));return t}function eh(){var t=Ho!==0;return Ho=0,t}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Et.memoizedState=Gt=t:Gt=Gt.next=t,Gt}function Xr(){if(Ft===null){var t=Et.alternate;t=t!==null?t.memoizedState:null}else t=Ft.next;var e=Gt===null?Et.memoizedState:Gt.next;if(e!==null)Gt=e,Ft=t;else{if(t===null)throw Error(ne(310));Ft=t,t={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Gt===null?Et.memoizedState=Gt=t:Gt=Gt.next=t}return Gt}function Go(t,e){return typeof e=="function"?e(t):e}function Wu(t){var e=Xr(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var s=Ft,a=s.baseQueue,l=r.pending;if(l!==null){if(a!==null){var h=a.next;a.next=l.next,l.next=h}s.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,s=s.baseState;var x=h=null,p=null,g=l;do{var y=g.lane;if((zi&y)===y)p!==null&&(p=p.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),s=g.hasEagerState?g.eagerState:t(s,g.action);else{var v={lane:y,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};p===null?(x=p=v,h=s):p=p.next=v,Et.lanes|=y,Vi|=y}g=g.next}while(g!==null&&g!==l);p===null?h=s:p.next=x,ln(s,e.memoizedState)||(_r=!0),e.memoizedState=s,e.baseState=h,e.baseQueue=p,r.lastRenderedState=s}if(t=r.interleaved,t!==null){a=t;do l=a.lane,Et.lanes|=l,Vi|=l,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Hu(t){var e=Xr(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var s=r.dispatch,a=r.pending,l=e.memoizedState;if(a!==null){r.pending=null;var h=a=a.next;do l=t(l,h.action),h=h.next;while(h!==a);ln(l,e.memoizedState)||(_r=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),r.lastRenderedState=l}return[l,s]}function xg(){}function wg(t,e){var r=Et,s=Xr(),a=e(),l=!ln(s.memoizedState,a);if(l&&(s.memoizedState=a,_r=!0),s=s.queue,th(Eg.bind(null,r,s,t),[t]),s.getSnapshot!==e||l||Gt!==null&&Gt.memoizedState.tag&1){if(r.flags|=2048,$o(9,vg.bind(null,r,s,a,e),void 0,null),$t===null)throw Error(ne(349));zi&30||yg(r,e,a)}return a}function yg(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function vg(t,e,r,s){e.value=r,e.getSnapshot=s,_g(e)&&Cg(t)}function Eg(t,e,r){return r(function(){_g(e)&&Cg(t)})}function _g(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ln(t,r)}catch{return!0}}function Cg(t){var e=kn(t,1);e!==null&&an(e,t,1,-1)}function Df(t){var e=mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:t},e.queue=t,t=t.dispatch=fw.bind(null,Et,t),[e.memoizedState,t]}function $o(t,e,r,s){return t={tag:t,create:e,destroy:r,deps:s,next:null},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(s=r.next,r.next=t,t.next=s,e.lastEffect=t)),t}function bg(){return Xr().memoizedState}function Ya(t,e,r,s){var a=mn();Et.flags|=t,a.memoizedState=$o(1|e,r,void 0,s===void 0?null:s)}function Hl(t,e,r,s){var a=Xr();s=s===void 0?null:s;var l=void 0;if(Ft!==null){var h=Ft.memoizedState;if(l=h.destroy,s!==null&&Qd(s,h.deps)){a.memoizedState=$o(e,r,l,s);return}}Et.flags|=t,a.memoizedState=$o(1|e,r,l,s)}function Mf(t,e){return Ya(8390656,8,t,e)}function th(t,e){return Hl(2048,8,t,e)}function Ag(t,e){return Hl(4,2,t,e)}function Sg(t,e){return Hl(4,4,t,e)}function Ig(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ng(t,e,r){return r=r!=null?r.concat([t]):null,Hl(4,4,Ig.bind(null,e,t),r)}function rh(){}function Tg(t,e){var r=Xr();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Qd(e,s[1])?s[0]:(r.memoizedState=[t,e],t)}function Rg(t,e){var r=Xr();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Qd(e,s[1])?s[0]:(t=t(),r.memoizedState=[t,e],t)}function Og(t,e,r){return zi&21?(ln(r,e)||(r=L1(),Et.lanes|=r,Vi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_r=!0),t.memoizedState=r)}function dw(t,e){var r=Qe;Qe=r!==0&&4>r?r:4,t(!0);var s=Vu.transition;Vu.transition={};try{t(!1),e()}finally{Qe=r,Vu.transition=s}}function kg(){return Xr().memoizedState}function hw(t,e,r){var s=li(t);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Pg(t))Dg(e,r);else if(r=gg(t,e,r,s),r!==null){var a=hr();an(r,t,s,a),Mg(r,e,s)}}function fw(t,e,r){var s=li(t),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Pg(t))Dg(e,a);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var h=e.lastRenderedState,x=l(h,r);if(a.hasEagerState=!0,a.eagerState=x,ln(x,h)){var p=e.interleaved;p===null?(a.next=a,Xd(e)):(a.next=p.next,p.next=a),e.interleaved=a;return}}catch{}finally{}r=gg(t,e,a,s),r!==null&&(a=hr(),an(r,t,s,a),Mg(r,e,s))}}function Pg(t){var e=t.alternate;return t===Et||e!==null&&e===Et}function Dg(t,e){Ao=yl=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Mg(t,e,r){if(r&4194240){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,Pd(t,r)}}var vl={readContext:$r,useCallback:ir,useContext:ir,useEffect:ir,useImperativeHandle:ir,useInsertionEffect:ir,useLayoutEffect:ir,useMemo:ir,useReducer:ir,useRef:ir,useState:ir,useDebugValue:ir,useDeferredValue:ir,useTransition:ir,useMutableSource:ir,useSyncExternalStore:ir,useId:ir,unstable_isNewReconciler:!1},gw={readContext:$r,useCallback:function(t,e){return mn().memoizedState=[t,e===void 0?null:e],t},useContext:$r,useEffect:Mf,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ya(4194308,4,Ig.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ya(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ya(4,2,t,e)},useMemo:function(t,e){var r=mn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var s=mn();return e=r!==void 0?r(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=hw.bind(null,Et,t),[s.memoizedState,t]},useRef:function(t){var e=mn();return t={current:t},e.memoizedState=t},useState:Df,useDebugValue:rh,useDeferredValue:function(t){return mn().memoizedState=t},useTransition:function(){var t=Df(!1),e=t[0];return t=dw.bind(null,t[1]),mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var s=Et,a=mn();if(xt){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=e(),$t===null)throw Error(ne(349));zi&30||yg(s,e,r)}a.memoizedState=r;var l={value:r,getSnapshot:e};return a.queue=l,Mf(Eg.bind(null,s,l,t),[t]),s.flags|=2048,$o(9,vg.bind(null,s,l,r,e),void 0,null),r},useId:function(){var t=mn(),e=$t.identifierPrefix;if(xt){var r=Nn,s=In;r=(s&~(1<<32-on(s)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ho++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=cw++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pw={readContext:$r,useCallback:Tg,useContext:$r,useEffect:th,useImperativeHandle:Ng,useInsertionEffect:Ag,useLayoutEffect:Sg,useMemo:Rg,useReducer:Wu,useRef:bg,useState:function(){return Wu(Go)},useDebugValue:rh,useDeferredValue:function(t){var e=Xr();return Og(e,Ft.memoizedState,t)},useTransition:function(){var t=Wu(Go)[0],e=Xr().memoizedState;return[t,e]},useMutableSource:xg,useSyncExternalStore:wg,useId:kg,unstable_isNewReconciler:!1},mw={readContext:$r,useCallback:Tg,useContext:$r,useEffect:th,useImperativeHandle:Ng,useInsertionEffect:Ag,useLayoutEffect:Sg,useMemo:Rg,useReducer:Hu,useRef:bg,useState:function(){return Hu(Go)},useDebugValue:rh,useDeferredValue:function(t){var e=Xr();return Ft===null?e.memoizedState=t:Og(e,Ft.memoizedState,t)},useTransition:function(){var t=Hu(Go)[0],e=Xr().memoizedState;return[t,e]},useMutableSource:xg,useSyncExternalStore:wg,useId:kg,unstable_isNewReconciler:!1};function tn(t,e){if(t&&t.defaultProps){e=_t({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Lc(t,e,r,s){e=t.memoizedState,r=r(s,e),r=r==null?e:_t({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Gl={isMounted:function(t){return(t=t._reactInternals)?$i(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var s=hr(),a=li(t),l=Tn(s,a);l.payload=e,r!=null&&(l.callback=r),e=oi(t,l,a),e!==null&&(an(e,t,a,s),Ka(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var s=hr(),a=li(t),l=Tn(s,a);l.tag=1,l.payload=e,r!=null&&(l.callback=r),e=oi(t,l,a),e!==null&&(an(e,t,a,s),Ka(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=hr(),s=li(t),a=Tn(r,s);a.tag=2,e!=null&&(a.callback=e),e=oi(t,a,s),e!==null&&(an(e,t,s,r),Ka(e,t,s))}};function Lf(t,e,r,s,a,l,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,l,h):e.prototype&&e.prototype.isPureReactComponent?!jo(r,s)||!jo(a,l):!0}function Lg(t,e,r){var s=!1,a=hi,l=e.contextType;return typeof l=="object"&&l!==null?l=$r(l):(a=br(e)?Fi:ar.current,s=e.contextTypes,l=(s=s!=null)?Ps(t,a):hi),e=new e(r,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gl,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=l),e}function Bf(t,e,r,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,s),e.state!==t&&Gl.enqueueReplaceState(e,e.state,null)}function Bc(t,e,r,s){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},Kd(t);var l=e.contextType;typeof l=="object"&&l!==null?a.context=$r(l):(l=br(e)?Fi:ar.current,a.context=Ps(t,l)),a.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(Lc(t,e,l,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Gl.enqueueReplaceState(a,a.state,null),xl(t,r,a,s),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Bs(t,e){try{var r="",s=e;do r+=Hx(s),s=s.return;while(s);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:a,digest:null}}function Gu(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function jc(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var xw=typeof WeakMap=="function"?WeakMap:Map;function Bg(t,e,r){r=Tn(-1,r),r.tag=3,r.payload={element:null};var s=e.value;return r.callback=function(){_l||(_l=!0,Kc=s),jc(t,e)},r}function jg(t,e,r){r=Tn(-1,r),r.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var a=e.value;r.payload=function(){return s(a)},r.callback=function(){jc(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){jc(t,e),typeof s!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var h=e.stack;this.componentDidCatch(e.value,{componentStack:h!==null?h:""})}),r}function jf(t,e,r){var s=t.pingCache;if(s===null){s=t.pingCache=new xw;var a=new Set;s.set(e,a)}else a=s.get(e),a===void 0&&(a=new Set,s.set(e,a));a.has(r)||(a.add(r),t=Ow.bind(null,t,e,r),e.then(t,t))}function Ff(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Uf(t,e,r,s,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Tn(-1,1),e.tag=2,oi(r,e,1))),r.lanes|=1),t)}var ww=Mn.ReactCurrentOwner,_r=!1;function cr(t,e,r,s){e.child=t===null?fg(e,null,r,s):Ms(e,t.child,r,s)}function zf(t,e,r,s,a){r=r.render;var l=e.ref;return Ts(e,a),s=Jd(t,e,r,s,l,a),r=eh(),t!==null&&!_r?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Pn(t,e,a)):(xt&&r&&zd(e),e.flags|=1,cr(t,e,s,a),e.child)}function Vf(t,e,r,s,a){if(t===null){var l=r.type;return typeof l=="function"&&!ch(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=l,Fg(t,e,l,s,a)):(t=el(r.type,null,s,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&a)){var h=l.memoizedProps;if(r=r.compare,r=r!==null?r:jo,r(h,s)&&t.ref===e.ref)return Pn(t,e,a)}return e.flags|=1,t=ui(l,s),t.ref=e.ref,t.return=e,e.child=t}function Fg(t,e,r,s,a){if(t!==null){var l=t.memoizedProps;if(jo(l,s)&&t.ref===e.ref)if(_r=!1,e.pendingProps=s=l,(t.lanes&a)!==0)t.flags&131072&&(_r=!0);else return e.lanes=t.lanes,Pn(t,e,a)}return Fc(t,e,r,s,a)}function Ug(t,e,r){var s=e.pendingProps,a=s.children,l=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(Cs,Nr),Nr|=r;else{if(!(r&1073741824))return t=l!==null?l.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ct(Cs,Nr),Nr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=l!==null?l.baseLanes:r,ct(Cs,Nr),Nr|=s}else l!==null?(s=l.baseLanes|r,e.memoizedState=null):s=r,ct(Cs,Nr),Nr|=s;return cr(t,e,a,r),e.child}function zg(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Fc(t,e,r,s,a){var l=br(r)?Fi:ar.current;return l=Ps(e,l),Ts(e,a),r=Jd(t,e,r,s,l,a),s=eh(),t!==null&&!_r?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Pn(t,e,a)):(xt&&s&&zd(e),e.flags|=1,cr(t,e,r,a),e.child)}function Wf(t,e,r,s,a){if(br(r)){var l=!0;hl(e)}else l=!1;if(Ts(e,a),e.stateNode===null)Za(t,e),Lg(e,r,s),Bc(e,r,s,a),s=!0;else if(t===null){var h=e.stateNode,x=e.memoizedProps;h.props=x;var p=h.context,g=r.contextType;typeof g=="object"&&g!==null?g=$r(g):(g=br(r)?Fi:ar.current,g=Ps(e,g));var y=r.getDerivedStateFromProps,v=typeof y=="function"||typeof h.getSnapshotBeforeUpdate=="function";v||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(x!==s||p!==g)&&Bf(e,h,s,g),Kn=!1;var b=e.memoizedState;h.state=b,xl(e,s,h,a),p=e.memoizedState,x!==s||b!==p||Cr.current||Kn?(typeof y=="function"&&(Lc(e,r,y,s),p=e.memoizedState),(x=Kn||Lf(e,r,x,s,b,p,g))?(v||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(e.flags|=4194308)):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=p),h.props=s,h.state=p,h.context=g,s=x):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{h=e.stateNode,pg(t,e),x=e.memoizedProps,g=e.type===e.elementType?x:tn(e.type,x),h.props=g,v=e.pendingProps,b=h.context,p=r.contextType,typeof p=="object"&&p!==null?p=$r(p):(p=br(r)?Fi:ar.current,p=Ps(e,p));var N=r.getDerivedStateFromProps;(y=typeof N=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(x!==v||b!==p)&&Bf(e,h,s,p),Kn=!1,b=e.memoizedState,h.state=b,xl(e,s,h,a);var O=e.memoizedState;x!==v||b!==O||Cr.current||Kn?(typeof N=="function"&&(Lc(e,r,N,s),O=e.memoizedState),(g=Kn||Lf(e,r,g,s,b,O,p)||!1)?(y||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(s,O,p),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(s,O,p)),typeof h.componentDidUpdate=="function"&&(e.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof h.componentDidUpdate!="function"||x===t.memoizedProps&&b===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&b===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=O),h.props=s,h.state=O,h.context=p,s=g):(typeof h.componentDidUpdate!="function"||x===t.memoizedProps&&b===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&b===t.memoizedState||(e.flags|=1024),s=!1)}return Uc(t,e,r,s,l,a)}function Uc(t,e,r,s,a,l){zg(t,e);var h=(e.flags&128)!==0;if(!s&&!h)return a&&Nf(e,r,!1),Pn(t,e,l);s=e.stateNode,ww.current=e;var x=h&&typeof r.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&h?(e.child=Ms(e,t.child,null,l),e.child=Ms(e,null,x,l)):cr(t,e,x,l),e.memoizedState=s.state,a&&Nf(e,r,!0),e.child}function Vg(t){var e=t.stateNode;e.pendingContext?If(t,e.pendingContext,e.pendingContext!==e.context):e.context&&If(t,e.context,!1),qd(t,e.containerInfo)}function Hf(t,e,r,s,a){return Ds(),Wd(a),e.flags|=256,cr(t,e,r,s),e.child}var zc={dehydrated:null,treeContext:null,retryLane:0};function Vc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wg(t,e,r){var s=e.pendingProps,a=vt.current,l=!1,h=(e.flags&128)!==0,x;if((x=h)||(x=t!==null&&t.memoizedState===null?!1:(a&2)!==0),x?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),ct(vt,a&1),t===null)return Dc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(h=s.children,t=s.fallback,l?(s=e.mode,l=e.child,h={mode:"hidden",children:h},!(s&1)&&l!==null?(l.childLanes=0,l.pendingProps=h):l=Kl(h,s,0,null),t=ji(t,s,r,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=Vc(r),e.memoizedState=zc,t):nh(e,h));if(a=t.memoizedState,a!==null&&(x=a.dehydrated,x!==null))return yw(t,e,h,s,x,a,r);if(l){l=s.fallback,h=e.mode,a=t.child,x=a.sibling;var p={mode:"hidden",children:s.children};return!(h&1)&&e.child!==a?(s=e.child,s.childLanes=0,s.pendingProps=p,e.deletions=null):(s=ui(a,p),s.subtreeFlags=a.subtreeFlags&14680064),x!==null?l=ui(x,l):(l=ji(l,h,r,null),l.flags|=2),l.return=e,s.return=e,s.sibling=l,e.child=s,s=l,l=e.child,h=t.child.memoizedState,h=h===null?Vc(r):{baseLanes:h.baseLanes|r,cachePool:null,transitions:h.transitions},l.memoizedState=h,l.childLanes=t.childLanes&~r,e.memoizedState=zc,s}return l=t.child,t=l.sibling,s=ui(l,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=r),s.return=e,s.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=s,e.memoizedState=null,s}function nh(t,e){return e=Kl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Na(t,e,r,s){return s!==null&&Wd(s),Ms(e,t.child,null,r),t=nh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yw(t,e,r,s,a,l,h){if(r)return e.flags&256?(e.flags&=-257,s=Gu(Error(ne(422))),Na(t,e,h,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=s.fallback,a=e.mode,s=Kl({mode:"visible",children:s.children},a,0,null),l=ji(l,a,h,null),l.flags|=2,s.return=e,l.return=e,s.sibling=l,e.child=s,e.mode&1&&Ms(e,t.child,null,h),e.child.memoizedState=Vc(h),e.memoizedState=zc,l);if(!(e.mode&1))return Na(t,e,h,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var x=s.dgst;return s=x,l=Error(ne(419)),s=Gu(l,s,void 0),Na(t,e,h,s)}if(x=(h&t.childLanes)!==0,_r||x){if(s=$t,s!==null){switch(h&-h){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|h)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,kn(t,a),an(s,t,a,-1))}return uh(),s=Gu(Error(ne(421))),Na(t,e,h,s)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=kw.bind(null,t),a._reactRetry=e,null):(t=l.treeContext,Or=si(a.nextSibling),kr=e,xt=!0,sn=null,t!==null&&(Vr[Wr++]=In,Vr[Wr++]=Nn,Vr[Wr++]=Ui,In=t.id,Nn=t.overflow,Ui=e),e=nh(e,s.children),e.flags|=4096,e)}function Gf(t,e,r){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Mc(t.return,e,r)}function $u(t,e,r,s,a){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=s,l.tail=r,l.tailMode=a)}function Hg(t,e,r){var s=e.pendingProps,a=s.revealOrder,l=s.tail;if(cr(t,e,s.children,r),s=vt.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gf(t,r,e);else if(t.tag===19)Gf(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(ct(vt,s),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&wl(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),$u(e,!1,a,r,l);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&wl(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}$u(e,!0,r,null,l);break;case"together":$u(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Za(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Vi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,r=ui(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ui(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function vw(t,e,r){switch(e.tag){case 3:Vg(e),Ds();break;case 5:mg(e);break;case 1:br(e.type)&&hl(e);break;case 4:qd(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,a=e.memoizedProps.value;ct(pl,s._currentValue),s._currentValue=a;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(ct(vt,vt.current&1),e.flags|=128,null):r&e.child.childLanes?Wg(t,e,r):(ct(vt,vt.current&1),t=Pn(t,e,r),t!==null?t.sibling:null);ct(vt,vt.current&1);break;case 19:if(s=(r&e.childLanes)!==0,t.flags&128){if(s)return Hg(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ct(vt,vt.current),s)break;return null;case 22:case 23:return e.lanes=0,Ug(t,e,r)}return Pn(t,e,r)}var Gg,Wc,$g,Xg;Gg=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Wc=function(){};$g=function(t,e,r,s){var a=t.memoizedProps;if(a!==s){t=e.stateNode,Mi(vn.current);var l=null;switch(r){case"input":a=dc(t,a),s=dc(t,s),l=[];break;case"select":a=_t({},a,{value:void 0}),s=_t({},s,{value:void 0}),l=[];break;case"textarea":a=gc(t,a),s=gc(t,s),l=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=cl)}mc(r,s);var h;r=null;for(g in a)if(!s.hasOwnProperty(g)&&a.hasOwnProperty(g)&&a[g]!=null)if(g==="style"){var x=a[g];for(h in x)x.hasOwnProperty(h)&&(r||(r={}),r[h]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Oo.hasOwnProperty(g)?l||(l=[]):(l=l||[]).push(g,null));for(g in s){var p=s[g];if(x=a!=null?a[g]:void 0,s.hasOwnProperty(g)&&p!==x&&(p!=null||x!=null))if(g==="style")if(x){for(h in x)!x.hasOwnProperty(h)||p&&p.hasOwnProperty(h)||(r||(r={}),r[h]="");for(h in p)p.hasOwnProperty(h)&&x[h]!==p[h]&&(r||(r={}),r[h]=p[h])}else r||(l||(l=[]),l.push(g,r)),r=p;else g==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,x=x?x.__html:void 0,p!=null&&x!==p&&(l=l||[]).push(g,p)):g==="children"?typeof p!="string"&&typeof p!="number"||(l=l||[]).push(g,""+p):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Oo.hasOwnProperty(g)?(p!=null&&g==="onScroll"&&ht("scroll",t),l||x===p||(l=[])):(l=l||[]).push(g,p))}r&&(l=l||[]).push("style",r);var g=l;(e.updateQueue=g)&&(e.flags|=4)}};Xg=function(t,e,r,s){r!==s&&(e.flags|=4)};function ho(t,e){if(!xt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function sr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,s=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=s,t.childLanes=r,e}function Ew(t,e,r){var s=e.pendingProps;switch(Vd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sr(e),null;case 1:return br(e.type)&&dl(),sr(e),null;case 3:return s=e.stateNode,Ls(),gt(Cr),gt(ar),Zd(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Sa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sn!==null&&(Zc(sn),sn=null))),Wc(t,e),sr(e),null;case 5:Yd(e);var a=Mi(Wo.current);if(r=e.type,t!==null&&e.stateNode!=null)$g(t,e,r,s,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(ne(166));return sr(e),null}if(t=Mi(vn.current),Sa(e)){s=e.stateNode,r=e.type;var l=e.memoizedProps;switch(s[xn]=e,s[zo]=l,t=(e.mode&1)!==0,r){case"dialog":ht("cancel",s),ht("close",s);break;case"iframe":case"object":case"embed":ht("load",s);break;case"video":case"audio":for(a=0;a<xo.length;a++)ht(xo[a],s);break;case"source":ht("error",s);break;case"img":case"image":case"link":ht("error",s),ht("load",s);break;case"details":ht("toggle",s);break;case"input":Jh(s,l),ht("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!l.multiple},ht("invalid",s);break;case"textarea":tf(s,l),ht("invalid",s)}mc(r,l),a=null;for(var h in l)if(l.hasOwnProperty(h)){var x=l[h];h==="children"?typeof x=="string"?s.textContent!==x&&(l.suppressHydrationWarning!==!0&&Aa(s.textContent,x,t),a=["children",x]):typeof x=="number"&&s.textContent!==""+x&&(l.suppressHydrationWarning!==!0&&Aa(s.textContent,x,t),a=["children",""+x]):Oo.hasOwnProperty(h)&&x!=null&&h==="onScroll"&&ht("scroll",s)}switch(r){case"input":xa(s),ef(s,l,!0);break;case"textarea":xa(s),rf(s);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(s.onclick=cl)}s=a,e.updateQueue=s,s!==null&&(e.flags|=4)}else{h=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=E1(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=h.createElement(r,{is:s.is}):(t=h.createElement(r),r==="select"&&(h=t,s.multiple?h.multiple=!0:s.size&&(h.size=s.size))):t=h.createElementNS(t,r),t[xn]=e,t[zo]=s,Gg(t,e,!1,!1),e.stateNode=t;e:{switch(h=xc(r,s),r){case"dialog":ht("cancel",t),ht("close",t),a=s;break;case"iframe":case"object":case"embed":ht("load",t),a=s;break;case"video":case"audio":for(a=0;a<xo.length;a++)ht(xo[a],t);a=s;break;case"source":ht("error",t),a=s;break;case"img":case"image":case"link":ht("error",t),ht("load",t),a=s;break;case"details":ht("toggle",t),a=s;break;case"input":Jh(t,s),a=dc(t,s),ht("invalid",t);break;case"option":a=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},a=_t({},s,{value:void 0}),ht("invalid",t);break;case"textarea":tf(t,s),a=gc(t,s),ht("invalid",t);break;default:a=s}mc(r,a),x=a;for(l in x)if(x.hasOwnProperty(l)){var p=x[l];l==="style"?b1(t,p):l==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&_1(t,p)):l==="children"?typeof p=="string"?(r!=="textarea"||p!=="")&&ko(t,p):typeof p=="number"&&ko(t,""+p):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Oo.hasOwnProperty(l)?p!=null&&l==="onScroll"&&ht("scroll",t):p!=null&&Id(t,l,p,h))}switch(r){case"input":xa(t),ef(t,s,!1);break;case"textarea":xa(t),rf(t);break;case"option":s.value!=null&&t.setAttribute("value",""+di(s.value));break;case"select":t.multiple=!!s.multiple,l=s.value,l!=null?As(t,!!s.multiple,l,!1):s.defaultValue!=null&&As(t,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=cl)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return sr(e),null;case 6:if(t&&e.stateNode!=null)Xg(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(ne(166));if(r=Mi(Wo.current),Mi(vn.current),Sa(e)){if(s=e.stateNode,r=e.memoizedProps,s[xn]=e,(l=s.nodeValue!==r)&&(t=kr,t!==null))switch(t.tag){case 3:Aa(s.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Aa(s.nodeValue,r,(t.mode&1)!==0)}l&&(e.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[xn]=e,e.stateNode=s}return sr(e),null;case 13:if(gt(vt),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xt&&Or!==null&&e.mode&1&&!(e.flags&128))dg(),Ds(),e.flags|=98560,l=!1;else if(l=Sa(e),s!==null&&s.dehydrated!==null){if(t===null){if(!l)throw Error(ne(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ne(317));l[xn]=e}else Ds(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;sr(e),l=!1}else sn!==null&&(Zc(sn),sn=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||vt.current&1?zt===0&&(zt=3):uh())),e.updateQueue!==null&&(e.flags|=4),sr(e),null);case 4:return Ls(),Wc(t,e),t===null&&Fo(e.stateNode.containerInfo),sr(e),null;case 10:return $d(e.type._context),sr(e),null;case 17:return br(e.type)&&dl(),sr(e),null;case 19:if(gt(vt),l=e.memoizedState,l===null)return sr(e),null;if(s=(e.flags&128)!==0,h=l.rendering,h===null)if(s)ho(l,!1);else{if(zt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(h=wl(t),h!==null){for(e.flags|=128,ho(l,!1),s=h.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=r,r=e.child;r!==null;)l=r,t=s,l.flags&=14680066,h=l.alternate,h===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,t=h.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ct(vt,vt.current&1|2),e.child}t=t.sibling}l.tail!==null&&Rt()>js&&(e.flags|=128,s=!0,ho(l,!1),e.lanes=4194304)}else{if(!s)if(t=wl(h),t!==null){if(e.flags|=128,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ho(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!xt)return sr(e),null}else 2*Rt()-l.renderingStartTime>js&&r!==1073741824&&(e.flags|=128,s=!0,ho(l,!1),e.lanes=4194304);l.isBackwards?(h.sibling=e.child,e.child=h):(r=l.last,r!==null?r.sibling=h:e.child=h,l.last=h)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Rt(),e.sibling=null,r=vt.current,ct(vt,s?r&1|2:r&1),e):(sr(e),null);case 22:case 23:return lh(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Nr&1073741824&&(sr(e),e.subtreeFlags&6&&(e.flags|=8192)):sr(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function _w(t,e){switch(Vd(e),e.tag){case 1:return br(e.type)&&dl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ls(),gt(Cr),gt(ar),Zd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yd(e),null;case 13:if(gt(vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));Ds()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gt(vt),null;case 4:return Ls(),null;case 10:return $d(e.type._context),null;case 22:case 23:return lh(),null;case 24:return null;default:return null}}var Ta=!1,or=!1,Cw=typeof WeakSet=="function"?WeakSet:Set,pe=null;function _s(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){It(t,e,s)}else r.current=null}function Hc(t,e,r){try{r()}catch(s){It(t,e,s)}}var $f=!1;function bw(t,e){if(Ic=al,t=Q1(),Ud(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var h=0,x=-1,p=-1,g=0,y=0,v=t,b=null;t:for(;;){for(var N;v!==r||a!==0&&v.nodeType!==3||(x=h+a),v!==l||s!==0&&v.nodeType!==3||(p=h+s),v.nodeType===3&&(h+=v.nodeValue.length),(N=v.firstChild)!==null;)b=v,v=N;for(;;){if(v===t)break t;if(b===r&&++g===a&&(x=h),b===l&&++y===s&&(p=h),(N=v.nextSibling)!==null)break;v=b,b=v.parentNode}v=N}r=x===-1||p===-1?null:{start:x,end:p}}else r=null}r=r||{start:0,end:0}}else r=null;for(Nc={focusedElem:t,selectionRange:r},al=!1,pe=e;pe!==null;)if(e=pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,pe=t;else for(;pe!==null;){e=pe;try{var O=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var L=O.memoizedProps,j=O.memoizedState,k=e.stateNode,R=k.getSnapshotBeforeUpdate(e.elementType===e.type?L:tn(e.type,L),j);k.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(B){It(e,e.return,B)}if(t=e.sibling,t!==null){t.return=e.return,pe=t;break}pe=e.return}return O=$f,$f=!1,O}function So(t,e,r){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&t)===t){var l=a.destroy;a.destroy=void 0,l!==void 0&&Hc(e,r,l)}a=a.next}while(a!==s)}}function $l(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var s=r.create;r.destroy=s()}r=r.next}while(r!==e)}}function Gc(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Kg(t){var e=t.alternate;e!==null&&(t.alternate=null,Kg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xn],delete e[zo],delete e[Oc],delete e[ow],delete e[aw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qg(t){return t.tag===5||t.tag===3||t.tag===4}function Xf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $c(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=cl));else if(s!==4&&(t=t.child,t!==null))for($c(t,e,r),t=t.sibling;t!==null;)$c(t,e,r),t=t.sibling}function Xc(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Xc(t,e,r),t=t.sibling;t!==null;)Xc(t,e,r),t=t.sibling}var Jt=null,nn=!1;function Hn(t,e,r){for(r=r.child;r!==null;)Yg(t,e,r),r=r.sibling}function Yg(t,e,r){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(jl,r)}catch{}switch(r.tag){case 5:or||_s(r,e);case 6:var s=Jt,a=nn;Jt=null,Hn(t,e,r),Jt=s,nn=a,Jt!==null&&(nn?(t=Jt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Jt.removeChild(r.stateNode));break;case 18:Jt!==null&&(nn?(t=Jt,r=r.stateNode,t.nodeType===8?Fu(t.parentNode,r):t.nodeType===1&&Fu(t,r),Lo(t)):Fu(Jt,r.stateNode));break;case 4:s=Jt,a=nn,Jt=r.stateNode.containerInfo,nn=!0,Hn(t,e,r),Jt=s,nn=a;break;case 0:case 11:case 14:case 15:if(!or&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var l=a,h=l.destroy;l=l.tag,h!==void 0&&(l&2||l&4)&&Hc(r,e,h),a=a.next}while(a!==s)}Hn(t,e,r);break;case 1:if(!or&&(_s(r,e),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(x){It(r,e,x)}Hn(t,e,r);break;case 21:Hn(t,e,r);break;case 22:r.mode&1?(or=(s=or)||r.memoizedState!==null,Hn(t,e,r),or=s):Hn(t,e,r);break;default:Hn(t,e,r)}}function Kf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Cw),e.forEach(function(s){var a=Pw.bind(null,t,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Zr(t,e){var r=e.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var l=t,h=e,x=h;e:for(;x!==null;){switch(x.tag){case 5:Jt=x.stateNode,nn=!1;break e;case 3:Jt=x.stateNode.containerInfo,nn=!0;break e;case 4:Jt=x.stateNode.containerInfo,nn=!0;break e}x=x.return}if(Jt===null)throw Error(ne(160));Yg(l,h,a),Jt=null,nn=!1;var p=a.alternate;p!==null&&(p.return=null),a.return=null}catch(g){It(a,e,g)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Zg(e,t),e=e.sibling}function Zg(t,e){var r=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zr(e,t),pn(t),s&4){try{So(3,t,t.return),$l(3,t)}catch(L){It(t,t.return,L)}try{So(5,t,t.return)}catch(L){It(t,t.return,L)}}break;case 1:Zr(e,t),pn(t),s&512&&r!==null&&_s(r,r.return);break;case 5:if(Zr(e,t),pn(t),s&512&&r!==null&&_s(r,r.return),t.flags&32){var a=t.stateNode;try{ko(a,"")}catch(L){It(t,t.return,L)}}if(s&4&&(a=t.stateNode,a!=null)){var l=t.memoizedProps,h=r!==null?r.memoizedProps:l,x=t.type,p=t.updateQueue;if(t.updateQueue=null,p!==null)try{x==="input"&&l.type==="radio"&&l.name!=null&&y1(a,l),xc(x,h);var g=xc(x,l);for(h=0;h<p.length;h+=2){var y=p[h],v=p[h+1];y==="style"?b1(a,v):y==="dangerouslySetInnerHTML"?_1(a,v):y==="children"?ko(a,v):Id(a,y,v,g)}switch(x){case"input":hc(a,l);break;case"textarea":v1(a,l);break;case"select":var b=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var N=l.value;N!=null?As(a,!!l.multiple,N,!1):b!==!!l.multiple&&(l.defaultValue!=null?As(a,!!l.multiple,l.defaultValue,!0):As(a,!!l.multiple,l.multiple?[]:"",!1))}a[zo]=l}catch(L){It(t,t.return,L)}}break;case 6:if(Zr(e,t),pn(t),s&4){if(t.stateNode===null)throw Error(ne(162));a=t.stateNode,l=t.memoizedProps;try{a.nodeValue=l}catch(L){It(t,t.return,L)}}break;case 3:if(Zr(e,t),pn(t),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Lo(e.containerInfo)}catch(L){It(t,t.return,L)}break;case 4:Zr(e,t),pn(t);break;case 13:Zr(e,t),pn(t),a=t.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(oh=Rt())),s&4&&Kf(t);break;case 22:if(y=r!==null&&r.memoizedState!==null,t.mode&1?(or=(g=or)||y,Zr(e,t),or=g):Zr(e,t),pn(t),s&8192){if(g=t.memoizedState!==null,(t.stateNode.isHidden=g)&&!y&&t.mode&1)for(pe=t,y=t.child;y!==null;){for(v=pe=y;pe!==null;){switch(b=pe,N=b.child,b.tag){case 0:case 11:case 14:case 15:So(4,b,b.return);break;case 1:_s(b,b.return);var O=b.stateNode;if(typeof O.componentWillUnmount=="function"){s=b,r=b.return;try{e=s,O.props=e.memoizedProps,O.state=e.memoizedState,O.componentWillUnmount()}catch(L){It(s,r,L)}}break;case 5:_s(b,b.return);break;case 22:if(b.memoizedState!==null){Yf(v);continue}}N!==null?(N.return=b,pe=N):Yf(v)}y=y.sibling}e:for(y=null,v=t;;){if(v.tag===5){if(y===null){y=v;try{a=v.stateNode,g?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(x=v.stateNode,p=v.memoizedProps.style,h=p!=null&&p.hasOwnProperty("display")?p.display:null,x.style.display=C1("display",h))}catch(L){It(t,t.return,L)}}}else if(v.tag===6){if(y===null)try{v.stateNode.nodeValue=g?"":v.memoizedProps}catch(L){It(t,t.return,L)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;y===v&&(y=null),v=v.return}y===v&&(y=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Zr(e,t),pn(t),s&4&&Kf(t);break;case 21:break;default:Zr(e,t),pn(t)}}function pn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(qg(r)){var s=r;break e}r=r.return}throw Error(ne(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(ko(a,""),s.flags&=-33);var l=Xf(t);Xc(t,l,a);break;case 3:case 4:var h=s.stateNode.containerInfo,x=Xf(t);$c(t,x,h);break;default:throw Error(ne(161))}}catch(p){It(t,t.return,p)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Aw(t,e,r){pe=t,Qg(t)}function Qg(t,e,r){for(var s=(t.mode&1)!==0;pe!==null;){var a=pe,l=a.child;if(a.tag===22&&s){var h=a.memoizedState!==null||Ta;if(!h){var x=a.alternate,p=x!==null&&x.memoizedState!==null||or;x=Ta;var g=or;if(Ta=h,(or=p)&&!g)for(pe=a;pe!==null;)h=pe,p=h.child,h.tag===22&&h.memoizedState!==null?Zf(a):p!==null?(p.return=h,pe=p):Zf(a);for(;l!==null;)pe=l,Qg(l),l=l.sibling;pe=a,Ta=x,or=g}qf(t)}else a.subtreeFlags&8772&&l!==null?(l.return=a,pe=l):qf(t)}}function qf(t){for(;pe!==null;){var e=pe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:or||$l(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!or)if(r===null)s.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:tn(e.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&Pf(e,l,s);break;case 3:var h=e.updateQueue;if(h!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Pf(e,h,r)}break;case 5:var x=e.stateNode;if(r===null&&e.flags&4){r=x;var p=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&r.focus();break;case"img":p.src&&(r.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var g=e.alternate;if(g!==null){var y=g.memoizedState;if(y!==null){var v=y.dehydrated;v!==null&&Lo(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}or||e.flags&512&&Gc(e)}catch(b){It(e,e.return,b)}}if(e===t){pe=null;break}if(r=e.sibling,r!==null){r.return=e.return,pe=r;break}pe=e.return}}function Yf(t){for(;pe!==null;){var e=pe;if(e===t){pe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,pe=r;break}pe=e.return}}function Zf(t){for(;pe!==null;){var e=pe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{$l(4,e)}catch(p){It(e,r,p)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var a=e.return;try{s.componentDidMount()}catch(p){It(e,a,p)}}var l=e.return;try{Gc(e)}catch(p){It(e,l,p)}break;case 5:var h=e.return;try{Gc(e)}catch(p){It(e,h,p)}}}catch(p){It(e,e.return,p)}if(e===t){pe=null;break}var x=e.sibling;if(x!==null){x.return=e.return,pe=x;break}pe=e.return}}var Sw=Math.ceil,El=Mn.ReactCurrentDispatcher,ih=Mn.ReactCurrentOwner,Gr=Mn.ReactCurrentBatchConfig,Ge=0,$t=null,Pt=null,er=0,Nr=0,Cs=gi(0),zt=0,Xo=null,Vi=0,Xl=0,sh=0,Io=null,Er=null,oh=0,js=1/0,bn=null,_l=!1,Kc=null,ai=null,Ra=!1,ei=null,Cl=0,No=0,qc=null,Qa=-1,Ja=0;function hr(){return Ge&6?Rt():Qa!==-1?Qa:Qa=Rt()}function li(t){return t.mode&1?Ge&2&&er!==0?er&-er:uw.transition!==null?(Ja===0&&(Ja=L1()),Ja):(t=Qe,t!==0||(t=window.event,t=t===void 0?16:W1(t.type)),t):1}function an(t,e,r,s){if(50<No)throw No=0,qc=null,Error(ne(185));ea(t,r,s),(!(Ge&2)||t!==$t)&&(t===$t&&(!(Ge&2)&&(Xl|=r),zt===4&&Yn(t,er)),Ar(t,s),r===1&&Ge===0&&!(e.mode&1)&&(js=Rt()+500,Wl&&pi()))}function Ar(t,e){var r=t.callbackNode;u2(t,e);var s=ol(t,t===$t?er:0);if(s===0)r!==null&&of(r),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(r!=null&&of(r),e===1)t.tag===0?lw(Qf.bind(null,t)):lg(Qf.bind(null,t)),iw(function(){!(Ge&6)&&pi()}),r=null;else{switch(B1(s)){case 1:r=kd;break;case 4:r=D1;break;case 16:r=sl;break;case 536870912:r=M1;break;default:r=sl}r=op(r,Jg.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Jg(t,e){if(Qa=-1,Ja=0,Ge&6)throw Error(ne(327));var r=t.callbackNode;if(Rs()&&t.callbackNode!==r)return null;var s=ol(t,t===$t?er:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=bl(t,s);else{e=s;var a=Ge;Ge|=2;var l=tp();($t!==t||er!==e)&&(bn=null,js=Rt()+500,Bi(t,e));do try{Tw();break}catch(x){ep(t,x)}while(!0);Gd(),El.current=l,Ge=a,Pt!==null?e=0:($t=null,er=0,e=zt)}if(e!==0){if(e===2&&(a=_c(t),a!==0&&(s=a,e=Yc(t,a))),e===1)throw r=Xo,Bi(t,0),Yn(t,s),Ar(t,Rt()),r;if(e===6)Yn(t,s);else{if(a=t.current.alternate,!(s&30)&&!Iw(a)&&(e=bl(t,s),e===2&&(l=_c(t),l!==0&&(s=l,e=Yc(t,l))),e===1))throw r=Xo,Bi(t,0),Yn(t,s),Ar(t,Rt()),r;switch(t.finishedWork=a,t.finishedLanes=s,e){case 0:case 1:throw Error(ne(345));case 2:Ni(t,Er,bn);break;case 3:if(Yn(t,s),(s&130023424)===s&&(e=oh+500-Rt(),10<e)){if(ol(t,0)!==0)break;if(a=t.suspendedLanes,(a&s)!==s){hr(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Rc(Ni.bind(null,t,Er,bn),e);break}Ni(t,Er,bn);break;case 4:if(Yn(t,s),(s&4194240)===s)break;for(e=t.eventTimes,a=-1;0<s;){var h=31-on(s);l=1<<h,h=e[h],h>a&&(a=h),s&=~l}if(s=a,s=Rt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Sw(s/1960))-s,10<s){t.timeoutHandle=Rc(Ni.bind(null,t,Er,bn),s);break}Ni(t,Er,bn);break;case 5:Ni(t,Er,bn);break;default:throw Error(ne(329))}}}return Ar(t,Rt()),t.callbackNode===r?Jg.bind(null,t):null}function Yc(t,e){var r=Io;return t.current.memoizedState.isDehydrated&&(Bi(t,e).flags|=256),t=bl(t,e),t!==2&&(e=Er,Er=r,e!==null&&Zc(e)),t}function Zc(t){Er===null?Er=t:Er.push.apply(Er,t)}function Iw(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],l=a.getSnapshot;a=a.value;try{if(!ln(l(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yn(t,e){for(e&=~sh,e&=~Xl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-on(e),s=1<<r;t[r]=-1,e&=~s}}function Qf(t){if(Ge&6)throw Error(ne(327));Rs();var e=ol(t,0);if(!(e&1))return Ar(t,Rt()),null;var r=bl(t,e);if(t.tag!==0&&r===2){var s=_c(t);s!==0&&(e=s,r=Yc(t,s))}if(r===1)throw r=Xo,Bi(t,0),Yn(t,e),Ar(t,Rt()),r;if(r===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ni(t,Er,bn),Ar(t,Rt()),null}function ah(t,e){var r=Ge;Ge|=1;try{return t(e)}finally{Ge=r,Ge===0&&(js=Rt()+500,Wl&&pi())}}function Wi(t){ei!==null&&ei.tag===0&&!(Ge&6)&&Rs();var e=Ge;Ge|=1;var r=Gr.transition,s=Qe;try{if(Gr.transition=null,Qe=1,t)return t()}finally{Qe=s,Gr.transition=r,Ge=e,!(Ge&6)&&pi()}}function lh(){Nr=Cs.current,gt(Cs)}function Bi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,nw(r)),Pt!==null)for(r=Pt.return;r!==null;){var s=r;switch(Vd(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&dl();break;case 3:Ls(),gt(Cr),gt(ar),Zd();break;case 5:Yd(s);break;case 4:Ls();break;case 13:gt(vt);break;case 19:gt(vt);break;case 10:$d(s.type._context);break;case 22:case 23:lh()}r=r.return}if($t=t,Pt=t=ui(t.current,null),er=Nr=e,zt=0,Xo=null,sh=Xl=Vi=0,Er=Io=null,Di!==null){for(e=0;e<Di.length;e++)if(r=Di[e],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,l=r.pending;if(l!==null){var h=l.next;l.next=a,s.next=h}r.pending=s}Di=null}return t}function ep(t,e){do{var r=Pt;try{if(Gd(),qa.current=vl,yl){for(var s=Et.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}yl=!1}if(zi=0,Gt=Ft=Et=null,Ao=!1,Ho=0,ih.current=null,r===null||r.return===null){zt=1,Xo=e,Pt=null;break}e:{var l=t,h=r.return,x=r,p=e;if(e=er,x.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var g=p,y=x,v=y.tag;if(!(y.mode&1)&&(v===0||v===11||v===15)){var b=y.alternate;b?(y.updateQueue=b.updateQueue,y.memoizedState=b.memoizedState,y.lanes=b.lanes):(y.updateQueue=null,y.memoizedState=null)}var N=Ff(h);if(N!==null){N.flags&=-257,Uf(N,h,x,l,e),N.mode&1&&jf(l,g,e),e=N,p=g;var O=e.updateQueue;if(O===null){var L=new Set;L.add(p),e.updateQueue=L}else O.add(p);break e}else{if(!(e&1)){jf(l,g,e),uh();break e}p=Error(ne(426))}}else if(xt&&x.mode&1){var j=Ff(h);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Uf(j,h,x,l,e),Wd(Bs(p,x));break e}}l=p=Bs(p,x),zt!==4&&(zt=2),Io===null?Io=[l]:Io.push(l),l=h;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var k=Bg(l,p,e);kf(l,k);break e;case 1:x=p;var R=l.type,I=l.stateNode;if(!(l.flags&128)&&(typeof R.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(ai===null||!ai.has(I)))){l.flags|=65536,e&=-e,l.lanes|=e;var B=jg(l,x,e);kf(l,B);break e}}l=l.return}while(l!==null)}np(r)}catch(W){e=W,Pt===r&&r!==null&&(Pt=r=r.return);continue}break}while(!0)}function tp(){var t=El.current;return El.current=vl,t===null?vl:t}function uh(){(zt===0||zt===3||zt===2)&&(zt=4),$t===null||!(Vi&268435455)&&!(Xl&268435455)||Yn($t,er)}function bl(t,e){var r=Ge;Ge|=2;var s=tp();($t!==t||er!==e)&&(bn=null,Bi(t,e));do try{Nw();break}catch(a){ep(t,a)}while(!0);if(Gd(),Ge=r,El.current=s,Pt!==null)throw Error(ne(261));return $t=null,er=0,zt}function Nw(){for(;Pt!==null;)rp(Pt)}function Tw(){for(;Pt!==null&&!e2();)rp(Pt)}function rp(t){var e=sp(t.alternate,t,Nr);t.memoizedProps=t.pendingProps,e===null?np(t):Pt=e,ih.current=null}function np(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=_w(r,e),r!==null){r.flags&=32767,Pt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{zt=6,Pt=null;return}}else if(r=Ew(r,e,Nr),r!==null){Pt=r;return}if(e=e.sibling,e!==null){Pt=e;return}Pt=e=t}while(e!==null);zt===0&&(zt=5)}function Ni(t,e,r){var s=Qe,a=Gr.transition;try{Gr.transition=null,Qe=1,Rw(t,e,r,s)}finally{Gr.transition=a,Qe=s}return null}function Rw(t,e,r,s){do Rs();while(ei!==null);if(Ge&6)throw Error(ne(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var l=r.lanes|r.childLanes;if(c2(t,l),t===$t&&(Pt=$t=null,er=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ra||(Ra=!0,op(sl,function(){return Rs(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=Gr.transition,Gr.transition=null;var h=Qe;Qe=1;var x=Ge;Ge|=4,ih.current=null,bw(t,r),Zg(r,t),Y2(Nc),al=!!Ic,Nc=Ic=null,t.current=r,Aw(r),t2(),Ge=x,Qe=h,Gr.transition=l}else t.current=r;if(Ra&&(Ra=!1,ei=t,Cl=a),l=t.pendingLanes,l===0&&(ai=null),i2(r.stateNode),Ar(t,Rt()),e!==null)for(s=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(_l)throw _l=!1,t=Kc,Kc=null,t;return Cl&1&&t.tag!==0&&Rs(),l=t.pendingLanes,l&1?t===qc?No++:(No=0,qc=t):No=0,pi(),null}function Rs(){if(ei!==null){var t=B1(Cl),e=Gr.transition,r=Qe;try{if(Gr.transition=null,Qe=16>t?16:t,ei===null)var s=!1;else{if(t=ei,ei=null,Cl=0,Ge&6)throw Error(ne(331));var a=Ge;for(Ge|=4,pe=t.current;pe!==null;){var l=pe,h=l.child;if(pe.flags&16){var x=l.deletions;if(x!==null){for(var p=0;p<x.length;p++){var g=x[p];for(pe=g;pe!==null;){var y=pe;switch(y.tag){case 0:case 11:case 15:So(8,y,l)}var v=y.child;if(v!==null)v.return=y,pe=v;else for(;pe!==null;){y=pe;var b=y.sibling,N=y.return;if(Kg(y),y===g){pe=null;break}if(b!==null){b.return=N,pe=b;break}pe=N}}}var O=l.alternate;if(O!==null){var L=O.child;if(L!==null){O.child=null;do{var j=L.sibling;L.sibling=null,L=j}while(L!==null)}}pe=l}}if(l.subtreeFlags&2064&&h!==null)h.return=l,pe=h;else e:for(;pe!==null;){if(l=pe,l.flags&2048)switch(l.tag){case 0:case 11:case 15:So(9,l,l.return)}var k=l.sibling;if(k!==null){k.return=l.return,pe=k;break e}pe=l.return}}var R=t.current;for(pe=R;pe!==null;){h=pe;var I=h.child;if(h.subtreeFlags&2064&&I!==null)I.return=h,pe=I;else e:for(h=R;pe!==null;){if(x=pe,x.flags&2048)try{switch(x.tag){case 0:case 11:case 15:$l(9,x)}}catch(W){It(x,x.return,W)}if(x===h){pe=null;break e}var B=x.sibling;if(B!==null){B.return=x.return,pe=B;break e}pe=x.return}}if(Ge=a,pi(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(jl,t)}catch{}s=!0}return s}finally{Qe=r,Gr.transition=e}}return!1}function Jf(t,e,r){e=Bs(r,e),e=Bg(t,e,1),t=oi(t,e,1),e=hr(),t!==null&&(ea(t,1,e),Ar(t,e))}function It(t,e,r){if(t.tag===3)Jf(t,t,r);else for(;e!==null;){if(e.tag===3){Jf(e,t,r);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ai===null||!ai.has(s))){t=Bs(r,t),t=jg(e,t,1),e=oi(e,t,1),t=hr(),e!==null&&(ea(e,1,t),Ar(e,t));break}}e=e.return}}function Ow(t,e,r){var s=t.pingCache;s!==null&&s.delete(e),e=hr(),t.pingedLanes|=t.suspendedLanes&r,$t===t&&(er&r)===r&&(zt===4||zt===3&&(er&130023424)===er&&500>Rt()-oh?Bi(t,0):sh|=r),Ar(t,e)}function ip(t,e){e===0&&(t.mode&1?(e=va,va<<=1,!(va&130023424)&&(va=4194304)):e=1);var r=hr();t=kn(t,e),t!==null&&(ea(t,e,r),Ar(t,r))}function kw(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),ip(t,r)}function Pw(t,e){var r=0;switch(t.tag){case 13:var s=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(ne(314))}s!==null&&s.delete(e),ip(t,r)}var sp;sp=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Cr.current)_r=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return _r=!1,vw(t,e,r);_r=!!(t.flags&131072)}else _r=!1,xt&&e.flags&1048576&&ug(e,gl,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Za(t,e),t=e.pendingProps;var a=Ps(e,ar.current);Ts(e,r),a=Jd(null,e,s,t,a,r);var l=eh();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,br(s)?(l=!0,hl(e)):l=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Kd(e),a.updater=Gl,e.stateNode=a,a._reactInternals=e,Bc(e,s,t,r),e=Uc(null,e,s,!0,l,r)):(e.tag=0,xt&&l&&zd(e),cr(null,e,a,r),e=e.child),e;case 16:s=e.elementType;e:{switch(Za(t,e),t=e.pendingProps,a=s._init,s=a(s._payload),e.type=s,a=e.tag=Mw(s),t=tn(s,t),a){case 0:e=Fc(null,e,s,t,r);break e;case 1:e=Wf(null,e,s,t,r);break e;case 11:e=zf(null,e,s,t,r);break e;case 14:e=Vf(null,e,s,tn(s.type,t),r);break e}throw Error(ne(306,s,""))}return e;case 0:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:tn(s,a),Fc(t,e,s,a,r);case 1:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:tn(s,a),Wf(t,e,s,a,r);case 3:e:{if(Vg(e),t===null)throw Error(ne(387));s=e.pendingProps,l=e.memoizedState,a=l.element,pg(t,e),xl(e,s,null,r);var h=e.memoizedState;if(s=h.element,l.isDehydrated)if(l={element:s,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){a=Bs(Error(ne(423)),e),e=Hf(t,e,s,r,a);break e}else if(s!==a){a=Bs(Error(ne(424)),e),e=Hf(t,e,s,r,a);break e}else for(Or=si(e.stateNode.containerInfo.firstChild),kr=e,xt=!0,sn=null,r=fg(e,null,s,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ds(),s===a){e=Pn(t,e,r);break e}cr(t,e,s,r)}e=e.child}return e;case 5:return mg(e),t===null&&Dc(e),s=e.type,a=e.pendingProps,l=t!==null?t.memoizedProps:null,h=a.children,Tc(s,a)?h=null:l!==null&&Tc(s,l)&&(e.flags|=32),zg(t,e),cr(t,e,h,r),e.child;case 6:return t===null&&Dc(e),null;case 13:return Wg(t,e,r);case 4:return qd(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ms(e,null,s,r):cr(t,e,s,r),e.child;case 11:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:tn(s,a),zf(t,e,s,a,r);case 7:return cr(t,e,e.pendingProps,r),e.child;case 8:return cr(t,e,e.pendingProps.children,r),e.child;case 12:return cr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(s=e.type._context,a=e.pendingProps,l=e.memoizedProps,h=a.value,ct(pl,s._currentValue),s._currentValue=h,l!==null)if(ln(l.value,h)){if(l.children===a.children&&!Cr.current){e=Pn(t,e,r);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var x=l.dependencies;if(x!==null){h=l.child;for(var p=x.firstContext;p!==null;){if(p.context===s){if(l.tag===1){p=Tn(-1,r&-r),p.tag=2;var g=l.updateQueue;if(g!==null){g=g.shared;var y=g.pending;y===null?p.next=p:(p.next=y.next,y.next=p),g.pending=p}}l.lanes|=r,p=l.alternate,p!==null&&(p.lanes|=r),Mc(l.return,r,e),x.lanes|=r;break}p=p.next}}else if(l.tag===10)h=l.type===e.type?null:l.child;else if(l.tag===18){if(h=l.return,h===null)throw Error(ne(341));h.lanes|=r,x=h.alternate,x!==null&&(x.lanes|=r),Mc(h,r,e),h=l.sibling}else h=l.child;if(h!==null)h.return=l;else for(h=l;h!==null;){if(h===e){h=null;break}if(l=h.sibling,l!==null){l.return=h.return,h=l;break}h=h.return}l=h}cr(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,s=e.pendingProps.children,Ts(e,r),a=$r(a),s=s(a),e.flags|=1,cr(t,e,s,r),e.child;case 14:return s=e.type,a=tn(s,e.pendingProps),a=tn(s.type,a),Vf(t,e,s,a,r);case 15:return Fg(t,e,e.type,e.pendingProps,r);case 17:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:tn(s,a),Za(t,e),e.tag=1,br(s)?(t=!0,hl(e)):t=!1,Ts(e,r),Lg(e,s,a),Bc(e,s,a,r),Uc(null,e,s,!0,t,r);case 19:return Hg(t,e,r);case 22:return Ug(t,e,r)}throw Error(ne(156,e.tag))};function op(t,e){return P1(t,e)}function Dw(t,e,r,s){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(t,e,r,s){return new Dw(t,e,r,s)}function ch(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mw(t){if(typeof t=="function")return ch(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Td)return 11;if(t===Rd)return 14}return 2}function ui(t,e){var r=t.alternate;return r===null?(r=Hr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function el(t,e,r,s,a,l){var h=2;if(s=t,typeof t=="function")ch(t)&&(h=1);else if(typeof t=="string")h=5;else e:switch(t){case fs:return ji(r.children,a,l,e);case Nd:h=8,a|=8;break;case ac:return t=Hr(12,r,e,a|2),t.elementType=ac,t.lanes=l,t;case lc:return t=Hr(13,r,e,a),t.elementType=lc,t.lanes=l,t;case uc:return t=Hr(19,r,e,a),t.elementType=uc,t.lanes=l,t;case m1:return Kl(r,a,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case g1:h=10;break e;case p1:h=9;break e;case Td:h=11;break e;case Rd:h=14;break e;case Xn:h=16,s=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=Hr(h,r,e,a),e.elementType=t,e.type=s,e.lanes=l,e}function ji(t,e,r,s){return t=Hr(7,t,s,e),t.lanes=r,t}function Kl(t,e,r,s){return t=Hr(22,t,s,e),t.elementType=m1,t.lanes=r,t.stateNode={isHidden:!1},t}function Xu(t,e,r){return t=Hr(6,t,null,e),t.lanes=r,t}function Ku(t,e,r){return e=Hr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Lw(t,e,r,s,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nu(0),this.expirationTimes=Nu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nu(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function dh(t,e,r,s,a,l,h,x,p){return t=new Lw(t,e,r,x,p),e===1?(e=1,l===!0&&(e|=8)):e=0,l=Hr(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kd(l),t}function Bw(t,e,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hs,key:s==null?null:""+s,children:t,containerInfo:e,implementation:r}}function ap(t){if(!t)return hi;t=t._reactInternals;e:{if($i(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(br(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var r=t.type;if(br(r))return ag(t,r,e)}return e}function lp(t,e,r,s,a,l,h,x,p){return t=dh(r,s,!0,t,a,l,h,x,p),t.context=ap(null),r=t.current,s=hr(),a=li(r),l=Tn(s,a),l.callback=e??null,oi(r,l,a),t.current.lanes=a,ea(t,a,s),Ar(t,s),t}function ql(t,e,r,s){var a=e.current,l=hr(),h=li(a);return r=ap(r),e.context===null?e.context=r:e.pendingContext=r,e=Tn(l,h),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=oi(a,e,h),t!==null&&(an(t,a,h,l),Ka(t,a,h)),h}function Al(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function e0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function hh(t,e){e0(t,e),(t=t.alternate)&&e0(t,e)}function jw(){return null}var up=typeof reportError=="function"?reportError:function(t){console.error(t)};function fh(t){this._internalRoot=t}Yl.prototype.render=fh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));ql(t,e,null,null)};Yl.prototype.unmount=fh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wi(function(){ql(null,t,null,null)}),e[On]=null}};function Yl(t){this._internalRoot=t}Yl.prototype.unstable_scheduleHydration=function(t){if(t){var e=U1();t={blockedOn:null,target:t,priority:e};for(var r=0;r<qn.length&&e!==0&&e<qn[r].priority;r++);qn.splice(r,0,t),r===0&&V1(t)}};function gh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function t0(){}function Fw(t,e,r,s,a){if(a){if(typeof s=="function"){var l=s;s=function(){var g=Al(h);l.call(g)}}var h=lp(e,s,t,0,null,!1,!1,"",t0);return t._reactRootContainer=h,t[On]=h.current,Fo(t.nodeType===8?t.parentNode:t),Wi(),h}for(;a=t.lastChild;)t.removeChild(a);if(typeof s=="function"){var x=s;s=function(){var g=Al(p);x.call(g)}}var p=dh(t,0,!1,null,null,!1,!1,"",t0);return t._reactRootContainer=p,t[On]=p.current,Fo(t.nodeType===8?t.parentNode:t),Wi(function(){ql(e,p,r,s)}),p}function Ql(t,e,r,s,a){var l=r._reactRootContainer;if(l){var h=l;if(typeof a=="function"){var x=a;a=function(){var p=Al(h);x.call(p)}}ql(e,h,t,a)}else h=Fw(r,e,t,a,s);return Al(h)}j1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=mo(e.pendingLanes);r!==0&&(Pd(e,r|1),Ar(e,Rt()),!(Ge&6)&&(js=Rt()+500,pi()))}break;case 13:Wi(function(){var s=kn(t,1);if(s!==null){var a=hr();an(s,t,1,a)}}),hh(t,1)}};Dd=function(t){if(t.tag===13){var e=kn(t,134217728);if(e!==null){var r=hr();an(e,t,134217728,r)}hh(t,134217728)}};F1=function(t){if(t.tag===13){var e=li(t),r=kn(t,e);if(r!==null){var s=hr();an(r,t,e,s)}hh(t,e)}};U1=function(){return Qe};z1=function(t,e){var r=Qe;try{return Qe=t,e()}finally{Qe=r}};yc=function(t,e,r){switch(e){case"input":if(hc(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var s=r[e];if(s!==t&&s.form===t.form){var a=Vl(s);if(!a)throw Error(ne(90));w1(s),hc(s,a)}}}break;case"textarea":v1(t,r);break;case"select":e=r.value,e!=null&&As(t,!!r.multiple,e,!1)}};I1=ah;N1=Wi;var Uw={usingClientEntryPoint:!1,Events:[ra,xs,Vl,A1,S1,ah]},fo={findFiberByHostInstance:Pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zw={bundleType:fo.bundleType,version:fo.version,rendererPackageName:fo.rendererPackageName,rendererConfig:fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=O1(t),t===null?null:t.stateNode},findFiberByHostInstance:fo.findFiberByHostInstance||jw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oa.isDisabled&&Oa.supportsFiber)try{jl=Oa.inject(zw),yn=Oa}catch{}}Dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uw;Dr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gh(e))throw Error(ne(200));return Bw(t,e,null,r)};Dr.createRoot=function(t,e){if(!gh(t))throw Error(ne(299));var r=!1,s="",a=up;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=dh(t,1,!1,null,null,r,!1,s,a),t[On]=e.current,Fo(t.nodeType===8?t.parentNode:t),new fh(e)};Dr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=O1(e),t=t===null?null:t.stateNode,t};Dr.flushSync=function(t){return Wi(t)};Dr.hydrate=function(t,e,r){if(!Zl(e))throw Error(ne(200));return Ql(null,t,e,!0,r)};Dr.hydrateRoot=function(t,e,r){if(!gh(t))throw Error(ne(405));var s=r!=null&&r.hydratedSources||null,a=!1,l="",h=up;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),e=lp(e,null,t,1,r??null,a,!1,l,h),t[On]=e.current,Fo(t),s)for(t=0;t<s.length;t++)r=s[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new Yl(e)};Dr.render=function(t,e,r){if(!Zl(e))throw Error(ne(200));return Ql(null,t,e,!1,r)};Dr.unmountComponentAtNode=function(t){if(!Zl(t))throw Error(ne(40));return t._reactRootContainer?(Wi(function(){Ql(null,null,t,!1,function(){t._reactRootContainer=null,t[On]=null})}),!0):!1};Dr.unstable_batchedUpdates=ah;Dr.unstable_renderSubtreeIntoContainer=function(t,e,r,s){if(!Zl(r))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return Ql(t,e,r,!1,s)};Dr.version="18.3.1-next-f1338f8080-20240426";function cp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cp)}catch(t){console.error(t)}}cp(),c1.exports=Dr;var Vw=c1.exports,r0=Vw;sc.createRoot=r0.createRoot,sc.hydrateRoot=r0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ko(){return Ko=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ko.apply(this,arguments)}var ti;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ti||(ti={}));const n0="popstate";function Ww(t){t===void 0&&(t={});function e(s,a){let{pathname:l,search:h,hash:x}=s.location;return Qc("",{pathname:l,search:h,hash:x},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:Sl(a)}return Gw(e,r,null,t)}function Ot(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Hw(){return Math.random().toString(36).substr(2,8)}function i0(t,e){return{usr:t.state,key:t.key,idx:e}}function Qc(t,e,r,s){return r===void 0&&(r=null),Ko({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ws(e):e,{state:r,key:e&&e.key||s||Hw()})}function Sl(t){let{pathname:e="/",search:r="",hash:s=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Ws(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function Gw(t,e,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:l=!1}=s,h=a.history,x=ti.Pop,p=null,g=y();g==null&&(g=0,h.replaceState(Ko({},h.state,{idx:g}),""));function y(){return(h.state||{idx:null}).idx}function v(){x=ti.Pop;let j=y(),k=j==null?null:j-g;g=j,p&&p({action:x,location:L.location,delta:k})}function b(j,k){x=ti.Push;let R=Qc(L.location,j,k);g=y()+1;let I=i0(R,g),B=L.createHref(R);try{h.pushState(I,"",B)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;a.location.assign(B)}l&&p&&p({action:x,location:L.location,delta:1})}function N(j,k){x=ti.Replace;let R=Qc(L.location,j,k);g=y();let I=i0(R,g),B=L.createHref(R);h.replaceState(I,"",B),l&&p&&p({action:x,location:L.location,delta:0})}function O(j){let k=a.location.origin!=="null"?a.location.origin:a.location.href,R=typeof j=="string"?j:Sl(j);return R=R.replace(/ $/,"%20"),Ot(k,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,k)}let L={get action(){return x},get location(){return t(a,h)},listen(j){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(n0,v),p=j,()=>{a.removeEventListener(n0,v),p=null}},createHref(j){return e(a,j)},createURL:O,encodeLocation(j){let k=O(j);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:b,replace:N,go(j){return h.go(j)}};return L}var s0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(s0||(s0={}));function $w(t,e,r){return r===void 0&&(r="/"),Xw(t,e,r)}function Xw(t,e,r,s){let a=typeof e=="string"?Ws(e):e,l=ph(a.pathname||"/",r);if(l==null)return null;let h=hp(t);Kw(h);let x=null;for(let p=0;x==null&&p<h.length;++p){let g=oy(l);x=ny(h[p],g)}return x}function hp(t,e,r,s){e===void 0&&(e=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(l,h,x)=>{let p={relativePath:x===void 0?l.path||"":x,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(Ot(p.relativePath.startsWith(s),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(s.length));let g=ci([s,p.relativePath]),y=r.concat(p);l.children&&l.children.length>0&&(Ot(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),hp(l.children,e,y,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:ty(g,l.index),routesMeta:y})};return t.forEach((l,h)=>{var x;if(l.path===""||!((x=l.path)!=null&&x.includes("?")))a(l,h);else for(let p of fp(l.path))a(l,h,p)}),e}function fp(t){let e=t.split("/");if(e.length===0)return[];let[r,...s]=e,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let h=fp(s.join("/")),x=[];return x.push(...h.map(p=>p===""?l:[l,p].join("/"))),a&&x.push(...h),x.map(p=>t.startsWith("/")&&p===""?"/":p)}function Kw(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:ry(e.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const qw=/^:[\w-]+$/,Yw=3,Zw=2,Qw=1,Jw=10,ey=-2,o0=t=>t==="*";function ty(t,e){let r=t.split("/"),s=r.length;return r.some(o0)&&(s+=ey),e&&(s+=Zw),r.filter(a=>!o0(a)).reduce((a,l)=>a+(qw.test(l)?Yw:l===""?Qw:Jw),s)}function ry(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function ny(t,e,r){let{routesMeta:s}=t,a={},l="/",h=[];for(let x=0;x<s.length;++x){let p=s[x],g=x===s.length-1,y=l==="/"?e:e.slice(l.length)||"/",v=iy({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},y),b=p.route;if(!v)return null;Object.assign(a,v.params),h.push({params:a,pathname:ci([l,v.pathname]),pathnameBase:cy(ci([l,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(l=ci([l,v.pathnameBase]))}return h}function iy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=sy(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let l=a[0],h=l.replace(/(.)\/+$/,"$1"),x=a.slice(1);return{params:s.reduce((g,y,v)=>{let{paramName:b,isOptional:N}=y;if(b==="*"){let L=x[v]||"";h=l.slice(0,l.length-L.length).replace(/(.)\/+$/,"$1")}const O=x[v];return N&&!O?g[b]=void 0:g[b]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:h,pattern:t}}function sy(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),dp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,x,p)=>(s.push({paramName:x,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function oy(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ph(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}function ay(t,e){e===void 0&&(e="/");let{pathname:r,search:s="",hash:a=""}=typeof t=="string"?Ws(t):t;return{pathname:r?r.startsWith("/")?r:ly(r,e):e,search:dy(s),hash:hy(a)}}function ly(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function qu(t,e,r,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uy(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function mh(t,e){let r=uy(t);return e?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function xh(t,e,r,s){s===void 0&&(s=!1);let a;typeof t=="string"?a=Ws(t):(a=Ko({},t),Ot(!a.pathname||!a.pathname.includes("?"),qu("?","pathname","search",a)),Ot(!a.pathname||!a.pathname.includes("#"),qu("#","pathname","hash",a)),Ot(!a.search||!a.search.includes("#"),qu("#","search","hash",a)));let l=t===""||a.pathname==="",h=l?"/":a.pathname,x;if(h==null)x=r;else{let v=e.length-1;if(!s&&h.startsWith("..")){let b=h.split("/");for(;b[0]==="..";)b.shift(),v-=1;a.pathname=b.join("/")}x=v>=0?e[v]:"/"}let p=ay(a,x),g=h&&h!=="/"&&h.endsWith("/"),y=(l||h===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(g||y)&&(p.pathname+="/"),p}const ci=t=>t.join("/").replace(/\/\/+/g,"/"),cy=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dy=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,hy=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function fy(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const gp=["post","put","patch","delete"];new Set(gp);const gy=["get",...gp];new Set(gy);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qo(){return qo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},qo.apply(this,arguments)}const wh=X.createContext(null),py=X.createContext(null),mi=X.createContext(null),Jl=X.createContext(null),Ln=X.createContext({outlet:null,matches:[],isDataRoute:!1}),pp=X.createContext(null);function my(t,e){let{relative:r}=e===void 0?{}:e;Hs()||Ot(!1);let{basename:s,navigator:a}=X.useContext(mi),{hash:l,pathname:h,search:x}=xp(t,{relative:r}),p=h;return s!=="/"&&(p=h==="/"?s:ci([s,h])),a.createHref({pathname:p,search:x,hash:l})}function Hs(){return X.useContext(Jl)!=null}function Xi(){return Hs()||Ot(!1),X.useContext(Jl).location}function mp(t){X.useContext(mi).static||X.useLayoutEffect(t)}function Gs(){let{isDataRoute:t}=X.useContext(Ln);return t?Ry():xy()}function xy(){Hs()||Ot(!1);let t=X.useContext(wh),{basename:e,future:r,navigator:s}=X.useContext(mi),{matches:a}=X.useContext(Ln),{pathname:l}=Xi(),h=JSON.stringify(mh(a,r.v7_relativeSplatPath)),x=X.useRef(!1);return mp(()=>{x.current=!0}),X.useCallback(function(g,y){if(y===void 0&&(y={}),!x.current)return;if(typeof g=="number"){s.go(g);return}let v=xh(g,JSON.parse(h),l,y.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ci([e,v.pathname])),(y.replace?s.replace:s.push)(v,y.state,y)},[e,s,h,l,t])}function wy(){let{matches:t}=X.useContext(Ln),e=t[t.length-1];return e?e.params:{}}function xp(t,e){let{relative:r}=e===void 0?{}:e,{future:s}=X.useContext(mi),{matches:a}=X.useContext(Ln),{pathname:l}=Xi(),h=JSON.stringify(mh(a,s.v7_relativeSplatPath));return X.useMemo(()=>xh(t,JSON.parse(h),l,r==="path"),[t,h,l,r])}function yy(t,e){return vy(t,e)}function vy(t,e,r,s){Hs()||Ot(!1);let{navigator:a}=X.useContext(mi),{matches:l}=X.useContext(Ln),h=l[l.length-1],x=h?h.params:{};h&&h.pathname;let p=h?h.pathnameBase:"/";h&&h.route;let g=Xi(),y;if(e){var v;let j=typeof e=="string"?Ws(e):e;p==="/"||(v=j.pathname)!=null&&v.startsWith(p)||Ot(!1),y=j}else y=g;let b=y.pathname||"/",N=b;if(p!=="/"){let j=p.replace(/^\//,"").split("/");N="/"+b.replace(/^\//,"").split("/").slice(j.length).join("/")}let O=$w(t,{pathname:N}),L=Ay(O&&O.map(j=>Object.assign({},j,{params:Object.assign({},x,j.params),pathname:ci([p,a.encodeLocation?a.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?p:ci([p,a.encodeLocation?a.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),l,r,s);return e&&L?X.createElement(Jl.Provider,{value:{location:qo({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:ti.Pop}},L):L}function Ey(){let t=Ty(),e=fy(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),r?X.createElement("pre",{style:a},r):null,null)}const _y=X.createElement(Ey,null);class Cy extends X.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?X.createElement(Ln.Provider,{value:this.props.routeContext},X.createElement(pp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function by(t){let{routeContext:e,match:r,children:s}=t,a=X.useContext(wh);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),X.createElement(Ln.Provider,{value:e},s)}function Ay(t,e,r,s){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),s===void 0&&(s=null),t==null){var l;if(!r)return null;if(r.errors)t=r.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let h=t,x=(a=r)==null?void 0:a.errors;if(x!=null){let y=h.findIndex(v=>v.route.id&&(x==null?void 0:x[v.route.id])!==void 0);y>=0||Ot(!1),h=h.slice(0,Math.min(h.length,y+1))}let p=!1,g=-1;if(r&&s&&s.v7_partialHydration)for(let y=0;y<h.length;y++){let v=h[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=y),v.route.id){let{loaderData:b,errors:N}=r,O=v.route.loader&&b[v.route.id]===void 0&&(!N||N[v.route.id]===void 0);if(v.route.lazy||O){p=!0,g>=0?h=h.slice(0,g+1):h=[h[0]];break}}}return h.reduceRight((y,v,b)=>{let N,O=!1,L=null,j=null;r&&(N=x&&v.route.id?x[v.route.id]:void 0,L=v.route.errorElement||_y,p&&(g<0&&b===0?(Oy("route-fallback"),O=!0,j=null):g===b&&(O=!0,j=v.route.hydrateFallbackElement||null)));let k=e.concat(h.slice(0,b+1)),R=()=>{let I;return N?I=L:O?I=j:v.route.Component?I=X.createElement(v.route.Component,null):v.route.element?I=v.route.element:I=y,X.createElement(by,{match:v,routeContext:{outlet:y,matches:k,isDataRoute:r!=null},children:I})};return r&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?X.createElement(Cy,{location:r.location,revalidation:r.revalidation,component:L,error:N,children:R(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):R()},null)}var wp=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(wp||{}),yp=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(yp||{});function Sy(t){let e=X.useContext(wh);return e||Ot(!1),e}function Iy(t){let e=X.useContext(py);return e||Ot(!1),e}function Ny(t){let e=X.useContext(Ln);return e||Ot(!1),e}function vp(t){let e=Ny(),r=e.matches[e.matches.length-1];return r.route.id||Ot(!1),r.route.id}function Ty(){var t;let e=X.useContext(pp),r=Iy(),s=vp();return e!==void 0?e:(t=r.errors)==null?void 0:t[s]}function Ry(){let{router:t}=Sy(wp.UseNavigateStable),e=vp(yp.UseNavigateStable),r=X.useRef(!1);return mp(()=>{r.current=!0}),X.useCallback(function(a,l){l===void 0&&(l={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,qo({fromRouteId:e},l)))},[t,e])}const a0={};function Oy(t,e,r){a0[t]||(a0[t]=!0)}function ky(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function l0(t){let{to:e,replace:r,state:s,relative:a}=t;Hs()||Ot(!1);let{future:l,static:h}=X.useContext(mi),{matches:x}=X.useContext(Ln),{pathname:p}=Xi(),g=Gs(),y=xh(e,mh(x,l.v7_relativeSplatPath),p,a==="path"),v=JSON.stringify(y);return X.useEffect(()=>g(JSON.parse(v),{replace:r,state:s,relative:a}),[g,v,a,r,s]),null}function $n(t){Ot(!1)}function Py(t){let{basename:e="/",children:r=null,location:s,navigationType:a=ti.Pop,navigator:l,static:h=!1,future:x}=t;Hs()&&Ot(!1);let p=e.replace(/^\/*/,"/"),g=X.useMemo(()=>({basename:p,navigator:l,static:h,future:qo({v7_relativeSplatPath:!1},x)}),[p,x,l,h]);typeof s=="string"&&(s=Ws(s));let{pathname:y="/",search:v="",hash:b="",state:N=null,key:O="default"}=s,L=X.useMemo(()=>{let j=ph(y,p);return j==null?null:{location:{pathname:j,search:v,hash:b,state:N,key:O},navigationType:a}},[p,y,v,b,N,O,a]);return L==null?null:X.createElement(mi.Provider,{value:g},X.createElement(Jl.Provider,{children:r,value:L}))}function Dy(t){let{children:e,location:r}=t;return yy(Jc(e),r)}new Promise(()=>{});function Jc(t,e){e===void 0&&(e=[]);let r=[];return X.Children.forEach(t,(s,a)=>{if(!X.isValidElement(s))return;let l=[...e,a];if(s.type===X.Fragment){r.push.apply(r,Jc(s.props.children,l));return}s.type!==$n&&Ot(!1),!s.props.index||!s.props.children||Ot(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Jc(s.props.children,l)),r.push(h)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ed(){return ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},ed.apply(this,arguments)}function My(t,e){if(t==null)return{};var r={},s=Object.keys(t),a,l;for(l=0;l<s.length;l++)a=s[l],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function Ly(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function By(t,e){return t.button===0&&(!e||e==="_self")&&!Ly(t)}function td(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let s=t[r];return e.concat(Array.isArray(s)?s.map(a=>[r,a]):[[r,s]])},[]))}function jy(t,e){let r=td(t);return e&&e.forEach((s,a)=>{r.has(a)||e.getAll(a).forEach(l=>{r.append(a,l)})}),r}const Fy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Uy="6";try{window.__reactRouterVersion=Uy}catch{}const zy="startTransition",u0=Ox[zy];function Vy(t){let{basename:e,children:r,future:s,window:a}=t,l=X.useRef();l.current==null&&(l.current=Ww({window:a,v5Compat:!0}));let h=l.current,[x,p]=X.useState({action:h.action,location:h.location}),{v7_startTransition:g}=s||{},y=X.useCallback(v=>{g&&u0?u0(()=>p(v)):p(v)},[p,g]);return X.useLayoutEffect(()=>h.listen(y),[h,y]),X.useEffect(()=>ky(s),[s]),X.createElement(Py,{basename:e,children:r,location:x.location,navigationType:x.action,navigator:h,future:s})}const Wy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Hy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,En=X.forwardRef(function(e,r){let{onClick:s,relative:a,reloadDocument:l,replace:h,state:x,target:p,to:g,preventScrollReset:y,viewTransition:v}=e,b=My(e,Fy),{basename:N}=X.useContext(mi),O,L=!1;if(typeof g=="string"&&Hy.test(g)&&(O=g,Wy))try{let I=new URL(window.location.href),B=g.startsWith("//")?new URL(I.protocol+g):new URL(g),W=ph(B.pathname,N);B.origin===I.origin&&W!=null?g=W+B.search+B.hash:L=!0}catch{}let j=my(g,{relative:a}),k=Gy(g,{replace:h,state:x,target:p,preventScrollReset:y,relative:a,viewTransition:v});function R(I){s&&s(I),I.defaultPrevented||k(I)}return X.createElement("a",ed({},b,{href:O||j,onClick:L||l?s:R,ref:r,target:p}))});var c0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(c0||(c0={}));var d0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(d0||(d0={}));function Gy(t,e){let{target:r,replace:s,state:a,preventScrollReset:l,relative:h,viewTransition:x}=e===void 0?{}:e,p=Gs(),g=Xi(),y=xp(t,{relative:h});return X.useCallback(v=>{if(By(v,r)){v.preventDefault();let b=s!==void 0?s:Sl(g)===Sl(y);p(t,{replace:b,state:a,preventScrollReset:l,relative:h,viewTransition:x})}},[g,p,y,s,a,r,t,l,h,x])}function $y(t){let e=X.useRef(td(t)),r=X.useRef(!1),s=Xi(),a=X.useMemo(()=>jy(s.search,r.current?null:e.current),[s.search]),l=Gs(),h=X.useCallback((x,p)=>{const g=td(typeof x=="function"?x(a):x);r.current=!0,l("?"+g,p)},[l,a]);return[a,h]}let Xy={data:""},Ky=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||Xy},qy=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Yy=/\/\*[^]*?\*\/|  +/g,h0=/\n+/g,Zn=(t,e)=>{let r="",s="",a="";for(let l in t){let h=t[l];l[0]=="@"?l[1]=="i"?r=l+" "+h+";":s+=l[1]=="f"?Zn(h,l):l+"{"+Zn(h,l[1]=="k"?"":e)+"}":typeof h=="object"?s+=Zn(h,e?e.replace(/([^,])+/g,x=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,p=>/&/.test(p)?p.replace(/&/g,x):x?x+" "+p:p)):l):h!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Zn.p?Zn.p(l,h):l+":"+h+";")}return r+(e&&a?e+"{"+a+"}":a)+s},_n={},Ep=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+Ep(t[r]);return e}return t},Zy=(t,e,r,s,a)=>{let l=Ep(t),h=_n[l]||(_n[l]=(p=>{let g=0,y=11;for(;g<p.length;)y=101*y+p.charCodeAt(g++)>>>0;return"go"+y})(l));if(!_n[h]){let p=l!==t?t:(g=>{let y,v,b=[{}];for(;y=qy.exec(g.replace(Yy,""));)y[4]?b.shift():y[3]?(v=y[3].replace(h0," ").trim(),b.unshift(b[0][v]=b[0][v]||{})):b[0][y[1]]=y[2].replace(h0," ").trim();return b[0]})(t);_n[h]=Zn(a?{["@keyframes "+h]:p}:p,r?"":"."+h)}let x=r&&_n.g?_n.g:null;return r&&(_n.g=_n[h]),((p,g,y,v)=>{v?g.data=g.data.replace(v,p):g.data.indexOf(p)===-1&&(g.data=y?p+g.data:g.data+p)})(_n[h],e,s,x),h},Qy=(t,e,r)=>t.reduce((s,a,l)=>{let h=e[l];if(h&&h.call){let x=h(r),p=x&&x.props&&x.props.className||/^go/.test(x)&&x;h=p?"."+p:x&&typeof x=="object"?x.props?"":Zn(x,""):x===!1?"":x}return s+a+(h??"")},"");function eu(t){let e=this||{},r=t.call?t(e.p):t;return Zy(r.unshift?r.raw?Qy(r,[].slice.call(arguments,1),e.p):r.reduce((s,a)=>Object.assign(s,a&&a.call?a(e.p):a),{}):r,Ky(e.target),e.g,e.o,e.k)}let _p,rd,nd;eu.bind({g:1});let Dn=eu.bind({k:1});function Jy(t,e,r,s){Zn.p=e,_p=t,rd=r,nd=s}function xi(t,e){let r=this||{};return function(){let s=arguments;function a(l,h){let x=Object.assign({},l),p=x.className||a.className;r.p=Object.assign({theme:rd&&rd()},x),r.o=/ *go\d+/.test(p),x.className=eu.apply(r,s)+(p?" "+p:"");let g=t;return t[0]&&(g=x.as||t,delete x.as),nd&&g[0]&&nd(x),_p(g,x)}return a}}var ev=t=>typeof t=="function",Il=(t,e)=>ev(t)?t(e):t,tv=(()=>{let t=0;return()=>(++t).toString()})(),Cp=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),rv=20,yh="default",bp=(t,e)=>{let{toastLimit:r}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,r)};case 1:return{...t,toasts:t.toasts.map(h=>h.id===e.toast.id?{...h,...e.toast}:h)};case 2:let{toast:s}=e;return bp(t,{type:t.toasts.find(h=>h.id===s.id)?1:0,toast:s});case 3:let{toastId:a}=e;return{...t,toasts:t.toasts.map(h=>h.id===a||a===void 0?{...h,dismissed:!0,visible:!1}:h)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(h=>h.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let l=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(h=>({...h,pauseDuration:h.pauseDuration+l}))}}},tl=[],Ap={toasts:[],pausedAt:void 0,settings:{toastLimit:rv}},wn={},Sp=(t,e=yh)=>{wn[e]=bp(wn[e]||Ap,t),tl.forEach(([r,s])=>{r===e&&s(wn[e])})},Ip=t=>Object.keys(wn).forEach(e=>Sp(t,e)),nv=t=>Object.keys(wn).find(e=>wn[e].toasts.some(r=>r.id===t)),tu=(t=yh)=>e=>{Sp(e,t)},iv={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},sv=(t={},e=yh)=>{let[r,s]=X.useState(wn[e]||Ap),a=X.useRef(wn[e]);X.useEffect(()=>(a.current!==wn[e]&&s(wn[e]),tl.push([e,s]),()=>{let h=tl.findIndex(([x])=>x===e);h>-1&&tl.splice(h,1)}),[e]);let l=r.toasts.map(h=>{var x,p,g;return{...t,...t[h.type],...h,removeDelay:h.removeDelay||((x=t[h.type])==null?void 0:x.removeDelay)||(t==null?void 0:t.removeDelay),duration:h.duration||((p=t[h.type])==null?void 0:p.duration)||(t==null?void 0:t.duration)||iv[h.type],style:{...t.style,...(g=t[h.type])==null?void 0:g.style,...h.style}}});return{...r,toasts:l}},ov=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||tv()}),ia=t=>(e,r)=>{let s=ov(e,t,r);return tu(s.toasterId||nv(s.id))({type:2,toast:s}),s.id},Ut=(t,e)=>ia("blank")(t,e);Ut.error=ia("error");Ut.success=ia("success");Ut.loading=ia("loading");Ut.custom=ia("custom");Ut.dismiss=(t,e)=>{let r={type:3,toastId:t};e?tu(e)(r):Ip(r)};Ut.dismissAll=t=>Ut.dismiss(void 0,t);Ut.remove=(t,e)=>{let r={type:4,toastId:t};e?tu(e)(r):Ip(r)};Ut.removeAll=t=>Ut.remove(void 0,t);Ut.promise=(t,e,r)=>{let s=Ut.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(a=>{let l=e.success?Il(e.success,a):void 0;return l?Ut.success(l,{id:s,...r,...r==null?void 0:r.success}):Ut.dismiss(s),a}).catch(a=>{let l=e.error?Il(e.error,a):void 0;l?Ut.error(l,{id:s,...r,...r==null?void 0:r.error}):Ut.dismiss(s)}),t};var av=1e3,lv=(t,e="default")=>{let{toasts:r,pausedAt:s}=sv(t,e),a=X.useRef(new Map).current,l=X.useCallback((v,b=av)=>{if(a.has(v))return;let N=setTimeout(()=>{a.delete(v),h({type:4,toastId:v})},b);a.set(v,N)},[]);X.useEffect(()=>{if(s)return;let v=Date.now(),b=r.map(N=>{if(N.duration===1/0)return;let O=(N.duration||0)+N.pauseDuration-(v-N.createdAt);if(O<0){N.visible&&Ut.dismiss(N.id);return}return setTimeout(()=>Ut.dismiss(N.id,e),O)});return()=>{b.forEach(N=>N&&clearTimeout(N))}},[r,s,e]);let h=X.useCallback(tu(e),[e]),x=X.useCallback(()=>{h({type:5,time:Date.now()})},[h]),p=X.useCallback((v,b)=>{h({type:1,toast:{id:v,height:b}})},[h]),g=X.useCallback(()=>{s&&h({type:6,time:Date.now()})},[s,h]),y=X.useCallback((v,b)=>{let{reverseOrder:N=!1,gutter:O=8,defaultPosition:L}=b||{},j=r.filter(I=>(I.position||L)===(v.position||L)&&I.height),k=j.findIndex(I=>I.id===v.id),R=j.filter((I,B)=>B<k&&I.visible).length;return j.filter(I=>I.visible).slice(...N?[R+1]:[0,R]).reduce((I,B)=>I+(B.height||0)+O,0)},[r]);return X.useEffect(()=>{r.forEach(v=>{if(v.dismissed)l(v.id,v.removeDelay);else{let b=a.get(v.id);b&&(clearTimeout(b),a.delete(v.id))}})},[r,l]),{toasts:r,handlers:{updateHeight:p,startPause:x,endPause:g,calculateOffset:y}}},uv=Dn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,cv=Dn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,dv=Dn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,hv=xi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${uv} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${cv} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${dv} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,fv=Dn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,gv=xi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${fv} 1s linear infinite;
`,pv=Dn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,mv=Dn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,xv=xi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pv} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${mv} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,wv=xi("div")`
  position: absolute;
`,yv=xi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,vv=Dn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ev=xi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${vv} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,_v=({toast:t})=>{let{icon:e,type:r,iconTheme:s}=t;return e!==void 0?typeof e=="string"?X.createElement(Ev,null,e):e:r==="blank"?null:X.createElement(yv,null,X.createElement(gv,{...s}),r!=="loading"&&X.createElement(wv,null,r==="error"?X.createElement(hv,{...s}):X.createElement(xv,{...s})))},Cv=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,bv=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Av="0%{opacity:0;} 100%{opacity:1;}",Sv="0%{opacity:1;} 100%{opacity:0;}",Iv=xi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Nv=xi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Tv=(t,e)=>{let r=t.includes("top")?1:-1,[s,a]=Cp()?[Av,Sv]:[Cv(r),bv(r)];return{animation:e?`${Dn(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Dn(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Rv=X.memo(({toast:t,position:e,style:r,children:s})=>{let a=t.height?Tv(t.position||e||"top-center",t.visible):{opacity:0},l=X.createElement(_v,{toast:t}),h=X.createElement(Nv,{...t.ariaProps},Il(t.message,t));return X.createElement(Iv,{className:t.className,style:{...a,...r,...t.style}},typeof s=="function"?s({icon:l,message:h}):X.createElement(X.Fragment,null,l,h))});Jy(X.createElement);var Ov=({id:t,className:e,style:r,onHeightUpdate:s,children:a})=>{let l=X.useCallback(h=>{if(h){let x=()=>{let p=h.getBoundingClientRect().height;s(t,p)};x(),new MutationObserver(x).observe(h,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return X.createElement("div",{ref:l,className:e,style:r},a)},kv=(t,e)=>{let r=t.includes("top"),s=r?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Cp()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...s,...a}},Pv=eu`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ka=16,Dv=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:s,children:a,toasterId:l,containerStyle:h,containerClassName:x})=>{let{toasts:p,handlers:g}=lv(r,l);return X.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:ka,left:ka,right:ka,bottom:ka,pointerEvents:"none",...h},className:x,onMouseEnter:g.startPause,onMouseLeave:g.endPause},p.map(y=>{let v=y.position||e,b=g.calculateOffset(y,{reverseOrder:t,gutter:s,defaultPosition:e}),N=kv(v,b);return X.createElement(Ov,{id:y.id,key:y.id,onHeightUpdate:g.updateHeight,className:y.visible?Pv:"",style:N},y.type==="custom"?Il(y.message,y):a?a(y):X.createElement(Rv,{toast:y,position:v}))}))},ve=Ut,id=function(t,e){return id=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},id(t,e)};function Np(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");id(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Nl=function(){return Nl=Object.assign||function(e){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},Nl.apply(this,arguments)};function $s(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(r[s[a]]=t[s[a]]);return r}function Tp(t,e,r,s){var a=arguments.length,l=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,r):s,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,r,s);else for(var x=t.length-1;x>=0;x--)(h=t[x])&&(l=(a<3?h(l):a>3?h(e,r,l):h(e,r))||l);return a>3&&l&&Object.defineProperty(e,r,l),l}function Rp(t,e){return function(r,s){e(r,s,t)}}function Op(t,e,r,s,a,l){function h(k){if(k!==void 0&&typeof k!="function")throw new TypeError("Function expected");return k}for(var x=s.kind,p=x==="getter"?"get":x==="setter"?"set":"value",g=!e&&t?s.static?t:t.prototype:null,y=e||(g?Object.getOwnPropertyDescriptor(g,s.name):{}),v,b=!1,N=r.length-1;N>=0;N--){var O={};for(var L in s)O[L]=L==="access"?{}:s[L];for(var L in s.access)O.access[L]=s.access[L];O.addInitializer=function(k){if(b)throw new TypeError("Cannot add initializers after decoration has completed");l.push(h(k||null))};var j=(0,r[N])(x==="accessor"?{get:y.get,set:y.set}:y[p],O);if(x==="accessor"){if(j===void 0)continue;if(j===null||typeof j!="object")throw new TypeError("Object expected");(v=h(j.get))&&(y.get=v),(v=h(j.set))&&(y.set=v),(v=h(j.init))&&a.unshift(v)}else(v=h(j))&&(x==="field"?a.unshift(v):y[p]=v)}g&&Object.defineProperty(g,s.name,y),b=!0}function kp(t,e,r){for(var s=arguments.length>2,a=0;a<e.length;a++)r=s?e[a].call(t,r):e[a].call(t);return s?r:void 0}function Pp(t){return typeof t=="symbol"?t:"".concat(t)}function Dp(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Mp(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function we(t,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function x(y){try{g(s.next(y))}catch(v){h(v)}}function p(y){try{g(s.throw(y))}catch(v){h(v)}}function g(y){y.done?l(y.value):a(y.value).then(x,p)}g((s=s.apply(t,e||[])).next())})}function Lp(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=x(0),h.throw=x(1),h.return=x(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function x(g){return function(y){return p([g,y])}}function p(g){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(s=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(y){g=[6,y],a=0}finally{s=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var ru=Object.create?function(t,e,r,s){s===void 0&&(s=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,s,a)}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]};function Bp(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ru(e,t,r)}function Tl(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],s=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vh(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var s=r.call(t),a,l=[],h;try{for(;(e===void 0||e-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(x){h={error:x}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(h)throw h.error}}return l}function jp(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(vh(arguments[e]));return t}function Fp(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var s=Array(t),a=0,e=0;e<r;e++)for(var l=arguments[e],h=0,x=l.length;h<x;h++,a++)s[a]=l[h];return s}function Up(t,e,r){if(r||arguments.length===2)for(var s=0,a=e.length,l;s<a;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return t.concat(l||Array.prototype.slice.call(e))}function Fs(t){return this instanceof Fs?(this.v=t,this):new Fs(t)}function zp(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(t,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),x("next"),x("throw"),x("return",h),a[Symbol.asyncIterator]=function(){return this},a;function h(N){return function(O){return Promise.resolve(O).then(N,v)}}function x(N,O){s[N]&&(a[N]=function(L){return new Promise(function(j,k){l.push([N,L,j,k])>1||p(N,L)})},O&&(a[N]=O(a[N])))}function p(N,O){try{g(s[N](O))}catch(L){b(l[0][3],L)}}function g(N){N.value instanceof Fs?Promise.resolve(N.value.v).then(y,v):b(l[0][2],N)}function y(N){p("next",N)}function v(N){p("throw",N)}function b(N,O){N(O),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Vp(t){var e,r;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,l){e[a]=t[a]?function(h){return(r=!r)?{value:Fs(t[a](h)),done:!1}:l?l(h):h}:l}}function Wp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Tl=="function"?Tl(t):t[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(l){r[l]=t[l]&&function(h){return new Promise(function(x,p){h=t[l](h),a(x,p,h.done,h.value)})}}function a(l,h,x,p){Promise.resolve(p).then(function(g){l({value:g,done:x})},h)}}function Hp(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Mv=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},sd=function(t){return sd=Object.getOwnPropertyNames||function(e){var r=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[r.length]=s);return r},sd(t)};function Gp(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=sd(t),s=0;s<r.length;s++)r[s]!=="default"&&ru(e,t,r[s]);return Mv(e,t),e}function $p(t){return t&&t.__esModule?t:{default:t}}function Xp(t,e,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(t):s?s.value:e.get(t)}function Kp(t,e,r,s,a){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?a.call(t,r):a?a.value=r:e.set(t,r),r}function qp(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Yp(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],r&&(a=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");a&&(s=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:e,dispose:s,async:r})}else r&&t.stack.push({async:!0});return e}var Lv=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var s=new Error(r);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function Zp(t){function e(l){t.error=t.hasError?new Lv(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var r,s=0;function a(){for(;r=t.stack.pop();)try{if(!r.async&&s===1)return s=0,t.stack.push(r),Promise.resolve().then(a);if(r.dispose){var l=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(l).then(a,function(h){return e(h),a()})}else s|=1}catch(h){e(h)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function Qp(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,s,a,l,h){return s?e?".jsx":".js":a&&(!l||!h)?r:a+l+"."+h.toLowerCase()+"js"}):t}const Bv={__extends:Np,__assign:Nl,__rest:$s,__decorate:Tp,__param:Rp,__esDecorate:Op,__runInitializers:kp,__propKey:Pp,__setFunctionName:Dp,__metadata:Mp,__awaiter:we,__generator:Lp,__createBinding:ru,__exportStar:Bp,__values:Tl,__read:vh,__spread:jp,__spreadArrays:Fp,__spreadArray:Up,__await:Fs,__asyncGenerator:zp,__asyncDelegator:Vp,__asyncValues:Wp,__makeTemplateObject:Hp,__importStar:Gp,__importDefault:$p,__classPrivateFieldGet:Xp,__classPrivateFieldSet:Kp,__classPrivateFieldIn:qp,__addDisposableResource:Yp,__disposeResources:Zp,__rewriteRelativeImportExtension:Qp},jv=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Yp,get __assign(){return Nl},__asyncDelegator:Vp,__asyncGenerator:zp,__asyncValues:Wp,__await:Fs,__awaiter:we,__classPrivateFieldGet:Xp,__classPrivateFieldIn:qp,__classPrivateFieldSet:Kp,__createBinding:ru,__decorate:Tp,__disposeResources:Zp,__esDecorate:Op,__exportStar:Bp,__extends:Np,__generator:Lp,__importDefault:$p,__importStar:Gp,__makeTemplateObject:Hp,__metadata:Mp,__param:Rp,__propKey:Pp,__read:vh,__rest:$s,__rewriteRelativeImportExtension:Qp,__runInitializers:kp,__setFunctionName:Dp,__spread:jp,__spreadArray:Up,__spreadArrays:Fp,__values:Tl,default:Bv},Symbol.toStringTag,{value:"Module"})),Fv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Eh extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class Uv extends Eh{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class f0 extends Eh{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class g0 extends Eh{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var od;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(od||(od={}));class zv{constructor(e,{headers:r={},customFetch:s,region:a=od.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=Fv(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return we(this,arguments,void 0,function*(r,s={}){var a;let l,h;try{const{headers:x,method:p,body:g,signal:y,timeout:v}=s;let b={},{region:N}=s;N||(N=this.region);const O=new URL(`${this.url}/${r}`);N&&N!=="any"&&(b["x-region"]=N,O.searchParams.set("forceFunctionRegion",N));let L;g&&(x&&!Object.prototype.hasOwnProperty.call(x,"Content-Type")||!x)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",L=g):typeof g=="string"?(b["Content-Type"]="text/plain",L=g):typeof FormData<"u"&&g instanceof FormData?L=g:(b["Content-Type"]="application/json",L=JSON.stringify(g)):L=g;let j=y;v&&(h=new AbortController,l=setTimeout(()=>h.abort(),v),y?(j=h.signal,y.addEventListener("abort",()=>h.abort())):j=h.signal);const k=yield this.fetch(O.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),x),body:L,signal:j}).catch(W=>{throw new Uv(W)}),R=k.headers.get("x-relay-error");if(R&&R==="true")throw new f0(k);if(!k.ok)throw new g0(k);let I=((a=k.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),B;return I==="application/json"?B=yield k.json():I==="application/octet-stream"||I==="application/pdf"?B=yield k.blob():I==="text/event-stream"?B=k:I==="multipart/form-data"?B=yield k.formData():B=yield k.text(),{data:B,error:null,response:k}}catch(x){return{data:null,error:x,response:x instanceof g0||x instanceof f0?x.context:void 0}}finally{l&&clearTimeout(l)}})}}var dr={};const Xs=px(jv);var Pa={},Da={},Ma={},La={},Ba={},ja={},p0;function Jp(){if(p0)return ja;p0=1,Object.defineProperty(ja,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return ja.default=t,ja}var m0;function em(){if(m0)return Ba;m0=1,Object.defineProperty(Ba,"__esModule",{value:!0});const e=Xs.__importDefault(Jp());class r{constructor(a){var l,h;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(h=a.isMaybeSingle)!==null&&h!==void 0?h:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let x=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var g,y,v,b;let N=null,O=null,L=null,j=p.status,k=p.statusText;if(p.ok){if(this.method!=="HEAD"){const W=await p.text();W===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?O=W:O=JSON.parse(W))}const I=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),B=(v=p.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");I&&B&&B.length>1&&(L=parseInt(B[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(O)&&(O.length>1?(N={code:"PGRST116",details:`Results contain ${O.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},O=null,L=null,j=406,k="Not Acceptable"):O.length===1?O=O[0]:O=null)}else{const I=await p.text();try{N=JSON.parse(I),Array.isArray(N)&&p.status===404&&(O=[],N=null,j=200,k="OK")}catch{p.status===404&&I===""?(j=204,k="No Content"):N={message:I}}if(N&&this.isMaybeSingle&&(!((b=N==null?void 0:N.details)===null||b===void 0)&&b.includes("0 rows"))&&(N=null,j=200,k="OK"),N&&this.shouldThrowOnError)throw new e.default(N)}return{error:N,data:O,count:L,status:j,statusText:k}});return this.shouldThrowOnError||(x=x.catch(p=>{var g,y,v;return{error:{message:`${(g=p==null?void 0:p.name)!==null&&g!==void 0?g:"FetchError"}: ${p==null?void 0:p.message}`,details:`${(y=p==null?void 0:p.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(v=p==null?void 0:p.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),x.then(a,l)}returns(){return this}overrideTypes(){return this}}return Ba.default=r,Ba}var x0;function tm(){if(x0)return La;x0=1,Object.defineProperty(La,"__esModule",{value:!0});const e=Xs.__importDefault(em());class r extends e.default{select(a){let l=!1;const h=(a??"*").split("").map(x=>/\s/.test(x)&&!l?"":(x==='"'&&(l=!l),x)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:h,foreignTable:x,referencedTable:p=x}={}){const g=p?`${p}.order`:"order",y=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${y?`${y},`:""}${a}.${l?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:h=l}={}){const x=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(x,`${a}`),this}range(a,l,{foreignTable:h,referencedTable:x=h}={}){const p=typeof x>"u"?"offset":`${x}.offset`,g=typeof x>"u"?"limit":`${x}.limit`;return this.url.searchParams.set(p,`${a}`),this.url.searchParams.set(g,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:h=!1,buffers:x=!1,wal:p=!1,format:g="text"}={}){var y;const v=[a?"analyze":null,l?"verbose":null,h?"settings":null,x?"buffers":null,p?"wal":null].filter(Boolean).join("|"),b=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${b}"; options=${v};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return La.default=r,La}var w0;function _h(){if(w0)return Ma;w0=1,Object.defineProperty(Ma,"__esModule",{value:!0});const e=Xs.__importDefault(tm()),r=new RegExp("[,()]");class s extends e.default{eq(l,h){return this.url.searchParams.append(l,`eq.${h}`),this}neq(l,h){return this.url.searchParams.append(l,`neq.${h}`),this}gt(l,h){return this.url.searchParams.append(l,`gt.${h}`),this}gte(l,h){return this.url.searchParams.append(l,`gte.${h}`),this}lt(l,h){return this.url.searchParams.append(l,`lt.${h}`),this}lte(l,h){return this.url.searchParams.append(l,`lte.${h}`),this}like(l,h){return this.url.searchParams.append(l,`like.${h}`),this}likeAllOf(l,h){return this.url.searchParams.append(l,`like(all).{${h.join(",")}}`),this}likeAnyOf(l,h){return this.url.searchParams.append(l,`like(any).{${h.join(",")}}`),this}ilike(l,h){return this.url.searchParams.append(l,`ilike.${h}`),this}ilikeAllOf(l,h){return this.url.searchParams.append(l,`ilike(all).{${h.join(",")}}`),this}ilikeAnyOf(l,h){return this.url.searchParams.append(l,`ilike(any).{${h.join(",")}}`),this}is(l,h){return this.url.searchParams.append(l,`is.${h}`),this}in(l,h){const x=Array.from(new Set(h)).map(p=>typeof p=="string"&&r.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(l,`in.(${x})`),this}contains(l,h){return typeof h=="string"?this.url.searchParams.append(l,`cs.${h}`):Array.isArray(h)?this.url.searchParams.append(l,`cs.{${h.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(h)}`),this}containedBy(l,h){return typeof h=="string"?this.url.searchParams.append(l,`cd.${h}`):Array.isArray(h)?this.url.searchParams.append(l,`cd.{${h.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(h)}`),this}rangeGt(l,h){return this.url.searchParams.append(l,`sr.${h}`),this}rangeGte(l,h){return this.url.searchParams.append(l,`nxl.${h}`),this}rangeLt(l,h){return this.url.searchParams.append(l,`sl.${h}`),this}rangeLte(l,h){return this.url.searchParams.append(l,`nxr.${h}`),this}rangeAdjacent(l,h){return this.url.searchParams.append(l,`adj.${h}`),this}overlaps(l,h){return typeof h=="string"?this.url.searchParams.append(l,`ov.${h}`):this.url.searchParams.append(l,`ov.{${h.join(",")}}`),this}textSearch(l,h,{config:x,type:p}={}){let g="";p==="plain"?g="pl":p==="phrase"?g="ph":p==="websearch"&&(g="w");const y=x===void 0?"":`(${x})`;return this.url.searchParams.append(l,`${g}fts${y}.${h}`),this}match(l){return Object.entries(l).forEach(([h,x])=>{this.url.searchParams.append(h,`eq.${x}`)}),this}not(l,h,x){return this.url.searchParams.append(l,`not.${h}.${x}`),this}or(l,{foreignTable:h,referencedTable:x=h}={}){const p=x?`${x}.or`:"or";return this.url.searchParams.append(p,`(${l})`),this}filter(l,h,x){return this.url.searchParams.append(l,`${h}.${x}`),this}}return Ma.default=s,Ma}var y0;function rm(){if(y0)return Da;y0=1,Object.defineProperty(Da,"__esModule",{value:!0});const e=Xs.__importDefault(_h());class r{constructor(a,{headers:l={},schema:h,fetch:x}){this.url=a,this.headers=new Headers(l),this.schema=h,this.fetch=x}select(a,l){const{head:h=!1,count:x}=l??{},p=h?"HEAD":"GET";let g=!1;const y=(a??"*").split("").map(v=>/\s/.test(v)&&!g?"":(v==='"'&&(g=!g),v)).join("");return this.url.searchParams.set("select",y),x&&this.headers.append("Prefer",`count=${x}`),new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:h=!0}={}){var x;const p="POST";if(l&&this.headers.append("Prefer",`count=${l}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const g=a.reduce((y,v)=>y.concat(Object.keys(v)),[]);if(g.length>0){const y=[...new Set(g)].map(v=>`"${v}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:h=!1,count:x,defaultToNull:p=!0}={}){var g;const y="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),x&&this.headers.append("Prefer",`count=${x}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const v=a.reduce((b,N)=>b.concat(Object.keys(N)),[]);if(v.length>0){const b=[...new Set(v)].map(N=>`"${N}"`);this.url.searchParams.set("columns",b.join(","))}}return new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(a,{count:l}={}){var h;const x="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:a}={}){var l;const h="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return Da.default=r,Da}var v0;function Vv(){if(v0)return Pa;v0=1,Object.defineProperty(Pa,"__esModule",{value:!0});const t=Xs,e=t.__importDefault(rm()),r=t.__importDefault(_h());class s{constructor(l,{headers:h={},schema:x,fetch:p}={}){this.url=l,this.headers=new Headers(h),this.schemaName=x,this.fetch=p}from(l){const h=new URL(`${this.url}/${l}`);return new e.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,h={},{head:x=!1,get:p=!1,count:g}={}){var y;let v;const b=new URL(`${this.url}/rpc/${l}`);let N;x||p?(v=x?"HEAD":"GET",Object.entries(h).filter(([L,j])=>j!==void 0).map(([L,j])=>[L,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([L,j])=>{b.searchParams.append(L,j)})):(v="POST",N=h);const O=new Headers(this.headers);return g&&O.set("Prefer",`count=${g}`),new r.default({method:v,url:b,headers:O,schema:this.schemaName,body:N,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return Pa.default=s,Pa}Object.defineProperty(dr,"__esModule",{value:!0});var nm=dr.PostgrestError=fm=dr.PostgrestBuilder=dm=dr.PostgrestTransformBuilder=um=dr.PostgrestFilterBuilder=am=dr.PostgrestQueryBuilder=sm=dr.PostgrestClient=void 0;const Ks=Xs,im=Ks.__importDefault(Vv());var sm=dr.PostgrestClient=im.default;const om=Ks.__importDefault(rm());var am=dr.PostgrestQueryBuilder=om.default;const lm=Ks.__importDefault(_h());var um=dr.PostgrestFilterBuilder=lm.default;const cm=Ks.__importDefault(tm());var dm=dr.PostgrestTransformBuilder=cm.default;const hm=Ks.__importDefault(em());var fm=dr.PostgrestBuilder=hm.default;const gm=Ks.__importDefault(Jp());nm=dr.PostgrestError=gm.default;var pm=dr.default={PostgrestClient:im.default,PostgrestQueryBuilder:om.default,PostgrestFilterBuilder:lm.default,PostgrestTransformBuilder:cm.default,PostgrestBuilder:hm.default,PostgrestError:gm.default};const Wv=yd({__proto__:null,get PostgrestBuilder(){return fm},get PostgrestClient(){return sm},get PostgrestError(){return nm},get PostgrestFilterBuilder(){return um},get PostgrestQueryBuilder(){return am},get PostgrestTransformBuilder(){return dm},default:pm},[dr]),{PostgrestClient:Hv,PostgrestQueryBuilder:nC,PostgrestFilterBuilder:iC,PostgrestTransformBuilder:sC,PostgrestBuilder:oC,PostgrestError:aC}=pm||Wv;class Gv{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const s=this.getWebSocketConstructor();return new s(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const $v="2.81.1",Xv=`realtime-js/${$v}`,mm="1.0.0",Kv="2.0.0",E0=mm,ad=1e4,qv=1e3,Yv=100;var Ri;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ri||(Ri={}));var jt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(jt||(jt={}));var zr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(zr||(zr={}));var ld;(function(t){t.websocket="websocket"})(ld||(ld={}));var Oi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Oi||(Oi={}));class Zv{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,r){if(this._isArrayBuffer(e.payload))return r(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(s))}_binaryEncodePush(e){const{join_ref:r,ref:s,event:a,topic:l,payload:h}=e,x=this.META_LENGTH+r.length+s.length+l.length+a.length,p=new ArrayBuffer(this.HEADER_LENGTH+x);let g=new DataView(p),y=0;g.setUint8(y++,this.KINDS.push),g.setUint8(y++,r.length),g.setUint8(y++,s.length),g.setUint8(y++,l.length),g.setUint8(y++,a.length),Array.from(r,b=>g.setUint8(y++,b.charCodeAt(0))),Array.from(s,b=>g.setUint8(y++,b.charCodeAt(0))),Array.from(l,b=>g.setUint8(y++,b.charCodeAt(0))),Array.from(a,b=>g.setUint8(y++,b.charCodeAt(0)));var v=new Uint8Array(p.byteLength+h.byteLength);return v.set(new Uint8Array(p),0),v.set(new Uint8Array(h),p.byteLength),v.buffer}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,s;const{join_ref:a,ref:l,topic:h}=e,x=e.payload.event,p=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0),g=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+l.length+h.length+x.length,y=new ArrayBuffer(this.HEADER_LENGTH+g);let v=new DataView(y),b=0;v.setUint8(b++,this.KINDS.userBroadcastPush),v.setUint8(b++,a.length),v.setUint8(b++,l.length),v.setUint8(b++,h.length),v.setUint8(b++,x.length),v.setUint8(b++,this.BINARY_ENCODING),Array.from(a,O=>v.setUint8(b++,O.charCodeAt(0))),Array.from(l,O=>v.setUint8(b++,O.charCodeAt(0))),Array.from(h,O=>v.setUint8(b++,O.charCodeAt(0))),Array.from(x,O=>v.setUint8(b++,O.charCodeAt(0)));var N=new Uint8Array(y.byteLength+p.byteLength);return N.set(new Uint8Array(y),0),N.set(new Uint8Array(p),y.byteLength),N.buffer}_encodeJsonUserBroadcastPush(e){var r,s;const{join_ref:a,ref:l,topic:h}=e,x=e.payload.event,p=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},y=new TextEncoder().encode(JSON.stringify(p)).buffer,v=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+l.length+h.length+x.length,b=new ArrayBuffer(this.HEADER_LENGTH+v);let N=new DataView(b),O=0;N.setUint8(O++,this.KINDS.userBroadcastPush),N.setUint8(O++,a.length),N.setUint8(O++,l.length),N.setUint8(O++,h.length),N.setUint8(O++,x.length),N.setUint8(O++,this.JSON_ENCODING),Array.from(a,j=>N.setUint8(O++,j.charCodeAt(0))),Array.from(l,j=>N.setUint8(O++,j.charCodeAt(0))),Array.from(h,j=>N.setUint8(O++,j.charCodeAt(0))),Array.from(x,j=>N.setUint8(O++,j.charCodeAt(0)));var L=new Uint8Array(b.byteLength+y.byteLength);return L.set(new Uint8Array(b),0),L.set(new Uint8Array(y),b.byteLength),L.buffer}decode(e,r){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return r(s)}if(typeof e=="string"){const s=JSON.parse(e),[a,l,h,x,p]=s;return r({join_ref:a,ref:l,topic:h,event:x,payload:p})}return r({})}_binaryDecode(e){const r=new DataView(e),s=r.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.push:return this._decodePush(e,r,a);case this.KINDS.reply:return this._decodeReply(e,r,a);case this.KINDS.broadcast:return this._decodeBroadcast(e,r,a);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,a)}}_decodePush(e,r,s){const a=r.getUint8(1),l=r.getUint8(2),h=r.getUint8(3);let x=this.HEADER_LENGTH+this.META_LENGTH-1;const p=s.decode(e.slice(x,x+a));x=x+a;const g=s.decode(e.slice(x,x+l));x=x+l;const y=s.decode(e.slice(x,x+h));x=x+h;const v=JSON.parse(s.decode(e.slice(x,e.byteLength)));return{join_ref:p,ref:null,topic:g,event:y,payload:v}}_decodeReply(e,r,s){const a=r.getUint8(1),l=r.getUint8(2),h=r.getUint8(3),x=r.getUint8(4);let p=this.HEADER_LENGTH+this.META_LENGTH;const g=s.decode(e.slice(p,p+a));p=p+a;const y=s.decode(e.slice(p,p+l));p=p+l;const v=s.decode(e.slice(p,p+h));p=p+h;const b=s.decode(e.slice(p,p+x));p=p+x;const N=JSON.parse(s.decode(e.slice(p,e.byteLength))),O={status:b,response:N};return{join_ref:g,ref:y,topic:v,event:zr.reply,payload:O}}_decodeBroadcast(e,r,s){const a=r.getUint8(1),l=r.getUint8(2);let h=this.HEADER_LENGTH+2;const x=s.decode(e.slice(h,h+a));h=h+a;const p=s.decode(e.slice(h,h+l));h=h+l;const g=JSON.parse(s.decode(e.slice(h,e.byteLength)));return{join_ref:null,ref:null,topic:x,event:p,payload:g}}_decodeUserBroadcast(e,r,s){const a=r.getUint8(1),l=r.getUint8(2),h=r.getUint8(3),x=r.getUint8(4);let p=this.HEADER_LENGTH+4;const g=s.decode(e.slice(p,p+a));p=p+a;const y=s.decode(e.slice(p,p+l));p=p+l;const v=s.decode(e.slice(p,p+h));p=p+h;const b=e.slice(p,e.byteLength),N=x===this.JSON_ENCODING?JSON.parse(s.decode(b)):b,O={type:this.BROADCAST,event:y,payload:N};return h>0&&(O.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST,payload:O}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class xm{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ut;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ut||(ut={}));const _0=(t,e,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,h)=>(l[h]=Qv(h,t,e,a),l),{}):{}},Qv=(t,e,r,s)=>{const a=e.find(x=>x.name===t),l=a==null?void 0:a.type,h=r[t];return l&&!s.includes(l)?wm(l,h):ud(h)},wm=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return rE(e,r)}switch(t){case ut.bool:return Jv(e);case ut.float4:case ut.float8:case ut.int2:case ut.int4:case ut.int8:case ut.numeric:case ut.oid:return eE(e);case ut.json:case ut.jsonb:return tE(e);case ut.timestamp:return nE(e);case ut.abstime:case ut.date:case ut.daterange:case ut.int4range:case ut.int8range:case ut.money:case ut.reltime:case ut.text:case ut.time:case ut.timestamptz:case ut.timetz:case ut.tsrange:case ut.tstzrange:return ud(e);default:return ud(e)}},ud=t=>t,Jv=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},eE=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},tE=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},rE=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let l;const h=t.slice(1,r);try{l=JSON.parse("["+h+"]")}catch{l=h?h.split(","):[]}return l.map(x=>wm(e,x))}return t},nE=t=>typeof t=="string"?t.replace(" ","T"):t,ym=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Yu{constructor(e,r,s={},a=ad){this.channel=e,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var C0;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(C0||(C0={}));class To{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:h,onSync:x}=this.caller;this.joinRef=this.channel._joinRef(),this.state=To.syncState(this.state,a,l,h),this.pendingDiffs.forEach(p=>{this.state=To.syncDiff(this.state,p,l,h)}),this.pendingDiffs=[],x()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:h,onSync:x}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=To.syncDiff(this.state,a,l,h),x())}),this.onJoin((a,l,h)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:h})}),this.onLeave((a,l,h)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,a){const l=this.cloneDeep(e),h=this.transformState(r),x={},p={};return this.map(l,(g,y)=>{h[g]||(p[g]=y)}),this.map(h,(g,y)=>{const v=l[g];if(v){const b=y.map(j=>j.presence_ref),N=v.map(j=>j.presence_ref),O=y.filter(j=>N.indexOf(j.presence_ref)<0),L=v.filter(j=>b.indexOf(j.presence_ref)<0);O.length>0&&(x[g]=O),L.length>0&&(p[g]=L)}else x[g]=y}),this.syncDiff(l,{joins:x,leaves:p},s,a)}static syncDiff(e,r,s,a){const{joins:l,leaves:h}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(x,p)=>{var g;const y=(g=e[x])!==null&&g!==void 0?g:[];if(e[x]=this.cloneDeep(p),y.length>0){const v=e[x].map(N=>N.presence_ref),b=y.filter(N=>v.indexOf(N.presence_ref)<0);e[x].unshift(...b)}s(x,y,p)}),this.map(h,(x,p)=>{let g=e[x];if(!g)return;const y=p.map(v=>v.presence_ref);g=g.filter(v=>y.indexOf(v.presence_ref)<0),e[x]=g,a(x,g,p),g.length===0&&delete e[x]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const a=e[s];return"metas"in a?r[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[s]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var b0;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(b0||(b0={}));var Ro;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ro||(Ro={}));var An;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(An||(An={}));class Ch{constructor(e,r={config:{}},s){var a,l;if(this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=jt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Yu(this,zr.join,this.params,this.timeout),this.rejoinTimer=new xm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jt.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(zr.reply,{},(h,x)=>{this._trigger(this._replyEventName(x),h)}),this.presence=new To(this),this.broadcastEndpointURL=ym(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var s,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==jt.closed){const{config:{broadcast:h,presence:x,private:p}}=this.params,g=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(N=>N.filter))!==null&&a!==void 0?a:[],y=!!this.bindings[Ro.PRESENCE]&&this.bindings[Ro.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,v={},b={broadcast:h,presence:Object.assign(Object.assign({},x),{enabled:y}),postgres_changes:g,private:p};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(N=>e==null?void 0:e(An.CHANNEL_ERROR,N)),this._onClose(()=>e==null?void 0:e(An.CLOSED)),this.updateJoinPayload(Object.assign({config:b},v)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:N})=>{var O;if(this.socket.setAuth(),N===void 0){e==null||e(An.SUBSCRIBED);return}else{const L=this.bindings.postgres_changes,j=(O=L==null?void 0:L.length)!==null&&O!==void 0?O:0,k=[];for(let R=0;R<j;R++){const I=L[R],{filter:{event:B,schema:W,table:$,filter:U}}=I,D=N&&N[R];if(D&&D.event===B&&D.schema===W&&D.table===$&&D.filter===U)k.push(Object.assign(Object.assign({},I),{id:D.id}));else{this.unsubscribe(),this.state=jt.errored,e==null||e(An.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(An.SUBSCRIBED);return}}).receive("error",N=>{this.state=jt.errored,e==null||e(An.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(N).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(An.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this.state===jt.joined&&e===Ro.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,s)}async httpSend(e,r,s={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const h={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},x=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(x.status===202)return{success:!0};let p=x.statusText;try{const g=await x.json();p=g.error||g.message||p}catch{}return Promise.reject(new Error(p))}async send(e,r={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:h}=e,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=g.body)===null||a===void 0?void 0:a.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var h,x,p;const g=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(x=(h=this.params)===null||h===void 0?void 0:h.config)===null||x===void 0?void 0:x.broadcast)===null||p===void 0)&&p.ack)&&l("ok"),g.receive("ok",()=>l("ok")),g.receive("error",()=>l("error")),g.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=jt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(zr.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Yu(this,zr.leave,{},e),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=jt.closed,this.bindings={}}async _fetchWithTimeout(e,r,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),h=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(l),h}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Yu(this,e,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Yv){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var a,l;const h=e.toLocaleLowerCase(),{close:x,error:p,leave:g,join:y}=zr;if(s&&[x,p,g,y].indexOf(h)>=0&&s!==this._joinRef())return;let b=this._onMessage(h,r,s);if(r&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(N=>{var O,L,j;return((O=N.filter)===null||O===void 0?void 0:O.event)==="*"||((j=(L=N.filter)===null||L===void 0?void 0:L.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===h}).map(N=>N.callback(b,s)):(l=this.bindings[h])===null||l===void 0||l.filter(N=>{var O,L,j,k,R,I;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in N){const B=N.id,W=(O=N.filter)===null||O===void 0?void 0:O.event;return B&&((L=r.ids)===null||L===void 0?void 0:L.includes(B))&&(W==="*"||(W==null?void 0:W.toLocaleLowerCase())===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const B=(R=(k=N==null?void 0:N.filter)===null||k===void 0?void 0:k.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return B==="*"||B===((I=r==null?void 0:r.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return N.type.toLocaleLowerCase()===h}).map(N=>{if(typeof b=="object"&&"ids"in b){const O=b.data,{schema:L,table:j,commit_timestamp:k,type:R,errors:I}=O;b=Object.assign(Object.assign({},{schema:L,table:j,commit_timestamp:k,eventType:R,new:{},old:{},errors:I}),this._getPayloadRecords(O))}N.callback(b,s)})}_isClosed(){return this.state===jt.closed}_isJoined(){return this.state===jt.joined}_isJoining(){return this.state===jt.joining}_isLeaving(){return this.state===jt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const a=e.toLocaleLowerCase(),l={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&Ch.isEqual(a.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(zr.close,{},e)}_onError(e){this._on(zr.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=_0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=_0(e.columns,e.old_record)),r}}const Zu=()=>{},Fa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},iE=[1e3,2e3,5e3,1e4],sE=1e4,oE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aE{constructor(e,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ad,this.transport=null,this.heartbeatIntervalMs=Fa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Zu,this.ref=0,this.reconnectTimer=null,this.vsn=E0,this.logger=Zu,this.conn=null,this.sendBuffer=[],this.serializer=new Zv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${ld.websocket}`,this.httpEndpoint=ym(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gv.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ri.connecting:return Oi.Connecting;case Ri.open:return Oi.Open;case Ri.closing:return Oi.Closing;default:return Oi.Closed}}isConnected(){return this.connectionState()===Oi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new Ch(`realtime:${e}`,r,this);return this.channels.push(l),l}}push(e){const{topic:r,event:s,payload:a,ref:l}=e,h=()=>{this.encode(e,x=>{var p;(p=this.conn)===null||p===void 0||p.send(x)})};this.log("push",`${r} ${s} (${l})`,a),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(qv,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Fa.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:l,ref:h}=r,x=h?`(${h})`:"",p=l.status||"";this.log("receive",`${p} ${s} ${a} ${x}`.trim(),l),this.channels.filter(g=>g._isMember(s)).forEach(g=>g._trigger(a,l,h)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ri.open||this.conn.readyState===Ri.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(zr.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${s}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([oE],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:Xv};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(zr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new xm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,s,a,l,h,x,p,g,y,v,b,N;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:ad,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Fa.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(h=e==null?void 0:e.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(x=e==null?void 0:e.heartbeatCallback)!==null&&x!==void 0?x:Zu,this.vsn=(p=e==null?void 0:e.vsn)!==null&&p!==void 0?p:E0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e==null?void 0:e.reconnectAfterMs)!==null&&g!==void 0?g:O=>iE[O-1]||sE,this.vsn){case mm:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:(O,L)=>L(JSON.stringify(O)),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:(O,L)=>L(JSON.parse(O));break;case Kv:this.encode=(b=e==null?void 0:e.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(N=e==null?void 0:e.decode)!==null&&N!==void 0?N:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class bh extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function yt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class lE extends bh{constructor(e,r,s){super(e),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class cd extends bh{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Ah=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),uE=()=>Response,dd=t=>{if(Array.isArray(t))return t.map(r=>dd(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=dd(s)}),e},cE=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Qu=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},dE=(t,e,r)=>we(void 0,void 0,void 0,function*(){const s=yield uE();t instanceof s&&!(r!=null&&r.noResolveJson)?t.json().then(a=>{const l=t.status||500,h=(a==null?void 0:a.statusCode)||l+"";e(new lE(Qu(a),l,h))}).catch(a=>{e(new cd(Qu(a),a))}):e(new cd(Qu(t),t))}),hE=(t,e,r,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?a:(cE(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),r))};function sa(t,e,r,s,a,l){return we(this,void 0,void 0,function*(){return new Promise((h,x)=>{t(r,hE(e,s,a,l)).then(p=>{if(!p.ok)throw p;return s!=null&&s.noResolveJson?p:p.json()}).then(p=>h(p)).catch(p=>dE(p,x,s))})})}function Yo(t,e,r,s){return we(this,void 0,void 0,function*(){return sa(t,"GET",e,r,s)})}function rn(t,e,r,s,a){return we(this,void 0,void 0,function*(){return sa(t,"POST",e,s,a,r)})}function hd(t,e,r,s,a){return we(this,void 0,void 0,function*(){return sa(t,"PUT",e,s,a,r)})}function fE(t,e,r,s){return we(this,void 0,void 0,function*(){return sa(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Sh(t,e,r,s,a){return we(this,void 0,void 0,function*(){return sa(t,"DELETE",e,s,a,r)})}class gE{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return we(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yt(e))return{data:null,error:e};throw e}})}}var vm;class pE{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[vm]="BlobDownloadBuilder",this.promise=null}asStream(){return new gE(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return we(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yt(e))return{data:null,error:e};throw e}})}}vm=Symbol.toStringTag;const mE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},A0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class xE{constructor(e,r={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=s,this.fetch=Ah(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,s,a){return we(this,void 0,void 0,function*(){try{let l;const h=Object.assign(Object.assign({},A0),a);let x=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(h.upsert)});const p=h.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",h.cacheControl),p&&l.append("metadata",this.encodeMetadata(p)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",h.cacheControl),p&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(p))):(l=s,x["cache-control"]=`max-age=${h.cacheControl}`,x["content-type"]=h.contentType,p&&(x["x-metadata"]=this.toBase64(this.encodeMetadata(p))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!h.duplex&&(h.duplex="half")),a!=null&&a.headers&&(x=Object.assign(Object.assign({},x),a.headers));const g=this._removeEmptyFolders(r),y=this._getFinalPath(g),v=yield(e=="PUT"?hd:rn)(this.fetch,`${this.url}/object/${y}`,l,Object.assign({headers:x},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{data:{path:g,id:v.Id,fullPath:v.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(yt(l))return{data:null,error:l};throw l}})}upload(e,r,s){return we(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,a){return we(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),h=this._getFinalPath(l),x=new URL(this.url+`/object/upload/sign/${h}`);x.searchParams.set("token",r);try{let p;const g=Object.assign({upsert:A0.upsert},a),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&s instanceof Blob?(p=new FormData,p.append("cacheControl",g.cacheControl),p.append("",s)):typeof FormData<"u"&&s instanceof FormData?(p=s,p.append("cacheControl",g.cacheControl)):(p=s,y["cache-control"]=`max-age=${g.cacheControl}`,y["content-type"]=g.contentType);const v=yield hd(this.fetch,x.toString(),p,{headers:y});return{data:{path:l,fullPath:v.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(yt(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(e,r){return we(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const l=yield rn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),h=new URL(this.url+l.url),x=h.searchParams.get("token");if(!x)throw new bh("No token returned by API");return{data:{signedUrl:h.toString(),path:e,token:x},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s))return{data:null,error:s};throw s}})}update(e,r,s){return we(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return we(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}copy(e,r,s){return we(this,void 0,void 0,function*(){try{return{data:{path:(yield rn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,s){return we(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield rn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const h=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${h}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,s){return we(this,void 0,void 0,function*(){try{const a=yield rn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}download(e,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),h=l?`?${l}`:"",x=this._getFinalPath(e),p=()=>Yo(this.fetch,`${this.url}/${a}/${x}${h}`,{headers:this.headers,noResolveJson:!0});return new pE(p,this.shouldThrowOnError)}info(e){return we(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield Yo(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:dd(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s))return{data:null,error:s};throw s}})}exists(e){return we(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield fE(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s)&&s instanceof cd){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),a=[],l=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";l!==""&&a.push(l);const x=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",p=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});p!==""&&a.push(p);let g=a.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${x}/public/${s}${g}`)}}}remove(e){return we(this,void 0,void 0,function*(){try{return{data:yield Sh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}list(e,r,s){return we(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},mE),r),{prefix:e||""});return{data:yield rn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}listV2(e,r){return we(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield rn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Em="2.81.1",_m={"X-Client-Info":`storage-js/${Em}`};class wE{constructor(e,r={},s,a){this.shouldThrowOnError=!1;const l=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_m),r),this.fetch=Ah(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return we(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield Yo(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}getBucket(e){return we(this,void 0,void 0,function*(){try{return{data:yield Yo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}createBucket(e){return we(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield rn(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}updateBucket(e,r){return we(this,void 0,void 0,function*(){try{return{data:yield hd(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return we(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return we(this,void 0,void 0,function*(){try{return{data:yield Sh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class yE{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_m),r),this.fetch=Ah(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return we(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}listBuckets(e){return we(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const s=r.toString(),a=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Yo(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return we(this,void 0,void 0,function*(){try{return{data:yield Sh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}}const Ih={"X-Client-Info":`storage-js/${Em}`,"Content-Type":"application/json"};class Cm extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Tr(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Ju extends Cm{constructor(e,r,s){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vE extends Cm{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var S0;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(S0||(S0={}));const Nh=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),EE=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},I0=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),_E=(t,e,r)=>we(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const a=t.status||500,l=t;if(typeof l.json=="function")l.json().then(h=>{const x=(h==null?void 0:h.statusCode)||(h==null?void 0:h.code)||a+"";e(new Ju(I0(h),a,x))}).catch(()=>{const h=a+"",x=l.statusText||`HTTP ${a} error`;e(new Ju(x,a,h))});else{const h=a+"",x=l.statusText||`HTTP ${a} error`;e(new Ju(x,a,h))}}else e(new vE(I0(t),t))}),CE=(t,e,r,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return s?(EE(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),r)):a};function bE(t,e,r,s,a,l){return we(this,void 0,void 0,function*(){return new Promise((h,x)=>{t(r,CE(e,s,a,l)).then(p=>{if(!p.ok)throw p;if(s!=null&&s.noResolveJson)return p;const g=p.headers.get("content-type");return!g||!g.includes("application/json")?{}:p.json()}).then(p=>h(p)).catch(p=>_E(p,x,s))})})}function Rr(t,e,r,s,a){return we(this,void 0,void 0,function*(){return bE(t,"POST",e,s,a,r)})}class AE{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ih),r),this.fetch=Nh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return we(this,void 0,void 0,function*(){try{return{data:(yield Rr(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}getIndex(e,r){return we(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Tr(s))return{data:null,error:s};throw s}})}listIndexes(e){return we(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return we(this,void 0,void 0,function*(){try{return{data:(yield Rr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Tr(s))return{data:null,error:s};throw s}})}}class SE{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ih),r),this.fetch=Nh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return we(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Rr(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}getVectors(e){return we(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}listVectors(e){return we(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Rr(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}queryVectors(e){return we(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}deleteVectors(e){return we(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Rr(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}}class IE{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ih),r),this.fetch=Nh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return we(this,void 0,void 0,function*(){try{return{data:(yield Rr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}getBucket(e){return we(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}listBuckets(){return we(this,arguments,void 0,function*(e={}){try{return{data:yield Rr(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return we(this,void 0,void 0,function*(){try{return{data:(yield Rr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}}class NE extends IE{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new TE(this.url,this.headers,e,this.fetch)}}class TE extends AE{constructor(e,r,s,a){super(e,r,a),this.vectorBucketName=s}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return we(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return we(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return we(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return we(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new RE(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class RE extends SE{constructor(e,r,s,a,l){super(e,r,l),this.vectorBucketName=s,this.indexName=a}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return we(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return we(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return we(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return we(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return we(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class OE extends wE{constructor(e,r={},s,a){super(e,r,s,a)}from(e){return new xE(this.url,this.headers,e,this.fetch)}get vectors(){return new NE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new yE(this.url+"/iceberg",this.headers,this.fetch)}}const kE="2.81.1";let wo="";typeof Deno<"u"?wo="deno":typeof document<"u"?wo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wo="react-native":wo="node";const PE={"X-Client-Info":`supabase-js-${wo}/${kE}`},DE={headers:PE},ME={schema:"public"},LE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},BE={},jE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),FE=()=>Headers,UE=(t,e,r)=>{const s=jE(r),a=FE();return async(l,h)=>{var x;const p=(x=await e())!==null&&x!==void 0?x:t;let g=new a(h==null?void 0:h.headers);return g.has("apikey")||g.set("apikey",t),g.has("Authorization")||g.set("Authorization",`Bearer ${p}`),s(l,Object.assign(Object.assign({},h),{headers:g}))}};function zE(t){return t.endsWith("/")?t:t+"/"}function VE(t,e){var r,s;const{db:a,auth:l,realtime:h,global:x}=t,{db:p,auth:g,realtime:y,global:v}=e,b={db:Object.assign(Object.assign({},p),a),auth:Object.assign(Object.assign({},g),l),realtime:Object.assign(Object.assign({},y),h),storage:{},global:Object.assign(Object.assign(Object.assign({},v),x),{headers:Object.assign(Object.assign({},(r=v==null?void 0:v.headers)!==null&&r!==void 0?r:{}),(s=x==null?void 0:x.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?b.accessToken=t.accessToken:delete b.accessToken,b}function WE(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(zE(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const bm="2.81.1",cs=30*1e3,fd=3,ec=fd*cs,HE="http://localhost:9999",GE="supabase.auth.token",$E={"X-Client-Info":`gotrue-js/${bm}`},gd="X-Supabase-Api-Version",Am={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},XE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,KE=10*60*1e3;class Zo extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function Ce(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class qE extends Zo{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function YE(t){return Ce(t)&&t.name==="AuthApiError"}class ki extends Zo{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class wi extends Zo{constructor(e,r,s,a){super(e,s,a),this.name=r,this.status=s}}class Qr extends wi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ZE(t){return Ce(t)&&t.name==="AuthSessionMissingError"}class is extends wi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ua extends wi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class za extends wi{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function QE(t){return Ce(t)&&t.name==="AuthImplicitGrantRedirectError"}class N0 extends wi{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pd extends wi{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function tc(t){return Ce(t)&&t.name==="AuthRetryableFetchError"}class T0 extends wi{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class md extends wi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Rl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),R0=` 	
\r=`.split(""),JE=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<R0.length;e+=1)t[R0[e].charCodeAt(0)]=-2;for(let e=0;e<Rl.length;e+=1)t[Rl[e].charCodeAt(0)]=e;return t})();function O0(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Rl[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Rl[s]),e.queuedBits-=6}}function Sm(t,e,r){const s=JE[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function k0(t){const e=[],r=h=>{e.push(String.fromCodePoint(h))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=h=>{r3(h,s,r)};for(let h=0;h<t.length;h+=1)Sm(t.charCodeAt(h),a,l);return e.join("")}function e3(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function t3(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}e3(s,e)}}function r3(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Os(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)Sm(t.charCodeAt(a),r,s);return new Uint8Array(e)}function n3(t){const e=[];return t3(t,r=>e.push(r)),new Uint8Array(e)}function Li(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>O0(a,r,s)),O0(null,r,s),e.join("")}function i3(t){return Math.round(Date.now()/1e3)+t}function s3(){return Symbol("auth-callback")}const Qt=()=>typeof window<"u"&&typeof document<"u",Ai={tested:!1,writable:!1},Im=()=>{if(!Qt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ai.tested)return Ai.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ai.tested=!0,Ai.writable=!0}catch{Ai.tested=!0,Ai.writable=!1}return Ai.writable};function o3(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return r.searchParams.forEach((s,a)=>{e[a]=s}),e}const Nm=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),a3=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ds=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Si=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Gn=async(t,e)=>{await t.removeItem(e)};class nu{constructor(){this.promise=new nu.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}nu.promiseConstructor=Promise;function rc(t){const e=t.split(".");if(e.length!==3)throw new md("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!XE.test(e[s]))throw new md("JWT not in base64url format");return{header:JSON.parse(k0(e[0])),payload:JSON.parse(k0(e[1])),signature:Os(e[2]),raw:{header:e[0],payload:e[1]}}}async function l3(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function u3(t,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const h=await t(l);if(!e(l,null,h)){s(h);return}}catch(h){if(!e(l,h)){a(h);return}}})()})}function c3(t){return("0"+t.toString(16)).substr(-2)}function d3(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let l=0;l<56;l++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,c3).join("")}async function h3(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function f3(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await h3(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ss(t,e,r=!1){const s=d3();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await ds(t,`${e}-code-verifier`,a);const l=await f3(s);return[l,s===l?"plain":"s256"]}const g3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function p3(t){const e=t.headers.get(gd);if(!e||!e.match(g3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function m3(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function x3(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const w3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function os(t){if(!w3.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function nc(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function y3(t,e){return new Proxy(t,{get:(r,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,s,a)}})}function P0(t){return JSON.parse(JSON.stringify(t))}const Ti=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),v3=[502,503,504];async function D0(t){var e;if(!a3(t))throw new pd(Ti(t),0);if(v3.includes(t.status))throw new pd(Ti(t),t.status);let r;try{r=await t.json()}catch(l){throw new ki(Ti(l),l)}let s;const a=p3(t);if(a&&a.getTime()>=Am["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new T0(Ti(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Qr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,h)=>l&&typeof h=="string",!0))throw new T0(Ti(r),t.status,r.weak_password.reasons);throw new qE(Ti(r),t.status||500,s)}const E3=(t,e,r,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function Re(t,e,r,s){var a;const l=Object.assign({},s==null?void 0:s.headers);l[gd]||(l[gd]=Am["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const h=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(h.redirect_to=s.redirectTo);const x=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",p=await _3(t,e,r+x,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(p):{data:Object.assign({},p),error:null}}async function _3(t,e,r,s,a,l){const h=E3(e,s,a,l);let x;try{x=await t(r,Object.assign({},h))}catch(p){throw console.error(p),new pd(Ti(p),0)}if(x.ok||await D0(x),s!=null&&s.noResolveJson)return x;try{return await x.json()}catch(p){await D0(p)}}function Jr(t){var e;let r=null;A3(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=i3(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function M0(t){const e=Jr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Qn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function C3(t){return{data:t,error:null}}function b3(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:l}=t,h=$s(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),x={action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:l},p=Object.assign({},h);return{data:{properties:x,user:p},error:null}}function L0(t){return t}function A3(t){return t.access_token&&t.refresh_token&&t.expires_in}const ic=["global","local","others"];class S3{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=Nm(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=ic[0]){if(ic.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ic.join(", ")}`);try{return await Re(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await Re(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Qn})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=$s(e,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:b3,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ce(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Re(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Qn})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,a,l,h,x,p;try{const g={nextPage:null,lastPage:0,total:0},y=await Re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:L0});if(y.error)throw y.error;const v=await y.json(),b=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,N=(p=(x=y.headers.get("link"))===null||x===void 0?void 0:x.split(","))!==null&&p!==void 0?p:[];return N.length>0&&(N.forEach(O=>{const L=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(O.split(";")[1].split("=")[1]);g[`${j}Page`]=L}),g.total=parseInt(b)),{data:Object.assign(Object.assign({},v),g),error:null}}catch(g){if(Ce(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){os(e);try{return await Re(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Qn})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){os(e);try{return await Re(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Qn})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){os(e);try{return await Re(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Qn})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){os(e.userId);try{const{data:r,error:s}=await Re(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _deleteFactor(e){os(e.userId),os(e.id);try{return{data:await Re(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,s,a,l,h,x,p;try{const g={nextPage:null,lastPage:0,total:0},y=await Re(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:L0});if(y.error)throw y.error;const v=await y.json(),b=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,N=(p=(x=y.headers.get("link"))===null||x===void 0?void 0:x.split(","))!==null&&p!==void 0?p:[];return N.length>0&&(N.forEach(O=>{const L=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(O.split(";")[1].split("=")[1]);g[`${j}Page`]=L}),g.total=parseInt(b)),{data:Object.assign(Object.assign({},v),g),error:null}}catch(g){if(Ce(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(e){try{return await Re(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await Re(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await Re(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await Re(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await Re(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}}function B0(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const as={debug:!!(globalThis&&Im()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Tm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class I3 extends Tm{}async function N3(t,e,r){as.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),as.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){as.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{as.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw as.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new I3(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(as.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function T3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Rm(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function R3(t){return parseInt(t,16)}function O3(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function k3(t){var e;const{chainId:r,domain:s,expirationTime:a,issuedAt:l=new Date,nonce:h,notBefore:x,requestId:p,resources:g,scheme:y,uri:v,version:b}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const N=Rm(t.address),O=y?`${y}://${s}`:s,L=t.statement?`${t.statement}
`:"",j=`${O} wants you to sign in with your Ethereum account:
${N}

${L}`;let k=`URI: ${v}
Version: ${b}
Chain ID: ${r}${h?`
Nonce: ${h}`:""}
Issued At: ${l.toISOString()}`;if(a&&(k+=`
Expiration Time: ${a.toISOString()}`),x&&(k+=`
Not Before: ${x.toISOString()}`),p&&(k+=`
Request ID: ${p}`),g){let R=`
Resources:`;for(const I of g){if(!I||typeof I!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${I}`);R+=`
- ${I}`}k+=R}return`${j}
${k}`}class kt extends Error{constructor({message:e,code:r,cause:s,name:a}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=a??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=r}}class Ol extends kt{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function P3({error:t,options:e}){var r,s,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new kt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=l.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new kt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new kt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new kt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new kt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new kt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(x=>x.type==="public-key").length===0?new kt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new kt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const h=window.location.hostname;if(Om(h)){if(l.rp.id!==h)return new kt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new kt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new kt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new kt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new kt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function D3({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new kt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new kt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(Om(s)){if(r.rpId!==s)return new kt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new kt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new kt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new kt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class M3{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const L3=new M3;function B3(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:s}=t,a=$s(t,["challenge","user","excludeCredentials"]),l=Os(e).buffer,h=Object.assign(Object.assign({},r),{id:Os(r.id).buffer}),x=Object.assign(Object.assign({},a),{challenge:l,user:h});if(s&&s.length>0){x.excludeCredentials=new Array(s.length);for(let p=0;p<s.length;p++){const g=s[p];x.excludeCredentials[p]=Object.assign(Object.assign({},g),{id:Os(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return x}function j3(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,s=$s(t,["challenge","allowCredentials"]),a=Os(e).buffer,l=Object.assign(Object.assign({},s),{challenge:a});if(r&&r.length>0){l.allowCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const x=r[h];l.allowCredentials[h]=Object.assign(Object.assign({},x),{id:Os(x.id).buffer,type:x.type||"public-key",transports:x.transports})}}return l}function F3(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Li(new Uint8Array(t.response.attestationObject)),clientDataJSON:Li(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function U3(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,s=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Li(new Uint8Array(a.authenticatorData)),clientDataJSON:Li(new Uint8Array(a.clientDataJSON)),signature:Li(new Uint8Array(a.signature)),userHandle:a.userHandle?Li(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Om(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function j0(){var t,e;return!!(Qt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function z3(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ol("Browser returned unexpected credential type",e)}:{data:null,error:new Ol("Empty credential response",e)}}catch(e){return{data:null,error:P3({error:e,options:t})}}}async function V3(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ol("Browser returned unexpected credential type",e)}:{data:null,error:new Ol("Empty credential response",e)}}catch(e){return{data:null,error:D3({error:e,options:t})}}}const W3={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},H3={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function kl(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of t)if(a)for(const l in a){const h=a[l];if(h!==void 0)if(Array.isArray(h))s[l]=h;else if(r(h))s[l]=h;else if(e(h)){const x=s[l];e(x)?s[l]=kl(x,h):s[l]=kl(h)}else s[l]=h}return s}function G3(t,e){return kl(W3,t,e||{})}function $3(t,e){return kl(H3,t,e||{})}class X3{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:s,signal:a},l){try{const{data:h,error:x}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!h)return{data:null,error:x};const p=a??L3.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:g}=h.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${s}`),g.displayName||(g.displayName=g.name)}switch(h.webauthn.type){case"create":{const g=G3(h.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:y,error:v}=await z3({publicKey:g,signal:p});return y?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}case"request":{const g=$3(h.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:y,error:v}=await V3(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:g,signal:p}));return y?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}}}catch(h){return Ce(h)?{data:null,error:h}:{data:null,error:new ki("Unexpected error in challenge",h)}}}async _verify({challengeId:e,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!r)return{data:null,error:new Zo("rpId is required for WebAuthn authentication")};try{if(!j0())return{data:null,error:new ki("Browser does not support WebAuthn",null)};const{data:h,error:x}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:s},signal:a},{request:l});if(!h)return{data:null,error:x};const{webauthn:p}=h;return this._verify({factorId:e,challengeId:h.challengeId,webauthn:{type:p.type,rpId:r,rpOrigins:s,credential_response:p.credential_response}})}catch(h){return Ce(h)?{data:null,error:h}:{data:null,error:new ki("Unexpected error in authenticate",h)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!r)return{data:null,error:new Zo("rpId is required for WebAuthn registration")};try{if(!j0())return{data:null,error:new ki("Browser does not support WebAuthn",null)};const{data:h,error:x}=await this._enroll({friendlyName:e});if(!h)return await this.client.mfa.listFactors().then(y=>{var v;return(v=y.data)===null||v===void 0?void 0:v.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===e&&b.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:x};const{data:p,error:g}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:a},{create:l});return p?this._verify({factorId:h.id,challengeId:p.challengeId,webauthn:{rpId:r,rpOrigins:s,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:g}}catch(h){return Ce(h)?{data:null,error:h}:{data:null,error:new ki("Unexpected error in register",h)}}}}T3();const K3={url:HE,storageKey:GE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$E,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function F0(t,e,r){return await r()}const ls={};class Qo{get jwks(){var e,r;return(r=(e=ls[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){ls[this.storageKey]=Object.assign(Object.assign({},ls[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=ls[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ls[this.storageKey]=Object.assign(Object.assign({},ls[this.storageKey]),{cachedAt:e})}constructor(e){var r,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},K3),e);if(this.storageKey=l.storageKey,this.instanceID=(r=Qo.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Qo.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Qt()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new S3({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Nm(l.fetch),this.lock=l.lock||F0,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:Qt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=N3:this.lock=F0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new X3(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Im()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=B0(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=B0(this.memoryStorage)),Qt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${bm}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},s="none";if(Qt()&&(r=o3(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),Qt()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(r,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),QE(l)){const p=(e=l.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:h,redirectType:x}=a;return this._debug("#_initialize()","detected session in URL",h,"redirect type",x),await this._saveSession(h),setTimeout(async()=>{x==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ce(r)?this._returnResult({error:r}):this._returnResult({error:new ki("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,a;try{const l=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Jr}),{data:h,error:x}=l;if(x||!h)return this._returnResult({data:{user:null,session:null},error:x});const p=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(l){if(Ce(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var r,s,a;try{let l;if("email"in e){const{email:y,password:v,options:b}=e;let N=null,O=null;this.flowType==="pkce"&&([N,O]=await ss(this.storage,this.storageKey)),l=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:y,password:v,data:(r=b==null?void 0:b.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:N,code_challenge_method:O},xform:Jr})}else if("phone"in e){const{phone:y,password:v,options:b}=e;l=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:v,data:(s=b==null?void 0:b.data)!==null&&s!==void 0?s:{},channel:(a=b==null?void 0:b.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:Jr})}else throw new Ua("You must provide either an email or phone number and a password");const{data:h,error:x}=l;if(x||!h)return this._returnResult({data:{user:null,session:null},error:x});const p=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(l){if(Ce(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let r;if("email"in e){const{email:l,password:h,options:x}=e;r=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:h,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:M0})}else if("phone"in e){const{phone:l,password:h,options:x}=e;r=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:h,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:M0})}else throw new Ua("You must provide either an email or phone number and a password");const{data:s,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const l=new is;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,s,a,l,h,x,p,g,y,v,b;let N,O;if("message"in e)N=e.message,O=e.signature;else{const{chain:L,wallet:j,statement:k,options:R}=e;let I;if(Qt())if(typeof j=="object")I=j;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")I=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=j}const B=new URL((r=R==null?void 0:R.url)!==null&&r!==void 0?r:window.location.href),W=await I.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!W||W.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=Rm(W[0]);let U=(s=R==null?void 0:R.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!U){const C=await I.request({method:"eth_chainId"});U=R3(C)}const D={domain:B.host,address:$,statement:k,uri:B.href,version:"1",chainId:U,nonce:(a=R==null?void 0:R.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(h=(l=R==null?void 0:R.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(x=R==null?void 0:R.signInWithEthereum)===null||x===void 0?void 0:x.expirationTime,notBefore:(p=R==null?void 0:R.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(g=R==null?void 0:R.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(y=R==null?void 0:R.signInWithEthereum)===null||y===void 0?void 0:y.resources};N=k3(D),O=await I.request({method:"personal_sign",params:[O3(N),$]})}try{const{data:L,error:j}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:N,signature:O},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Jr});if(j)throw j;if(!L||!L.session||!L.user){const k=new is;return this._returnResult({data:{user:null,session:null},error:k})}return L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),this._returnResult({data:Object.assign({},L),error:j})}catch(L){if(Ce(L))return this._returnResult({data:{user:null,session:null},error:L});throw L}}async signInWithSolana(e){var r,s,a,l,h,x,p,g,y,v,b,N;let O,L;if("message"in e)O=e.message,L=e.signature;else{const{chain:j,wallet:k,statement:R,options:I}=e;let B;if(Qt())if(typeof k=="object")B=k;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))B=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(I!=null&&I.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=k}const W=new URL((r=I==null?void 0:I.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in B&&B.signIn){const $=await B.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I==null?void 0:I.signInWithSolana),{version:"1",domain:W.host,uri:W.href}),R?{statement:R}:null));let U;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")U=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)U=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)O=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),L=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in B)||typeof B.signMessage!="function"||!("publicKey"in B)||typeof B!="object"||!B.publicKey||!("toBase58"in B.publicKey)||typeof B.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");O=[`${W.host} wants you to sign in with your Solana account:`,B.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${W.href}`,`Issued At: ${(a=(s=I==null?void 0:I.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=I==null?void 0:I.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((h=I==null?void 0:I.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((x=I==null?void 0:I.signInWithSolana)===null||x===void 0)&&x.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((p=I==null?void 0:I.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((g=I==null?void 0:I.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((v=(y=I==null?void 0:I.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||v===void 0)&&v.length?["Resources",...I.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const $=await B.signMessage(new TextEncoder().encode(O),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");L=$}}try{const{data:j,error:k}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:O,signature:Li(L)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(N=e.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:Jr});if(k)throw k;if(!j||!j.session||!j.user){const R=new is;return this._returnResult({data:{user:null,session:null},error:R})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:k})}catch(j){if(Ce(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async _exchangeCodeForSession(e){const r=await Si(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{const{data:l,error:h}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Jr});if(await Gn(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!l||!l.session||!l.user){const x=new is;return this._returnResult({data:{user:null,session:null,redirectType:null},error:x})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:h})}catch(l){if(Ce(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:r,provider:s,token:a,access_token:l,nonce:h}=e,x=await Re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:h,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Jr}),{data:p,error:g}=x;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p||!p.session||!p.user){const y=new is;return this._returnResult({data:{user:null,session:null},error:y})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:g})}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,s,a,l,h;try{if("email"in e){const{email:x,options:p}=e;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await ss(this.storage,this.storageKey));const{error:v}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:x,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},create_user:(s=p==null?void 0:p.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:g,code_challenge_method:y},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in e){const{phone:x,options:p}=e,{data:g,error:y}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:x,data:(a=p==null?void 0:p.data)!==null&&a!==void 0?a:{},create_user:(l=p==null?void 0:p.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(h=p==null?void 0:p.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:y})}throw new Ua("You must provide either an email or phone number.")}catch(x){if(Ce(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async verifyOtp(e){var r,s;try{let a,l;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:h,error:x}=await Re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:Jr});if(x)throw x;if(!h)throw new Error("An error occurred on token verification.");const p=h.session,g=h.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(a){if(Ce(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var r,s,a,l,h;try{let x=null,p=null;this.flowType==="pkce"&&([x,p]=await ss(this.storage,this.storageKey));const g=await Re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:x,code_challenge_method:p}),headers:this.headers,xform:C3});return!((l=g.data)===null||l===void 0)&&l.url&&Qt()&&!(!((h=e.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(x){if(Ce(x))return this._returnResult({data:null,error:x});throw x}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new Qr;const{error:a}=await Re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(Ce(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:h}=await Re(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:h,error:x}=await Re(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:x})}throw new Ua("You must provide either an email or phone number and a type")}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Si(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<ec:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const h=await Si(this.userStorage,this.storageKey+"-user");h!=null&&h.user?e.user=h.user:e.user=nc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};e.user=y3(e.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Qn}):await this._useSession(async r=>{var s,a,l;const{data:h,error:x}=r;if(x)throw x;return!(!((s=h.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qr}:await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=h.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:Qn})})}catch(r){if(Ce(r))return ZE(r)&&(await this._removeSession(),await Gn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new Qr;const h=a.session;let x=null,p=null;this.flowType==="pkce"&&e.email!=null&&([x,p]=await ss(this.storage,this.storageKey));const{data:g,error:y}=await Re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:x,code_challenge_method:p}),jwt:h.access_token,xform:Qn});if(y)throw y;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(s){if(Ce(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Qr;const r=Date.now()/1e3;let s=r,a=!0,l=null;const{payload:h}=rc(e.access_token);if(h.exp&&(s=h.exp,a=s<=r),a){const{data:x,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!x)return{data:{user:null,session:null},error:null};l=x}else{const{data:x,error:p}=await this._getUser(e.access_token);if(p)throw p;l={access_token:e.access_token,refresh_token:e.refresh_token,user:x.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(r){if(Ce(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:h,error:x}=r;if(x)throw x;e=(s=h.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Qr;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Qt())throw new za("No browser detected.");if(e.error||e.error_description||e.error_code)throw new za(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new N0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new za("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new N0("No code detected.");const{data:R,error:I}=await this._exchangeCodeForSession(e.code);if(I)throw I;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:h,expires_in:x,expires_at:p,token_type:g}=e;if(!l||!x||!h||!g)throw new za("No session defined in URL");const y=Math.round(Date.now()/1e3),v=parseInt(x);let b=y+v;p&&(b=parseInt(p));const N=b-y;N*1e3<=cs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${N}s, should have been closer to ${v}s`);const O=b-v;y-O>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",O,b,y):y-O<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",O,b,y);const{data:L,error:j}=await this._getUser(l);if(j)throw j;const k={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:v,expires_at:b,refresh_token:h,token_type:g,user:L.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:k,redirectType:e.type},error:null})}catch(s){if(Ce(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Si(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:l}=r;if(l)return this._returnResult({error:l});const h=(s=a.session)===null||s===void 0?void 0:s.access_token;if(h){const{error:x}=await this.admin.signOut(h,e);if(x&&!(YE(x)&&(x.status===404||x.status===401||x.status===403)))return this._returnResult({error:x})}return e!=="others"&&(await this._removeSession(),await Gn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=s3(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,a;try{const{data:{session:l},error:h}=r;if(h)throw h;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await ss(this.storage,this.storageKey,!0));try{return await Re(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(Ce(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:s,error:a}=await this._useSession(async l=>{var h,x,p,g,y;const{data:v,error:b}=l;if(b)throw b;const N=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(h=e.options)===null||h===void 0?void 0:h.redirectTo,scopes:(x=e.options)===null||x===void 0?void 0:x.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await Re(this.fetch,"GET",N,{headers:this.headers,jwt:(y=(g=v.session)===null||g===void 0?void 0:g.access_token)!==null&&y!==void 0?y:void 0})});if(a)throw a;return Qt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(Ce(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var s;try{const{error:a,data:{session:l}}=r;if(a)throw a;const{options:h,provider:x,token:p,access_token:g,nonce:y}=e,v=await Re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:x,id_token:p,access_token:g,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Jr}),{data:b,error:N}=v;return N?this._returnResult({data:{user:null,session:null},error:N}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new is}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:N}))}catch(a){if(Ce(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,a;const{data:l,error:h}=r;if(h)throw h;return await Re(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await u3(async a=>(a>0&&await l3(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Jr})),(a,l)=>{const h=200*Math.pow(2,a);return l&&tc(l)&&Date.now()+h-s<cs})}catch(s){if(this._debug(r,"error",s),Ce(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),Qt()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Si(this.storage,this.storageKey);if(a&&this.userStorage){let h=await Si(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:a.user},await ds(this.userStorage,this.storageKey+"-user",h)),a.user=(e=h==null?void 0:h.user)!==null&&e!==void 0?e:nc()}else if(a&&!a.user&&!a.user){const h=await Si(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(a.user=h.user,await Gn(this.storage,this.storageKey+"-user"),await ds(this.storage,this.storageKey,a)):a.user=nc()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<ec;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${ec}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:h}=await this._callRefreshToken(a.refresh_token);h&&(console.error(h),tc(h)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:x}=await this._getUser(a.access_token);!x&&(h!=null&&h.user)?(a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(s,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new Qr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new nu;const{data:l,error:h}=await this._refreshAccessToken(e);if(h)throw h;if(!l.session)throw new Qr;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const x={data:l.session,error:null};return this.refreshingDeferred.resolve(x),x}catch(l){if(this._debug(a,"error",l),Ce(l)){const h={data:null,error:l};return tc(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(h),h}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const l=[],h=Array.from(this.stateChangeEmitters.values()).map(async x=>{try{await x.callback(e,r)}catch(p){l.push(p)}});if(await Promise.all(h),l.length>0){for(let x=0;x<l.length;x+=1)console.error(l[x]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await ds(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const l=P0(a);await ds(this.storage,this.storageKey,l)}else{const a=P0(r);await ds(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Gn(this.storage,this.storageKey),await Gn(this.storage,this.storageKey+"-code-verifier"),await Gn(this.storage,this.storageKey+"-user"),this.userStorage&&await Gn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),cs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/cs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${cs}ms, refresh threshold is ${fd} ticks`),a<=fd&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Tm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,h]=await ss(this.storage,this.storageKey),x=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(h)}`});a.push(x.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:a,error:l}=r;return l?this._returnResult({data:null,error:l}):await Re(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,a;const{data:l,error:h}=r;if(h)return this._returnResult({data:null,error:h});const x=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:p,error:g}=await Re(this.fetch,"POST",`${this.url}/factors`,{body:x,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(e.factorType==="totp"&&p.type==="totp"&&(!((a=p==null?void 0:p.totp)===null||a===void 0)&&a.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:l}=r;if(l)return this._returnResult({data:null,error:l});const h=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?F3(e.webauthn.credential_response):U3(e.webauthn.credential_response)})}:{code:e.code}),{data:x,error:p}=await Re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:h,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+x.expires_in},x)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",x),this._returnResult({data:x,error:p}))})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:l}=r;if(l)return this._returnResult({data:null,error:l});const h=await Re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(h.error)return h;const{data:x}=h;if(x.type!=="webauthn")return{data:x,error:null};switch(x.webauthn.type){case"create":return{data:Object.assign(Object.assign({},x),{webauthn:Object.assign(Object.assign({},x.webauthn),{credential_options:Object.assign(Object.assign({},x.webauthn.credential_options),{publicKey:B3(x.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},x),{webauthn:Object.assign(Object.assign({},x.webauthn),{credential_options:Object.assign(Object.assign({},x.webauthn.credential_options),{publicKey:j3(x.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=rc(s.access_token);let h=null;l.aal&&(h=l.aal);let x=h;((r=(e=s.user.factors)===null||e===void 0?void 0:e.filter(y=>y.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(x="aal2");const g=l.amr||[];return{data:{currentLevel:h,nextLevel:x,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?await Re(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Qr})})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Qr});const h=await Re(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:x=>({data:x,error:null})});return h.data&&h.data.redirect_url&&Qt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(s){if(Ce(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Qr});const h=await Re(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:x=>({data:x,error:null})});return h.data&&h.data.redirect_url&&Qt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(s){if(Ce(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(x=>x.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(x=>x.kid===e),s&&this.jwks_cached_at+KE>a)return s;const{data:l,error:h}=await Re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,s=l.keys.find(x=>x.kid===e),!s)?null:s}async getClaims(e,r={}){try{let s=e;if(!s){const{data:N,error:O}=await this.getSession();if(O||!N.session)return this._returnResult({data:null,error:O});s=N.session.access_token}const{header:a,payload:l,signature:h,raw:{header:x,payload:p}}=rc(s);r!=null&&r.allowExpired||m3(l.exp);const g=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!g){const{error:N}=await this.getUser(s);if(N)throw N;return{data:{claims:l,header:a,signature:h},error:null}}const y=x3(a.alg),v=await crypto.subtle.importKey("jwk",g,y,!0,["verify"]);if(!await crypto.subtle.verify(y,v,h,n3(`${x}.${p}`)))throw new md("Invalid JWT signature");return{data:{claims:l,header:a,signature:h},error:null}}catch(s){if(Ce(s))return this._returnResult({data:null,error:s});throw s}}}Qo.nextInstanceID={};const q3=Qo;class Y3 extends q3{constructor(e){super(e)}}class Z3{constructor(e,r,s){var a,l,h;this.supabaseUrl=e,this.supabaseKey=r;const x=WE(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",x),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",x),this.storageUrl=new URL("storage/v1",x),this.functionsUrl=new URL("functions/v1",x);const p=`sb-${x.hostname.split(".")[0]}-auth-token`,g={db:ME,realtime:BE,auth:Object.assign(Object.assign({},LE),{storageKey:p}),global:DE},y=VE(s??{},g);this.storageKey=(a=y.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=y.global.headers)!==null&&l!==void 0?l:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(v,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=y.auth)!==null&&h!==void 0?h:{},this.headers,y.global.fetch),this.fetch=UE(r,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new Hv(new URL("rest/v1",x).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new OE(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new zv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:l,storageKey:h,flowType:x,lock:p,debug:g,throwOnError:y},v,b){const N={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Y3({url:this.authUrl.href,headers:Object.assign(Object.assign({},N),v),storageKey:h,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:l,flowType:x,lock:p,debug:g,throwOnError:y,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(O=>O.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new aE(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Q3=(t,e,r)=>new Z3(t,e,r);function J3(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}J3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const e_="https://hricrwfhshdmchbpfpqh.supabase.co",t_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhyaWNyd2Zoc2hkbWNoYnBmcHFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwMzkzMzcsImV4cCI6MjA3ODYxNTMzN30.kCdMMdoXayK3HwoGPMHkj1qLUWTu-21U5n2vVpPnAfo",rt=Q3(e_,t_);function r_(){const t=Gs(),[e,r]=X.useState(!1),[s,a]=X.useState(!1),[l,h]=X.useState(null),[x,p]=X.useState(null),[g,y]=X.useState({nome:"",data:"",hora:"",local:"",imagem_url:""}),v=j=>{y({...g,[j.target.name]:j.target.value})},b=j=>{const k=j.target.files[0];if(!k)return;if(!k.type.startsWith("image/")){ve.error("Por favor, selecione um ficheiro de imagem vlido");return}if(k.size>5*1024*1024){ve.error("A imagem deve ter no mximo 5MB");return}p(k);const R=new FileReader;R.onloadend=()=>{h(R.result)},R.readAsDataURL(k)},N=()=>{p(null),h(null),y({...g,imagem_url:""})},O=async j=>{if(!x)return null;a(!0);try{const k=x.name.split(".").pop(),I=`${`${j}-${Date.now()}.${k}`}`,{error:B}=await rt.storage.from("event-images").upload(I,x,{cacheControl:"3600",upsert:!1});if(B)throw B;const{data:{publicUrl:W}}=rt.storage.from("event-images").getPublicUrl(I);return W}catch(k){return console.error("Erro ao fazer upload da imagem:",k),ve.error("Erro ao fazer upload da imagem"),null}finally{a(!1)}},L=async j=>{if(j.preventDefault(),!g.nome||!g.data||!g.hora||!g.local){ve.error("Por favor, preencha todos os campos obrigatrios");return}r(!0);try{const{data:k,error:R}=await rt.from("eventos").insert([{nome:g.nome,data:g.data,hora:g.hora,local:g.local,imagem_url:null}]).select().single();if(R)throw R;if(x){const I=await O(k.id);if(I){const{error:B}=await rt.from("eventos").update({imagem_url:I}).eq("id",k.id);B&&(console.error("Erro ao atualizar URL da imagem:",B),ve.error("Evento criado, mas falhou o upload da imagem"))}}localStorage.setItem("currentEventId",k.id),ve.success("Evento criado com sucesso!"),t("/upload")}catch(k){console.error("Erro ao criar evento:",k),ve.error("Erro ao criar evento: "+k.message)}finally{r(!1)}};return _.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[_.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[_.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Criar Novo Evento"}),_.jsxs("form",{onSubmit:L,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagem do Evento (opcional)"}),l?_.jsxs("div",{className:"relative",children:[_.jsx("img",{src:l,alt:"Preview",className:"w-full h-64 object-cover rounded-lg"}),_.jsx("button",{type:"button",onClick:N,className:"absolute top-2 right-2 bg-red-600 text-white p-2 rounded-full hover:bg-red-700 shadow-lg transition",children:_.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):_.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition",children:[_.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:b,className:"hidden"}),_.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer flex flex-col items-center",children:[_.jsx("svg",{className:"w-12 h-12 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),_.jsx("span",{className:"text-sm text-gray-600",children:"Clique para escolher uma imagem"}),_.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF at 5MB"})]})]})]}),_.jsxs("div",{children:[_.jsxs("label",{htmlFor:"nome",className:"block text-sm font-medium text-gray-700 mb-1",children:["Nome do Evento ",_.jsx("span",{className:"text-red-500",children:"*"})]}),_.jsx("input",{type:"text",id:"nome",name:"nome",value:g.nome,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Casamento Joo e Maria",required:!0})]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsxs("label",{htmlFor:"data",className:"block text-sm font-medium text-gray-700 mb-1",children:["Data ",_.jsx("span",{className:"text-red-500",children:"*"})]}),_.jsx("input",{type:"date",id:"data",name:"data",value:g.data,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),_.jsxs("div",{children:[_.jsxs("label",{htmlFor:"hora",className:"block text-sm font-medium text-gray-700 mb-1",children:["Hora ",_.jsx("span",{className:"text-red-500",children:"*"})]}),_.jsx("input",{type:"time",id:"hora",name:"hora",value:g.hora,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),_.jsxs("div",{children:[_.jsxs("label",{htmlFor:"local",className:"block text-sm font-medium text-gray-700 mb-1",children:["Local ",_.jsx("span",{className:"text-red-500",children:"*"})]}),_.jsx("input",{type:"text",id:"local",name:"local",value:g.local,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Quinta do Palcio, Lisboa",required:!0})]}),_.jsx("button",{type:"submit",disabled:e||s,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition",children:e||s?_.jsxs("span",{className:"flex items-center justify-center gap-2",children:[_.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),s?"A fazer upload da imagem...":"A criar evento..."]}):"Criar Evento"})]})]}),_.jsx("div",{className:"mt-6 bg-blue-50 border-l-4 border-blue-400 p-4",children:_.jsxs("div",{className:"flex",children:[_.jsx("div",{className:"flex-shrink-0",children:_.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:_.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),_.jsxs("div",{className:"ml-3",children:[_.jsx("p",{className:"text-sm text-blue-700",children:"Aps criar o evento, ser redirecionado para fazer upload da lista de convidados."}),_.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"A imagem do evento aparecer no convite enviado aos convidados."})]})]})})]})}var km={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((r,s)=>{t.exports=s()})(us,function r(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},a,l=!s.document&&!!s.postMessage,h=s.IS_PAPA_WORKER||!1,x={},p=0,g={};function y(D){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(C){var F=W(C);F.chunkSize=parseInt(F.chunkSize),C.step||C.chunk||(F.chunkSize=null),this._handle=new L(F),(this._handle.streamer=this)._config=F}).call(this,D),this.parseChunk=function(C,F){var Y=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<Y){let se=this._config.newline;se||(K=this._config.quoteChar||'"',se=this._handle.guessLineEndings(C,K)),C=[...C.split(se).slice(Y)].join(se)}this.isFirstChunk&&U(this._config.beforeFirstChunk)&&(K=this._config.beforeFirstChunk(C))!==void 0&&(C=K),this.isFirstChunk=!1,this._halted=!1;var Y=this._partialLine+C,K=(this._partialLine="",this._handle.parse(Y,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(C=K.meta.cursor,Y=(this._finished||(this._partialLine=Y.substring(C-this._baseIndex),this._baseIndex=C),K&&K.data&&(this._rowCount+=K.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),h)s.postMessage({results:K,workerId:g.WORKER_ID,finished:Y});else if(U(this._config.chunk)&&!F){if(this._config.chunk(K,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=K=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(K.data),this._completeResults.errors=this._completeResults.errors.concat(K.errors),this._completeResults.meta=K.meta),this._completed||!Y||!U(this._config.complete)||K&&K.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Y||K&&K.meta.paused||this._nextChunk(),K}this._halted=!0},this._sendError=function(C){U(this._config.error)?this._config.error(C):h&&this._config.error&&s.postMessage({workerId:g.WORKER_ID,error:C,finished:!1})}}function v(D){var C;(D=D||{}).chunkSize||(D.chunkSize=g.RemoteChunkSize),y.call(this,D),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(F){this._input=F,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(C=new XMLHttpRequest,this._config.withCredentials&&(C.withCredentials=this._config.withCredentials),l||(C.onload=$(this._chunkLoaded,this),C.onerror=$(this._chunkError,this)),C.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var F,Y=this._config.downloadRequestHeaders;for(F in Y)C.setRequestHeader(F,Y[F])}var K;this._config.chunkSize&&(K=this._start+this._config.chunkSize-1,C.setRequestHeader("Range","bytes="+this._start+"-"+K));try{C.send(this._config.downloadRequestBody)}catch(se){this._chunkError(se.message)}l&&C.status===0&&this._chunkError()}},this._chunkLoaded=function(){C.readyState===4&&(C.status<200||400<=C.status?this._chunkError():(this._start+=this._config.chunkSize||C.responseText.length,this._finished=!this._config.chunkSize||this._start>=(F=>(F=F.getResponseHeader("Content-Range"))!==null?parseInt(F.substring(F.lastIndexOf("/")+1)):-1)(C),this.parseChunk(C.responseText)))},this._chunkError=function(F){F=C.statusText||F,this._sendError(new Error(F))}}function b(D){(D=D||{}).chunkSize||(D.chunkSize=g.LocalChunkSize),y.call(this,D);var C,F,Y=typeof FileReader<"u";this.stream=function(K){this._input=K,F=K.slice||K.webkitSlice||K.mozSlice,Y?((C=new FileReader).onload=$(this._chunkLoaded,this),C.onerror=$(this._chunkError,this)):C=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var K=this._input,se=(this._config.chunkSize&&(se=Math.min(this._start+this._config.chunkSize,this._input.size),K=F.call(K,this._start,se)),C.readAsText(K,this._config.encoding));Y||this._chunkLoaded({target:{result:se}})},this._chunkLoaded=function(K){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(K.target.result)},this._chunkError=function(){this._sendError(C.error)}}function N(D){var C;y.call(this,D=D||{}),this.stream=function(F){return C=F,this._nextChunk()},this._nextChunk=function(){var F,Y;if(!this._finished)return F=this._config.chunkSize,C=F?(Y=C.substring(0,F),C.substring(F)):(Y=C,""),this._finished=!C,this.parseChunk(Y)}}function O(D){y.call(this,D=D||{});var C=[],F=!0,Y=!1;this.pause=function(){y.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){y.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(K){this._input=K,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){Y&&C.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),C.length?this.parseChunk(C.shift()):F=!0},this._streamData=$(function(K){try{C.push(typeof K=="string"?K:K.toString(this._config.encoding)),F&&(F=!1,this._checkIsFinished(),this.parseChunk(C.shift()))}catch(se){this._streamError(se)}},this),this._streamError=$(function(K){this._streamCleanUp(),this._sendError(K)},this),this._streamEnd=$(function(){this._streamCleanUp(),Y=!0,this._streamData("")},this),this._streamCleanUp=$(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function L(D){var C,F,Y,K,se=Math.pow(2,53),Oe=-se,q=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,je=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,le=this,re=0,te=0,xe=!1,me=!1,ce=[],he={data:[],errors:[],meta:{}};function ke(be){return D.skipEmptyLines==="greedy"?be.join("").trim()==="":be.length===1&&be[0].length===0}function Je(){if(he&&Y&&(Nt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+g.DefaultDelimiter+"'"),Y=!1),D.skipEmptyLines&&(he.data=he.data.filter(function(Ze){return!ke(Ze)})),ue()){let Ze=function(Ne,$e){U(D.transformHeader)&&(Ne=D.transformHeader(Ne,$e)),ce.push(Ne)};var Se=Ze;if(he)if(Array.isArray(he.data[0])){for(var be=0;ue()&&be<he.data.length;be++)he.data[be].forEach(Ze);he.data.splice(0,1)}else he.data.forEach(Ze)}function Fe(Ze,Ne){for(var $e=D.header?{}:[],Le=0;Le<Ze.length;Le++){var Pe=Le,We=Ze[Le],We=((Ee,ye)=>(pt=>(D.dynamicTypingFunction&&D.dynamicTyping[pt]===void 0&&(D.dynamicTyping[pt]=D.dynamicTypingFunction(pt)),(D.dynamicTyping[pt]||D.dynamicTyping)===!0))(Ee)?ye==="true"||ye==="TRUE"||ye!=="false"&&ye!=="FALSE"&&((pt=>{if(q.test(pt)&&(pt=parseFloat(pt),Oe<pt&&pt<se))return 1})(ye)?parseFloat(ye):je.test(ye)?new Date(ye):ye===""?null:ye):ye)(Pe=D.header?Le>=ce.length?"__parsed_extra":ce[Le]:Pe,We=D.transform?D.transform(We,Pe):We);Pe==="__parsed_extra"?($e[Pe]=$e[Pe]||[],$e[Pe].push(We)):$e[Pe]=We}return D.header&&(Le>ce.length?Nt("FieldMismatch","TooManyFields","Too many fields: expected "+ce.length+" fields but parsed "+Le,te+Ne):Le<ce.length&&Nt("FieldMismatch","TooFewFields","Too few fields: expected "+ce.length+" fields but parsed "+Le,te+Ne)),$e}var et;he&&(D.header||D.dynamicTyping||D.transform)&&(et=1,!he.data.length||Array.isArray(he.data[0])?(he.data=he.data.map(Fe),et=he.data.length):he.data=Fe(he.data,0),D.header&&he.meta&&(he.meta.fields=ce),te+=et)}function ue(){return D.header&&ce.length===0}function Nt(be,Fe,et,Se){be={type:be,code:Fe,message:et},Se!==void 0&&(be.row=Se),he.errors.push(be)}U(D.step)&&(K=D.step,D.step=function(be){he=be,ue()?Je():(Je(),he.data.length!==0&&(re+=be.data.length,D.preview&&re>D.preview?F.abort():(he.data=he.data[0],K(he,le))))}),this.parse=function(be,Fe,et){var Se=D.quoteChar||'"',Se=(D.newline||(D.newline=this.guessLineEndings(be,Se)),Y=!1,D.delimiter?U(D.delimiter)&&(D.delimiter=D.delimiter(be),he.meta.delimiter=D.delimiter):((Se=((Ze,Ne,$e,Le,Pe)=>{var We,Ee,ye,pt;Pe=Pe||[",","	","|",";",g.RECORD_SEP,g.UNIT_SEP];for(var de=0;de<Pe.length;de++){for(var lr,Bn=Pe[de],ot=0,pr=0,qe=0,Xt=(ye=void 0,new k({comments:Le,delimiter:Bn,newline:Ne,preview:10}).parse(Ze)),Vt=0;Vt<Xt.data.length;Vt++)$e&&ke(Xt.data[Vt])?qe++:(lr=Xt.data[Vt].length,pr+=lr,ye===void 0?ye=lr:0<lr&&(ot+=Math.abs(lr-ye),ye=lr));0<Xt.data.length&&(pr/=Xt.data.length-qe),(Ee===void 0||ot<=Ee)&&(pt===void 0||pt<pr)&&1.99<pr&&(Ee=ot,We=Bn,pt=pr)}return{successful:!!(D.delimiter=We),bestDelimiter:We}})(be,D.newline,D.skipEmptyLines,D.comments,D.delimitersToGuess)).successful?D.delimiter=Se.bestDelimiter:(Y=!0,D.delimiter=g.DefaultDelimiter),he.meta.delimiter=D.delimiter),W(D));return D.preview&&D.header&&Se.preview++,C=be,F=new k(Se),he=F.parse(C,Fe,et),Je(),xe?{meta:{paused:!0}}:he||{meta:{paused:!1}}},this.paused=function(){return xe},this.pause=function(){xe=!0,F.abort(),C=U(D.chunk)?"":C.substring(F.getCharIndex())},this.resume=function(){le.streamer._halted?(xe=!1,le.streamer.parseChunk(C,!0)):setTimeout(le.resume,3)},this.aborted=function(){return me},this.abort=function(){me=!0,F.abort(),he.meta.aborted=!0,U(D.complete)&&D.complete(he),C=""},this.guessLineEndings=function(Ze,Se){Ze=Ze.substring(0,1048576);var Se=new RegExp(j(Se)+"([^]*?)"+j(Se),"gm"),et=(Ze=Ze.replace(Se,"")).split("\r"),Se=Ze.split(`
`),Ze=1<Se.length&&Se[0].length<et[0].length;if(et.length===1||Ze)return`
`;for(var Ne=0,$e=0;$e<et.length;$e++)et[$e][0]===`
`&&Ne++;return Ne>=et.length/2?`\r
`:"\r"}}function j(D){return D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function k(D){var C=(D=D||{}).delimiter,F=D.newline,Y=D.comments,K=D.step,se=D.preview,Oe=D.fastMode,q=null,je=!1,le=D.quoteChar==null?'"':D.quoteChar,re=le;if(D.escapeChar!==void 0&&(re=D.escapeChar),(typeof C!="string"||-1<g.BAD_DELIMITERS.indexOf(C))&&(C=","),Y===C)throw new Error("Comment character same as delimiter");Y===!0?Y="#":(typeof Y!="string"||-1<g.BAD_DELIMITERS.indexOf(Y))&&(Y=!1),F!==`
`&&F!=="\r"&&F!==`\r
`&&(F=`
`);var te=0,xe=!1;this.parse=function(me,ce,he){if(typeof me!="string")throw new Error("Input must be a string");var ke=me.length,Je=C.length,ue=F.length,Nt=Y.length,be=U(K),Fe=[],et=[],Se=[],Ze=te=0;if(!me)return ot();if(Oe||Oe!==!1&&me.indexOf(le)===-1){for(var Ne=me.split(F),$e=0;$e<Ne.length;$e++){if(Se=Ne[$e],te+=Se.length,$e!==Ne.length-1)te+=F.length;else if(he)return ot();if(!Y||Se.substring(0,Nt)!==Y){if(be){if(Fe=[],pt(Se.split(C)),pr(),xe)return ot()}else pt(Se.split(C));if(se&&se<=$e)return Fe=Fe.slice(0,se),ot(!0)}}return ot()}for(var Le=me.indexOf(C,te),Pe=me.indexOf(F,te),We=new RegExp(j(re)+j(le),"g"),Ee=me.indexOf(le,te);;)if(me[te]===le)for(Ee=te,te++;;){if((Ee=me.indexOf(le,Ee+1))===-1)return he||et.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Fe.length,index:te}),lr();if(Ee===ke-1)return lr(me.substring(te,Ee).replace(We,le));if(le===re&&me[Ee+1]===re)Ee++;else if(le===re||Ee===0||me[Ee-1]!==re){Le!==-1&&Le<Ee+1&&(Le=me.indexOf(C,Ee+1));var ye=de((Pe=Pe!==-1&&Pe<Ee+1?me.indexOf(F,Ee+1):Pe)===-1?Le:Math.min(Le,Pe));if(me.substr(Ee+1+ye,Je)===C){Se.push(me.substring(te,Ee).replace(We,le)),me[te=Ee+1+ye+Je]!==le&&(Ee=me.indexOf(le,te)),Le=me.indexOf(C,te),Pe=me.indexOf(F,te);break}if(ye=de(Pe),me.substring(Ee+1+ye,Ee+1+ye+ue)===F){if(Se.push(me.substring(te,Ee).replace(We,le)),Bn(Ee+1+ye+ue),Le=me.indexOf(C,te),Ee=me.indexOf(le,te),be&&(pr(),xe))return ot();if(se&&Fe.length>=se)return ot(!0);break}et.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Fe.length,index:te}),Ee++}}else if(Y&&Se.length===0&&me.substring(te,te+Nt)===Y){if(Pe===-1)return ot();te=Pe+ue,Pe=me.indexOf(F,te),Le=me.indexOf(C,te)}else if(Le!==-1&&(Le<Pe||Pe===-1))Se.push(me.substring(te,Le)),te=Le+Je,Le=me.indexOf(C,te);else{if(Pe===-1)break;if(Se.push(me.substring(te,Pe)),Bn(Pe+ue),be&&(pr(),xe))return ot();if(se&&Fe.length>=se)return ot(!0)}return lr();function pt(qe){Fe.push(qe),Ze=te}function de(qe){var Xt=0;return Xt=qe!==-1&&(qe=me.substring(Ee+1,qe))&&qe.trim()===""?qe.length:Xt}function lr(qe){return he||(qe===void 0&&(qe=me.substring(te)),Se.push(qe),te=ke,pt(Se),be&&pr()),ot()}function Bn(qe){te=qe,pt(Se),Se=[],Pe=me.indexOf(F,te)}function ot(qe){if(D.header&&!ce&&Fe.length&&!je){var Xt=Fe[0],Vt=Object.create(null),Dt=new Set(Xt);let qs=!1;for(let Kr=0;Kr<Xt.length;Kr++){let Lr=Xt[Kr];if(Vt[Lr=U(D.transformHeader)?D.transformHeader(Lr,Kr):Lr]){let at,ae=Vt[Lr];for(;at=Lr+"_"+ae,ae++,Dt.has(at););Dt.add(at),Xt[Kr]=at,Vt[Lr]++,qs=!0,(q=q===null?{}:q)[at]=Lr}else Vt[Lr]=1,Xt[Kr]=Lr;Dt.add(Lr)}qs&&console.warn("Duplicate headers found and renamed."),je=!0}return{data:Fe,errors:et,meta:{delimiter:C,linebreak:F,aborted:xe,truncated:!!qe,cursor:Ze+(ce||0),renamedHeaders:q}}}function pr(){K(ot()),Fe=[],et=[]}},this.abort=function(){xe=!0},this.getCharIndex=function(){return te}}function R(D){var C=D.data,F=x[C.workerId],Y=!1;if(C.error)F.userError(C.error,C.file);else if(C.results&&C.results.data){var K={abort:function(){Y=!0,I(C.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:B,resume:B};if(U(F.userStep)){for(var se=0;se<C.results.data.length&&(F.userStep({data:C.results.data[se],errors:C.results.errors,meta:C.results.meta},K),!Y);se++);delete C.results}else U(F.userChunk)&&(F.userChunk(C.results,K,C.file),delete C.results)}C.finished&&!Y&&I(C.workerId,C.results)}function I(D,C){var F=x[D];U(F.userComplete)&&F.userComplete(C),F.terminate(),delete x[D]}function B(){throw new Error("Not implemented.")}function W(D){if(typeof D!="object"||D===null)return D;var C,F=Array.isArray(D)?[]:{};for(C in D)F[C]=W(D[C]);return F}function $(D,C){return function(){D.apply(C,arguments)}}function U(D){return typeof D=="function"}return g.parse=function(D,C){var F=(C=C||{}).dynamicTyping||!1;if(U(F)&&(C.dynamicTypingFunction=F,F={}),C.dynamicTyping=F,C.transform=!!U(C.transform)&&C.transform,!C.worker||!g.WORKERS_SUPPORTED)return F=null,g.NODE_STREAM_INPUT,typeof D=="string"?(D=(Y=>Y.charCodeAt(0)!==65279?Y:Y.slice(1))(D),F=new(C.download?v:N)(C)):D.readable===!0&&U(D.read)&&U(D.on)?F=new O(C):(s.File&&D instanceof File||D instanceof Object)&&(F=new b(C)),F.stream(D);(F=(()=>{var Y;return!!g.WORKERS_SUPPORTED&&(Y=(()=>{var K=s.URL||s.webkitURL||null,se=r.toString();return g.BLOB_URL||(g.BLOB_URL=K.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",se,")();"],{type:"text/javascript"})))})(),(Y=new s.Worker(Y)).onmessage=R,Y.id=p++,x[Y.id]=Y)})()).userStep=C.step,F.userChunk=C.chunk,F.userComplete=C.complete,F.userError=C.error,C.step=U(C.step),C.chunk=U(C.chunk),C.complete=U(C.complete),C.error=U(C.error),delete C.worker,F.postMessage({input:D,config:C,workerId:F.id})},g.unparse=function(D,C){var F=!1,Y=!0,K=",",se=`\r
`,Oe='"',q=Oe+Oe,je=!1,le=null,re=!1,te=((()=>{if(typeof C=="object"){if(typeof C.delimiter!="string"||g.BAD_DELIMITERS.filter(function(ce){return C.delimiter.indexOf(ce)!==-1}).length||(K=C.delimiter),typeof C.quotes!="boolean"&&typeof C.quotes!="function"&&!Array.isArray(C.quotes)||(F=C.quotes),typeof C.skipEmptyLines!="boolean"&&typeof C.skipEmptyLines!="string"||(je=C.skipEmptyLines),typeof C.newline=="string"&&(se=C.newline),typeof C.quoteChar=="string"&&(Oe=C.quoteChar),typeof C.header=="boolean"&&(Y=C.header),Array.isArray(C.columns)){if(C.columns.length===0)throw new Error("Option columns is empty");le=C.columns}C.escapeChar!==void 0&&(q=C.escapeChar+Oe),C.escapeFormulae instanceof RegExp?re=C.escapeFormulae:typeof C.escapeFormulae=="boolean"&&C.escapeFormulae&&(re=/^[=+\-@\t\r].*$/)}})(),new RegExp(j(Oe),"g"));if(typeof D=="string"&&(D=JSON.parse(D)),Array.isArray(D)){if(!D.length||Array.isArray(D[0]))return xe(null,D,je);if(typeof D[0]=="object")return xe(le||Object.keys(D[0]),D,je)}else if(typeof D=="object")return typeof D.data=="string"&&(D.data=JSON.parse(D.data)),Array.isArray(D.data)&&(D.fields||(D.fields=D.meta&&D.meta.fields||le),D.fields||(D.fields=Array.isArray(D.data[0])?D.fields:typeof D.data[0]=="object"?Object.keys(D.data[0]):[]),Array.isArray(D.data[0])||typeof D.data[0]=="object"||(D.data=[D.data])),xe(D.fields||[],D.data||[],je);throw new Error("Unable to serialize unrecognized input");function xe(ce,he,ke){var Je="",ue=(typeof ce=="string"&&(ce=JSON.parse(ce)),typeof he=="string"&&(he=JSON.parse(he)),Array.isArray(ce)&&0<ce.length),Nt=!Array.isArray(he[0]);if(ue&&Y){for(var be=0;be<ce.length;be++)0<be&&(Je+=K),Je+=me(ce[be],be);0<he.length&&(Je+=se)}for(var Fe=0;Fe<he.length;Fe++){var et=(ue?ce:he[Fe]).length,Se=!1,Ze=ue?Object.keys(he[Fe]).length===0:he[Fe].length===0;if(ke&&!ue&&(Se=ke==="greedy"?he[Fe].join("").trim()==="":he[Fe].length===1&&he[Fe][0].length===0),ke==="greedy"&&ue){for(var Ne=[],$e=0;$e<et;$e++){var Le=Nt?ce[$e]:$e;Ne.push(he[Fe][Le])}Se=Ne.join("").trim()===""}if(!Se){for(var Pe=0;Pe<et;Pe++){0<Pe&&!Ze&&(Je+=K);var We=ue&&Nt?ce[Pe]:Pe;Je+=me(he[Fe][We],Pe)}Fe<he.length-1&&(!ke||0<et&&!Ze)&&(Je+=se)}}return Je}function me(ce,he){var ke,Je;return ce==null?"":ce.constructor===Date?JSON.stringify(ce).slice(1,25):(Je=!1,re&&typeof ce=="string"&&re.test(ce)&&(ce="'"+ce,Je=!0),ke=ce.toString().replace(te,q),(Je=Je||F===!0||typeof F=="function"&&F(ce,he)||Array.isArray(F)&&F[he]||((ue,Nt)=>{for(var be=0;be<Nt.length;be++)if(-1<ue.indexOf(Nt[be]))return!0;return!1})(ke,g.BAD_DELIMITERS)||-1<ke.indexOf(K)||ke.charAt(0)===" "||ke.charAt(ke.length-1)===" ")?Oe+ke+Oe:ke)}},g.RECORD_SEP="",g.UNIT_SEP="",g.BYTE_ORDER_MARK="\uFEFF",g.BAD_DELIMITERS=["\r",`
`,'"',g.BYTE_ORDER_MARK],g.WORKERS_SUPPORTED=!l&&!!s.Worker,g.NODE_STREAM_INPUT=1,g.LocalChunkSize=10485760,g.RemoteChunkSize=5242880,g.DefaultDelimiter=",",g.Parser=k,g.ParserHandle=L,g.NetworkStreamer=v,g.FileStreamer=b,g.StringStreamer=N,g.ReadableStreamStreamer=O,s.jQuery&&((a=s.jQuery).fn.parse=function(D){var C=D.config||{},F=[];return this.each(function(se){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var Oe=0;Oe<this.files.length;Oe++)F.push({file:this.files[Oe],inputElem:this,instanceConfig:a.extend({},C)})}),Y(),this;function Y(){if(F.length===0)U(D.complete)&&D.complete();else{var se,Oe,q,je,le=F[0];if(U(D.before)){var re=D.before(le.file,le.inputElem);if(typeof re=="object"){if(re.action==="abort")return se="AbortError",Oe=le.file,q=le.inputElem,je=re.reason,void(U(D.error)&&D.error({name:se},Oe,q,je));if(re.action==="skip")return void K();typeof re.config=="object"&&(le.instanceConfig=a.extend(le.instanceConfig,re.config))}else if(re==="skip")return void K()}var te=le.instanceConfig.complete;le.instanceConfig.complete=function(xe){U(te)&&te(xe,le.file,le.inputElem),K()},g.parse(le.file,le.instanceConfig)}}function K(){F.splice(0,1),Y()}}),h&&(s.onmessage=function(D){D=D.data,g.WORKER_ID===void 0&&D&&(g.WORKER_ID=D.workerId),typeof D.input=="string"?s.postMessage({workerId:g.WORKER_ID,results:g.parse(D.input,D.config),finished:!0}):(s.File&&D.input instanceof File||D.input instanceof Object)&&(D=g.parse(D.input,D.config))&&s.postMessage({workerId:g.WORKER_ID,results:D,finished:!0})}),(v.prototype=Object.create(y.prototype)).constructor=v,(b.prototype=Object.create(y.prototype)).constructor=b,(N.prototype=Object.create(N.prototype)).constructor=N,(O.prototype=Object.create(y.prototype)).constructor=O,g})})(km);var n_=km.exports;const i_=vd(n_);let Va;const s_=new Uint8Array(16);function o_(){if(!Va&&(Va=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Va))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Va(s_)}const Zt=[];for(let t=0;t<256;++t)Zt.push((t+256).toString(16).slice(1));function a_(t,e=0){return Zt[t[e+0]]+Zt[t[e+1]]+Zt[t[e+2]]+Zt[t[e+3]]+"-"+Zt[t[e+4]]+Zt[t[e+5]]+"-"+Zt[t[e+6]]+Zt[t[e+7]]+"-"+Zt[t[e+8]]+Zt[t[e+9]]+"-"+Zt[t[e+10]]+Zt[t[e+11]]+Zt[t[e+12]]+Zt[t[e+13]]+Zt[t[e+14]]+Zt[t[e+15]]}const l_=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),U0={randomUUID:l_};function u_(t,e,r){if(U0.randomUUID&&!t)return U0.randomUUID();t=t||{};const s=t.random||(t.rng||o_)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,a_(s)}function c_(){const[t,e]=X.useState(!1),[r,s]=X.useState(null),[a,l]=X.useState([]),[h,x]=X.useState([]),[p,g]=X.useState(null),[y,v]=X.useState([]),[b,N]=X.useState(""),[O,L]=X.useState({});X.useEffect(()=>{j()},[]),X.useEffect(()=>{b&&k()},[b]);const j=async()=>{try{const{data:C,error:F}=await rt.from("eventos").select("*").order("created_at",{ascending:!1});if(F)throw F;v(C||[]);const Y=localStorage.getItem("currentEventId");Y&&(C!=null&&C.some(K=>K.id===Y))?N(Y):(C==null?void 0:C.length)>0&&N(C[0].id)}catch(C){console.error("Erro ao carregar eventos:",C),ve.error("Erro ao carregar eventos")}},k=async()=>{if(!b){g(null);return}try{const{data:C,error:F}=await rt.from("eventos").select("*").eq("id",b).single();if(F)throw F;g(C),localStorage.setItem("currentEventId",b)}catch(C){console.error("Erro ao carregar evento:",C),ve.error("Erro ao carregar evento")}},R=C=>{N(C),x([])},I=C=>{const F=C.target.files[0];F&&(s(F),B(F))},B=C=>{i_.parse(C,{header:!0,complete:F=>{const Y=F.data.filter(K=>K.nome&&K.email).map(K=>({nome:K.nome,email:K.email,mesa:K.mesa||""}));l(Y),Y.length===0?ve.error("O ficheiro CSV no contm dados vlidos. Certifique-se de incluir pelo menos as colunas: nome, email"):ve.success(`${Y.length} convidados carregados do CSV`)},error:F=>{ve.error("Erro ao processar o ficheiro CSV: "+F.message)}})},W=async()=>{if(!p){ve.error("Por favor, selecione um evento primeiro");return}if(a.length===0){ve.error("Nenhum convidado para fazer upload");return}e(!0);try{const C=a.map(se=>({id:u_(),evento_id:p.id,nome:se.nome,email:se.email,mesa:se.mesa||null,confirmado:!1,rejeitado:!1,checkin:!1})),{data:F,error:Y}=await rt.from("convidados").insert(C).select();if(Y)throw Y;const K=F.map(se=>({...se,link:`${window.location.origin}/confirmar?id=${se.id}`}));x(K),ve.success(`${F.length} convidados adicionados com sucesso!`)}catch(C){console.error("Erro ao fazer upload dos convidados:",C),ve.error("Erro ao fazer upload: "+C.message)}finally{e(!1)}},$=(C,F)=>{navigator.clipboard.writeText(F),L({...O,[C]:!0}),ve.success("Link copiado!"),setTimeout(()=>{L({...O,[C]:!1})},2e3)},U=(C,F)=>{const Y=encodeURIComponent(`Confirmao de Presena - ${(p==null?void 0:p.nome)||"Evento"}`),K=encodeURIComponent(`Ol,

Por favor confirme a sua presena no evento clicando no link abaixo:

${F}

Obrigado!`);window.open(`mailto:${C}?subject=${Y}&body=${K}`)},D=C=>{if(!C)return"";const[F,Y]=C.split(":");return`${F}:${Y}`};return _.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[_.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[_.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Upload de Convidados"}),_.jsxs("div",{className:"mb-6",children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecione o Evento"}),y.length>0?_.jsxs("select",{value:b,onChange:C=>R(C.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[_.jsx("option",{value:"",children:"Selecione um evento"}),y.map(C=>_.jsxs("option",{value:C.id,children:[C.nome," -"," ",new Date(C.data).toLocaleDateString("pt-PT")," s"," ",D(C.hora)]},C.id))]}):_.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:_.jsx("p",{className:"text-yellow-800 text-sm",children:"Nenhum evento disponvel. Por favor, crie um evento primeiro."})})]}),p&&_.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[_.jsx("p",{className:"text-sm text-blue-600 font-medium mb-1",children:"Evento selecionado:"}),_.jsx("p",{className:"font-bold text-blue-900 text-lg",children:p.nome}),_.jsxs("p",{className:"text-sm text-blue-700",children:[new Date(p.data).toLocaleDateString("pt-PT",{day:"numeric",month:"long",year:"numeric"})," ","s ",D(p.hora)," - ",p.local]})]}),p&&_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ficheiro CSV (colunas: nome, email, mesa opcional)"}),_.jsx("input",{type:"file",accept:".csv",onChange:I,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),a.length>0&&_.jsxs("div",{className:"mt-4",children:[_.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["Pr-visualizao (",a.length," convidados)"]}),_.jsxs("div",{className:"max-h-60 overflow-y-auto border rounded-lg",children:[_.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsx("thead",{className:"bg-gray-50",children:_.jsxs("tr",{children:[_.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Nome"}),_.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),_.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Mesa"})]})}),_.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.slice(0,10).map((C,F)=>_.jsxs("tr",{children:[_.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:C.nome}),_.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:C.email}),_.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:C.mesa})]},F))})]}),a.length>10&&_.jsxs("p",{className:"text-sm text-gray-500 p-2 text-center",children:["... e mais ",a.length-10," convidados"]})]})]}),_.jsx("button",{onClick:W,disabled:t||a.length===0,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition",children:t?"A fazer upload...":`Fazer Upload de ${a.length} Convidados`})]})]}),h.length>0&&_.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[_.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Links de Confirmao"}),_.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsx("thead",{className:"bg-gray-50",children:_.jsxs("tr",{children:[_.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nome"}),_.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),_.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mesa"}),_.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),_.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(C=>_.jsxs("tr",{children:[_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:C.nome}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:C.email}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:C.mesa}),_.jsx("td",{className:"px-4 py-3 text-sm",children:_.jsxs("div",{className:"flex space-x-2",children:[_.jsx("button",{onClick:()=>$(C.id,C.link),className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:O[C.id]?" Copiado":" Copiar Link"}),_.jsx("button",{onClick:()=>U(C.email,C.link),className:"inline-flex items-center px-3 py-1 border border-blue-300 text-sm font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:" Email"})]})})]},C.id))})]})})]}),_.jsx("div",{className:"mt-6 bg-blue-50 border-l-4 border-blue-400 p-4",children:_.jsx("div",{className:"flex",children:_.jsxs("div",{className:"ml-3",children:[_.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Formato do ficheiro CSV:"}),_.jsx("pre",{className:"text-xs text-blue-700 bg-white p-2 rounded",children:`nome,email,mesa
Joo Silva,joao@email.com,1
Maria Santos,maria@email.com,2
Pedro Costa,pedro@email.com,1`})]})})})]})}var d_=Object.defineProperty,Pl=Object.getOwnPropertySymbols,Pm=Object.prototype.hasOwnProperty,Dm=Object.prototype.propertyIsEnumerable,z0=(t,e,r)=>e in t?d_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,V0=(t,e)=>{for(var r in e||(e={}))Pm.call(e,r)&&z0(t,r,e[r]);if(Pl)for(var r of Pl(e))Dm.call(e,r)&&z0(t,r,e[r]);return t},h_=(t,e)=>{var r={};for(var s in t)Pm.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&Pl)for(var s of Pl(t))e.indexOf(s)<0&&Dm.call(t,s)&&(r[s]=t[s]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Hi;(t=>{const e=class{constructor(p,g,y,v){if(this.version=p,this.errorCorrectionLevel=g,this.modules=[],this.isFunction=[],p<e.MIN_VERSION||p>e.MAX_VERSION)throw new RangeError("Version value out of range");if(v<-1||v>7)throw new RangeError("Mask value out of range");this.size=p*4+17;let b=[];for(let O=0;O<this.size;O++)b.push(!1);for(let O=0;O<this.size;O++)this.modules.push(b.slice()),this.isFunction.push(b.slice());this.drawFunctionPatterns();const N=this.addEccAndInterleave(y);if(this.drawCodewords(N),v==-1){let O=1e9;for(let L=0;L<8;L++){this.applyMask(L),this.drawFormatBits(L);const j=this.getPenaltyScore();j<O&&(v=L,O=j),this.applyMask(L)}}l(0<=v&&v<=7),this.mask=v,this.applyMask(v),this.drawFormatBits(v),this.isFunction=[]}static encodeText(p,g){const y=t.QrSegment.makeSegments(p);return e.encodeSegments(y,g)}static encodeBinary(p,g){const y=t.QrSegment.makeBytes(p);return e.encodeSegments([y],g)}static encodeSegments(p,g,y=1,v=40,b=-1,N=!0){if(!(e.MIN_VERSION<=y&&y<=v&&v<=e.MAX_VERSION)||b<-1||b>7)throw new RangeError("Invalid value");let O,L;for(O=y;;O++){const I=e.getNumDataCodewords(O,g)*8,B=x.getTotalBits(p,O);if(B<=I){L=B;break}if(O>=v)throw new RangeError("Data too long")}for(const I of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])N&&L<=e.getNumDataCodewords(O,I)*8&&(g=I);let j=[];for(const I of p){s(I.mode.modeBits,4,j),s(I.numChars,I.mode.numCharCountBits(O),j);for(const B of I.getData())j.push(B)}l(j.length==L);const k=e.getNumDataCodewords(O,g)*8;l(j.length<=k),s(0,Math.min(4,k-j.length),j),s(0,(8-j.length%8)%8,j),l(j.length%8==0);for(let I=236;j.length<k;I^=253)s(I,8,j);let R=[];for(;R.length*8<j.length;)R.push(0);return j.forEach((I,B)=>R[B>>>3]|=I<<7-(B&7)),new e(O,g,R,b)}getModule(p,g){return 0<=p&&p<this.size&&0<=g&&g<this.size&&this.modules[g][p]}getModules(){return this.modules}drawFunctionPatterns(){for(let y=0;y<this.size;y++)this.setFunctionModule(6,y,y%2==0),this.setFunctionModule(y,6,y%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const p=this.getAlignmentPatternPositions(),g=p.length;for(let y=0;y<g;y++)for(let v=0;v<g;v++)y==0&&v==0||y==0&&v==g-1||y==g-1&&v==0||this.drawAlignmentPattern(p[y],p[v]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(p){const g=this.errorCorrectionLevel.formatBits<<3|p;let y=g;for(let b=0;b<10;b++)y=y<<1^(y>>>9)*1335;const v=(g<<10|y)^21522;l(v>>>15==0);for(let b=0;b<=5;b++)this.setFunctionModule(8,b,a(v,b));this.setFunctionModule(8,7,a(v,6)),this.setFunctionModule(8,8,a(v,7)),this.setFunctionModule(7,8,a(v,8));for(let b=9;b<15;b++)this.setFunctionModule(14-b,8,a(v,b));for(let b=0;b<8;b++)this.setFunctionModule(this.size-1-b,8,a(v,b));for(let b=8;b<15;b++)this.setFunctionModule(8,this.size-15+b,a(v,b));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let p=this.version;for(let y=0;y<12;y++)p=p<<1^(p>>>11)*7973;const g=this.version<<12|p;l(g>>>18==0);for(let y=0;y<18;y++){const v=a(g,y),b=this.size-11+y%3,N=Math.floor(y/3);this.setFunctionModule(b,N,v),this.setFunctionModule(N,b,v)}}drawFinderPattern(p,g){for(let y=-4;y<=4;y++)for(let v=-4;v<=4;v++){const b=Math.max(Math.abs(v),Math.abs(y)),N=p+v,O=g+y;0<=N&&N<this.size&&0<=O&&O<this.size&&this.setFunctionModule(N,O,b!=2&&b!=4)}}drawAlignmentPattern(p,g){for(let y=-2;y<=2;y++)for(let v=-2;v<=2;v++)this.setFunctionModule(p+v,g+y,Math.max(Math.abs(v),Math.abs(y))!=1)}setFunctionModule(p,g,y){this.modules[g][p]=y,this.isFunction[g][p]=!0}addEccAndInterleave(p){const g=this.version,y=this.errorCorrectionLevel;if(p.length!=e.getNumDataCodewords(g,y))throw new RangeError("Invalid argument");const v=e.NUM_ERROR_CORRECTION_BLOCKS[y.ordinal][g],b=e.ECC_CODEWORDS_PER_BLOCK[y.ordinal][g],N=Math.floor(e.getNumRawDataModules(g)/8),O=v-N%v,L=Math.floor(N/v);let j=[];const k=e.reedSolomonComputeDivisor(b);for(let I=0,B=0;I<v;I++){let W=p.slice(B,B+L-b+(I<O?0:1));B+=W.length;const $=e.reedSolomonComputeRemainder(W,k);I<O&&W.push(0),j.push(W.concat($))}let R=[];for(let I=0;I<j[0].length;I++)j.forEach((B,W)=>{(I!=L-b||W>=O)&&R.push(B[I])});return l(R.length==N),R}drawCodewords(p){if(p.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let g=0;for(let y=this.size-1;y>=1;y-=2){y==6&&(y=5);for(let v=0;v<this.size;v++)for(let b=0;b<2;b++){const N=y-b,L=(y+1&2)==0?this.size-1-v:v;!this.isFunction[L][N]&&g<p.length*8&&(this.modules[L][N]=a(p[g>>>3],7-(g&7)),g++)}}l(g==p.length*8)}applyMask(p){if(p<0||p>7)throw new RangeError("Mask value out of range");for(let g=0;g<this.size;g++)for(let y=0;y<this.size;y++){let v;switch(p){case 0:v=(y+g)%2==0;break;case 1:v=g%2==0;break;case 2:v=y%3==0;break;case 3:v=(y+g)%3==0;break;case 4:v=(Math.floor(y/3)+Math.floor(g/2))%2==0;break;case 5:v=y*g%2+y*g%3==0;break;case 6:v=(y*g%2+y*g%3)%2==0;break;case 7:v=((y+g)%2+y*g%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[g][y]&&v&&(this.modules[g][y]=!this.modules[g][y])}}getPenaltyScore(){let p=0;for(let b=0;b<this.size;b++){let N=!1,O=0,L=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[b][j]==N?(O++,O==5?p+=e.PENALTY_N1:O>5&&p++):(this.finderPenaltyAddHistory(O,L),N||(p+=this.finderPenaltyCountPatterns(L)*e.PENALTY_N3),N=this.modules[b][j],O=1);p+=this.finderPenaltyTerminateAndCount(N,O,L)*e.PENALTY_N3}for(let b=0;b<this.size;b++){let N=!1,O=0,L=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[j][b]==N?(O++,O==5?p+=e.PENALTY_N1:O>5&&p++):(this.finderPenaltyAddHistory(O,L),N||(p+=this.finderPenaltyCountPatterns(L)*e.PENALTY_N3),N=this.modules[j][b],O=1);p+=this.finderPenaltyTerminateAndCount(N,O,L)*e.PENALTY_N3}for(let b=0;b<this.size-1;b++)for(let N=0;N<this.size-1;N++){const O=this.modules[b][N];O==this.modules[b][N+1]&&O==this.modules[b+1][N]&&O==this.modules[b+1][N+1]&&(p+=e.PENALTY_N2)}let g=0;for(const b of this.modules)g=b.reduce((N,O)=>N+(O?1:0),g);const y=this.size*this.size,v=Math.ceil(Math.abs(g*20-y*10)/y)-1;return l(0<=v&&v<=9),p+=v*e.PENALTY_N4,l(0<=p&&p<=2568888),p}getAlignmentPatternPositions(){if(this.version==1)return[];{const p=Math.floor(this.version/7)+2,g=this.version==32?26:Math.ceil((this.version*4+4)/(p*2-2))*2;let y=[6];for(let v=this.size-7;y.length<p;v-=g)y.splice(1,0,v);return y}}static getNumRawDataModules(p){if(p<e.MIN_VERSION||p>e.MAX_VERSION)throw new RangeError("Version number out of range");let g=(16*p+128)*p+64;if(p>=2){const y=Math.floor(p/7)+2;g-=(25*y-10)*y-55,p>=7&&(g-=36)}return l(208<=g&&g<=29648),g}static getNumDataCodewords(p,g){return Math.floor(e.getNumRawDataModules(p)/8)-e.ECC_CODEWORDS_PER_BLOCK[g.ordinal][p]*e.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][p]}static reedSolomonComputeDivisor(p){if(p<1||p>255)throw new RangeError("Degree out of range");let g=[];for(let v=0;v<p-1;v++)g.push(0);g.push(1);let y=1;for(let v=0;v<p;v++){for(let b=0;b<g.length;b++)g[b]=e.reedSolomonMultiply(g[b],y),b+1<g.length&&(g[b]^=g[b+1]);y=e.reedSolomonMultiply(y,2)}return g}static reedSolomonComputeRemainder(p,g){let y=g.map(v=>0);for(const v of p){const b=v^y.shift();y.push(0),g.forEach((N,O)=>y[O]^=e.reedSolomonMultiply(N,b))}return y}static reedSolomonMultiply(p,g){if(p>>>8||g>>>8)throw new RangeError("Byte out of range");let y=0;for(let v=7;v>=0;v--)y=y<<1^(y>>>7)*285,y^=(g>>>v&1)*p;return l(y>>>8==0),y}finderPenaltyCountPatterns(p){const g=p[1];l(g<=this.size*3);const y=g>0&&p[2]==g&&p[3]==g*3&&p[4]==g&&p[5]==g;return(y&&p[0]>=g*4&&p[6]>=g?1:0)+(y&&p[6]>=g*4&&p[0]>=g?1:0)}finderPenaltyTerminateAndCount(p,g,y){return p&&(this.finderPenaltyAddHistory(g,y),g=0),g+=this.size,this.finderPenaltyAddHistory(g,y),this.finderPenaltyCountPatterns(y)}finderPenaltyAddHistory(p,g){g[0]==0&&(p+=this.size),g.pop(),g.unshift(p)}};let r=e;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function s(p,g,y){if(g<0||g>31||p>>>g)throw new RangeError("Value out of range");for(let v=g-1;v>=0;v--)y.push(p>>>v&1)}function a(p,g){return(p>>>g&1)!=0}function l(p){if(!p)throw new Error("Assertion error")}const h=class{constructor(p,g,y){if(this.mode=p,this.numChars=g,this.bitData=y,g<0)throw new RangeError("Invalid argument");this.bitData=y.slice()}static makeBytes(p){let g=[];for(const y of p)s(y,8,g);return new h(h.Mode.BYTE,p.length,g)}static makeNumeric(p){if(!h.isNumeric(p))throw new RangeError("String contains non-numeric characters");let g=[];for(let y=0;y<p.length;){const v=Math.min(p.length-y,3);s(parseInt(p.substr(y,v),10),v*3+1,g),y+=v}return new h(h.Mode.NUMERIC,p.length,g)}static makeAlphanumeric(p){if(!h.isAlphanumeric(p))throw new RangeError("String contains unencodable characters in alphanumeric mode");let g=[],y;for(y=0;y+2<=p.length;y+=2){let v=h.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y))*45;v+=h.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y+1)),s(v,11,g)}return y<p.length&&s(h.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y)),6,g),new h(h.Mode.ALPHANUMERIC,p.length,g)}static makeSegments(p){return p==""?[]:h.isNumeric(p)?[h.makeNumeric(p)]:h.isAlphanumeric(p)?[h.makeAlphanumeric(p)]:[h.makeBytes(h.toUtf8ByteArray(p))]}static makeEci(p){let g=[];if(p<0)throw new RangeError("ECI assignment value out of range");if(p<128)s(p,8,g);else if(p<16384)s(2,2,g),s(p,14,g);else if(p<1e6)s(6,3,g),s(p,21,g);else throw new RangeError("ECI assignment value out of range");return new h(h.Mode.ECI,0,g)}static isNumeric(p){return h.NUMERIC_REGEX.test(p)}static isAlphanumeric(p){return h.ALPHANUMERIC_REGEX.test(p)}getData(){return this.bitData.slice()}static getTotalBits(p,g){let y=0;for(const v of p){const b=v.mode.numCharCountBits(g);if(v.numChars>=1<<b)return 1/0;y+=4+b+v.bitData.length}return y}static toUtf8ByteArray(p){p=encodeURI(p);let g=[];for(let y=0;y<p.length;y++)p.charAt(y)!="%"?g.push(p.charCodeAt(y)):(g.push(parseInt(p.substr(y+1,2),16)),y+=2);return g}};let x=h;x.NUMERIC_REGEX=/^[0-9]*$/,x.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,x.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=x})(Hi||(Hi={}));(t=>{(e=>{const r=class{constructor(a,l){this.ordinal=a,this.formatBits=l}};let s=r;s.LOW=new r(0,1),s.MEDIUM=new r(1,0),s.QUARTILE=new r(2,3),s.HIGH=new r(3,2),e.Ecc=s})(t.QrCode||(t.QrCode={}))})(Hi||(Hi={}));(t=>{(e=>{const r=class{constructor(a,l){this.modeBits=a,this.numBitsCharCount=l}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};let s=r;s.NUMERIC=new r(1,[10,12,14]),s.ALPHANUMERIC=new r(2,[9,11,13]),s.BYTE=new r(4,[8,16,16]),s.KANJI=new r(8,[8,10,12]),s.ECI=new r(7,[0,0,0]),e.Mode=s})(t.QrSegment||(t.QrSegment={}))})(Hi||(Hi={}));var yo=Hi;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var f_={L:yo.QrCode.Ecc.LOW,M:yo.QrCode.Ecc.MEDIUM,Q:yo.QrCode.Ecc.QUARTILE,H:yo.QrCode.Ecc.HIGH},g_=128,p_="L",m_="#FFFFFF",x_="#000000",w_=!1,Mm=4,y_=.1;function v_(t,e=0){const r=[];return t.forEach(function(s,a){let l=null;s.forEach(function(h,x){if(!h&&l!==null){r.push(`M${l+e} ${a+e}h${x-l}v1H${l+e}z`),l=null;return}if(x===s.length-1){if(!h)return;l===null?r.push(`M${x+e},${a+e} h1v1H${x+e}z`):r.push(`M${l+e},${a+e} h${x+1-l}v1H${l+e}z`);return}h&&l===null&&(l=x)})}),r.join("")}function E_(t,e){return t.slice().map((r,s)=>s<e.y||s>=e.y+e.h?r:r.map((a,l)=>l<e.x||l>=e.x+e.w?a:!1))}function __(t,e,r,s){if(s==null)return null;const a=r?Mm:0,l=t.length+a*2,h=Math.floor(e*y_),x=l/e,p=(s.width||h)*x,g=(s.height||h)*x,y=s.x==null?t.length/2-p/2:s.x*x,v=s.y==null?t.length/2-g/2:s.y*x;let b=null;if(s.excavate){let N=Math.floor(y),O=Math.floor(v),L=Math.ceil(p+y-N),j=Math.ceil(g+v-O);b={x:N,y:O,w:L,h:j}}return{x:y,y:v,h:g,w:p,excavation:b}}var C_=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function b_(t){const e=t,{value:r,size:s=g_,level:a=p_,bgColor:l=m_,fgColor:h=x_,includeMargin:x=w_,style:p,imageSettings:g}=e,y=h_(e,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),v=g==null?void 0:g.src,b=en.useRef(null),N=en.useRef(null),[O,L]=en.useState(!1);en.useEffect(()=>{if(b.current!=null){const R=b.current,I=R.getContext("2d");if(!I)return;let B=yo.QrCode.encodeText(r,f_[a]).getModules();const W=x?Mm:0,$=B.length+W*2,U=__(B,s,x,g),D=N.current,C=U!=null&&D!==null&&D.complete&&D.naturalHeight!==0&&D.naturalWidth!==0;C&&U.excavation!=null&&(B=E_(B,U.excavation));const F=window.devicePixelRatio||1;R.height=R.width=s*F;const Y=s/$*F;I.scale(Y,Y),I.fillStyle=l,I.fillRect(0,0,$,$),I.fillStyle=h,C_?I.fill(new Path2D(v_(B,W))):B.forEach(function(K,se){K.forEach(function(Oe,q){Oe&&I.fillRect(q+W,se+W,1,1)})}),C&&I.drawImage(D,U.x+W,U.y+W,U.w,U.h)}}),en.useEffect(()=>{L(!1)},[v]);const j=V0({height:s,width:s},p);let k=null;return v!=null&&(k=en.createElement("img",{src:v,key:v,style:{display:"none"},onLoad:()=>{L(!0)},ref:N})),en.createElement(en.Fragment,null,en.createElement("canvas",V0({style:j,height:s,width:s,ref:b},y)),k)}function A_(){const[t]=$y(),[e,r]=X.useState(!0),[s,a]=X.useState(null),[l,h]=X.useState(null),[x,p]=X.useState(!1),[g,y]=X.useState(!1),[v,b]=X.useState(""),N=X.useRef(null);X.useEffect(()=>{O()},[]);const O=async()=>{const B=t.get("id");if(!B){ve.error("Link invlido - ID do convidado no encontrado"),r(!1);return}try{const{data:W,error:$}=await rt.from("convidados").select("*").eq("id",B).single();if($)throw $;a(W),p(W.confirmado),y(W.rejeitado||!1);const{data:U,error:D}=await rt.from("eventos").select("*").eq("id",W.evento_id).single();if(D)throw D;h(U);const C=JSON.stringify({id:W.id,nome:W.nome});b(C)}catch(W){console.error("Erro ao carregar dados:",W),ve.error("Erro ao carregar dados do convidado")}finally{r(!1)}},L=async()=>{if(s){r(!0);try{const{error:B}=await rt.from("convidados").update({confirmado:!0,rejeitado:!1}).eq("id",s.id);if(B)throw B;await k(),p(!0),y(!1),ve.success("Presena confirmada com sucesso!")}catch(B){console.error("Erro ao confirmar presena:",B),ve.error("Erro ao confirmar presena")}finally{r(!1)}}},j=async()=>{if(s){r(!0);try{const{error:B}=await rt.from("convidados").update({confirmado:!1,rejeitado:!0}).eq("id",s.id);if(B)throw B;p(!1),y(!0),ve.success("Resposta registada. Lamentamos a sua ausncia!")}catch(B){console.error("Erro ao rejeitar convite:",B),ve.error("Erro ao processar resposta")}finally{r(!1)}}},k=async()=>{if(N.current)try{const B=N.current.querySelector("canvas"),W=await new Promise(D=>B.toBlob(D)),$=`qrcodes/${s.id}.png`,{error:U}=await rt.storage.from("qrcodes").upload($,W,{contentType:"image/png",upsert:!0});if(U)throw U}catch(B){console.error("Erro ao salvar QR code:",B)}},R=()=>{const W=N.current.querySelector("canvas").toDataURL("image/png"),$=document.createElement("a");$.href=W,$.download=`qrcode-${s.nome.replace(/\s+/g,"-")}.png`,document.body.appendChild($),$.click(),document.body.removeChild($),ve.success("QR Code descarregado!")},I=B=>{if(!B)return"";const[W,$]=B.split(":");return`${W}:${$}`};return e?_.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:_.jsxs("div",{className:"text-center",children:[_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-gray-200 border-t-blue-600 mx-auto"}),_.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:_.jsx("span",{className:"text-2xl",children:""})})]}),_.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"A carregar o seu convite..."})]})}):!s||!l?_.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 px-4",children:_.jsx("div",{className:"text-center max-w-md",children:_.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[_.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),_.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Link Invlido"}),_.jsx("p",{className:"text-gray-600",children:"O link de confirmao no  vlido ou expirou. Por favor, contacte a organizao do evento."})]})})}):_.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-6 sm:py-12 px-4",children:_.jsxs("div",{className:"max-w-3xl mx-auto",children:[_.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden transform hover:scale-[1.01] transition-transform duration-300",children:[_.jsxs("div",{className:"relative h-48 sm:h-64 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 overflow-hidden",children:[l.imagem_url&&_.jsxs("div",{className:"absolute inset-0",children:[_.jsx("img",{src:l.imagem_url,alt:l.nome,className:"w-full h-full object-cover"}),_.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 via-black/50 to-black/60"})]}),!l.imagem_url&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"absolute inset-0 opacity-10",children:_.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("defs",{children:_.jsx("pattern",{id:"pattern",x:"0",y:"0",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:_.jsx("circle",{cx:"20",cy:"20",r:"2",fill:"white"})})}),_.jsx("rect",{width:"100%",height:"100%",fill:"url(#pattern)"})]})}),_.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white opacity-5 rounded-full -mr-32 -mt-32"}),_.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-white opacity-5 rounded-full -ml-24 -mb-24"})]}),_.jsxs("div",{className:"relative h-full flex flex-col items-center justify-center text-white px-6 text-center",children:[!l.imagem_url&&_.jsx("div",{className:"bg-white bg-opacity-20 backdrop-blur-sm rounded-full p-4 mb-4 animate-pulse",children:_.jsx("span",{className:"text-5xl sm:text-6xl",children:""})}),_.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2 drop-shadow-lg",children:l.nome}),_.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 text-sm sm:text-base text-blue-100",children:[_.jsxs("span",{className:"flex items-center gap-1 bg-white bg-opacity-20 px-3 py-1 rounded-full backdrop-blur-sm",children:[_.jsx("span",{children:""}),new Date(l.data).toLocaleDateString("pt-PT",{day:"numeric",month:"long",year:"numeric"})]}),_.jsxs("span",{className:"flex items-center gap-1 bg-white bg-opacity-20 px-3 py-1 rounded-full backdrop-blur-sm",children:[_.jsx("span",{children:""}),I(l.hora)]})]}),_.jsxs("p",{className:"mt-3 flex items-center gap-1 text-sm sm:text-base text-blue-100",children:[_.jsx("span",{children:""}),l.local]})]})]}),_.jsxs("div",{className:"p-6 sm:p-8",children:[_.jsxs("div",{className:"text-center mb-8",children:[_.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-full mb-4 shadow-lg",children:_.jsx("span",{className:"text-4xl",children:""})}),_.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:s.nome}),s.mesa?_.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-2 rounded-full",children:[_.jsx("span",{className:"text-xl",children:""}),_.jsxs("span",{className:"font-semibold text-blue-900",children:["Mesa ",s.mesa]})]}):_.jsx("p",{className:"text-sm text-gray-500 max-w-md mx-auto",children:"A sua mesa ser atribuda pela organizao aps a confirmao."})]}),!x&&!g?_.jsx("div",{className:"text-center",children:_.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 border-2 border-yellow-200 rounded-xl p-6 mb-6",children:[_.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"Ser uma honra contar com a sua presena! Por favor, confirme ou rejeite o convite clicando num dos botes abaixo."}),_.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[_.jsxs("button",{onClick:L,disabled:e,className:"group relative inline-flex items-center justify-center gap-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-4 rounded-xl text-lg font-semibold hover:from-green-600 hover:to-emerald-700 focus:outline-none focus:ring-4 focus:ring-green-500 focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[_.jsx("span",{className:"text-2xl",children:""}),_.jsx("span",{children:e?"A confirmar...":"Confirmar Presena"})]}),_.jsxs("button",{onClick:j,disabled:e,className:"group relative inline-flex items-center justify-center gap-2 bg-gradient-to-r from-red-500 to-rose-600 text-white px-8 py-4 rounded-xl text-lg font-semibold hover:from-red-600 hover:to-rose-700 focus:outline-none focus:ring-4 focus:ring-red-500 focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[_.jsx("span",{className:"text-2xl",children:""}),_.jsx("span",{children:e?"A processar...":"No Posso Comparecer"})]})]})]})}):x?_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6 text-center",children:[_.jsxs("div",{className:"inline-flex items-center justify-center gap-2 text-green-700 font-bold text-xl mb-2",children:[_.jsx("span",{className:"text-3xl animate-bounce",children:""}),_.jsx("span",{children:"Presena Confirmada!"})]}),_.jsx("p",{className:"text-green-600 mb-4",children:"Obrigado por confirmar a sua presena!"}),_.jsx("button",{onClick:j,disabled:e,className:"text-sm text-red-600 hover:text-red-700 underline",children:"Alterar resposta (no posso comparecer)"})]}),_.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-xl p-6 sm:p-8 border border-gray-200",children:[_.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[_.jsx("span",{className:"text-2xl",children:""}),_.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Seu QR Code para Check-in"})]}),_.jsx("div",{ref:N,className:"flex justify-center mb-6",children:_.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-xl border-4 border-blue-100",children:_.jsx(b_,{value:v,size:200,level:"H",includeMargin:!0})})}),_.jsx("p",{className:"text-center text-gray-600 mb-4 text-sm sm:text-base",children:"Apresente este QR Code na entrada do evento para fazer check-in rapidamente"}),_.jsxs("button",{onClick:R,className:"w-full sm:w-auto mx-auto flex items-center justify-center gap-2 px-6 py-3 border-2 border-blue-300 rounded-xl text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all duration-300 font-medium",children:[_.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Descarregar QR Code"]})]}),_.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("span",{className:"text-2xl flex-shrink-0",children:""}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-bold text-blue-900 mb-3 text-lg",children:"Informaes importantes:"}),_.jsxs("ul",{className:"space-y-2 text-blue-700",children:[_.jsxs("li",{className:"flex items-start gap-2",children:[_.jsx("span",{className:"text-blue-500 font-bold",children:""}),_.jsx("span",{children:"Guarde este QR Code no seu telemvel ou imprima-o"})]}),_.jsxs("li",{className:"flex items-start gap-2",children:[_.jsx("span",{className:"text-blue-500 font-bold",children:""}),_.jsx("span",{children:"Apresente-o na entrada para agilizar o check-in"})]}),_.jsxs("li",{className:"flex items-start gap-2",children:[_.jsx("span",{className:"text-blue-500 font-bold",children:""}),_.jsx("span",{children:"Cada QR Code  nico e intransmissvel"})]}),_.jsxs("li",{className:"flex items-start gap-2",children:[_.jsx("span",{className:"text-blue-500 font-bold",children:""}),_.jsx("span",{children:"Em caso de dvidas, contacte a organizao"})]})]})]})]})})]}):_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 border-2 border-red-200 rounded-xl p-6 text-center",children:[_.jsxs("div",{className:"inline-flex items-center justify-center gap-2 text-red-700 font-bold text-xl mb-2",children:[_.jsx("span",{className:"text-3xl",children:""}),_.jsx("span",{children:"Presena No Confirmada"})]}),_.jsx("p",{className:"text-red-600 mb-4",children:"Lamentamos que no possa estar presente!"}),_.jsx("button",{onClick:L,disabled:e,className:"text-sm text-green-600 hover:text-green-700 underline",children:"Alterar resposta (confirmar presena)"})]}),_.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-xl p-6 border border-gray-200 text-center",children:_.jsx("p",{className:"text-gray-600",children:"Caso mude de ideias, pode alterar a sua resposta a qualquer momento clicando no boto acima."})})]})]})]}),_.jsxs("p",{className:"text-center text-gray-500 text-sm mt-6",children:["Gestor de Eventos UTAD  ",new Date().getFullYear()]})]})})}var ge;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ge||(ge={}));var W0=new Map([[ge.QR_CODE,"QR_CODE"],[ge.AZTEC,"AZTEC"],[ge.CODABAR,"CODABAR"],[ge.CODE_39,"CODE_39"],[ge.CODE_93,"CODE_93"],[ge.CODE_128,"CODE_128"],[ge.DATA_MATRIX,"DATA_MATRIX"],[ge.MAXICODE,"MAXICODE"],[ge.ITF,"ITF"],[ge.EAN_13,"EAN_13"],[ge.EAN_8,"EAN_8"],[ge.PDF_417,"PDF_417"],[ge.RSS_14,"RSS_14"],[ge.RSS_EXPANDED,"RSS_EXPANDED"],[ge.UPC_A,"UPC_A"],[ge.UPC_E,"UPC_E"],[ge.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),H0;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(H0||(H0={}));function S_(t){return Object.values(ge).includes(t)}var Dl;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Dl||(Dl={}));var I_=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Dl.SCAN_TYPE_CAMERA,Dl.SCAN_TYPE_FILE],t}(),Lm=function(){function t(e,r){this.format=e,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!W0.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,W0.get(e))},t}(),G0=function(){function t(){}return t.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),xd;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(xd||(xd={}));var N_=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:xd.UNKWOWN_ERROR}},t}(),T_=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Cn(t){return typeof t>"u"||t===null}var bs=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),Bm=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var s=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(s,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(a),h=Object.keys(e),x=0,p=h;x<p.length;x++){var g=p[x];if(l.has(g))return r.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},t}(),wd={exports:{}};(function(t,e){(function(r,s){s(e)})(us,function(r){function s(A){return A==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,n){A.__proto__=n}||function(A,n){for(var i in n)n.hasOwnProperty(i)&&(A[i]=n[i])};function l(A,n){a(A,n);function i(){this.constructor=A}A.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}function h(A,n){var i=Object.setPrototypeOf;i?i(A,n):A.__proto__=n}function x(A,n){n===void 0&&(n=A.constructor);var i=Error.captureStackTrace;i&&i(A,n)}var p=function(A){l(n,A);function n(i){var o=this.constructor,u=A.call(this,i)||this;return Object.defineProperty(u,"name",{value:o.name,enumerable:!1}),h(u,o.prototype),x(u),u}return n}(Error);class g extends p{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}g.kind="Exception";class y extends g{}y.kind="ArgumentException";class v extends g{}v.kind="IllegalArgumentException";class b{constructor(n){if(this.binarizer=n,n===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,i){return this.binarizer.getBlackRow(n,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,i,o,u){const c=this.binarizer.getLuminanceSource().crop(n,i,o,u);return new b(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new b(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new b(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class N extends g{static getChecksumInstance(){return new N}}N.kind="ChecksumException";class O{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class L{static arraycopy(n,i,o,u,c){for(;c--;)o[u++]=n[i++]}static currentTimeMillis(){return Date.now()}}class j extends g{}j.kind="IndexOutOfBoundsException";class k extends j{constructor(n=void 0,i=void 0){super(i),this.index=n,this.message=i}}k.kind="ArrayIndexOutOfBoundsException";class R{static fill(n,i){for(let o=0,u=n.length;o<u;o++)n[o]=i}static fillWithin(n,i,o,u){R.rangeCheck(n.length,i,o);for(let c=i;c<o;c++)n[c]=u}static rangeCheck(n,i,o){if(i>o)throw new v("fromIndex("+i+") > toIndex("+o+")");if(i<0)throw new k(i);if(o>n)throw new k(o)}static asList(...n){return n}static create(n,i,o){return Array.from({length:n}).map(c=>Array.from({length:i}).fill(o))}static createInt32Array(n,i,o){return Array.from({length:n}).map(c=>Int32Array.from({length:i}).fill(o))}static equals(n,i){if(!n||!i||!n.length||!i.length||n.length!==i.length)return!1;for(let o=0,u=n.length;o<u;o++)if(n[o]!==i[o])return!1;return!0}static hashCode(n){if(n===null)return 0;let i=1;for(const o of n)i=31*i+o;return i}static fillUint8Array(n,i){for(let o=0;o!==n.length;o++)n[o]=i}static copyOf(n,i){return n.slice(0,i)}static copyOfUint8Array(n,i){if(n.length<=i){const o=new Uint8Array(i);return o.set(n),o}return n.slice(0,i)}static copyOfRange(n,i,o){const u=o-i,c=new Int32Array(u);return L.arraycopy(n,i,c,0,u),c}static binarySearch(n,i,o){o===void 0&&(o=R.numberComparator);let u=0,c=n.length-1;for(;u<=c;){const d=c+u>>1,f=o(i,n[d]);if(f>0)u=d+1;else if(f<0)c=d-1;else return d}return-u-1}static numberComparator(n,i){return n-i}}class I{static numberOfTrailingZeros(n){let i;if(n===0)return 32;let o=31;return i=n<<16,i!==0&&(o-=16,n=i),i=n<<8,i!==0&&(o-=8,n=i),i=n<<4,i!==0&&(o-=4,n=i),i=n<<2,i!==0&&(o-=2,n=i),o-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let i=1;return n>>>16||(i+=16,n<<=16),n>>>24||(i+=8,n<<=8),n>>>28||(i+=4,n<<=4),n>>>30||(i+=2,n<<=2),i-=n>>>31,i}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,i){return Math.trunc(n/i)}static parseInt(n,i=void 0){return parseInt(n,i)}}I.MIN_VALUE_32_BITS=-2147483648,I.MAX_VALUE=Number.MAX_SAFE_INTEGER;class B{constructor(n,i){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,i==null?this.bits=B.makeArray(n):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const i=B.makeArray(n);L.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const i=this.size;if(n>=i)return i;const o=this.bits;let u=Math.floor(n/32),c=o[u];c&=~((1<<(n&31))-1);const d=o.length;for(;c===0;){if(++u===d)return i;c=o[u]}const f=u*32+I.numberOfTrailingZeros(c);return f>i?i:f}getNextUnset(n){const i=this.size;if(n>=i)return i;const o=this.bits;let u=Math.floor(n/32),c=~o[u];c&=~((1<<(n&31))-1);const d=o.length;for(;c===0;){if(++u===d)return i;c=~o[u]}const f=u*32+I.numberOfTrailingZeros(c);return f>i?i:f}setBulk(n,i){this.bits[Math.floor(n/32)]=i}setRange(n,i){if(i<n||n<0||i>this.size)throw new v;if(i===n)return;i--;const o=Math.floor(n/32),u=Math.floor(i/32),c=this.bits;for(let d=o;d<=u;d++){const f=d>o?0:n&31,w=(2<<(d<u?31:i&31))-(1<<f);c[d]|=w}}clear(){const n=this.bits.length,i=this.bits;for(let o=0;o<n;o++)i[o]=0}isRange(n,i,o){if(i<n||n<0||i>this.size)throw new v;if(i===n)return!0;i--;const u=Math.floor(n/32),c=Math.floor(i/32),d=this.bits;for(let f=u;f<=c;f++){const m=f>u?0:n&31,E=(2<<(f<c?31:i&31))-(1<<m)&4294967295;if((d[f]&E)!==(o?E:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,i){if(i<0||i>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let o=i;o>0;o--)this.appendBit((n>>o-1&1)===1)}appendBitArray(n){const i=n.size;this.ensureCapacity(this.size+i);for(let o=0;o<i;o++)this.appendBit(n.get(o))}xor(n){if(this.size!==n.size)throw new v("Sizes don't match");const i=this.bits;for(let o=0,u=i.length;o<u;o++)i[o]^=n.bits[o]}toBytes(n,i,o,u){for(let c=0;c<u;c++){let d=0;for(let f=0;f<8;f++)this.get(n)&&(d|=1<<7-f),n++;i[o+c]=d}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),o=i+1,u=this.bits;for(let c=0;c<o;c++){let d=u[c];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,n[i-c]=d}if(this.size!==o*32){const c=o*32-this.size;let d=n[0]>>>c;for(let f=1;f<o;f++){const m=n[f];d|=m<<32-c,n[f-1]=d,d=m>>>c}n[o-1]=d}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof B))return!1;const i=n;return this.size===i.size&&R.equals(this.bits,i.bits)}hashCode(){return 31*this.size+R.hashCode(this.bits)}toString(){let n="";for(let i=0,o=this.size;i<o;i++)i&7||(n+=" "),n+=this.get(i)?"X":".";return n}clone(){return new B(this.size,this.bits.slice())}}var W;(function(A){A[A.OTHER=0]="OTHER",A[A.PURE_BARCODE=1]="PURE_BARCODE",A[A.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",A[A.TRY_HARDER=3]="TRY_HARDER",A[A.CHARACTER_SET=4]="CHARACTER_SET",A[A.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",A[A.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",A[A.ASSUME_GS1=7]="ASSUME_GS1",A[A.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",A[A.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",A[A.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(W||(W={}));var $=W;class U extends g{static getFormatInstance(){return new U}}U.kind="FormatException";var D;(function(A){A[A.Cp437=0]="Cp437",A[A.ISO8859_1=1]="ISO8859_1",A[A.ISO8859_2=2]="ISO8859_2",A[A.ISO8859_3=3]="ISO8859_3",A[A.ISO8859_4=4]="ISO8859_4",A[A.ISO8859_5=5]="ISO8859_5",A[A.ISO8859_6=6]="ISO8859_6",A[A.ISO8859_7=7]="ISO8859_7",A[A.ISO8859_8=8]="ISO8859_8",A[A.ISO8859_9=9]="ISO8859_9",A[A.ISO8859_10=10]="ISO8859_10",A[A.ISO8859_11=11]="ISO8859_11",A[A.ISO8859_13=12]="ISO8859_13",A[A.ISO8859_14=13]="ISO8859_14",A[A.ISO8859_15=14]="ISO8859_15",A[A.ISO8859_16=15]="ISO8859_16",A[A.SJIS=16]="SJIS",A[A.Cp1250=17]="Cp1250",A[A.Cp1251=18]="Cp1251",A[A.Cp1252=19]="Cp1252",A[A.Cp1256=20]="Cp1256",A[A.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",A[A.UTF8=22]="UTF8",A[A.ASCII=23]="ASCII",A[A.Big5=24]="Big5",A[A.GB18030=25]="GB18030",A[A.EUC_KR=26]="EUC_KR"})(D||(D={}));class C{constructor(n,i,o,...u){this.valueIdentifier=n,this.name=o,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=u,C.VALUE_IDENTIFIER_TO_ECI.set(n,this),C.NAME_TO_ECI.set(o,this);const c=this.values;for(let d=0,f=c.length;d!==f;d++){const m=c[d];C.VALUES_TO_ECI.set(m,this)}for(const d of u)C.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new U("incorect value");const i=C.VALUES_TO_ECI.get(n);if(i===void 0)throw new U("incorect value");return i}static getCharacterSetECIByName(n){const i=C.NAME_TO_ECI.get(n);if(i===void 0)throw new U("incorect value");return i}equals(n){if(!(n instanceof C))return!1;const i=n;return this.getName()===i.getName()}}C.VALUE_IDENTIFIER_TO_ECI=new Map,C.VALUES_TO_ECI=new Map,C.NAME_TO_ECI=new Map,C.Cp437=new C(D.Cp437,Int32Array.from([0,2]),"Cp437"),C.ISO8859_1=new C(D.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),C.ISO8859_2=new C(D.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),C.ISO8859_3=new C(D.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),C.ISO8859_4=new C(D.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),C.ISO8859_5=new C(D.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),C.ISO8859_6=new C(D.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),C.ISO8859_7=new C(D.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),C.ISO8859_8=new C(D.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),C.ISO8859_9=new C(D.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),C.ISO8859_10=new C(D.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),C.ISO8859_11=new C(D.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),C.ISO8859_13=new C(D.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),C.ISO8859_14=new C(D.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),C.ISO8859_15=new C(D.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),C.ISO8859_16=new C(D.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),C.SJIS=new C(D.SJIS,20,"SJIS","Shift_JIS"),C.Cp1250=new C(D.Cp1250,21,"Cp1250","windows-1250"),C.Cp1251=new C(D.Cp1251,22,"Cp1251","windows-1251"),C.Cp1252=new C(D.Cp1252,23,"Cp1252","windows-1252"),C.Cp1256=new C(D.Cp1256,24,"Cp1256","windows-1256"),C.UnicodeBigUnmarked=new C(D.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),C.UTF8=new C(D.UTF8,26,"UTF8","UTF-8"),C.ASCII=new C(D.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),C.Big5=new C(D.Big5,28,"Big5"),C.GB18030=new C(D.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),C.EUC_KR=new C(D.EUC_KR,30,"EUC_KR","EUC-KR");class F extends g{}F.kind="UnsupportedOperationException";class Y{static decode(n,i){const o=this.encodingName(i);return this.customDecoder?this.customDecoder(n,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(n,o):new TextDecoder(o).decode(n)}static shouldDecodeOnFallback(n){return!Y.isBrowser()&&n==="ISO-8859-1"}static encode(n,i){const o=this.encodingName(i);return this.customEncoder?this.customEncoder(n,o):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof C?n:C.getCharacterSetECIByName(n)}static decodeFallback(n,i){const o=this.encodingCharacterSet(i);if(Y.isDecodeFallbackSupported(o)){let u="";for(let c=0,d=n.length;c<d;c++){let f=n[c].toString(16);f.length<2&&(f="0"+f),u+="%"+f}return decodeURIComponent(u)}if(o.equals(C.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new F(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(C.UTF8)||n.equals(C.ISO8859_1)||n.equals(C.ASCII)}static encodeFallback(n){const o=btoa(unescape(encodeURIComponent(n))).split(""),u=[];for(let c=0;c<o.length;c++)u.push(o[c].charCodeAt(0));return new Uint8Array(u)}}class K{static castAsNonUtf8Char(n,i=null){const o=i?i.getName():this.ISO88591;return Y.decode(new Uint8Array([n]),o)}static guessEncoding(n,i){if(i!=null&&i.get($.CHARACTER_SET)!==void 0)return i.get($.CHARACTER_SET).toString();const o=n.length;let u=!0,c=!0,d=!0,f=0,m=0,w=0,E=0,S=0,T=0,M=0,z=0,V=0,H=0,Q=0;const ie=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let oe=0;oe<o&&(u||c||d);oe++){const ee=n[oe]&255;d&&(f>0?ee&128?f--:d=!1:ee&128&&(ee&64?(f++,ee&32?(f++,ee&16?(f++,ee&8?d=!1:E++):w++):m++):d=!1)),u&&(ee>127&&ee<160?u=!1:ee>159&&(ee<192||ee===215||ee===247)&&Q++),c&&(S>0?ee<64||ee===127||ee>252?c=!1:S--:ee===128||ee===160||ee>239?c=!1:ee>160&&ee<224?(T++,z=0,M++,M>V&&(V=M)):ee>127?(S++,M=0,z++,z>H&&(H=z)):(M=0,z=0))}return d&&f>0&&(d=!1),c&&S>0&&(c=!1),d&&(ie||m+w+E>0)?K.UTF8:c&&(K.ASSUME_SHIFT_JIS||V>=3||H>=3)?K.SHIFT_JIS:u&&c?V===2&&T===2||Q*10>=o?K.SHIFT_JIS:K.ISO88591:u?K.ISO88591:c?K.SHIFT_JIS:d?K.UTF8:K.PLATFORM_DEFAULT_ENCODING}static format(n,...i){let o=-1;function u(d,f,m,w,E,S){if(d==="%%")return"%";if(i[++o]===void 0)return;d=w?parseInt(w.substr(1)):void 0;let T=E?parseInt(E.substr(1)):void 0,M;switch(S){case"s":M=i[o];break;case"c":M=i[o][0];break;case"f":M=parseFloat(i[o]).toFixed(d);break;case"p":M=parseFloat(i[o]).toPrecision(d);break;case"e":M=parseFloat(i[o]).toExponential(d);break;case"x":M=parseInt(i[o]).toString(T||16);break;case"d":M=parseFloat(parseInt(i[o],T||10).toPrecision(d)).toFixed(0);break}M=typeof M=="object"?JSON.stringify(M):(+M).toString(T);let z=parseInt(m),V=m&&m[0]+""=="0"?"0":" ";for(;M.length<z;)M=f!==void 0?M+V:V+M;return M}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(c,u)}static getBytes(n,i){return Y.encode(n,i)}static getCharCode(n,i=0){return n.charCodeAt(i)}static getCharAt(n){return String.fromCharCode(n)}}K.SHIFT_JIS=C.SJIS.getName(),K.GB2312="GB2312",K.ISO88591=C.ISO8859_1.getName(),K.EUC_JP="EUC_JP",K.UTF8=C.UTF8.getName(),K.PLATFORM_DEFAULT_ENCODING=K.UTF8,K.ASSUME_SHIFT_JIS=!1;class se{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=K.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,i,o){for(let u=i;i<i+o;u++)this.append(n[u]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,i){this.value=this.value.substr(0,n)+i+this.value.substr(n+1)}substring(n,i){return this.value.substring(n,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,i){this.value=this.value.substr(0,n)+i+this.value.substr(n+i.length)}}class Oe{constructor(n,i,o,u){if(this.width=n,this.height=i,this.rowSize=o,this.bits=u,i==null&&(i=n),this.height=i,n<1||i<1)throw new v("Both dimensions must be greater than 0");o==null&&(o=Math.floor((n+31)/32)),this.rowSize=o,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const i=n.length,o=n[0].length,u=new Oe(o,i);for(let c=0;c<i;c++){const d=n[c];for(let f=0;f<o;f++)d[f]&&u.set(f,c)}return u}static parseFromString(n,i,o){if(n===null)throw new v("stringRepresentation cannot be null");const u=new Array(n.length);let c=0,d=0,f=-1,m=0,w=0;for(;w<n.length;)if(n.charAt(w)===`
`||n.charAt(w)==="\r"){if(c>d){if(f===-1)f=c-d;else if(c-d!==f)throw new v("row lengths do not match");d=c,m++}w++}else if(n.substring(w,w+i.length)===i)w+=i.length,u[c]=!0,c++;else if(n.substring(w,w+o.length)===o)w+=o.length,u[c]=!1,c++;else throw new v("illegal character encountered: "+n.substring(w));if(c>d){if(f===-1)f=c-d;else if(c-d!==f)throw new v("row lengths do not match");m++}const E=new Oe(f,m);for(let S=0;S<c;S++)u[S]&&E.set(Math.floor(S%f),Math.floor(S/f));return E}get(n,i){const o=i*this.rowSize+Math.floor(n/32);return(this.bits[o]>>>(n&31)&1)!==0}set(n,i){const o=i*this.rowSize+Math.floor(n/32);this.bits[o]|=1<<(n&31)&4294967295}unset(n,i){const o=i*this.rowSize+Math.floor(n/32);this.bits[o]&=~(1<<(n&31)&4294967295)}flip(n,i){const o=i*this.rowSize+Math.floor(n/32);this.bits[o]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new v("input matrix dimensions do not match");const i=new B(Math.floor(this.width/32)+1),o=this.rowSize,u=this.bits;for(let c=0,d=this.height;c<d;c++){const f=c*o,m=n.getRow(c,i).getBitArray();for(let w=0;w<o;w++)u[f+w]^=m[w]}}clear(){const n=this.bits,i=n.length;for(let o=0;o<i;o++)n[o]=0}setRegion(n,i,o,u){if(i<0||n<0)throw new v("Left and top must be nonnegative");if(u<1||o<1)throw new v("Height and width must be at least 1");const c=n+o,d=i+u;if(d>this.height||c>this.width)throw new v("The region must fit inside the matrix");const f=this.rowSize,m=this.bits;for(let w=i;w<d;w++){const E=w*f;for(let S=n;S<c;S++)m[E+Math.floor(S/32)]|=1<<(S&31)&4294967295}}getRow(n,i){i==null||i.getSize()<this.width?i=new B(this.width):i.clear();const o=this.rowSize,u=this.bits,c=n*o;for(let d=0;d<o;d++)i.setBulk(d*32,u[c+d]);return i}setRow(n,i){L.arraycopy(i.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),i=this.getHeight();let o=new B(n),u=new B(n);for(let c=0,d=Math.floor((i+1)/2);c<d;c++)o=this.getRow(c,o),u=this.getRow(i-1-c,u),o.reverse(),u.reverse(),this.setRow(c,u),this.setRow(i-1-c,o)}getEnclosingRectangle(){const n=this.width,i=this.height,o=this.rowSize,u=this.bits;let c=n,d=i,f=-1,m=-1;for(let w=0;w<i;w++)for(let E=0;E<o;E++){const S=u[w*o+E];if(S!==0){if(w<d&&(d=w),w>m&&(m=w),E*32<c){let T=0;for(;!(S<<31-T&4294967295);)T++;E*32+T<c&&(c=E*32+T)}if(E*32+31>f){let T=31;for(;!(S>>>T);)T--;E*32+T>f&&(f=E*32+T)}}}return f<c||m<d?null:Int32Array.from([c,d,f-c+1,m-d+1])}getTopLeftOnBit(){const n=this.rowSize,i=this.bits;let o=0;for(;o<i.length&&i[o]===0;)o++;if(o===i.length)return null;const u=o/n;let c=o%n*32;const d=i[o];let f=0;for(;!(d<<31-f&4294967295);)f++;return c+=f,Int32Array.from([c,u])}getBottomRightOnBit(){const n=this.rowSize,i=this.bits;let o=i.length-1;for(;o>=0&&i[o]===0;)o--;if(o<0)return null;const u=Math.floor(o/n);let c=Math.floor(o%n)*32;const d=i[o];let f=31;for(;!(d>>>f);)f--;return c+=f,Int32Array.from([c,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof Oe))return!1;const i=n;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&R.equals(this.bits,i.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+R.hashCode(this.bits),n}toString(n="X ",i="  ",o=`
`){return this.buildToString(n,i,o)}buildToString(n,i,o){let u=new se;for(let c=0,d=this.height;c<d;c++){for(let f=0,m=this.width;f<m;f++)u.append(this.get(f,c)?n:i);u.append(o)}return u.toString()}clone(){return new Oe(this.width,this.height,this.rowSize,this.bits.slice())}}class q extends g{static getNotFoundInstance(){return new q}}q.kind="NotFoundException";class je extends O{constructor(n){super(n),this.luminances=je.EMPTY,this.buckets=new Int32Array(je.LUMINANCE_BUCKETS)}getBlackRow(n,i){const o=this.getLuminanceSource(),u=o.getWidth();i==null||i.getSize()<u?i=new B(u):i.clear(),this.initArrays(u);const c=o.getRow(n,this.luminances),d=this.buckets;for(let m=0;m<u;m++)d[(c[m]&255)>>je.LUMINANCE_SHIFT]++;const f=je.estimateBlackPoint(d);if(u<3)for(let m=0;m<u;m++)(c[m]&255)<f&&i.set(m);else{let m=c[0]&255,w=c[1]&255;for(let E=1;E<u-1;E++){const S=c[E+1]&255;(w*4-m-S)/2<f&&i.set(E),m=w,w=S}}return i}getBlackMatrix(){const n=this.getLuminanceSource(),i=n.getWidth(),o=n.getHeight(),u=new Oe(i,o);this.initArrays(i);const c=this.buckets;for(let m=1;m<5;m++){const w=Math.floor(o*m/5),E=n.getRow(w,this.luminances),S=Math.floor(i*4/5);for(let T=Math.floor(i/5);T<S;T++){const M=E[T]&255;c[M>>je.LUMINANCE_SHIFT]++}}const d=je.estimateBlackPoint(c),f=n.getMatrix();for(let m=0;m<o;m++){const w=m*i;for(let E=0;E<i;E++)(f[w+E]&255)<d&&u.set(E,m)}return u}createBinarizer(n){return new je(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const i=this.buckets;for(let o=0;o<je.LUMINANCE_BUCKETS;o++)i[o]=0}static estimateBlackPoint(n){const i=n.length;let o=0,u=0,c=0;for(let E=0;E<i;E++)n[E]>c&&(u=E,c=n[E]),n[E]>o&&(o=n[E]);let d=0,f=0;for(let E=0;E<i;E++){const S=E-u,T=n[E]*S*S;T>f&&(d=E,f=T)}if(u>d){const E=u;u=d,d=E}if(d-u<=i/16)throw new q;let m=d-1,w=-1;for(let E=d-1;E>u;E--){const S=E-u,T=S*S*(d-E)*(o-n[E]);T>w&&(m=E,w=T)}return m<<je.LUMINANCE_SHIFT}}je.LUMINANCE_BITS=5,je.LUMINANCE_SHIFT=8-je.LUMINANCE_BITS,je.LUMINANCE_BUCKETS=1<<je.LUMINANCE_BITS,je.EMPTY=Uint8ClampedArray.from([0]);class le extends je{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),i=n.getWidth(),o=n.getHeight();if(i>=le.MINIMUM_DIMENSION&&o>=le.MINIMUM_DIMENSION){const u=n.getMatrix();let c=i>>le.BLOCK_SIZE_POWER;i&le.BLOCK_SIZE_MASK&&c++;let d=o>>le.BLOCK_SIZE_POWER;o&le.BLOCK_SIZE_MASK&&d++;const f=le.calculateBlackPoints(u,c,d,i,o),m=new Oe(i,o);le.calculateThresholdForBlock(u,c,d,i,o,f,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new le(n)}static calculateThresholdForBlock(n,i,o,u,c,d,f){const m=c-le.BLOCK_SIZE,w=u-le.BLOCK_SIZE;for(let E=0;E<o;E++){let S=E<<le.BLOCK_SIZE_POWER;S>m&&(S=m);const T=le.cap(E,2,o-3);for(let M=0;M<i;M++){let z=M<<le.BLOCK_SIZE_POWER;z>w&&(z=w);const V=le.cap(M,2,i-3);let H=0;for(let ie=-2;ie<=2;ie++){const oe=d[T+ie];H+=oe[V-2]+oe[V-1]+oe[V]+oe[V+1]+oe[V+2]}const Q=H/25;le.thresholdBlock(n,z,S,Q,u,f)}}}static cap(n,i,o){return n<i?i:n>o?o:n}static thresholdBlock(n,i,o,u,c,d){for(let f=0,m=o*c+i;f<le.BLOCK_SIZE;f++,m+=c)for(let w=0;w<le.BLOCK_SIZE;w++)(n[m+w]&255)<=u&&d.set(i+w,o+f)}static calculateBlackPoints(n,i,o,u,c){const d=c-le.BLOCK_SIZE,f=u-le.BLOCK_SIZE,m=new Array(o);for(let w=0;w<o;w++){m[w]=new Int32Array(i);let E=w<<le.BLOCK_SIZE_POWER;E>d&&(E=d);for(let S=0;S<i;S++){let T=S<<le.BLOCK_SIZE_POWER;T>f&&(T=f);let M=0,z=255,V=0;for(let Q=0,ie=E*u+T;Q<le.BLOCK_SIZE;Q++,ie+=u){for(let oe=0;oe<le.BLOCK_SIZE;oe++){const ee=n[ie+oe]&255;M+=ee,ee<z&&(z=ee),ee>V&&(V=ee)}if(V-z>le.MIN_DYNAMIC_RANGE)for(Q++,ie+=u;Q<le.BLOCK_SIZE;Q++,ie+=u)for(let oe=0;oe<le.BLOCK_SIZE;oe++)M+=n[ie+oe]&255}let H=M>>le.BLOCK_SIZE_POWER*2;if(V-z<=le.MIN_DYNAMIC_RANGE&&(H=z/2,w>0&&S>0)){const Q=(m[w-1][S]+2*m[w][S-1]+m[w-1][S-1])/4;z<Q&&(H=Q)}m[w][S]=H}}return m}}le.BLOCK_SIZE_POWER=3,le.BLOCK_SIZE=1<<le.BLOCK_SIZE_POWER,le.BLOCK_SIZE_MASK=le.BLOCK_SIZE-1,le.MINIMUM_DIMENSION=le.BLOCK_SIZE*5,le.MIN_DYNAMIC_RANGE=24;class re{constructor(n,i){this.width=n,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,i,o,u){throw new F("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new F("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new F("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let i=new se;for(let o=0;o<this.height;o++){const u=this.getRow(o,n);for(let c=0;c<this.width;c++){const d=u[c]&255;let f;d<64?f="#":d<128?f="+":d<192?f=".":f=" ",i.append(f)}i.append(`
`)}return i.toString()}}class te extends re{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,i){const o=this.delegate.getRow(n,i),u=this.getWidth();for(let c=0;c<u;c++)o[c]=255-(o[c]&255);return o}getMatrix(){const n=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(i);for(let u=0;u<i;u++)o[u]=255-(n[u]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(n,i,o,u){return new te(this.delegate.crop(n,i,o,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new te(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new te(this.delegate.rotateCounterClockwise45())}}class xe extends re{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=xe.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const i=n.getContext("2d").getImageData(0,0,n.width,n.height);return xe.toGrayscaleBuffer(i.data,n.width,n.height)}static toGrayscaleBuffer(n,i,o){const u=new Uint8ClampedArray(i*o);for(let c=0,d=0,f=n.length;c<f;c+=4,d++){let m;if(n[c+3]===0)m=255;else{const E=n[c],S=n[c+1],T=n[c+2];m=306*E+601*S+117*T+512>>10}u[d]=m}return u}getRow(n,i){if(n<0||n>=this.getHeight())throw new v("Requested row is outside the image: "+n);const o=this.getWidth(),u=n*o;return i===null?i=this.buffer.slice(u,u+o):(i.length<o&&(i=new Uint8ClampedArray(o)),i.set(this.buffer.slice(u,u+o))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,i,o,u){return super.crop(n,i,o,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const i=this.getTempCanvasElement(),o=i.getContext("2d"),u=n*xe.DEGREE_TO_RADIANS,c=this.canvas.width,d=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(u))*c+Math.abs(Math.sin(u))*d),m=Math.ceil(Math.abs(Math.sin(u))*c+Math.abs(Math.cos(u))*d);return i.width=f,i.height=m,o.translate(f/2,m/2),o.rotate(u),o.drawImage(this.canvas,c/-2,d/-2),this.buffer=xe.makeBufferFromCanvasImageData(i),this}invert(){return new te(this)}}xe.DEGREE_TO_RADIANS=Math.PI/180;class me{constructor(n,i,o){this.deviceId=n,this.label=i,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ce=(globalThis||us||self||window||void 0)&&(globalThis||us||self||window||void 0).__awaiter||function(A,n,i,o){function u(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function f(E){try{w(o.next(E))}catch(S){d(S)}}function m(E){try{w(o.throw(E))}catch(S){d(S)}}function w(E){E.done?c(E.value):u(E.value).then(f,m)}w((o=o.apply(A,n||[])).next())})};class he{constructor(n,i=500,o){this.reader=n,this.timeBetweenScansMillis=i,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return ce(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const o of n){const u=o.kind==="video"?"videoinput":o.kind;if(u!=="videoinput")continue;const c=o.deviceId||o.id,d=o.label||`Video device ${i.length+1}`,f=o.groupId,m={deviceId:c,label:d,kind:u,groupId:f};i.push(m)}return i})}getVideoInputDevices(){return ce(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new me(i.deviceId,i.label))})}findDeviceById(n){return ce(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(o=>o.deviceId===n):null})}decodeFromInputVideoDevice(n,i){return ce(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,i)})}decodeOnceFromVideoDevice(n,i){return ce(this,void 0,void 0,function*(){this.reset();let o;n?o={deviceId:{exact:n}}:o={facingMode:"environment"};const u={video:o};return yield this.decodeOnceFromConstraints(u,i)})}decodeOnceFromConstraints(n,i){return ce(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(o,i)})}decodeOnceFromStream(n,i){return ce(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(n,i);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(n,i,o){return ce(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,i,o)})}decodeFromVideoDevice(n,i,o){return ce(this,void 0,void 0,function*(){let u;n?u={deviceId:{exact:n}}:u={facingMode:"environment"};const c={video:u};return yield this.decodeFromConstraints(c,i,o)})}decodeFromConstraints(n,i,o){return ce(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(u,i,o)})}decodeFromStream(n,i,o){return ce(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(n,i);return yield this.decodeContinuously(u,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,i){return ce(this,void 0,void 0,function*(){const o=this.prepareVideoElement(i);return this.addVideoSource(o,n),this.videoElement=o,this.stream=n,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(n){return new Promise((i,o)=>this.playVideoOnLoad(n,()=>i()))}playVideoOnLoad(n,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",i),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return ce(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,i){const o=document.getElementById(n);if(!o)throw new y(`element with id '${n}' not found`);if(o.nodeName.toLowerCase()!==i.toLowerCase())throw new y(`element with id '${n}' must be an ${i} element`);return o}decodeFromImage(n,i){if(!n&&!i)throw new y("either imageElement with a src set or an url must be provided");return i&&!n?this.decodeFromImageUrl(i):this.decodeFromImageElement(n)}decodeFromVideo(n,i){if(!n&&!i)throw new y("Either an element with a src set or an URL must be provided");return i&&!n?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,i,o){if(n===void 0&&i===void 0)throw new y("Either an element with a src set or an URL must be provided");return i&&!n?this.decodeFromVideoUrlContinuously(i,o):this.decodeFromVideoElementContinuously(n,o)}decodeFromImageElement(n){if(!n)throw new y("An image element must be provided.");this.reset();const i=this.prepareImageElement(n);this.imageElement=i;let o;return this.isImageLoaded(i)?o=this.decodeOnce(i,!1,!0):o=this._decodeOnLoadImage(i),o}decodeFromVideoElement(n){const i=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(n,i){const o=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(o,i)}_decodeFromVideoElementSetup(n){if(!n)throw new y("A video element must be provided.");this.reset();const i=this.prepareVideoElement(n);return this.videoElement=i,i}decodeFromImageUrl(n){if(!n)throw new y("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const o=this._decodeOnLoadImage(i);return i.src=n,o}decodeFromVideoUrl(n){if(!n)throw new y("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),o=this.decodeFromVideoElement(i);return i.src=n,o}decodeFromVideoUrlContinuously(n,i){if(!n)throw new y("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(o,i);return o.src=n,u}_decodeOnLoadImage(n){return new Promise((i,o)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(i,o),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return ce(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,i){return ce(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,i)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let i;return typeof n>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof n=="string"&&(i=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(i=n),i}prepareVideoElement(n){let i;return!n&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof n=="string"&&(i=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(i=n),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(n,i=!0,o=!0){this._stopAsyncDecode=!1;const u=(c,d)=>{if(this._stopAsyncDecode){d(new q("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const f=this.decode(n);c(f)}catch(f){const m=i&&f instanceof q,E=(f instanceof N||f instanceof U)&&o;if(m||E)return setTimeout(u,this._timeBetweenDecodingAttempts,c,d);d(f)}};return new Promise((c,d)=>u(c,d))}decodeContinuously(n,i){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(n);i(u,null),setTimeout(o,this.timeBetweenScansMillis)}catch(u){i(null,u);const c=u instanceof N||u instanceof U,d=u instanceof q;(c||d)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(n){const i=this.createBinaryBitmap(n);return this.decodeBitmap(i)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,i,o){i||(i={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(n,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(n,i,o=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(n,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const i=this.getCaptureCanvas(n),o=new xe(i),u=new le(o);return new b(u)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const i=this.createCaptureCanvas(n);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let o,u;return typeof n<"u"&&(n instanceof HTMLVideoElement?(o=n.videoWidth,u=n.videoHeight):n instanceof HTMLImageElement&&(o=n.naturalWidth||n.width,u=n.naturalHeight||n.height)),i.style.width=o+"px",i.style.height=u+"px",i.width=o,i.height=u,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,i){try{n.srcObject=i}catch{n.src=URL.createObjectURL(i)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class ke{constructor(n,i,o=i==null?0:8*i.length,u,c,d=L.currentTimeMillis()){this.text=n,this.rawBytes=i,this.numBits=o,this.resultPoints=u,this.format=c,this.timestamp=d,this.text=n,this.rawBytes=i,o==null?this.numBits=i==null?0:8*i.length:this.numBits=o,this.resultPoints=u,this.format=c,this.resultMetadata=null,d==null?this.timestamp=L.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,i)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const i=this.resultPoints;if(i===null)this.resultPoints=n;else if(n!==null&&n.length>0){const o=new Array(i.length+n.length);L.arraycopy(i,0,o,0,i.length),L.arraycopy(n,0,o,i.length,n.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Je;(function(A){A[A.AZTEC=0]="AZTEC",A[A.CODABAR=1]="CODABAR",A[A.CODE_39=2]="CODE_39",A[A.CODE_93=3]="CODE_93",A[A.CODE_128=4]="CODE_128",A[A.DATA_MATRIX=5]="DATA_MATRIX",A[A.EAN_8=6]="EAN_8",A[A.EAN_13=7]="EAN_13",A[A.ITF=8]="ITF",A[A.MAXICODE=9]="MAXICODE",A[A.PDF_417=10]="PDF_417",A[A.QR_CODE=11]="QR_CODE",A[A.RSS_14=12]="RSS_14",A[A.RSS_EXPANDED=13]="RSS_EXPANDED",A[A.UPC_A=14]="UPC_A",A[A.UPC_E=15]="UPC_E",A[A.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Je||(Je={}));var ue=Je,Nt;(function(A){A[A.OTHER=0]="OTHER",A[A.ORIENTATION=1]="ORIENTATION",A[A.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",A[A.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",A[A.ISSUE_NUMBER=4]="ISSUE_NUMBER",A[A.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",A[A.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",A[A.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",A[A.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",A[A.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",A[A.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Nt||(Nt={}));var be=Nt;class Fe{constructor(n,i,o,u,c=-1,d=-1){this.rawBytes=n,this.text=i,this.byteSegments=o,this.ecLevel=u,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=d,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class et{exp(n){return this.expTable[n]}log(n){if(n===0)throw new v;return this.logTable[n]}static addOrSubtract(n,i){return n^i}}class Se{constructor(n,i){if(i.length===0)throw new v;this.field=n;const o=i.length;if(o>1&&i[0]===0){let u=1;for(;u<o&&i[u]===0;)u++;u===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-u),L.arraycopy(i,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const i=this.coefficients;let o;if(n===1){o=0;for(let d=0,f=i.length;d!==f;d++){const m=i[d];o=et.addOrSubtract(o,m)}return o}o=i[0];const u=i.length,c=this.field;for(let d=1;d<u;d++)o=et.addOrSubtract(c.multiply(n,o),i[d]);return o}addOrSubtract(n){if(!this.field.equals(n.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let i=this.coefficients,o=n.coefficients;if(i.length>o.length){const d=i;i=o,o=d}let u=new Int32Array(o.length);const c=o.length-i.length;L.arraycopy(o,0,u,0,c);for(let d=c;d<o.length;d++)u[d]=et.addOrSubtract(i[d-c],o[d]);return new Se(this.field,u)}multiply(n){if(!this.field.equals(n.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const i=this.coefficients,o=i.length,u=n.coefficients,c=u.length,d=new Int32Array(o+c-1),f=this.field;for(let m=0;m<o;m++){const w=i[m];for(let E=0;E<c;E++)d[m+E]=et.addOrSubtract(d[m+E],f.multiply(w,u[E]))}return new Se(f,d)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const i=this.coefficients.length,o=this.field,u=new Int32Array(i),c=this.coefficients;for(let d=0;d<i;d++)u[d]=o.multiply(c[d],n);return new Se(o,u)}multiplyByMonomial(n,i){if(n<0)throw new v;if(i===0)return this.field.getZero();const o=this.coefficients,u=o.length,c=new Int32Array(u+n),d=this.field;for(let f=0;f<u;f++)c[f]=d.multiply(o[f],i);return new Se(d,c)}divide(n){if(!this.field.equals(n.field))throw new v("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new v("Divide by 0");const i=this.field;let o=i.getZero(),u=this;const c=n.getCoefficient(n.getDegree()),d=i.inverse(c);for(;u.getDegree()>=n.getDegree()&&!u.isZero();){const f=u.getDegree()-n.getDegree(),m=i.multiply(u.getCoefficient(u.getDegree()),d),w=n.multiplyByMonomial(f,m),E=i.buildMonomial(f,m);o=o.addOrSubtract(E),u=u.addOrSubtract(w)}return[o,u]}toString(){let n="";for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);if(o!==0){if(o<0?(n+=" - ",o=-o):n.length>0&&(n+=" + "),i===0||o!==1){const u=this.field.log(o);u===0?n+="1":u===1?n+="a":(n+="a^",n+=u)}i!==0&&(i===1?n+="x":(n+="x^",n+=i))}}return n}}class Ze extends g{}Ze.kind="ArithmeticException";class Ne extends et{constructor(n,i,o){super(),this.primitive=n,this.size=i,this.generatorBase=o;const u=new Int32Array(i);let c=1;for(let f=0;f<i;f++)u[f]=c,c*=2,c>=i&&(c^=n,c&=i-1);this.expTable=u;const d=new Int32Array(i);for(let f=0;f<i-1;f++)d[u[f]]=f;this.logTable=d,this.zero=new Se(this,Int32Array.from([0])),this.one=new Se(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,i){if(n<0)throw new v;if(i===0)return this.zero;const o=new Int32Array(n+1);return o[0]=i,new Se(this,o)}inverse(n){if(n===0)throw new Ze;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,i){return n===0||i===0?0:this.expTable[(this.logTable[n]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+I.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}Ne.AZTEC_DATA_12=new Ne(4201,4096,1),Ne.AZTEC_DATA_10=new Ne(1033,1024,1),Ne.AZTEC_DATA_6=new Ne(67,64,1),Ne.AZTEC_PARAM=new Ne(19,16,1),Ne.QR_CODE_FIELD_256=new Ne(285,256,0),Ne.DATA_MATRIX_FIELD_256=new Ne(301,256,1),Ne.AZTEC_DATA_8=Ne.DATA_MATRIX_FIELD_256,Ne.MAXICODE_FIELD_64=Ne.AZTEC_DATA_6;class $e extends g{}$e.kind="ReedSolomonException";class Le extends g{}Le.kind="IllegalStateException";class Pe{constructor(n){this.field=n}decode(n,i){const o=this.field,u=new Se(o,n),c=new Int32Array(i);let d=!0;for(let M=0;M<i;M++){const z=u.evaluateAt(o.exp(M+o.getGeneratorBase()));c[c.length-1-M]=z,z!==0&&(d=!1)}if(d)return;const f=new Se(o,c),m=this.runEuclideanAlgorithm(o.buildMonomial(i,1),f,i),w=m[0],E=m[1],S=this.findErrorLocations(w),T=this.findErrorMagnitudes(E,S);for(let M=0;M<S.length;M++){const z=n.length-1-o.log(S[M]);if(z<0)throw new $e("Bad error location");n[z]=Ne.addOrSubtract(n[z],T[M])}}runEuclideanAlgorithm(n,i,o){if(n.getDegree()<i.getDegree()){const M=n;n=i,i=M}const u=this.field;let c=n,d=i,f=u.getZero(),m=u.getOne();for(;d.getDegree()>=(o/2|0);){let M=c,z=f;if(c=d,f=m,c.isZero())throw new $e("r_{i-1} was zero");d=M;let V=u.getZero();const H=c.getCoefficient(c.getDegree()),Q=u.inverse(H);for(;d.getDegree()>=c.getDegree()&&!d.isZero();){const ie=d.getDegree()-c.getDegree(),oe=u.multiply(d.getCoefficient(d.getDegree()),Q);V=V.addOrSubtract(u.buildMonomial(ie,oe)),d=d.addOrSubtract(c.multiplyByMonomial(ie,oe))}if(m=V.multiply(f).addOrSubtract(z),d.getDegree()>=c.getDegree())throw new Le("Division algorithm failed to reduce polynomial?")}const w=m.getCoefficient(0);if(w===0)throw new $e("sigmaTilde(0) was zero");const E=u.inverse(w),S=m.multiplyScalar(E),T=d.multiplyScalar(E);return[S,T]}findErrorLocations(n){const i=n.getDegree();if(i===1)return Int32Array.from([n.getCoefficient(1)]);const o=new Int32Array(i);let u=0;const c=this.field;for(let d=1;d<c.getSize()&&u<i;d++)n.evaluateAt(d)===0&&(o[u]=c.inverse(d),u++);if(u!==i)throw new $e("Error locator degree does not match number of roots");return o}findErrorMagnitudes(n,i){const o=i.length,u=new Int32Array(o),c=this.field;for(let d=0;d<o;d++){const f=c.inverse(i[d]);let m=1;for(let w=0;w<o;w++)if(d!==w){const E=c.multiply(i[w],f),S=E&1?E&-2:E|1;m=c.multiply(m,S)}u[d]=c.multiply(n.evaluateAt(f),c.inverse(m)),c.getGeneratorBase()!==0&&(u[d]=c.multiply(u[d],f))}return u}}var We;(function(A){A[A.UPPER=0]="UPPER",A[A.LOWER=1]="LOWER",A[A.MIXED=2]="MIXED",A[A.DIGIT=3]="DIGIT",A[A.PUNCT=4]="PUNCT",A[A.BINARY=5]="BINARY"})(We||(We={}));class Ee{decode(n){this.ddata=n;let i=n.getBits(),o=this.extractBits(i),u=this.correctBits(o),c=Ee.convertBoolArrayToByteArray(u),d=Ee.getEncodedData(u),f=new Fe(c,d,null,null);return f.setNumBits(u.length),f}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let i=n.length,o=We.UPPER,u=We.UPPER,c="",d=0;for(;d<i;)if(u===We.BINARY){if(i-d<5)break;let f=Ee.readCode(n,d,5);if(d+=5,f===0){if(i-d<11)break;f=Ee.readCode(n,d,11)+31,d+=11}for(let m=0;m<f;m++){if(i-d<8){d=i;break}const w=Ee.readCode(n,d,8);c+=K.castAsNonUtf8Char(w),d+=8}u=o}else{let f=u===We.DIGIT?4:5;if(i-d<f)break;let m=Ee.readCode(n,d,f);d+=f;let w=Ee.getCharacter(u,m);w.startsWith("CTRL_")?(o=u,u=Ee.getTable(w.charAt(5)),w.charAt(6)==="L"&&(o=u)):(c+=w,u=o)}return c}static getTable(n){switch(n){case"L":return We.LOWER;case"P":return We.PUNCT;case"M":return We.MIXED;case"D":return We.DIGIT;case"B":return We.BINARY;case"U":default:return We.UPPER}}static getCharacter(n,i){switch(n){case We.UPPER:return Ee.UPPER_TABLE[i];case We.LOWER:return Ee.LOWER_TABLE[i];case We.MIXED:return Ee.MIXED_TABLE[i];case We.PUNCT:return Ee.PUNCT_TABLE[i];case We.DIGIT:return Ee.DIGIT_TABLE[i];default:throw new Le("Bad table")}}correctBits(n){let i,o;this.ddata.getNbLayers()<=2?(o=6,i=Ne.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,i=Ne.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,i=Ne.AZTEC_DATA_10):(o=12,i=Ne.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),c=n.length/o;if(c<u)throw new U;let d=n.length%o,f=new Int32Array(c);for(let T=0;T<c;T++,d+=o)f[T]=Ee.readCode(n,d,o);try{new Pe(i).decode(f,c-u)}catch(T){throw new U(T)}let m=(1<<o)-1,w=0;for(let T=0;T<u;T++){let M=f[T];if(M===0||M===m)throw new U;(M===1||M===m-1)&&w++}let E=new Array(u*o-w),S=0;for(let T=0;T<u;T++){let M=f[T];if(M===1||M===m-1)E.fill(M>1,S,S+o-1),S+=o-1;else for(let z=o-1;z>=0;--z)E[S++]=(M&1<<z)!==0}return E}extractBits(n){let i=this.ddata.isCompact(),o=this.ddata.getNbLayers(),u=(i?11:14)+o*4,c=new Int32Array(u),d=new Array(this.totalBitsInLayer(o,i));if(i)for(let f=0;f<c.length;f++)c[f]=f;else{let f=u+1+2*I.truncDivision(I.truncDivision(u,2)-1,15),m=u/2,w=I.truncDivision(f,2);for(let E=0;E<m;E++){let S=E+I.truncDivision(E,15);c[m-E-1]=w-S-1,c[m+E]=w+S+1}}for(let f=0,m=0;f<o;f++){let w=(o-f)*4+(i?9:12),E=f*2,S=u-1-E;for(let T=0;T<w;T++){let M=T*2;for(let z=0;z<2;z++)d[m+M+z]=n.get(c[E+z],c[E+T]),d[m+2*w+M+z]=n.get(c[E+T],c[S-z]),d[m+4*w+M+z]=n.get(c[S-z],c[S-T]),d[m+6*w+M+z]=n.get(c[S-T],c[E+z])}m+=w*8}return d}static readCode(n,i,o){let u=0;for(let c=i;c<i+o;c++)u<<=1,n[c]&&(u|=1);return u}static readByte(n,i){let o=n.length-i;return o>=8?Ee.readCode(n,i,8):Ee.readCode(n,i,o)<<8-o}static convertBoolArrayToByteArray(n){let i=new Uint8Array((n.length+7)/8);for(let o=0;o<i.length;o++)i[o]=Ee.readByte(n,8*o);return i}totalBitsInLayer(n,i){return((i?88:112)+16*n)*n}}Ee.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ee.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ee.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ee.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ee.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ye{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,i,o,u){const c=n-o,d=i-u;return Math.sqrt(c*c+d*d)}static sum(n){let i=0;for(let o=0,u=n.length;o!==u;o++){const c=n[o];i+=c}return i}}class pt{static floatToIntBits(n){return n}}pt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class de{constructor(n,i){this.x=n,this.y=i}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof de){const i=n;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*pt.floatToIntBits(this.x)+pt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const i=this.distance(n[0],n[1]),o=this.distance(n[1],n[2]),u=this.distance(n[0],n[2]);let c,d,f;if(o>=i&&o>=u?(d=n[0],c=n[1],f=n[2]):u>=o&&u>=i?(d=n[1],c=n[0],f=n[2]):(d=n[2],c=n[0],f=n[1]),this.crossProductZ(c,d,f)<0){const m=c;c=f,f=m}n[0]=c,n[1]=d,n[2]=f}static distance(n,i){return ye.distance(n.x,n.y,i.x,i.y)}static crossProductZ(n,i,o){const u=i.x,c=i.y;return(o.x-u)*(n.y-c)-(o.y-c)*(n.x-u)}}class lr{constructor(n,i){this.bits=n,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Bn extends lr{constructor(n,i,o,u,c){super(n,i),this.compact=o,this.nbDatablocks=u,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ot{constructor(n,i,o,u){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),i==null&&(i=ot.INIT_SIZE),o==null&&(o=n.getWidth()/2|0),u==null&&(u=n.getHeight()/2|0);const c=i/2|0;if(this.leftInit=o-c,this.rightInit=o+c,this.upInit=u-c,this.downInit=u+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new q}detect(){let n=this.leftInit,i=this.rightInit,o=this.upInit,u=this.downInit,c=!1,d=!0,f=!1,m=!1,w=!1,E=!1,S=!1;const T=this.width,M=this.height;for(;d;){d=!1;let z=!0;for(;(z||!m)&&i<T;)z=this.containsBlackPoint(o,u,i,!1),z?(i++,d=!0,m=!0):m||i++;if(i>=T){c=!0;break}let V=!0;for(;(V||!w)&&u<M;)V=this.containsBlackPoint(n,i,u,!0),V?(u++,d=!0,w=!0):w||u++;if(u>=M){c=!0;break}let H=!0;for(;(H||!E)&&n>=0;)H=this.containsBlackPoint(o,u,n,!1),H?(n--,d=!0,E=!0):E||n--;if(n<0){c=!0;break}let Q=!0;for(;(Q||!S)&&o>=0;)Q=this.containsBlackPoint(n,i,o,!0),Q?(o--,d=!0,S=!0):S||o--;if(o<0){c=!0;break}d&&(f=!0)}if(!c&&f){const z=i-n;let V=null;for(let oe=1;V===null&&oe<z;oe++)V=this.getBlackPointOnSegment(n,u-oe,n+oe,u);if(V==null)throw new q;let H=null;for(let oe=1;H===null&&oe<z;oe++)H=this.getBlackPointOnSegment(n,o+oe,n+oe,o);if(H==null)throw new q;let Q=null;for(let oe=1;Q===null&&oe<z;oe++)Q=this.getBlackPointOnSegment(i,o+oe,i-oe,o);if(Q==null)throw new q;let ie=null;for(let oe=1;ie===null&&oe<z;oe++)ie=this.getBlackPointOnSegment(i,u-oe,i-oe,u);if(ie==null)throw new q;return this.centerEdges(ie,V,Q,H)}else throw new q}getBlackPointOnSegment(n,i,o,u){const c=ye.round(ye.distance(n,i,o,u)),d=(o-n)/c,f=(u-i)/c,m=this.image;for(let w=0;w<c;w++){const E=ye.round(n+w*d),S=ye.round(i+w*f);if(m.get(E,S))return new de(E,S)}return null}centerEdges(n,i,o,u){const c=n.getX(),d=n.getY(),f=i.getX(),m=i.getY(),w=o.getX(),E=o.getY(),S=u.getX(),T=u.getY(),M=ot.CORR;return c<this.width/2?[new de(S-M,T+M),new de(f+M,m+M),new de(w-M,E-M),new de(c+M,d-M)]:[new de(S+M,T+M),new de(f+M,m-M),new de(w-M,E+M),new de(c-M,d-M)]}containsBlackPoint(n,i,o,u){const c=this.image;if(u){for(let d=n;d<=i;d++)if(c.get(d,o))return!0}else for(let d=n;d<=i;d++)if(c.get(o,d))return!0;return!1}}ot.INIT_SIZE=10,ot.CORR=1;class pr{static checkAndNudgePoints(n,i){const o=n.getWidth(),u=n.getHeight();let c=!0;for(let d=0;d<i.length&&c;d+=2){const f=Math.floor(i[d]),m=Math.floor(i[d+1]);if(f<-1||f>o||m<-1||m>u)throw new q;c=!1,f===-1?(i[d]=0,c=!0):f===o&&(i[d]=o-1,c=!0),m===-1?(i[d+1]=0,c=!0):m===u&&(i[d+1]=u-1,c=!0)}c=!0;for(let d=i.length-2;d>=0&&c;d-=2){const f=Math.floor(i[d]),m=Math.floor(i[d+1]);if(f<-1||f>o||m<-1||m>u)throw new q;c=!1,f===-1?(i[d]=0,c=!0):f===o&&(i[d]=o-1,c=!0),m===-1?(i[d+1]=0,c=!0):m===u&&(i[d+1]=u-1,c=!0)}}}class qe{constructor(n,i,o,u,c,d,f,m,w){this.a11=n,this.a21=i,this.a31=o,this.a12=u,this.a22=c,this.a32=d,this.a13=f,this.a23=m,this.a33=w}static quadrilateralToQuadrilateral(n,i,o,u,c,d,f,m,w,E,S,T,M,z,V,H){const Q=qe.quadrilateralToSquare(n,i,o,u,c,d,f,m);return qe.squareToQuadrilateral(w,E,S,T,M,z,V,H).times(Q)}transformPoints(n){const i=n.length,o=this.a11,u=this.a12,c=this.a13,d=this.a21,f=this.a22,m=this.a23,w=this.a31,E=this.a32,S=this.a33;for(let T=0;T<i;T+=2){const M=n[T],z=n[T+1],V=c*M+m*z+S;n[T]=(o*M+d*z+w)/V,n[T+1]=(u*M+f*z+E)/V}}transformPointsWithValues(n,i){const o=this.a11,u=this.a12,c=this.a13,d=this.a21,f=this.a22,m=this.a23,w=this.a31,E=this.a32,S=this.a33,T=n.length;for(let M=0;M<T;M++){const z=n[M],V=i[M],H=c*z+m*V+S;n[M]=(o*z+d*V+w)/H,i[M]=(u*z+f*V+E)/H}}static squareToQuadrilateral(n,i,o,u,c,d,f,m){const w=n-o+c-f,E=i-u+d-m;if(w===0&&E===0)return new qe(o-n,c-o,n,u-i,d-u,i,0,0,1);{const S=o-c,T=f-c,M=u-d,z=m-d,V=S*z-T*M,H=(w*z-T*E)/V,Q=(S*E-w*M)/V;return new qe(o-n+H*o,f-n+Q*f,n,u-i+H*u,m-i+Q*m,i,H,Q,1)}}static quadrilateralToSquare(n,i,o,u,c,d,f,m){return qe.squareToQuadrilateral(n,i,o,u,c,d,f,m).buildAdjoint()}buildAdjoint(){return new qe(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new qe(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class Xt extends pr{sampleGrid(n,i,o,u,c,d,f,m,w,E,S,T,M,z,V,H,Q,ie,oe){const ee=qe.quadrilateralToQuadrilateral(u,c,d,f,m,w,E,S,T,M,z,V,H,Q,ie,oe);return this.sampleGridWithTransform(n,i,o,ee)}sampleGridWithTransform(n,i,o,u){if(i<=0||o<=0)throw new q;const c=new Oe(i,o),d=new Float32Array(2*i);for(let f=0;f<o;f++){const m=d.length,w=f+.5;for(let E=0;E<m;E+=2)d[E]=E/2+.5,d[E+1]=w;u.transformPoints(d),pr.checkAndNudgePoints(n,d);try{for(let E=0;E<m;E+=2)n.get(Math.floor(d[E]),Math.floor(d[E+1]))&&c.set(E/2,f)}catch{throw new q}}return c}}class Vt{static setGridSampler(n){Vt.gridSampler=n}static getInstance(){return Vt.gridSampler}}Vt.gridSampler=new Xt;class Dt{constructor(n,i){this.x=n,this.y=i}toResultPoint(){return new de(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class qs{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let i=this.getMatrixCenter(),o=this.getBullsEyeCorners(i);if(n){let d=o[0];o[0]=o[2],o[2]=d}this.extractParameters(o);let u=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),c=this.getMatrixCornerPoints(o);return new Bn(u,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new q;let i=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(n[0],n[1],i),this.sampleLine(n[1],n[2],i),this.sampleLine(n[2],n[3],i),this.sampleLine(n[3],n[0],i)]);this.shift=this.getRotation(o,i);let u=0;for(let d=0;d<4;d++){let f=o[(this.shift+d)%4];this.compact?(u<<=7,u+=f>>1&127):(u<<=10,u+=(f>>2&992)+(f>>1&31))}let c=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(n,i){let o=0;n.forEach((u,c,d)=>{let f=(u>>i-2<<1)+(u&1);o=(o<<3)+f}),o=((o&1)<<11)+(o>>1);for(let u=0;u<4;u++)if(I.bitCount(o^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new q}getCorrectedParameterData(n,i){let o,u;i?(o=7,u=2):(o=10,u=4);let c=o-u,d=new Int32Array(o);for(let m=o-1;m>=0;--m)d[m]=n&15,n>>=4;try{new Pe(Ne.AZTEC_PARAM).decode(d,c)}catch{throw new q}let f=0;for(let m=0;m<u;m++)f=(f<<4)+d[m];return f}getBullsEyeCorners(n){let i=n,o=n,u=n,c=n,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let S=this.getFirstDifferent(i,d,1,-1),T=this.getFirstDifferent(o,d,1,1),M=this.getFirstDifferent(u,d,-1,1),z=this.getFirstDifferent(c,d,-1,-1);if(this.nbCenterLayers>2){let V=this.distancePoint(z,S)*this.nbCenterLayers/(this.distancePoint(c,i)*(this.nbCenterLayers+2));if(V<.75||V>1.25||!this.isWhiteOrBlackRectangle(S,T,M,z))break}i=S,o=T,u=M,c=z,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new q;this.compact=this.nbCenterLayers===5;let f=new de(i.getX()+.5,i.getY()-.5),m=new de(o.getX()+.5,o.getY()+.5),w=new de(u.getX()-.5,u.getY()+.5),E=new de(c.getX()-.5,c.getY()-.5);return this.expandSquare([f,m,w,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,i,o,u;try{let f=new ot(this.image).detect();n=f[0],i=f[1],o=f[2],u=f[3]}catch{let m=this.image.getWidth()/2,w=this.image.getHeight()/2;n=this.getFirstDifferent(new Dt(m+7,w-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Dt(m+7,w+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Dt(m-7,w+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Dt(m-7,w-7),!1,-1,-1).toResultPoint()}let c=ye.round((n.getX()+u.getX()+i.getX()+o.getX())/4),d=ye.round((n.getY()+u.getY()+i.getY()+o.getY())/4);try{let f=new ot(this.image,15,c,d).detect();n=f[0],i=f[1],o=f[2],u=f[3]}catch{n=this.getFirstDifferent(new Dt(c+7,d-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Dt(c+7,d+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Dt(c-7,d+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Dt(c-7,d-7),!1,-1,-1).toResultPoint()}return c=ye.round((n.getX()+u.getX()+i.getX()+o.getX())/4),d=ye.round((n.getY()+u.getY()+i.getY()+o.getY())/4),new Dt(c,d)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,i,o,u,c){let d=Vt.getInstance(),f=this.getDimension(),m=f/2-this.nbCenterLayers,w=f/2+this.nbCenterLayers;return d.sampleGrid(n,f,f,m,m,w,m,w,w,m,w,i.getX(),i.getY(),o.getX(),o.getY(),u.getX(),u.getY(),c.getX(),c.getY())}sampleLine(n,i,o){let u=0,c=this.distanceResultPoint(n,i),d=c/o,f=n.getX(),m=n.getY(),w=d*(i.getX()-n.getX())/c,E=d*(i.getY()-n.getY())/c;for(let S=0;S<o;S++)this.image.get(ye.round(f+S*w),ye.round(m+S*E))&&(u|=1<<o-S-1);return u}isWhiteOrBlackRectangle(n,i,o,u){let c=3;n=new Dt(n.getX()-c,n.getY()+c),i=new Dt(i.getX()-c,i.getY()-c),o=new Dt(o.getX()+c,o.getY()-c),u=new Dt(u.getX()+c,u.getY()+c);let d=this.getColor(u,n);if(d===0)return!1;let f=this.getColor(n,i);return f!==d||(f=this.getColor(i,o),f!==d)?!1:(f=this.getColor(o,u),f===d)}getColor(n,i){let o=this.distancePoint(n,i),u=(i.getX()-n.getX())/o,c=(i.getY()-n.getY())/o,d=0,f=n.getX(),m=n.getY(),w=this.image.get(n.getX(),n.getY()),E=Math.ceil(o);for(let T=0;T<E;T++)f+=u,m+=c,this.image.get(ye.round(f),ye.round(m))!==w&&d++;let S=d/o;return S>.1&&S<.9?0:S<=.1===w?1:-1}getFirstDifferent(n,i,o,u){let c=n.getX()+o,d=n.getY()+u;for(;this.isValid(c,d)&&this.image.get(c,d)===i;)c+=o,d+=u;for(c-=o,d-=u;this.isValid(c,d)&&this.image.get(c,d)===i;)c+=o;for(c-=o;this.isValid(c,d)&&this.image.get(c,d)===i;)d+=u;return d-=u,new Dt(c,d)}expandSquare(n,i,o){let u=o/(2*i),c=n[0].getX()-n[2].getX(),d=n[0].getY()-n[2].getY(),f=(n[0].getX()+n[2].getX())/2,m=(n[0].getY()+n[2].getY())/2,w=new de(f+u*c,m+u*d),E=new de(f-u*c,m-u*d);c=n[1].getX()-n[3].getX(),d=n[1].getY()-n[3].getY(),f=(n[1].getX()+n[3].getX())/2,m=(n[1].getY()+n[3].getY())/2;let S=new de(f+u*c,m+u*d),T=new de(f-u*c,m-u*d);return[w,S,E,T]}isValid(n,i){return n>=0&&n<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(n){let i=ye.round(n.getX()),o=ye.round(n.getY());return this.isValid(i,o)}distancePoint(n,i){return ye.distance(n.getX(),n.getY(),i.getX(),i.getY())}distanceResultPoint(n,i){return ye.distance(n.getX(),n.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(I.truncDivision(this.nbLayers-4,8)+1)+15}}class Kr{decode(n,i=null){let o=null,u=new qs(n.getBlackMatrix()),c=null,d=null;try{let E=u.detectMirror(!1);c=E.getPoints(),this.reportFoundResultPoints(i,c),d=new Ee().decode(E)}catch(E){o=E}if(d==null)try{let E=u.detectMirror(!0);c=E.getPoints(),this.reportFoundResultPoints(i,c),d=new Ee().decode(E)}catch(E){throw o??E}let f=new ke(d.getText(),d.getRawBytes(),d.getNumBits(),c,ue.AZTEC,L.currentTimeMillis()),m=d.getByteSegments();m!=null&&f.putMetadata(be.BYTE_SEGMENTS,m);let w=d.getECLevel();return w!=null&&f.putMetadata(be.ERROR_CORRECTION_LEVEL,w),f}reportFoundResultPoints(n,i){if(n!=null){let o=n.get($.NEED_RESULT_POINT_CALLBACK);o!=null&&i.forEach((u,c,d)=>{o.foundPossibleResultPoint(u)})}}reset(){}}class Lr extends he{constructor(n=500){super(new Kr,n)}}class at{decode(n,i){try{return this.doDecode(n,i)}catch{if(i&&i.get($.TRY_HARDER)===!0&&n.isRotateSupported()){const c=n.rotateCounterClockwise(),d=this.doDecode(c,i),f=d.getResultMetadata();let m=270;f!==null&&f.get(be.ORIENTATION)===!0&&(m=m+f.get(be.ORIENTATION)%360),d.putMetadata(be.ORIENTATION,m);const w=d.getResultPoints();if(w!==null){const E=c.getHeight();for(let S=0;S<w.length;S++)w[S]=new de(E-w[S].getY()-1,w[S].getX())}return d}else throw new q}}reset(){}doDecode(n,i){const o=n.getWidth(),u=n.getHeight();let c=new B(o);const d=i&&i.get($.TRY_HARDER)===!0,f=Math.max(1,u>>(d?8:5));let m;d?m=u:m=15;const w=Math.trunc(u/2);for(let E=0;E<m;E++){const S=Math.trunc((E+1)/2),T=(E&1)===0,M=w+f*(T?S:-S);if(M<0||M>=u)break;try{c=n.getBlackRow(M,c)}catch{continue}for(let z=0;z<2;z++){if(z===1&&(c.reverse(),i&&i.get($.NEED_RESULT_POINT_CALLBACK)===!0)){const V=new Map;i.forEach((H,Q)=>V.set(Q,H)),V.delete($.NEED_RESULT_POINT_CALLBACK),i=V}try{const V=this.decodeRow(M,c,i);if(z===1){V.putMetadata(be.ORIENTATION,180);const H=V.getResultPoints();H!==null&&(H[0]=new de(o-H[0].getX()-1,H[0].getY()),H[1]=new de(o-H[1].getX()-1,H[1].getY()))}return V}catch{}}}throw new q}static recordPattern(n,i,o){const u=o.length;for(let w=0;w<u;w++)o[w]=0;const c=n.getSize();if(i>=c)throw new q;let d=!n.get(i),f=0,m=i;for(;m<c;){if(n.get(m)!==d)o[f]++;else{if(++f===u)break;o[f]=1,d=!d}m++}if(!(f===u||f===u-1&&m===c))throw new q}static recordPatternInReverse(n,i,o){let u=o.length,c=n.get(i);for(;i>0&&u>=0;)n.get(--i)!==c&&(u--,c=!c);if(u>=0)throw new q;at.recordPattern(n,i+1,o)}static patternMatchVariance(n,i,o){const u=n.length;let c=0,d=0;for(let w=0;w<u;w++)c+=n[w],d+=i[w];if(c<d)return Number.POSITIVE_INFINITY;const f=c/d;o*=f;let m=0;for(let w=0;w<u;w++){const E=n[w],S=i[w]*f,T=E>S?E-S:S-E;if(T>o)return Number.POSITIVE_INFINITY;m+=T}return m/c}}class ae extends at{static findStartPattern(n){const i=n.getSize(),o=n.getNextSet(0);let u=0,c=Int32Array.from([0,0,0,0,0,0]),d=o,f=!1;const m=6;for(let w=o;w<i;w++)if(n.get(w)!==f)c[u]++;else{if(u===m-1){let E=ae.MAX_AVG_VARIANCE,S=-1;for(let T=ae.CODE_START_A;T<=ae.CODE_START_C;T++){const M=at.patternMatchVariance(c,ae.CODE_PATTERNS[T],ae.MAX_INDIVIDUAL_VARIANCE);M<E&&(E=M,S=T)}if(S>=0&&n.isRange(Math.max(0,d-(w-d)/2),d,!1))return Int32Array.from([d,w,S]);d+=c[0]+c[1],c=c.slice(2,c.length-1),c[u-1]=0,c[u]=0,u--}else u++;c[u]=1,f=!f}throw new q}static decodeCode(n,i,o){at.recordPattern(n,o,i);let u=ae.MAX_AVG_VARIANCE,c=-1;for(let d=0;d<ae.CODE_PATTERNS.length;d++){const f=ae.CODE_PATTERNS[d],m=this.patternMatchVariance(i,f,ae.MAX_INDIVIDUAL_VARIANCE);m<u&&(u=m,c=d)}if(c>=0)return c;throw new q}decodeRow(n,i,o){const u=o&&o.get($.ASSUME_GS1)===!0,c=ae.findStartPattern(i),d=c[2];let f=0;const m=new Uint8Array(20);m[f++]=d;let w;switch(d){case ae.CODE_START_A:w=ae.CODE_CODE_A;break;case ae.CODE_START_B:w=ae.CODE_CODE_B;break;case ae.CODE_START_C:w=ae.CODE_CODE_C;break;default:throw new U}let E=!1,S=!1,T="",M=c[0],z=c[1];const V=Int32Array.from([0,0,0,0,0,0]);let H=0,Q=0,ie=d,oe=0,ee=!0,ze=!1,De=!1;for(;!E;){const rs=S;switch(S=!1,H=Q,Q=ae.decodeCode(i,V,z),m[f++]=Q,Q!==ae.CODE_STOP&&(ee=!0),Q!==ae.CODE_STOP&&(oe++,ie+=oe*Q),M=z,z+=V.reduce((fx,gx)=>fx+gx,0),Q){case ae.CODE_START_A:case ae.CODE_START_B:case ae.CODE_START_C:throw new U}switch(w){case ae.CODE_CODE_A:if(Q<64)De===ze?T+=String.fromCharCode(32+Q):T+=String.fromCharCode(32+Q+128),De=!1;else if(Q<96)De===ze?T+=String.fromCharCode(Q-64):T+=String.fromCharCode(Q+64),De=!1;else switch(Q!==ae.CODE_STOP&&(ee=!1),Q){case ae.CODE_FNC_1:u&&(T.length===0?T+="]C1":T+="");break;case ae.CODE_FNC_2:case ae.CODE_FNC_3:break;case ae.CODE_FNC_4_A:!ze&&De?(ze=!0,De=!1):ze&&De?(ze=!1,De=!1):De=!0;break;case ae.CODE_SHIFT:S=!0,w=ae.CODE_CODE_B;break;case ae.CODE_CODE_B:w=ae.CODE_CODE_B;break;case ae.CODE_CODE_C:w=ae.CODE_CODE_C;break;case ae.CODE_STOP:E=!0;break}break;case ae.CODE_CODE_B:if(Q<96)De===ze?T+=String.fromCharCode(32+Q):T+=String.fromCharCode(32+Q+128),De=!1;else switch(Q!==ae.CODE_STOP&&(ee=!1),Q){case ae.CODE_FNC_1:u&&(T.length===0?T+="]C1":T+="");break;case ae.CODE_FNC_2:case ae.CODE_FNC_3:break;case ae.CODE_FNC_4_B:!ze&&De?(ze=!0,De=!1):ze&&De?(ze=!1,De=!1):De=!0;break;case ae.CODE_SHIFT:S=!0,w=ae.CODE_CODE_A;break;case ae.CODE_CODE_A:w=ae.CODE_CODE_A;break;case ae.CODE_CODE_C:w=ae.CODE_CODE_C;break;case ae.CODE_STOP:E=!0;break}break;case ae.CODE_CODE_C:if(Q<100)Q<10&&(T+="0"),T+=Q;else switch(Q!==ae.CODE_STOP&&(ee=!1),Q){case ae.CODE_FNC_1:u&&(T.length===0?T+="]C1":T+="");break;case ae.CODE_CODE_A:w=ae.CODE_CODE_A;break;case ae.CODE_CODE_B:w=ae.CODE_CODE_B;break;case ae.CODE_STOP:E=!0;break}break}rs&&(w=w===ae.CODE_CODE_A?ae.CODE_CODE_B:ae.CODE_CODE_A)}const yr=z-M;if(z=i.getNextUnset(z),!i.isRange(z,Math.min(i.getSize(),z+(z-M)/2),!1))throw new q;if(ie-=oe*H,ie%103!==H)throw new N;const Yr=T.length;if(Yr===0)throw new q;Yr>0&&ee&&(w===ae.CODE_CODE_C?T=T.substring(0,Yr-2):T=T.substring(0,Yr-1));const vr=(c[1]+c[0])/2,st=M+yr/2,Yt=m.length,Sr=new Uint8Array(Yt);for(let rs=0;rs<Yt;rs++)Sr[rs]=m[rs];const ts=[new de(vr,n),new de(st,n)];return new ke(T,Sr,0,ts,ue.CODE_128,new Date().getTime())}}ae.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ae.MAX_AVG_VARIANCE=.25,ae.MAX_INDIVIDUAL_VARIANCE=.7,ae.CODE_SHIFT=98,ae.CODE_CODE_C=99,ae.CODE_CODE_B=100,ae.CODE_CODE_A=101,ae.CODE_FNC_1=102,ae.CODE_FNC_2=97,ae.CODE_FNC_3=96,ae.CODE_FNC_4_A=101,ae.CODE_FNC_4_B=100,ae.CODE_START_A=103,ae.CODE_START_B=104,ae.CODE_START_C=105,ae.CODE_STOP=106;class Mt extends at{constructor(n=!1,i=!1){super(),this.usingCheckDigit=n,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,i,o){let u=this.counters;u.fill(0),this.decodeRowResult="";let c=Mt.findAsteriskPattern(i,u),d=i.getNextSet(c[1]),f=i.getSize(),m,w;do{Mt.recordPattern(i,d,u);let V=Mt.toNarrowWidePattern(u);if(V<0)throw new q;m=Mt.patternToChar(V),this.decodeRowResult+=m,w=d;for(let H of u)d+=H;d=i.getNextSet(d)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let E=0;for(let V of u)E+=V;let S=d-w-E;if(d!==f&&S*2<E)throw new q;if(this.usingCheckDigit){let V=this.decodeRowResult.length-1,H=0;for(let Q=0;Q<V;Q++)H+=Mt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Q));if(this.decodeRowResult.charAt(V)!==Mt.ALPHABET_STRING.charAt(H%43))throw new N;this.decodeRowResult=this.decodeRowResult.substring(0,V)}if(this.decodeRowResult.length===0)throw new q;let T;this.extendedMode?T=Mt.decodeExtended(this.decodeRowResult):T=this.decodeRowResult;let M=(c[1]+c[0])/2,z=w+E/2;return new ke(T,null,0,[new de(M,n),new de(z,n)],ue.CODE_39,new Date().getTime())}static findAsteriskPattern(n,i){let o=n.getSize(),u=n.getNextSet(0),c=0,d=u,f=!1,m=i.length;for(let w=u;w<o;w++)if(n.get(w)!==f)i[c]++;else{if(c===m-1){if(this.toNarrowWidePattern(i)===Mt.ASTERISK_ENCODING&&n.isRange(Math.max(0,d-Math.floor((w-d)/2)),d,!1))return[d,w];d+=i[0]+i[1],i.copyWithin(0,2,2+c-1),i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,f=!f}throw new q}static toNarrowWidePattern(n){let i=n.length,o=0,u;do{let c=2147483647;for(let m of n)m<c&&m>o&&(c=m);o=c,u=0;let d=0,f=0;for(let m=0;m<i;m++){let w=n[m];w>o&&(f|=1<<i-1-m,u++,d+=w)}if(u===3){for(let m=0;m<i&&u>0;m++){let w=n[m];if(w>o&&(u--,w*2>=d))return-1}return f}}while(u>3);return-1}static patternToChar(n){for(let i=0;i<Mt.CHARACTER_ENCODINGS.length;i++)if(Mt.CHARACTER_ENCODINGS[i]===n)return Mt.ALPHABET_STRING.charAt(i);if(n===Mt.ASTERISK_ENCODING)return"*";throw new q}static decodeExtended(n){let i=n.length,o="";for(let u=0;u<i;u++){let c=n.charAt(u);if(c==="+"||c==="$"||c==="%"||c==="/"){let d=n.charAt(u+1),f="\0";switch(c){case"+":if(d>="A"&&d<="Z")f=String.fromCharCode(d.charCodeAt(0)+32);else throw new U;break;case"$":if(d>="A"&&d<="Z")f=String.fromCharCode(d.charCodeAt(0)-64);else throw new U;break;case"%":if(d>="A"&&d<="E")f=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")f=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")f=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")f=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")f="\0";else if(d==="V")f="@";else if(d==="W")f="`";else if(d==="X"||d==="Y"||d==="Z")f="";else throw new U;break;case"/":if(d>="A"&&d<="O")f=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")f=":";else throw new U;break}o+=f,u++}else o+=c}return o}}Mt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Mt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Mt.ASTERISK_ENCODING=148;class nt extends at{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,i,o){let u=this.decodeStart(i),c=this.decodeEnd(i),d=new se;nt.decodeMiddle(i,u[1],c[0],d);let f=d.toString(),m=null;o!=null&&(m=o.get($.ALLOWED_LENGTHS)),m==null&&(m=nt.DEFAULT_ALLOWED_LENGTHS);let w=f.length,E=!1,S=0;for(let z of m){if(w===z){E=!0;break}z>S&&(S=z)}if(!E&&w>S&&(E=!0),!E)throw new U;const T=[new de(u[1],n),new de(c[0],n)];return new ke(f,null,0,T,ue.ITF,new Date().getTime())}static decodeMiddle(n,i,o,u){let c=new Int32Array(10),d=new Int32Array(5),f=new Int32Array(5);for(c.fill(0),d.fill(0),f.fill(0);i<o;){at.recordPattern(n,i,c);for(let w=0;w<5;w++){let E=2*w;d[w]=c[E],f[w]=c[E+1]}let m=nt.decodeDigit(d);u.append(m.toString()),m=this.decodeDigit(f),u.append(m.toString()),c.forEach(function(w){i+=w})}}decodeStart(n){let i=nt.skipWhiteSpace(n),o=nt.findGuardPattern(n,i,nt.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(n,o[0]),o}validateQuietZone(n,i){let o=this.narrowLineWidth*10;o=o<i?o:i;for(let u=i-1;o>0&&u>=0&&!n.get(u);u--)o--;if(o!==0)throw new q}static skipWhiteSpace(n){const i=n.getSize(),o=n.getNextSet(0);if(o===i)throw new q;return o}decodeEnd(n){n.reverse();try{let i=nt.skipWhiteSpace(n),o;try{o=nt.findGuardPattern(n,i,nt.END_PATTERN_REVERSED[0])}catch(c){c instanceof q&&(o=nt.findGuardPattern(n,i,nt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,o[0]);let u=o[0];return o[0]=n.getSize()-o[1],o[1]=n.getSize()-u,o}finally{n.reverse()}}static findGuardPattern(n,i,o){let u=o.length,c=new Int32Array(u),d=n.getSize(),f=!1,m=0,w=i;c.fill(0);for(let E=i;E<d;E++)if(n.get(E)!==f)c[m]++;else{if(m===u-1){if(at.patternMatchVariance(c,o,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return[w,E];w+=c[0]+c[1],L.arraycopy(c,2,c,0,m-1),c[m-1]=0,c[m]=0,m--}else m++;c[m]=1,f=!f}throw new q}static decodeDigit(n){let i=nt.MAX_AVG_VARIANCE,o=-1,u=nt.PATTERNS.length;for(let c=0;c<u;c++){let d=nt.PATTERNS[c],f=at.patternMatchVariance(n,d,nt.MAX_INDIVIDUAL_VARIANCE);f<i?(i=f,o=c):f===i&&(o=-1)}if(o>=0)return o%10;throw new q}}nt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],nt.MAX_AVG_VARIANCE=.38,nt.MAX_INDIVIDUAL_VARIANCE=.5,nt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],nt.START_PATTERN=Int32Array.from([1,1,1,1]),nt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ct extends at{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let i=!1,o,u=0,c=Int32Array.from([0,0,0]);for(;!i;){c=Int32Array.from([0,0,0]),o=Ct.findGuardPattern(n,u,!1,this.START_END_PATTERN,c);let d=o[0];u=o[1];let f=d-(u-d);f>=0&&(i=n.isRange(f,d,!1))}return o}static checkChecksum(n){return Ct.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let i=n.length;if(i===0)return!1;let o=parseInt(n.charAt(i-1),10);return Ct.getStandardUPCEANChecksum(n.substring(0,i-1))===o}static getStandardUPCEANChecksum(n){let i=n.length,o=0;for(let u=i-1;u>=0;u-=2){let c=n.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new U;o+=c}o*=3;for(let u=i-2;u>=0;u-=2){let c=n.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new U;o+=c}return(1e3-o)%10}static decodeEnd(n,i){return Ct.findGuardPattern(n,i,!1,Ct.START_END_PATTERN,new Int32Array(Ct.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,i,o,u){return this.findGuardPattern(n,i,o,u,new Int32Array(u.length))}static findGuardPattern(n,i,o,u,c){let d=n.getSize();i=o?n.getNextUnset(i):n.getNextSet(i);let f=0,m=i,w=u.length,E=o;for(let S=i;S<d;S++)if(n.get(S)!==E)c[f]++;else{if(f===w-1){if(at.patternMatchVariance(c,u,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE)return Int32Array.from([m,S]);m+=c[0]+c[1];let T=c.slice(2,c.length-1);for(let M=0;M<f-1;M++)c[M]=T[M];c[f-1]=0,c[f]=0,f--}else f++;c[f]=1,E=!E}throw new q}static decodeDigit(n,i,o,u){this.recordPattern(n,o,i);let c=this.MAX_AVG_VARIANCE,d=-1,f=u.length;for(let m=0;m<f;m++){let w=u[m],E=at.patternMatchVariance(i,w,Ct.MAX_INDIVIDUAL_VARIANCE);E<c&&(c=E,d=m)}if(d>=0)return d;throw new q}}Ct.MAX_AVG_VARIANCE=.48,Ct.MAX_INDIVIDUAL_VARIANCE=.7,Ct.START_END_PATTERN=Int32Array.from([1,1,1]),Ct.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ct.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ct.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ys{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,i,o){let u=this.decodeRowStringBuffer,c=this.decodeMiddle(i,o,u),d=u.toString(),f=Ys.parseExtensionString(d),m=[new de((o[0]+o[1])/2,n),new de(c,n)],w=new ke(d,null,0,m,ue.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&w.putAllMetadata(f),w}decodeMiddle(n,i,o){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=n.getSize(),d=i[1],f=0;for(let w=0;w<5&&d<c;w++){let E=Ct.decodeDigit(n,u,d,Ct.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let S of u)d+=S;E>=10&&(f|=1<<4-w),w!==4&&(d=n.getNextSet(d),d=n.getNextUnset(d))}if(o.length!==5)throw new q;let m=this.determineCheckDigit(f);if(Ys.extensionChecksum(o.toString())!==m)throw new q;return d}static extensionChecksum(n){let i=n.length,o=0;for(let u=i-2;u>=0;u-=2)o+=n.charAt(u).charCodeAt(0)-48;o*=3;for(let u=i-1;u>=0;u-=2)o+=n.charAt(u).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(n){for(let i=0;i<10;i++)if(n===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new q}static parseExtensionString(n){if(n.length!==5)return null;let i=Ys.parseExtension5String(n);return i==null?null:new Map([[be.SUGGESTED_PRICE,i]])}static parseExtension5String(n){let i;switch(n.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let o=parseInt(n.substring(1)),u=(o/100).toString(),c=o%100,d=c<10?"0"+c:c.toString();return i+u+"."+d}}class iu{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,i,o){let u=this.decodeRowStringBuffer,c=this.decodeMiddle(i,o,u),d=u.toString(),f=iu.parseExtensionString(d),m=[new de((o[0]+o[1])/2,n),new de(c,n)],w=new ke(d,null,0,m,ue.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&w.putAllMetadata(f),w}decodeMiddle(n,i,o){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=n.getSize(),d=i[1],f=0;for(let m=0;m<2&&d<c;m++){let w=Ct.decodeDigit(n,u,d,Ct.L_AND_G_PATTERNS);o+=String.fromCharCode(48+w%10);for(let E of u)d+=E;w>=10&&(f|=1<<1-m),m!==1&&(d=n.getNextSet(d),d=n.getNextUnset(d))}if(o.length!==2)throw new q;if(parseInt(o.toString())%4!==f)throw new q;return d}static parseExtensionString(n){return n.length!==2?null:new Map([[be.ISSUE_NUMBER,parseInt(n)]])}}class Rh{static decodeRow(n,i,o){let u=Ct.findGuardPattern(i,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ys().decodeRow(n,i,u)}catch{return new iu().decodeRow(n,i,u)}}}Rh.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Xe extends Ct{constructor(){super(),this.decodeRowStringBuffer="",Xe.L_AND_G_PATTERNS=Xe.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let i=Xe.L_PATTERNS[n-10],o=new Int32Array(i.length);for(let u=0;u<i.length;u++)o[u]=i[i.length-u-1];Xe.L_AND_G_PATTERNS[n]=o}}decodeRow(n,i,o){let u=Xe.findStartGuardPattern(i),c=o==null?null:o.get($.NEED_RESULT_POINT_CALLBACK);if(c!=null){const ee=new de((u[0]+u[1])/2,n);c.foundPossibleResultPoint(ee)}let d=this.decodeMiddle(i,u,this.decodeRowStringBuffer),f=d.rowOffset,m=d.resultString;if(c!=null){const ee=new de(f,n);c.foundPossibleResultPoint(ee)}let w=this.decodeEnd(i,f);if(c!=null){const ee=new de((w[0]+w[1])/2,n);c.foundPossibleResultPoint(ee)}let E=w[1],S=E+(E-w[0]);if(S>=i.getSize()||!i.isRange(E,S,!1))throw new q;let T=m.toString();if(T.length<8)throw new U;if(!Xe.checkChecksum(T))throw new N;let M=(u[1]+u[0])/2,z=(w[1]+w[0])/2,V=this.getBarcodeFormat(),H=[new de(M,n),new de(z,n)],Q=new ke(T,null,0,H,V,new Date().getTime()),ie=0;try{let ee=Rh.decodeRow(n,i,w[1]);Q.putMetadata(be.UPC_EAN_EXTENSION,ee.getText()),Q.putAllMetadata(ee.getResultMetadata()),Q.addResultPoints(ee.getResultPoints()),ie=ee.getText().length}catch{}let oe=o==null?null:o.get($.ALLOWED_EAN_EXTENSIONS);if(oe!=null){let ee=!1;for(let ze in oe)if(ie.toString()===ze){ee=!0;break}if(!ee)throw new q}return Q}decodeEnd(n,i){return Xe.findGuardPattern(n,i,!1,Xe.START_END_PATTERN,new Int32Array(Xe.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return Xe.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let i=n.length;if(i===0)return!1;let o=parseInt(n.charAt(i-1),10);return Xe.getStandardUPCEANChecksum(n.substring(0,i-1))===o}static getStandardUPCEANChecksum(n){let i=n.length,o=0;for(let u=i-1;u>=0;u-=2){let c=n.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new U;o+=c}o*=3;for(let u=i-2;u>=0;u-=2){let c=n.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new U;o+=c}return(1e3-o)%10}}class yi extends Xe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,i,o){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=n.getSize(),d=i[1],f=0;for(let w=0;w<6&&d<c;w++){let E=Xe.decodeDigit(n,u,d,Xe.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let S of u)d+=S;E>=10&&(f|=1<<5-w)}o=yi.determineFirstDigit(o,f),d=Xe.findGuardPattern(n,d,!0,Xe.MIDDLE_PATTERN,new Int32Array(Xe.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<6&&d<c;w++){let E=Xe.decodeDigit(n,u,d,Xe.L_PATTERNS);o+=String.fromCharCode(48+E);for(let S of u)d+=S}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return ue.EAN_13}static determineFirstDigit(n,i){for(let o=0;o<10;o++)if(i===this.FIRST_DIGIT_ENCODINGS[o])return n=String.fromCharCode(48+o)+n,n;throw new q}}yi.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Oh extends Xe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,i,o){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=n.getSize(),d=i[1];for(let m=0;m<4&&d<c;m++){let w=Xe.decodeDigit(n,u,d,Xe.L_PATTERNS);o+=String.fromCharCode(48+w);for(let E of u)d+=E}d=Xe.findGuardPattern(n,d,!0,Xe.MIDDLE_PATTERN,new Int32Array(Xe.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&d<c;m++){let w=Xe.decodeDigit(n,u,d,Xe.L_PATTERNS);o+=String.fromCharCode(48+w);for(let E of u)d+=E}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return ue.EAN_8}}class kh extends Xe{constructor(){super(...arguments),this.ean13Reader=new yi}getBarcodeFormat(){return ue.UPC_A}decode(n,i){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,i,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,i,o))}decodeMiddle(n,i,o){return this.ean13Reader.decodeMiddle(n,i,o)}maybeReturnResult(n){let i=n.getText();if(i.charAt(0)==="0"){let o=new ke(i.substring(1),null,null,n.getResultPoints(),ue.UPC_A);return n.getResultMetadata()!=null&&o.putAllMetadata(n.getResultMetadata()),o}else throw new q}reset(){this.ean13Reader.reset()}}class qr extends Xe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,i,o){const u=this.decodeMiddleCounters.map(w=>w);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const c=n.getSize();let d=i[1],f=0;for(let w=0;w<6&&d<c;w++){const E=qr.decodeDigit(n,u,d,qr.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let S of u)d+=S;E>=10&&(f|=1<<5-w)}let m=qr.determineNumSysAndCheckDigit(o,f);return{rowOffset:d,resultString:m}}decodeEnd(n,i){return qr.findGuardPatternWithoutCounters(n,i,!0,qr.MIDDLE_END_PATTERN)}checkChecksum(n){return Xe.checkChecksum(qr.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,i){for(let o=0;o<=1;o++)for(let u=0;u<10;u++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][u]){let c=String.fromCharCode(48+o),d=String.fromCharCode(48+u);return c+n+d}throw q.getNotFoundInstance()}getBarcodeFormat(){return ue.UPC_E}static convertUPCEtoUPCA(n){const i=n.slice(1,7).split("").map(c=>c.charCodeAt(0)),o=new se;o.append(n.charAt(0));let u=i[5];switch(u){case 0:case 1:case 2:o.appendChars(i,0,2),o.append(u),o.append("0000"),o.appendChars(i,2,3);break;case 3:o.appendChars(i,0,3),o.append("00000"),o.appendChars(i,3,2);break;case 4:o.appendChars(i,0,4),o.append("00000"),o.append(i[4]);break;default:o.appendChars(i,0,5),o.append("0000"),o.append(u);break}return n.length>=8&&o.append(n.charAt(7)),o.toString()}}qr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),qr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class su extends at{constructor(n){super();let i=n==null?null:n.get($.POSSIBLE_FORMATS),o=[];s(i)?(o.push(new yi),o.push(new kh),o.push(new Oh),o.push(new qr)):(i.indexOf(ue.EAN_13)>-1&&o.push(new yi),i.indexOf(ue.UPC_A)>-1&&o.push(new kh),i.indexOf(ue.EAN_8)>-1&&o.push(new Oh),i.indexOf(ue.UPC_E)>-1&&o.push(new qr)),this.readers=o}decodeRow(n,i,o){for(let u of this.readers)try{const c=u.decodeRow(n,i,o),d=c.getBarcodeFormat()===ue.EAN_13&&c.getText().charAt(0)==="0",f=o==null?null:o.get($.POSSIBLE_FORMATS),m=f==null||f.includes(ue.UPC_A);if(d&&m){const w=c.getRawBytes(),E=new ke(c.getText().substring(1),w,w?w.length:null,c.getResultPoints(),ue.UPC_A);return E.putAllMetadata(c.getResultMetadata()),E}return c}catch{}throw new q}reset(){for(let n of this.readers)n.reset()}}class rr extends at{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,i){for(let o=0;o<i.length;o++)if(at.patternMatchVariance(n,i[o],rr.MAX_INDIVIDUAL_VARIANCE)<rr.MAX_AVG_VARIANCE)return o;throw new q}static count(n){return ye.sum(new Int32Array(n))}static increment(n,i){let o=0,u=i[0];for(let c=1;c<n.length;c++)i[c]>u&&(u=i[c],o=c);n[o]++}static decrement(n,i){let o=0,u=i[0];for(let c=1;c<n.length;c++)i[c]<u&&(u=i[c],o=c);n[o]--}static isFinderPattern(n){let i=n[0]+n[1],o=i+n[2]+n[3],u=i/o;if(u>=rr.MIN_FINDER_PATTERN_RATIO&&u<=rr.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let f of n)f>d&&(d=f),f<c&&(c=f);return d<10*c}return!1}}rr.MAX_AVG_VARIANCE=.2,rr.MAX_INDIVIDUAL_VARIANCE=.45,rr.MIN_FINDER_PATTERN_RATIO=9.5/12,rr.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ki{constructor(n,i){this.value=n,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof Ki))return!1;const i=n;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class oa{constructor(n,i,o,u,c){this.value=n,this.startEnd=i,this.value=n,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new de(o,c)),this.resultPoints.push(new de(u,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof oa))return!1;const i=n;return this.value===i.value}hashCode(){return this.value}}class un{constructor(){}static getRSSvalue(n,i,o){let u=0;for(let m of n)u+=m;let c=0,d=0,f=n.length;for(let m=0;m<f-1;m++){let w;for(w=1,d|=1<<m;w<n[m];w++,d&=~(1<<m)){let E=un.combins(u-w-1,f-m-2);if(o&&d===0&&u-w-(f-m-1)>=f-m-1&&(E-=un.combins(u-w-(f-m),f-m-2)),f-m-1>1){let S=0;for(let T=u-w-(f-m-2);T>i;T--)S+=un.combins(u-w-T-1,f-m-3);E-=S*(f-1-m)}else u-w>i&&E--;c+=E}u-=w}return c}static combins(n,i){let o,u;n-i>i?(u=i,o=n-i):(u=n-i,o=i);let c=1,d=1;for(let f=n;f>o;f--)c*=f,d<=u&&(c/=d,d++);for(;d<=u;)c/=d,d++;return c}}class Fm{static buildBitArray(n){let i=n.length*2-1;n[n.length-1].getRightChar()==null&&(i-=1);let o=12*i,u=new B(o),c=0,f=n[0].getRightChar().getValue();for(let m=11;m>=0;--m)f&1<<m&&u.set(c),c++;for(let m=1;m<n.length;++m){let w=n[m],E=w.getLeftChar().getValue();for(let S=11;S>=0;--S)E&1<<S&&u.set(c),c++;if(w.getRightChar()!=null){let S=w.getRightChar().getValue();for(let T=11;T>=0;--T)S&1<<T&&u.set(c),c++}}return u}}class vi{constructor(n,i){i?this.decodedInformation=null:(this.finished=n,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ou{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class mr extends ou{constructor(n,i){super(n),this.value=i}getValue(){return this.value}isFNC1(){return this.value===mr.FNC1}}mr.FNC1="$";class Ei extends ou{constructor(n,i,o){super(n),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Br extends ou{constructor(n,i,o){if(super(n),i<0||i>10||o<0||o>10)throw new U;this.firstDigit=i,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Br.FNC1}isSecondDigitFNC1(){return this.secondDigit===Br.FNC1}isAnyFNC1(){return this.firstDigit===Br.FNC1||this.secondDigit===Br.FNC1}}Br.FNC1=10;class fe{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new q;let i=n.substring(0,2);for(let c of fe.TWO_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(2,c[2],n):fe.processFixedAI(2,c[1],n);if(n.length<3)throw new q;let o=n.substring(0,3);for(let c of fe.THREE_DIGIT_DATA_LENGTH)if(c[0]===o)return c[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(3,c[2],n):fe.processFixedAI(3,c[1],n);for(let c of fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===o)return c[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(4,c[2],n):fe.processFixedAI(4,c[1],n);if(n.length<4)throw new q;let u=n.substring(0,4);for(let c of fe.FOUR_DIGIT_DATA_LENGTH)if(c[0]===u)return c[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(4,c[2],n):fe.processFixedAI(4,c[1],n);throw new q}static processFixedAI(n,i,o){if(o.length<n)throw new q;let u=o.substring(0,n);if(o.length<n+i)throw new q;let c=o.substring(n,n+i),d=o.substring(n+i),f="("+u+")"+c,m=fe.parseFieldsInGeneralPurpose(d);return m==null?f:f+m}static processVariableAI(n,i,o){let u=o.substring(0,n),c;o.length<n+i?c=o.length:c=n+i;let d=o.substring(n,c),f=o.substring(c),m="("+u+")"+d,w=fe.parseFieldsInGeneralPurpose(f);return w==null?m:m+w}}fe.VARIABLE_LENGTH=[],fe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",fe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",fe.VARIABLE_LENGTH,20],["22",fe.VARIABLE_LENGTH,29],["30",fe.VARIABLE_LENGTH,8],["37",fe.VARIABLE_LENGTH,8],["90",fe.VARIABLE_LENGTH,30],["91",fe.VARIABLE_LENGTH,30],["92",fe.VARIABLE_LENGTH,30],["93",fe.VARIABLE_LENGTH,30],["94",fe.VARIABLE_LENGTH,30],["95",fe.VARIABLE_LENGTH,30],["96",fe.VARIABLE_LENGTH,30],["97",fe.VARIABLE_LENGTH,3],["98",fe.VARIABLE_LENGTH,30],["99",fe.VARIABLE_LENGTH,30]],fe.THREE_DIGIT_DATA_LENGTH=[["240",fe.VARIABLE_LENGTH,30],["241",fe.VARIABLE_LENGTH,30],["242",fe.VARIABLE_LENGTH,6],["250",fe.VARIABLE_LENGTH,30],["251",fe.VARIABLE_LENGTH,30],["253",fe.VARIABLE_LENGTH,17],["254",fe.VARIABLE_LENGTH,20],["400",fe.VARIABLE_LENGTH,30],["401",fe.VARIABLE_LENGTH,30],["402",17],["403",fe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",fe.VARIABLE_LENGTH,20],["421",fe.VARIABLE_LENGTH,15],["422",3],["423",fe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",fe.VARIABLE_LENGTH,15],["391",fe.VARIABLE_LENGTH,18],["392",fe.VARIABLE_LENGTH,15],["393",fe.VARIABLE_LENGTH,18],["703",fe.VARIABLE_LENGTH,30]],fe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",fe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",fe.VARIABLE_LENGTH,20],["8003",fe.VARIABLE_LENGTH,30],["8004",fe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",fe.VARIABLE_LENGTH,30],["8008",fe.VARIABLE_LENGTH,12],["8018",18],["8020",fe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",fe.VARIABLE_LENGTH,70],["8200",fe.VARIABLE_LENGTH,70]];class qi{constructor(n){this.buffer=new se,this.information=n}decodeAllCodes(n,i){let o=i,u=null;do{let c=this.decodeGeneralPurposeField(o,u),d=fe.parseFieldsInGeneralPurpose(c.getNewString());if(d!=null&&n.append(d),c.isRemaining()?u=""+c.getRemainingValue():u=null,o===c.getNewPosition())break;o=c.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let i=n;i<n+3;++i)if(this.information.get(i))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(n,4);return c===0?new Br(this.information.getSize(),Br.FNC1,Br.FNC1):new Br(this.information.getSize(),c-1,Br.FNC1)}let i=this.extractNumericValueFromBitArray(n,7),o=(i-8)/11,u=(i-8)%11;return new Br(n+7,o,u)}extractNumericValueFromBitArray(n,i){return qi.extractNumericValueFromBitArray(this.information,n,i)}static extractNumericValueFromBitArray(n,i,o){let u=0;for(let c=0;c<o;++c)n.get(i+c)&&(u|=1<<o-c-1);return u}decodeGeneralPurposeField(n,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(n);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new Ei(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new Ei(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,i;do{let o=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),n=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),n=i.isFinished()):(i=this.parseNumericBlock(),n=i.isFinished()),!(o!==this.current.getPosition())&&!n)break}while(!n);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let i;return n.isSecondDigitFNC1()?i=new Ei(this.current.getPosition(),this.buffer.toString()):i=new Ei(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new vi(!0,i)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let i=new Ei(this.current.getPosition(),this.buffer.toString());return new vi(!0,i)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new vi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let i=new Ei(this.current.getPosition(),this.buffer.toString());return new vi(!0,i)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new vi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let i=new Ei(this.current.getPosition(),this.buffer.toString());return new vi(!0,i)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new vi(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,5);if(i>=5&&i<16)return!0;if(n+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(n,7);if(o>=64&&o<116)return!0;if(n+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(n,8);return u>=232&&u<253}decodeIsoIec646(n){let i=this.extractNumericValueFromBitArray(n,5);if(i===15)return new mr(n+5,mr.FNC1);if(i>=5&&i<15)return new mr(n+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(n,7);if(o>=64&&o<90)return new mr(n+7,""+(o+1));if(o>=90&&o<116)return new mr(n+7,""+(o+7));let u=this.extractNumericValueFromBitArray(n,8),c;switch(u){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new U}return new mr(n+8,c)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,5);if(i>=5&&i<16)return!0;if(n+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(n,6);return o>=16&&o<63}decodeAlphanumeric(n){let i=this.extractNumericValueFromBitArray(n,5);if(i===15)return new mr(n+5,mr.FNC1);if(i>=5&&i<15)return new mr(n+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(n,6);if(o>=32&&o<58)return new mr(n+6,""+(o+33));let u;switch(o){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new Le("Decoding invalid alphanumeric value: "+o)}return new mr(n+6,u)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let i=0;i<5&&i+n<this.information.getSize();++i)if(i===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+i))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let i=n;i<n+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let i=0;i<4&&i+n<this.information.getSize();++i)if(this.information.get(n+i))return!1;return!0}}class au{constructor(n){this.information=n,this.generalDecoder=new qi(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class xr extends au{constructor(n){super(n)}encodeCompressedGtin(n,i){n.append("(01)");let o=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,i,o)}encodeCompressedGtinWithoutAI(n,i,o){for(let u=0;u<4;++u){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*u,10);c/100===0&&n.append("0"),c/10===0&&n.append("0"),n.append(c)}xr.appendCheckDigit(n,o)}static appendCheckDigit(n,i){let o=0;for(let u=0;u<13;u++){let c=n.charAt(u+i).charCodeAt(0)-48;o+=u&1?c:3*c}o=10-o%10,o===10&&(o=0),n.append(o)}}xr.GTIN_SIZE=40;class Yi extends xr{constructor(n){super(n)}parseInformation(){let n=new se;n.append("(01)");let i=n.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(Yi.HEADER_SIZE,4);return n.append(o),this.encodeCompressedGtinWithoutAI(n,Yi.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(n,Yi.HEADER_SIZE+44)}}Yi.HEADER_SIZE=4;class aa extends au{constructor(n){super(n)}parseInformation(){let n=new se;return this.getGeneralDecoder().decodeAllCodes(n,aa.HEADER_SIZE)}}aa.HEADER_SIZE=5;class la extends xr{constructor(n){super(n)}encodeCompressedWeight(n,i,o){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(i,o);this.addWeightCode(n,u);let c=this.checkWeight(u),d=1e5;for(let f=0;f<5;++f)c/d===0&&n.append("0"),d/=10;n.append(c)}}class cn extends la{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=cn.HEADER_SIZE+la.GTIN_SIZE+cn.WEIGHT_SIZE)throw new q;let n=new se;return this.encodeCompressedGtin(n,cn.HEADER_SIZE),this.encodeCompressedWeight(n,cn.HEADER_SIZE+la.GTIN_SIZE,cn.WEIGHT_SIZE),n.toString()}}cn.HEADER_SIZE=5,cn.WEIGHT_SIZE=15;class Um extends cn{constructor(n){super(n)}addWeightCode(n,i){n.append("(3103)")}checkWeight(n){return n}}class zm extends cn{constructor(n){super(n)}addWeightCode(n,i){i<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class dn extends xr{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<dn.HEADER_SIZE+xr.GTIN_SIZE)throw new q;let n=new se;this.encodeCompressedGtin(n,dn.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(dn.HEADER_SIZE+xr.GTIN_SIZE,dn.LAST_DIGIT_SIZE);n.append("(392"),n.append(i),n.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(dn.HEADER_SIZE+xr.GTIN_SIZE+dn.LAST_DIGIT_SIZE,null);return n.append(o.getNewString()),n.toString()}}dn.HEADER_SIZE=8,dn.LAST_DIGIT_SIZE=2;class ur extends xr{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<ur.HEADER_SIZE+xr.GTIN_SIZE)throw new q;let n=new se;this.encodeCompressedGtin(n,ur.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(ur.HEADER_SIZE+xr.GTIN_SIZE,ur.LAST_DIGIT_SIZE);n.append("(393"),n.append(i),n.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(ur.HEADER_SIZE+xr.GTIN_SIZE+ur.LAST_DIGIT_SIZE,ur.FIRST_THREE_DIGITS_SIZE);o/100==0&&n.append("0"),o/10==0&&n.append("0"),n.append(o);let u=this.getGeneralDecoder().decodeGeneralPurposeField(ur.HEADER_SIZE+xr.GTIN_SIZE+ur.LAST_DIGIT_SIZE+ur.FIRST_THREE_DIGITS_SIZE,null);return n.append(u.getNewString()),n.toString()}}ur.HEADER_SIZE=8,ur.LAST_DIGIT_SIZE=2,ur.FIRST_THREE_DIGITS_SIZE=10;class mt extends la{constructor(n,i,o){super(n),this.dateCode=o,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=mt.HEADER_SIZE+mt.GTIN_SIZE+mt.WEIGHT_SIZE+mt.DATE_SIZE)throw new q;let n=new se;return this.encodeCompressedGtin(n,mt.HEADER_SIZE),this.encodeCompressedWeight(n,mt.HEADER_SIZE+mt.GTIN_SIZE,mt.WEIGHT_SIZE),this.encodeCompressedDate(n,mt.HEADER_SIZE+mt.GTIN_SIZE+mt.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,i){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(i,mt.DATE_SIZE);if(o==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let u=o%32;o/=32;let c=o%12+1;o/=12;let d=o;d/10==0&&n.append("0"),n.append(d),c/10==0&&n.append("0"),n.append(c),u/10==0&&n.append("0"),n.append(u)}addWeightCode(n,i){n.append("("),n.append(this.firstAIdigits),n.append(i/1e5),n.append(")")}checkWeight(n){return n%1e5}}mt.HEADER_SIZE=8,mt.WEIGHT_SIZE=20,mt.DATE_SIZE=16;function Ph(A){try{if(A.get(1))return new Yi(A);if(!A.get(2))return new aa(A);switch(qi.extractNumericValueFromBitArray(A,1,4)){case 4:return new Um(A);case 5:return new zm(A)}switch(qi.extractNumericValueFromBitArray(A,1,5)){case 12:return new dn(A);case 13:return new ur(A)}switch(qi.extractNumericValueFromBitArray(A,1,7)){case 56:return new mt(A,"310","11");case 57:return new mt(A,"320","11");case 58:return new mt(A,"310","13");case 59:return new mt(A,"320","13");case 60:return new mt(A,"310","15");case 61:return new mt(A,"320","15");case 62:return new mt(A,"310","17");case 63:return new mt(A,"320","17")}}catch(n){throw console.log(n),new Le("unknown decoder: "+A)}}class jn{constructor(n,i,o,u){this.leftchar=n,this.rightchar=i,this.finderpattern=o,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,i){return n instanceof jn?jn.equalsOrNull(n.leftchar,i.leftchar)&&jn.equalsOrNull(n.rightchar,i.rightchar)&&jn.equalsOrNull(n.finderpattern,i.finderpattern):!1}static equalsOrNull(n,i){return n===null?i===null:jn.equals(n,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class lu{constructor(n,i,o){this.pairs=n,this.rowNumber=i,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,i){return n instanceof lu?this.checkEqualitity(n,i)&&n.wasReversed===i.wasReversed:!1}checkEqualitity(n,i){if(!n||!i)return;let o;return n.forEach((u,c)=>{i.forEach(d=>{u.getLeftChar().getValue()===d.getLeftChar().getValue()&&u.getRightChar().getValue()===d.getRightChar().getValue()&&u.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(o=!0)})}),o}}class J extends rr{constructor(n){super(...arguments),this.pairs=new Array(J.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,i,o){this.pairs.length=0,this.startFromEven=!1;try{return J.constructResult(this.decodeRow2pairs(n,i))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,J.constructResult(this.decodeRow2pairs(n,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,i){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,n))}catch(c){if(c instanceof q){if(!this.pairs.length)throw new q;o=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(n,!1),u){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new q}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return n&&(this.rows=this.rows.reverse()),i}checkRows(n,i){for(let o=i;o<this.rows.length;o++){let u=this.rows[o];this.pairs.length=0;for(let d of n)this.pairs.push(d.getPairs());if(this.pairs.push(u.getPairs()),!J.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(n);c.push(u);try{return this.checkRows(c,o+1)}catch(d){this.verbose&&console.log(d)}}throw new q}static isValidSequence(n){for(let i of J.FINDER_PATTERN_SEQUENCES){if(n.length>i.length)continue;let o=!0;for(let u=0;u<n.length;u++)if(n[u].getFinderPattern().getValue()!=i[u]){o=!1;break}if(o)return!0}return!1}storeRow(n,i){let o=0,u=!1,c=!1;for(;o<this.rows.length;){let d=this.rows[o];if(d.getRowNumber()>n){c=d.isEquivalent(this.pairs);break}u=d.isEquivalent(this.pairs),o++}c||u||J.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new lu(this.pairs,n,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,i){for(let o of i)if(o.getPairs().length!==n.length){for(let u of o.getPairs())for(let c of n)if(jn.equals(u,c))break}}static isPartialRow(n,i){for(let o of i){let u=!0;for(let c of n){let d=!1;for(let f of o.getPairs())if(c.equals(f)){d=!0;break}if(!d){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(n){let i=Fm.buildBitArray(n),u=Ph(i).parseInformation(),c=n[0].getFinderPattern().getResultPoints(),d=n[n.length-1].getFinderPattern().getResultPoints(),f=[c[0],c[1],d[0],d[1]];return new ke(u,null,null,f,ue.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),i=n.getLeftChar(),o=n.getRightChar();if(o==null)return!1;let u=o.getChecksumPortion(),c=2;for(let f=1;f<this.pairs.size();++f){let m=this.pairs.get(f);u+=m.getLeftChar().getChecksumPortion(),c++;let w=m.getRightChar();w!=null&&(u+=w.getChecksumPortion(),c++)}return u%=211,211*(c-4)+u==i.getValue()}static getNextSecondBar(n,i){let o;return n.get(i)?(o=n.getNextUnset(i),o=n.getNextSet(o)):(o=n.getNextSet(i),o=n.getNextUnset(o)),o}retrieveNextPair(n,i,o){let u=i.length%2==0;this.startFromEven&&(u=!u);let c,d=!0,f=-1;do this.findNextPair(n,i,f),c=this.parseFoundFinderPattern(n,o,u),c==null?f=J.getNextSecondBar(n,this.startEnd[0]):d=!1;while(d);let m=this.decodeDataCharacter(n,c,u,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new q;let w;try{w=this.decodeDataCharacter(n,c,u,!1)}catch(E){w=null,this.verbose&&console.log(E)}return new jn(m,w,c,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,i,o){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=n.getSize(),d;o>=0?d=o:this.isEmptyPair(i)?d=0:d=i[i.length-1].getFinderPattern().getStartEnd()[1];let f=i.length%2!=0;this.startFromEven&&(f=!f);let m=!1;for(;d<c&&(m=!n.get(d),!!m);)d++;let w=0,E=d;for(let S=d;S<c;S++)if(n.get(S)!=m)u[w]++;else{if(w==3){if(f&&J.reverseCounters(u),J.isFinderPattern(u)){this.startEnd[0]=E,this.startEnd[1]=S;return}f&&J.reverseCounters(u),E+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,w--}else w++;u[w]=1,m=!m}throw new q}static reverseCounters(n){let i=n.length;for(let o=0;o<i/2;++o){let u=n[o];n[o]=n[i-o-1],n[i-o-1]=u}}parseFoundFinderPattern(n,i,o){let u,c,d;if(o){let w=this.startEnd[0]-1;for(;w>=0&&!n.get(w);)w--;w++,u=this.startEnd[0]-w,c=w,d=this.startEnd[1]}else c=this.startEnd[0],d=n.getNextUnset(this.startEnd[1]+1),u=d-this.startEnd[1];let f=this.getDecodeFinderCounters();L.arraycopy(f,0,f,1,f.length-1),f[0]=u;let m;try{m=this.parseFinderValue(f,J.FINDER_PATTERNS)}catch{return null}return new oa(m,[c,d],c,d,i)}decodeDataCharacter(n,i,o,u){let c=this.getDataCharacterCounters();for(let st=0;st<c.length;st++)c[st]=0;if(u)J.recordPatternInReverse(n,i.getStartEnd()[0],c);else{J.recordPattern(n,i.getStartEnd()[1],c);for(let st=0,Yt=c.length-1;st<Yt;st++,Yt--){let Sr=c[st];c[st]=c[Yt],c[Yt]=Sr}}let d=17,f=ye.sum(new Int32Array(c))/d,m=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(f-m)/m>.3)throw new q;let w=this.getOddCounts(),E=this.getEvenCounts(),S=this.getOddRoundingErrors(),T=this.getEvenRoundingErrors();for(let st=0;st<c.length;st++){let Yt=1*c[st]/f,Sr=Yt+.5;if(Sr<1){if(Yt<.3)throw new q;Sr=1}else if(Sr>8){if(Yt>8.7)throw new q;Sr=8}let ts=st/2;st&1?(E[ts]=Sr,T[ts]=Yt-Sr):(w[ts]=Sr,S[ts]=Yt-Sr)}this.adjustOddEvenCounts(d);let M=4*i.getValue()+(o?0:2)+(u?0:1)-1,z=0,V=0;for(let st=w.length-1;st>=0;st--){if(J.isNotA1left(i,o,u)){let Yt=J.WEIGHTS[M][2*st];V+=w[st]*Yt}z+=w[st]}let H=0;for(let st=E.length-1;st>=0;st--)if(J.isNotA1left(i,o,u)){let Yt=J.WEIGHTS[M][2*st+1];H+=E[st]*Yt}let Q=V+H;if(z&1||z>13||z<4)throw new q;let ie=(13-z)/2,oe=J.SYMBOL_WIDEST[ie],ee=9-oe,ze=un.getRSSvalue(w,oe,!0),De=un.getRSSvalue(E,ee,!1),yr=J.EVEN_TOTAL_SUBSET[ie],Yr=J.GSUM[ie],vr=ze*yr+De+Yr;return new Ki(vr,Q)}static isNotA1left(n,i,o){return!(n.getValue()==0&&i&&o)}adjustOddEvenCounts(n){let i=ye.sum(new Int32Array(this.getOddCounts())),o=ye.sum(new Int32Array(this.getEvenCounts())),u=!1,c=!1;i>13?c=!0:i<4&&(u=!0);let d=!1,f=!1;o>13?f=!0:o<4&&(d=!0);let m=i+o-n,w=(i&1)==1,E=(o&1)==0;if(m==1)if(w){if(E)throw new q;c=!0}else{if(!E)throw new q;f=!0}else if(m==-1)if(w){if(E)throw new q;u=!0}else{if(!E)throw new q;d=!0}else if(m==0){if(w){if(!E)throw new q;i<o?(u=!0,f=!0):(c=!0,d=!0)}else if(E)throw new q}else throw new q;if(u){if(c)throw new q;J.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&J.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(f)throw new q;J.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&J.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}J.SYMBOL_WIDEST=[7,5,4,3,1],J.EVEN_TOTAL_SUBSET=[4,20,52,104,204],J.GSUM=[0,348,1388,2948,3988],J.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],J.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],J.FINDER_PAT_A=0,J.FINDER_PAT_B=1,J.FINDER_PAT_C=2,J.FINDER_PAT_D=3,J.FINDER_PAT_E=4,J.FINDER_PAT_F=5,J.FINDER_PATTERN_SEQUENCES=[[J.FINDER_PAT_A,J.FINDER_PAT_A],[J.FINDER_PAT_A,J.FINDER_PAT_B,J.FINDER_PAT_B],[J.FINDER_PAT_A,J.FINDER_PAT_C,J.FINDER_PAT_B,J.FINDER_PAT_D],[J.FINDER_PAT_A,J.FINDER_PAT_E,J.FINDER_PAT_B,J.FINDER_PAT_D,J.FINDER_PAT_C],[J.FINDER_PAT_A,J.FINDER_PAT_E,J.FINDER_PAT_B,J.FINDER_PAT_D,J.FINDER_PAT_D,J.FINDER_PAT_F],[J.FINDER_PAT_A,J.FINDER_PAT_E,J.FINDER_PAT_B,J.FINDER_PAT_D,J.FINDER_PAT_E,J.FINDER_PAT_F,J.FINDER_PAT_F],[J.FINDER_PAT_A,J.FINDER_PAT_A,J.FINDER_PAT_B,J.FINDER_PAT_B,J.FINDER_PAT_C,J.FINDER_PAT_C,J.FINDER_PAT_D,J.FINDER_PAT_D],[J.FINDER_PAT_A,J.FINDER_PAT_A,J.FINDER_PAT_B,J.FINDER_PAT_B,J.FINDER_PAT_C,J.FINDER_PAT_C,J.FINDER_PAT_D,J.FINDER_PAT_E,J.FINDER_PAT_E],[J.FINDER_PAT_A,J.FINDER_PAT_A,J.FINDER_PAT_B,J.FINDER_PAT_B,J.FINDER_PAT_C,J.FINDER_PAT_C,J.FINDER_PAT_D,J.FINDER_PAT_E,J.FINDER_PAT_F,J.FINDER_PAT_F],[J.FINDER_PAT_A,J.FINDER_PAT_A,J.FINDER_PAT_B,J.FINDER_PAT_B,J.FINDER_PAT_C,J.FINDER_PAT_D,J.FINDER_PAT_D,J.FINDER_PAT_E,J.FINDER_PAT_E,J.FINDER_PAT_F,J.FINDER_PAT_F]],J.MAX_PAIRS=11;class Vm extends Ki{constructor(n,i,o){super(n,i),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class bt extends rr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,i,o){const u=this.decodePair(i,!1,n,o);bt.addOrTally(this.possibleLeftPairs,u),i.reverse();let c=this.decodePair(i,!0,n,o);bt.addOrTally(this.possibleRightPairs,c),i.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let f of this.possibleRightPairs)if(f.getCount()>1&&bt.checkChecksum(d,f))return bt.constructResult(d,f)}throw new q}static addOrTally(n,i){if(i==null)return;let o=!1;for(let u of n)if(u.getValue()===i.getValue()){u.incrementCount(),o=!0;break}o||n.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,i){let o=4537077*n.getValue()+i.getValue(),u=new String(o).toString(),c=new se;for(let w=13-u.length;w>0;w--)c.append("0");c.append(u);let d=0;for(let w=0;w<13;w++){let E=c.charAt(w).charCodeAt(0)-48;d+=w&1?E:3*E}d=10-d%10,d===10&&(d=0),c.append(d.toString());let f=n.getFinderPattern().getResultPoints(),m=i.getFinderPattern().getResultPoints();return new ke(c.toString(),null,0,[f[0],f[1],m[0],m[1]],ue.RSS_14,new Date().getTime())}static checkChecksum(n,i){let o=(n.getChecksumPortion()+16*i.getChecksumPortion())%79,u=9*n.getFinderPattern().getValue()+i.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,o===u}decodePair(n,i,o,u){try{let c=this.findFinderPattern(n,i),d=this.parseFoundFinderPattern(n,o,i,c),f=u==null?null:u.get($.NEED_RESULT_POINT_CALLBACK);if(f!=null){let E=(c[0]+c[1])/2;i&&(E=n.getSize()-1-E),f.foundPossibleResultPoint(new de(E,o))}let m=this.decodeDataCharacter(n,d,!0),w=this.decodeDataCharacter(n,d,!1);return new Vm(1597*m.getValue()+w.getValue(),m.getChecksumPortion()+4*w.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(n,i,o){let u=this.getDataCharacterCounters();for(let H=0;H<u.length;H++)u[H]=0;if(o)at.recordPatternInReverse(n,i.getStartEnd()[0],u);else{at.recordPattern(n,i.getStartEnd()[1]+1,u);for(let H=0,Q=u.length-1;H<Q;H++,Q--){let ie=u[H];u[H]=u[Q],u[Q]=ie}}let c=o?16:15,d=ye.sum(new Int32Array(u))/c,f=this.getOddCounts(),m=this.getEvenCounts(),w=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let H=0;H<u.length;H++){let Q=u[H]/d,ie=Math.floor(Q+.5);ie<1?ie=1:ie>8&&(ie=8);let oe=Math.floor(H/2);H&1?(m[oe]=ie,E[oe]=Q-ie):(f[oe]=ie,w[oe]=Q-ie)}this.adjustOddEvenCounts(o,c);let S=0,T=0;for(let H=f.length-1;H>=0;H--)T*=9,T+=f[H],S+=f[H];let M=0,z=0;for(let H=m.length-1;H>=0;H--)M*=9,M+=m[H],z+=m[H];let V=T+3*M;if(o){if(S&1||S>12||S<4)throw new q;let H=(12-S)/2,Q=bt.OUTSIDE_ODD_WIDEST[H],ie=9-Q,oe=un.getRSSvalue(f,Q,!1),ee=un.getRSSvalue(m,ie,!0),ze=bt.OUTSIDE_EVEN_TOTAL_SUBSET[H],De=bt.OUTSIDE_GSUM[H];return new Ki(oe*ze+ee+De,V)}else{if(z&1||z>10||z<4)throw new q;let H=(10-z)/2,Q=bt.INSIDE_ODD_WIDEST[H],ie=9-Q,oe=un.getRSSvalue(f,Q,!0),ee=un.getRSSvalue(m,ie,!1),ze=bt.INSIDE_ODD_TOTAL_SUBSET[H],De=bt.INSIDE_GSUM[H];return new Ki(ee*ze+oe+De,V)}}findFinderPattern(n,i){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=n.getSize(),c=!1,d=0;for(;d<u&&(c=!n.get(d),i!==c);)d++;let f=0,m=d;for(let w=d;w<u;w++)if(n.get(w)!==c)o[f]++;else{if(f===3){if(rr.isFinderPattern(o))return[m,w];m+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,f--}else f++;o[f]=1,c=!c}throw new q}parseFoundFinderPattern(n,i,o,u){let c=n.get(u[0]),d=u[0]-1;for(;d>=0&&c!==n.get(d);)d--;d++;const f=u[0]-d,m=this.getDecodeFinderCounters(),w=new Int32Array(m.length);L.arraycopy(m,0,w,1,m.length-1),w[0]=f;const E=this.parseFinderValue(w,bt.FINDER_PATTERNS);let S=d,T=u[1];return o&&(S=n.getSize()-1-S,T=n.getSize()-1-T),new oa(E,[d,u[1]],S,T,i)}adjustOddEvenCounts(n,i){let o=ye.sum(new Int32Array(this.getOddCounts())),u=ye.sum(new Int32Array(this.getEvenCounts())),c=!1,d=!1,f=!1,m=!1;n?(o>12?d=!0:o<4&&(c=!0),u>12?m=!0:u<4&&(f=!0)):(o>11?d=!0:o<5&&(c=!0),u>10?m=!0:u<4&&(f=!0));let w=o+u-i,E=(o&1)===(n?1:0),S=(u&1)===1;if(w===1)if(E){if(S)throw new q;d=!0}else{if(!S)throw new q;m=!0}else if(w===-1)if(E){if(S)throw new q;c=!0}else{if(!S)throw new q;f=!0}else if(w===0){if(E){if(!S)throw new q;o<u?(c=!0,m=!0):(d=!0,f=!0)}else if(S)throw new q}else throw new q;if(c){if(d)throw new q;rr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&rr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(m)throw new q;rr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&rr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}bt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],bt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],bt.OUTSIDE_GSUM=[0,161,961,2015,2715],bt.INSIDE_GSUM=[0,336,1036,1516],bt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],bt.INSIDE_ODD_WIDEST=[2,4,6,8],bt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Zi extends at{constructor(n,i){super(),this.readers=[],this.verbose=i===!0;const o=n?n.get($.POSSIBLE_FORMATS):null,u=n&&n.get($.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(ue.EAN_13)||o.includes(ue.UPC_A)||o.includes(ue.EAN_8)||o.includes(ue.UPC_E))&&this.readers.push(new su(n)),o.includes(ue.CODE_39)&&this.readers.push(new Mt(u)),o.includes(ue.CODE_128)&&this.readers.push(new ae),o.includes(ue.ITF)&&this.readers.push(new nt),o.includes(ue.RSS_14)&&this.readers.push(new bt),o.includes(ue.RSS_EXPANDED)&&this.readers.push(new J(this.verbose))):(this.readers.push(new su(n)),this.readers.push(new Mt),this.readers.push(new su(n)),this.readers.push(new ae),this.readers.push(new nt),this.readers.push(new bt),this.readers.push(new J(this.verbose)))}decodeRow(n,i,o){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(n,i,o)}catch{}throw new q}reset(){this.readers.forEach(n=>n.reset())}}class Wm extends he{constructor(n=500,i){super(new Zi(i),n,i)}}class Ye{constructor(n,i,o){this.ecCodewords=n,this.ecBlocks=[i],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ke{constructor(n,i){this.count=n,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ve{constructor(n,i,o,u,c,d){this.versionNumber=n,this.symbolSizeRows=i,this.symbolSizeColumns=o,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=c,this.ecBlocks=d;let f=0;const m=d.getECCodewords(),w=d.getECBlocks();for(let E of w)f+=E.getCount()*(E.getDataCodewords()+m);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,i){if(n&1||i&1)throw new U;for(let o of Ve.VERSIONS)if(o.symbolSizeRows===n&&o.symbolSizeColumns===i)return o;throw new U}toString(){return""+this.versionNumber}static buildVersions(){return[new Ve(1,10,10,8,8,new Ye(5,new Ke(1,3))),new Ve(2,12,12,10,10,new Ye(7,new Ke(1,5))),new Ve(3,14,14,12,12,new Ye(10,new Ke(1,8))),new Ve(4,16,16,14,14,new Ye(12,new Ke(1,12))),new Ve(5,18,18,16,16,new Ye(14,new Ke(1,18))),new Ve(6,20,20,18,18,new Ye(18,new Ke(1,22))),new Ve(7,22,22,20,20,new Ye(20,new Ke(1,30))),new Ve(8,24,24,22,22,new Ye(24,new Ke(1,36))),new Ve(9,26,26,24,24,new Ye(28,new Ke(1,44))),new Ve(10,32,32,14,14,new Ye(36,new Ke(1,62))),new Ve(11,36,36,16,16,new Ye(42,new Ke(1,86))),new Ve(12,40,40,18,18,new Ye(48,new Ke(1,114))),new Ve(13,44,44,20,20,new Ye(56,new Ke(1,144))),new Ve(14,48,48,22,22,new Ye(68,new Ke(1,174))),new Ve(15,52,52,24,24,new Ye(42,new Ke(2,102))),new Ve(16,64,64,14,14,new Ye(56,new Ke(2,140))),new Ve(17,72,72,16,16,new Ye(36,new Ke(4,92))),new Ve(18,80,80,18,18,new Ye(48,new Ke(4,114))),new Ve(19,88,88,20,20,new Ye(56,new Ke(4,144))),new Ve(20,96,96,22,22,new Ye(68,new Ke(4,174))),new Ve(21,104,104,24,24,new Ye(56,new Ke(6,136))),new Ve(22,120,120,18,18,new Ye(68,new Ke(6,175))),new Ve(23,132,132,20,20,new Ye(62,new Ke(8,163))),new Ve(24,144,144,22,22,new Ye(62,new Ke(8,156),new Ke(2,155))),new Ve(25,8,18,6,16,new Ye(7,new Ke(1,5))),new Ve(26,8,32,6,14,new Ye(11,new Ke(1,10))),new Ve(27,12,26,10,24,new Ye(14,new Ke(1,16))),new Ve(28,12,36,10,16,new Ye(18,new Ke(1,22))),new Ve(29,16,36,14,16,new Ye(24,new Ke(1,32))),new Ve(30,16,48,14,22,new Ye(28,new Ke(1,49)))]}}Ve.VERSIONS=Ve.buildVersions();class uu{constructor(n){const i=n.getHeight();if(i<8||i>144||i&1)throw new U;this.version=uu.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new Oe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const i=n.getHeight(),o=n.getWidth();return Ve.getVersionForDimensions(i,o)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let i=0,o=4,u=0;const c=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let f=!1,m=!1,w=!1,E=!1;do if(o===c&&u===0&&!f)n[i++]=this.readCorner1(c,d)&255,o-=2,u+=2,f=!0;else if(o===c-2&&u===0&&d&3&&!m)n[i++]=this.readCorner2(c,d)&255,o-=2,u+=2,m=!0;else if(o===c+4&&u===2&&!(d&7)&&!w)n[i++]=this.readCorner3(c,d)&255,o-=2,u+=2,w=!0;else if(o===c-2&&u===0&&(d&7)===4&&!E)n[i++]=this.readCorner4(c,d)&255,o-=2,u+=2,E=!0;else{do o<c&&u>=0&&!this.readMappingMatrix.get(u,o)&&(n[i++]=this.readUtah(o,u,c,d)&255),o-=2,u+=2;while(o>=0&&u<d);o+=1,u+=3;do o>=0&&u<d&&!this.readMappingMatrix.get(u,o)&&(n[i++]=this.readUtah(o,u,c,d)&255),o+=2,u-=2;while(o<c&&u>=0);o+=3,u+=1}while(o<c||u<d);if(i!==this.version.getTotalCodewords())throw new U;return n}readModule(n,i,o,u){return n<0&&(n+=o,i+=4-(o+4&7)),i<0&&(i+=u,n+=4-(u+4&7)),this.readMappingMatrix.set(i,n),this.mappingBitMatrix.get(i,n)}readUtah(n,i,o,u){let c=0;return this.readModule(n-2,i-2,o,u)&&(c|=1),c<<=1,this.readModule(n-2,i-1,o,u)&&(c|=1),c<<=1,this.readModule(n-1,i-2,o,u)&&(c|=1),c<<=1,this.readModule(n-1,i-1,o,u)&&(c|=1),c<<=1,this.readModule(n-1,i,o,u)&&(c|=1),c<<=1,this.readModule(n,i-2,o,u)&&(c|=1),c<<=1,this.readModule(n,i-1,o,u)&&(c|=1),c<<=1,this.readModule(n,i,o,u)&&(c|=1),c}readCorner1(n,i){let o=0;return this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,1,n,i)&&(o|=1),o<<=1,this.readModule(n-1,2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o<<=1,this.readModule(2,i-1,n,i)&&(o|=1),o<<=1,this.readModule(3,i-1,n,i)&&(o|=1),o}readCorner2(n,i){let o=0;return this.readModule(n-3,0,n,i)&&(o|=1),o<<=1,this.readModule(n-2,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(0,i-4,n,i)&&(o|=1),o<<=1,this.readModule(0,i-3,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o}readCorner3(n,i){let o=0;return this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,i-1,n,i)&&(o|=1),o<<=1,this.readModule(0,i-3,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-3,n,i)&&(o|=1),o<<=1,this.readModule(1,i-2,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o}readCorner4(n,i){let o=0;return this.readModule(n-3,0,n,i)&&(o|=1),o<<=1,this.readModule(n-2,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o<<=1,this.readModule(2,i-1,n,i)&&(o|=1),o<<=1,this.readModule(3,i-1,n,i)&&(o|=1),o}extractDataRegion(n){const i=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(n.getHeight()!==i)throw new v("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),d=i/u|0,f=o/c|0,m=d*u,w=f*c,E=new Oe(w,m);for(let S=0;S<d;++S){const T=S*u;for(let M=0;M<f;++M){const z=M*c;for(let V=0;V<u;++V){const H=S*(u+2)+1+V,Q=T+V;for(let ie=0;ie<c;++ie){const oe=M*(c+2)+1+ie;if(n.get(oe,H)){const ee=z+ie;E.set(ee,Q)}}}}}return E}}class cu{constructor(n,i){this.numDataCodewords=n,this.codewords=i}static getDataBlocks(n,i){const o=i.getECBlocks();let u=0;const c=o.getECBlocks();for(let V of c)u+=V.getCount();const d=new Array(u);let f=0;for(let V of c)for(let H=0;H<V.getCount();H++){const Q=V.getDataCodewords(),ie=o.getECCodewords()+Q;d[f++]=new cu(Q,new Uint8Array(ie))}const w=d[0].codewords.length-o.getECCodewords(),E=w-1;let S=0;for(let V=0;V<E;V++)for(let H=0;H<f;H++)d[H].codewords[V]=n[S++];const T=i.getVersionNumber()===24,M=T?8:f;for(let V=0;V<M;V++)d[V].codewords[w-1]=n[S++];const z=d[0].codewords.length;for(let V=w;V<z;V++)for(let H=0;H<f;H++){const Q=T?(H+8)%f:H,ie=T&&Q>7?V-1:V;d[Q].codewords[ie]=n[S++]}if(S!==n.length)throw new v;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class du{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new v(""+n);let i=0,o=this.bitOffset,u=this.byteOffset;const c=this.bytes;if(o>0){const d=8-o,f=n<d?n:d,m=d-f,w=255>>8-f<<m;i=(c[u]&w)>>m,n-=f,o+=f,o===8&&(o=0,u++)}if(n>0){for(;n>=8;)i=i<<8|c[u]&255,u++,n-=8;if(n>0){const d=8-n,f=255>>d<<d;i=i<<n|(c[u]&f)>>d,o+=n}}return this.bitOffset=o,this.byteOffset=u,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Lt;(function(A){A[A.PAD_ENCODE=0]="PAD_ENCODE",A[A.ASCII_ENCODE=1]="ASCII_ENCODE",A[A.C40_ENCODE=2]="C40_ENCODE",A[A.TEXT_ENCODE=3]="TEXT_ENCODE",A[A.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",A[A.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",A[A.BASE256_ENCODE=6]="BASE256_ENCODE"})(Lt||(Lt={}));class Fn{static decode(n){const i=new du(n),o=new se,u=new se,c=new Array;let d=Lt.ASCII_ENCODE;do if(d===Lt.ASCII_ENCODE)d=this.decodeAsciiSegment(i,o,u);else{switch(d){case Lt.C40_ENCODE:this.decodeC40Segment(i,o);break;case Lt.TEXT_ENCODE:this.decodeTextSegment(i,o);break;case Lt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,o);break;case Lt.EDIFACT_ENCODE:this.decodeEdifactSegment(i,o);break;case Lt.BASE256_ENCODE:this.decodeBase256Segment(i,o,c);break;default:throw new U}d=Lt.ASCII_ENCODE}while(d!==Lt.PAD_ENCODE&&i.available()>0);return u.length()>0&&o.append(u.toString()),new Fe(n,o.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(n,i,o){let u=!1;do{let c=n.readBits(8);if(c===0)throw new U;if(c<=128)return u&&(c+=128),i.append(String.fromCharCode(c-1)),Lt.ASCII_ENCODE;if(c===129)return Lt.PAD_ENCODE;if(c<=229){const d=c-130;d<10&&i.append("0"),i.append(""+d)}else switch(c){case 230:return Lt.C40_ENCODE;case 231:return Lt.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:i.append("[)>05"),o.insert(0,"");break;case 237:i.append("[)>06"),o.insert(0,"");break;case 238:return Lt.ANSIX12_ENCODE;case 239:return Lt.TEXT_ENCODE;case 240:return Lt.EDIFACT_ENCODE;case 241:break;default:if(c!==254||n.available()!==0)throw new U;break}}while(n.available()>0);return Lt.ASCII_ENCODE}static decodeC40Segment(n,i){let o=!1;const u=[];let c=0;do{if(n.available()===8)return;const d=n.readBits(8);if(d===254)return;this.parseTwoBytes(d,n.readBits(8),u);for(let f=0;f<3;f++){const m=u[f];switch(c){case 0:if(m<3)c=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const w=this.C40_BASIC_SET_CHARS[m];o?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):i.append(w)}else throw new U;break;case 1:o?(i.append(String.fromCharCode(m+128)),o=!1):i.append(String.fromCharCode(m)),c=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const w=this.C40_SHIFT2_SET_CHARS[m];o?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):i.append(w)}else switch(m){case 27:i.append("");break;case 30:o=!0;break;default:throw new U}c=0;break;case 3:o?(i.append(String.fromCharCode(m+224)),o=!1):i.append(String.fromCharCode(m+96)),c=0;break;default:throw new U}}}while(n.available()>0)}static decodeTextSegment(n,i){let o=!1,u=[],c=0;do{if(n.available()===8)return;const d=n.readBits(8);if(d===254)return;this.parseTwoBytes(d,n.readBits(8),u);for(let f=0;f<3;f++){const m=u[f];switch(c){case 0:if(m<3)c=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const w=this.TEXT_BASIC_SET_CHARS[m];o?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):i.append(w)}else throw new U;break;case 1:o?(i.append(String.fromCharCode(m+128)),o=!1):i.append(String.fromCharCode(m)),c=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const w=this.TEXT_SHIFT2_SET_CHARS[m];o?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):i.append(w)}else switch(m){case 27:i.append("");break;case 30:o=!0;break;default:throw new U}c=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const w=this.TEXT_SHIFT3_SET_CHARS[m];o?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):i.append(w),c=0}else throw new U;break;default:throw new U}}}while(n.available()>0)}static decodeAnsiX12Segment(n,i){const o=[];do{if(n.available()===8)return;const u=n.readBits(8);if(u===254)return;this.parseTwoBytes(u,n.readBits(8),o);for(let c=0;c<3;c++){const d=o[c];switch(d){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(d<14)i.append(String.fromCharCode(d+44));else if(d<40)i.append(String.fromCharCode(d+51));else throw new U;break}}}while(n.available()>0)}static parseTwoBytes(n,i,o){let u=(n<<8)+i-1,c=Math.floor(u/1600);o[0]=c,u-=c*1600,c=Math.floor(u/40),o[1]=c,o[2]=u-c*40}static decodeEdifactSegment(n,i){do{if(n.available()<=16)return;for(let o=0;o<4;o++){let u=n.readBits(6);if(u===31){const c=8-n.getBitOffset();c!==8&&n.readBits(c);return}u&32||(u|=64),i.append(String.fromCharCode(u))}}while(n.available()>0)}static decodeBase256Segment(n,i,o){let u=1+n.getByteOffset();const c=this.unrandomize255State(n.readBits(8),u++);let d;if(c===0?d=n.available()/8|0:c<250?d=c:d=250*(c-249)+this.unrandomize255State(n.readBits(8),u++),d<0)throw new U;const f=new Uint8Array(d);for(let m=0;m<d;m++){if(n.available()<8)throw new U;f[m]=this.unrandomize255State(n.readBits(8),u++)}o.push(f);try{i.append(Y.decode(f,K.ISO88591))}catch(m){throw new Le("Platform does not support required encoding: "+m.message)}}static unrandomize255State(n,i){const o=149*i%255+1,u=n-o;return u>=0?u:u+256}}Fn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Fn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Fn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Fn.TEXT_SHIFT2_SET_CHARS=Fn.C40_SHIFT2_SET_CHARS,Fn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Hm{constructor(){this.rsDecoder=new Pe(Ne.DATA_MATRIX_FIELD_256)}decode(n){const i=new uu(n),o=i.getVersion(),u=i.readCodewords(),c=cu.getDataBlocks(u,o);let d=0;for(let w of c)d+=w.getNumDataCodewords();const f=new Uint8Array(d),m=c.length;for(let w=0;w<m;w++){const E=c[w],S=E.getCodewords(),T=E.getNumDataCodewords();this.correctErrors(S,T);for(let M=0;M<T;M++)f[M*m+w]=S[M]}return Fn.decode(f)}correctErrors(n,i){const o=new Int32Array(n);try{this.rsDecoder.decode(o,n.length-i)}catch{throw new N}for(let u=0;u<i;u++)n[u]=o[u]}}class Tt{constructor(n){this.image=n,this.rectangleDetector=new ot(this.image)}detect(){const n=this.rectangleDetector.detect();let i=this.detectSolid1(n);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new q;i=this.shiftToModuleCenter(i);const o=i[0],u=i[1],c=i[2],d=i[3];let f=this.transitionsBetween(o,d)+1,m=this.transitionsBetween(c,d)+1;(f&1)===1&&(f+=1),(m&1)===1&&(m+=1),4*f<7*m&&4*m<7*f&&(f=m=Math.max(f,m));let w=Tt.sampleGrid(this.image,o,u,c,d,f,m);return new lr(w,[o,u,c,d])}static shiftPoint(n,i,o){let u=(i.getX()-n.getX())/(o+1),c=(i.getY()-n.getY())/(o+1);return new de(n.getX()+u,n.getY()+c)}static moveAway(n,i,o){let u=n.getX(),c=n.getY();return u<i?u-=1:u+=1,c<o?c-=1:c+=1,new de(u,c)}detectSolid1(n){let i=n[0],o=n[1],u=n[3],c=n[2],d=this.transitionsBetween(i,o),f=this.transitionsBetween(o,u),m=this.transitionsBetween(u,c),w=this.transitionsBetween(c,i),E=d,S=[c,i,o,u];return E>f&&(E=f,S[0]=i,S[1]=o,S[2]=u,S[3]=c),E>m&&(E=m,S[0]=o,S[1]=u,S[2]=c,S[3]=i),E>w&&(S[0]=u,S[1]=c,S[2]=i,S[3]=o),S}detectSolid2(n){let i=n[0],o=n[1],u=n[2],c=n[3],d=this.transitionsBetween(i,c),f=Tt.shiftPoint(o,u,(d+1)*4),m=Tt.shiftPoint(u,o,(d+1)*4),w=this.transitionsBetween(f,i),E=this.transitionsBetween(m,c);return w<E?(n[0]=i,n[1]=o,n[2]=u,n[3]=c):(n[0]=o,n[1]=u,n[2]=c,n[3]=i),n}correctTopRight(n){let i=n[0],o=n[1],u=n[2],c=n[3],d=this.transitionsBetween(i,c),f=this.transitionsBetween(o,c),m=Tt.shiftPoint(i,o,(f+1)*4),w=Tt.shiftPoint(u,o,(d+1)*4);d=this.transitionsBetween(m,c),f=this.transitionsBetween(w,c);let E=new de(c.getX()+(u.getX()-o.getX())/(d+1),c.getY()+(u.getY()-o.getY())/(d+1)),S=new de(c.getX()+(i.getX()-o.getX())/(f+1),c.getY()+(i.getY()-o.getY())/(f+1));if(!this.isValid(E))return this.isValid(S)?S:null;if(!this.isValid(S))return E;let T=this.transitionsBetween(m,E)+this.transitionsBetween(w,E),M=this.transitionsBetween(m,S)+this.transitionsBetween(w,S);return T>M?E:S}shiftToModuleCenter(n){let i=n[0],o=n[1],u=n[2],c=n[3],d=this.transitionsBetween(i,c)+1,f=this.transitionsBetween(u,c)+1,m=Tt.shiftPoint(i,o,f*4),w=Tt.shiftPoint(u,o,d*4);d=this.transitionsBetween(m,c)+1,f=this.transitionsBetween(w,c)+1,(d&1)===1&&(d+=1),(f&1)===1&&(f+=1);let E=(i.getX()+o.getX()+u.getX()+c.getX())/4,S=(i.getY()+o.getY()+u.getY()+c.getY())/4;i=Tt.moveAway(i,E,S),o=Tt.moveAway(o,E,S),u=Tt.moveAway(u,E,S),c=Tt.moveAway(c,E,S);let T,M;return m=Tt.shiftPoint(i,o,f*4),m=Tt.shiftPoint(m,c,d*4),T=Tt.shiftPoint(o,i,f*4),T=Tt.shiftPoint(T,u,d*4),w=Tt.shiftPoint(u,c,f*4),w=Tt.shiftPoint(w,o,d*4),M=Tt.shiftPoint(c,u,f*4),M=Tt.shiftPoint(M,i,d*4),[m,T,w,M]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,i,o,u,c,d,f){return Vt.getInstance().sampleGrid(n,d,f,.5,.5,d-.5,.5,d-.5,f-.5,.5,f-.5,i.getX(),i.getY(),c.getX(),c.getY(),u.getX(),u.getY(),o.getX(),o.getY())}transitionsBetween(n,i){let o=Math.trunc(n.getX()),u=Math.trunc(n.getY()),c=Math.trunc(i.getX()),d=Math.trunc(i.getY()),f=Math.abs(d-u)>Math.abs(c-o);if(f){let V=o;o=u,u=V,V=c,c=d,d=V}let m=Math.abs(c-o),w=Math.abs(d-u),E=-m/2,S=u<d?1:-1,T=o<c?1:-1,M=0,z=this.image.get(f?u:o,f?o:u);for(let V=o,H=u;V!==c;V+=T){let Q=this.image.get(f?H:V,f?V:H);if(Q!==z&&(M++,z=Q),E+=w,E>0){if(H===d)break;H+=S,E-=m}}return M}}class Un{constructor(){this.decoder=new Hm}decode(n,i=null){let o,u;if(i!=null&&i.has($.PURE_BARCODE)){const w=Un.extractPureBits(n.getBlackMatrix());o=this.decoder.decode(w),u=Un.NO_POINTS}else{const w=new Tt(n.getBlackMatrix()).detect();o=this.decoder.decode(w.getBits()),u=w.getPoints()}const c=o.getRawBytes(),d=new ke(o.getText(),c,8*c.length,u,ue.DATA_MATRIX,L.currentTimeMillis()),f=o.getByteSegments();f!=null&&d.putMetadata(be.BYTE_SEGMENTS,f);const m=o.getECLevel();return m!=null&&d.putMetadata(be.ERROR_CORRECTION_LEVEL,m),d}reset(){}static extractPureBits(n){const i=n.getTopLeftOnBit(),o=n.getBottomRightOnBit();if(i==null||o==null)throw new q;const u=this.moduleSize(i,n);let c=i[1];const d=o[1];let f=i[0];const w=(o[0]-f+1)/u,E=(d-c+1)/u;if(w<=0||E<=0)throw new q;const S=u/2;c+=S,f+=S;const T=new Oe(w,E);for(let M=0;M<E;M++){const z=c+M*u;for(let V=0;V<w;V++)n.get(f+V*u,z)&&T.set(V,M)}return T}static moduleSize(n,i){const o=i.getWidth();let u=n[0];const c=n[1];for(;u<o&&i.get(u,c);)u++;if(u===o)throw new q;const d=u-n[0];if(d===0)throw new q;return d}}Un.NO_POINTS=[];class Gm extends he{constructor(n=500){super(new Un,n)}}var Qi;(function(A){A[A.L=0]="L",A[A.M=1]="M",A[A.Q=2]="Q",A[A.H=3]="H"})(Qi||(Qi={}));class lt{constructor(n,i,o){this.value=n,this.stringValue=i,this.bits=o,lt.FOR_BITS.set(o,this),lt.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return lt.L;case"M":return lt.M;case"Q":return lt.Q;case"H":return lt.H;default:throw new y(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof lt))return!1;const i=n;return this.value===i.value}static forBits(n){if(n<0||n>=lt.FOR_BITS.size)throw new v;return lt.FOR_BITS.get(n)}}lt.FOR_BITS=new Map,lt.FOR_VALUE=new Map,lt.L=new lt(Qi.L,"L",1),lt.M=new lt(Qi.M,"M",0),lt.Q=new lt(Qi.Q,"Q",3),lt.H=new lt(Qi.H,"H",2);class nr{constructor(n){this.errorCorrectionLevel=lt.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,i){return I.bitCount(n^i)}static decodeFormatInformation(n,i){const o=nr.doDecodeFormatInformation(n,i);return o!==null?o:nr.doDecodeFormatInformation(n^nr.FORMAT_INFO_MASK_QR,i^nr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,i){let o=Number.MAX_SAFE_INTEGER,u=0;for(const c of nr.FORMAT_INFO_DECODE_LOOKUP){const d=c[0];if(d===n||d===i)return new nr(c[1]);let f=nr.numBitsDiffering(n,d);f<o&&(u=c[1],o=f),n!==i&&(f=nr.numBitsDiffering(i,d),f<o&&(u=c[1],o=f))}return o<=3?new nr(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof nr))return!1;const i=n;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}nr.FORMAT_INFO_MASK_QR=21522,nr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class G{constructor(n,...i){this.ecCodewordsPerBlock=n,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const i=this.ecBlocks;for(const o of i)n+=o.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class P{constructor(n,i){this.count=n,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class _e{constructor(n,i,...o){this.versionNumber=n,this.alignmentPatternCenters=i,this.ecBlocks=o;let u=0;const c=o[0].getECCodewordsPerBlock(),d=o[0].getECBlocks();for(const f of d)u+=f.getCount()*(f.getDataCodewords()+c);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new U;try{return this.getVersionForNumber((n-17)/4)}catch{throw new U}}static getVersionForNumber(n){if(n<1||n>40)throw new v;return _e.VERSIONS[n-1]}static decodeVersionInformation(n){let i=Number.MAX_SAFE_INTEGER,o=0;for(let u=0;u<_e.VERSION_DECODE_INFO.length;u++){const c=_e.VERSION_DECODE_INFO[u];if(c===n)return _e.getVersionForNumber(u+7);const d=nr.numBitsDiffering(n,c);d<i&&(o=u+7,i=d)}return i<=3?_e.getVersionForNumber(o):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),i=new Oe(n);i.setRegion(0,0,9,9),i.setRegion(n-8,0,8,9),i.setRegion(0,n-8,9,8);const o=this.alignmentPatternCenters.length;for(let u=0;u<o;u++){const c=this.alignmentPatternCenters[u]-2;for(let d=0;d<o;d++)u===0&&(d===0||d===o-1)||u===o-1&&d===0||i.setRegion(this.alignmentPatternCenters[d]-2,c,5,5)}return i.setRegion(6,9,1,n-17),i.setRegion(9,6,n-17,1),this.versionNumber>6&&(i.setRegion(n-11,0,3,6),i.setRegion(0,n-11,6,3)),i}toString(){return""+this.versionNumber}}_e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),_e.VERSIONS=[new _e(1,new Int32Array(0),new G(7,new P(1,19)),new G(10,new P(1,16)),new G(13,new P(1,13)),new G(17,new P(1,9))),new _e(2,Int32Array.from([6,18]),new G(10,new P(1,34)),new G(16,new P(1,28)),new G(22,new P(1,22)),new G(28,new P(1,16))),new _e(3,Int32Array.from([6,22]),new G(15,new P(1,55)),new G(26,new P(1,44)),new G(18,new P(2,17)),new G(22,new P(2,13))),new _e(4,Int32Array.from([6,26]),new G(20,new P(1,80)),new G(18,new P(2,32)),new G(26,new P(2,24)),new G(16,new P(4,9))),new _e(5,Int32Array.from([6,30]),new G(26,new P(1,108)),new G(24,new P(2,43)),new G(18,new P(2,15),new P(2,16)),new G(22,new P(2,11),new P(2,12))),new _e(6,Int32Array.from([6,34]),new G(18,new P(2,68)),new G(16,new P(4,27)),new G(24,new P(4,19)),new G(28,new P(4,15))),new _e(7,Int32Array.from([6,22,38]),new G(20,new P(2,78)),new G(18,new P(4,31)),new G(18,new P(2,14),new P(4,15)),new G(26,new P(4,13),new P(1,14))),new _e(8,Int32Array.from([6,24,42]),new G(24,new P(2,97)),new G(22,new P(2,38),new P(2,39)),new G(22,new P(4,18),new P(2,19)),new G(26,new P(4,14),new P(2,15))),new _e(9,Int32Array.from([6,26,46]),new G(30,new P(2,116)),new G(22,new P(3,36),new P(2,37)),new G(20,new P(4,16),new P(4,17)),new G(24,new P(4,12),new P(4,13))),new _e(10,Int32Array.from([6,28,50]),new G(18,new P(2,68),new P(2,69)),new G(26,new P(4,43),new P(1,44)),new G(24,new P(6,19),new P(2,20)),new G(28,new P(6,15),new P(2,16))),new _e(11,Int32Array.from([6,30,54]),new G(20,new P(4,81)),new G(30,new P(1,50),new P(4,51)),new G(28,new P(4,22),new P(4,23)),new G(24,new P(3,12),new P(8,13))),new _e(12,Int32Array.from([6,32,58]),new G(24,new P(2,92),new P(2,93)),new G(22,new P(6,36),new P(2,37)),new G(26,new P(4,20),new P(6,21)),new G(28,new P(7,14),new P(4,15))),new _e(13,Int32Array.from([6,34,62]),new G(26,new P(4,107)),new G(22,new P(8,37),new P(1,38)),new G(24,new P(8,20),new P(4,21)),new G(22,new P(12,11),new P(4,12))),new _e(14,Int32Array.from([6,26,46,66]),new G(30,new P(3,115),new P(1,116)),new G(24,new P(4,40),new P(5,41)),new G(20,new P(11,16),new P(5,17)),new G(24,new P(11,12),new P(5,13))),new _e(15,Int32Array.from([6,26,48,70]),new G(22,new P(5,87),new P(1,88)),new G(24,new P(5,41),new P(5,42)),new G(30,new P(5,24),new P(7,25)),new G(24,new P(11,12),new P(7,13))),new _e(16,Int32Array.from([6,26,50,74]),new G(24,new P(5,98),new P(1,99)),new G(28,new P(7,45),new P(3,46)),new G(24,new P(15,19),new P(2,20)),new G(30,new P(3,15),new P(13,16))),new _e(17,Int32Array.from([6,30,54,78]),new G(28,new P(1,107),new P(5,108)),new G(28,new P(10,46),new P(1,47)),new G(28,new P(1,22),new P(15,23)),new G(28,new P(2,14),new P(17,15))),new _e(18,Int32Array.from([6,30,56,82]),new G(30,new P(5,120),new P(1,121)),new G(26,new P(9,43),new P(4,44)),new G(28,new P(17,22),new P(1,23)),new G(28,new P(2,14),new P(19,15))),new _e(19,Int32Array.from([6,30,58,86]),new G(28,new P(3,113),new P(4,114)),new G(26,new P(3,44),new P(11,45)),new G(26,new P(17,21),new P(4,22)),new G(26,new P(9,13),new P(16,14))),new _e(20,Int32Array.from([6,34,62,90]),new G(28,new P(3,107),new P(5,108)),new G(26,new P(3,41),new P(13,42)),new G(30,new P(15,24),new P(5,25)),new G(28,new P(15,15),new P(10,16))),new _e(21,Int32Array.from([6,28,50,72,94]),new G(28,new P(4,116),new P(4,117)),new G(26,new P(17,42)),new G(28,new P(17,22),new P(6,23)),new G(30,new P(19,16),new P(6,17))),new _e(22,Int32Array.from([6,26,50,74,98]),new G(28,new P(2,111),new P(7,112)),new G(28,new P(17,46)),new G(30,new P(7,24),new P(16,25)),new G(24,new P(34,13))),new _e(23,Int32Array.from([6,30,54,78,102]),new G(30,new P(4,121),new P(5,122)),new G(28,new P(4,47),new P(14,48)),new G(30,new P(11,24),new P(14,25)),new G(30,new P(16,15),new P(14,16))),new _e(24,Int32Array.from([6,28,54,80,106]),new G(30,new P(6,117),new P(4,118)),new G(28,new P(6,45),new P(14,46)),new G(30,new P(11,24),new P(16,25)),new G(30,new P(30,16),new P(2,17))),new _e(25,Int32Array.from([6,32,58,84,110]),new G(26,new P(8,106),new P(4,107)),new G(28,new P(8,47),new P(13,48)),new G(30,new P(7,24),new P(22,25)),new G(30,new P(22,15),new P(13,16))),new _e(26,Int32Array.from([6,30,58,86,114]),new G(28,new P(10,114),new P(2,115)),new G(28,new P(19,46),new P(4,47)),new G(28,new P(28,22),new P(6,23)),new G(30,new P(33,16),new P(4,17))),new _e(27,Int32Array.from([6,34,62,90,118]),new G(30,new P(8,122),new P(4,123)),new G(28,new P(22,45),new P(3,46)),new G(30,new P(8,23),new P(26,24)),new G(30,new P(12,15),new P(28,16))),new _e(28,Int32Array.from([6,26,50,74,98,122]),new G(30,new P(3,117),new P(10,118)),new G(28,new P(3,45),new P(23,46)),new G(30,new P(4,24),new P(31,25)),new G(30,new P(11,15),new P(31,16))),new _e(29,Int32Array.from([6,30,54,78,102,126]),new G(30,new P(7,116),new P(7,117)),new G(28,new P(21,45),new P(7,46)),new G(30,new P(1,23),new P(37,24)),new G(30,new P(19,15),new P(26,16))),new _e(30,Int32Array.from([6,26,52,78,104,130]),new G(30,new P(5,115),new P(10,116)),new G(28,new P(19,47),new P(10,48)),new G(30,new P(15,24),new P(25,25)),new G(30,new P(23,15),new P(25,16))),new _e(31,Int32Array.from([6,30,56,82,108,134]),new G(30,new P(13,115),new P(3,116)),new G(28,new P(2,46),new P(29,47)),new G(30,new P(42,24),new P(1,25)),new G(30,new P(23,15),new P(28,16))),new _e(32,Int32Array.from([6,34,60,86,112,138]),new G(30,new P(17,115)),new G(28,new P(10,46),new P(23,47)),new G(30,new P(10,24),new P(35,25)),new G(30,new P(19,15),new P(35,16))),new _e(33,Int32Array.from([6,30,58,86,114,142]),new G(30,new P(17,115),new P(1,116)),new G(28,new P(14,46),new P(21,47)),new G(30,new P(29,24),new P(19,25)),new G(30,new P(11,15),new P(46,16))),new _e(34,Int32Array.from([6,34,62,90,118,146]),new G(30,new P(13,115),new P(6,116)),new G(28,new P(14,46),new P(23,47)),new G(30,new P(44,24),new P(7,25)),new G(30,new P(59,16),new P(1,17))),new _e(35,Int32Array.from([6,30,54,78,102,126,150]),new G(30,new P(12,121),new P(7,122)),new G(28,new P(12,47),new P(26,48)),new G(30,new P(39,24),new P(14,25)),new G(30,new P(22,15),new P(41,16))),new _e(36,Int32Array.from([6,24,50,76,102,128,154]),new G(30,new P(6,121),new P(14,122)),new G(28,new P(6,47),new P(34,48)),new G(30,new P(46,24),new P(10,25)),new G(30,new P(2,15),new P(64,16))),new _e(37,Int32Array.from([6,28,54,80,106,132,158]),new G(30,new P(17,122),new P(4,123)),new G(28,new P(29,46),new P(14,47)),new G(30,new P(49,24),new P(10,25)),new G(30,new P(24,15),new P(46,16))),new _e(38,Int32Array.from([6,32,58,84,110,136,162]),new G(30,new P(4,122),new P(18,123)),new G(28,new P(13,46),new P(32,47)),new G(30,new P(48,24),new P(14,25)),new G(30,new P(42,15),new P(32,16))),new _e(39,Int32Array.from([6,26,54,82,110,138,166]),new G(30,new P(20,117),new P(4,118)),new G(28,new P(40,47),new P(7,48)),new G(30,new P(43,24),new P(22,25)),new G(30,new P(10,15),new P(67,16))),new _e(40,Int32Array.from([6,30,58,86,114,142,170]),new G(30,new P(19,118),new P(6,119)),new G(28,new P(18,47),new P(31,48)),new G(30,new P(34,24),new P(34,25)),new G(30,new P(20,15),new P(61,16)))];var Wt;(function(A){A[A.DATA_MASK_000=0]="DATA_MASK_000",A[A.DATA_MASK_001=1]="DATA_MASK_001",A[A.DATA_MASK_010=2]="DATA_MASK_010",A[A.DATA_MASK_011=3]="DATA_MASK_011",A[A.DATA_MASK_100=4]="DATA_MASK_100",A[A.DATA_MASK_101=5]="DATA_MASK_101",A[A.DATA_MASK_110=6]="DATA_MASK_110",A[A.DATA_MASK_111=7]="DATA_MASK_111"})(Wt||(Wt={}));class jr{constructor(n,i){this.value=n,this.isMasked=i}unmaskBitMatrix(n,i){for(let o=0;o<i;o++)for(let u=0;u<i;u++)this.isMasked(o,u)&&n.flip(u,o)}}jr.values=new Map([[Wt.DATA_MASK_000,new jr(Wt.DATA_MASK_000,(A,n)=>(A+n&1)===0)],[Wt.DATA_MASK_001,new jr(Wt.DATA_MASK_001,(A,n)=>(A&1)===0)],[Wt.DATA_MASK_010,new jr(Wt.DATA_MASK_010,(A,n)=>n%3===0)],[Wt.DATA_MASK_011,new jr(Wt.DATA_MASK_011,(A,n)=>(A+n)%3===0)],[Wt.DATA_MASK_100,new jr(Wt.DATA_MASK_100,(A,n)=>(Math.floor(A/2)+Math.floor(n/3)&1)===0)],[Wt.DATA_MASK_101,new jr(Wt.DATA_MASK_101,(A,n)=>A*n%6===0)],[Wt.DATA_MASK_110,new jr(Wt.DATA_MASK_110,(A,n)=>A*n%6<3)],[Wt.DATA_MASK_111,new jr(Wt.DATA_MASK_111,(A,n)=>(A+n+A*n%3&1)===0)]]);class $m{constructor(n){const i=n.getHeight();if(i<21||(i&3)!==1)throw new U;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let c=0;c<6;c++)n=this.copyBit(c,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let c=5;c>=0;c--)n=this.copyBit(8,c,n);const i=this.bitMatrix.getHeight();let o=0;const u=i-7;for(let c=i-1;c>=u;c--)o=this.copyBit(8,c,o);for(let c=i-8;c<i;c++)o=this.copyBit(c,8,o);if(this.parsedFormatInfo=nr.decodeFormatInformation(n,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new U}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),i=Math.floor((n-17)/4);if(i<=6)return _e.getVersionForNumber(i);let o=0;const u=n-11;for(let d=5;d>=0;d--)for(let f=n-9;f>=u;f--)o=this.copyBit(f,d,o);let c=_e.decodeVersionInformation(o);if(c!==null&&c.getDimensionForVersion()===n)return this.parsedVersion=c,c;o=0;for(let d=5;d>=0;d--)for(let f=n-9;f>=u;f--)o=this.copyBit(d,f,o);if(c=_e.decodeVersionInformation(o),c!==null&&c.getDimensionForVersion()===n)return this.parsedVersion=c,c;throw new U}copyBit(n,i,o){return(this.isMirror?this.bitMatrix.get(i,n):this.bitMatrix.get(n,i))?o<<1|1:o<<1}readCodewords(){const n=this.readFormatInformation(),i=this.readVersion(),o=jr.values.get(n.getDataMask()),u=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,u);const c=i.buildFunctionPattern();let d=!0;const f=new Uint8Array(i.getTotalCodewords());let m=0,w=0,E=0;for(let S=u-1;S>0;S-=2){S===6&&S--;for(let T=0;T<u;T++){const M=d?u-1-T:T;for(let z=0;z<2;z++)c.get(S-z,M)||(E++,w<<=1,this.bitMatrix.get(S-z,M)&&(w|=1),E===8&&(f[m++]=w,E=0,w=0))}d=!d}if(m!==i.getTotalCodewords())throw new U;return f}remask(){if(this.parsedFormatInfo===null)return;const n=jr.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let i=0,o=n.getWidth();i<o;i++)for(let u=i+1,c=n.getHeight();u<c;u++)n.get(i,u)!==n.get(u,i)&&(n.flip(u,i),n.flip(i,u))}}class hu{constructor(n,i){this.numDataCodewords=n,this.codewords=i}static getDataBlocks(n,i,o){if(n.length!==i.getTotalCodewords())throw new v;const u=i.getECBlocksForLevel(o);let c=0;const d=u.getECBlocks();for(const z of d)c+=z.getCount();const f=new Array(c);let m=0;for(const z of d)for(let V=0;V<z.getCount();V++){const H=z.getDataCodewords(),Q=u.getECCodewordsPerBlock()+H;f[m++]=new hu(H,new Uint8Array(Q))}const w=f[0].codewords.length;let E=f.length-1;for(;E>=0&&f[E].codewords.length!==w;)E--;E++;const S=w-u.getECCodewordsPerBlock();let T=0;for(let z=0;z<S;z++)for(let V=0;V<m;V++)f[V].codewords[z]=n[T++];for(let z=E;z<m;z++)f[z].codewords[S]=n[T++];const M=f[0].codewords.length;for(let z=S;z<M;z++)for(let V=0;V<m;V++){const H=V<E?z:z+1;f[V].codewords[H]=n[T++]}return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Fr;(function(A){A[A.TERMINATOR=0]="TERMINATOR",A[A.NUMERIC=1]="NUMERIC",A[A.ALPHANUMERIC=2]="ALPHANUMERIC",A[A.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",A[A.BYTE=4]="BYTE",A[A.ECI=5]="ECI",A[A.KANJI=6]="KANJI",A[A.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",A[A.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",A[A.HANZI=9]="HANZI"})(Fr||(Fr={}));class Ae{constructor(n,i,o,u){this.value=n,this.stringValue=i,this.characterCountBitsForVersions=o,this.bits=u,Ae.FOR_BITS.set(u,this),Ae.FOR_VALUE.set(n,this)}static forBits(n){const i=Ae.FOR_BITS.get(n);if(i===void 0)throw new v;return i}getCharacterCountBits(n){const i=n.getVersionNumber();let o;return i<=9?o=0:i<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof Ae))return!1;const i=n;return this.value===i.value}toString(){return this.stringValue}}Ae.FOR_BITS=new Map,Ae.FOR_VALUE=new Map,Ae.TERMINATOR=new Ae(Fr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ae.NUMERIC=new Ae(Fr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ae.ALPHANUMERIC=new Ae(Fr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ae.STRUCTURED_APPEND=new Ae(Fr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ae.BYTE=new Ae(Fr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ae.ECI=new Ae(Fr.ECI,"ECI",Int32Array.from([0,0,0]),7),Ae.KANJI=new Ae(Fr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ae.FNC1_FIRST_POSITION=new Ae(Fr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ae.FNC1_SECOND_POSITION=new Ae(Fr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ae.HANZI=new Ae(Fr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class wt{static decode(n,i,o,u){const c=new du(n);let d=new se;const f=new Array;let m=-1,w=-1;try{let E=null,S=!1,T;do{if(c.available()<4)T=Ae.TERMINATOR;else{const M=c.readBits(4);T=Ae.forBits(M)}switch(T){case Ae.TERMINATOR:break;case Ae.FNC1_FIRST_POSITION:case Ae.FNC1_SECOND_POSITION:S=!0;break;case Ae.STRUCTURED_APPEND:if(c.available()<16)throw new U;m=c.readBits(8),w=c.readBits(8);break;case Ae.ECI:const M=wt.parseECIValue(c);if(E=C.getCharacterSetECIByValue(M),E===null)throw new U;break;case Ae.HANZI:const z=c.readBits(4),V=c.readBits(T.getCharacterCountBits(i));z===wt.GB2312_SUBSET&&wt.decodeHanziSegment(c,d,V);break;default:const H=c.readBits(T.getCharacterCountBits(i));switch(T){case Ae.NUMERIC:wt.decodeNumericSegment(c,d,H);break;case Ae.ALPHANUMERIC:wt.decodeAlphanumericSegment(c,d,H,S);break;case Ae.BYTE:wt.decodeByteSegment(c,d,H,E,f,u);break;case Ae.KANJI:wt.decodeKanjiSegment(c,d,H);break;default:throw new U}break}}while(T!==Ae.TERMINATOR)}catch{throw new U}return new Fe(n,d.toString(),f.length===0?null:f,o===null?null:o.toString(),m,w)}static decodeHanziSegment(n,i,o){if(o*13>n.available())throw new U;const u=new Uint8Array(2*o);let c=0;for(;o>0;){const d=n.readBits(13);let f=d/96<<8&4294967295|d%96;f<959?f+=41377:f+=42657,u[c]=f>>8&255,u[c+1]=f&255,c+=2,o--}try{i.append(Y.decode(u,K.GB2312))}catch(d){throw new U(d)}}static decodeKanjiSegment(n,i,o){if(o*13>n.available())throw new U;const u=new Uint8Array(2*o);let c=0;for(;o>0;){const d=n.readBits(13);let f=d/192<<8&4294967295|d%192;f<7936?f+=33088:f+=49472,u[c]=f>>8,u[c+1]=f,c+=2,o--}try{i.append(Y.decode(u,K.SHIFT_JIS))}catch(d){throw new U(d)}}static decodeByteSegment(n,i,o,u,c,d){if(8*o>n.available())throw new U;const f=new Uint8Array(o);for(let w=0;w<o;w++)f[w]=n.readBits(8);let m;u===null?m=K.guessEncoding(f,d):m=u.getName();try{i.append(Y.decode(f,m))}catch(w){throw new U(w)}c.push(f)}static toAlphaNumericChar(n){if(n>=wt.ALPHANUMERIC_CHARS.length)throw new U;return wt.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,i,o,u){const c=i.length();for(;o>1;){if(n.available()<11)throw new U;const d=n.readBits(11);i.append(wt.toAlphaNumericChar(Math.floor(d/45))),i.append(wt.toAlphaNumericChar(d%45)),o-=2}if(o===1){if(n.available()<6)throw new U;i.append(wt.toAlphaNumericChar(n.readBits(6)))}if(u)for(let d=c;d<i.length();d++)i.charAt(d)==="%"&&(d<i.length()-1&&i.charAt(d+1)==="%"?i.deleteCharAt(d+1):i.setCharAt(d,""))}static decodeNumericSegment(n,i,o){for(;o>=3;){if(n.available()<10)throw new U;const u=n.readBits(10);if(u>=1e3)throw new U;i.append(wt.toAlphaNumericChar(Math.floor(u/100))),i.append(wt.toAlphaNumericChar(Math.floor(u/10)%10)),i.append(wt.toAlphaNumericChar(u%10)),o-=3}if(o===2){if(n.available()<7)throw new U;const u=n.readBits(7);if(u>=100)throw new U;i.append(wt.toAlphaNumericChar(Math.floor(u/10))),i.append(wt.toAlphaNumericChar(u%10))}else if(o===1){if(n.available()<4)throw new U;const u=n.readBits(4);if(u>=10)throw new U;i.append(wt.toAlphaNumericChar(u))}}static parseECIValue(n){const i=n.readBits(8);if(!(i&128))return i&127;if((i&192)===128){const o=n.readBits(8);return(i&63)<<8&4294967295|o}if((i&224)===192){const o=n.readBits(16);return(i&31)<<16&4294967295|o}throw new U}}wt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",wt.GB2312_SUBSET=1;class Dh{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const i=n[0];n[0]=n[2],n[2]=i}}class Xm{constructor(){this.rsDecoder=new Pe(Ne.QR_CODE_FIELD_256)}decodeBooleanArray(n,i){return this.decodeBitMatrix(Oe.parseFromBooleanArray(n),i)}decodeBitMatrix(n,i){const o=new $m(n);let u=null;try{return this.decodeBitMatrixParser(o,i)}catch(c){u=c}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const c=this.decodeBitMatrixParser(o,i);return c.setOther(new Dh(!0)),c}catch(c){throw u!==null?u:c}}decodeBitMatrixParser(n,i){const o=n.readVersion(),u=n.readFormatInformation().getErrorCorrectionLevel(),c=n.readCodewords(),d=hu.getDataBlocks(c,o,u);let f=0;for(const E of d)f+=E.getNumDataCodewords();const m=new Uint8Array(f);let w=0;for(const E of d){const S=E.getCodewords(),T=E.getNumDataCodewords();this.correctErrors(S,T);for(let M=0;M<T;M++)m[w++]=S[M]}return wt.decode(m,o,u,i)}correctErrors(n,i){const o=new Int32Array(n);try{this.rsDecoder.decode(o,n.length-i)}catch{throw new N}for(let u=0;u<i;u++)n[u]=o[u]}}class fu extends de{constructor(n,i,o){super(n,i),this.estimatedModuleSize=o}aboutEquals(n,i,o){if(Math.abs(i-this.getY())<=n&&Math.abs(o-this.getX())<=n){const u=Math.abs(n-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(n,i,o){const u=(this.getX()+i)/2,c=(this.getY()+n)/2,d=(this.estimatedModuleSize+o)/2;return new fu(u,c,d)}}class ua{constructor(n,i,o,u,c,d,f){this.image=n,this.startX=i,this.startY=o,this.width=u,this.height=c,this.moduleSize=d,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,i=this.height,o=this.width,u=n+o,c=this.startY+i/2,d=new Int32Array(3),f=this.image;for(let m=0;m<i;m++){const w=c+(m&1?-Math.floor((m+1)/2):Math.floor((m+1)/2));d[0]=0,d[1]=0,d[2]=0;let E=n;for(;E<u&&!f.get(E,w);)E++;let S=0;for(;E<u;){if(f.get(E,w))if(S===1)d[1]++;else if(S===2){if(this.foundPatternCross(d)){const T=this.handlePossibleCenter(d,w,E);if(T!==null)return T}d[0]=d[2],d[1]=1,d[2]=0,S=1}else d[++S]++;else S===1&&S++,d[S]++;E++}if(this.foundPatternCross(d)){const T=this.handlePossibleCenter(d,w,u);if(T!==null)return T}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new q}static centerFromEnd(n,i){return i-n[2]-n[1]/2}foundPatternCross(n){const i=this.moduleSize,o=i/2;for(let u=0;u<3;u++)if(Math.abs(i-n[u])>=o)return!1;return!0}crossCheckVertical(n,i,o,u){const c=this.image,d=c.getHeight(),f=this.crossCheckStateCount;f[0]=0,f[1]=0,f[2]=0;let m=n;for(;m>=0&&c.get(i,m)&&f[1]<=o;)f[1]++,m--;if(m<0||f[1]>o)return NaN;for(;m>=0&&!c.get(i,m)&&f[0]<=o;)f[0]++,m--;if(f[0]>o)return NaN;for(m=n+1;m<d&&c.get(i,m)&&f[1]<=o;)f[1]++,m++;if(m===d||f[1]>o)return NaN;for(;m<d&&!c.get(i,m)&&f[2]<=o;)f[2]++,m++;if(f[2]>o)return NaN;const w=f[0]+f[1]+f[2];return 5*Math.abs(w-u)>=2*u?NaN:this.foundPatternCross(f)?ua.centerFromEnd(f,m):NaN}handlePossibleCenter(n,i,o){const u=n[0]+n[1]+n[2],c=ua.centerFromEnd(n,o),d=this.crossCheckVertical(i,c,2*n[1],u);if(!isNaN(d)){const f=(n[0]+n[1]+n[2])/3;for(const w of this.possibleCenters)if(w.aboutEquals(f,d,c))return w.combineEstimate(d,c,f);const m=new fu(c,d,f);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class gu extends de{constructor(n,i,o,u){super(n,i),this.estimatedModuleSize=o,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,i,o){if(Math.abs(i-this.getY())<=n&&Math.abs(o-this.getX())<=n){const u=Math.abs(n-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(n,i,o){const u=this.count+1,c=(this.count*this.getX()+i)/u,d=(this.count*this.getY()+n)/u,f=(this.count*this.estimatedModuleSize+o)/u;return new gu(c,d,f,u)}}class Km{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ht{constructor(n,i){this.image=n,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const i=n!=null&&n.get($.TRY_HARDER)!==void 0,o=n!=null&&n.get($.PURE_BARCODE)!==void 0,u=this.image,c=u.getHeight(),d=u.getWidth();let f=Math.floor(3*c/(4*Ht.MAX_MODULES));(f<Ht.MIN_SKIP||i)&&(f=Ht.MIN_SKIP);let m=!1;const w=new Int32Array(5);for(let S=f-1;S<c&&!m;S+=f){w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0;let T=0;for(let M=0;M<d;M++)if(u.get(M,S))(T&1)===1&&T++,w[T]++;else if(T&1)w[T]++;else if(T===4)if(Ht.foundPatternCross(w)){if(this.handlePossibleCenter(w,S,M,o)===!0)if(f=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const V=this.findRowSkip();V>w[2]&&(S+=V-w[2]-f,M=d-1)}else{w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,T=3;continue}T=0,w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0}else w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,T=3;else w[++T]++;Ht.foundPatternCross(w)&&this.handlePossibleCenter(w,S,d,o)===!0&&(f=w[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const E=this.selectBestPatterns();return de.orderBestPatterns(E),new Km(E)}static centerFromEnd(n,i){return i-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let i=0;for(let c=0;c<5;c++){const d=n[c];if(d===0)return!1;i+=d}if(i<7)return!1;const o=i/7,u=o/2;return Math.abs(o-n[0])<u&&Math.abs(o-n[1])<u&&Math.abs(3*o-n[2])<3*u&&Math.abs(o-n[3])<u&&Math.abs(o-n[4])<u}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,i,o,u){const c=this.getCrossCheckStateCount();let d=0;const f=this.image;for(;n>=d&&i>=d&&f.get(i-d,n-d);)c[2]++,d++;if(n<d||i<d)return!1;for(;n>=d&&i>=d&&!f.get(i-d,n-d)&&c[1]<=o;)c[1]++,d++;if(n<d||i<d||c[1]>o)return!1;for(;n>=d&&i>=d&&f.get(i-d,n-d)&&c[0]<=o;)c[0]++,d++;if(c[0]>o)return!1;const m=f.getHeight(),w=f.getWidth();for(d=1;n+d<m&&i+d<w&&f.get(i+d,n+d);)c[2]++,d++;if(n+d>=m||i+d>=w)return!1;for(;n+d<m&&i+d<w&&!f.get(i+d,n+d)&&c[3]<o;)c[3]++,d++;if(n+d>=m||i+d>=w||c[3]>=o)return!1;for(;n+d<m&&i+d<w&&f.get(i+d,n+d)&&c[4]<o;)c[4]++,d++;if(c[4]>=o)return!1;const E=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(E-u)<2*u&&Ht.foundPatternCross(c)}crossCheckVertical(n,i,o,u){const c=this.image,d=c.getHeight(),f=this.getCrossCheckStateCount();let m=n;for(;m>=0&&c.get(i,m);)f[2]++,m--;if(m<0)return NaN;for(;m>=0&&!c.get(i,m)&&f[1]<=o;)f[1]++,m--;if(m<0||f[1]>o)return NaN;for(;m>=0&&c.get(i,m)&&f[0]<=o;)f[0]++,m--;if(f[0]>o)return NaN;for(m=n+1;m<d&&c.get(i,m);)f[2]++,m++;if(m===d)return NaN;for(;m<d&&!c.get(i,m)&&f[3]<o;)f[3]++,m++;if(m===d||f[3]>=o)return NaN;for(;m<d&&c.get(i,m)&&f[4]<o;)f[4]++,m++;if(f[4]>=o)return NaN;const w=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(w-u)>=2*u?NaN:Ht.foundPatternCross(f)?Ht.centerFromEnd(f,m):NaN}crossCheckHorizontal(n,i,o,u){const c=this.image,d=c.getWidth(),f=this.getCrossCheckStateCount();let m=n;for(;m>=0&&c.get(m,i);)f[2]++,m--;if(m<0)return NaN;for(;m>=0&&!c.get(m,i)&&f[1]<=o;)f[1]++,m--;if(m<0||f[1]>o)return NaN;for(;m>=0&&c.get(m,i)&&f[0]<=o;)f[0]++,m--;if(f[0]>o)return NaN;for(m=n+1;m<d&&c.get(m,i);)f[2]++,m++;if(m===d)return NaN;for(;m<d&&!c.get(m,i)&&f[3]<o;)f[3]++,m++;if(m===d||f[3]>=o)return NaN;for(;m<d&&c.get(m,i)&&f[4]<o;)f[4]++,m++;if(f[4]>=o)return NaN;const w=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(w-u)>=u?NaN:Ht.foundPatternCross(f)?Ht.centerFromEnd(f,m):NaN}handlePossibleCenter(n,i,o,u){const c=n[0]+n[1]+n[2]+n[3]+n[4];let d=Ht.centerFromEnd(n,o),f=this.crossCheckVertical(i,Math.floor(d),n[2],c);if(!isNaN(f)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(f),n[2],c),!isNaN(d)&&(!u||this.crossCheckDiagonal(Math.floor(f),Math.floor(d),n[2],c)))){const m=c/7;let w=!1;const E=this.possibleCenters;for(let S=0,T=E.length;S<T;S++){const M=E[S];if(M.aboutEquals(m,f,d)){E[S]=M.combineEstimate(f,d,m),w=!0;break}}if(!w){const S=new gu(d,f,m);E.push(S),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(S)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const o of this.possibleCenters)if(o.getCount()>=Ht.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,i=0;const o=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Ht.CENTER_QUORUM&&(n++,i+=d.getEstimatedModuleSize());if(n<3)return!1;const u=i/o;let c=0;for(const d of this.possibleCenters)c+=Math.abs(d.getEstimatedModuleSize()-u);return c<=.05*i}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new q;const i=this.possibleCenters;let o;if(n>3){let u=0,c=0;for(const m of this.possibleCenters){const w=m.getEstimatedModuleSize();u+=w,c+=w*w}o=u/n;let d=Math.sqrt(c/n-o*o);i.sort((m,w)=>{const E=Math.abs(w.getEstimatedModuleSize()-o),S=Math.abs(m.getEstimatedModuleSize()-o);return E<S?-1:E>S?1:0});const f=Math.max(.2*o,d);for(let m=0;m<i.length&&i.length>3;m++){const w=i[m];Math.abs(w.getEstimatedModuleSize()-o)>f&&(i.splice(m,1),m--)}}if(i.length>3){let u=0;for(const c of i)u+=c.getEstimatedModuleSize();o=u/i.length,i.sort((c,d)=>{if(d.getCount()===c.getCount()){const f=Math.abs(d.getEstimatedModuleSize()-o),m=Math.abs(c.getEstimatedModuleSize()-o);return f<m?1:f>m?-1:0}else return d.getCount()-c.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}Ht.CENTER_QUORUM=2,Ht.MIN_SKIP=3,Ht.MAX_MODULES=57;class Zs{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get($.NEED_RESULT_POINT_CALLBACK);const o=new Ht(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(o)}processFinderPatternInfo(n){const i=n.getTopLeft(),o=n.getTopRight(),u=n.getBottomLeft(),c=this.calculateModuleSize(i,o,u);if(c<1)throw new q("No pattern found in proccess finder.");const d=Zs.computeDimension(i,o,u,c),f=_e.getProvisionalVersionForDimension(d),m=f.getDimensionForVersion()-7;let w=null;if(f.getAlignmentPatternCenters().length>0){const M=o.getX()-i.getX()+u.getX(),z=o.getY()-i.getY()+u.getY(),V=1-3/m,H=Math.floor(i.getX()+V*(M-i.getX())),Q=Math.floor(i.getY()+V*(z-i.getY()));for(let ie=4;ie<=16;ie<<=1)try{w=this.findAlignmentInRegion(c,H,Q,ie);break}catch(oe){if(!(oe instanceof q))throw oe}}const E=Zs.createTransform(i,o,u,w,d),S=Zs.sampleGrid(this.image,E,d);let T;return w===null?T=[u,i,o]:T=[u,i,o,w],new lr(S,T)}static createTransform(n,i,o,u,c){const d=c-3.5;let f,m,w,E;return u!==null?(f=u.getX(),m=u.getY(),w=d-3,E=w):(f=i.getX()-n.getX()+o.getX(),m=i.getY()-n.getY()+o.getY(),w=d,E=d),qe.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,w,E,3.5,d,n.getX(),n.getY(),i.getX(),i.getY(),f,m,o.getX(),o.getY())}static sampleGrid(n,i,o){return Vt.getInstance().sampleGridWithTransform(n,o,o,i)}static computeDimension(n,i,o,u){const c=ye.round(de.distance(n,i)/u),d=ye.round(de.distance(n,o)/u);let f=Math.floor((c+d)/2)+7;switch(f&3){case 0:f++;break;case 2:f--;break;case 3:throw new q("Dimensions could be not found.")}return f}calculateModuleSize(n,i,o){return(this.calculateModuleSizeOneWay(n,i)+this.calculateModuleSizeOneWay(n,o))/2}calculateModuleSizeOneWay(n,i){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(i.getX()),Math.floor(i.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(o)?u/7:isNaN(u)?o/7:(o+u)/14}sizeOfBlackWhiteBlackRunBothWays(n,i,o,u){let c=this.sizeOfBlackWhiteBlackRun(n,i,o,u),d=1,f=n-(o-n);f<0?(d=n/(n-f),f=0):f>=this.image.getWidth()&&(d=(this.image.getWidth()-1-n)/(f-n),f=this.image.getWidth()-1);let m=Math.floor(i-(u-i)*d);return d=1,m<0?(d=i/(i-m),m=0):m>=this.image.getHeight()&&(d=(this.image.getHeight()-1-i)/(m-i),m=this.image.getHeight()-1),f=Math.floor(n+(f-n)*d),c+=this.sizeOfBlackWhiteBlackRun(n,i,f,m),c-1}sizeOfBlackWhiteBlackRun(n,i,o,u){const c=Math.abs(u-i)>Math.abs(o-n);if(c){let M=n;n=i,i=M,M=o,o=u,u=M}const d=Math.abs(o-n),f=Math.abs(u-i);let m=-d/2;const w=n<o?1:-1,E=i<u?1:-1;let S=0;const T=o+w;for(let M=n,z=i;M!==T;M+=w){const V=c?z:M,H=c?M:z;if(S===1===this.image.get(V,H)){if(S===2)return ye.distance(M,z,n,i);S++}if(m+=f,m>0){if(z===u)break;z+=E,m-=d}}return S===2?ye.distance(o+w,u,n,i):NaN}findAlignmentInRegion(n,i,o,u){const c=Math.floor(u*n),d=Math.max(0,i-c),f=Math.min(this.image.getWidth()-1,i+c);if(f-d<n*3)throw new q("Alignment top exceeds estimated module size.");const m=Math.max(0,o-c),w=Math.min(this.image.getHeight()-1,o+c);if(w-m<n*3)throw new q("Alignment bottom exceeds estimated module size.");return new ua(this.image,d,m,f-d,w-m,n,this.resultPointCallback).find()}}class zn{constructor(){this.decoder=new Xm}getDecoder(){return this.decoder}decode(n,i){let o,u;if(i!=null&&i.get($.PURE_BARCODE)!==void 0){const m=zn.extractPureBits(n.getBlackMatrix());o=this.decoder.decodeBitMatrix(m,i),u=zn.NO_POINTS}else{const m=new Zs(n.getBlackMatrix()).detect(i);o=this.decoder.decodeBitMatrix(m.getBits(),i),u=m.getPoints()}o.getOther()instanceof Dh&&o.getOther().applyMirroredCorrection(u);const c=new ke(o.getText(),o.getRawBytes(),void 0,u,ue.QR_CODE,void 0),d=o.getByteSegments();d!==null&&c.putMetadata(be.BYTE_SEGMENTS,d);const f=o.getECLevel();return f!==null&&c.putMetadata(be.ERROR_CORRECTION_LEVEL,f),o.hasStructuredAppend()&&(c.putMetadata(be.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),c.putMetadata(be.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),c}reset(){}static extractPureBits(n){const i=n.getTopLeftOnBit(),o=n.getBottomRightOnBit();if(i===null||o===null)throw new q;const u=this.moduleSize(i,n);let c=i[1],d=o[1],f=i[0],m=o[0];if(f>=m||c>=d)throw new q;if(d-c!==m-f&&(m=f+(d-c),m>=n.getWidth()))throw new q;const w=Math.round((m-f+1)/u),E=Math.round((d-c+1)/u);if(w<=0||E<=0)throw new q;if(E!==w)throw new q;const S=Math.floor(u/2);c+=S,f+=S;const T=f+Math.floor((w-1)*u)-m;if(T>0){if(T>S)throw new q;f-=T}const M=c+Math.floor((E-1)*u)-d;if(M>0){if(M>S)throw new q;c-=M}const z=new Oe(w,E);for(let V=0;V<E;V++){const H=c+Math.floor(V*u);for(let Q=0;Q<w;Q++)n.get(f+Math.floor(Q*u),H)&&z.set(Q,V)}return z}static moduleSize(n,i){const o=i.getHeight(),u=i.getWidth();let c=n[0],d=n[1],f=!0,m=0;for(;c<u&&d<o;){if(f!==i.get(c,d)){if(++m===5)break;f=!f}c++,d++}if(c===u||d===o)throw new q;return(c-n[0])/7}}zn.NO_POINTS=new Array;class Te{PDF417Common(){}static getBitCountSum(n){return ye.sum(n)}static toIntArray(n){if(n==null||!n.length)return Te.EMPTY_INT_ARRAY;const i=new Int32Array(n.length);let o=0;for(const u of n)i[o++]=u;return i}static getCodeword(n){const i=R.binarySearch(Te.SYMBOL_TABLE,n&262143);return i<0?-1:(Te.CODEWORD_TABLE[i]-1)%Te.NUMBER_OF_CODEWORDS}}Te.NUMBER_OF_CODEWORDS=929,Te.MAX_CODEWORDS_IN_BARCODE=Te.NUMBER_OF_CODEWORDS-1,Te.MIN_ROWS_IN_BARCODE=3,Te.MAX_ROWS_IN_BARCODE=90,Te.MODULES_IN_CODEWORD=17,Te.MODULES_IN_STOP_PATTERN=18,Te.BARS_IN_MODULE=8,Te.EMPTY_INT_ARRAY=new Int32Array([]),Te.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Te.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class qm{constructor(n,i){this.bits=n,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Me{static detectMultiple(n,i,o){let u=n.getBlackMatrix(),c=Me.detect(o,u);return c.length||(u=u.clone(),u.rotate180(),c=Me.detect(o,u)),new qm(u,c)}static detect(n,i){const o=new Array;let u=0,c=0,d=!1;for(;u<i.getHeight();){const f=Me.findVertices(i,u,c);if(f[0]==null&&f[3]==null){if(!d)break;d=!1,c=0;for(const m of o)m[1]!=null&&(u=Math.trunc(Math.max(u,m[1].getY()))),m[3]!=null&&(u=Math.max(u,Math.trunc(m[3].getY())));u+=Me.ROW_STEP;continue}if(d=!0,o.push(f),!n)break;f[2]!=null?(c=Math.trunc(f[2].getX()),u=Math.trunc(f[2].getY())):(c=Math.trunc(f[4].getX()),u=Math.trunc(f[4].getY()))}return o}static findVertices(n,i,o){const u=n.getHeight(),c=n.getWidth(),d=new Array(8);return Me.copyToResult(d,Me.findRowsWithPattern(n,u,c,i,o,Me.START_PATTERN),Me.INDEXES_START_PATTERN),d[4]!=null&&(o=Math.trunc(d[4].getX()),i=Math.trunc(d[4].getY())),Me.copyToResult(d,Me.findRowsWithPattern(n,u,c,i,o,Me.STOP_PATTERN),Me.INDEXES_STOP_PATTERN),d}static copyToResult(n,i,o){for(let u=0;u<o.length;u++)n[o[u]]=i[u]}static findRowsWithPattern(n,i,o,u,c,d){const f=new Array(4);let m=!1;const w=new Int32Array(d.length);for(;u<i;u+=Me.ROW_STEP){let S=Me.findGuardPattern(n,c,u,o,!1,d,w);if(S!=null){for(;u>0;){const T=Me.findGuardPattern(n,c,--u,o,!1,d,w);if(T!=null)S=T;else{u++;break}}f[0]=new de(S[0],u),f[1]=new de(S[1],u),m=!0;break}}let E=u+1;if(m){let S=0,T=Int32Array.from([Math.trunc(f[0].getX()),Math.trunc(f[1].getX())]);for(;E<i;E++){const M=Me.findGuardPattern(n,T[0],E,o,!1,d,w);if(M!=null&&Math.abs(T[0]-M[0])<Me.MAX_PATTERN_DRIFT&&Math.abs(T[1]-M[1])<Me.MAX_PATTERN_DRIFT)T=M,S=0;else{if(S>Me.SKIPPED_ROW_COUNT_MAX)break;S++}}E-=S+1,f[2]=new de(T[0],E),f[3]=new de(T[1],E)}return E-u<Me.BARCODE_MIN_HEIGHT&&R.fill(f,null),f}static findGuardPattern(n,i,o,u,c,d,f){R.fillWithin(f,0,f.length,0);let m=i,w=0;for(;n.get(m,o)&&m>0&&w++<Me.MAX_PIXEL_DRIFT;)m--;let E=m,S=0,T=d.length;for(let M=c;E<u;E++)if(n.get(E,o)!==M)f[S]++;else{if(S===T-1){if(Me.patternMatchVariance(f,d,Me.MAX_INDIVIDUAL_VARIANCE)<Me.MAX_AVG_VARIANCE)return new Int32Array([m,E]);m+=f[0]+f[1],L.arraycopy(f,2,f,0,S-1),f[S-1]=0,f[S]=0,S--}else S++;f[S]=1,M=!M}return S===T-1&&Me.patternMatchVariance(f,d,Me.MAX_INDIVIDUAL_VARIANCE)<Me.MAX_AVG_VARIANCE?new Int32Array([m,E-1]):null}static patternMatchVariance(n,i,o){let u=n.length,c=0,d=0;for(let w=0;w<u;w++)c+=n[w],d+=i[w];if(c<d)return 1/0;let f=c/d;o*=f;let m=0;for(let w=0;w<u;w++){let E=n[w],S=i[w]*f,T=E>S?E-S:S-E;if(T>o)return 1/0;m+=T}return m/c}}Me.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Me.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Me.MAX_AVG_VARIANCE=.42,Me.MAX_INDIVIDUAL_VARIANCE=.8,Me.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Me.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Me.MAX_PIXEL_DRIFT=3,Me.MAX_PATTERN_DRIFT=5,Me.SKIPPED_ROW_COUNT_MAX=25,Me.ROW_STEP=5,Me.BARCODE_MIN_HEIGHT=10;class Kt{constructor(n,i){if(i.length===0)throw new v;this.field=n;let o=i.length;if(o>1&&i[0]===0){let u=1;for(;u<o&&i[u]===0;)u++;u===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-u),L.arraycopy(i,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let u=0;for(let c of this.coefficients)u=this.field.add(u,c);return u}let i=this.coefficients[0],o=this.coefficients.length;for(let u=1;u<o;u++)i=this.field.add(this.field.multiply(n,i),this.coefficients[u]);return i}add(n){if(!this.field.equals(n.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let i=this.coefficients,o=n.coefficients;if(i.length>o.length){let d=i;i=o,o=d}let u=new Int32Array(o.length),c=o.length-i.length;L.arraycopy(o,0,u,0,c);for(let d=c;d<o.length;d++)u[d]=this.field.add(i[d-c],o[d]);return new Kt(this.field,u)}subtract(n){if(!this.field.equals(n.field))throw new v("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof Kt?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new Kt(this.field,new Int32Array([0]));let i=this.coefficients,o=i.length,u=n.coefficients,c=u.length,d=new Int32Array(o+c-1);for(let f=0;f<o;f++){let m=i[f];for(let w=0;w<c;w++)d[f+w]=this.field.add(d[f+w],this.field.multiply(m,u[w]))}return new Kt(this.field,d)}negative(){let n=this.coefficients.length,i=new Int32Array(n);for(let o=0;o<n;o++)i[o]=this.field.subtract(0,this.coefficients[o]);return new Kt(this.field,i)}multiplyScalar(n){if(n===0)return new Kt(this.field,new Int32Array([0]));if(n===1)return this;let i=this.coefficients.length,o=new Int32Array(i);for(let u=0;u<i;u++)o[u]=this.field.multiply(this.coefficients[u],n);return new Kt(this.field,o)}multiplyByMonomial(n,i){if(n<0)throw new v;if(i===0)return new Kt(this.field,new Int32Array([0]));let o=this.coefficients.length,u=new Int32Array(o+n);for(let c=0;c<o;c++)u[c]=this.field.multiply(this.coefficients[c],i);return new Kt(this.field,u)}toString(){let n=new se;for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);o!==0&&(o<0?(n.append(" - "),o=-o):n.length()>0&&n.append(" + "),(i===0||o!==1)&&n.append(o),i!==0&&(i===1?n.append("x"):(n.append("x^"),n.append(i))))}return n.toString()}}class Ym{add(n,i){return(n+i)%this.modulus}subtract(n,i){return(this.modulus+n-i)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new v;return this.logTable[n]}inverse(n){if(n===0)throw new Ze;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,i){return n===0||i===0?0:this.expTable[(this.logTable[n]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class pu extends Ym{constructor(n,i){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let o=1;for(let u=0;u<n;u++)this.expTable[u]=o,o=o*i%n;for(let u=0;u<n-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new Kt(this,new Int32Array([0])),this.one=new Kt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,i){if(n<0)throw new v;if(i===0)return this.zero;let o=new Int32Array(n+1);return o[0]=i,new Kt(this,o)}}pu.PDF417_GF=new pu(Te.NUMBER_OF_CODEWORDS,3);class Mh{constructor(){this.field=pu.PDF417_GF}decode(n,i,o){let u=new Kt(this.field,n),c=new Int32Array(i),d=!1;for(let z=i;z>0;z--){let V=u.evaluateAt(this.field.exp(z));c[i-z]=V,V!==0&&(d=!0)}if(!d)return 0;let f=this.field.getOne();if(o!=null)for(const z of o){let V=this.field.exp(n.length-1-z),H=new Kt(this.field,new Int32Array([this.field.subtract(0,V),1]));f=f.multiply(H)}let m=new Kt(this.field,c),w=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),m,i),E=w[0],S=w[1],T=this.findErrorLocations(E),M=this.findErrorMagnitudes(S,E,T);for(let z=0;z<T.length;z++){let V=n.length-1-this.field.log(T[z]);if(V<0)throw N.getChecksumInstance();n[V]=this.field.subtract(n[V],M[z])}return T.length}runEuclideanAlgorithm(n,i,o){if(n.getDegree()<i.getDegree()){let T=n;n=i,i=T}let u=n,c=i,d=this.field.getZero(),f=this.field.getOne();for(;c.getDegree()>=Math.round(o/2);){let T=u,M=d;if(u=c,d=f,u.isZero())throw N.getChecksumInstance();c=T;let z=this.field.getZero(),V=u.getCoefficient(u.getDegree()),H=this.field.inverse(V);for(;c.getDegree()>=u.getDegree()&&!c.isZero();){let Q=c.getDegree()-u.getDegree(),ie=this.field.multiply(c.getCoefficient(c.getDegree()),H);z=z.add(this.field.buildMonomial(Q,ie)),c=c.subtract(u.multiplyByMonomial(Q,ie))}f=z.multiply(d).subtract(M).negative()}let m=f.getCoefficient(0);if(m===0)throw N.getChecksumInstance();let w=this.field.inverse(m),E=f.multiply(w),S=c.multiply(w);return[E,S]}findErrorLocations(n){let i=n.getDegree(),o=new Int32Array(i),u=0;for(let c=1;c<this.field.getSize()&&u<i;c++)n.evaluateAt(c)===0&&(o[u]=this.field.inverse(c),u++);if(u!==i)throw N.getChecksumInstance();return o}findErrorMagnitudes(n,i,o){let u=i.getDegree(),c=new Int32Array(u);for(let w=1;w<=u;w++)c[u-w]=this.field.multiply(w,i.getCoefficient(w));let d=new Kt(this.field,c),f=o.length,m=new Int32Array(f);for(let w=0;w<f;w++){let E=this.field.inverse(o[w]),S=this.field.subtract(0,n.evaluateAt(E)),T=this.field.inverse(d.evaluateAt(E));m[w]=this.field.multiply(S,T)}return m}}class _i{constructor(n,i,o,u,c){n instanceof _i?this.constructor_2(n):this.constructor_1(n,i,o,u,c)}constructor_1(n,i,o,u,c){const d=i==null||o==null,f=u==null||c==null;if(d&&f)throw new q;d?(i=new de(0,u.getY()),o=new de(0,c.getY())):f&&(u=new de(n.getWidth()-1,i.getY()),c=new de(n.getWidth()-1,o.getY())),this.image=n,this.topLeft=i,this.bottomLeft=o,this.topRight=u,this.bottomRight=c,this.minX=Math.trunc(Math.min(i.getX(),o.getX())),this.maxX=Math.trunc(Math.max(u.getX(),c.getX())),this.minY=Math.trunc(Math.min(i.getY(),u.getY())),this.maxY=Math.trunc(Math.max(o.getY(),c.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,i){return n==null?i:i==null?n:new _i(n.image,n.topLeft,n.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(n,i,o){let u=this.topLeft,c=this.bottomLeft,d=this.topRight,f=this.bottomRight;if(n>0){let m=o?this.topLeft:this.topRight,w=Math.trunc(m.getY()-n);w<0&&(w=0);let E=new de(m.getX(),w);o?u=E:d=E}if(i>0){let m=o?this.bottomLeft:this.bottomRight,w=Math.trunc(m.getY()+i);w>=this.image.getHeight()&&(w=this.image.getHeight()-1);let E=new de(m.getX(),w);o?c=E:f=E}return new _i(this.image,u,c,d,f)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Zm{constructor(n,i,o,u){this.columnCount=n,this.errorCorrectionLevel=u,this.rowCountUpperPart=i,this.rowCountLowerPart=o,this.rowCount=i+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Qs{constructor(){this.buffer=""}static form(n,i){let o=-1;function u(d,f,m,w,E,S){if(d==="%%")return"%";if(i[++o]===void 0)return;d=w?parseInt(w.substr(1)):void 0;let T=E?parseInt(E.substr(1)):void 0,M;switch(S){case"s":M=i[o];break;case"c":M=i[o][0];break;case"f":M=parseFloat(i[o]).toFixed(d);break;case"p":M=parseFloat(i[o]).toPrecision(d);break;case"e":M=parseFloat(i[o]).toExponential(d);break;case"x":M=parseInt(i[o]).toString(T||16);break;case"d":M=parseFloat(parseInt(i[o],T||10).toPrecision(d)).toFixed(0);break}M=typeof M=="object"?JSON.stringify(M):(+M).toString(T);let z=parseInt(m),V=m&&m[0]+""=="0"?"0":" ";for(;M.length<z;)M=f!==void 0?M+V:V+M;return M}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(c,u)}format(n,...i){this.buffer+=Qs.form(n,i)}toString(){return this.buffer}}class Js{constructor(n){this.boundingBox=new _i(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let i=this.getCodeword(n);if(i!=null)return i;for(let o=1;o<Js.MAX_NEARBY_DISTANCE;o++){let u=this.imageRowToCodewordIndex(n)-o;if(u>=0&&(i=this.codewords[u],i!=null)||(u=this.imageRowToCodewordIndex(n)+o,u<this.codewords.length&&(i=this.codewords[u],i!=null)))return i}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,i){this.codewords[this.imageRowToCodewordIndex(n)]=i}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new Qs;let i=0;for(const o of this.codewords){if(o==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}return n.toString()}}Js.MAX_NEARBY_DISTANCE=5;class eo{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let i=this.values.get(n);i==null&&(i=0),i++,this.values.set(n,i)}getValue(){let n=-1,i=new Array;for(const[o,u]of this.values.entries()){const c={getKey:()=>o,getValue:()=>u};c.getValue()>n?(n=c.getValue(),i=[],i.push(c.getKey())):c.getValue()===n&&i.push(c.getKey())}return Te.toIntArray(i)}getConfidence(n){return this.values.get(n)}}class Lh extends Js{constructor(n,i){super(n),this._isLeft=i}setRowNumbers(){for(let n of this.getCodewords())n!=null&&n.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,n);let o=this.getBoundingBox(),u=this._isLeft?o.getTopLeft():o.getTopRight(),c=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(u.getY())),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=-1,w=1,E=0;for(let S=d;S<f;S++){if(i[S]==null)continue;let T=i[S],M=T.getRowNumber()-m;if(M===0)E++;else if(M===1)w=Math.max(w,E),E=1,m=T.getRowNumber();else if(M<0||T.getRowNumber()>=n.getRowCount()||M>S)i[S]=null;else{let z;w>2?z=(w-2)*M:z=M;let V=z>=S;for(let H=1;H<=z&&!V;H++)V=i[S-H]!=null;V?i[S]=null:(m=T.getRowNumber(),E=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let i=new Int32Array(n.getRowCount());for(let o of this.getCodewords())if(o!=null){let u=o.getRowNumber();if(u>=i.length)continue;i[u]++}return i}adjustIncompleteIndicatorColumnRowNumbers(n){let i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),u=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),d=this.imageRowToCodewordIndex(Math.trunc(u.getY())),f=this.getCodewords(),m=-1;for(let w=c;w<d;w++){if(f[w]==null)continue;let E=f[w];E.setRowNumberAsRowIndicatorColumn();let S=E.getRowNumber()-m;S===0||(S===1?m=E.getRowNumber():E.getRowNumber()>=n.getRowCount()?f[w]=null:m=E.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),i=new eo,o=new eo,u=new eo,c=new eo;for(let f of n){if(f==null)continue;f.setRowNumberAsRowIndicatorColumn();let m=f.getValue()%30,w=f.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:o.setValue(m*3+1);break;case 1:c.setValue(m/3),u.setValue(m%3);break;case 2:i.setValue(m+1);break}}if(i.getValue().length===0||o.getValue().length===0||u.getValue().length===0||c.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+u.getValue()[0]<Te.MIN_ROWS_IN_BARCODE||o.getValue()[0]+u.getValue()[0]>Te.MAX_ROWS_IN_BARCODE)return null;let d=new Zm(i.getValue()[0],o.getValue()[0],u.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(n,d),d}removeIncorrectCodewords(n,i){for(let o=0;o<n.length;o++){let u=n[o];if(n[o]==null)continue;let c=u.getValue()%30,d=u.getRowNumber();if(d>i.getRowCount()){n[o]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:c*3+1!==i.getRowCountUpperPart()&&(n[o]=null);break;case 1:(Math.trunc(c/3)!==i.getErrorCorrectionLevel()||c%3!==i.getRowCountLowerPart())&&(n[o]=null);break;case 2:c+1!==i.getColumnCount()&&(n[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class to{constructor(n,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=Te.MAX_CODEWORDS_IN_BARCODE,i;do i=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n!=null&&n.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let o=this.detectionResultColumns[i].getCodewords();for(let u=0;u<o.length;u++)o[u]!=null&&(o[u].hasValidRowNumber()||this.adjustRowNumbers(i,u,o))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<n.length;o++)if(n[o]!=null&&i[o]!=null&&n[o].getRowNumber()===i[o].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let c=this.detectionResultColumns[u].getCodewords()[o];c!=null&&(c.setRowNumber(n[o].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let u=i[o].getRowNumber(),c=0;for(let d=this.barcodeColumnCount+1;d>0&&c<this.ADJUST_ROW_NUMBER_SKIP;d--){let f=this.detectionResultColumns[d].getCodewords()[o];f!=null&&(c=to.adjustRowNumberIfValid(u,c,f),f.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,i=this.detectionResultColumns[0].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let u=i[o].getRowNumber(),c=0;for(let d=1;d<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;d++){let f=this.detectionResultColumns[d].getCodewords()[o];f!=null&&(c=to.adjustRowNumberIfValid(u,c,f),f.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,i,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(n)?(o.setRowNumber(n),i=0):++i),i}adjustRowNumbers(n,i,o){if(!this.detectionResultColumns[n-1])return;let u=o[i],c=this.detectionResultColumns[n-1].getCodewords(),d=c;this.detectionResultColumns[n+1]!=null&&(d=this.detectionResultColumns[n+1].getCodewords());let f=new Array(14);f[2]=c[i],f[3]=d[i],i>0&&(f[0]=o[i-1],f[4]=c[i-1],f[5]=d[i-1]),i>1&&(f[8]=o[i-2],f[10]=c[i-2],f[11]=d[i-2]),i<o.length-1&&(f[1]=o[i+1],f[6]=c[i+1],f[7]=d[i+1]),i<o.length-2&&(f[9]=o[i+2],f[12]=c[i+2],f[13]=d[i+2]);for(let m of f)if(to.adjustRowNumber(u,m))return}static adjustRowNumber(n,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===n.getBucket()?(n.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,i){this.detectionResultColumns[n]=i}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new Qs;for(let o=0;o<n.getCodewords().length;o++){i.format("CW %3d:",o);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){i.format("    |   ");continue}let c=this.detectionResultColumns[u].getCodewords()[o];if(c==null){i.format("    |   ");continue}i.format(" %3d|%3d",c.getRowNumber(),c.getValue())}i.format("%n")}return i.toString()}}class ro{constructor(n,i,o,u){this.rowNumber=ro.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(i),this.bucket=Math.trunc(o),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==ro.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}ro.BARCODE_ROW_UNKNOWN=-1;class wr{static initialize(){for(let n=0;n<Te.SYMBOL_TABLE.length;n++){let i=Te.SYMBOL_TABLE[n],o=i&1;for(let u=0;u<Te.BARS_IN_MODULE;u++){let c=0;for(;(i&1)===o;)c+=1,i>>=1;o=i&1,wr.RATIOS_TABLE[n]||(wr.RATIOS_TABLE[n]=new Array(Te.BARS_IN_MODULE)),wr.RATIOS_TABLE[n][Te.BARS_IN_MODULE-u-1]=Math.fround(c/Te.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let i=wr.getDecodedCodewordValue(wr.sampleBitCounts(n));return i!==-1?i:wr.getClosestDecodedValue(n)}static sampleBitCounts(n){let i=ye.sum(n),o=new Int32Array(Te.BARS_IN_MODULE),u=0,c=0;for(let d=0;d<Te.MODULES_IN_CODEWORD;d++){let f=i/(2*Te.MODULES_IN_CODEWORD)+d*i/Te.MODULES_IN_CODEWORD;c+n[u]<=f&&(c+=n[u],u++),o[u]++}return o}static getDecodedCodewordValue(n){let i=wr.getBitValue(n);return Te.getCodeword(i)===-1?-1:i}static getBitValue(n){let i=0;for(let o=0;o<n.length;o++)for(let u=0;u<n[o];u++)i=i<<1|(o%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(n){let i=ye.sum(n),o=new Array(Te.BARS_IN_MODULE);if(i>1)for(let d=0;d<o.length;d++)o[d]=Math.fround(n[d]/i);let u=pt.MAX_VALUE,c=-1;this.bSymbolTableReady||wr.initialize();for(let d=0;d<wr.RATIOS_TABLE.length;d++){let f=0,m=wr.RATIOS_TABLE[d];for(let w=0;w<Te.BARS_IN_MODULE;w++){let E=Math.fround(m[w]-o[w]);if(f+=Math.fround(E*E),f>=u)break}f<u&&(u=f,c=Te.SYMBOL_TABLE[d])}return c}}wr.bSymbolTableReady=!1,wr.RATIOS_TABLE=new Array(Te.SYMBOL_TABLE.length).map(A=>new Array(Te.BARS_IN_MODULE));class Bh{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class jh{static parseLong(n,i=void 0){return parseInt(n,i)}}class Fh extends g{}Fh.kind="NullPointerException";class Qm{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,i,o){if(n==null)throw new Fh;if(i<0||i>n.length||o<0||i+o>n.length||i+o<0)throw new j;if(o===0)return;for(let u=0;u<o;u++)this.write(n[i+u])}flush(){}close(){}}class Jm extends g{}class ex extends Qm{constructor(n=32){if(super(),this.count=0,n<0)throw new v("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let o=this.buf.length<<1;if(o-n<0&&(o=n),o<0){if(n<0)throw new Jm;o=I.MAX_VALUE}this.buf=R.copyOfUint8Array(this.buf,o)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,i,o){if(i<0||i>n.length||o<0||i+o-n.length>0)throw new j;this.ensureCapacity(this.count+o),L.arraycopy(n,i,this.buf,this.count,o),this.count+=o}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return R.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var tt;(function(A){A[A.ALPHA=0]="ALPHA",A[A.LOWER=1]="LOWER",A[A.MIXED=2]="MIXED",A[A.PUNCT=3]="PUNCT",A[A.ALPHA_SHIFT=4]="ALPHA_SHIFT",A[A.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(tt||(tt={}));function Uh(){if(typeof window<"u")return window.BigInt||null;if(typeof us<"u")return us.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ca;function Vn(A){if(typeof ca>"u"&&(ca=Uh()),ca===null)throw new Error("BigInt is not supported!");return ca(A)}function tx(){let A=[];A[0]=Vn(1);let n=Vn(900);A[1]=n;for(let i=2;i<16;i++)A[i]=A[i-1]*n;return A}class Z{static decode(n,i){let o=new se(""),u=C.ISO8859_1;o.enableDecoding(u);let c=1,d=n[c++],f=new Bh;for(;c<n[0];){switch(d){case Z.TEXT_COMPACTION_MODE_LATCH:c=Z.textCompaction(n,c,o);break;case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:c=Z.byteCompaction(d,n,u,c,o);break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[c++]);break;case Z.NUMERIC_COMPACTION_MODE_LATCH:c=Z.numericCompaction(n,c,o);break;case Z.ECI_CHARSET:C.getCharacterSetECIByValue(n[c++]);break;case Z.ECI_GENERAL_PURPOSE:c+=2;break;case Z.ECI_USER_DEFINED:c++;break;case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=Z.decodeMacroBlock(n,c,f);break;case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:throw new U;default:c--,c=Z.textCompaction(n,c,o);break}if(c<n.length)d=n[c++];else throw U.getFormatInstance()}if(o.length()===0)throw U.getFormatInstance();let m=new Fe(null,o.toString(),null,i);return m.setOther(f),m}static decodeMacroBlock(n,i,o){if(i+Z.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw U.getFormatInstance();let u=new Int32Array(Z.NUMBER_OF_SEQUENCE_CODEWORDS);for(let f=0;f<Z.NUMBER_OF_SEQUENCE_CODEWORDS;f++,i++)u[f]=n[i];o.setSegmentIndex(I.parseInt(Z.decodeBase900toBase10(u,Z.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new se;i=Z.textCompaction(n,i,c),o.setFileId(c.toString());let d=-1;for(n[i]===Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=i+1);i<n[0];)switch(n[i]){case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,n[i]){case Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let f=new se;i=Z.textCompaction(n,i+1,f),o.setFileName(f.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new se;i=Z.textCompaction(n,i+1,m),o.setSender(m.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let w=new se;i=Z.textCompaction(n,i+1,w),o.setAddressee(w.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let E=new se;i=Z.numericCompaction(n,i+1,E),o.setSegmentCount(I.parseInt(E.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let S=new se;i=Z.numericCompaction(n,i+1,S),o.setTimestamp(jh.parseLong(S.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let T=new se;i=Z.numericCompaction(n,i+1,T),o.setChecksum(I.parseInt(T.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let M=new se;i=Z.numericCompaction(n,i+1,M),o.setFileSize(jh.parseLong(M.toString()));break;default:throw U.getFormatInstance()}break;case Z.MACRO_PDF417_TERMINATOR:i++,o.setLastSegment(!0);break;default:throw U.getFormatInstance()}if(d!==-1){let f=i-d;o.isLastSegment()&&f--,o.setOptionalData(R.copyOfRange(n,d,d+f))}return i}static textCompaction(n,i,o){let u=new Int32Array((n[0]-i)*2),c=new Int32Array((n[0]-i)*2),d=0,f=!1;for(;i<n[0]&&!f;){let m=n[i++];if(m<Z.TEXT_COMPACTION_MODE_LATCH)u[d]=m/30,u[d+1]=m%30,d+=2;else switch(m){case Z.TEXT_COMPACTION_MODE_LATCH:u[d++]=Z.TEXT_COMPACTION_MODE_LATCH;break;case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:i--,f=!0;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[d]=Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=n[i++],c[d]=m,d++;break}}return Z.decodeTextCompaction(u,c,d,o),i}static decodeTextCompaction(n,i,o,u){let c=tt.ALPHA,d=tt.ALPHA,f=0;for(;f<o;){let m=n[f],w="";switch(c){case tt.ALPHA:if(m<26)w=String.fromCharCode(65+m);else switch(m){case 26:w=" ";break;case Z.LL:c=tt.LOWER;break;case Z.ML:c=tt.MIXED;break;case Z.PS:d=c,c=tt.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[f]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=tt.ALPHA;break}break;case tt.LOWER:if(m<26)w=String.fromCharCode(97+m);else switch(m){case 26:w=" ";break;case Z.AS:d=c,c=tt.ALPHA_SHIFT;break;case Z.ML:c=tt.MIXED;break;case Z.PS:d=c,c=tt.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[f]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=tt.ALPHA;break}break;case tt.MIXED:if(m<Z.PL)w=Z.MIXED_CHARS[m];else switch(m){case Z.PL:c=tt.PUNCT;break;case 26:w=" ";break;case Z.LL:c=tt.LOWER;break;case Z.AL:c=tt.ALPHA;break;case Z.PS:d=c,c=tt.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[f]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=tt.ALPHA;break}break;case tt.PUNCT:if(m<Z.PAL)w=Z.PUNCT_CHARS[m];else switch(m){case Z.PAL:c=tt.ALPHA;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[f]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=tt.ALPHA;break}break;case tt.ALPHA_SHIFT:if(c=d,m<26)w=String.fromCharCode(65+m);else switch(m){case 26:w=" ";break;case Z.TEXT_COMPACTION_MODE_LATCH:c=tt.ALPHA;break}break;case tt.PUNCT_SHIFT:if(c=d,m<Z.PAL)w=Z.PUNCT_CHARS[m];else switch(m){case Z.PAL:c=tt.ALPHA;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[f]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=tt.ALPHA;break}break}w!==""&&u.append(w),f++}}static byteCompaction(n,i,o,u,c){let d=new ex,f=0,m=0,w=!1;switch(n){case Z.BYTE_COMPACTION_MODE_LATCH:let E=new Int32Array(6),S=i[u++];for(;u<i[0]&&!w;)switch(E[f++]=S,m=900*m+S,S=i[u++],S){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:u--,w=!0;break;default:if(f%5===0&&f>0){for(let T=0;T<6;++T)d.write(Number(Vn(m)>>Vn(8*(5-T))));m=0,f=0}break}u===i[0]&&S<Z.TEXT_COMPACTION_MODE_LATCH&&(E[f++]=S);for(let T=0;T<f;T++)d.write(E[T]);break;case Z.BYTE_COMPACTION_MODE_LATCH_6:for(;u<i[0]&&!w;){let T=i[u++];if(T<Z.TEXT_COMPACTION_MODE_LATCH)f++,m=900*m+T;else switch(T){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:u--,w=!0;break}if(f%5===0&&f>0){for(let M=0;M<6;++M)d.write(Number(Vn(m)>>Vn(8*(5-M))));m=0,f=0}}break}return c.append(Y.decode(d.toByteArray(),o)),u}static numericCompaction(n,i,o){let u=0,c=!1,d=new Int32Array(Z.MAX_NUMERIC_CODEWORDS);for(;i<n[0]&&!c;){let f=n[i++];if(i===n[0]&&(c=!0),f<Z.TEXT_COMPACTION_MODE_LATCH)d[u]=f,u++;else switch(f){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:i--,c=!0;break}(u%Z.MAX_NUMERIC_CODEWORDS===0||f===Z.NUMERIC_COMPACTION_MODE_LATCH||c)&&u>0&&(o.append(Z.decodeBase900toBase10(d,u)),u=0)}return i}static decodeBase900toBase10(n,i){let o=Vn(0);for(let c=0;c<i;c++)o+=Z.EXP900[i-c-1]*Vn(n[c]);let u=o.toString();if(u.charAt(0)!=="1")throw new U;return u.substring(1)}}Z.TEXT_COMPACTION_MODE_LATCH=900,Z.BYTE_COMPACTION_MODE_LATCH=901,Z.NUMERIC_COMPACTION_MODE_LATCH=902,Z.BYTE_COMPACTION_MODE_LATCH_6=924,Z.ECI_USER_DEFINED=925,Z.ECI_GENERAL_PURPOSE=926,Z.ECI_CHARSET=927,Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Z.MACRO_PDF417_TERMINATOR=922,Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Z.MAX_NUMERIC_CODEWORDS=15,Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Z.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Z.PL=25,Z.LL=27,Z.AS=27,Z.ML=28,Z.AL=28,Z.PS=29,Z.PAL=29,Z.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Z.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Z.EXP900=Uh()?tx():[],Z.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Be{constructor(){}static decode(n,i,o,u,c,d,f){let m=new _i(n,i,o,u,c),w=null,E=null,S;for(let z=!0;;z=!1){if(i!=null&&(w=Be.getRowIndicatorColumn(n,m,i,!0,d,f)),u!=null&&(E=Be.getRowIndicatorColumn(n,m,u,!1,d,f)),S=Be.merge(w,E),S==null)throw q.getNotFoundInstance();let V=S.getBoundingBox();if(z&&V!=null&&(V.getMinY()<m.getMinY()||V.getMaxY()>m.getMaxY()))m=V;else break}S.setBoundingBox(m);let T=S.getBarcodeColumnCount()+1;S.setDetectionResultColumn(0,w),S.setDetectionResultColumn(T,E);let M=w!=null;for(let z=1;z<=T;z++){let V=M?z:T-z;if(S.getDetectionResultColumn(V)!==void 0)continue;let H;V===0||V===T?H=new Lh(m,V===0):H=new Js(m),S.setDetectionResultColumn(V,H);let Q=-1,ie=Q;for(let oe=m.getMinY();oe<=m.getMaxY();oe++){if(Q=Be.getStartColumn(S,V,oe,M),Q<0||Q>m.getMaxX()){if(ie===-1)continue;Q=ie}let ee=Be.detectCodeword(n,m.getMinX(),m.getMaxX(),M,Q,oe,d,f);ee!=null&&(H.setCodeword(oe,ee),ie=Q,d=Math.min(d,ee.getWidth()),f=Math.max(f,ee.getWidth()))}}return Be.createDecoderResult(S)}static merge(n,i){if(n==null&&i==null)return null;let o=Be.getBarcodeMetadata(n,i);if(o==null)return null;let u=_i.merge(Be.adjustBoundingBox(n),Be.adjustBoundingBox(i));return new to(o,u)}static adjustBoundingBox(n){if(n==null)return null;let i=n.getRowHeights();if(i==null)return null;let o=Be.getMax(i),u=0;for(let f of i)if(u+=o-f,f>0)break;let c=n.getCodewords();for(let f=0;u>0&&c[f]==null;f++)u--;let d=0;for(let f=i.length-1;f>=0&&(d+=o-i[f],!(i[f]>0));f--);for(let f=c.length-1;d>0&&c[f]==null;f--)d--;return n.getBoundingBox().addMissingRows(u,d,n.isLeft())}static getMax(n){let i=-1;for(let o of n)i=Math.max(i,o);return i}static getBarcodeMetadata(n,i){let o;if(n==null||(o=n.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let u;return i==null||(u=i.getBarcodeMetadata())==null?o:o.getColumnCount()!==u.getColumnCount()&&o.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&o.getRowCount()!==u.getRowCount()?null:o}static getRowIndicatorColumn(n,i,o,u,c,d){let f=new Lh(i,u);for(let m=0;m<2;m++){let w=m===0?1:-1,E=Math.trunc(Math.trunc(o.getX()));for(let S=Math.trunc(Math.trunc(o.getY()));S<=i.getMaxY()&&S>=i.getMinY();S+=w){let T=Be.detectCodeword(n,0,n.getWidth(),u,E,S,c,d);T!=null&&(f.setCodeword(S,T),u?E=T.getStartX():E=T.getEndX())}}return f}static adjustCodewordCount(n,i){let o=i[0][1],u=o.getValue(),c=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-Be.getNumberOfECCodeWords(n.getBarcodeECLevel());if(u.length===0){if(c<1||c>Te.MAX_CODEWORDS_IN_BARCODE)throw q.getNotFoundInstance();o.setValue(c)}else u[0]!==c&&o.setValue(c)}static createDecoderResult(n){let i=Be.createBarcodeMatrix(n);Be.adjustCodewordCount(n,i);let o=new Array,u=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),c=[],d=new Array;for(let m=0;m<n.getBarcodeRowCount();m++)for(let w=0;w<n.getBarcodeColumnCount();w++){let E=i[m][w+1].getValue(),S=m*n.getBarcodeColumnCount()+w;E.length===0?o.push(S):E.length===1?u[S]=E[0]:(d.push(S),c.push(E))}let f=new Array(c.length);for(let m=0;m<f.length;m++)f[m]=c[m];return Be.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),u,Te.toIntArray(o),Te.toIntArray(d),f)}static createDecoderResultFromAmbiguousValues(n,i,o,u,c){let d=new Int32Array(u.length),f=100;for(;f-- >0;){for(let m=0;m<d.length;m++)i[u[m]]=c[m][d[m]];try{return Be.decodeCodewords(i,n,o)}catch(m){if(!(m instanceof N))throw m}if(d.length===0)throw N.getChecksumInstance();for(let m=0;m<d.length;m++)if(d[m]<c[m].length-1){d[m]++;break}else if(d[m]=0,m===d.length-1)throw N.getChecksumInstance()}throw N.getChecksumInstance()}static createBarcodeMatrix(n){let i=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let u=0;u<i.length;u++)for(let c=0;c<i[u].length;c++)i[u][c]=new eo;let o=0;for(let u of n.getDetectionResultColumns()){if(u!=null){for(let c of u.getCodewords())if(c!=null){let d=c.getRowNumber();if(d>=0){if(d>=i.length)continue;i[d][o].setValue(c.getValue())}}}o++}return i}static isValidBarcodeColumn(n,i){return i>=0&&i<=n.getBarcodeColumnCount()+1}static getStartColumn(n,i,o,u){let c=u?1:-1,d=null;if(Be.isValidBarcodeColumn(n,i-c)&&(d=n.getDetectionResultColumn(i-c).getCodeword(o)),d!=null)return u?d.getEndX():d.getStartX();if(d=n.getDetectionResultColumn(i).getCodewordNearby(o),d!=null)return u?d.getStartX():d.getEndX();if(Be.isValidBarcodeColumn(n,i-c)&&(d=n.getDetectionResultColumn(i-c).getCodewordNearby(o)),d!=null)return u?d.getEndX():d.getStartX();let f=0;for(;Be.isValidBarcodeColumn(n,i-c);){i-=c;for(let m of n.getDetectionResultColumn(i).getCodewords())if(m!=null)return(u?m.getEndX():m.getStartX())+c*f*(m.getEndX()-m.getStartX());f++}return u?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,i,o,u,c,d,f,m){c=Be.adjustCodewordStartColumn(n,i,o,u,c,d);let w=Be.getModuleBitCount(n,i,o,u,c,d);if(w==null)return null;let E,S=ye.sum(w);if(u)E=c+S;else{for(let z=0;z<w.length/2;z++){let V=w[z];w[z]=w[w.length-1-z],w[w.length-1-z]=V}E=c,c=E-S}if(!Be.checkCodewordSkew(S,f,m))return null;let T=wr.getDecodedValue(w),M=Te.getCodeword(T);return M===-1?null:new ro(c,E,Be.getCodewordBucketNumber(T),M)}static getModuleBitCount(n,i,o,u,c,d){let f=c,m=new Int32Array(8),w=0,E=u?1:-1,S=u;for(;(u?f<o:f>=i)&&w<m.length;)n.get(f,d)===S?(m[w]++,f+=E):(w++,S=!S);return w===m.length||f===(u?o:i)&&w===m.length-1?m:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,i,o,u,c,d){let f=c,m=u?-1:1;for(let w=0;w<2;w++){for(;(u?f>=i:f<o)&&u===n.get(f,d);){if(Math.abs(c-f)>Be.CODEWORD_SKEW_SIZE)return c;f+=m}m=-m,u=!u}return f}static checkCodewordSkew(n,i,o){return i-Be.CODEWORD_SKEW_SIZE<=n&&n<=o+Be.CODEWORD_SKEW_SIZE}static decodeCodewords(n,i,o){if(n.length===0)throw U.getFormatInstance();let u=1<<i+1,c=Be.correctErrors(n,o,u);Be.verifyCodewordCount(n,u);let d=Z.decode(n,""+i);return d.setErrorsCorrected(c),d.setErasures(o.length),d}static correctErrors(n,i,o){if(i!=null&&i.length>o/2+Be.MAX_ERRORS||o<0||o>Be.MAX_EC_CODEWORDS)throw N.getChecksumInstance();return Be.errorCorrection.decode(n,o,i)}static verifyCodewordCount(n,i){if(n.length<4)throw U.getFormatInstance();let o=n[0];if(o>n.length)throw U.getFormatInstance();if(o===0)if(i<n.length)n[0]=n.length-i;else throw U.getFormatInstance()}static getBitCountForCodeword(n){let i=new Int32Array(8),o=0,u=i.length-1;for(;!((n&1)!==o&&(o=n&1,u--,u<0));)i[u]++,n>>=1;return i}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return Be.getCodewordBucketNumber(Be.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let i=new Qs;for(let o=0;o<n.length;o++){i.format("Row %2d: ",o);for(let u=0;u<n[o].length;u++){let c=n[o][u];c.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}i.format("%n")}return i.toString()}}Be.CODEWORD_SKEW_SIZE=2,Be.MAX_ERRORS=3,Be.MAX_EC_CODEWORDS=512,Be.errorCorrection=new Mh;class qt{decode(n,i=null){let o=qt.decode(n,i,!1);if(o==null||o.length===0||o[0]==null)throw q.getNotFoundInstance();return o[0]}decodeMultiple(n,i=null){try{return qt.decode(n,i,!0)}catch(o){throw o instanceof U||o instanceof N?q.getNotFoundInstance():o}}static decode(n,i,o){const u=new Array,c=Me.detectMultiple(n,i,o);for(const d of c.getPoints()){const f=Be.decode(c.getBits(),d[4],d[5],d[6],d[7],qt.getMinCodewordWidth(d),qt.getMaxCodewordWidth(d)),m=new ke(f.getText(),f.getRawBytes(),void 0,d,ue.PDF_417);m.putMetadata(be.ERROR_CORRECTION_LEVEL,f.getECLevel());const w=f.getOther();w!=null&&m.putMetadata(be.PDF417_EXTRA_METADATA,w),u.push(m)}return u.map(d=>d)}static getMaxWidth(n,i){return n==null||i==null?0:Math.trunc(Math.abs(n.getX()-i.getX()))}static getMinWidth(n,i){return n==null||i==null?I.MAX_VALUE:Math.trunc(Math.abs(n.getX()-i.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(qt.getMaxWidth(n[0],n[4]),qt.getMaxWidth(n[6],n[2])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN),Math.max(qt.getMaxWidth(n[1],n[5]),qt.getMaxWidth(n[7],n[3])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(qt.getMinWidth(n[0],n[4]),qt.getMinWidth(n[6],n[2])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN),Math.min(qt.getMinWidth(n[1],n[5]),qt.getMinWidth(n[7],n[3])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN)))}reset(){}}class da extends g{}da.kind="ReaderException";class zh{constructor(n,i){this.verbose=n===!0,i&&this.setHints(i)}decode(n,i){return i&&this.setHints(i),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const i=!s(n)&&n.get($.TRY_HARDER)===!0,o=s(n)?null:n.get($.POSSIBLE_FORMATS),u=new Array;if(!s(o)){const c=o.some(d=>d===ue.UPC_A||d===ue.UPC_E||d===ue.EAN_13||d===ue.EAN_8||d===ue.CODABAR||d===ue.CODE_39||d===ue.CODE_93||d===ue.CODE_128||d===ue.ITF||d===ue.RSS_14||d===ue.RSS_EXPANDED);c&&!i&&u.push(new Zi(n,this.verbose)),o.includes(ue.QR_CODE)&&u.push(new zn),o.includes(ue.DATA_MATRIX)&&u.push(new Un),o.includes(ue.AZTEC)&&u.push(new Kr),o.includes(ue.PDF_417)&&u.push(new qt),c&&i&&u.push(new Zi(n,this.verbose))}u.length===0&&(i||u.push(new Zi(n,this.verbose)),u.push(new zn),u.push(new Un),u.push(new Kr),u.push(new qt),i&&u.push(new Zi(n,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new da("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(n,this.hints)}catch(o){if(o instanceof da)continue}throw new q("No MultiFormat Readers were able to detect the code.")}}class rx extends he{constructor(n=null,i=500){const o=new zh;o.setHints(n),super(o,i)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class nx extends he{constructor(n=500){super(new qt,n)}}class ix extends he{constructor(n=500){super(new zn,n)}}var mu;(function(A){A[A.ERROR_CORRECTION=0]="ERROR_CORRECTION",A[A.CHARACTER_SET=1]="CHARACTER_SET",A[A.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",A[A.MIN_SIZE=3]="MIN_SIZE",A[A.MAX_SIZE=4]="MAX_SIZE",A[A.MARGIN=5]="MARGIN",A[A.PDF417_COMPACT=6]="PDF417_COMPACT",A[A.PDF417_COMPACTION=7]="PDF417_COMPACTION",A[A.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",A[A.AZTEC_LAYERS=9]="AZTEC_LAYERS",A[A.QR_VERSION=10]="QR_VERSION"})(mu||(mu={}));var Bt=mu;class xu{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new Se(n,Int32Array.from([1])))}buildGenerator(n){const i=this.cachedGenerators;if(n>=i.length){let o=i[i.length-1];const u=this.field;for(let c=i.length;c<=n;c++){const d=o.multiply(new Se(u,Int32Array.from([1,u.exp(c-1+u.getGeneratorBase())])));i.push(d),o=d}}return i[n]}encode(n,i){if(i===0)throw new v("No error correction bytes");const o=n.length-i;if(o<=0)throw new v("No data bytes provided");const u=this.buildGenerator(i),c=new Int32Array(o);L.arraycopy(n,0,c,0,o);let d=new Se(this.field,c);d=d.multiplyByMonomial(i,1);const m=d.divide(u)[1].getCoefficients(),w=i-m.length;for(let E=0;E<w;E++)n[o+E]=0;L.arraycopy(m,0,n,o+w,m.length)}}class At{constructor(){}static applyMaskPenaltyRule1(n){return At.applyMaskPenaltyRule1Internal(n,!0)+At.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let i=0;const o=n.getArray(),u=n.getWidth(),c=n.getHeight();for(let d=0;d<c-1;d++){const f=o[d];for(let m=0;m<u-1;m++){const w=f[m];w===f[m+1]&&w===o[d+1][m]&&w===o[d+1][m+1]&&i++}}return At.N2*i}static applyMaskPenaltyRule3(n){let i=0;const o=n.getArray(),u=n.getWidth(),c=n.getHeight();for(let d=0;d<c;d++)for(let f=0;f<u;f++){const m=o[d];f+6<u&&m[f]===1&&m[f+1]===0&&m[f+2]===1&&m[f+3]===1&&m[f+4]===1&&m[f+5]===0&&m[f+6]===1&&(At.isWhiteHorizontal(m,f-4,f)||At.isWhiteHorizontal(m,f+7,f+11))&&i++,d+6<c&&o[d][f]===1&&o[d+1][f]===0&&o[d+2][f]===1&&o[d+3][f]===1&&o[d+4][f]===1&&o[d+5][f]===0&&o[d+6][f]===1&&(At.isWhiteVertical(o,f,d-4,d)||At.isWhiteVertical(o,f,d+7,d+11))&&i++}return i*At.N3}static isWhiteHorizontal(n,i,o){i=Math.max(i,0),o=Math.min(o,n.length);for(let u=i;u<o;u++)if(n[u]===1)return!1;return!0}static isWhiteVertical(n,i,o,u){o=Math.max(o,0),u=Math.min(u,n.length);for(let c=o;c<u;c++)if(n[c][i]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let i=0;const o=n.getArray(),u=n.getWidth(),c=n.getHeight();for(let m=0;m<c;m++){const w=o[m];for(let E=0;E<u;E++)w[E]===1&&i++}const d=n.getHeight()*n.getWidth();return Math.floor(Math.abs(i*2-d)*10/d)*At.N4}static getDataMaskBit(n,i,o){let u,c;switch(n){case 0:u=o+i&1;break;case 1:u=o&1;break;case 2:u=i%3;break;case 3:u=(o+i)%3;break;case 4:u=Math.floor(o/2)+Math.floor(i/3)&1;break;case 5:c=o*i,u=(c&1)+c%3;break;case 6:c=o*i,u=(c&1)+c%3&1;break;case 7:c=o*i,u=c%3+(o+i&1)&1;break;default:throw new v("Invalid mask pattern: "+n)}return u===0}static applyMaskPenaltyRule1Internal(n,i){let o=0;const u=i?n.getHeight():n.getWidth(),c=i?n.getWidth():n.getHeight(),d=n.getArray();for(let f=0;f<u;f++){let m=0,w=-1;for(let E=0;E<c;E++){const S=i?d[f][E]:d[E][f];S===w?m++:(m>=5&&(o+=At.N1+(m-5)),m=1,w=S)}m>=5&&(o+=At.N1+(m-5))}return o}}At.N1=3,At.N2=3,At.N3=40,At.N4=10;class ha{constructor(n,i){this.width=n,this.height=i;const o=new Array(i);for(let u=0;u!==i;u++)o[u]=new Uint8Array(n);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(n,i){return this.bytes[i][n]}getArray(){return this.bytes}setNumber(n,i,o){this.bytes[i][n]=o}setBoolean(n,i,o){this.bytes[i][n]=o?1:0}clear(n){for(const i of this.bytes)R.fill(i,n)}equals(n){if(!(n instanceof ha))return!1;const i=n;if(this.width!==i.width||this.height!==i.height)return!1;for(let o=0,u=this.height;o<u;++o){const c=this.bytes[o],d=i.bytes[o];for(let f=0,m=this.width;f<m;++f)if(c[f]!==d[f])return!1}return!0}toString(){const n=new se;for(let i=0,o=this.height;i<o;++i){const u=this.bytes[i];for(let c=0,d=this.width;c<d;++c)switch(u[c]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class Ci{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new se;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<Ci.NUM_MASK_PATTERNS}}Ci.NUM_MASK_PATTERNS=8;class it extends g{}it.kind="WriterException";class Ie{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,i,o,u,c){Ie.clearMatrix(c),Ie.embedBasicPatterns(o,c),Ie.embedTypeInfo(i,u,c),Ie.maybeEmbedVersionInfo(o,c),Ie.embedDataBits(n,u,c)}static embedBasicPatterns(n,i){Ie.embedPositionDetectionPatternsAndSeparators(i),Ie.embedDarkDotAtLeftBottomCorner(i),Ie.maybeEmbedPositionAdjustmentPatterns(n,i),Ie.embedTimingPatterns(i)}static embedTypeInfo(n,i,o){const u=new B;Ie.makeTypeInfoBits(n,i,u);for(let c=0,d=u.getSize();c<d;++c){const f=u.get(u.getSize()-1-c),m=Ie.TYPE_INFO_COORDINATES[c],w=m[0],E=m[1];if(o.setBoolean(w,E,f),c<8){const S=o.getWidth()-c-1;o.setBoolean(S,8,f)}else{const T=o.getHeight()-7+(c-8);o.setBoolean(8,T,f)}}}static maybeEmbedVersionInfo(n,i){if(n.getVersionNumber()<7)return;const o=new B;Ie.makeVersionInfoBits(n,o);let u=6*3-1;for(let c=0;c<6;++c)for(let d=0;d<3;++d){const f=o.get(u);u--,i.setBoolean(c,i.getHeight()-11+d,f),i.setBoolean(i.getHeight()-11+d,c,f)}}static embedDataBits(n,i,o){let u=0,c=-1,d=o.getWidth()-1,f=o.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);f>=0&&f<o.getHeight();){for(let m=0;m<2;++m){const w=d-m;if(!Ie.isEmpty(o.get(w,f)))continue;let E;u<n.getSize()?(E=n.get(u),++u):E=!1,i!==255&&At.getDataMaskBit(i,w,f)&&(E=!E),o.setBoolean(w,f,E)}f+=c}c=-c,f+=c,d-=2}if(u!==n.getSize())throw new it("Not all bits consumed: "+u+"/"+n.getSize())}static findMSBSet(n){return 32-I.numberOfLeadingZeros(n)}static calculateBCHCode(n,i){if(i===0)throw new v("0 polynomial");const o=Ie.findMSBSet(i);for(n<<=o-1;Ie.findMSBSet(n)>=o;)n^=i<<Ie.findMSBSet(n)-o;return n}static makeTypeInfoBits(n,i,o){if(!Ci.isValidMaskPattern(i))throw new it("Invalid mask pattern");const u=n.getBits()<<3|i;o.appendBits(u,5);const c=Ie.calculateBCHCode(u,Ie.TYPE_INFO_POLY);o.appendBits(c,10);const d=new B;if(d.appendBits(Ie.TYPE_INFO_MASK_PATTERN,15),o.xor(d),o.getSize()!==15)throw new it("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(n,i){i.appendBits(n.getVersionNumber(),6);const o=Ie.calculateBCHCode(n.getVersionNumber(),Ie.VERSION_INFO_POLY);if(i.appendBits(o,12),i.getSize()!==18)throw new it("should not happen but we got: "+i.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let i=8;i<n.getWidth()-8;++i){const o=(i+1)%2;Ie.isEmpty(n.get(i,6))&&n.setNumber(i,6,o),Ie.isEmpty(n.get(6,i))&&n.setNumber(6,i,o)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new it;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,i,o){for(let u=0;u<8;++u){if(!Ie.isEmpty(o.get(n+u,i)))throw new it;o.setNumber(n+u,i,0)}}static embedVerticalSeparationPattern(n,i,o){for(let u=0;u<7;++u){if(!Ie.isEmpty(o.get(n,i+u)))throw new it;o.setNumber(n,i+u,0)}}static embedPositionAdjustmentPattern(n,i,o){for(let u=0;u<5;++u){const c=Ie.POSITION_ADJUSTMENT_PATTERN[u];for(let d=0;d<5;++d)o.setNumber(n+d,i+u,c[d])}}static embedPositionDetectionPattern(n,i,o){for(let u=0;u<7;++u){const c=Ie.POSITION_DETECTION_PATTERN[u];for(let d=0;d<7;++d)o.setNumber(n+d,i+u,c[d])}}static embedPositionDetectionPatternsAndSeparators(n){const i=Ie.POSITION_DETECTION_PATTERN[0].length;Ie.embedPositionDetectionPattern(0,0,n),Ie.embedPositionDetectionPattern(n.getWidth()-i,0,n),Ie.embedPositionDetectionPattern(0,n.getWidth()-i,n);const o=8;Ie.embedHorizontalSeparationPattern(0,o-1,n),Ie.embedHorizontalSeparationPattern(n.getWidth()-o,o-1,n),Ie.embedHorizontalSeparationPattern(0,n.getWidth()-o,n);const u=7;Ie.embedVerticalSeparationPattern(u,0,n),Ie.embedVerticalSeparationPattern(n.getHeight()-u-1,0,n),Ie.embedVerticalSeparationPattern(u,n.getHeight()-u,n)}static maybeEmbedPositionAdjustmentPatterns(n,i){if(n.getVersionNumber()<2)return;const o=n.getVersionNumber()-1,u=Ie.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let c=0,d=u.length;c!==d;c++){const f=u[c];if(f>=0)for(let m=0;m!==d;m++){const w=u[m];w>=0&&Ie.isEmpty(i.get(w,f))&&Ie.embedPositionAdjustmentPattern(w-2,f-2,i)}}}}Ie.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ie.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ie.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ie.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ie.VERSION_INFO_POLY=7973,Ie.TYPE_INFO_POLY=1335,Ie.TYPE_INFO_MASK_PATTERN=21522;class sx{constructor(n,i){this.dataBytes=n,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class dt{constructor(){}static calculateMaskPenalty(n){return At.applyMaskPenaltyRule1(n)+At.applyMaskPenaltyRule2(n)+At.applyMaskPenaltyRule3(n)+At.applyMaskPenaltyRule4(n)}static encode(n,i,o=null){let u=dt.DEFAULT_BYTE_MODE_ENCODING;const c=o!==null&&o.get(Bt.CHARACTER_SET)!==void 0;c&&(u=o.get(Bt.CHARACTER_SET).toString());const d=this.chooseMode(n,u),f=new B;if(d===Ae.BYTE&&(c||dt.DEFAULT_BYTE_MODE_ENCODING!==u)){const oe=C.getCharacterSetECIByName(u);oe!==void 0&&this.appendECI(oe,f)}this.appendModeInfo(d,f);const m=new B;this.appendBytes(n,d,m,u);let w;if(o!==null&&o.get(Bt.QR_VERSION)!==void 0){const oe=Number.parseInt(o.get(Bt.QR_VERSION).toString(),10);w=_e.getVersionForNumber(oe);const ee=this.calculateBitsNeeded(d,f,m,w);if(!this.willFit(ee,w,i))throw new it("Data too big for requested version")}else w=this.recommendVersion(i,d,f,m);const E=new B;E.appendBitArray(f);const S=d===Ae.BYTE?m.getSizeInBytes():n.length;this.appendLengthInfo(S,w,d,E),E.appendBitArray(m);const T=w.getECBlocksForLevel(i),M=w.getTotalCodewords()-T.getTotalECCodewords();this.terminateBits(M,E);const z=this.interleaveWithECBytes(E,w.getTotalCodewords(),M,T.getNumBlocks()),V=new Ci;V.setECLevel(i),V.setMode(d),V.setVersion(w);const H=w.getDimensionForVersion(),Q=new ha(H,H),ie=this.chooseMaskPattern(z,i,w,Q);return V.setMaskPattern(ie),Ie.buildMatrix(z,i,w,ie,Q),V.setMatrix(Q),V}static recommendVersion(n,i,o,u){const c=this.calculateBitsNeeded(i,o,u,_e.getVersionForNumber(1)),d=this.chooseVersion(c,n),f=this.calculateBitsNeeded(i,o,u,d);return this.chooseVersion(f,n)}static calculateBitsNeeded(n,i,o,u){return i.getSize()+n.getCharacterCountBits(u)+o.getSize()}static getAlphanumericCode(n){return n<dt.ALPHANUMERIC_TABLE.length?dt.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,i=null){if(C.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(n))return Ae.KANJI;let o=!1,u=!1;for(let c=0,d=n.length;c<d;++c){const f=n.charAt(c);if(dt.isDigit(f))o=!0;else if(this.getAlphanumericCode(f.charCodeAt(0))!==-1)u=!0;else return Ae.BYTE}return u?Ae.ALPHANUMERIC:o?Ae.NUMERIC:Ae.BYTE}static isOnlyDoubleByteKanji(n){let i;try{i=Y.encode(n,C.SJIS)}catch{return!1}const o=i.length;if(o%2!==0)return!1;for(let u=0;u<o;u+=2){const c=i[u]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(n,i,o,u){let c=Number.MAX_SAFE_INTEGER,d=-1;for(let f=0;f<Ci.NUM_MASK_PATTERNS;f++){Ie.buildMatrix(n,i,o,f,u);let m=this.calculateMaskPenalty(u);m<c&&(c=m,d=f)}return d}static chooseVersion(n,i){for(let o=1;o<=40;o++){const u=_e.getVersionForNumber(o);if(dt.willFit(n,u,i))return u}throw new it("Data too big")}static willFit(n,i,o){const u=i.getTotalCodewords(),d=i.getECBlocksForLevel(o).getTotalECCodewords(),f=u-d,m=(n+7)/8;return f>=m}static terminateBits(n,i){const o=n*8;if(i.getSize()>o)throw new it("data bits cannot fit in the QR Code"+i.getSize()+" > "+o);for(let d=0;d<4&&i.getSize()<o;++d)i.appendBit(!1);const u=i.getSize()&7;if(u>0)for(let d=u;d<8;d++)i.appendBit(!1);const c=n-i.getSizeInBytes();for(let d=0;d<c;++d)i.appendBits(d&1?17:236,8);if(i.getSize()!==o)throw new it("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,i,o,u,c,d){if(u>=o)throw new it("Block ID too large");const f=n%o,m=o-f,w=Math.floor(n/o),E=w+1,S=Math.floor(i/o),T=S+1,M=w-S,z=E-T;if(M!==z)throw new it("EC bytes mismatch");if(o!==m+f)throw new it("RS blocks mismatch");if(n!==(S+M)*m+(T+z)*f)throw new it("Total bytes mismatch");u<m?(c[0]=S,d[0]=M):(c[0]=T,d[0]=z)}static interleaveWithECBytes(n,i,o,u){if(n.getSizeInBytes()!==o)throw new it("Number of bits and data bytes does not match");let c=0,d=0,f=0;const m=new Array;for(let E=0;E<u;++E){const S=new Int32Array(1),T=new Int32Array(1);dt.getNumDataBytesAndNumECBytesForBlockID(i,o,u,E,S,T);const M=S[0],z=new Uint8Array(M);n.toBytes(8*c,z,0,M);const V=dt.generateECBytes(z,T[0]);m.push(new sx(z,V)),d=Math.max(d,M),f=Math.max(f,V.length),c+=S[0]}if(o!==c)throw new it("Data bytes does not match offset");const w=new B;for(let E=0;E<d;++E)for(const S of m){const T=S.getDataBytes();E<T.length&&w.appendBits(T[E],8)}for(let E=0;E<f;++E)for(const S of m){const T=S.getErrorCorrectionBytes();E<T.length&&w.appendBits(T[E],8)}if(i!==w.getSizeInBytes())throw new it("Interleaving error: "+i+" and "+w.getSizeInBytes()+" differ.");return w}static generateECBytes(n,i){const o=n.length,u=new Int32Array(o+i);for(let d=0;d<o;d++)u[d]=n[d]&255;new xu(Ne.QR_CODE_FIELD_256).encode(u,i);const c=new Uint8Array(i);for(let d=0;d<i;d++)c[d]=u[o+d];return c}static appendModeInfo(n,i){i.appendBits(n.getBits(),4)}static appendLengthInfo(n,i,o,u){const c=o.getCharacterCountBits(i);if(n>=1<<c)throw new it(n+" is bigger than "+((1<<c)-1));u.appendBits(n,c)}static appendBytes(n,i,o,u){switch(i){case Ae.NUMERIC:dt.appendNumericBytes(n,o);break;case Ae.ALPHANUMERIC:dt.appendAlphanumericBytes(n,o);break;case Ae.BYTE:dt.append8BitBytes(n,o,u);break;case Ae.KANJI:dt.appendKanjiBytes(n,o);break;default:throw new it("Invalid mode: "+i)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const i=dt.getDigit(n);return i>=0&&i<=9}static appendNumericBytes(n,i){const o=n.length;let u=0;for(;u<o;){const c=dt.getDigit(n.charAt(u));if(u+2<o){const d=dt.getDigit(n.charAt(u+1)),f=dt.getDigit(n.charAt(u+2));i.appendBits(c*100+d*10+f,10),u+=3}else if(u+1<o){const d=dt.getDigit(n.charAt(u+1));i.appendBits(c*10+d,7),u+=2}else i.appendBits(c,4),u++}}static appendAlphanumericBytes(n,i){const o=n.length;let u=0;for(;u<o;){const c=dt.getAlphanumericCode(n.charCodeAt(u));if(c===-1)throw new it;if(u+1<o){const d=dt.getAlphanumericCode(n.charCodeAt(u+1));if(d===-1)throw new it;i.appendBits(c*45+d,11),u+=2}else i.appendBits(c,6),u++}}static append8BitBytes(n,i,o){let u;try{u=Y.encode(n,o)}catch(c){throw new it(c)}for(let c=0,d=u.length;c!==d;c++){const f=u[c];i.appendBits(f,8)}}static appendKanjiBytes(n,i){let o;try{o=Y.encode(n,C.SJIS)}catch(c){throw new it(c)}const u=o.length;for(let c=0;c<u;c+=2){const d=o[c]&255,f=o[c+1]&255,m=d<<8&4294967295|f;let w=-1;if(m>=33088&&m<=40956?w=m-33088:m>=57408&&m<=60351&&(w=m-49472),w===-1)throw new it("Invalid byte sequence");const E=(w>>8)*192+(w&255);i.appendBits(E,13)}}static appendECI(n,i){i.appendBits(Ae.ECI.getBits(),4),i.appendBits(n.getValue(),8)}}dt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),dt.DEFAULT_BYTE_MODE_ENCODING=C.UTF8.getName();class bi{write(n,i,o,u=null){if(n.length===0)throw new v("Found empty contents");if(i<0||o<0)throw new v("Requested dimensions are too small: "+i+"x"+o);let c=lt.L,d=bi.QUIET_ZONE_SIZE;u!==null&&(u.get(Bt.ERROR_CORRECTION)!==void 0&&(c=lt.fromString(u.get(Bt.ERROR_CORRECTION).toString())),u.get(Bt.MARGIN)!==void 0&&(d=Number.parseInt(u.get(Bt.MARGIN).toString(),10)));const f=dt.encode(n,c,u);return this.renderResult(f,i,o,d)}writeToDom(n,i,o,u,c=null){typeof n=="string"&&(n=document.querySelector(n));const d=this.write(i,o,u,c);n&&n.appendChild(d)}renderResult(n,i,o,u){const c=n.getMatrix();if(c===null)throw new Le;const d=c.getWidth(),f=c.getHeight(),m=d+u*2,w=f+u*2,E=Math.max(i,m),S=Math.max(o,w),T=Math.min(Math.floor(E/m),Math.floor(S/w)),M=Math.floor((E-d*T)/2),z=Math.floor((S-f*T)/2),V=this.createSVGElement(E,S);for(let H=0,Q=z;H<f;H++,Q+=T)for(let ie=0,oe=M;ie<d;ie++,oe+=T)if(c.get(ie,H)===1){const ee=this.createSvgRectElement(oe,Q,T,T);V.appendChild(ee)}return V}createSVGElement(n,i){const o=document.createElementNS(bi.SVG_NS,"svg");return o.setAttributeNS(null,"height",n.toString()),o.setAttributeNS(null,"width",i.toString()),o}createSvgRectElement(n,i,o,u){const c=document.createElementNS(bi.SVG_NS,"rect");return c.setAttributeNS(null,"x",n.toString()),c.setAttributeNS(null,"y",i.toString()),c.setAttributeNS(null,"height",o.toString()),c.setAttributeNS(null,"width",u.toString()),c.setAttributeNS(null,"fill","#000000"),c}}bi.QUIET_ZONE_SIZE=4,bi.SVG_NS="http://www.w3.org/2000/svg";class Ji{encode(n,i,o,u,c){if(n.length===0)throw new v("Found empty contents");if(i!==ue.QR_CODE)throw new v("Can only encode QR_CODE, but got "+i);if(o<0||u<0)throw new v(`Requested dimensions are too small: ${o}x${u}`);let d=lt.L,f=Ji.QUIET_ZONE_SIZE;c!==null&&(c.get(Bt.ERROR_CORRECTION)!==void 0&&(d=lt.fromString(c.get(Bt.ERROR_CORRECTION).toString())),c.get(Bt.MARGIN)!==void 0&&(f=Number.parseInt(c.get(Bt.MARGIN).toString(),10)));const m=dt.encode(n,d,c);return Ji.renderResult(m,o,u,f)}static renderResult(n,i,o,u){const c=n.getMatrix();if(c===null)throw new Le;const d=c.getWidth(),f=c.getHeight(),m=d+u*2,w=f+u*2,E=Math.max(i,m),S=Math.max(o,w),T=Math.min(Math.floor(E/m),Math.floor(S/w)),M=Math.floor((E-d*T)/2),z=Math.floor((S-f*T)/2),V=new Oe(E,S);for(let H=0,Q=z;H<f;H++,Q+=T)for(let ie=0,oe=M;ie<d;ie++,oe+=T)c.get(ie,H)===1&&V.setRegion(oe,Q,T,T);return V}}Ji.QUIET_ZONE_SIZE=4;class ox{encode(n,i,o,u,c){let d;switch(i){case ue.QR_CODE:d=new Ji;break;default:throw new v("No encoder available for format "+i)}return d.encode(n,i,o,u,c)}}class hn extends re{constructor(n,i,o,u,c,d,f,m){if(super(d,f),this.yuvData=n,this.dataWidth=i,this.dataHeight=o,this.left=u,this.top=c,u+d>i||c+f>o)throw new v("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(d,f)}getRow(n,i){if(n<0||n>=this.getHeight())throw new v("Requested row is outside the image: "+n);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const u=(n+this.top)*this.dataWidth+this.left;return L.arraycopy(this.yuvData,u,i,0,o),i}getMatrix(){const n=this.getWidth(),i=this.getHeight();if(n===this.dataWidth&&i===this.dataHeight)return this.yuvData;const o=n*i,u=new Uint8ClampedArray(o);let c=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return L.arraycopy(this.yuvData,c,u,0,o),u;for(let d=0;d<i;d++){const f=d*n;L.arraycopy(this.yuvData,c,u,f,n),c+=this.dataWidth}return u}isCropSupported(){return!0}crop(n,i,o,u){return new hn(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+i,o,u,!1)}renderThumbnail(){const n=this.getWidth()/hn.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/hn.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(n*i),u=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let d=0;d<i;d++){const f=d*n;for(let m=0;m<n;m++){const w=u[c+m*hn.THUMBNAIL_SCALE_FACTOR]&255;o[f+m]=4278190080|w*65793}c+=this.dataWidth*hn.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/hn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/hn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,i){const o=this.yuvData;for(let u=0,c=this.top*this.dataWidth+this.left;u<i;u++,c+=this.dataWidth){const d=c+n/2;for(let f=c,m=c+n-1;f<d;f++,m--){const w=o[f];o[f]=o[m],o[m]=w}}}invert(){return new te(this)}}hn.THUMBNAIL_SCALE_FACTOR=2;class wu extends re{constructor(n,i,o,u,c,d,f){if(super(i,o),this.dataWidth=u,this.dataHeight=c,this.left=d,this.top=f,n.BYTES_PER_ELEMENT===4){const m=i*o,w=new Uint8ClampedArray(m);for(let E=0;E<m;E++){const S=n[E],T=S>>16&255,M=S>>7&510,z=S&255;w[E]=(T+M+z)/4&255}this.luminances=w}else this.luminances=n;if(u===void 0&&(this.dataWidth=i),c===void 0&&(this.dataHeight=o),d===void 0&&(this.left=0),f===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+o>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(n,i){if(n<0||n>=this.getHeight())throw new v("Requested row is outside the image: "+n);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const u=(n+this.top)*this.dataWidth+this.left;return L.arraycopy(this.luminances,u,i,0,o),i}getMatrix(){const n=this.getWidth(),i=this.getHeight();if(n===this.dataWidth&&i===this.dataHeight)return this.luminances;const o=n*i,u=new Uint8ClampedArray(o);let c=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return L.arraycopy(this.luminances,c,u,0,o),u;for(let d=0;d<i;d++){const f=d*n;L.arraycopy(this.luminances,c,u,f,n),c+=this.dataWidth}return u}isCropSupported(){return!0}crop(n,i,o,u){return new wu(this.luminances,o,u,this.dataWidth,this.dataHeight,this.left+n,this.top+i)}invert(){return new te(this)}}class Vh extends C{static forName(n){return this.getCharacterSetECIByName(n)}}class yu{}yu.ISO_8859_1=C.ISO8859_1;class Wh{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class Hh{static singletonList(n){return[n]}static min(n,i){return n.sort(i)[0]}}class ax{constructor(n){this.previous=n}getPrevious(){return this.previous}}class es extends ax{constructor(n,i,o){super(n),this.value=i,this.bitCount=o}appendTo(n,i){n.appendBits(this.value,this.bitCount)}add(n,i){return new es(this,n,i)}addBinaryShift(n,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new es(this,n,i)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+I.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class vu extends es{constructor(n,i,o){super(n,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=o}appendTo(n,i){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):o===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(i[this.binaryShiftStart+o],8)}addBinaryShift(n,i){return new vu(this,n,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function lx(A,n,i){return new vu(A,n,i)}function no(A,n,i){return new es(A,n,i)}const ux=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Wn=0,fa=1,Ur=2,Gh=3,fn=4,cx=new es(null,0,0),Eu=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function dx(A){for(let n of A)R.fill(n,-1);return A[Wn][fn]=0,A[fa][fn]=0,A[fa][Wn]=28,A[Gh][fn]=0,A[Ur][fn]=0,A[Ur][Wn]=15,A}const $h=dx(R.createInt32Array(6,6));class gn{constructor(n,i,o,u){this.token=n,this.mode=i,this.binaryShiftByteCount=o,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,i){let o=this.bitCount,u=this.token;if(n!==this.mode){let d=Eu[this.mode][n];u=no(u,d&65535,d>>16),o+=d>>16}let c=n===Ur?4:5;return u=no(u,i,c),new gn(u,n,0,o+c)}shiftAndAppend(n,i){let o=this.token,u=this.mode===Ur?4:5;return o=no(o,$h[this.mode][n],u),o=no(o,i,5),new gn(o,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(n){let i=this.token,o=this.mode,u=this.bitCount;if(this.mode===fn||this.mode===Ur){let f=Eu[o][Wn];i=no(i,f&65535,f>>16),u+=f>>16,o=Wn}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new gn(i,o,this.binaryShiftByteCount+1,u+c);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(n+1)),d}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=lx(i,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new gn(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let i=this.bitCount+(Eu[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?i+=gn.calculateBinaryShiftCost(n)-gn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(i+=10),i<=n.bitCount}toBitArray(n){let i=[];for(let u=this.endBinaryShift(n.length).token;u!==null;u=u.getPrevious())i.unshift(u);let o=new B;for(const u of i)u.appendTo(o,n);return o}toString(){return K.format("%s bits=%d bytes=%d",ux[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}gn.INITIAL_STATE=new gn(cx,Wn,0,0);function hx(A){const n=K.getCharCode(" "),i=K.getCharCode("."),o=K.getCharCode(",");A[Wn][n]=1;const u=K.getCharCode("Z"),c=K.getCharCode("A");for(let T=c;T<=u;T++)A[Wn][T]=T-c+2;A[fa][n]=1;const d=K.getCharCode("z"),f=K.getCharCode("a");for(let T=f;T<=d;T++)A[fa][T]=T-f+2;A[Ur][n]=1;const m=K.getCharCode("9"),w=K.getCharCode("0");for(let T=w;T<=m;T++)A[Ur][T]=T-w+2;A[Ur][o]=12,A[Ur][i]=13;const E=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let T=0;T<E.length;T++)A[Gh][K.getCharCode(E[T])]=T;const S=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let T=0;T<S.length;T++)K.getCharCode(S[T])>0&&(A[fn][K.getCharCode(S[T])]=T);return A}const _u=hx(R.createInt32Array(5,256));class io{constructor(n){this.text=n}encode(){const n=K.getCharCode(" "),i=K.getCharCode(`
`);let o=Hh.singletonList(gn.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let d,f=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case K.getCharCode("\r"):d=f===i?2:0;break;case K.getCharCode("."):d=f===n?3:0;break;case K.getCharCode(","):d=f===n?4:0;break;case K.getCharCode(":"):d=f===n?5:0;break;default:d=0}d>0?(o=io.updateStateListForPair(o,c,d),c++):o=this.updateStateListForChar(o,c)}return Hh.min(o,(c,d)=>c.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,i){const o=[];for(let u of n)this.updateStateForChar(u,i,o);return io.simplifyStates(o)}updateStateForChar(n,i,o){let u=this.text[i]&255,c=_u[n.getMode()][u]>0,d=null;for(let f=0;f<=fn;f++){let m=_u[f][u];if(m>0){if(d==null&&(d=n.endBinaryShift(i)),!c||f===n.getMode()||f===Ur){const w=d.latchAndAppend(f,m);o.push(w)}if(!c&&$h[n.getMode()][f]>=0){const w=d.shiftAndAppend(f,m);o.push(w)}}}if(n.getBinaryShiftByteCount()>0||_u[n.getMode()][u]===0){let f=n.addBinaryShiftChar(i);o.push(f)}}static updateStateListForPair(n,i,o){const u=[];for(let c of n)this.updateStateForPair(c,i,o,u);return this.simplifyStates(u)}static updateStateForPair(n,i,o,u){let c=n.endBinaryShift(i);if(u.push(c.latchAndAppend(fn,o)),n.getMode()!==fn&&u.push(c.shiftAndAppend(fn,o)),o===3||o===4){let d=c.latchAndAppend(Ur,16-o).latchAndAppend(Ur,1);u.push(d)}if(n.getBinaryShiftByteCount()>0){let d=n.addBinaryShiftChar(i).addBinaryShiftChar(i+1);u.push(d)}}static simplifyStates(n){let i=[];for(const o of n){let u=!0;for(const c of i){if(c.isBetterThanOrEqualTo(o)){u=!1;break}o.isBetterThanOrEqualTo(c)&&(i=i.filter(d=>d!==c))}u&&i.push(o)}return i}}class He{constructor(){}static encodeBytes(n){return He.encode(n,He.DEFAULT_EC_PERCENT,He.DEFAULT_AZTEC_LAYERS)}static encode(n,i,o){let u=new io(n).encode(),c=I.truncDivision(u.getSize()*i,100)+11,d=u.getSize()+c,f,m,w,E,S;if(o!==He.DEFAULT_AZTEC_LAYERS){if(f=o<0,m=Math.abs(o),m>(f?He.MAX_NB_BITS_COMPACT:He.MAX_NB_BITS))throw new v(K.format("Illegal value %s for layers",o));w=He.totalBitsInLayer(m,f),E=He.WORD_SIZE[m];let ee=w-w%E;if(S=He.stuffBits(u,E),S.getSize()+c>ee)throw new v("Data to large for user specified layer");if(f&&S.getSize()>E*64)throw new v("Data to large for user specified layer")}else{E=0,S=null;for(let ee=0;;ee++){if(ee>He.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(f=ee<=3,m=f?ee+1:ee,w=He.totalBitsInLayer(m,f),d>w)continue;(S==null||E!==He.WORD_SIZE[m])&&(E=He.WORD_SIZE[m],S=He.stuffBits(u,E));let ze=w-w%E;if(!(f&&S.getSize()>E*64)&&S.getSize()+c<=ze)break}}let T=He.generateCheckWords(S,w,E),M=S.getSize()/E,z=He.generateModeMessage(f,m,M),V=(f?11:14)+m*4,H=new Int32Array(V),Q;if(f){Q=V;for(let ee=0;ee<H.length;ee++)H[ee]=ee}else{Q=V+1+2*I.truncDivision(I.truncDivision(V,2)-1,15);let ee=I.truncDivision(V,2),ze=I.truncDivision(Q,2);for(let De=0;De<ee;De++){let yr=De+I.truncDivision(De,15);H[ee-De-1]=ze-yr-1,H[ee+De]=ze+yr+1}}let ie=new Oe(Q);for(let ee=0,ze=0;ee<m;ee++){let De=(m-ee)*4+(f?9:12);for(let yr=0;yr<De;yr++){let Yr=yr*2;for(let vr=0;vr<2;vr++)T.get(ze+Yr+vr)&&ie.set(H[ee*2+vr],H[ee*2+yr]),T.get(ze+De*2+Yr+vr)&&ie.set(H[ee*2+yr],H[V-1-ee*2-vr]),T.get(ze+De*4+Yr+vr)&&ie.set(H[V-1-ee*2-vr],H[V-1-ee*2-yr]),T.get(ze+De*6+Yr+vr)&&ie.set(H[V-1-ee*2-yr],H[ee*2+vr])}ze+=De*8}if(He.drawModeMessage(ie,f,Q,z),f)He.drawBullsEye(ie,I.truncDivision(Q,2),5);else{He.drawBullsEye(ie,I.truncDivision(Q,2),7);for(let ee=0,ze=0;ee<I.truncDivision(V,2)-1;ee+=15,ze+=16)for(let De=I.truncDivision(Q,2)&1;De<Q;De+=2)ie.set(I.truncDivision(Q,2)-ze,De),ie.set(I.truncDivision(Q,2)+ze,De),ie.set(De,I.truncDivision(Q,2)-ze),ie.set(De,I.truncDivision(Q,2)+ze)}let oe=new Wh;return oe.setCompact(f),oe.setSize(Q),oe.setLayers(m),oe.setCodeWords(M),oe.setMatrix(ie),oe}static drawBullsEye(n,i,o){for(let u=0;u<o;u+=2)for(let c=i-u;c<=i+u;c++)n.set(c,i-u),n.set(c,i+u),n.set(i-u,c),n.set(i+u,c);n.set(i-o,i-o),n.set(i-o+1,i-o),n.set(i-o,i-o+1),n.set(i+o,i-o),n.set(i+o,i-o+1),n.set(i+o,i+o-1)}static generateModeMessage(n,i,o){let u=new B;return n?(u.appendBits(i-1,2),u.appendBits(o-1,6),u=He.generateCheckWords(u,28,4)):(u.appendBits(i-1,5),u.appendBits(o-1,11),u=He.generateCheckWords(u,40,4)),u}static drawModeMessage(n,i,o,u){let c=I.truncDivision(o,2);if(i)for(let d=0;d<7;d++){let f=c-3+d;u.get(d)&&n.set(f,c-5),u.get(d+7)&&n.set(c+5,f),u.get(20-d)&&n.set(f,c+5),u.get(27-d)&&n.set(c-5,f)}else for(let d=0;d<10;d++){let f=c-5+d+I.truncDivision(d,5);u.get(d)&&n.set(f,c-7),u.get(d+10)&&n.set(c+7,f),u.get(29-d)&&n.set(f,c+7),u.get(39-d)&&n.set(c-7,f)}}static generateCheckWords(n,i,o){let u=n.getSize()/o,c=new xu(He.getGF(o)),d=I.truncDivision(i,o),f=He.bitsToWords(n,o,d);c.encode(f,d-u);let m=i%o,w=new B;w.appendBits(0,m);for(const E of Array.from(f))w.appendBits(E,o);return w}static bitsToWords(n,i,o){let u=new Int32Array(o),c,d;for(c=0,d=n.getSize()/i;c<d;c++){let f=0;for(let m=0;m<i;m++)f|=n.get(c*i+m)?1<<i-m-1:0;u[c]=f}return u}static getGF(n){switch(n){case 4:return Ne.AZTEC_PARAM;case 6:return Ne.AZTEC_DATA_6;case 8:return Ne.AZTEC_DATA_8;case 10:return Ne.AZTEC_DATA_10;case 12:return Ne.AZTEC_DATA_12;default:throw new v("Unsupported word size "+n)}}static stuffBits(n,i){let o=new B,u=n.getSize(),c=(1<<i)-2;for(let d=0;d<u;d+=i){let f=0;for(let m=0;m<i;m++)(d+m>=u||n.get(d+m))&&(f|=1<<i-1-m);(f&c)===c?(o.appendBits(f&c,i),d--):f&c?o.appendBits(f,i):(o.appendBits(f|1,i),d--)}return o}static totalBitsInLayer(n,i){return((i?88:112)+16*n)*n}}He.DEFAULT_EC_PERCENT=33,He.DEFAULT_AZTEC_LAYERS=0,He.MAX_NB_BITS=32,He.MAX_NB_BITS_COMPACT=4,He.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ga{encode(n,i,o,u){return this.encodeWithHints(n,i,o,u,null)}encodeWithHints(n,i,o,u,c){let d=yu.ISO_8859_1,f=He.DEFAULT_EC_PERCENT,m=He.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(Bt.CHARACTER_SET)&&(d=Vh.forName(c.get(Bt.CHARACTER_SET).toString())),c.has(Bt.ERROR_CORRECTION)&&(f=I.parseInt(c.get(Bt.ERROR_CORRECTION).toString())),c.has(Bt.AZTEC_LAYERS)&&(m=I.parseInt(c.get(Bt.AZTEC_LAYERS).toString()))),ga.encodeLayers(n,i,o,u,d,f,m)}static encodeLayers(n,i,o,u,c,d,f){if(i!==ue.AZTEC)throw new v("Can only encode AZTEC, but got "+i);let m=He.encode(K.getBytes(n,c),d,f);return ga.renderResult(m,o,u)}static renderResult(n,i,o){let u=n.getMatrix();if(u==null)throw new Le;let c=u.getWidth(),d=u.getHeight(),f=Math.max(i,c),m=Math.max(o,d),w=Math.min(f/c,m/d),E=(f-c*w)/2,S=(m-d*w)/2,T=new Oe(f,m);for(let M=0,z=S;M<d;M++,z+=w)for(let V=0,H=E;V<c;V++,H+=w)u.get(V,M)&&T.setRegion(H,z,w,w);return T}}r.AbstractExpandedDecoder=au,r.ArgumentException=y,r.ArithmeticException=Ze,r.AztecCode=Wh,r.AztecCodeReader=Kr,r.AztecCodeWriter=ga,r.AztecDecoder=Ee,r.AztecDetector=qs,r.AztecDetectorResult=Bn,r.AztecEncoder=He,r.AztecHighLevelEncoder=io,r.AztecPoint=Dt,r.BarcodeFormat=ue,r.Binarizer=O,r.BinaryBitmap=b,r.BitArray=B,r.BitMatrix=Oe,r.BitSource=du,r.BrowserAztecCodeReader=Lr,r.BrowserBarcodeReader=Wm,r.BrowserCodeReader=he,r.BrowserDatamatrixCodeReader=Gm,r.BrowserMultiFormatReader=rx,r.BrowserPDF417Reader=nx,r.BrowserQRCodeReader=ix,r.BrowserQRCodeSvgWriter=bi,r.CharacterSetECI=C,r.ChecksumException=N,r.Code128Reader=ae,r.Code39Reader=Mt,r.DataMatrixDecodedBitStreamParser=Fn,r.DataMatrixReader=Un,r.DecodeHintType=$,r.DecoderResult=Fe,r.DefaultGridSampler=Xt,r.DetectorResult=lr,r.EAN13Reader=yi,r.EncodeHintType=Bt,r.Exception=g,r.FormatException=U,r.GenericGF=Ne,r.GenericGFPoly=Se,r.GlobalHistogramBinarizer=je,r.GridSampler=pr,r.GridSamplerInstance=Vt,r.HTMLCanvasElementLuminanceSource=xe,r.HybridBinarizer=le,r.ITFReader=nt,r.IllegalArgumentException=v,r.IllegalStateException=Le,r.InvertedLuminanceSource=te,r.LuminanceSource=re,r.MathUtils=ye,r.MultiFormatOneDReader=Zi,r.MultiFormatReader=zh,r.MultiFormatWriter=ox,r.NotFoundException=q,r.OneDReader=at,r.PDF417DecodedBitStreamParser=Z,r.PDF417DecoderErrorCorrection=Mh,r.PDF417Reader=qt,r.PDF417ResultMetadata=Bh,r.PerspectiveTransform=qe,r.PlanarYUVLuminanceSource=hn,r.QRCodeByteMatrix=ha,r.QRCodeDataMask=jr,r.QRCodeDecodedBitStreamParser=wt,r.QRCodeDecoderErrorCorrectionLevel=lt,r.QRCodeDecoderFormatInformation=nr,r.QRCodeEncoder=dt,r.QRCodeEncoderQRCode=Ci,r.QRCodeMaskUtil=At,r.QRCodeMatrixUtil=Ie,r.QRCodeMode=Ae,r.QRCodeReader=zn,r.QRCodeVersion=_e,r.QRCodeWriter=Ji,r.RGBLuminanceSource=wu,r.RSS14Reader=bt,r.RSSExpandedReader=J,r.ReaderException=da,r.ReedSolomonDecoder=Pe,r.ReedSolomonEncoder=xu,r.ReedSolomonException=$e,r.Result=ke,r.ResultMetadataType=be,r.ResultPoint=de,r.StringUtils=K,r.UnsupportedOperationException=F,r.VideoInputDevice=me,r.WhiteRectangleDetector=ot,r.WriterException=it,r.ZXingArrays=R,r.ZXingCharset=Vh,r.ZXingInteger=I,r.ZXingStandardCharsets=yu,r.ZXingStringBuilder=se,r.ZXingStringEncoding=Y,r.ZXingSystem=L,r.createAbstractExpandedDecoder=Ph,Object.defineProperty(r,"__esModule",{value:!0})})})(wd,wd.exports);var ft=wd.exports;const R_=vd(ft),O_=yd({__proto__:null,default:R_},[ft]);var $0=function(){function t(e,r,s){if(this.formatMap=new Map([[ge.QR_CODE,ft.BarcodeFormat.QR_CODE],[ge.AZTEC,ft.BarcodeFormat.AZTEC],[ge.CODABAR,ft.BarcodeFormat.CODABAR],[ge.CODE_39,ft.BarcodeFormat.CODE_39],[ge.CODE_93,ft.BarcodeFormat.CODE_93],[ge.CODE_128,ft.BarcodeFormat.CODE_128],[ge.DATA_MATRIX,ft.BarcodeFormat.DATA_MATRIX],[ge.MAXICODE,ft.BarcodeFormat.MAXICODE],[ge.ITF,ft.BarcodeFormat.ITF],[ge.EAN_13,ft.BarcodeFormat.EAN_13],[ge.EAN_8,ft.BarcodeFormat.EAN_8],[ge.PDF_417,ft.BarcodeFormat.PDF_417],[ge.RSS_14,ft.BarcodeFormat.RSS_14],[ge.RSS_EXPANDED,ft.BarcodeFormat.RSS_EXPANDED],[ge.UPC_A,ft.BarcodeFormat.UPC_A],[ge.UPC_E,ft.BarcodeFormat.UPC_E],[ge.UPC_EAN_EXTENSION,ft.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!O_)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=s;var a=this.createZXingFormats(e),l=new Map;l.set(ft.DecodeHintType.POSSIBLE_FORMATS,a),l.set(ft.DecodeHintType.TRY_HARDER,!1),this.hints=l}return t.prototype.decodeAsync=function(e){var r=this;return new Promise(function(s,a){try{s(r.decode(e))}catch(l){a(l)}})},t.prototype.decode=function(e){var r=new ft.MultiFormatReader(this.verbose,this.hints),s=new ft.HTMLCanvasElementLuminanceSource(e),a=new ft.BinaryBitmap(new ft.HybridBinarizer(s)),l=r.decode(a);return{text:l.text,format:Lm.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,s,a){e.set(r,s)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var r=[],s=0,a=e;s<a.length;s++){var l=a[s];this.formatMap.has(l)?r.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),k_=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function x(y){try{g(s.next(y))}catch(v){h(v)}}function p(y){try{g(s.throw(y))}catch(v){h(v)}}function g(y){y.done?l(y.value):a(y.value).then(x,p)}g((s=s.apply(t,e||[])).next())})},P_=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function x(g){return function(y){return p([g,y])}}function p(g){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(s=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(y){g=[6,y],a=0}finally{s=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},X0=function(){function t(e,r,s){if(this.formatMap=new Map([[ge.QR_CODE,"qr_code"],[ge.AZTEC,"aztec"],[ge.CODABAR,"codabar"],[ge.CODE_39,"code_39"],[ge.CODE_93,"code_93"],[ge.CODE_128,"code_128"],[ge.DATA_MATRIX,"data_matrix"],[ge.ITF,"itf"],[ge.EAN_13,"ean_13"],[ge.EAN_8,"ean_8"],[ge.PDF_417,"pdf417"],[ge.UPC_A,"upc_a"],[ge.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=s;var a=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return k_(this,void 0,void 0,function(){var r,s;return P_(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=a.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return s=this.selectLargestBarcode(r),[2,{text:s.rawValue,format:Lm.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var r=null,s=0,a=0,l=e;a<l.length;a++){var h=l[a],x=h.boundingBox.width*h.boundingBox.height;x>s&&(s=x,r=h)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],s=0,a=e;s<a.length;s++){var l=a[s];this.formatMap.has(l)?r.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,s,a){e.set(r,s)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),K0=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function x(y){try{g(s.next(y))}catch(v){h(v)}}function p(y){try{g(s.throw(y))}catch(v){h(v)}}function g(y){y.done?l(y.value):a(y.value).then(x,p)}g((s=s.apply(t,e||[])).next())})},q0=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function x(g){return function(y){return p([g,y])}}function p(g){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(s=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(y){g=[6,y],a=0}finally{s=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},D_=function(){function t(e,r,s,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=s,r&&X0.isSupported()?(this.primaryDecoder=new X0(e,s,a),this.secondaryDecoder=new $0(e,s,a)):this.primaryDecoder=new $0(e,s,a)}return t.prototype.decodeAsync=function(e){return K0(this,void 0,void 0,function(){var r;return q0(this,function(s){switch(s.label){case 0:r=performance.now(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,s.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return K0(this,void 0,void 0,function(){var r,s;return q0(this,function(a){switch(a.label){case 0:r=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,a.sent()];case 3:if(s=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw s;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,s=this.executionResults;r<s.length;r++){var a=s[r];e+=a}var l=e/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Th=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function s(){this.constructor=e}e.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),Ml=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function x(y){try{g(s.next(y))}catch(v){h(v)}}function p(y){try{g(s.throw(y))}catch(v){h(v)}}function g(y){y.done?l(y.value):a(y.value).then(x,p)}g((s=s.apply(t,e||[])).next())})},Ll=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function x(g){return function(y){return p([g,y])}}function p(g){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(s=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(y){g=[6,y],a=0}finally{s=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},jm=function(){function t(e,r){this.name=e,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var r={};r[this.name]=e;var s={advanced:[r]};return this.track.applyConstraints(s)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},t}(),M_=function(t){Th(e,t);function e(r,s){return t.call(this,r,s)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var s={};s[this.name]=r;var a={advanced:[s]};return this.track.applyConstraints(a)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),s=r[this.name];return{min:s.min,max:s.max,step:s.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(jm),L_=function(t){Th(e,t);function e(r){return t.call(this,"zoom",r)||this}return e}(M_),B_=function(t){Th(e,t);function e(r){return t.call(this,"torch",r)||this}return e}(jm),j_=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new L_(this.track)},t.prototype.torchFeature=function(){return new B_(this.track)},t}(),F_=function(){function t(e,r,s){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=s,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var s=e.surface.clientWidth,a=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(s,a),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,r,s,a){return Ml(this,void 0,void 0,function(){var l,h;return Ll(this,function(x){switch(x.label){case 0:return l=new t(e,r,a),s.aspectRatio?(h={aspectRatio:s.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(h)]):[3,2];case 1:x.sent(),x.label=2;case 2:return l.setupSurface(),[2,l]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var r=this,s=function(){setTimeout(e,200),r.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Ml(this,void 0,void 0,function(){return Ll(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,s){var a=e.mediaStream.getVideoTracks(),l=a.length,h=0;e.mediaStream.getVideoTracks().forEach(function(x){e.mediaStream.removeTrack(x),x.stop(),++h,h>=l&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},t.prototype.getCapabilities=function(){return new j_(this.getFirstTrackOrFail())},t}(),U_=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,r,s){return Ml(this,void 0,void 0,function(){return Ll(this,function(a){return[2,F_.create(e,this.mediaStream,r,s)]})})},t.create=function(e){return Ml(this,void 0,void 0,function(){var r,s;return Ll(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return s=a.sent(),[2,new t(s)]}})})},t}(),Y0=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function x(y){try{g(s.next(y))}catch(v){h(v)}}function p(y){try{g(s.throw(y))}catch(v){h(v)}}function g(y){y.done?l(y.value):a(y.value).then(x,p)}g((s=s.apply(t,e||[])).next())})},Z0=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function x(g){return function(y){return p([g,y])}}function p(g){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(s=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(y){g=[6,y],a=0}finally{s=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},z_=function(){function t(){}return t.failIfNotSupported=function(){return Y0(this,void 0,void 0,function(){return Z0(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Y0(this,void 0,void 0,function(){return Z0(this,function(r){return[2,U_.create(e)]})})},t}(),V_=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function x(y){try{g(s.next(y))}catch(v){h(v)}}function p(y){try{g(s.throw(y))}catch(v){h(v)}}function g(y){y.done?l(y.value):a(y.value).then(x,p)}g((s=s.apply(t,e||[])).next())})},W_=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function x(g){return function(y){return p([g,y])}}function p(g){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(s=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(y){g=[6,y],a=0}finally{s=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},H_=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=bs.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=bs.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return V_(this,void 0,void 0,function(){var e,r,s,a,l,h,x;return W_(this,function(p){switch(p.label){case 0:return e=function(g){for(var y=g.getVideoTracks(),v=0,b=y;v<b.length;v++){var N=b[v];N.enabled=!1,N.stop(),g.removeTrack(N)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=p.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(s=p.sent(),a=[],l=0,h=s;l<h.length;l++)x=h[l],x.kind==="videoinput"&&a.push({id:x.deviceId,label:x.label});return e(r),[2,a]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var s=function(l){for(var h=[],x=0,p=l;x<p.length;x++){var g=p[x];g.kind==="video"&&h.push({id:g.id,label:g.label})}e(h)},a=MediaStreamTrack;a.getSources(s)})},t}(),St;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(St||(St={}));var G_=function(){function t(){this.state=St.NOT_STARTED,this.onGoingTransactionNewState=St.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===St.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=St.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===St.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=St.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==St.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case St.UNKNOWN:throw"Transition from unknown is not allowed";case St.NOT_STARTED:this.failIfNewStateIs(e,[St.PAUSED]);break;case St.SCANNING:break;case St.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,r){for(var s=0,a=r;s<a.length;s++){var l=a[s];if(e===l)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),$_=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===St.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==St.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===St.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===St.PAUSED},t}(),X_=function(){function t(){}return t.create=function(){return new $_(new G_)},t}(),K_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function s(){this.constructor=e}e.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),Ir=function(t){K_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(I_),q_=function(){function t(e,r){this.logger=r,this.fps=Ir.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Ir.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Bm.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Cn(this.qrbox)},t.create=function(e,r){return new t(e,r)},t}(),Y_=function(){function t(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var s;typeof r=="boolean"?this.verbose=r===!0:r&&(s=r,this.verbose=s.verbose===!0,s.experimentalFeatures),this.logger=new T_(this.verbose),this.qrcode=new D_(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=X_.create()}return t.prototype.start=function(e,r,s,a){var l=this;if(!e)throw"cameraIdOrConfig is required";if(!s||typeof s!="function")throw"qrCodeSuccessCallback is required and should be a function.";var h;a?h=a:h=this.verbose?this.logger.log:function(){};var x=q_.create(r,this.logger);this.clearElement();var p=!1;x.videoConstraints&&(x.isMediaStreamConstraintsValid()?p=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var g=p,y=document.getElementById(this.elementId);y.clientWidth?y.clientWidth:Ir.DEFAULT_WIDTH,y.style.position="relative",this.shouldScan=!0,this.element=y;var v=this,b=this.stateManagerProxy.startTransition(St.SCANNING);return new Promise(function(N,O){var L=g?x.videoConstraints:v.createVideoConstraints(e);if(!L){b.cancel(),O("videoConstraints should be defined");return}var j={};(!g||x.aspectRatio)&&(j.aspectRatio=x.aspectRatio);var k={onRenderSurfaceReady:function(R,I){v.setupUi(R,I,x),v.isScanning=!0,v.foreverScan(x,s,h)}};z_.failIfNotSupported().then(function(R){R.create(L).then(function(I){return I.render(l.element,j,k).then(function(B){v.renderedCamera=B,b.execute(),N(null)}).catch(function(B){b.cancel(),O(B)})}).catch(function(I){b.cancel(),O(bs.errorGettingUserMedia(I))})}).catch(function(R){b.cancel(),O(bs.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(St.PAUSED),this.showPausedState(),(Cn(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(St.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(St.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=function(){if(e.element){var l=document.getElementById(Ir.SHADED_REGION_ELEMENT_ID);l&&e.element.removeChild(l)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),s(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),r.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(s){return s.decodedText})},t.prototype.scanFileV2=function(e,r){var s=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Cn(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,l){s.possiblyCloseLastScanImageFile(),s.clearElement(),s.lastScanImageFile=URL.createObjectURL(e);var h=new Image;h.onload=function(){var x=h.width,p=h.height,g=document.getElementById(s.elementId),y=g.clientWidth?g.clientWidth:Ir.DEFAULT_WIDTH,v=Math.max(g.clientHeight?g.clientHeight:p,Ir.FILE_SCAN_MIN_HEIGHT),b=s.computeCanvasDrawConfig(x,p,y,v);if(r){var N=s.createCanvasElement(y,v,"qr-canvas-visible");N.style.display="inline-block",g.appendChild(N);var O=N.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=y,O.canvas.height=v,O.drawImage(h,0,0,x,p,b.x,b.y,b.width,b.height)}var L=Ir.FILE_SCAN_HIDDEN_CANVAS_PADDING,j=Math.max(h.width,b.width),k=Math.max(h.height,b.height),R=j+2*L,I=k+2*L,B=s.createCanvasElement(R,I);g.appendChild(B);var W=B.getContext("2d");if(!W)throw"Unable to get 2d context from canvas";W.canvas.width=R,W.canvas.height=I,W.drawImage(h,0,0,x,p,L,L,j,k);try{s.qrcode.decodeRobustlyAsync(B).then(function($){a(G0.createFromQrcodeResult($))}).catch(l)}catch($){l("QR code parse error, error = ".concat($))}},h.onerror=l,h.onabort=l,h.onstalled=l,h.onsuspend=l,h.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return H_.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!Bm.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var r=[ge.QR_CODE,ge.AZTEC,ge.CODABAR,ge.CODE_39,ge.CODE_93,ge.CODE_128,ge.DATA_MATRIX,ge.MAXICODE,ge.ITF,ge.EAN_13,ge.EAN_8,ge.PDF_417,ge.RSS_14,ge.RSS_EXPANDED,ge.UPC_A,ge.UPC_E,ge.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var s=[],a=0,l=e.formatsToSupport;a<l.length;a++){var h=l[a];S_(h)?s.push(h):this.logger.warn("Invalid format: ".concat(h," passed in config, ignoring."))}if(s.length===0)throw"None of formatsToSupport match supported values.";return s},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Cn(e))return!0;if(!Cn(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Cn(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return Cn(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,r,s){var a=this,l=s.qrbox;this.validateQrboxConfig(l);var h=this.toQrdimensions(e,r,l),x=function(g){if(g<Ir.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ir.MIN_QR_BOX_SIZE,"px.")},p=function(g){return g>e&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),g=e),g};x(h.width),x(h.height),h.width=p(h.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,r,s){if(typeof s=="number")return{width:s,height:s};if(typeof s=="function")try{return s(e,r)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return s},t.prototype.setupUi=function(e,r,s){s.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,s);var a=Cn(s.qrbox)?{width:e,height:r}:s.qrbox;this.validateQrboxConfig(a);var l=this.toQrdimensions(e,r,a);l.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var h=s.isShadedBoxEnabled()&&l.height<=r,x={x:0,y:0,width:e,height:r},p=h?this.getShadedRegionBounds(e,r,l):x,g=this.createCanvasElement(p.width,p.height),y={willReadFrequently:!0},v=g.getContext("2d",y);v.canvas.width=p.width,v.canvas.height=p.height,this.element.append(g),h&&this.possiblyInsertShadingElement(this.element,e,r,l),this.createScannerPausedUiElement(this.element),this.qrRegion=p,this.context=v,this.canvasElement=g},t.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=bs.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(e,r){var s=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return e(a.text,G0.createFromQrcodeResult(a)),s.possiblyUpdateShaders(!0),!0}).catch(function(a){s.possiblyUpdateShaders(!1);var l=bs.codeParseError(a);return r(l,N_.createFrom(l)),!1})},t.prototype.foreverScan=function(e,r,s){var a=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),h=l.videoWidth/l.clientWidth,x=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var p=this.qrRegion.width*h,g=this.qrRegion.height*x,y=this.qrRegion.x*h,v=this.qrRegion.y*x;this.context.drawImage(l,y,v,p,g,0,0,this.qrRegion.width,this.qrRegion.height);var b=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(e,r,s)},a.getTimeoutFps(e.fps))};this.scanContext(r,s).then(function(N){!N&&e.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(r,s).finally(function(){b()})):b()}).catch(function(N){a.logger.logError("Error happend while scanning context",N),b()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",s="deviceId",a={user:!0,environment:!0},l="exact",h=function(O){if(O in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(O,"'")},x=Object.keys(e);if(x.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(x.length," keys");var p=Object.keys(e)[0];if(p!==r&&p!==s)throw"Only '".concat(r,"' and '").concat(s,"' ")+" are supported for 'cameraIdOrConfig'";if(p===r){var g=e.facingMode;if(typeof g=="string"){if(h(g))return{facingMode:g}}else if(typeof g=="object")if(l in g){if(h(g["".concat(l)]))return{facingMode:{exact:g["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var y=typeof g;throw"Invalid type of 'facingMode' = ".concat(y)}}else{var v=e.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(l in v)return{deviceId:{exact:v["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var b=typeof v;throw"Invalid type of 'deviceId' = ".concat(b)}}}var N=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(N)},t.prototype.computeCanvasDrawConfig=function(e,r,s,a){if(e<=s&&r<=a){var l=(s-e)/2,h=(a-r)/2;return{x:l,y:h,width:e,height:r}}else{var x=e,p=r;return e>s&&(r=s/e*r,e=s),r>a&&(e=a/r*e,r=a),this.logger.log("Image downsampled from "+"".concat(x,"X").concat(p)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,s,a)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?Ir.BORDER_SHADER_MATCH_COLOR:Ir.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,r,s){var a=e,l=r,h=document.createElement("canvas");return h.style.width="".concat(a,"px"),h.style.height="".concat(l,"px"),h.style.display="none",h.id=Cn(s)?"qr-canvas":s,h},t.prototype.getShadedRegionBounds=function(e,r,s){if(s.width>e||s.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-s.width)/2,y:(r-s.height)/2,width:s.width,height:s.height}},t.prototype.possiblyInsertShadingElement=function(e,r,s,a){if(!(r-a.width<1||s-a.height<1)){var l=document.createElement("div");l.style.position="absolute";var h=(r-a.width)/2,x=(s-a.height)/2;if(l.style.borderLeft="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(Ir.SHADED_REGION_ELEMENT_ID),r-a.width<11||s-a.height<11)this.hasBorderShaders=!1;else{var p=5,g=40;this.insertShaderBorders(l,g,p,-p,null,0,!0),this.insertShaderBorders(l,g,p,-p,null,0,!1),this.insertShaderBorders(l,g,p,null,-p,0,!0),this.insertShaderBorders(l,g,p,null,-p,0,!1),this.insertShaderBorders(l,p,g+p,-p,null,-p,!0),this.insertShaderBorders(l,p,g+p,null,-p,-p,!0),this.insertShaderBorders(l,p,g+p,-p,null,-p,!1),this.insertShaderBorders(l,p,g+p,null,-p,-p,!1),this.hasBorderShaders=!0}e.append(l)}},t.prototype.insertShaderBorders=function(e,r,s,a,l,h,x){var p=document.createElement("div");p.style.position="absolute",p.style.backgroundColor=Ir.BORDER_SHADER_DEFAULT_COLOR,p.style.width="".concat(r,"px"),p.style.height="".concat(s,"px"),a!==null&&(p.style.top="".concat(a,"px")),l!==null&&(p.style.bottom="".concat(l,"px")),x?p.style.left="".concat(h,"px"):p.style.right="".concat(h,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(p),e.appendChild(p)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Q0;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Q0||(Q0={}));function Z_(){const[t,e]=X.useState(null),[r,s]=X.useState(!1),[a,l]=X.useState(null),[h,x]=X.useState([]),[p,g]=X.useState({total:0,confirmados:0,presentes:0}),[y,v]=X.useState(""),[b,N]=X.useState([]),[O,L]=X.useState("");X.useEffect(()=>(j(),()=>{t&&t.clear()}),[]),X.useEffect(()=>{O&&(k(),R())},[O]);const j=async()=>{try{const{data:C,error:F}=await rt.from("eventos").select("*").order("created_at",{ascending:!1});if(F)throw F;N(C||[]);const Y=localStorage.getItem("currentEventId");Y&&(C!=null&&C.some(K=>K.id===Y))?L(Y):(C==null?void 0:C.length)>0&&L(C[0].id)}catch(C){console.error("Erro ao carregar eventos:",C),ve.error("Erro ao carregar eventos")}},k=async()=>{if(O)try{const{data:C,error:F}=await rt.from("convidados").select("confirmado, checkin").eq("evento_id",O);if(F)throw F;const Y={total:C.length,confirmados:C.filter(K=>K.confirmado).length,presentes:C.filter(K=>K.checkin).length};g(Y)}catch(C){console.error("Erro ao carregar estatsticas:",C)}},R=async()=>{if(O)try{const{data:C,error:F}=await rt.from("convidados").select("*").eq("evento_id",O).eq("checkin",!0).order("updated_at",{ascending:!1}).limit(10);if(F)throw F;x(C||[])}catch(C){console.error("Erro ao carregar histrico:",C)}},I=()=>{if(t)return;const C=new Y_("qr-reader");C.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},W,$).then(()=>{e(C),s(!0)}).catch(F=>{console.error("Erro ao iniciar a cmara:",F),ve.error("No foi possvel iniciar a cmara")})},B=()=>{t&&t.stop().then(()=>{t.clear(),e(null),s(!1)}).catch(C=>console.error("Erro ao parar scanner:",C))},W=async C=>{try{const F=JSON.parse(C);if(!F.id){ve.error("QR Code invlido");return}await U(F.id),t&&t.stop().then(()=>{t.clear(),e(null),setTimeout(()=>{I()},2e3)})}catch(F){console.error("Erro ao processar QR code:",F),ve.error("QR Code invlido")}},$=C=>{console.log("QR scan failure:",C)},U=async C=>{try{const{data:F,error:Y}=await rt.from("convidados").select("*").eq("id",C).eq("evento_id",O).single();if(Y||!F){ve.error("Convidado no encontrado neste evento");return}if(F.checkin){ve.warning(`${F.nome} j fez check-in anteriormente`),l({...F,alreadyCheckedIn:!0});return}const{error:K}=await rt.from("convidados").update({checkin:!0,updated_at:new Date().toISOString()}).eq("id",C);if(K)throw K;l({...F,alreadyCheckedIn:!1}),ve.success(` Check-in efetuado: ${F.nome}${F.mesa?"  Mesa "+F.mesa:""}`),k(),R(),navigator.vibrate&&navigator.vibrate(200)}catch(F){console.error("Erro ao fazer check-in:",F),ve.error("Erro ao processar check-in")}},D=async C=>{if(C.preventDefault(),!!y.trim())try{const{data:F,error:Y}=await rt.from("convidados").select("*").eq("evento_id",O).or(`nome.ilike.%${y}%,email.ilike.%${y}%`).limit(1).single();if(Y||!F){ve.error("Convidado no encontrado");return}await U(F.id),v("")}catch(F){console.error("Erro no check-in manual:",F),ve.error("Erro ao processar check-in manual")}};return _.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-4",children:[_.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6",children:[_.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between mb-4",children:[_.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Check-in de Convidados"}),b.length>0&&_.jsxs("select",{value:O,onChange:C=>L(C.target.value),className:"w-full md:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500",children:[_.jsx("option",{value:"",children:"Selecione um evento"}),b.map(C=>_.jsxs("option",{value:C.id,children:[C.nome," -"," ",new Date(C.data).toLocaleDateString("pt-PT")]},C.id))]})]}),_.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[_.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 sm:p-4 text-center",children:[_.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-blue-600",children:p.total}),_.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Total Convidados"})]}),_.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3 sm:p-4 text-center",children:[_.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-yellow-600",children:p.confirmados}),_.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Confirmados"})]}),_.jsxs("div",{className:"bg-green-50 rounded-lg p-3 sm:p-4 text-center",children:[_.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-green-600",children:p.presentes}),_.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Presentes"})]})]}),O&&_.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Estatsticas referentes ao evento selecionado."})]}),O&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6",children:[_.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-4",children:"Scanner QR Code"}),_.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4",children:[_.jsx("div",{className:"flex-1 text-center",children:r?_.jsx("button",{onClick:B,className:"w-full sm:w-auto bg-red-600 text-white px-5 py-2.5 rounded-md text-sm sm:text-base font-medium shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition",children:"Parar Scanner"}):_.jsx("button",{onClick:I,className:"w-full sm:w-auto bg-blue-600 text-white px-5 py-2.5 rounded-md text-sm sm:text-base font-medium shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition",children:" Iniciar Scanner"})}),p&&_.jsx("p",{className:"text-xs sm:text-sm text-gray-500 text-center sm:text-right",children:"Aproxime o QR code da cmara. Aps um check-in com sucesso, o prximo scan comea automaticamente passados 3 segundos."})]}),_.jsx("div",{id:"qr-reader",className:"mx-auto w-full max-w-xs sm:max-w-sm md:max-w-md rounded-lg overflow-hidden",style:{minHeight:"260px"}}),a&&_.jsxs("div",{className:`mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4 rounded-lg p-4 border ${a.alreadyCheckedIn?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"}`,children:[_.jsxs("div",{children:[_.jsx("p",{className:"font-semibold text-gray-900",children:a.nome}),_.jsxs("p",{className:"text-sm text-gray-600",children:["Mesa ",a.mesa]}),a.alreadyCheckedIn&&_.jsx("p",{className:"text-xs sm:text-sm text-yellow-700 mt-1",children:"J tinha feito check-in anteriormente."})]}),_.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"ltimo registo atualizado."})]})]}),_.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6",children:[_.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-4",children:"Check-in Manual"}),_.jsxs("form",{onSubmit:D,className:"flex flex-col sm:flex-row gap-2",children:[_.jsx("input",{type:"text",value:y,onChange:C=>v(C.target.value),placeholder:"Nome ou email do convidado",className:"w-full flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500"}),_.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-green-600 text-white px-5 py-2.5 rounded-md text-sm sm:text-base font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition",children:"Check-in"})]})]}),_.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[_.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-4",children:"ltimos Check-ins"}),h.length>0?_.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:h.map(C=>_.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1 sm:gap-0 py-2 border-b",children:[_.jsxs("div",{children:[_.jsx("p",{className:"font-medium text-gray-900 text-sm sm:text-base",children:C.nome}),_.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Mesa ",C.mesa]})]}),_.jsx("span",{className:"text-xs sm:text-sm text-gray-500",children:new Date(C.updated_at).toLocaleTimeString("pt-PT",{hour:"2-digit",minute:"2-digit"})})]},C.id))}):_.jsx("p",{className:"text-gray-500 text-center py-4 text-sm",children:"Nenhum check-in realizado ainda"})]})]})]})}function Q_(){const[t,e]=X.useState([]),[r,s]=X.useState(null),[a,l]=X.useState([]),[h,x]=X.useState({total:0,confirmados:0,rejeitados:0,presentes:0,pendentes:0}),[p,g]=X.useState(!0),[y,v]=X.useState(""),[b,N]=X.useState("table"),O=Gs();X.useEffect(()=>{L()},[]),X.useEffect(()=>{r&&j()},[r]);const L=async()=>{try{const{data:C,error:F}=await rt.from("eventos").select("*").order("created_at",{ascending:!1});if(F)throw F;if(e(C||[]),C&&C.length>0){const Y=localStorage.getItem("currentEventId"),K=C.find(se=>se.id===Y)||C[0];s(K)}}catch(C){console.error("Erro ao carregar eventos:",C),ve.error("Erro ao carregar eventos")}finally{g(!1)}},j=async()=>{if(r)try{const{data:C,error:F}=await rt.from("convidados").select("*").eq("evento_id",r.id).order("nome");if(F)throw F;l(C||[]);const Y={total:C.length,confirmados:C.filter(K=>K.confirmado).length,rejeitados:C.filter(K=>K.rejeitado).length,presentes:C.filter(K=>K.checkin).length,pendentes:C.filter(K=>!K.confirmado&&!K.rejeitado).length};x(Y),localStorage.setItem("currentEventId",r.id)}catch(C){console.error("Erro ao carregar convidados:",C),ve.error("Erro ao carregar dados do evento")}},k=C=>{const F=t.find(Y=>Y.id===C);s(F)},R=async(C,F)=>{try{const{error:Y}=await rt.from("convidados").update({confirmado:!F,rejeitado:!1}).eq("id",C);if(Y)throw Y;ve.success("Status atualizado"),j()}catch(Y){console.error("Erro ao atualizar confirmao:",Y),ve.error("Erro ao atualizar status")}},I=async(C,F)=>{try{const{error:Y}=await rt.from("convidados").update({checkin:!F}).eq("id",C);if(Y)throw Y;ve.success("Check-in atualizado"),j()}catch(Y){console.error("Erro ao atualizar check-in:",Y),ve.error("Erro ao atualizar check-in")}},B=async(C,F)=>{try{const{error:Y}=await rt.from("convidados").update({mesa:F||null}).eq("id",C);if(Y)throw Y;ve.success("Mesa atualizada"),j()}catch(Y){console.error("Erro ao atualizar mesa:",Y),ve.error("Erro ao atualizar mesa")}},W=async C=>{if(window.confirm("Tem a certeza que deseja remover este convidado?"))try{const{error:F}=await rt.from("convidados").delete().eq("id",C);if(F)throw F;ve.success("Convidado removido"),j()}catch(F){console.error("Erro ao remover convidado:",F),ve.error("Erro ao remover convidado")}},$=()=>{if(a.length===0){ve.error("Nenhum convidado para exportar");return}const C=["Nome","Email","Mesa","Confirmado","Rejeitado","Check-in"],F=a.map(q=>[q.nome,q.email,q.mesa,q.confirmado?"Sim":"No",q.rejeitado?"Sim":"No",q.checkin?"Sim":"No"]),Y=[C.join(","),...F.map(q=>q.map(je=>`"${je}"`).join(","))].join(`
`),K=new Blob([Y],{type:"text/csv;charset=utf-8;"}),se=document.createElement("a"),Oe=URL.createObjectURL(K);se.setAttribute("href",Oe),se.setAttribute("download",`convidados-${r.nome.replace(/\s+/g,"-")}.csv`),se.style.visibility="hidden",document.body.appendChild(se),se.click(),document.body.removeChild(se),ve.success("Ficheiro CSV exportado")},U=a.filter(C=>C.nome.toLowerCase().includes(y.toLowerCase())||C.email.toLowerCase().includes(y.toLowerCase())||C.mesa&&C.mesa.toString().includes(y)),D=C=>{if(!C)return"";const[F,Y]=C.split(":");return`${F}:${Y}`};return p?_.jsx("div",{className:"flex items-center justify-center h-64",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-600 mx-auto"}),_.jsx("p",{className:"mt-4 text-gray-600",children:"A carregar..."})]})}):_.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[_.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[_.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[_.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),t.length>0&&_.jsx("select",{value:(r==null?void 0:r.id)||"",onChange:C=>k(C.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-gray-900 font-medium",children:t.map(C=>_.jsxs("option",{value:C.id,children:[C.nome," -"," ",new Date(C.data).toLocaleDateString("pt-PT")," s"," ",D(C.hora)]},C.id))})]}),r&&_.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg overflow-hidden border border-blue-200",children:[r.imagem_url&&_.jsxs("div",{className:"relative h-48 overflow-hidden",children:[_.jsx("img",{src:r.imagem_url,alt:r.nome,className:"w-full h-full object-cover"}),_.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-blue-900/80 to-transparent"}),_.jsx("div",{className:"absolute bottom-4 left-4 right-4 text-white",children:_.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[_.jsx("span",{className:"text-2xl",children:""}),_.jsx("h2",{className:"text-xl font-bold",children:r.nome})]})})]}),_.jsxs("div",{className:"p-4",children:[!r.imagem_url&&_.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[_.jsx("span",{className:"text-2xl",children:""}),_.jsx("h2",{className:"text-xl font-bold text-blue-900",children:r.nome})]}),_.jsxs("p",{className:"text-blue-700",children:[_.jsx("span",{className:"font-medium",children:"Data:"})," ",new Date(r.data).toLocaleDateString("pt-PT",{day:"numeric",month:"long",year:"numeric"})," ","s ",D(r.hora)]}),_.jsxs("p",{className:"text-blue-700",children:[_.jsx("span",{className:"font-medium",children:"Local:"})," ",r.local]}),_.jsx("button",{onClick:()=>O(`/eventos/${r.id}/editar`),className:"mt-3 inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition",children:" Editar evento"})]})]})]}),r&&_.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[_.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 text-center hover:shadow-lg transition",children:[_.jsx("p",{className:"text-3xl font-bold text-blue-600",children:h.total}),_.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Total"})]}),_.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 text-center hover:shadow-lg transition",children:[_.jsx("p",{className:"text-3xl font-bold text-green-600",children:h.confirmados}),_.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Confirmados"})]}),_.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 text-center hover:shadow-lg transition",children:[_.jsx("p",{className:"text-3xl font-bold text-red-600",children:h.rejeitados}),_.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Rejeitados"})]}),_.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 text-center hover:shadow-lg transition",children:[_.jsx("p",{className:"text-3xl font-bold text-purple-600",children:h.presentes}),_.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Presentes"})]}),_.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 text-center hover:shadow-lg transition",children:[_.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:h.pendentes}),_.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Pendentes"})]})]}),r&&_.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[_.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Convidados"}),_.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[_.jsx("input",{type:"text",placeholder:"Pesquisar...",value:y,onChange:C=>v(C.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),_.jsx("button",{onClick:$,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition font-medium",children:" Exportar CSV"}),_.jsx("button",{onClick:()=>N(b==="table"?"cards":"table"),className:"sm:hidden px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:b==="table"?" Vista Cartes":" Vista Tabela"})]})]}),U.length>0?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:`${b==="cards"?"block sm:hidden":"hidden"} space-y-4`,children:U.map(C=>_.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[_.jsxs("div",{className:"flex justify-between items-start mb-3",children:[_.jsxs("div",{children:[_.jsx("p",{className:"font-semibold text-gray-900 text-lg",children:C.nome}),_.jsx("p",{className:"text-sm text-gray-500",children:C.email}),_.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Mesa:"," ",_.jsx("input",{type:"text",defaultValue:C.mesa||"",onBlur:F=>{const Y=F.target.value.trim();Y!==(C.mesa||"")&&B(C.id,Y)},className:"inline-block w-16 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"-"})]})]}),_.jsx("button",{onClick:()=>W(C.id),className:"text-red-600 hover:text-red-800",children:_.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),_.jsxs("div",{className:"flex space-x-2 mb-3",children:[_.jsx("button",{onClick:()=>R(C.id,C.confirmado),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition ${C.confirmado?"bg-green-100 text-green-800":(C.rejeitado,"bg-gray-100 text-gray-800")}`,children:C.confirmado?" Confirmado":C.rejeitado?" Rejeitado":"Confirmar"}),_.jsx("button",{onClick:()=>I(C.id,C.checkin),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition ${C.checkin?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:C.checkin?" Presente":"Check-in"})]}),_.jsx("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/confirmar?id=${C.id}`).then(()=>ve.success("Link copiado!")),className:"w-full bg-blue-50 text-blue-600 px-3 py-2 rounded-lg text-sm font-medium hover:bg-blue-100 transition",children:" Copiar Link de Confirmao"})]},C.id))}),_.jsx("div",{className:`${b==="table"?"block":"hidden sm:block"} overflow-x-auto`,children:_.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsx("thead",{className:"bg-gray-50",children:_.jsxs("tr",{children:[_.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nome"}),_.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase hidden md:table-cell",children:"Email"}),_.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Mesa"}),_.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"}),_.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Check-in"}),_.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),_.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:U.map(C=>_.jsxs("tr",{className:"hover:bg-gray-50",children:[_.jsx("td",{className:"px-4 py-3",children:_.jsxs("div",{children:[_.jsx("p",{className:"text-sm font-medium text-gray-900",children:C.nome}),_.jsx("p",{className:"text-xs text-gray-500 md:hidden",children:C.email})]})}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 hidden md:table-cell",children:C.email}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:_.jsx("input",{type:"text",defaultValue:C.mesa||"",onBlur:F=>{const Y=F.target.value.trim();Y!==(C.mesa||"")&&B(C.id,Y)},className:"w-16 px-2 py-1 border-2 border-gray-200 rounded text-center text-sm",placeholder:"-"})}),_.jsx("td",{className:"px-4 py-3 text-center",children:_.jsx("button",{onClick:()=>R(C.id,C.confirmado),className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition ${C.confirmado?"bg-green-100 text-green-800":C.rejeitado?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:C.confirmado?" Confirmado":C.rejeitado?" Rejeitado":"Pendente"})}),_.jsx("td",{className:"px-4 py-3 text-center",children:_.jsx("button",{onClick:()=>I(C.id,C.checkin),className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition ${C.checkin?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:C.checkin?" Sim":"No"})}),_.jsx("td",{className:"px-4 py-3 text-center",children:_.jsxs("div",{className:"flex justify-center space-x-2",children:[_.jsx("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/confirmar?id=${C.id}`).then(()=>ve.success("Link copiado!")),className:"text-blue-600 hover:text-blue-900",title:"Copiar link",children:_.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),_.jsx("button",{onClick:()=>W(C.id),className:"text-red-600 hover:text-red-900",title:"Remover",children:_.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},C.id))})]})})]}):_.jsxs("div",{className:"text-center py-12",children:[_.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),_.jsx("p",{className:"text-gray-500",children:y?"Nenhum convidado encontrado com este termo de pesquisa":"Nenhum convidado adicionado ainda"})]})]}),t.length===0&&_.jsxs("div",{className:"bg-white rounded-xl shadow-md p-12 text-center",children:[_.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),_.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nenhum evento criado"}),_.jsx("p",{className:"text-gray-600 mb-4",children:"Crie o seu primeiro evento para comear a gerir convidados."}),_.jsx("a",{href:"/",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition shadow-md hover:shadow-lg",children:"Criar Evento"})]})]})}const J_="UTAD2025";function eC({onLogin:t}){const[e,r]=X.useState(""),[s,a]=X.useState(!1),[l,h]=X.useState(!1),x=p=>{if(p.preventDefault(),!e.trim()){ve.error("Introduza o cdigo de acesso");return}a(!0),setTimeout(()=>{e.trim()===J_?(ve.success("Login efetuado com sucesso!"),t()):(ve.error("Cdigo de acesso invlido"),r("")),a(!1)},500)};return _.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 px-4 py-12",children:_.jsxs("div",{className:"w-full max-w-md",children:[_.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden transform hover:scale-[1.01] transition-transform duration-300",children:[_.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 px-8 py-10 text-center relative overflow-hidden",children:[_.jsx("div",{className:"absolute inset-0 opacity-10",children:_.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("defs",{children:_.jsx("pattern",{id:"loginPattern",x:"0",y:"0",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:_.jsx("circle",{cx:"20",cy:"20",r:"2",fill:"white"})})}),_.jsx("rect",{width:"100%",height:"100%",fill:"url(#loginPattern)"})]})}),_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:"bg-white bg-opacity-20 backdrop-blur-sm rounded-full p-4 w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:_.jsx("span",{className:"text-5xl",children:""})}),_.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Gestor de Eventos"}),_.jsx("p",{className:"text-blue-100 text-sm",children:"Acesso  rea administrativa"})]})]}),_.jsxs("div",{className:"p-8",children:[_.jsxs("form",{onSubmit:x,className:"space-y-6",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"access-code",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cdigo de acesso"}),_.jsxs("div",{className:"relative",children:[_.jsx("input",{id:"access-code",type:l?"text":"password",value:e,onChange:p=>r(p.target.value),className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",placeholder:"Introduza o cdigo",disabled:s}),_.jsx("button",{type:"button",onClick:()=>h(!l),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:l?_.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):_.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),_.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-6 rounded-xl text-lg font-semibold hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 flex items-center justify-center gap-2",children:s?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),_.jsx("span",{children:"A validar..."})]}):_.jsxs(_.Fragment,{children:[_.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),_.jsx("span",{children:"Entrar"})]})})]}),_.jsx("div",{className:"mt-6 bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-100 rounded-xl p-4",children:_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("span",{className:"text-2xl flex-shrink-0",children:""}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-blue-900 font-medium mb-1",children:"Acesso Restrito"}),_.jsx("p",{className:"text-xs text-blue-700 leading-relaxed",children:"O acesso  reservado  equipa de organizao para criar eventos, fazer upload de convidados, gerir confirmaes e realizar check-in."})]})]})})]}),_.jsx("div",{className:"bg-gray-50 px-8 py-4 border-t border-gray-100",children:_.jsxs("p",{className:"text-center text-xs text-gray-500",children:[" ",new Date().getFullYear()," Gestor de Eventos UTAD - Todos os direitos reservados"]})})]}),_.jsx("div",{className:"mt-6 text-center",children:_.jsx("p",{className:"text-sm text-gray-600",children:"Necessita de ajuda? Contacte o administrador do sistema"})})]})})}function tC(){const{id:t}=wy(),e=Gs(),[r,s]=X.useState(!0),[a,l]=X.useState(!1),[h,x]=X.useState(!1),[p,g]=X.useState(null),[y,v]=X.useState(null),[b,N]=X.useState({nome:"",data:"",hora:"",local:"",imagem_url:""});X.useEffect(()=>{O()},[t]);const O=async()=>{try{const{data:B,error:W}=await rt.from("eventos").select("*").eq("id",t).single();if(W)throw W;N({nome:B.nome||"",data:B.data||"",hora:B.hora||"",local:B.local||"",imagem_url:B.imagem_url||""}),g(B.imagem_url||null)}catch(B){console.error("Erro ao carregar evento:",B),ve.error("Erro ao carregar evento")}finally{s(!1)}},L=B=>{N(W=>({...W,[B.target.name]:B.target.value}))},j=B=>{const W=B.target.files[0];if(!W)return;if(!W.type.startsWith("image/")){ve.error("Por favor, selecione um ficheiro de imagem vlido");return}if(W.size>5*1024*1024){ve.error("A imagem deve ter no mximo 5MB");return}v(W);const $=new FileReader;$.onloadend=()=>{g($.result)},$.readAsDataURL(W)},k=()=>{v(null),g(null),N(B=>({...B,imagem_url:""}))},R=async()=>{if(!y)return null;x(!0);try{const B=y.name.split(".").pop(),$=`${`${t}-${Date.now()}.${B}`}`,{error:U}=await rt.storage.from("event-images").upload($,y,{cacheControl:"3600",upsert:!1});if(U)throw U;const{data:{publicUrl:D}}=rt.storage.from("event-images").getPublicUrl($);return D}catch(B){return console.error("Erro ao fazer upload da imagem:",B),ve.error("Erro ao fazer upload da imagem"),null}finally{x(!1)}},I=async B=>{if(B.preventDefault(),!b.nome||!b.data||!b.hora||!b.local){ve.error("Por favor, preencha todos os campos obrigatrios");return}l(!0);try{let W=b.imagem_url||null;if(y){const U=await R();U&&(W=U)}!p&&!y&&(W=null);const{error:$}=await rt.from("eventos").update({nome:b.nome,data:b.data,hora:b.hora,local:b.local,imagem_url:W}).eq("id",t);if($)throw $;ve.success("Evento atualizado com sucesso!"),e("/dashboard")}catch(W){console.error("Erro ao atualizar evento:",W),ve.error("Erro ao atualizar evento: "+W.message)}finally{l(!1)}};return r?_.jsx("div",{className:"flex items-center justify-center h-64",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-600 mx-auto"}),_.jsx("p",{className:"mt-4 text-gray-600",children:"A carregar evento..."})]})}):_.jsx("div",{className:"max-w-2xl mx-auto px-4",children:_.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[_.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Editar Evento"}),_.jsxs("form",{onSubmit:I,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagem do Evento (opcional)"}),p?_.jsxs("div",{className:"relative",children:[_.jsx("img",{src:p,alt:"Preview",className:"w-full h-64 object-cover rounded-lg"}),_.jsx("button",{type:"button",onClick:k,className:"absolute top-2 right-2 bg-red-600 text-white p-2 rounded-full hover:bg-red-700 shadow-lg transition",children:_.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):_.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition",children:[_.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:j,className:"hidden"}),_.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer flex flex-col items-center",children:[_.jsx("svg",{className:"w-12 h-12 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),_.jsx("span",{className:"text-sm text-gray-600",children:"Clique para escolher uma imagem"}),_.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF at 5MB"})]})]})]}),_.jsxs("div",{children:[_.jsxs("label",{htmlFor:"nome",className:"block text-sm font-medium text-gray-700 mb-1",children:["Nome do Evento ",_.jsx("span",{className:"text-red-500",children:"*"})]}),_.jsx("input",{type:"text",id:"nome",name:"nome",value:b.nome,onChange:L,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsxs("label",{htmlFor:"data",className:"block text-sm font-medium text-gray-700 mb-1",children:["Data ",_.jsx("span",{className:"text-red-500",children:"*"})]}),_.jsx("input",{type:"date",id:"data",name:"data",value:b.data,onChange:L,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),_.jsxs("div",{children:[_.jsxs("label",{htmlFor:"hora",className:"block text-sm font-medium text-gray-700 mb-1",children:["Hora ",_.jsx("span",{className:"text-red-500",children:"*"})]}),_.jsx("input",{type:"time",id:"hora",name:"hora",value:b.hora,onChange:L,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),_.jsxs("div",{children:[_.jsxs("label",{htmlFor:"local",className:"block text-sm font-medium text-gray-700 mb-1",children:["Local ",_.jsx("span",{className:"text-red-500",children:"*"})]}),_.jsx("input",{type:"text",id:"local",name:"local",value:b.local,onChange:L,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),_.jsx("button",{type:"submit",disabled:a||h,className:"w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-60 flex items-center justify-center gap-2",children:a||h?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),_.jsx("span",{children:h?"A atualizar imagem...":"A guardar alteraes..."})]}):"Guardar alteraes"})]})]})})}function rC(){const t=Xi(),[e,r]=X.useState(()=>localStorage.getItem("isAuthenticated")==="true"),[s,a]=X.useState(!1),l=!t.pathname.includes("/confirmar")&&!t.pathname.includes("/login"),h=()=>{r(!0),localStorage.setItem("isAuthenticated","true")},x=()=>{r(!1),localStorage.removeItem("isAuthenticated"),a(!1)};X.useEffect(()=>{a(!1)},[t.pathname]);const p=({children:g})=>e?g:_.jsx(l0,{to:"/login",replace:!0});return _.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l&&_.jsxs(_.Fragment,{children:[_.jsx("nav",{className:"bg-white shadow-sm border-b sticky top-0 z-50",children:_.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:_.jsxs("div",{className:"flex justify-between h-16",children:[_.jsxs("div",{className:"flex items-center space-x-8",children:[_.jsxs(En,{to:"/",className:"flex items-center space-x-2 text-xl font-semibold text-gray-900 hover:text-blue-600 transition",onClick:()=>a(!1),children:[_.jsx("span",{className:"text-2xl",children:""}),_.jsx("span",{className:"hidden sm:inline",children:"Gestor de Eventos"})]}),_.jsxs("div",{className:"hidden md:flex space-x-1",children:[_.jsx(En,{to:"/",className:`px-3 py-2 text-sm font-medium rounded-md transition ${t.pathname==="/"?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:"Criar Evento"}),_.jsx(En,{to:"/upload",className:`px-3 py-2 text-sm font-medium rounded-md transition ${t.pathname==="/upload"?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:"Convidados"}),_.jsx(En,{to:"/checkin",className:`px-3 py-2 text-sm font-medium rounded-md transition ${t.pathname==="/checkin"?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:"Check-in"}),_.jsx(En,{to:"/dashboard",className:`px-3 py-2 text-sm font-medium rounded-md transition ${t.pathname==="/dashboard"?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:"Dashboard"})]})]}),_.jsxs("div",{className:"flex items-center space-x-4",children:[e&&_.jsxs("button",{onClick:x,className:"hidden md:flex items-center space-x-1 text-red-600 hover:text-red-700 px-3 py-2 text-sm font-medium transition",children:[_.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),_.jsx("span",{children:"Sair"})]}),_.jsx("button",{onClick:()=>a(!s),className:"md:hidden p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:_.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]})})}),s&&_.jsx("div",{className:"md:hidden bg-white shadow-lg border-b",children:_.jsxs("div",{className:"px-4 py-3 space-y-1",children:[_.jsx(En,{to:"/",className:`block px-3 py-2 rounded-md text-base font-medium transition ${t.pathname==="/"?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:"Criar Evento"}),_.jsx(En,{to:"/upload",className:`block px-3 py-2 rounded-md text-base font-medium transition ${t.pathname==="/upload"?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:"Convidados"}),_.jsx(En,{to:"/checkin",className:`block px-3 py-2 rounded-md text-base font-medium transition ${t.pathname==="/checkin"?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:"Check-in"}),_.jsx(En,{to:"/dashboard",className:`block px-3 py-2 rounded-md text-base font-medium transition ${t.pathname==="/dashboard"?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:"Dashboard"}),e&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"border-t my-2"}),_.jsx("button",{onClick:x,className:"w-full text-left px-3 py-2 rounded-md text-base font-medium text-red-600 hover:bg-red-50 transition",children:"Sair"})]})]})})]}),_.jsx("main",{className:l?"py-6 sm:py-8":"",children:_.jsxs(Dy,{children:[_.jsx($n,{path:"/login",element:e?_.jsx(l0,{to:"/",replace:!0}):_.jsx(eC,{onLogin:h})}),_.jsx($n,{path:"/confirmar",element:_.jsx(A_,{})}),_.jsx($n,{path:"/",element:_.jsx(p,{children:_.jsx(r_,{})})}),_.jsx($n,{path:"/upload",element:_.jsx(p,{children:_.jsx(c_,{})})}),_.jsx($n,{path:"/checkin",element:_.jsx(p,{children:_.jsx(Z_,{})})}),_.jsx($n,{path:"/dashboard",element:_.jsx(p,{children:_.jsx(Q_,{})})}),_.jsx($n,{path:"/eventos/:id/editar",element:_.jsx(p,{children:_.jsx(tC,{})})})]})})]})}sc.createRoot(document.getElementById("root")).render(_.jsx(en.StrictMode,{children:_.jsxs(Vy,{children:[_.jsx(rC,{}),_.jsx(Dv,{position:"top-right",toastOptions:{duration:3e3,style:{background:"#363636",color:"#fff"},success:{style:{background:"#10b981"}},error:{style:{background:"#ef4444"}}}})]})}));
//# sourceMappingURL=index-CyOTMPNx.js.map
