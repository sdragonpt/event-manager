function xd(t,e){for(var r=0;r<e.length;r++){const s=e[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();var os=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function g2(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return t[s]}})}),r}var Y0={exports:{}},Ll={},Z0={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zo=Symbol.for("react.element"),p2=Symbol.for("react.portal"),m2=Symbol.for("react.fragment"),w2=Symbol.for("react.strict_mode"),x2=Symbol.for("react.profiler"),y2=Symbol.for("react.provider"),v2=Symbol.for("react.context"),E2=Symbol.for("react.forward_ref"),_2=Symbol.for("react.suspense"),C2=Symbol.for("react.memo"),A2=Symbol.for("react.lazy"),Gh=Symbol.iterator;function b2(t){return t===null||typeof t!="object"?null:(t=Gh&&t[Gh]||t["@@iterator"],typeof t=="function"?t:null)}var Q0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J0=Object.assign,e1={};function Fs(t,e,r){this.props=t,this.context=e,this.refs=e1,this.updater=r||Q0}Fs.prototype.isReactComponent={};Fs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function t1(){}t1.prototype=Fs.prototype;function vd(t,e,r){this.props=t,this.context=e,this.refs=e1,this.updater=r||Q0}var Ed=vd.prototype=new t1;Ed.constructor=vd;J0(Ed,Fs.prototype);Ed.isPureReactComponent=!0;var Xh=Array.isArray,r1=Object.prototype.hasOwnProperty,_d={current:null},n1={key:!0,ref:!0,__self:!0,__source:!0};function i1(t,e,r){var s,a={},l=null,h=null;if(e!=null)for(s in e.ref!==void 0&&(h=e.ref),e.key!==void 0&&(l=""+e.key),e)r1.call(e,s)&&!n1.hasOwnProperty(s)&&(a[s]=e[s]);var w=arguments.length-2;if(w===1)a.children=r;else if(1<w){for(var g=Array(w),p=0;p<w;p++)g[p]=arguments[p+2];a.children=g}if(t&&t.defaultProps)for(s in w=t.defaultProps,w)a[s]===void 0&&(a[s]=w[s]);return{$$typeof:Zo,type:t,key:l,ref:h,props:a,_owner:_d.current}}function S2(t,e){return{$$typeof:Zo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zo}function I2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var $h=/\/+/g;function _u(t,e){return typeof t=="object"&&t!==null&&t.key!=null?I2(""+t.key):e.toString(36)}function za(t,e,r,s,a){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var h=!1;if(t===null)h=!0;else switch(l){case"string":case"number":h=!0;break;case"object":switch(t.$$typeof){case Zo:case p2:h=!0}}if(h)return h=t,a=a(h),t=s===""?"."+_u(h,0):s,Xh(a)?(r="",t!=null&&(r=t.replace($h,"$&/")+"/"),za(a,e,r,"",function(p){return p})):a!=null&&(Cd(a)&&(a=S2(a,r+(!a.key||h&&h.key===a.key?"":(""+a.key).replace($h,"$&/")+"/")+t)),e.push(a)),1;if(h=0,s=s===""?".":s+":",Xh(t))for(var w=0;w<t.length;w++){l=t[w];var g=s+_u(l,w);h+=za(l,e,r,g,a)}else if(g=b2(t),typeof g=="function")for(t=g.call(t),w=0;!(l=t.next()).done;)l=l.value,g=s+_u(l,w++),h+=za(l,e,r,g,a);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return h}function ga(t,e,r){if(t==null)return t;var s=[],a=0;return za(t,s,"","",function(l){return e.call(r,l,a++)}),s}function T2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fr={current:null},Wa={transition:null},R2={ReactCurrentDispatcher:fr,ReactCurrentBatchConfig:Wa,ReactCurrentOwner:_d};function s1(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:ga,forEach:function(t,e,r){ga(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ga(t,function(){e++}),e},toArray:function(t){return ga(t,function(e){return e})||[]},only:function(t){if(!Cd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};je.Component=Fs;je.Fragment=m2;je.Profiler=x2;je.PureComponent=vd;je.StrictMode=w2;je.Suspense=_2;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R2;je.act=s1;je.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=J0({},t.props),a=t.key,l=t.ref,h=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,h=_d.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var w=t.type.defaultProps;for(g in e)r1.call(e,g)&&!n1.hasOwnProperty(g)&&(s[g]=e[g]===void 0&&w!==void 0?w[g]:e[g])}var g=arguments.length-2;if(g===1)s.children=r;else if(1<g){w=Array(g);for(var p=0;p<g;p++)w[p]=arguments[p+2];s.children=w}return{$$typeof:Zo,type:t.type,key:a,ref:l,props:s,_owner:h}};je.createContext=function(t){return t={$$typeof:v2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:y2,_context:t},t.Consumer=t};je.createElement=i1;je.createFactory=function(t){var e=i1.bind(null,t);return e.type=t,e};je.createRef=function(){return{current:null}};je.forwardRef=function(t){return{$$typeof:E2,render:t}};je.isValidElement=Cd;je.lazy=function(t){return{$$typeof:A2,_payload:{_status:-1,_result:t},_init:T2}};je.memo=function(t,e){return{$$typeof:C2,type:t,compare:e===void 0?null:e}};je.startTransition=function(t){var e=Wa.transition;Wa.transition={};try{t()}finally{Wa.transition=e}};je.unstable_act=s1;je.useCallback=function(t,e){return fr.current.useCallback(t,e)};je.useContext=function(t){return fr.current.useContext(t)};je.useDebugValue=function(){};je.useDeferredValue=function(t){return fr.current.useDeferredValue(t)};je.useEffect=function(t,e){return fr.current.useEffect(t,e)};je.useId=function(){return fr.current.useId()};je.useImperativeHandle=function(t,e,r){return fr.current.useImperativeHandle(t,e,r)};je.useInsertionEffect=function(t,e){return fr.current.useInsertionEffect(t,e)};je.useLayoutEffect=function(t,e){return fr.current.useLayoutEffect(t,e)};je.useMemo=function(t,e){return fr.current.useMemo(t,e)};je.useReducer=function(t,e,r){return fr.current.useReducer(t,e,r)};je.useRef=function(t){return fr.current.useRef(t)};je.useState=function(t){return fr.current.useState(t)};je.useSyncExternalStore=function(t,e,r){return fr.current.useSyncExternalStore(t,e,r)};je.useTransition=function(){return fr.current.useTransition()};je.version="18.3.1";Z0.exports=je;var Y=Z0.exports;const en=yd(Y),N2=xd({__proto__:null,default:en},[Y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O2=Y,k2=Symbol.for("react.element"),P2=Symbol.for("react.fragment"),D2=Object.prototype.hasOwnProperty,M2=O2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L2={key:!0,ref:!0,__self:!0,__source:!0};function o1(t,e,r){var s,a={},l=null,h=null;r!==void 0&&(l=""+r),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(h=e.ref);for(s in e)D2.call(e,s)&&!L2.hasOwnProperty(s)&&(a[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)a[s]===void 0&&(a[s]=e[s]);return{$$typeof:k2,type:t,key:l,ref:h,props:a,_owner:M2.current}}Ll.Fragment=P2;Ll.jsx=o1;Ll.jsxs=o1;Y0.exports=Ll;var L=Y0.exports,ic={},a1={exports:{}},Dr={},l1={exports:{}},u1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(re,te){var we=re.length;re.push(te);e:for(;0<we;){var me=we-1>>>1,ce=re[me];if(0<a(ce,te))re[me]=te,re[we]=ce,we=me;else break e}}function r(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var te=re[0],we=re.pop();if(we!==te){re[0]=we;e:for(var me=0,ce=re.length,he=ce>>>1;me<he;){var Oe=2*(me+1)-1,Je=re[Oe],le=Oe+1,It=re[le];if(0>a(Je,we))le<ce&&0>a(It,Je)?(re[me]=It,re[le]=we,me=le):(re[me]=Je,re[Oe]=we,me=Oe);else if(le<ce&&0>a(It,we))re[me]=It,re[le]=we,me=le;else break e}}return te}function a(re,te){var we=re.sortIndex-te.sortIndex;return we!==0?we:re.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var h=Date,w=h.now();t.unstable_now=function(){return h.now()-w}}var g=[],p=[],y=1,v=null,_=3,T=!1,N=!1,B=!1,F=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(re){for(var te=r(p);te!==null;){if(te.callback===null)s(p);else if(te.startTime<=re)s(p),te.sortIndex=te.expirationTime,e(g,te);else break;te=r(p)}}function P(re){if(B=!1,b(re),!N)if(r(g)!==null)N=!0,Ve(X);else{var te=r(p);te!==null&&ae(P,te.startTime-re)}}function X(re,te){N=!1,B&&(B=!1,k(M),M=-1),T=!0;var we=_;try{for(b(te),v=r(g);v!==null&&(!(v.expirationTime>te)||re&&!J());){var me=v.callback;if(typeof me=="function"){v.callback=null,_=v.priorityLevel;var ce=me(v.expirationTime<=te);te=t.unstable_now(),typeof ce=="function"?v.callback=ce:v===r(g)&&s(g),b(te)}else s(g);v=r(g)}if(v!==null)var he=!0;else{var Oe=r(p);Oe!==null&&ae(P,Oe.startTime-te),he=!1}return he}finally{v=null,_=we,T=!1}}var G=!1,U=null,M=-1,R=5,z=-1;function J(){return!(t.unstable_now()-z<R)}function Z(){if(U!==null){var re=t.unstable_now();z=re;var te=!0;try{te=U(!0,re)}finally{te?ue():(G=!1,U=null)}}else G=!1}var ue;if(typeof I=="function")ue=function(){I(Z)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,q=Ne.port2;Ne.port1.onmessage=Z,ue=function(){q.postMessage(null)}}else ue=function(){F(Z,0)};function Ve(re){U=re,G||(G=!0,ue())}function ae(re,te){M=F(function(){re(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(re){re.callback=null},t.unstable_continueExecution=function(){N||T||(N=!0,Ve(X))},t.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<re?Math.floor(1e3/re):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return r(g)},t.unstable_next=function(re){switch(_){case 1:case 2:case 3:var te=3;break;default:te=_}var we=_;_=te;try{return re()}finally{_=we}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(re,te){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var we=_;_=re;try{return te()}finally{_=we}},t.unstable_scheduleCallback=function(re,te,we){var me=t.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?me+we:me):we=me,re){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=we+ce,re={id:y++,callback:te,priorityLevel:re,startTime:we,expirationTime:ce,sortIndex:-1},we>me?(re.sortIndex=we,e(p,re),r(g)===null&&re===r(p)&&(B?(k(M),M=-1):B=!0,ae(P,we-me))):(re.sortIndex=ce,e(g,re),N||T||(N=!0,Ve(X))),re},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(re){var te=_;return function(){var we=_;_=te;try{return re.apply(this,arguments)}finally{_=we}}}})(u1);l1.exports=u1;var B2=l1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F2=Y,Pr=B2;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c1=new Set,Ro={};function Vi(t,e){Ns(t,e),Ns(t+"Capture",e)}function Ns(t,e){for(Ro[t]=e,t=0;t<e.length;t++)c1.add(e[t])}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sc=Object.prototype.hasOwnProperty,j2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kh={},qh={};function U2(t){return sc.call(qh,t)?!0:sc.call(Kh,t)?!1:j2.test(t)?qh[t]=!0:(Kh[t]=!0,!1)}function V2(t,e,r,s){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function z2(t,e,r,s){if(e===null||typeof e>"u"||V2(t,e,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gr(t,e,r,s,a,l,h){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=h}var tr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tr[t]=new gr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tr[e]=new gr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tr[t]=new gr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tr[t]=new gr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tr[t]=new gr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tr[t]=new gr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tr[t]=new gr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tr[t]=new gr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tr[t]=new gr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ad=/[\-:]([a-z])/g;function bd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ad,bd);tr[e]=new gr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ad,bd);tr[e]=new gr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ad,bd);tr[e]=new gr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tr[t]=new gr(t,1,!1,t.toLowerCase(),null,!1,!1)});tr.xlinkHref=new gr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tr[t]=new gr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sd(t,e,r,s){var a=tr.hasOwnProperty(e)?tr[e]:null;(a!==null?a.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(z2(e,r,a,s)&&(r=null),s||a===null?U2(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,s=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?t.setAttributeNS(s,e,r):t.setAttribute(e,r))))}var Dn=F2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pa=Symbol.for("react.element"),cs=Symbol.for("react.portal"),ds=Symbol.for("react.fragment"),Id=Symbol.for("react.strict_mode"),oc=Symbol.for("react.profiler"),d1=Symbol.for("react.provider"),h1=Symbol.for("react.context"),Td=Symbol.for("react.forward_ref"),ac=Symbol.for("react.suspense"),lc=Symbol.for("react.suspense_list"),Rd=Symbol.for("react.memo"),Hn=Symbol.for("react.lazy"),f1=Symbol.for("react.offscreen"),Yh=Symbol.iterator;function ro(t){return t===null||typeof t!="object"?null:(t=Yh&&t[Yh]||t["@@iterator"],typeof t=="function"?t:null)}var Et=Object.assign,Cu;function ho(t){if(Cu===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Cu=e&&e[1]||""}return`
`+Cu+t}var Au=!1;function bu(t,e){if(!t||Au)return"";Au=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var s=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){s=p}t.call(e.prototype)}else{try{throw Error()}catch(p){s=p}t()}}catch(p){if(p&&s&&typeof p.stack=="string"){for(var a=p.stack.split(`
`),l=s.stack.split(`
`),h=a.length-1,w=l.length-1;1<=h&&0<=w&&a[h]!==l[w];)w--;for(;1<=h&&0<=w;h--,w--)if(a[h]!==l[w]){if(h!==1||w!==1)do if(h--,w--,0>w||a[h]!==l[w]){var g=`
`+a[h].replace(" at new "," at ");return t.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",t.displayName)),g}while(1<=h&&0<=w);break}}}finally{Au=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ho(t):""}function W2(t){switch(t.tag){case 5:return ho(t.type);case 16:return ho("Lazy");case 13:return ho("Suspense");case 19:return ho("SuspenseList");case 0:case 2:case 15:return t=bu(t.type,!1),t;case 11:return t=bu(t.type.render,!1),t;case 1:return t=bu(t.type,!0),t;default:return""}}function uc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ds:return"Fragment";case cs:return"Portal";case oc:return"Profiler";case Id:return"StrictMode";case ac:return"Suspense";case lc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case h1:return(t.displayName||"Context")+".Consumer";case d1:return(t._context.displayName||"Context")+".Provider";case Td:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rd:return e=t.displayName||null,e!==null?e:uc(t.type)||"Memo";case Hn:e=t._payload,t=t._init;try{return uc(t(e))}catch{}}return null}function H2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uc(e);case 8:return e===Id?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function li(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function g1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function G2(t){var e=g1(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(h){s=""+h,l.call(this,h)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(h){s=""+h},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ma(t){t._valueTracker||(t._valueTracker=G2(t))}function p1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),s="";return t&&(s=g1(t)?t.checked?"true":"false":t.value),t=s,t!==r?(e.setValue(t),!0):!1}function tl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cc(t,e){var r=e.checked;return Et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Zh(t,e){var r=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;r=li(e.value!=null?e.value:r),t._wrapperState={initialChecked:s,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function m1(t,e){e=e.checked,e!=null&&Sd(t,"checked",e,!1)}function dc(t,e){m1(t,e);var r=li(e.value),s=e.type;if(r!=null)s==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hc(t,e.type,r):e.hasOwnProperty("defaultValue")&&hc(t,e.type,li(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qh(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function hc(t,e,r){(e!=="number"||tl(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var fo=Array.isArray;function Cs(t,e,r,s){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&s&&(t[r].defaultSelected=!0)}else{for(r=""+li(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,s&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function fc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jh(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ne(92));if(fo(r)){if(1<r.length)throw Error(ne(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:li(r)}}function w1(t,e){var r=li(e.value),s=li(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),s!=null&&(t.defaultValue=""+s)}function ef(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function x1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?x1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wa,y1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,s,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,s,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wa=wa||document.createElement("div"),wa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function No(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},X2=["Webkit","ms","Moz","O"];Object.keys(xo).forEach(function(t){X2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xo[e]=xo[t]})});function v1(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||xo.hasOwnProperty(t)&&xo[t]?(""+e).trim():e+"px"}function E1(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=v1(r,e[r],s);r==="float"&&(r="cssFloat"),s?t.setProperty(r,a):t[r]=a}}var $2=Et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pc(t,e){if(e){if($2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function mc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wc=null;function Nd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xc=null,As=null,bs=null;function tf(t){if(t=ea(t)){if(typeof xc!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=Vl(e),xc(t.stateNode,t.type,e))}}function _1(t){As?bs?bs.push(t):bs=[t]:As=t}function C1(){if(As){var t=As,e=bs;if(bs=As=null,tf(t),e)for(t=0;t<e.length;t++)tf(e[t])}}function A1(t,e){return t(e)}function b1(){}var Su=!1;function S1(t,e,r){if(Su)return t(e,r);Su=!0;try{return A1(t,e,r)}finally{Su=!1,(As!==null||bs!==null)&&(b1(),C1())}}function Oo(t,e){var r=t.stateNode;if(r===null)return null;var s=Vl(r);if(s===null)return null;r=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ne(231,e,typeof r));return r}var yc=!1;if(Rn)try{var no={};Object.defineProperty(no,"passive",{get:function(){yc=!0}}),window.addEventListener("test",no,no),window.removeEventListener("test",no,no)}catch{yc=!1}function K2(t,e,r,s,a,l,h,w,g){var p=Array.prototype.slice.call(arguments,3);try{e.apply(r,p)}catch(y){this.onError(y)}}var yo=!1,rl=null,nl=!1,vc=null,q2={onError:function(t){yo=!0,rl=t}};function Y2(t,e,r,s,a,l,h,w,g){yo=!1,rl=null,K2.apply(q2,arguments)}function Z2(t,e,r,s,a,l,h,w,g){if(Y2.apply(this,arguments),yo){if(yo){var p=rl;yo=!1,rl=null}else throw Error(ne(198));nl||(nl=!0,vc=p)}}function zi(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function I1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rf(t){if(zi(t)!==t)throw Error(ne(188))}function Q2(t){var e=t.alternate;if(!e){if(e=zi(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var r=t,s=e;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return rf(a),t;if(l===s)return rf(a),e;l=l.sibling}throw Error(ne(188))}if(r.return!==s.return)r=a,s=l;else{for(var h=!1,w=a.child;w;){if(w===r){h=!0,r=a,s=l;break}if(w===s){h=!0,s=a,r=l;break}w=w.sibling}if(!h){for(w=l.child;w;){if(w===r){h=!0,r=l,s=a;break}if(w===s){h=!0,s=l,r=a;break}w=w.sibling}if(!h)throw Error(ne(189))}}if(r.alternate!==s)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?t:e}function T1(t){return t=Q2(t),t!==null?R1(t):null}function R1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=R1(t);if(e!==null)return e;t=t.sibling}return null}var N1=Pr.unstable_scheduleCallback,nf=Pr.unstable_cancelCallback,J2=Pr.unstable_shouldYield,ew=Pr.unstable_requestPaint,Rt=Pr.unstable_now,tw=Pr.unstable_getCurrentPriorityLevel,Od=Pr.unstable_ImmediatePriority,O1=Pr.unstable_UserBlockingPriority,il=Pr.unstable_NormalPriority,rw=Pr.unstable_LowPriority,k1=Pr.unstable_IdlePriority,Bl=null,yn=null;function nw(t){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(Bl,t,void 0,(t.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:ow,iw=Math.log,sw=Math.LN2;function ow(t){return t>>>=0,t===0?32:31-(iw(t)/sw|0)|0}var xa=64,ya=4194304;function go(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sl(t,e){var r=t.pendingLanes;if(r===0)return 0;var s=0,a=t.suspendedLanes,l=t.pingedLanes,h=r&268435455;if(h!==0){var w=h&~a;w!==0?s=go(w):(l&=h,l!==0&&(s=go(l)))}else h=r&~a,h!==0?s=go(h):l!==0&&(s=go(l));if(s===0)return 0;if(e!==0&&e!==s&&!(e&a)&&(a=s&-s,l=e&-e,a>=l||a===16&&(l&4194240)!==0))return e;if(s&4&&(s|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)r=31-on(e),a=1<<r,s|=t[r],e&=~a;return s}function aw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lw(t,e){for(var r=t.suspendedLanes,s=t.pingedLanes,a=t.expirationTimes,l=t.pendingLanes;0<l;){var h=31-on(l),w=1<<h,g=a[h];g===-1?(!(w&r)||w&s)&&(a[h]=aw(w,e)):g<=e&&(t.expiredLanes|=w),l&=~w}}function Ec(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function P1(){var t=xa;return xa<<=1,!(xa&4194240)&&(xa=64),t}function Iu(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Qo(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-on(e),t[e]=r}function uw(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-on(r),l=1<<a;e[a]=0,s[a]=-1,t[a]=-1,r&=~l}}function kd(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var s=31-on(r),a=1<<s;a&e|t[s]&e&&(t[s]|=e),r&=~a}}var Qe=0;function D1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var M1,Pd,L1,B1,F1,_c=!1,va=[],Jn=null,ei=null,ti=null,ko=new Map,Po=new Map,Xn=[],cw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sf(t,e){switch(t){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":ko.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Po.delete(e.pointerId)}}function io(t,e,r,s,a,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:r,eventSystemFlags:s,nativeEvent:l,targetContainers:[a]},e!==null&&(e=ea(e),e!==null&&Pd(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function dw(t,e,r,s,a){switch(e){case"focusin":return Jn=io(Jn,t,e,r,s,a),!0;case"dragenter":return ei=io(ei,t,e,r,s,a),!0;case"mouseover":return ti=io(ti,t,e,r,s,a),!0;case"pointerover":var l=a.pointerId;return ko.set(l,io(ko.get(l)||null,t,e,r,s,a)),!0;case"gotpointercapture":return l=a.pointerId,Po.set(l,io(Po.get(l)||null,t,e,r,s,a)),!0}return!1}function j1(t){var e=Ri(t.target);if(e!==null){var r=zi(e);if(r!==null){if(e=r.tag,e===13){if(e=I1(r),e!==null){t.blockedOn=e,F1(t.priority,function(){L1(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ha(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Cc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var s=new r.constructor(r.type,r);wc=s,r.target.dispatchEvent(s),wc=null}else return e=ea(r),e!==null&&Pd(e),t.blockedOn=r,!1;e.shift()}return!0}function of(t,e,r){Ha(t)&&r.delete(e)}function hw(){_c=!1,Jn!==null&&Ha(Jn)&&(Jn=null),ei!==null&&Ha(ei)&&(ei=null),ti!==null&&Ha(ti)&&(ti=null),ko.forEach(of),Po.forEach(of)}function so(t,e){t.blockedOn===e&&(t.blockedOn=null,_c||(_c=!0,Pr.unstable_scheduleCallback(Pr.unstable_NormalPriority,hw)))}function Do(t){function e(a){return so(a,t)}if(0<va.length){so(va[0],t);for(var r=1;r<va.length;r++){var s=va[r];s.blockedOn===t&&(s.blockedOn=null)}}for(Jn!==null&&so(Jn,t),ei!==null&&so(ei,t),ti!==null&&so(ti,t),ko.forEach(e),Po.forEach(e),r=0;r<Xn.length;r++)s=Xn[r],s.blockedOn===t&&(s.blockedOn=null);for(;0<Xn.length&&(r=Xn[0],r.blockedOn===null);)j1(r),r.blockedOn===null&&Xn.shift()}var Ss=Dn.ReactCurrentBatchConfig,ol=!0;function fw(t,e,r,s){var a=Qe,l=Ss.transition;Ss.transition=null;try{Qe=1,Dd(t,e,r,s)}finally{Qe=a,Ss.transition=l}}function gw(t,e,r,s){var a=Qe,l=Ss.transition;Ss.transition=null;try{Qe=4,Dd(t,e,r,s)}finally{Qe=a,Ss.transition=l}}function Dd(t,e,r,s){if(ol){var a=Cc(t,e,r,s);if(a===null)Bu(t,e,s,al,r),sf(t,s);else if(dw(a,t,e,r,s))s.stopPropagation();else if(sf(t,s),e&4&&-1<cw.indexOf(t)){for(;a!==null;){var l=ea(a);if(l!==null&&M1(l),l=Cc(t,e,r,s),l===null&&Bu(t,e,s,al,r),l===a)break;a=l}a!==null&&s.stopPropagation()}else Bu(t,e,s,null,r)}}var al=null;function Cc(t,e,r,s){if(al=null,t=Nd(s),t=Ri(t),t!==null)if(e=zi(t),e===null)t=null;else if(r=e.tag,r===13){if(t=I1(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return al=t,null}function U1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tw()){case Od:return 1;case O1:return 4;case il:case rw:return 16;case k1:return 536870912;default:return 16}default:return 16}}var Yn=null,Md=null,Ga=null;function V1(){if(Ga)return Ga;var t,e=Md,r=e.length,s,a="value"in Yn?Yn.value:Yn.textContent,l=a.length;for(t=0;t<r&&e[t]===a[t];t++);var h=r-t;for(s=1;s<=h&&e[r-s]===a[l-s];s++);return Ga=a.slice(t,1<s?1-s:void 0)}function Xa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ea(){return!0}function af(){return!1}function Mr(t){function e(r,s,a,l,h){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=l,this.target=h,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(r=t[w],this[w]=r?r(l):l[w]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ea:af,this.isPropagationStopped=af,this}return Et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ea)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ea)},persist:function(){},isPersistent:Ea}),e}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ld=Mr(js),Jo=Et({},js,{view:0,detail:0}),pw=Mr(Jo),Tu,Ru,oo,Fl=Et({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oo&&(oo&&t.type==="mousemove"?(Tu=t.screenX-oo.screenX,Ru=t.screenY-oo.screenY):Ru=Tu=0,oo=t),Tu)},movementY:function(t){return"movementY"in t?t.movementY:Ru}}),lf=Mr(Fl),mw=Et({},Fl,{dataTransfer:0}),ww=Mr(mw),xw=Et({},Jo,{relatedTarget:0}),Nu=Mr(xw),yw=Et({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),vw=Mr(yw),Ew=Et({},js,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_w=Mr(Ew),Cw=Et({},js,{data:0}),uf=Mr(Cw),Aw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Sw[t])?!!e[t]:!1}function Bd(){return Iw}var Tw=Et({},Jo,{key:function(t){if(t.key){var e=Aw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bd,charCode:function(t){return t.type==="keypress"?Xa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Rw=Mr(Tw),Nw=Et({},Fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cf=Mr(Nw),Ow=Et({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bd}),kw=Mr(Ow),Pw=Et({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dw=Mr(Pw),Mw=Et({},Fl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Lw=Mr(Mw),Bw=[9,13,27,32],Fd=Rn&&"CompositionEvent"in window,vo=null;Rn&&"documentMode"in document&&(vo=document.documentMode);var Fw=Rn&&"TextEvent"in window&&!vo,z1=Rn&&(!Fd||vo&&8<vo&&11>=vo),df=" ",hf=!1;function W1(t,e){switch(t){case"keyup":return Bw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function H1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hs=!1;function jw(t,e){switch(t){case"compositionend":return H1(e);case"keypress":return e.which!==32?null:(hf=!0,df);case"textInput":return t=e.data,t===df&&hf?null:t;default:return null}}function Uw(t,e){if(hs)return t==="compositionend"||!Fd&&W1(t,e)?(t=V1(),Ga=Md=Yn=null,hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return z1&&e.locale!=="ko"?null:e.data;default:return null}}var Vw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ff(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Vw[t.type]:e==="textarea"}function G1(t,e,r,s){_1(s),e=ll(e,"onChange"),0<e.length&&(r=new Ld("onChange","change",null,r,s),t.push({event:r,listeners:e}))}var Eo=null,Mo=null;function zw(t){rg(t,0)}function jl(t){var e=ps(t);if(p1(e))return t}function Ww(t,e){if(t==="change")return e}var X1=!1;if(Rn){var Ou;if(Rn){var ku="oninput"in document;if(!ku){var gf=document.createElement("div");gf.setAttribute("oninput","return;"),ku=typeof gf.oninput=="function"}Ou=ku}else Ou=!1;X1=Ou&&(!document.documentMode||9<document.documentMode)}function pf(){Eo&&(Eo.detachEvent("onpropertychange",$1),Mo=Eo=null)}function $1(t){if(t.propertyName==="value"&&jl(Mo)){var e=[];G1(e,Mo,t,Nd(t)),S1(zw,e)}}function Hw(t,e,r){t==="focusin"?(pf(),Eo=e,Mo=r,Eo.attachEvent("onpropertychange",$1)):t==="focusout"&&pf()}function Gw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jl(Mo)}function Xw(t,e){if(t==="click")return jl(e)}function $w(t,e){if(t==="input"||t==="change")return jl(e)}function Kw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ln=typeof Object.is=="function"?Object.is:Kw;function Lo(t,e){if(ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!sc.call(e,a)||!ln(t[a],e[a]))return!1}return!0}function mf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wf(t,e){var r=mf(t);t=0;for(var s;r;){if(r.nodeType===3){if(s=t+r.textContent.length,t<=e&&s>=e)return{node:r,offset:e-t};t=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=mf(r)}}function K1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?K1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function q1(){for(var t=window,e=tl();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=tl(t.document)}return e}function jd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qw(t){var e=q1(),r=t.focusedElem,s=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&K1(r.ownerDocument.documentElement,r)){if(s!==null&&jd(r)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,l=Math.min(s.start,a);s=s.end===void 0?l:Math.min(s.end,a),!t.extend&&l>s&&(a=s,s=l,l=a),a=wf(r,l);var h=wf(r,s);a&&h&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==h.node||t.focusOffset!==h.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),l>s?(t.addRange(e),t.extend(h.node,h.offset)):(e.setEnd(h.node,h.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Yw=Rn&&"documentMode"in document&&11>=document.documentMode,fs=null,Ac=null,_o=null,bc=!1;function xf(t,e,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;bc||fs==null||fs!==tl(s)||(s=fs,"selectionStart"in s&&jd(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),_o&&Lo(_o,s)||(_o=s,s=ll(Ac,"onSelect"),0<s.length&&(e=new Ld("onSelect","select",null,e,r),t.push({event:e,listeners:s}),e.target=fs)))}function _a(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var gs={animationend:_a("Animation","AnimationEnd"),animationiteration:_a("Animation","AnimationIteration"),animationstart:_a("Animation","AnimationStart"),transitionend:_a("Transition","TransitionEnd")},Pu={},Y1={};Rn&&(Y1=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function Ul(t){if(Pu[t])return Pu[t];if(!gs[t])return t;var e=gs[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Y1)return Pu[t]=e[r];return t}var Z1=Ul("animationend"),Q1=Ul("animationiteration"),J1=Ul("animationstart"),eg=Ul("transitionend"),tg=new Map,yf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ci(t,e){tg.set(t,e),Vi(e,[t])}for(var Du=0;Du<yf.length;Du++){var Mu=yf[Du],Zw=Mu.toLowerCase(),Qw=Mu[0].toUpperCase()+Mu.slice(1);ci(Zw,"on"+Qw)}ci(Z1,"onAnimationEnd");ci(Q1,"onAnimationIteration");ci(J1,"onAnimationStart");ci("dblclick","onDoubleClick");ci("focusin","onFocus");ci("focusout","onBlur");ci(eg,"onTransitionEnd");Ns("onMouseEnter",["mouseout","mouseover"]);Ns("onMouseLeave",["mouseout","mouseover"]);Ns("onPointerEnter",["pointerout","pointerover"]);Ns("onPointerLeave",["pointerout","pointerover"]);Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jw=new Set("cancel close invalid load scroll toggle".split(" ").concat(po));function vf(t,e,r){var s=t.type||"unknown-event";t.currentTarget=r,Z2(s,e,void 0,t),t.currentTarget=null}function rg(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var s=t[r],a=s.event;s=s.listeners;e:{var l=void 0;if(e)for(var h=s.length-1;0<=h;h--){var w=s[h],g=w.instance,p=w.currentTarget;if(w=w.listener,g!==l&&a.isPropagationStopped())break e;vf(a,w,p),l=g}else for(h=0;h<s.length;h++){if(w=s[h],g=w.instance,p=w.currentTarget,w=w.listener,g!==l&&a.isPropagationStopped())break e;vf(a,w,p),l=g}}}if(nl)throw t=vc,nl=!1,vc=null,t}function dt(t,e){var r=e[Nc];r===void 0&&(r=e[Nc]=new Set);var s=t+"__bubble";r.has(s)||(ng(e,t,2,!1),r.add(s))}function Lu(t,e,r){var s=0;e&&(s|=4),ng(r,t,s,e)}var Ca="_reactListening"+Math.random().toString(36).slice(2);function Bo(t){if(!t[Ca]){t[Ca]=!0,c1.forEach(function(r){r!=="selectionchange"&&(Jw.has(r)||Lu(r,!1,t),Lu(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ca]||(e[Ca]=!0,Lu("selectionchange",!1,e))}}function ng(t,e,r,s){switch(U1(e)){case 1:var a=fw;break;case 4:a=gw;break;default:a=Dd}r=a.bind(null,e,r,t),a=void 0,!yc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),s?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function Bu(t,e,r,s,a){var l=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var h=s.tag;if(h===3||h===4){var w=s.stateNode.containerInfo;if(w===a||w.nodeType===8&&w.parentNode===a)break;if(h===4)for(h=s.return;h!==null;){var g=h.tag;if((g===3||g===4)&&(g=h.stateNode.containerInfo,g===a||g.nodeType===8&&g.parentNode===a))return;h=h.return}for(;w!==null;){if(h=Ri(w),h===null)return;if(g=h.tag,g===5||g===6){s=l=h;continue e}w=w.parentNode}}s=s.return}S1(function(){var p=l,y=Nd(r),v=[];e:{var _=tg.get(t);if(_!==void 0){var T=Ld,N=t;switch(t){case"keypress":if(Xa(r)===0)break e;case"keydown":case"keyup":T=Rw;break;case"focusin":N="focus",T=Nu;break;case"focusout":N="blur",T=Nu;break;case"beforeblur":case"afterblur":T=Nu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=lf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=ww;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=kw;break;case Z1:case Q1:case J1:T=vw;break;case eg:T=Dw;break;case"scroll":T=pw;break;case"wheel":T=Lw;break;case"copy":case"cut":case"paste":T=_w;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=cf}var B=(e&4)!==0,F=!B&&t==="scroll",k=B?_!==null?_+"Capture":null:_;B=[];for(var I=p,b;I!==null;){b=I;var P=b.stateNode;if(b.tag===5&&P!==null&&(b=P,k!==null&&(P=Oo(I,k),P!=null&&B.push(Fo(I,P,b)))),F)break;I=I.return}0<B.length&&(_=new T(_,N,null,r,y),v.push({event:_,listeners:B}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",_&&r!==wc&&(N=r.relatedTarget||r.fromElement)&&(Ri(N)||N[Nn]))break e;if((T||_)&&(_=y.window===y?y:(_=y.ownerDocument)?_.defaultView||_.parentWindow:window,T?(N=r.relatedTarget||r.toElement,T=p,N=N?Ri(N):null,N!==null&&(F=zi(N),N!==F||N.tag!==5&&N.tag!==6)&&(N=null)):(T=null,N=p),T!==N)){if(B=lf,P="onMouseLeave",k="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(B=cf,P="onPointerLeave",k="onPointerEnter",I="pointer"),F=T==null?_:ps(T),b=N==null?_:ps(N),_=new B(P,I+"leave",T,r,y),_.target=F,_.relatedTarget=b,P=null,Ri(y)===p&&(B=new B(k,I+"enter",N,r,y),B.target=b,B.relatedTarget=F,P=B),F=P,T&&N)t:{for(B=T,k=N,I=0,b=B;b;b=es(b))I++;for(b=0,P=k;P;P=es(P))b++;for(;0<I-b;)B=es(B),I--;for(;0<b-I;)k=es(k),b--;for(;I--;){if(B===k||k!==null&&B===k.alternate)break t;B=es(B),k=es(k)}B=null}else B=null;T!==null&&Ef(v,_,T,B,!1),N!==null&&F!==null&&Ef(v,F,N,B,!0)}}e:{if(_=p?ps(p):window,T=_.nodeName&&_.nodeName.toLowerCase(),T==="select"||T==="input"&&_.type==="file")var X=Ww;else if(ff(_))if(X1)X=$w;else{X=Gw;var G=Hw}else(T=_.nodeName)&&T.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(X=Xw);if(X&&(X=X(t,p))){G1(v,X,r,y);break e}G&&G(t,_,p),t==="focusout"&&(G=_._wrapperState)&&G.controlled&&_.type==="number"&&hc(_,"number",_.value)}switch(G=p?ps(p):window,t){case"focusin":(ff(G)||G.contentEditable==="true")&&(fs=G,Ac=p,_o=null);break;case"focusout":_o=Ac=fs=null;break;case"mousedown":bc=!0;break;case"contextmenu":case"mouseup":case"dragend":bc=!1,xf(v,r,y);break;case"selectionchange":if(Yw)break;case"keydown":case"keyup":xf(v,r,y)}var U;if(Fd)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else hs?W1(t,r)&&(M="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(z1&&r.locale!=="ko"&&(hs||M!=="onCompositionStart"?M==="onCompositionEnd"&&hs&&(U=V1()):(Yn=y,Md="value"in Yn?Yn.value:Yn.textContent,hs=!0)),G=ll(p,M),0<G.length&&(M=new uf(M,t,null,r,y),v.push({event:M,listeners:G}),U?M.data=U:(U=H1(r),U!==null&&(M.data=U)))),(U=Fw?jw(t,r):Uw(t,r))&&(p=ll(p,"onBeforeInput"),0<p.length&&(y=new uf("onBeforeInput","beforeinput",null,r,y),v.push({event:y,listeners:p}),y.data=U))}rg(v,e)})}function Fo(t,e,r){return{instance:t,listener:e,currentTarget:r}}function ll(t,e){for(var r=e+"Capture",s=[];t!==null;){var a=t,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Oo(t,r),l!=null&&s.unshift(Fo(t,l,a)),l=Oo(t,e),l!=null&&s.push(Fo(t,l,a))),t=t.return}return s}function es(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ef(t,e,r,s,a){for(var l=e._reactName,h=[];r!==null&&r!==s;){var w=r,g=w.alternate,p=w.stateNode;if(g!==null&&g===s)break;w.tag===5&&p!==null&&(w=p,a?(g=Oo(r,l),g!=null&&h.unshift(Fo(r,g,w))):a||(g=Oo(r,l),g!=null&&h.push(Fo(r,g,w)))),r=r.return}h.length!==0&&t.push({event:e,listeners:h})}var ex=/\r\n?/g,tx=/\u0000|\uFFFD/g;function _f(t){return(typeof t=="string"?t:""+t).replace(ex,`
`).replace(tx,"")}function Aa(t,e,r){if(e=_f(e),_f(t)!==e&&r)throw Error(ne(425))}function ul(){}var Sc=null,Ic=null;function Tc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rc=typeof setTimeout=="function"?setTimeout:void 0,rx=typeof clearTimeout=="function"?clearTimeout:void 0,Cf=typeof Promise=="function"?Promise:void 0,nx=typeof queueMicrotask=="function"?queueMicrotask:typeof Cf<"u"?function(t){return Cf.resolve(null).then(t).catch(ix)}:Rc;function ix(t){setTimeout(function(){throw t})}function Fu(t,e){var r=e,s=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){t.removeChild(a),Do(e);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);Do(e)}function ri(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Af(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Us=Math.random().toString(36).slice(2),wn="__reactFiber$"+Us,jo="__reactProps$"+Us,Nn="__reactContainer$"+Us,Nc="__reactEvents$"+Us,sx="__reactListeners$"+Us,ox="__reactHandles$"+Us;function Ri(t){var e=t[wn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Nn]||r[wn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Af(t);t!==null;){if(r=t[wn])return r;t=Af(t)}return e}t=r,r=t.parentNode}return null}function ea(t){return t=t[wn]||t[Nn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ps(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function Vl(t){return t[jo]||null}var Oc=[],ms=-1;function di(t){return{current:t}}function ft(t){0>ms||(t.current=Oc[ms],Oc[ms]=null,ms--)}function ut(t,e){ms++,Oc[ms]=t.current,t.current=e}var ui={},ar=di(ui),Cr=di(!1),Mi=ui;function Os(t,e){var r=t.type.contextTypes;if(!r)return ui;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=e[l];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Ar(t){return t=t.childContextTypes,t!=null}function cl(){ft(Cr),ft(ar)}function bf(t,e,r){if(ar.current!==ui)throw Error(ne(168));ut(ar,e),ut(Cr,r)}function ig(t,e,r){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in e))throw Error(ne(108,H2(t)||"Unknown",a));return Et({},r,s)}function dl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ui,Mi=ar.current,ut(ar,t),ut(Cr,Cr.current),!0}function Sf(t,e,r){var s=t.stateNode;if(!s)throw Error(ne(169));r?(t=ig(t,e,Mi),s.__reactInternalMemoizedMergedChildContext=t,ft(Cr),ft(ar),ut(ar,t)):ft(Cr),ut(Cr,r)}var bn=null,zl=!1,ju=!1;function sg(t){bn===null?bn=[t]:bn.push(t)}function ax(t){zl=!0,sg(t)}function hi(){if(!ju&&bn!==null){ju=!0;var t=0,e=Qe;try{var r=bn;for(Qe=1;t<r.length;t++){var s=r[t];do s=s(!0);while(s!==null)}bn=null,zl=!1}catch(a){throw bn!==null&&(bn=bn.slice(t+1)),N1(Od,hi),a}finally{Qe=e,ju=!1}}return null}var ws=[],xs=0,hl=null,fl=0,zr=[],Wr=0,Li=null,Sn=1,In="";function Ci(t,e){ws[xs++]=fl,ws[xs++]=hl,hl=t,fl=e}function og(t,e,r){zr[Wr++]=Sn,zr[Wr++]=In,zr[Wr++]=Li,Li=t;var s=Sn;t=In;var a=32-on(s)-1;s&=~(1<<a),r+=1;var l=32-on(e)+a;if(30<l){var h=a-a%5;l=(s&(1<<h)-1).toString(32),s>>=h,a-=h,Sn=1<<32-on(e)+a|r<<a|s,In=l+t}else Sn=1<<l|r<<a|s,In=t}function Ud(t){t.return!==null&&(Ci(t,1),og(t,1,0))}function Vd(t){for(;t===hl;)hl=ws[--xs],ws[xs]=null,fl=ws[--xs],ws[xs]=null;for(;t===Li;)Li=zr[--Wr],zr[Wr]=null,In=zr[--Wr],zr[Wr]=null,Sn=zr[--Wr],zr[Wr]=null}var kr=null,Or=null,mt=!1,sn=null;function ag(t,e){var r=Hr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function If(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kr=t,Or=ri(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kr=t,Or=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Li!==null?{id:Sn,overflow:In}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Hr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,kr=t,Or=null,!0):!1;default:return!1}}function kc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pc(t){if(mt){var e=Or;if(e){var r=e;if(!If(t,e)){if(kc(t))throw Error(ne(418));e=ri(r.nextSibling);var s=kr;e&&If(t,e)?ag(s,r):(t.flags=t.flags&-4097|2,mt=!1,kr=t)}}else{if(kc(t))throw Error(ne(418));t.flags=t.flags&-4097|2,mt=!1,kr=t}}}function Tf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kr=t}function ba(t){if(t!==kr)return!1;if(!mt)return Tf(t),mt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tc(t.type,t.memoizedProps)),e&&(e=Or)){if(kc(t))throw lg(),Error(ne(418));for(;e;)ag(t,e),e=ri(e.nextSibling)}if(Tf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Or=ri(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Or=null}}else Or=kr?ri(t.stateNode.nextSibling):null;return!0}function lg(){for(var t=Or;t;)t=ri(t.nextSibling)}function ks(){Or=kr=null,mt=!1}function zd(t){sn===null?sn=[t]:sn.push(t)}var lx=Dn.ReactCurrentBatchConfig;function ao(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var s=r.stateNode}if(!s)throw Error(ne(147,t));var a=s,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(h){var w=a.refs;h===null?delete w[l]:w[l]=h},e._stringRef=l,e)}if(typeof t!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,t))}return t}function Sa(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rf(t){var e=t._init;return e(t._payload)}function ug(t){function e(k,I){if(t){var b=k.deletions;b===null?(k.deletions=[I],k.flags|=16):b.push(I)}}function r(k,I){if(!t)return null;for(;I!==null;)e(k,I),I=I.sibling;return null}function s(k,I){for(k=new Map;I!==null;)I.key!==null?k.set(I.key,I):k.set(I.index,I),I=I.sibling;return k}function a(k,I){return k=oi(k,I),k.index=0,k.sibling=null,k}function l(k,I,b){return k.index=b,t?(b=k.alternate,b!==null?(b=b.index,b<I?(k.flags|=2,I):b):(k.flags|=2,I)):(k.flags|=1048576,I)}function h(k){return t&&k.alternate===null&&(k.flags|=2),k}function w(k,I,b,P){return I===null||I.tag!==6?(I=Xu(b,k.mode,P),I.return=k,I):(I=a(I,b),I.return=k,I)}function g(k,I,b,P){var X=b.type;return X===ds?y(k,I,b.props.children,P,b.key):I!==null&&(I.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Hn&&Rf(X)===I.type)?(P=a(I,b.props),P.ref=ao(k,I,b),P.return=k,P):(P=Ja(b.type,b.key,b.props,null,k.mode,P),P.ref=ao(k,I,b),P.return=k,P)}function p(k,I,b,P){return I===null||I.tag!==4||I.stateNode.containerInfo!==b.containerInfo||I.stateNode.implementation!==b.implementation?(I=$u(b,k.mode,P),I.return=k,I):(I=a(I,b.children||[]),I.return=k,I)}function y(k,I,b,P,X){return I===null||I.tag!==7?(I=Di(b,k.mode,P,X),I.return=k,I):(I=a(I,b),I.return=k,I)}function v(k,I,b){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Xu(""+I,k.mode,b),I.return=k,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case pa:return b=Ja(I.type,I.key,I.props,null,k.mode,b),b.ref=ao(k,null,I),b.return=k,b;case cs:return I=$u(I,k.mode,b),I.return=k,I;case Hn:var P=I._init;return v(k,P(I._payload),b)}if(fo(I)||ro(I))return I=Di(I,k.mode,b,null),I.return=k,I;Sa(k,I)}return null}function _(k,I,b,P){var X=I!==null?I.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return X!==null?null:w(k,I,""+b,P);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case pa:return b.key===X?g(k,I,b,P):null;case cs:return b.key===X?p(k,I,b,P):null;case Hn:return X=b._init,_(k,I,X(b._payload),P)}if(fo(b)||ro(b))return X!==null?null:y(k,I,b,P,null);Sa(k,b)}return null}function T(k,I,b,P,X){if(typeof P=="string"&&P!==""||typeof P=="number")return k=k.get(b)||null,w(I,k,""+P,X);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case pa:return k=k.get(P.key===null?b:P.key)||null,g(I,k,P,X);case cs:return k=k.get(P.key===null?b:P.key)||null,p(I,k,P,X);case Hn:var G=P._init;return T(k,I,b,G(P._payload),X)}if(fo(P)||ro(P))return k=k.get(b)||null,y(I,k,P,X,null);Sa(I,P)}return null}function N(k,I,b,P){for(var X=null,G=null,U=I,M=I=0,R=null;U!==null&&M<b.length;M++){U.index>M?(R=U,U=null):R=U.sibling;var z=_(k,U,b[M],P);if(z===null){U===null&&(U=R);break}t&&U&&z.alternate===null&&e(k,U),I=l(z,I,M),G===null?X=z:G.sibling=z,G=z,U=R}if(M===b.length)return r(k,U),mt&&Ci(k,M),X;if(U===null){for(;M<b.length;M++)U=v(k,b[M],P),U!==null&&(I=l(U,I,M),G===null?X=U:G.sibling=U,G=U);return mt&&Ci(k,M),X}for(U=s(k,U);M<b.length;M++)R=T(U,k,M,b[M],P),R!==null&&(t&&R.alternate!==null&&U.delete(R.key===null?M:R.key),I=l(R,I,M),G===null?X=R:G.sibling=R,G=R);return t&&U.forEach(function(J){return e(k,J)}),mt&&Ci(k,M),X}function B(k,I,b,P){var X=ro(b);if(typeof X!="function")throw Error(ne(150));if(b=X.call(b),b==null)throw Error(ne(151));for(var G=X=null,U=I,M=I=0,R=null,z=b.next();U!==null&&!z.done;M++,z=b.next()){U.index>M?(R=U,U=null):R=U.sibling;var J=_(k,U,z.value,P);if(J===null){U===null&&(U=R);break}t&&U&&J.alternate===null&&e(k,U),I=l(J,I,M),G===null?X=J:G.sibling=J,G=J,U=R}if(z.done)return r(k,U),mt&&Ci(k,M),X;if(U===null){for(;!z.done;M++,z=b.next())z=v(k,z.value,P),z!==null&&(I=l(z,I,M),G===null?X=z:G.sibling=z,G=z);return mt&&Ci(k,M),X}for(U=s(k,U);!z.done;M++,z=b.next())z=T(U,k,M,z.value,P),z!==null&&(t&&z.alternate!==null&&U.delete(z.key===null?M:z.key),I=l(z,I,M),G===null?X=z:G.sibling=z,G=z);return t&&U.forEach(function(Z){return e(k,Z)}),mt&&Ci(k,M),X}function F(k,I,b,P){if(typeof b=="object"&&b!==null&&b.type===ds&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case pa:e:{for(var X=b.key,G=I;G!==null;){if(G.key===X){if(X=b.type,X===ds){if(G.tag===7){r(k,G.sibling),I=a(G,b.props.children),I.return=k,k=I;break e}}else if(G.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Hn&&Rf(X)===G.type){r(k,G.sibling),I=a(G,b.props),I.ref=ao(k,G,b),I.return=k,k=I;break e}r(k,G);break}else e(k,G);G=G.sibling}b.type===ds?(I=Di(b.props.children,k.mode,P,b.key),I.return=k,k=I):(P=Ja(b.type,b.key,b.props,null,k.mode,P),P.ref=ao(k,I,b),P.return=k,k=P)}return h(k);case cs:e:{for(G=b.key;I!==null;){if(I.key===G)if(I.tag===4&&I.stateNode.containerInfo===b.containerInfo&&I.stateNode.implementation===b.implementation){r(k,I.sibling),I=a(I,b.children||[]),I.return=k,k=I;break e}else{r(k,I);break}else e(k,I);I=I.sibling}I=$u(b,k.mode,P),I.return=k,k=I}return h(k);case Hn:return G=b._init,F(k,I,G(b._payload),P)}if(fo(b))return N(k,I,b,P);if(ro(b))return B(k,I,b,P);Sa(k,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,I!==null&&I.tag===6?(r(k,I.sibling),I=a(I,b),I.return=k,k=I):(r(k,I),I=Xu(b,k.mode,P),I.return=k,k=I),h(k)):r(k,I)}return F}var Ps=ug(!0),cg=ug(!1),gl=di(null),pl=null,ys=null,Wd=null;function Hd(){Wd=ys=pl=null}function Gd(t){var e=gl.current;ft(gl),t._currentValue=e}function Dc(t,e,r){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===r)break;t=t.return}}function Is(t,e){pl=t,Wd=ys=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_r=!0),t.firstContext=null)}function Xr(t){var e=t._currentValue;if(Wd!==t)if(t={context:t,memoizedValue:e,next:null},ys===null){if(pl===null)throw Error(ne(308));ys=t,pl.dependencies={lanes:0,firstContext:t}}else ys=ys.next=t;return e}var Ni=null;function Xd(t){Ni===null?Ni=[t]:Ni.push(t)}function dg(t,e,r,s){var a=e.interleaved;return a===null?(r.next=r,Xd(e)):(r.next=a.next,a.next=r),e.interleaved=r,On(t,s)}function On(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Gn=!1;function $d(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Tn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ni(t,e,r){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Ge&2){var a=s.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),s.pending=e,On(t,r)}return a=s.interleaved,a===null?(e.next=e,Xd(s)):(e.next=a.next,a.next=e),s.interleaved=e,On(t,r)}function $a(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,kd(t,r)}}function Nf(t,e){var r=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var h={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=h:l=l.next=h,r=r.next}while(r!==null);l===null?a=l=e:l=l.next=e}else a=l=e;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:s.shared,effects:s.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ml(t,e,r,s){var a=t.updateQueue;Gn=!1;var l=a.firstBaseUpdate,h=a.lastBaseUpdate,w=a.shared.pending;if(w!==null){a.shared.pending=null;var g=w,p=g.next;g.next=null,h===null?l=p:h.next=p,h=g;var y=t.alternate;y!==null&&(y=y.updateQueue,w=y.lastBaseUpdate,w!==h&&(w===null?y.firstBaseUpdate=p:w.next=p,y.lastBaseUpdate=g))}if(l!==null){var v=a.baseState;h=0,y=p=g=null,w=l;do{var _=w.lane,T=w.eventTime;if((s&_)===_){y!==null&&(y=y.next={eventTime:T,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var N=t,B=w;switch(_=e,T=r,B.tag){case 1:if(N=B.payload,typeof N=="function"){v=N.call(T,v,_);break e}v=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=B.payload,_=typeof N=="function"?N.call(T,v,_):N,_==null)break e;v=Et({},v,_);break e;case 2:Gn=!0}}w.callback!==null&&w.lane!==0&&(t.flags|=64,_=a.effects,_===null?a.effects=[w]:_.push(w))}else T={eventTime:T,lane:_,tag:w.tag,payload:w.payload,callback:w.callback,next:null},y===null?(p=y=T,g=v):y=y.next=T,h|=_;if(w=w.next,w===null){if(w=a.shared.pending,w===null)break;_=w,w=_.next,_.next=null,a.lastBaseUpdate=_,a.shared.pending=null}}while(!0);if(y===null&&(g=v),a.baseState=g,a.firstBaseUpdate=p,a.lastBaseUpdate=y,e=a.shared.interleaved,e!==null){a=e;do h|=a.lane,a=a.next;while(a!==e)}else l===null&&(a.shared.lanes=0);Fi|=h,t.lanes=h,t.memoizedState=v}}function Of(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(ne(191,a));a.call(s)}}}var ta={},vn=di(ta),Uo=di(ta),Vo=di(ta);function Oi(t){if(t===ta)throw Error(ne(174));return t}function Kd(t,e){switch(ut(Vo,e),ut(Uo,t),ut(vn,ta),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gc(e,t)}ft(vn),ut(vn,e)}function Ds(){ft(vn),ft(Uo),ft(Vo)}function fg(t){Oi(Vo.current);var e=Oi(vn.current),r=gc(e,t.type);e!==r&&(ut(Uo,t),ut(vn,r))}function qd(t){Uo.current===t&&(ft(vn),ft(Uo))}var yt=di(0);function wl(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Uu=[];function Yd(){for(var t=0;t<Uu.length;t++)Uu[t]._workInProgressVersionPrimary=null;Uu.length=0}var Ka=Dn.ReactCurrentDispatcher,Vu=Dn.ReactCurrentBatchConfig,Bi=0,vt=null,Ft=null,Ht=null,xl=!1,Co=!1,zo=0,ux=0;function ir(){throw Error(ne(321))}function Zd(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ln(t[r],e[r]))return!1;return!0}function Qd(t,e,r,s,a,l){if(Bi=l,vt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ka.current=t===null||t.memoizedState===null?fx:gx,t=r(s,a),Co){l=0;do{if(Co=!1,zo=0,25<=l)throw Error(ne(301));l+=1,Ht=Ft=null,e.updateQueue=null,Ka.current=px,t=r(s,a)}while(Co)}if(Ka.current=yl,e=Ft!==null&&Ft.next!==null,Bi=0,Ht=Ft=vt=null,xl=!1,e)throw Error(ne(300));return t}function Jd(){var t=zo!==0;return zo=0,t}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?vt.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function $r(){if(Ft===null){var t=vt.alternate;t=t!==null?t.memoizedState:null}else t=Ft.next;var e=Ht===null?vt.memoizedState:Ht.next;if(e!==null)Ht=e,Ft=t;else{if(t===null)throw Error(ne(310));Ft=t,t={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Ht===null?vt.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function Wo(t,e){return typeof e=="function"?e(t):e}function zu(t){var e=$r(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var s=Ft,a=s.baseQueue,l=r.pending;if(l!==null){if(a!==null){var h=a.next;a.next=l.next,l.next=h}s.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,s=s.baseState;var w=h=null,g=null,p=l;do{var y=p.lane;if((Bi&y)===y)g!==null&&(g=g.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),s=p.hasEagerState?p.eagerState:t(s,p.action);else{var v={lane:y,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};g===null?(w=g=v,h=s):g=g.next=v,vt.lanes|=y,Fi|=y}p=p.next}while(p!==null&&p!==l);g===null?h=s:g.next=w,ln(s,e.memoizedState)||(_r=!0),e.memoizedState=s,e.baseState=h,e.baseQueue=g,r.lastRenderedState=s}if(t=r.interleaved,t!==null){a=t;do l=a.lane,vt.lanes|=l,Fi|=l,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Wu(t){var e=$r(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var s=r.dispatch,a=r.pending,l=e.memoizedState;if(a!==null){r.pending=null;var h=a=a.next;do l=t(l,h.action),h=h.next;while(h!==a);ln(l,e.memoizedState)||(_r=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),r.lastRenderedState=l}return[l,s]}function gg(){}function pg(t,e){var r=vt,s=$r(),a=e(),l=!ln(s.memoizedState,a);if(l&&(s.memoizedState=a,_r=!0),s=s.queue,eh(xg.bind(null,r,s,t),[t]),s.getSnapshot!==e||l||Ht!==null&&Ht.memoizedState.tag&1){if(r.flags|=2048,Ho(9,wg.bind(null,r,s,a,e),void 0,null),Xt===null)throw Error(ne(349));Bi&30||mg(r,e,a)}return a}function mg(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function wg(t,e,r,s){e.value=r,e.getSnapshot=s,yg(e)&&vg(t)}function xg(t,e,r){return r(function(){yg(e)&&vg(t)})}function yg(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ln(t,r)}catch{return!0}}function vg(t){var e=On(t,1);e!==null&&an(e,t,1,-1)}function kf(t){var e=mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:t},e.queue=t,t=t.dispatch=hx.bind(null,vt,t),[e.memoizedState,t]}function Ho(t,e,r,s){return t={tag:t,create:e,destroy:r,deps:s,next:null},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(s=r.next,r.next=t,t.next=s,e.lastEffect=t)),t}function Eg(){return $r().memoizedState}function qa(t,e,r,s){var a=mn();vt.flags|=t,a.memoizedState=Ho(1|e,r,void 0,s===void 0?null:s)}function Wl(t,e,r,s){var a=$r();s=s===void 0?null:s;var l=void 0;if(Ft!==null){var h=Ft.memoizedState;if(l=h.destroy,s!==null&&Zd(s,h.deps)){a.memoizedState=Ho(e,r,l,s);return}}vt.flags|=t,a.memoizedState=Ho(1|e,r,l,s)}function Pf(t,e){return qa(8390656,8,t,e)}function eh(t,e){return Wl(2048,8,t,e)}function _g(t,e){return Wl(4,2,t,e)}function Cg(t,e){return Wl(4,4,t,e)}function Ag(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bg(t,e,r){return r=r!=null?r.concat([t]):null,Wl(4,4,Ag.bind(null,e,t),r)}function th(){}function Sg(t,e){var r=$r();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Zd(e,s[1])?s[0]:(r.memoizedState=[t,e],t)}function Ig(t,e){var r=$r();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Zd(e,s[1])?s[0]:(t=t(),r.memoizedState=[t,e],t)}function Tg(t,e,r){return Bi&21?(ln(r,e)||(r=P1(),vt.lanes|=r,Fi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_r=!0),t.memoizedState=r)}function cx(t,e){var r=Qe;Qe=r!==0&&4>r?r:4,t(!0);var s=Vu.transition;Vu.transition={};try{t(!1),e()}finally{Qe=r,Vu.transition=s}}function Rg(){return $r().memoizedState}function dx(t,e,r){var s=si(t);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Ng(t))Og(e,r);else if(r=dg(t,e,r,s),r!==null){var a=hr();an(r,t,s,a),kg(r,e,s)}}function hx(t,e,r){var s=si(t),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ng(t))Og(e,a);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var h=e.lastRenderedState,w=l(h,r);if(a.hasEagerState=!0,a.eagerState=w,ln(w,h)){var g=e.interleaved;g===null?(a.next=a,Xd(e)):(a.next=g.next,g.next=a),e.interleaved=a;return}}catch{}finally{}r=dg(t,e,a,s),r!==null&&(a=hr(),an(r,t,s,a),kg(r,e,s))}}function Ng(t){var e=t.alternate;return t===vt||e!==null&&e===vt}function Og(t,e){Co=xl=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function kg(t,e,r){if(r&4194240){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,kd(t,r)}}var yl={readContext:Xr,useCallback:ir,useContext:ir,useEffect:ir,useImperativeHandle:ir,useInsertionEffect:ir,useLayoutEffect:ir,useMemo:ir,useReducer:ir,useRef:ir,useState:ir,useDebugValue:ir,useDeferredValue:ir,useTransition:ir,useMutableSource:ir,useSyncExternalStore:ir,useId:ir,unstable_isNewReconciler:!1},fx={readContext:Xr,useCallback:function(t,e){return mn().memoizedState=[t,e===void 0?null:e],t},useContext:Xr,useEffect:Pf,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,qa(4194308,4,Ag.bind(null,e,t),r)},useLayoutEffect:function(t,e){return qa(4194308,4,t,e)},useInsertionEffect:function(t,e){return qa(4,2,t,e)},useMemo:function(t,e){var r=mn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var s=mn();return e=r!==void 0?r(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=dx.bind(null,vt,t),[s.memoizedState,t]},useRef:function(t){var e=mn();return t={current:t},e.memoizedState=t},useState:kf,useDebugValue:th,useDeferredValue:function(t){return mn().memoizedState=t},useTransition:function(){var t=kf(!1),e=t[0];return t=cx.bind(null,t[1]),mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var s=vt,a=mn();if(mt){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=e(),Xt===null)throw Error(ne(349));Bi&30||mg(s,e,r)}a.memoizedState=r;var l={value:r,getSnapshot:e};return a.queue=l,Pf(xg.bind(null,s,l,t),[t]),s.flags|=2048,Ho(9,wg.bind(null,s,l,r,e),void 0,null),r},useId:function(){var t=mn(),e=Xt.identifierPrefix;if(mt){var r=In,s=Sn;r=(s&~(1<<32-on(s)-1)).toString(32)+r,e=":"+e+"R"+r,r=zo++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=ux++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gx={readContext:Xr,useCallback:Sg,useContext:Xr,useEffect:eh,useImperativeHandle:bg,useInsertionEffect:_g,useLayoutEffect:Cg,useMemo:Ig,useReducer:zu,useRef:Eg,useState:function(){return zu(Wo)},useDebugValue:th,useDeferredValue:function(t){var e=$r();return Tg(e,Ft.memoizedState,t)},useTransition:function(){var t=zu(Wo)[0],e=$r().memoizedState;return[t,e]},useMutableSource:gg,useSyncExternalStore:pg,useId:Rg,unstable_isNewReconciler:!1},px={readContext:Xr,useCallback:Sg,useContext:Xr,useEffect:eh,useImperativeHandle:bg,useInsertionEffect:_g,useLayoutEffect:Cg,useMemo:Ig,useReducer:Wu,useRef:Eg,useState:function(){return Wu(Wo)},useDebugValue:th,useDeferredValue:function(t){var e=$r();return Ft===null?e.memoizedState=t:Tg(e,Ft.memoizedState,t)},useTransition:function(){var t=Wu(Wo)[0],e=$r().memoizedState;return[t,e]},useMutableSource:gg,useSyncExternalStore:pg,useId:Rg,unstable_isNewReconciler:!1};function tn(t,e){if(t&&t.defaultProps){e=Et({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Mc(t,e,r,s){e=t.memoizedState,r=r(s,e),r=r==null?e:Et({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Hl={isMounted:function(t){return(t=t._reactInternals)?zi(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var s=hr(),a=si(t),l=Tn(s,a);l.payload=e,r!=null&&(l.callback=r),e=ni(t,l,a),e!==null&&(an(e,t,a,s),$a(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var s=hr(),a=si(t),l=Tn(s,a);l.tag=1,l.payload=e,r!=null&&(l.callback=r),e=ni(t,l,a),e!==null&&(an(e,t,a,s),$a(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=hr(),s=si(t),a=Tn(r,s);a.tag=2,e!=null&&(a.callback=e),e=ni(t,a,s),e!==null&&(an(e,t,s,r),$a(e,t,s))}};function Df(t,e,r,s,a,l,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,l,h):e.prototype&&e.prototype.isPureReactComponent?!Lo(r,s)||!Lo(a,l):!0}function Pg(t,e,r){var s=!1,a=ui,l=e.contextType;return typeof l=="object"&&l!==null?l=Xr(l):(a=Ar(e)?Mi:ar.current,s=e.contextTypes,l=(s=s!=null)?Os(t,a):ui),e=new e(r,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hl,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=l),e}function Mf(t,e,r,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,s),e.state!==t&&Hl.enqueueReplaceState(e,e.state,null)}function Lc(t,e,r,s){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},$d(t);var l=e.contextType;typeof l=="object"&&l!==null?a.context=Xr(l):(l=Ar(e)?Mi:ar.current,a.context=Os(t,l)),a.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(Mc(t,e,l,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Hl.enqueueReplaceState(a,a.state,null),ml(t,r,a,s),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Ms(t,e){try{var r="",s=e;do r+=W2(s),s=s.return;while(s);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:a,digest:null}}function Hu(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Bc(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var mx=typeof WeakMap=="function"?WeakMap:Map;function Dg(t,e,r){r=Tn(-1,r),r.tag=3,r.payload={element:null};var s=e.value;return r.callback=function(){El||(El=!0,$c=s),Bc(t,e)},r}function Mg(t,e,r){r=Tn(-1,r),r.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var a=e.value;r.payload=function(){return s(a)},r.callback=function(){Bc(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Bc(t,e),typeof s!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var h=e.stack;this.componentDidCatch(e.value,{componentStack:h!==null?h:""})}),r}function Lf(t,e,r){var s=t.pingCache;if(s===null){s=t.pingCache=new mx;var a=new Set;s.set(e,a)}else a=s.get(e),a===void 0&&(a=new Set,s.set(e,a));a.has(r)||(a.add(r),t=Nx.bind(null,t,e,r),e.then(t,t))}function Bf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ff(t,e,r,s,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Tn(-1,1),e.tag=2,ni(r,e,1))),r.lanes|=1),t)}var wx=Dn.ReactCurrentOwner,_r=!1;function cr(t,e,r,s){e.child=t===null?cg(e,null,r,s):Ps(e,t.child,r,s)}function jf(t,e,r,s,a){r=r.render;var l=e.ref;return Is(e,a),s=Qd(t,e,r,s,l,a),r=Jd(),t!==null&&!_r?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,kn(t,e,a)):(mt&&r&&Ud(e),e.flags|=1,cr(t,e,s,a),e.child)}function Uf(t,e,r,s,a){if(t===null){var l=r.type;return typeof l=="function"&&!uh(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=l,Lg(t,e,l,s,a)):(t=Ja(r.type,null,s,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&a)){var h=l.memoizedProps;if(r=r.compare,r=r!==null?r:Lo,r(h,s)&&t.ref===e.ref)return kn(t,e,a)}return e.flags|=1,t=oi(l,s),t.ref=e.ref,t.return=e,e.child=t}function Lg(t,e,r,s,a){if(t!==null){var l=t.memoizedProps;if(Lo(l,s)&&t.ref===e.ref)if(_r=!1,e.pendingProps=s=l,(t.lanes&a)!==0)t.flags&131072&&(_r=!0);else return e.lanes=t.lanes,kn(t,e,a)}return Fc(t,e,r,s,a)}function Bg(t,e,r){var s=e.pendingProps,a=s.children,l=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(Es,Tr),Tr|=r;else{if(!(r&1073741824))return t=l!==null?l.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ut(Es,Tr),Tr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=l!==null?l.baseLanes:r,ut(Es,Tr),Tr|=s}else l!==null?(s=l.baseLanes|r,e.memoizedState=null):s=r,ut(Es,Tr),Tr|=s;return cr(t,e,a,r),e.child}function Fg(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Fc(t,e,r,s,a){var l=Ar(r)?Mi:ar.current;return l=Os(e,l),Is(e,a),r=Qd(t,e,r,s,l,a),s=Jd(),t!==null&&!_r?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,kn(t,e,a)):(mt&&s&&Ud(e),e.flags|=1,cr(t,e,r,a),e.child)}function Vf(t,e,r,s,a){if(Ar(r)){var l=!0;dl(e)}else l=!1;if(Is(e,a),e.stateNode===null)Ya(t,e),Pg(e,r,s),Lc(e,r,s,a),s=!0;else if(t===null){var h=e.stateNode,w=e.memoizedProps;h.props=w;var g=h.context,p=r.contextType;typeof p=="object"&&p!==null?p=Xr(p):(p=Ar(r)?Mi:ar.current,p=Os(e,p));var y=r.getDerivedStateFromProps,v=typeof y=="function"||typeof h.getSnapshotBeforeUpdate=="function";v||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(w!==s||g!==p)&&Mf(e,h,s,p),Gn=!1;var _=e.memoizedState;h.state=_,ml(e,s,h,a),g=e.memoizedState,w!==s||_!==g||Cr.current||Gn?(typeof y=="function"&&(Mc(e,r,y,s),g=e.memoizedState),(w=Gn||Df(e,r,w,s,_,g,p))?(v||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(e.flags|=4194308)):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=g),h.props=s,h.state=g,h.context=p,s=w):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{h=e.stateNode,hg(t,e),w=e.memoizedProps,p=e.type===e.elementType?w:tn(e.type,w),h.props=p,v=e.pendingProps,_=h.context,g=r.contextType,typeof g=="object"&&g!==null?g=Xr(g):(g=Ar(r)?Mi:ar.current,g=Os(e,g));var T=r.getDerivedStateFromProps;(y=typeof T=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(w!==v||_!==g)&&Mf(e,h,s,g),Gn=!1,_=e.memoizedState,h.state=_,ml(e,s,h,a);var N=e.memoizedState;w!==v||_!==N||Cr.current||Gn?(typeof T=="function"&&(Mc(e,r,T,s),N=e.memoizedState),(p=Gn||Df(e,r,p,s,_,N,g)||!1)?(y||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(s,N,g),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(s,N,g)),typeof h.componentDidUpdate=="function"&&(e.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof h.componentDidUpdate!="function"||w===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=N),h.props=s,h.state=N,h.context=g,s=p):(typeof h.componentDidUpdate!="function"||w===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),s=!1)}return jc(t,e,r,s,l,a)}function jc(t,e,r,s,a,l){Fg(t,e);var h=(e.flags&128)!==0;if(!s&&!h)return a&&Sf(e,r,!1),kn(t,e,l);s=e.stateNode,wx.current=e;var w=h&&typeof r.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&h?(e.child=Ps(e,t.child,null,l),e.child=Ps(e,null,w,l)):cr(t,e,w,l),e.memoizedState=s.state,a&&Sf(e,r,!0),e.child}function jg(t){var e=t.stateNode;e.pendingContext?bf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bf(t,e.context,!1),Kd(t,e.containerInfo)}function zf(t,e,r,s,a){return ks(),zd(a),e.flags|=256,cr(t,e,r,s),e.child}var Uc={dehydrated:null,treeContext:null,retryLane:0};function Vc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ug(t,e,r){var s=e.pendingProps,a=yt.current,l=!1,h=(e.flags&128)!==0,w;if((w=h)||(w=t!==null&&t.memoizedState===null?!1:(a&2)!==0),w?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),ut(yt,a&1),t===null)return Pc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(h=s.children,t=s.fallback,l?(s=e.mode,l=e.child,h={mode:"hidden",children:h},!(s&1)&&l!==null?(l.childLanes=0,l.pendingProps=h):l=$l(h,s,0,null),t=Di(t,s,r,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=Vc(r),e.memoizedState=Uc,t):rh(e,h));if(a=t.memoizedState,a!==null&&(w=a.dehydrated,w!==null))return xx(t,e,h,s,w,a,r);if(l){l=s.fallback,h=e.mode,a=t.child,w=a.sibling;var g={mode:"hidden",children:s.children};return!(h&1)&&e.child!==a?(s=e.child,s.childLanes=0,s.pendingProps=g,e.deletions=null):(s=oi(a,g),s.subtreeFlags=a.subtreeFlags&14680064),w!==null?l=oi(w,l):(l=Di(l,h,r,null),l.flags|=2),l.return=e,s.return=e,s.sibling=l,e.child=s,s=l,l=e.child,h=t.child.memoizedState,h=h===null?Vc(r):{baseLanes:h.baseLanes|r,cachePool:null,transitions:h.transitions},l.memoizedState=h,l.childLanes=t.childLanes&~r,e.memoizedState=Uc,s}return l=t.child,t=l.sibling,s=oi(l,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=r),s.return=e,s.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=s,e.memoizedState=null,s}function rh(t,e){return e=$l({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ia(t,e,r,s){return s!==null&&zd(s),Ps(e,t.child,null,r),t=rh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xx(t,e,r,s,a,l,h){if(r)return e.flags&256?(e.flags&=-257,s=Hu(Error(ne(422))),Ia(t,e,h,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=s.fallback,a=e.mode,s=$l({mode:"visible",children:s.children},a,0,null),l=Di(l,a,h,null),l.flags|=2,s.return=e,l.return=e,s.sibling=l,e.child=s,e.mode&1&&Ps(e,t.child,null,h),e.child.memoizedState=Vc(h),e.memoizedState=Uc,l);if(!(e.mode&1))return Ia(t,e,h,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var w=s.dgst;return s=w,l=Error(ne(419)),s=Hu(l,s,void 0),Ia(t,e,h,s)}if(w=(h&t.childLanes)!==0,_r||w){if(s=Xt,s!==null){switch(h&-h){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|h)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,On(t,a),an(s,t,a,-1))}return lh(),s=Hu(Error(ne(421))),Ia(t,e,h,s)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Ox.bind(null,t),a._reactRetry=e,null):(t=l.treeContext,Or=ri(a.nextSibling),kr=e,mt=!0,sn=null,t!==null&&(zr[Wr++]=Sn,zr[Wr++]=In,zr[Wr++]=Li,Sn=t.id,In=t.overflow,Li=e),e=rh(e,s.children),e.flags|=4096,e)}function Wf(t,e,r){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Dc(t.return,e,r)}function Gu(t,e,r,s,a){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=s,l.tail=r,l.tailMode=a)}function Vg(t,e,r){var s=e.pendingProps,a=s.revealOrder,l=s.tail;if(cr(t,e,s.children,r),s=yt.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wf(t,r,e);else if(t.tag===19)Wf(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(ut(yt,s),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&wl(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),Gu(e,!1,a,r,l);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&wl(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}Gu(e,!0,r,null,l);break;case"together":Gu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ya(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Fi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,r=oi(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=oi(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function yx(t,e,r){switch(e.tag){case 3:jg(e),ks();break;case 5:fg(e);break;case 1:Ar(e.type)&&dl(e);break;case 4:Kd(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,a=e.memoizedProps.value;ut(gl,s._currentValue),s._currentValue=a;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(ut(yt,yt.current&1),e.flags|=128,null):r&e.child.childLanes?Ug(t,e,r):(ut(yt,yt.current&1),t=kn(t,e,r),t!==null?t.sibling:null);ut(yt,yt.current&1);break;case 19:if(s=(r&e.childLanes)!==0,t.flags&128){if(s)return Vg(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ut(yt,yt.current),s)break;return null;case 22:case 23:return e.lanes=0,Bg(t,e,r)}return kn(t,e,r)}var zg,zc,Wg,Hg;zg=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};zc=function(){};Wg=function(t,e,r,s){var a=t.memoizedProps;if(a!==s){t=e.stateNode,Oi(vn.current);var l=null;switch(r){case"input":a=cc(t,a),s=cc(t,s),l=[];break;case"select":a=Et({},a,{value:void 0}),s=Et({},s,{value:void 0}),l=[];break;case"textarea":a=fc(t,a),s=fc(t,s),l=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=ul)}pc(r,s);var h;r=null;for(p in a)if(!s.hasOwnProperty(p)&&a.hasOwnProperty(p)&&a[p]!=null)if(p==="style"){var w=a[p];for(h in w)w.hasOwnProperty(h)&&(r||(r={}),r[h]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Ro.hasOwnProperty(p)?l||(l=[]):(l=l||[]).push(p,null));for(p in s){var g=s[p];if(w=a!=null?a[p]:void 0,s.hasOwnProperty(p)&&g!==w&&(g!=null||w!=null))if(p==="style")if(w){for(h in w)!w.hasOwnProperty(h)||g&&g.hasOwnProperty(h)||(r||(r={}),r[h]="");for(h in g)g.hasOwnProperty(h)&&w[h]!==g[h]&&(r||(r={}),r[h]=g[h])}else r||(l||(l=[]),l.push(p,r)),r=g;else p==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,w=w?w.__html:void 0,g!=null&&w!==g&&(l=l||[]).push(p,g)):p==="children"?typeof g!="string"&&typeof g!="number"||(l=l||[]).push(p,""+g):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Ro.hasOwnProperty(p)?(g!=null&&p==="onScroll"&&dt("scroll",t),l||w===g||(l=[])):(l=l||[]).push(p,g))}r&&(l=l||[]).push("style",r);var p=l;(e.updateQueue=p)&&(e.flags|=4)}};Hg=function(t,e,r,s){r!==s&&(e.flags|=4)};function lo(t,e){if(!mt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function sr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,s=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=s,t.childLanes=r,e}function vx(t,e,r){var s=e.pendingProps;switch(Vd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sr(e),null;case 1:return Ar(e.type)&&cl(),sr(e),null;case 3:return s=e.stateNode,Ds(),ft(Cr),ft(ar),Yd(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(ba(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sn!==null&&(Yc(sn),sn=null))),zc(t,e),sr(e),null;case 5:qd(e);var a=Oi(Vo.current);if(r=e.type,t!==null&&e.stateNode!=null)Wg(t,e,r,s,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(ne(166));return sr(e),null}if(t=Oi(vn.current),ba(e)){s=e.stateNode,r=e.type;var l=e.memoizedProps;switch(s[wn]=e,s[jo]=l,t=(e.mode&1)!==0,r){case"dialog":dt("cancel",s),dt("close",s);break;case"iframe":case"object":case"embed":dt("load",s);break;case"video":case"audio":for(a=0;a<po.length;a++)dt(po[a],s);break;case"source":dt("error",s);break;case"img":case"image":case"link":dt("error",s),dt("load",s);break;case"details":dt("toggle",s);break;case"input":Zh(s,l),dt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!l.multiple},dt("invalid",s);break;case"textarea":Jh(s,l),dt("invalid",s)}pc(r,l),a=null;for(var h in l)if(l.hasOwnProperty(h)){var w=l[h];h==="children"?typeof w=="string"?s.textContent!==w&&(l.suppressHydrationWarning!==!0&&Aa(s.textContent,w,t),a=["children",w]):typeof w=="number"&&s.textContent!==""+w&&(l.suppressHydrationWarning!==!0&&Aa(s.textContent,w,t),a=["children",""+w]):Ro.hasOwnProperty(h)&&w!=null&&h==="onScroll"&&dt("scroll",s)}switch(r){case"input":ma(s),Qh(s,l,!0);break;case"textarea":ma(s),ef(s);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(s.onclick=ul)}s=a,e.updateQueue=s,s!==null&&(e.flags|=4)}else{h=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=x1(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=h.createElement(r,{is:s.is}):(t=h.createElement(r),r==="select"&&(h=t,s.multiple?h.multiple=!0:s.size&&(h.size=s.size))):t=h.createElementNS(t,r),t[wn]=e,t[jo]=s,zg(t,e,!1,!1),e.stateNode=t;e:{switch(h=mc(r,s),r){case"dialog":dt("cancel",t),dt("close",t),a=s;break;case"iframe":case"object":case"embed":dt("load",t),a=s;break;case"video":case"audio":for(a=0;a<po.length;a++)dt(po[a],t);a=s;break;case"source":dt("error",t),a=s;break;case"img":case"image":case"link":dt("error",t),dt("load",t),a=s;break;case"details":dt("toggle",t),a=s;break;case"input":Zh(t,s),a=cc(t,s),dt("invalid",t);break;case"option":a=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},a=Et({},s,{value:void 0}),dt("invalid",t);break;case"textarea":Jh(t,s),a=fc(t,s),dt("invalid",t);break;default:a=s}pc(r,a),w=a;for(l in w)if(w.hasOwnProperty(l)){var g=w[l];l==="style"?E1(t,g):l==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&y1(t,g)):l==="children"?typeof g=="string"?(r!=="textarea"||g!=="")&&No(t,g):typeof g=="number"&&No(t,""+g):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ro.hasOwnProperty(l)?g!=null&&l==="onScroll"&&dt("scroll",t):g!=null&&Sd(t,l,g,h))}switch(r){case"input":ma(t),Qh(t,s,!1);break;case"textarea":ma(t),ef(t);break;case"option":s.value!=null&&t.setAttribute("value",""+li(s.value));break;case"select":t.multiple=!!s.multiple,l=s.value,l!=null?Cs(t,!!s.multiple,l,!1):s.defaultValue!=null&&Cs(t,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=ul)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return sr(e),null;case 6:if(t&&e.stateNode!=null)Hg(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(ne(166));if(r=Oi(Vo.current),Oi(vn.current),ba(e)){if(s=e.stateNode,r=e.memoizedProps,s[wn]=e,(l=s.nodeValue!==r)&&(t=kr,t!==null))switch(t.tag){case 3:Aa(s.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Aa(s.nodeValue,r,(t.mode&1)!==0)}l&&(e.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[wn]=e,e.stateNode=s}return sr(e),null;case 13:if(ft(yt),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(mt&&Or!==null&&e.mode&1&&!(e.flags&128))lg(),ks(),e.flags|=98560,l=!1;else if(l=ba(e),s!==null&&s.dehydrated!==null){if(t===null){if(!l)throw Error(ne(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ne(317));l[wn]=e}else ks(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;sr(e),l=!1}else sn!==null&&(Yc(sn),sn=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||yt.current&1?Ut===0&&(Ut=3):lh())),e.updateQueue!==null&&(e.flags|=4),sr(e),null);case 4:return Ds(),zc(t,e),t===null&&Bo(e.stateNode.containerInfo),sr(e),null;case 10:return Gd(e.type._context),sr(e),null;case 17:return Ar(e.type)&&cl(),sr(e),null;case 19:if(ft(yt),l=e.memoizedState,l===null)return sr(e),null;if(s=(e.flags&128)!==0,h=l.rendering,h===null)if(s)lo(l,!1);else{if(Ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(h=wl(t),h!==null){for(e.flags|=128,lo(l,!1),s=h.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=r,r=e.child;r!==null;)l=r,t=s,l.flags&=14680066,h=l.alternate,h===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,t=h.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ut(yt,yt.current&1|2),e.child}t=t.sibling}l.tail!==null&&Rt()>Ls&&(e.flags|=128,s=!0,lo(l,!1),e.lanes=4194304)}else{if(!s)if(t=wl(h),t!==null){if(e.flags|=128,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),lo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!mt)return sr(e),null}else 2*Rt()-l.renderingStartTime>Ls&&r!==1073741824&&(e.flags|=128,s=!0,lo(l,!1),e.lanes=4194304);l.isBackwards?(h.sibling=e.child,e.child=h):(r=l.last,r!==null?r.sibling=h:e.child=h,l.last=h)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Rt(),e.sibling=null,r=yt.current,ut(yt,s?r&1|2:r&1),e):(sr(e),null);case 22:case 23:return ah(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Tr&1073741824&&(sr(e),e.subtreeFlags&6&&(e.flags|=8192)):sr(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function Ex(t,e){switch(Vd(e),e.tag){case 1:return Ar(e.type)&&cl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ds(),ft(Cr),ft(ar),Yd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qd(e),null;case 13:if(ft(yt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));ks()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ft(yt),null;case 4:return Ds(),null;case 10:return Gd(e.type._context),null;case 22:case 23:return ah(),null;case 24:return null;default:return null}}var Ta=!1,or=!1,_x=typeof WeakSet=="function"?WeakSet:Set,pe=null;function vs(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){St(t,e,s)}else r.current=null}function Wc(t,e,r){try{r()}catch(s){St(t,e,s)}}var Hf=!1;function Cx(t,e){if(Sc=ol,t=q1(),jd(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var h=0,w=-1,g=-1,p=0,y=0,v=t,_=null;t:for(;;){for(var T;v!==r||a!==0&&v.nodeType!==3||(w=h+a),v!==l||s!==0&&v.nodeType!==3||(g=h+s),v.nodeType===3&&(h+=v.nodeValue.length),(T=v.firstChild)!==null;)_=v,v=T;for(;;){if(v===t)break t;if(_===r&&++p===a&&(w=h),_===l&&++y===s&&(g=h),(T=v.nextSibling)!==null)break;v=_,_=v.parentNode}v=T}r=w===-1||g===-1?null:{start:w,end:g}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ic={focusedElem:t,selectionRange:r},ol=!1,pe=e;pe!==null;)if(e=pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,pe=t;else for(;pe!==null;){e=pe;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var B=N.memoizedProps,F=N.memoizedState,k=e.stateNode,I=k.getSnapshotBeforeUpdate(e.elementType===e.type?B:tn(e.type,B),F);k.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(P){St(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,pe=t;break}pe=e.return}return N=Hf,Hf=!1,N}function Ao(t,e,r){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&t)===t){var l=a.destroy;a.destroy=void 0,l!==void 0&&Wc(e,r,l)}a=a.next}while(a!==s)}}function Gl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var s=r.create;r.destroy=s()}r=r.next}while(r!==e)}}function Hc(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Gg(t){var e=t.alternate;e!==null&&(t.alternate=null,Gg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wn],delete e[jo],delete e[Nc],delete e[sx],delete e[ox])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xg(t){return t.tag===5||t.tag===3||t.tag===4}function Gf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gc(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ul));else if(s!==4&&(t=t.child,t!==null))for(Gc(t,e,r),t=t.sibling;t!==null;)Gc(t,e,r),t=t.sibling}function Xc(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Xc(t,e,r),t=t.sibling;t!==null;)Xc(t,e,r),t=t.sibling}var Jt=null,nn=!1;function zn(t,e,r){for(r=r.child;r!==null;)$g(t,e,r),r=r.sibling}function $g(t,e,r){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(Bl,r)}catch{}switch(r.tag){case 5:or||vs(r,e);case 6:var s=Jt,a=nn;Jt=null,zn(t,e,r),Jt=s,nn=a,Jt!==null&&(nn?(t=Jt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Jt.removeChild(r.stateNode));break;case 18:Jt!==null&&(nn?(t=Jt,r=r.stateNode,t.nodeType===8?Fu(t.parentNode,r):t.nodeType===1&&Fu(t,r),Do(t)):Fu(Jt,r.stateNode));break;case 4:s=Jt,a=nn,Jt=r.stateNode.containerInfo,nn=!0,zn(t,e,r),Jt=s,nn=a;break;case 0:case 11:case 14:case 15:if(!or&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var l=a,h=l.destroy;l=l.tag,h!==void 0&&(l&2||l&4)&&Wc(r,e,h),a=a.next}while(a!==s)}zn(t,e,r);break;case 1:if(!or&&(vs(r,e),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(w){St(r,e,w)}zn(t,e,r);break;case 21:zn(t,e,r);break;case 22:r.mode&1?(or=(s=or)||r.memoizedState!==null,zn(t,e,r),or=s):zn(t,e,r);break;default:zn(t,e,r)}}function Xf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new _x),e.forEach(function(s){var a=kx.bind(null,t,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Zr(t,e){var r=e.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var l=t,h=e,w=h;e:for(;w!==null;){switch(w.tag){case 5:Jt=w.stateNode,nn=!1;break e;case 3:Jt=w.stateNode.containerInfo,nn=!0;break e;case 4:Jt=w.stateNode.containerInfo,nn=!0;break e}w=w.return}if(Jt===null)throw Error(ne(160));$g(l,h,a),Jt=null,nn=!1;var g=a.alternate;g!==null&&(g.return=null),a.return=null}catch(p){St(a,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Kg(e,t),e=e.sibling}function Kg(t,e){var r=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zr(e,t),pn(t),s&4){try{Ao(3,t,t.return),Gl(3,t)}catch(B){St(t,t.return,B)}try{Ao(5,t,t.return)}catch(B){St(t,t.return,B)}}break;case 1:Zr(e,t),pn(t),s&512&&r!==null&&vs(r,r.return);break;case 5:if(Zr(e,t),pn(t),s&512&&r!==null&&vs(r,r.return),t.flags&32){var a=t.stateNode;try{No(a,"")}catch(B){St(t,t.return,B)}}if(s&4&&(a=t.stateNode,a!=null)){var l=t.memoizedProps,h=r!==null?r.memoizedProps:l,w=t.type,g=t.updateQueue;if(t.updateQueue=null,g!==null)try{w==="input"&&l.type==="radio"&&l.name!=null&&m1(a,l),mc(w,h);var p=mc(w,l);for(h=0;h<g.length;h+=2){var y=g[h],v=g[h+1];y==="style"?E1(a,v):y==="dangerouslySetInnerHTML"?y1(a,v):y==="children"?No(a,v):Sd(a,y,v,p)}switch(w){case"input":dc(a,l);break;case"textarea":w1(a,l);break;case"select":var _=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var T=l.value;T!=null?Cs(a,!!l.multiple,T,!1):_!==!!l.multiple&&(l.defaultValue!=null?Cs(a,!!l.multiple,l.defaultValue,!0):Cs(a,!!l.multiple,l.multiple?[]:"",!1))}a[jo]=l}catch(B){St(t,t.return,B)}}break;case 6:if(Zr(e,t),pn(t),s&4){if(t.stateNode===null)throw Error(ne(162));a=t.stateNode,l=t.memoizedProps;try{a.nodeValue=l}catch(B){St(t,t.return,B)}}break;case 3:if(Zr(e,t),pn(t),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Do(e.containerInfo)}catch(B){St(t,t.return,B)}break;case 4:Zr(e,t),pn(t);break;case 13:Zr(e,t),pn(t),a=t.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(sh=Rt())),s&4&&Xf(t);break;case 22:if(y=r!==null&&r.memoizedState!==null,t.mode&1?(or=(p=or)||y,Zr(e,t),or=p):Zr(e,t),pn(t),s&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!y&&t.mode&1)for(pe=t,y=t.child;y!==null;){for(v=pe=y;pe!==null;){switch(_=pe,T=_.child,_.tag){case 0:case 11:case 14:case 15:Ao(4,_,_.return);break;case 1:vs(_,_.return);var N=_.stateNode;if(typeof N.componentWillUnmount=="function"){s=_,r=_.return;try{e=s,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(B){St(s,r,B)}}break;case 5:vs(_,_.return);break;case 22:if(_.memoizedState!==null){Kf(v);continue}}T!==null?(T.return=_,pe=T):Kf(v)}y=y.sibling}e:for(y=null,v=t;;){if(v.tag===5){if(y===null){y=v;try{a=v.stateNode,p?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(w=v.stateNode,g=v.memoizedProps.style,h=g!=null&&g.hasOwnProperty("display")?g.display:null,w.style.display=v1("display",h))}catch(B){St(t,t.return,B)}}}else if(v.tag===6){if(y===null)try{v.stateNode.nodeValue=p?"":v.memoizedProps}catch(B){St(t,t.return,B)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;y===v&&(y=null),v=v.return}y===v&&(y=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Zr(e,t),pn(t),s&4&&Xf(t);break;case 21:break;default:Zr(e,t),pn(t)}}function pn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Xg(r)){var s=r;break e}r=r.return}throw Error(ne(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(No(a,""),s.flags&=-33);var l=Gf(t);Xc(t,l,a);break;case 3:case 4:var h=s.stateNode.containerInfo,w=Gf(t);Gc(t,w,h);break;default:throw Error(ne(161))}}catch(g){St(t,t.return,g)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ax(t,e,r){pe=t,qg(t)}function qg(t,e,r){for(var s=(t.mode&1)!==0;pe!==null;){var a=pe,l=a.child;if(a.tag===22&&s){var h=a.memoizedState!==null||Ta;if(!h){var w=a.alternate,g=w!==null&&w.memoizedState!==null||or;w=Ta;var p=or;if(Ta=h,(or=g)&&!p)for(pe=a;pe!==null;)h=pe,g=h.child,h.tag===22&&h.memoizedState!==null?qf(a):g!==null?(g.return=h,pe=g):qf(a);for(;l!==null;)pe=l,qg(l),l=l.sibling;pe=a,Ta=w,or=p}$f(t)}else a.subtreeFlags&8772&&l!==null?(l.return=a,pe=l):$f(t)}}function $f(t){for(;pe!==null;){var e=pe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:or||Gl(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!or)if(r===null)s.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:tn(e.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&Of(e,l,s);break;case 3:var h=e.updateQueue;if(h!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Of(e,h,r)}break;case 5:var w=e.stateNode;if(r===null&&e.flags&4){r=w;var g=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&r.focus();break;case"img":g.src&&(r.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var y=p.memoizedState;if(y!==null){var v=y.dehydrated;v!==null&&Do(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}or||e.flags&512&&Hc(e)}catch(_){St(e,e.return,_)}}if(e===t){pe=null;break}if(r=e.sibling,r!==null){r.return=e.return,pe=r;break}pe=e.return}}function Kf(t){for(;pe!==null;){var e=pe;if(e===t){pe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,pe=r;break}pe=e.return}}function qf(t){for(;pe!==null;){var e=pe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Gl(4,e)}catch(g){St(e,r,g)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var a=e.return;try{s.componentDidMount()}catch(g){St(e,a,g)}}var l=e.return;try{Hc(e)}catch(g){St(e,l,g)}break;case 5:var h=e.return;try{Hc(e)}catch(g){St(e,h,g)}}}catch(g){St(e,e.return,g)}if(e===t){pe=null;break}var w=e.sibling;if(w!==null){w.return=e.return,pe=w;break}pe=e.return}}var bx=Math.ceil,vl=Dn.ReactCurrentDispatcher,nh=Dn.ReactCurrentOwner,Gr=Dn.ReactCurrentBatchConfig,Ge=0,Xt=null,Ot=null,er=0,Tr=0,Es=di(0),Ut=0,Go=null,Fi=0,Xl=0,ih=0,bo=null,Er=null,sh=0,Ls=1/0,Cn=null,El=!1,$c=null,ii=null,Ra=!1,Zn=null,_l=0,So=0,Kc=null,Za=-1,Qa=0;function hr(){return Ge&6?Rt():Za!==-1?Za:Za=Rt()}function si(t){return t.mode&1?Ge&2&&er!==0?er&-er:lx.transition!==null?(Qa===0&&(Qa=P1()),Qa):(t=Qe,t!==0||(t=window.event,t=t===void 0?16:U1(t.type)),t):1}function an(t,e,r,s){if(50<So)throw So=0,Kc=null,Error(ne(185));Qo(t,r,s),(!(Ge&2)||t!==Xt)&&(t===Xt&&(!(Ge&2)&&(Xl|=r),Ut===4&&$n(t,er)),br(t,s),r===1&&Ge===0&&!(e.mode&1)&&(Ls=Rt()+500,zl&&hi()))}function br(t,e){var r=t.callbackNode;lw(t,e);var s=sl(t,t===Xt?er:0);if(s===0)r!==null&&nf(r),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(r!=null&&nf(r),e===1)t.tag===0?ax(Yf.bind(null,t)):sg(Yf.bind(null,t)),nx(function(){!(Ge&6)&&hi()}),r=null;else{switch(D1(s)){case 1:r=Od;break;case 4:r=O1;break;case 16:r=il;break;case 536870912:r=k1;break;default:r=il}r=np(r,Yg.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Yg(t,e){if(Za=-1,Qa=0,Ge&6)throw Error(ne(327));var r=t.callbackNode;if(Ts()&&t.callbackNode!==r)return null;var s=sl(t,t===Xt?er:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Cl(t,s);else{e=s;var a=Ge;Ge|=2;var l=Qg();(Xt!==t||er!==e)&&(Cn=null,Ls=Rt()+500,Pi(t,e));do try{Tx();break}catch(w){Zg(t,w)}while(!0);Hd(),vl.current=l,Ge=a,Ot!==null?e=0:(Xt=null,er=0,e=Ut)}if(e!==0){if(e===2&&(a=Ec(t),a!==0&&(s=a,e=qc(t,a))),e===1)throw r=Go,Pi(t,0),$n(t,s),br(t,Rt()),r;if(e===6)$n(t,s);else{if(a=t.current.alternate,!(s&30)&&!Sx(a)&&(e=Cl(t,s),e===2&&(l=Ec(t),l!==0&&(s=l,e=qc(t,l))),e===1))throw r=Go,Pi(t,0),$n(t,s),br(t,Rt()),r;switch(t.finishedWork=a,t.finishedLanes=s,e){case 0:case 1:throw Error(ne(345));case 2:Ai(t,Er,Cn);break;case 3:if($n(t,s),(s&130023424)===s&&(e=sh+500-Rt(),10<e)){if(sl(t,0)!==0)break;if(a=t.suspendedLanes,(a&s)!==s){hr(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Rc(Ai.bind(null,t,Er,Cn),e);break}Ai(t,Er,Cn);break;case 4:if($n(t,s),(s&4194240)===s)break;for(e=t.eventTimes,a=-1;0<s;){var h=31-on(s);l=1<<h,h=e[h],h>a&&(a=h),s&=~l}if(s=a,s=Rt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*bx(s/1960))-s,10<s){t.timeoutHandle=Rc(Ai.bind(null,t,Er,Cn),s);break}Ai(t,Er,Cn);break;case 5:Ai(t,Er,Cn);break;default:throw Error(ne(329))}}}return br(t,Rt()),t.callbackNode===r?Yg.bind(null,t):null}function qc(t,e){var r=bo;return t.current.memoizedState.isDehydrated&&(Pi(t,e).flags|=256),t=Cl(t,e),t!==2&&(e=Er,Er=r,e!==null&&Yc(e)),t}function Yc(t){Er===null?Er=t:Er.push.apply(Er,t)}function Sx(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],l=a.getSnapshot;a=a.value;try{if(!ln(l(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $n(t,e){for(e&=~ih,e&=~Xl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-on(e),s=1<<r;t[r]=-1,e&=~s}}function Yf(t){if(Ge&6)throw Error(ne(327));Ts();var e=sl(t,0);if(!(e&1))return br(t,Rt()),null;var r=Cl(t,e);if(t.tag!==0&&r===2){var s=Ec(t);s!==0&&(e=s,r=qc(t,s))}if(r===1)throw r=Go,Pi(t,0),$n(t,e),br(t,Rt()),r;if(r===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ai(t,Er,Cn),br(t,Rt()),null}function oh(t,e){var r=Ge;Ge|=1;try{return t(e)}finally{Ge=r,Ge===0&&(Ls=Rt()+500,zl&&hi())}}function ji(t){Zn!==null&&Zn.tag===0&&!(Ge&6)&&Ts();var e=Ge;Ge|=1;var r=Gr.transition,s=Qe;try{if(Gr.transition=null,Qe=1,t)return t()}finally{Qe=s,Gr.transition=r,Ge=e,!(Ge&6)&&hi()}}function ah(){Tr=Es.current,ft(Es)}function Pi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,rx(r)),Ot!==null)for(r=Ot.return;r!==null;){var s=r;switch(Vd(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&cl();break;case 3:Ds(),ft(Cr),ft(ar),Yd();break;case 5:qd(s);break;case 4:Ds();break;case 13:ft(yt);break;case 19:ft(yt);break;case 10:Gd(s.type._context);break;case 22:case 23:ah()}r=r.return}if(Xt=t,Ot=t=oi(t.current,null),er=Tr=e,Ut=0,Go=null,ih=Xl=Fi=0,Er=bo=null,Ni!==null){for(e=0;e<Ni.length;e++)if(r=Ni[e],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,l=r.pending;if(l!==null){var h=l.next;l.next=a,s.next=h}r.pending=s}Ni=null}return t}function Zg(t,e){do{var r=Ot;try{if(Hd(),Ka.current=yl,xl){for(var s=vt.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}xl=!1}if(Bi=0,Ht=Ft=vt=null,Co=!1,zo=0,nh.current=null,r===null||r.return===null){Ut=1,Go=e,Ot=null;break}e:{var l=t,h=r.return,w=r,g=e;if(e=er,w.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var p=g,y=w,v=y.tag;if(!(y.mode&1)&&(v===0||v===11||v===15)){var _=y.alternate;_?(y.updateQueue=_.updateQueue,y.memoizedState=_.memoizedState,y.lanes=_.lanes):(y.updateQueue=null,y.memoizedState=null)}var T=Bf(h);if(T!==null){T.flags&=-257,Ff(T,h,w,l,e),T.mode&1&&Lf(l,p,e),e=T,g=p;var N=e.updateQueue;if(N===null){var B=new Set;B.add(g),e.updateQueue=B}else N.add(g);break e}else{if(!(e&1)){Lf(l,p,e),lh();break e}g=Error(ne(426))}}else if(mt&&w.mode&1){var F=Bf(h);if(F!==null){!(F.flags&65536)&&(F.flags|=256),Ff(F,h,w,l,e),zd(Ms(g,w));break e}}l=g=Ms(g,w),Ut!==4&&(Ut=2),bo===null?bo=[l]:bo.push(l),l=h;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var k=Dg(l,g,e);Nf(l,k);break e;case 1:w=g;var I=l.type,b=l.stateNode;if(!(l.flags&128)&&(typeof I.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ii===null||!ii.has(b)))){l.flags|=65536,e&=-e,l.lanes|=e;var P=Mg(l,w,e);Nf(l,P);break e}}l=l.return}while(l!==null)}ep(r)}catch(X){e=X,Ot===r&&r!==null&&(Ot=r=r.return);continue}break}while(!0)}function Qg(){var t=vl.current;return vl.current=yl,t===null?yl:t}function lh(){(Ut===0||Ut===3||Ut===2)&&(Ut=4),Xt===null||!(Fi&268435455)&&!(Xl&268435455)||$n(Xt,er)}function Cl(t,e){var r=Ge;Ge|=2;var s=Qg();(Xt!==t||er!==e)&&(Cn=null,Pi(t,e));do try{Ix();break}catch(a){Zg(t,a)}while(!0);if(Hd(),Ge=r,vl.current=s,Ot!==null)throw Error(ne(261));return Xt=null,er=0,Ut}function Ix(){for(;Ot!==null;)Jg(Ot)}function Tx(){for(;Ot!==null&&!J2();)Jg(Ot)}function Jg(t){var e=rp(t.alternate,t,Tr);t.memoizedProps=t.pendingProps,e===null?ep(t):Ot=e,nh.current=null}function ep(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Ex(r,e),r!==null){r.flags&=32767,Ot=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ut=6,Ot=null;return}}else if(r=vx(r,e,Tr),r!==null){Ot=r;return}if(e=e.sibling,e!==null){Ot=e;return}Ot=e=t}while(e!==null);Ut===0&&(Ut=5)}function Ai(t,e,r){var s=Qe,a=Gr.transition;try{Gr.transition=null,Qe=1,Rx(t,e,r,s)}finally{Gr.transition=a,Qe=s}return null}function Rx(t,e,r,s){do Ts();while(Zn!==null);if(Ge&6)throw Error(ne(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var l=r.lanes|r.childLanes;if(uw(t,l),t===Xt&&(Ot=Xt=null,er=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ra||(Ra=!0,np(il,function(){return Ts(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=Gr.transition,Gr.transition=null;var h=Qe;Qe=1;var w=Ge;Ge|=4,nh.current=null,Cx(t,r),Kg(r,t),qw(Ic),ol=!!Sc,Ic=Sc=null,t.current=r,Ax(r),ew(),Ge=w,Qe=h,Gr.transition=l}else t.current=r;if(Ra&&(Ra=!1,Zn=t,_l=a),l=t.pendingLanes,l===0&&(ii=null),nw(r.stateNode),br(t,Rt()),e!==null)for(s=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(El)throw El=!1,t=$c,$c=null,t;return _l&1&&t.tag!==0&&Ts(),l=t.pendingLanes,l&1?t===Kc?So++:(So=0,Kc=t):So=0,hi(),null}function Ts(){if(Zn!==null){var t=D1(_l),e=Gr.transition,r=Qe;try{if(Gr.transition=null,Qe=16>t?16:t,Zn===null)var s=!1;else{if(t=Zn,Zn=null,_l=0,Ge&6)throw Error(ne(331));var a=Ge;for(Ge|=4,pe=t.current;pe!==null;){var l=pe,h=l.child;if(pe.flags&16){var w=l.deletions;if(w!==null){for(var g=0;g<w.length;g++){var p=w[g];for(pe=p;pe!==null;){var y=pe;switch(y.tag){case 0:case 11:case 15:Ao(8,y,l)}var v=y.child;if(v!==null)v.return=y,pe=v;else for(;pe!==null;){y=pe;var _=y.sibling,T=y.return;if(Gg(y),y===p){pe=null;break}if(_!==null){_.return=T,pe=_;break}pe=T}}}var N=l.alternate;if(N!==null){var B=N.child;if(B!==null){N.child=null;do{var F=B.sibling;B.sibling=null,B=F}while(B!==null)}}pe=l}}if(l.subtreeFlags&2064&&h!==null)h.return=l,pe=h;else e:for(;pe!==null;){if(l=pe,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ao(9,l,l.return)}var k=l.sibling;if(k!==null){k.return=l.return,pe=k;break e}pe=l.return}}var I=t.current;for(pe=I;pe!==null;){h=pe;var b=h.child;if(h.subtreeFlags&2064&&b!==null)b.return=h,pe=b;else e:for(h=I;pe!==null;){if(w=pe,w.flags&2048)try{switch(w.tag){case 0:case 11:case 15:Gl(9,w)}}catch(X){St(w,w.return,X)}if(w===h){pe=null;break e}var P=w.sibling;if(P!==null){P.return=w.return,pe=P;break e}pe=w.return}}if(Ge=a,hi(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(Bl,t)}catch{}s=!0}return s}finally{Qe=r,Gr.transition=e}}return!1}function Zf(t,e,r){e=Ms(r,e),e=Dg(t,e,1),t=ni(t,e,1),e=hr(),t!==null&&(Qo(t,1,e),br(t,e))}function St(t,e,r){if(t.tag===3)Zf(t,t,r);else for(;e!==null;){if(e.tag===3){Zf(e,t,r);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ii===null||!ii.has(s))){t=Ms(r,t),t=Mg(e,t,1),e=ni(e,t,1),t=hr(),e!==null&&(Qo(e,1,t),br(e,t));break}}e=e.return}}function Nx(t,e,r){var s=t.pingCache;s!==null&&s.delete(e),e=hr(),t.pingedLanes|=t.suspendedLanes&r,Xt===t&&(er&r)===r&&(Ut===4||Ut===3&&(er&130023424)===er&&500>Rt()-sh?Pi(t,0):ih|=r),br(t,e)}function tp(t,e){e===0&&(t.mode&1?(e=ya,ya<<=1,!(ya&130023424)&&(ya=4194304)):e=1);var r=hr();t=On(t,e),t!==null&&(Qo(t,e,r),br(t,r))}function Ox(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),tp(t,r)}function kx(t,e){var r=0;switch(t.tag){case 13:var s=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(ne(314))}s!==null&&s.delete(e),tp(t,r)}var rp;rp=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Cr.current)_r=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return _r=!1,yx(t,e,r);_r=!!(t.flags&131072)}else _r=!1,mt&&e.flags&1048576&&og(e,fl,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Ya(t,e),t=e.pendingProps;var a=Os(e,ar.current);Is(e,r),a=Qd(null,e,s,t,a,r);var l=Jd();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ar(s)?(l=!0,dl(e)):l=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,$d(e),a.updater=Hl,e.stateNode=a,a._reactInternals=e,Lc(e,s,t,r),e=jc(null,e,s,!0,l,r)):(e.tag=0,mt&&l&&Ud(e),cr(null,e,a,r),e=e.child),e;case 16:s=e.elementType;e:{switch(Ya(t,e),t=e.pendingProps,a=s._init,s=a(s._payload),e.type=s,a=e.tag=Dx(s),t=tn(s,t),a){case 0:e=Fc(null,e,s,t,r);break e;case 1:e=Vf(null,e,s,t,r);break e;case 11:e=jf(null,e,s,t,r);break e;case 14:e=Uf(null,e,s,tn(s.type,t),r);break e}throw Error(ne(306,s,""))}return e;case 0:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:tn(s,a),Fc(t,e,s,a,r);case 1:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:tn(s,a),Vf(t,e,s,a,r);case 3:e:{if(jg(e),t===null)throw Error(ne(387));s=e.pendingProps,l=e.memoizedState,a=l.element,hg(t,e),ml(e,s,null,r);var h=e.memoizedState;if(s=h.element,l.isDehydrated)if(l={element:s,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){a=Ms(Error(ne(423)),e),e=zf(t,e,s,r,a);break e}else if(s!==a){a=Ms(Error(ne(424)),e),e=zf(t,e,s,r,a);break e}else for(Or=ri(e.stateNode.containerInfo.firstChild),kr=e,mt=!0,sn=null,r=cg(e,null,s,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ks(),s===a){e=kn(t,e,r);break e}cr(t,e,s,r)}e=e.child}return e;case 5:return fg(e),t===null&&Pc(e),s=e.type,a=e.pendingProps,l=t!==null?t.memoizedProps:null,h=a.children,Tc(s,a)?h=null:l!==null&&Tc(s,l)&&(e.flags|=32),Fg(t,e),cr(t,e,h,r),e.child;case 6:return t===null&&Pc(e),null;case 13:return Ug(t,e,r);case 4:return Kd(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ps(e,null,s,r):cr(t,e,s,r),e.child;case 11:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:tn(s,a),jf(t,e,s,a,r);case 7:return cr(t,e,e.pendingProps,r),e.child;case 8:return cr(t,e,e.pendingProps.children,r),e.child;case 12:return cr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(s=e.type._context,a=e.pendingProps,l=e.memoizedProps,h=a.value,ut(gl,s._currentValue),s._currentValue=h,l!==null)if(ln(l.value,h)){if(l.children===a.children&&!Cr.current){e=kn(t,e,r);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var w=l.dependencies;if(w!==null){h=l.child;for(var g=w.firstContext;g!==null;){if(g.context===s){if(l.tag===1){g=Tn(-1,r&-r),g.tag=2;var p=l.updateQueue;if(p!==null){p=p.shared;var y=p.pending;y===null?g.next=g:(g.next=y.next,y.next=g),p.pending=g}}l.lanes|=r,g=l.alternate,g!==null&&(g.lanes|=r),Dc(l.return,r,e),w.lanes|=r;break}g=g.next}}else if(l.tag===10)h=l.type===e.type?null:l.child;else if(l.tag===18){if(h=l.return,h===null)throw Error(ne(341));h.lanes|=r,w=h.alternate,w!==null&&(w.lanes|=r),Dc(h,r,e),h=l.sibling}else h=l.child;if(h!==null)h.return=l;else for(h=l;h!==null;){if(h===e){h=null;break}if(l=h.sibling,l!==null){l.return=h.return,h=l;break}h=h.return}l=h}cr(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,s=e.pendingProps.children,Is(e,r),a=Xr(a),s=s(a),e.flags|=1,cr(t,e,s,r),e.child;case 14:return s=e.type,a=tn(s,e.pendingProps),a=tn(s.type,a),Uf(t,e,s,a,r);case 15:return Lg(t,e,e.type,e.pendingProps,r);case 17:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:tn(s,a),Ya(t,e),e.tag=1,Ar(s)?(t=!0,dl(e)):t=!1,Is(e,r),Pg(e,s,a),Lc(e,s,a,r),jc(null,e,s,!0,t,r);case 19:return Vg(t,e,r);case 22:return Bg(t,e,r)}throw Error(ne(156,e.tag))};function np(t,e){return N1(t,e)}function Px(t,e,r,s){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(t,e,r,s){return new Px(t,e,r,s)}function uh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Dx(t){if(typeof t=="function")return uh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Td)return 11;if(t===Rd)return 14}return 2}function oi(t,e){var r=t.alternate;return r===null?(r=Hr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ja(t,e,r,s,a,l){var h=2;if(s=t,typeof t=="function")uh(t)&&(h=1);else if(typeof t=="string")h=5;else e:switch(t){case ds:return Di(r.children,a,l,e);case Id:h=8,a|=8;break;case oc:return t=Hr(12,r,e,a|2),t.elementType=oc,t.lanes=l,t;case ac:return t=Hr(13,r,e,a),t.elementType=ac,t.lanes=l,t;case lc:return t=Hr(19,r,e,a),t.elementType=lc,t.lanes=l,t;case f1:return $l(r,a,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case d1:h=10;break e;case h1:h=9;break e;case Td:h=11;break e;case Rd:h=14;break e;case Hn:h=16,s=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=Hr(h,r,e,a),e.elementType=t,e.type=s,e.lanes=l,e}function Di(t,e,r,s){return t=Hr(7,t,s,e),t.lanes=r,t}function $l(t,e,r,s){return t=Hr(22,t,s,e),t.elementType=f1,t.lanes=r,t.stateNode={isHidden:!1},t}function Xu(t,e,r){return t=Hr(6,t,null,e),t.lanes=r,t}function $u(t,e,r){return e=Hr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Mx(t,e,r,s,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Iu(0),this.expirationTimes=Iu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Iu(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ch(t,e,r,s,a,l,h,w,g){return t=new Mx(t,e,r,w,g),e===1?(e=1,l===!0&&(e|=8)):e=0,l=Hr(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$d(l),t}function Lx(t,e,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cs,key:s==null?null:""+s,children:t,containerInfo:e,implementation:r}}function ip(t){if(!t)return ui;t=t._reactInternals;e:{if(zi(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ar(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var r=t.type;if(Ar(r))return ig(t,r,e)}return e}function sp(t,e,r,s,a,l,h,w,g){return t=ch(r,s,!0,t,a,l,h,w,g),t.context=ip(null),r=t.current,s=hr(),a=si(r),l=Tn(s,a),l.callback=e??null,ni(r,l,a),t.current.lanes=a,Qo(t,a,s),br(t,s),t}function Kl(t,e,r,s){var a=e.current,l=hr(),h=si(a);return r=ip(r),e.context===null?e.context=r:e.pendingContext=r,e=Tn(l,h),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=ni(a,e,h),t!==null&&(an(t,a,h,l),$a(t,a,h)),h}function Al(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function dh(t,e){Qf(t,e),(t=t.alternate)&&Qf(t,e)}function Bx(){return null}var op=typeof reportError=="function"?reportError:function(t){console.error(t)};function hh(t){this._internalRoot=t}ql.prototype.render=hh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));Kl(t,e,null,null)};ql.prototype.unmount=hh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ji(function(){Kl(null,t,null,null)}),e[Nn]=null}};function ql(t){this._internalRoot=t}ql.prototype.unstable_scheduleHydration=function(t){if(t){var e=B1();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Xn.length&&e!==0&&e<Xn[r].priority;r++);Xn.splice(r,0,t),r===0&&j1(t)}};function fh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jf(){}function Fx(t,e,r,s,a){if(a){if(typeof s=="function"){var l=s;s=function(){var p=Al(h);l.call(p)}}var h=sp(e,s,t,0,null,!1,!1,"",Jf);return t._reactRootContainer=h,t[Nn]=h.current,Bo(t.nodeType===8?t.parentNode:t),ji(),h}for(;a=t.lastChild;)t.removeChild(a);if(typeof s=="function"){var w=s;s=function(){var p=Al(g);w.call(p)}}var g=ch(t,0,!1,null,null,!1,!1,"",Jf);return t._reactRootContainer=g,t[Nn]=g.current,Bo(t.nodeType===8?t.parentNode:t),ji(function(){Kl(e,g,r,s)}),g}function Zl(t,e,r,s,a){var l=r._reactRootContainer;if(l){var h=l;if(typeof a=="function"){var w=a;a=function(){var g=Al(h);w.call(g)}}Kl(e,h,t,a)}else h=Fx(r,e,t,a,s);return Al(h)}M1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=go(e.pendingLanes);r!==0&&(kd(e,r|1),br(e,Rt()),!(Ge&6)&&(Ls=Rt()+500,hi()))}break;case 13:ji(function(){var s=On(t,1);if(s!==null){var a=hr();an(s,t,1,a)}}),dh(t,1)}};Pd=function(t){if(t.tag===13){var e=On(t,134217728);if(e!==null){var r=hr();an(e,t,134217728,r)}dh(t,134217728)}};L1=function(t){if(t.tag===13){var e=si(t),r=On(t,e);if(r!==null){var s=hr();an(r,t,e,s)}dh(t,e)}};B1=function(){return Qe};F1=function(t,e){var r=Qe;try{return Qe=t,e()}finally{Qe=r}};xc=function(t,e,r){switch(e){case"input":if(dc(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var s=r[e];if(s!==t&&s.form===t.form){var a=Vl(s);if(!a)throw Error(ne(90));p1(s),dc(s,a)}}}break;case"textarea":w1(t,r);break;case"select":e=r.value,e!=null&&Cs(t,!!r.multiple,e,!1)}};A1=oh;b1=ji;var jx={usingClientEntryPoint:!1,Events:[ea,ps,Vl,_1,C1,oh]},uo={findFiberByHostInstance:Ri,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ux={bundleType:uo.bundleType,version:uo.version,rendererPackageName:uo.rendererPackageName,rendererConfig:uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=T1(t),t===null?null:t.stateNode},findFiberByHostInstance:uo.findFiberByHostInstance||Bx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Na=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Na.isDisabled&&Na.supportsFiber)try{Bl=Na.inject(Ux),yn=Na}catch{}}Dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jx;Dr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fh(e))throw Error(ne(200));return Lx(t,e,null,r)};Dr.createRoot=function(t,e){if(!fh(t))throw Error(ne(299));var r=!1,s="",a=op;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=ch(t,1,!1,null,null,r,!1,s,a),t[Nn]=e.current,Bo(t.nodeType===8?t.parentNode:t),new hh(e)};Dr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=T1(e),t=t===null?null:t.stateNode,t};Dr.flushSync=function(t){return ji(t)};Dr.hydrate=function(t,e,r){if(!Yl(e))throw Error(ne(200));return Zl(null,t,e,!0,r)};Dr.hydrateRoot=function(t,e,r){if(!fh(t))throw Error(ne(405));var s=r!=null&&r.hydratedSources||null,a=!1,l="",h=op;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),e=sp(e,null,t,1,r??null,a,!1,l,h),t[Nn]=e.current,Bo(t),s)for(t=0;t<s.length;t++)r=s[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new ql(e)};Dr.render=function(t,e,r){if(!Yl(e))throw Error(ne(200));return Zl(null,t,e,!1,r)};Dr.unmountComponentAtNode=function(t){if(!Yl(t))throw Error(ne(40));return t._reactRootContainer?(ji(function(){Zl(null,null,t,!1,function(){t._reactRootContainer=null,t[Nn]=null})}),!0):!1};Dr.unstable_batchedUpdates=oh;Dr.unstable_renderSubtreeIntoContainer=function(t,e,r,s){if(!Yl(r))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return Zl(t,e,r,!1,s)};Dr.version="18.3.1-next-f1338f8080-20240426";function ap(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ap)}catch(t){console.error(t)}}ap(),a1.exports=Dr;var Vx=a1.exports,e0=Vx;ic.createRoot=e0.createRoot,ic.hydrateRoot=e0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xo(){return Xo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Xo.apply(this,arguments)}var Qn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qn||(Qn={}));const t0="popstate";function zx(t){t===void 0&&(t={});function e(s,a){let{pathname:l,search:h,hash:w}=s.location;return Zc("",{pathname:l,search:h,hash:w},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:bl(a)}return Hx(e,r,null,t)}function kt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Wx(){return Math.random().toString(36).substr(2,8)}function r0(t,e){return{usr:t.state,key:t.key,idx:e}}function Zc(t,e,r,s){return r===void 0&&(r=null),Xo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Vs(e):e,{state:r,key:e&&e.key||s||Wx()})}function bl(t){let{pathname:e="/",search:r="",hash:s=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Vs(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function Hx(t,e,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:l=!1}=s,h=a.history,w=Qn.Pop,g=null,p=y();p==null&&(p=0,h.replaceState(Xo({},h.state,{idx:p}),""));function y(){return(h.state||{idx:null}).idx}function v(){w=Qn.Pop;let F=y(),k=F==null?null:F-p;p=F,g&&g({action:w,location:B.location,delta:k})}function _(F,k){w=Qn.Push;let I=Zc(B.location,F,k);p=y()+1;let b=r0(I,p),P=B.createHref(I);try{h.pushState(b,"",P)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;a.location.assign(P)}l&&g&&g({action:w,location:B.location,delta:1})}function T(F,k){w=Qn.Replace;let I=Zc(B.location,F,k);p=y();let b=r0(I,p),P=B.createHref(I);h.replaceState(b,"",P),l&&g&&g({action:w,location:B.location,delta:0})}function N(F){let k=a.location.origin!=="null"?a.location.origin:a.location.href,I=typeof F=="string"?F:bl(F);return I=I.replace(/ $/,"%20"),kt(k,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,k)}let B={get action(){return w},get location(){return t(a,h)},listen(F){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(t0,v),g=F,()=>{a.removeEventListener(t0,v),g=null}},createHref(F){return e(a,F)},createURL:N,encodeLocation(F){let k=N(F);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:_,replace:T,go(F){return h.go(F)}};return B}var n0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(n0||(n0={}));function Gx(t,e,r){return r===void 0&&(r="/"),Xx(t,e,r)}function Xx(t,e,r,s){let a=typeof e=="string"?Vs(e):e,l=gh(a.pathname||"/",r);if(l==null)return null;let h=up(t);$x(h);let w=null;for(let g=0;w==null&&g<h.length;++g){let p=sy(l);w=ry(h[g],p)}return w}function up(t,e,r,s){e===void 0&&(e=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(l,h,w)=>{let g={relativePath:w===void 0?l.path||"":w,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};g.relativePath.startsWith("/")&&(kt(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let p=ai([s,g.relativePath]),y=r.concat(g);l.children&&l.children.length>0&&(kt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),up(l.children,e,y,p)),!(l.path==null&&!l.index)&&e.push({path:p,score:ey(p,l.index),routesMeta:y})};return t.forEach((l,h)=>{var w;if(l.path===""||!((w=l.path)!=null&&w.includes("?")))a(l,h);else for(let g of cp(l.path))a(l,h,g)}),e}function cp(t){let e=t.split("/");if(e.length===0)return[];let[r,...s]=e,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let h=cp(s.join("/")),w=[];return w.push(...h.map(g=>g===""?l:[l,g].join("/"))),a&&w.push(...h),w.map(g=>t.startsWith("/")&&g===""?"/":g)}function $x(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:ty(e.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const Kx=/^:[\w-]+$/,qx=3,Yx=2,Zx=1,Qx=10,Jx=-2,i0=t=>t==="*";function ey(t,e){let r=t.split("/"),s=r.length;return r.some(i0)&&(s+=Jx),e&&(s+=Yx),r.filter(a=>!i0(a)).reduce((a,l)=>a+(Kx.test(l)?qx:l===""?Zx:Qx),s)}function ty(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function ry(t,e,r){let{routesMeta:s}=t,a={},l="/",h=[];for(let w=0;w<s.length;++w){let g=s[w],p=w===s.length-1,y=l==="/"?e:e.slice(l.length)||"/",v=ny({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},y),_=g.route;if(!v)return null;Object.assign(a,v.params),h.push({params:a,pathname:ai([l,v.pathname]),pathnameBase:uy(ai([l,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(l=ai([l,v.pathnameBase]))}return h}function ny(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=iy(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let l=a[0],h=l.replace(/(.)\/+$/,"$1"),w=a.slice(1);return{params:s.reduce((p,y,v)=>{let{paramName:_,isOptional:T}=y;if(_==="*"){let B=w[v]||"";h=l.slice(0,l.length-B.length).replace(/(.)\/+$/,"$1")}const N=w[v];return T&&!N?p[_]=void 0:p[_]=(N||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:h,pattern:t}}function iy(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),lp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,w,g)=>(s.push({paramName:w,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function sy(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function gh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}function oy(t,e){e===void 0&&(e="/");let{pathname:r,search:s="",hash:a=""}=typeof t=="string"?Vs(t):t;return{pathname:r?r.startsWith("/")?r:ay(r,e):e,search:cy(s),hash:dy(a)}}function ay(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Ku(t,e,r,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ly(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function dp(t,e){let r=ly(t);return e?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function hp(t,e,r,s){s===void 0&&(s=!1);let a;typeof t=="string"?a=Vs(t):(a=Xo({},t),kt(!a.pathname||!a.pathname.includes("?"),Ku("?","pathname","search",a)),kt(!a.pathname||!a.pathname.includes("#"),Ku("#","pathname","hash",a)),kt(!a.search||!a.search.includes("#"),Ku("#","search","hash",a)));let l=t===""||a.pathname==="",h=l?"/":a.pathname,w;if(h==null)w=r;else{let v=e.length-1;if(!s&&h.startsWith("..")){let _=h.split("/");for(;_[0]==="..";)_.shift(),v-=1;a.pathname=_.join("/")}w=v>=0?e[v]:"/"}let g=oy(a,w),p=h&&h!=="/"&&h.endsWith("/"),y=(l||h===".")&&r.endsWith("/");return!g.pathname.endsWith("/")&&(p||y)&&(g.pathname+="/"),g}const ai=t=>t.join("/").replace(/\/\/+/g,"/"),uy=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cy=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dy=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function hy(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const fp=["post","put","patch","delete"];new Set(fp);const fy=["get",...fp];new Set(fy);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $o(){return $o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},$o.apply(this,arguments)}const ph=Y.createContext(null),gy=Y.createContext(null),Wi=Y.createContext(null),Ql=Y.createContext(null),Hi=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),gp=Y.createContext(null);function py(t,e){let{relative:r}=e===void 0?{}:e;ra()||kt(!1);let{basename:s,navigator:a}=Y.useContext(Wi),{hash:l,pathname:h,search:w}=mp(t,{relative:r}),g=h;return s!=="/"&&(g=h==="/"?s:ai([s,h])),a.createHref({pathname:g,search:w,hash:l})}function ra(){return Y.useContext(Ql)!=null}function zs(){return ra()||kt(!1),Y.useContext(Ql).location}function pp(t){Y.useContext(Wi).static||Y.useLayoutEffect(t)}function mh(){let{isDataRoute:t}=Y.useContext(Hi);return t?Ty():my()}function my(){ra()||kt(!1);let t=Y.useContext(ph),{basename:e,future:r,navigator:s}=Y.useContext(Wi),{matches:a}=Y.useContext(Hi),{pathname:l}=zs(),h=JSON.stringify(dp(a,r.v7_relativeSplatPath)),w=Y.useRef(!1);return pp(()=>{w.current=!0}),Y.useCallback(function(p,y){if(y===void 0&&(y={}),!w.current)return;if(typeof p=="number"){s.go(p);return}let v=hp(p,JSON.parse(h),l,y.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ai([e,v.pathname])),(y.replace?s.replace:s.push)(v,y.state,y)},[e,s,h,l,t])}function mp(t,e){let{relative:r}=e===void 0?{}:e,{future:s}=Y.useContext(Wi),{matches:a}=Y.useContext(Hi),{pathname:l}=zs(),h=JSON.stringify(dp(a,s.v7_relativeSplatPath));return Y.useMemo(()=>hp(t,JSON.parse(h),l,r==="path"),[t,h,l,r])}function wy(t,e){return xy(t,e)}function xy(t,e,r,s){ra()||kt(!1);let{navigator:a}=Y.useContext(Wi),{matches:l}=Y.useContext(Hi),h=l[l.length-1],w=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let p=zs(),y;if(e){var v;let F=typeof e=="string"?Vs(e):e;g==="/"||(v=F.pathname)!=null&&v.startsWith(g)||kt(!1),y=F}else y=p;let _=y.pathname||"/",T=_;if(g!=="/"){let F=g.replace(/^\//,"").split("/");T="/"+_.replace(/^\//,"").split("/").slice(F.length).join("/")}let N=Gx(t,{pathname:T}),B=Cy(N&&N.map(F=>Object.assign({},F,{params:Object.assign({},w,F.params),pathname:ai([g,a.encodeLocation?a.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?g:ai([g,a.encodeLocation?a.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),l,r,s);return e&&B?Y.createElement(Ql.Provider,{value:{location:$o({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Qn.Pop}},B):B}function yy(){let t=Iy(),e=hy(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),r?Y.createElement("pre",{style:a},r):null,null)}const vy=Y.createElement(yy,null);class Ey extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?Y.createElement(Hi.Provider,{value:this.props.routeContext},Y.createElement(gp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _y(t){let{routeContext:e,match:r,children:s}=t,a=Y.useContext(ph);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),Y.createElement(Hi.Provider,{value:e},s)}function Cy(t,e,r,s){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),s===void 0&&(s=null),t==null){var l;if(!r)return null;if(r.errors)t=r.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let h=t,w=(a=r)==null?void 0:a.errors;if(w!=null){let y=h.findIndex(v=>v.route.id&&(w==null?void 0:w[v.route.id])!==void 0);y>=0||kt(!1),h=h.slice(0,Math.min(h.length,y+1))}let g=!1,p=-1;if(r&&s&&s.v7_partialHydration)for(let y=0;y<h.length;y++){let v=h[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=y),v.route.id){let{loaderData:_,errors:T}=r,N=v.route.loader&&_[v.route.id]===void 0&&(!T||T[v.route.id]===void 0);if(v.route.lazy||N){g=!0,p>=0?h=h.slice(0,p+1):h=[h[0]];break}}}return h.reduceRight((y,v,_)=>{let T,N=!1,B=null,F=null;r&&(T=w&&v.route.id?w[v.route.id]:void 0,B=v.route.errorElement||vy,g&&(p<0&&_===0?(Ry("route-fallback"),N=!0,F=null):p===_&&(N=!0,F=v.route.hydrateFallbackElement||null)));let k=e.concat(h.slice(0,_+1)),I=()=>{let b;return T?b=B:N?b=F:v.route.Component?b=Y.createElement(v.route.Component,null):v.route.element?b=v.route.element:b=y,Y.createElement(_y,{match:v,routeContext:{outlet:y,matches:k,isDataRoute:r!=null},children:b})};return r&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?Y.createElement(Ey,{location:r.location,revalidation:r.revalidation,component:B,error:T,children:I(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):I()},null)}var wp=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(wp||{}),xp=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(xp||{});function Ay(t){let e=Y.useContext(ph);return e||kt(!1),e}function by(t){let e=Y.useContext(gy);return e||kt(!1),e}function Sy(t){let e=Y.useContext(Hi);return e||kt(!1),e}function yp(t){let e=Sy(),r=e.matches[e.matches.length-1];return r.route.id||kt(!1),r.route.id}function Iy(){var t;let e=Y.useContext(gp),r=by(),s=yp();return e!==void 0?e:(t=r.errors)==null?void 0:t[s]}function Ty(){let{router:t}=Ay(wp.UseNavigateStable),e=yp(xp.UseNavigateStable),r=Y.useRef(!1);return pp(()=>{r.current=!0}),Y.useCallback(function(a,l){l===void 0&&(l={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,$o({fromRouteId:e},l)))},[t,e])}const s0={};function Ry(t,e,r){s0[t]||(s0[t]=!0)}function Ny(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function as(t){kt(!1)}function Oy(t){let{basename:e="/",children:r=null,location:s,navigationType:a=Qn.Pop,navigator:l,static:h=!1,future:w}=t;ra()&&kt(!1);let g=e.replace(/^\/*/,"/"),p=Y.useMemo(()=>({basename:g,navigator:l,static:h,future:$o({v7_relativeSplatPath:!1},w)}),[g,w,l,h]);typeof s=="string"&&(s=Vs(s));let{pathname:y="/",search:v="",hash:_="",state:T=null,key:N="default"}=s,B=Y.useMemo(()=>{let F=gh(y,g);return F==null?null:{location:{pathname:F,search:v,hash:_,state:T,key:N},navigationType:a}},[g,y,v,_,T,N,a]);return B==null?null:Y.createElement(Wi.Provider,{value:p},Y.createElement(Ql.Provider,{children:r,value:B}))}function ky(t){let{children:e,location:r}=t;return wy(Qc(e),r)}new Promise(()=>{});function Qc(t,e){e===void 0&&(e=[]);let r=[];return Y.Children.forEach(t,(s,a)=>{if(!Y.isValidElement(s))return;let l=[...e,a];if(s.type===Y.Fragment){r.push.apply(r,Qc(s.props.children,l));return}s.type!==as&&kt(!1),!s.props.index||!s.props.children||kt(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Qc(s.props.children,l)),r.push(h)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jc(){return Jc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Jc.apply(this,arguments)}function Py(t,e){if(t==null)return{};var r={},s=Object.keys(t),a,l;for(l=0;l<s.length;l++)a=s[l],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function Dy(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function My(t,e){return t.button===0&&(!e||e==="_self")&&!Dy(t)}function ed(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let s=t[r];return e.concat(Array.isArray(s)?s.map(a=>[r,a]):[[r,s]])},[]))}function Ly(t,e){let r=ed(t);return e&&e.forEach((s,a)=>{r.has(a)||e.getAll(a).forEach(l=>{r.append(a,l)})}),r}const By=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Fy="6";try{window.__reactRouterVersion=Fy}catch{}const jy="startTransition",o0=N2[jy];function Uy(t){let{basename:e,children:r,future:s,window:a}=t,l=Y.useRef();l.current==null&&(l.current=zx({window:a,v5Compat:!0}));let h=l.current,[w,g]=Y.useState({action:h.action,location:h.location}),{v7_startTransition:p}=s||{},y=Y.useCallback(v=>{p&&o0?o0(()=>g(v)):g(v)},[g,p]);return Y.useLayoutEffect(()=>h.listen(y),[h,y]),Y.useEffect(()=>Ny(s),[s]),Y.createElement(Oy,{basename:e,children:r,location:w.location,navigationType:w.action,navigator:h,future:s})}const Vy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,co=Y.forwardRef(function(e,r){let{onClick:s,relative:a,reloadDocument:l,replace:h,state:w,target:g,to:p,preventScrollReset:y,viewTransition:v}=e,_=Py(e,By),{basename:T}=Y.useContext(Wi),N,B=!1;if(typeof p=="string"&&zy.test(p)&&(N=p,Vy))try{let b=new URL(window.location.href),P=p.startsWith("//")?new URL(b.protocol+p):new URL(p),X=gh(P.pathname,T);P.origin===b.origin&&X!=null?p=X+P.search+P.hash:B=!0}catch{}let F=py(p,{relative:a}),k=Wy(p,{replace:h,state:w,target:g,preventScrollReset:y,relative:a,viewTransition:v});function I(b){s&&s(b),b.defaultPrevented||k(b)}return Y.createElement("a",Jc({},_,{href:N||F,onClick:B||l?s:I,ref:r,target:g}))});var a0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(a0||(a0={}));var l0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(l0||(l0={}));function Wy(t,e){let{target:r,replace:s,state:a,preventScrollReset:l,relative:h,viewTransition:w}=e===void 0?{}:e,g=mh(),p=zs(),y=mp(t,{relative:h});return Y.useCallback(v=>{if(My(v,r)){v.preventDefault();let _=s!==void 0?s:bl(p)===bl(y);g(t,{replace:_,state:a,preventScrollReset:l,relative:h,viewTransition:w})}},[p,g,y,s,a,r,t,l,h,w])}function Hy(t){let e=Y.useRef(ed(t)),r=Y.useRef(!1),s=zs(),a=Y.useMemo(()=>Ly(s.search,r.current?null:e.current),[s.search]),l=mh(),h=Y.useCallback((w,g)=>{const p=ed(typeof w=="function"?w(a):w);r.current=!0,l("?"+p,g)},[l,a]);return[a,h]}let Gy={data:""},Xy=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||Gy},$y=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ky=/\/\*[^]*?\*\/|  +/g,u0=/\n+/g,Kn=(t,e)=>{let r="",s="",a="";for(let l in t){let h=t[l];l[0]=="@"?l[1]=="i"?r=l+" "+h+";":s+=l[1]=="f"?Kn(h,l):l+"{"+Kn(h,l[1]=="k"?"":e)+"}":typeof h=="object"?s+=Kn(h,e?e.replace(/([^,])+/g,w=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,g=>/&/.test(g)?g.replace(/&/g,w):w?w+" "+g:g)):l):h!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Kn.p?Kn.p(l,h):l+":"+h+";")}return r+(e&&a?e+"{"+a+"}":a)+s},En={},vp=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+vp(t[r]);return e}return t},qy=(t,e,r,s,a)=>{let l=vp(t),h=En[l]||(En[l]=(g=>{let p=0,y=11;for(;p<g.length;)y=101*y+g.charCodeAt(p++)>>>0;return"go"+y})(l));if(!En[h]){let g=l!==t?t:(p=>{let y,v,_=[{}];for(;y=$y.exec(p.replace(Ky,""));)y[4]?_.shift():y[3]?(v=y[3].replace(u0," ").trim(),_.unshift(_[0][v]=_[0][v]||{})):_[0][y[1]]=y[2].replace(u0," ").trim();return _[0]})(t);En[h]=Kn(a?{["@keyframes "+h]:g}:g,r?"":"."+h)}let w=r&&En.g?En.g:null;return r&&(En.g=En[h]),((g,p,y,v)=>{v?p.data=p.data.replace(v,g):p.data.indexOf(g)===-1&&(p.data=y?g+p.data:p.data+g)})(En[h],e,s,w),h},Yy=(t,e,r)=>t.reduce((s,a,l)=>{let h=e[l];if(h&&h.call){let w=h(r),g=w&&w.props&&w.props.className||/^go/.test(w)&&w;h=g?"."+g:w&&typeof w=="object"?w.props?"":Kn(w,""):w===!1?"":w}return s+a+(h??"")},"");function Jl(t){let e=this||{},r=t.call?t(e.p):t;return qy(r.unshift?r.raw?Yy(r,[].slice.call(arguments,1),e.p):r.reduce((s,a)=>Object.assign(s,a&&a.call?a(e.p):a),{}):r,Xy(e.target),e.g,e.o,e.k)}let Ep,td,rd;Jl.bind({g:1});let Pn=Jl.bind({k:1});function Zy(t,e,r,s){Kn.p=e,Ep=t,td=r,rd=s}function fi(t,e){let r=this||{};return function(){let s=arguments;function a(l,h){let w=Object.assign({},l),g=w.className||a.className;r.p=Object.assign({theme:td&&td()},w),r.o=/ *go\d+/.test(g),w.className=Jl.apply(r,s)+(g?" "+g:"");let p=t;return t[0]&&(p=w.as||t,delete w.as),rd&&p[0]&&rd(w),Ep(p,w)}return a}}var Qy=t=>typeof t=="function",Sl=(t,e)=>Qy(t)?t(e):t,Jy=(()=>{let t=0;return()=>(++t).toString()})(),_p=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),ev=20,wh="default",Cp=(t,e)=>{let{toastLimit:r}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,r)};case 1:return{...t,toasts:t.toasts.map(h=>h.id===e.toast.id?{...h,...e.toast}:h)};case 2:let{toast:s}=e;return Cp(t,{type:t.toasts.find(h=>h.id===s.id)?1:0,toast:s});case 3:let{toastId:a}=e;return{...t,toasts:t.toasts.map(h=>h.id===a||a===void 0?{...h,dismissed:!0,visible:!1}:h)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(h=>h.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let l=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(h=>({...h,pauseDuration:h.pauseDuration+l}))}}},el=[],Ap={toasts:[],pausedAt:void 0,settings:{toastLimit:ev}},xn={},bp=(t,e=wh)=>{xn[e]=Cp(xn[e]||Ap,t),el.forEach(([r,s])=>{r===e&&s(xn[e])})},Sp=t=>Object.keys(xn).forEach(e=>bp(t,e)),tv=t=>Object.keys(xn).find(e=>xn[e].toasts.some(r=>r.id===t)),eu=(t=wh)=>e=>{bp(e,t)},rv={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},nv=(t={},e=wh)=>{let[r,s]=Y.useState(xn[e]||Ap),a=Y.useRef(xn[e]);Y.useEffect(()=>(a.current!==xn[e]&&s(xn[e]),el.push([e,s]),()=>{let h=el.findIndex(([w])=>w===e);h>-1&&el.splice(h,1)}),[e]);let l=r.toasts.map(h=>{var w,g,p;return{...t,...t[h.type],...h,removeDelay:h.removeDelay||((w=t[h.type])==null?void 0:w.removeDelay)||(t==null?void 0:t.removeDelay),duration:h.duration||((g=t[h.type])==null?void 0:g.duration)||(t==null?void 0:t.duration)||rv[h.type],style:{...t.style,...(p=t[h.type])==null?void 0:p.style,...h.style}}});return{...r,toasts:l}},iv=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||Jy()}),na=t=>(e,r)=>{let s=iv(e,t,r);return eu(s.toasterId||tv(s.id))({type:2,toast:s}),s.id},jt=(t,e)=>na("blank")(t,e);jt.error=na("error");jt.success=na("success");jt.loading=na("loading");jt.custom=na("custom");jt.dismiss=(t,e)=>{let r={type:3,toastId:t};e?eu(e)(r):Sp(r)};jt.dismissAll=t=>jt.dismiss(void 0,t);jt.remove=(t,e)=>{let r={type:4,toastId:t};e?eu(e)(r):Sp(r)};jt.removeAll=t=>jt.remove(void 0,t);jt.promise=(t,e,r)=>{let s=jt.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(a=>{let l=e.success?Sl(e.success,a):void 0;return l?jt.success(l,{id:s,...r,...r==null?void 0:r.success}):jt.dismiss(s),a}).catch(a=>{let l=e.error?Sl(e.error,a):void 0;l?jt.error(l,{id:s,...r,...r==null?void 0:r.error}):jt.dismiss(s)}),t};var sv=1e3,ov=(t,e="default")=>{let{toasts:r,pausedAt:s}=nv(t,e),a=Y.useRef(new Map).current,l=Y.useCallback((v,_=sv)=>{if(a.has(v))return;let T=setTimeout(()=>{a.delete(v),h({type:4,toastId:v})},_);a.set(v,T)},[]);Y.useEffect(()=>{if(s)return;let v=Date.now(),_=r.map(T=>{if(T.duration===1/0)return;let N=(T.duration||0)+T.pauseDuration-(v-T.createdAt);if(N<0){T.visible&&jt.dismiss(T.id);return}return setTimeout(()=>jt.dismiss(T.id,e),N)});return()=>{_.forEach(T=>T&&clearTimeout(T))}},[r,s,e]);let h=Y.useCallback(eu(e),[e]),w=Y.useCallback(()=>{h({type:5,time:Date.now()})},[h]),g=Y.useCallback((v,_)=>{h({type:1,toast:{id:v,height:_}})},[h]),p=Y.useCallback(()=>{s&&h({type:6,time:Date.now()})},[s,h]),y=Y.useCallback((v,_)=>{let{reverseOrder:T=!1,gutter:N=8,defaultPosition:B}=_||{},F=r.filter(b=>(b.position||B)===(v.position||B)&&b.height),k=F.findIndex(b=>b.id===v.id),I=F.filter((b,P)=>P<k&&b.visible).length;return F.filter(b=>b.visible).slice(...T?[I+1]:[0,I]).reduce((b,P)=>b+(P.height||0)+N,0)},[r]);return Y.useEffect(()=>{r.forEach(v=>{if(v.dismissed)l(v.id,v.removeDelay);else{let _=a.get(v.id);_&&(clearTimeout(_),a.delete(v.id))}})},[r,l]),{toasts:r,handlers:{updateHeight:g,startPause:w,endPause:p,calculateOffset:y}}},av=Pn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,lv=Pn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,uv=Pn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,cv=fi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${av} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${lv} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${uv} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,dv=Pn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,hv=fi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${dv} 1s linear infinite;
`,fv=Pn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,gv=Pn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,pv=fi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${fv} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${gv} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,mv=fi("div")`
  position: absolute;
`,wv=fi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,xv=Pn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,yv=fi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${xv} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,vv=({toast:t})=>{let{icon:e,type:r,iconTheme:s}=t;return e!==void 0?typeof e=="string"?Y.createElement(yv,null,e):e:r==="blank"?null:Y.createElement(wv,null,Y.createElement(hv,{...s}),r!=="loading"&&Y.createElement(mv,null,r==="error"?Y.createElement(cv,{...s}):Y.createElement(pv,{...s})))},Ev=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,_v=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Cv="0%{opacity:0;} 100%{opacity:1;}",Av="0%{opacity:1;} 100%{opacity:0;}",bv=fi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Sv=fi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Iv=(t,e)=>{let r=t.includes("top")?1:-1,[s,a]=_p()?[Cv,Av]:[Ev(r),_v(r)];return{animation:e?`${Pn(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Pn(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Tv=Y.memo(({toast:t,position:e,style:r,children:s})=>{let a=t.height?Iv(t.position||e||"top-center",t.visible):{opacity:0},l=Y.createElement(vv,{toast:t}),h=Y.createElement(Sv,{...t.ariaProps},Sl(t.message,t));return Y.createElement(bv,{className:t.className,style:{...a,...r,...t.style}},typeof s=="function"?s({icon:l,message:h}):Y.createElement(Y.Fragment,null,l,h))});Zy(Y.createElement);var Rv=({id:t,className:e,style:r,onHeightUpdate:s,children:a})=>{let l=Y.useCallback(h=>{if(h){let w=()=>{let g=h.getBoundingClientRect().height;s(t,g)};w(),new MutationObserver(w).observe(h,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return Y.createElement("div",{ref:l,className:e,style:r},a)},Nv=(t,e)=>{let r=t.includes("top"),s=r?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:_p()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...s,...a}},Ov=Jl`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Oa=16,kv=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:s,children:a,toasterId:l,containerStyle:h,containerClassName:w})=>{let{toasts:g,handlers:p}=ov(r,l);return Y.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:Oa,left:Oa,right:Oa,bottom:Oa,pointerEvents:"none",...h},className:w,onMouseEnter:p.startPause,onMouseLeave:p.endPause},g.map(y=>{let v=y.position||e,_=p.calculateOffset(y,{reverseOrder:t,gutter:s,defaultPosition:e}),T=Nv(v,_);return Y.createElement(Rv,{id:y.id,key:y.id,onHeightUpdate:p.updateHeight,className:y.visible?Ov:"",style:T},y.type==="custom"?Sl(y.message,y):a?a(y):Y.createElement(Tv,{toast:y,position:v}))}))},Be=jt,nd=function(t,e){return nd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},nd(t,e)};function Ip(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");nd(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Il=function(){return Il=Object.assign||function(e){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},Il.apply(this,arguments)};function Ws(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(r[s[a]]=t[s[a]]);return r}function Tp(t,e,r,s){var a=arguments.length,l=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,r):s,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,r,s);else for(var w=t.length-1;w>=0;w--)(h=t[w])&&(l=(a<3?h(l):a>3?h(e,r,l):h(e,r))||l);return a>3&&l&&Object.defineProperty(e,r,l),l}function Rp(t,e){return function(r,s){e(r,s,t)}}function Np(t,e,r,s,a,l){function h(k){if(k!==void 0&&typeof k!="function")throw new TypeError("Function expected");return k}for(var w=s.kind,g=w==="getter"?"get":w==="setter"?"set":"value",p=!e&&t?s.static?t:t.prototype:null,y=e||(p?Object.getOwnPropertyDescriptor(p,s.name):{}),v,_=!1,T=r.length-1;T>=0;T--){var N={};for(var B in s)N[B]=B==="access"?{}:s[B];for(var B in s.access)N.access[B]=s.access[B];N.addInitializer=function(k){if(_)throw new TypeError("Cannot add initializers after decoration has completed");l.push(h(k||null))};var F=(0,r[T])(w==="accessor"?{get:y.get,set:y.set}:y[g],N);if(w==="accessor"){if(F===void 0)continue;if(F===null||typeof F!="object")throw new TypeError("Object expected");(v=h(F.get))&&(y.get=v),(v=h(F.set))&&(y.set=v),(v=h(F.init))&&a.unshift(v)}else(v=h(F))&&(w==="field"?a.unshift(v):y[g]=v)}p&&Object.defineProperty(p,s.name,y),_=!0}function Op(t,e,r){for(var s=arguments.length>2,a=0;a<e.length;a++)r=s?e[a].call(t,r):e[a].call(t);return s?r:void 0}function kp(t){return typeof t=="symbol"?t:"".concat(t)}function Pp(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Dp(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function xe(t,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function w(y){try{p(s.next(y))}catch(v){h(v)}}function g(y){try{p(s.throw(y))}catch(v){h(v)}}function p(y){y.done?l(y.value):a(y.value).then(w,g)}p((s=s.apply(t,e||[])).next())})}function Mp(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=w(0),h.throw=w(1),h.return=w(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function w(p){return function(y){return g([p,y])}}function g(p){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){r.label=p[1];break}if(p[0]===6&&r.label<l[1]){r.label=l[1],l=p;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(p);break}l[2]&&r.ops.pop(),r.trys.pop();continue}p=e.call(t,r)}catch(y){p=[6,y],a=0}finally{s=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var tu=Object.create?function(t,e,r,s){s===void 0&&(s=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,s,a)}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]};function Lp(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&tu(e,t,r)}function Tl(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],s=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xh(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var s=r.call(t),a,l=[],h;try{for(;(e===void 0||e-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(w){h={error:w}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(h)throw h.error}}return l}function Bp(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(xh(arguments[e]));return t}function Fp(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var s=Array(t),a=0,e=0;e<r;e++)for(var l=arguments[e],h=0,w=l.length;h<w;h++,a++)s[a]=l[h];return s}function jp(t,e,r){if(r||arguments.length===2)for(var s=0,a=e.length,l;s<a;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return t.concat(l||Array.prototype.slice.call(e))}function Bs(t){return this instanceof Bs?(this.v=t,this):new Bs(t)}function Up(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(t,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),w("next"),w("throw"),w("return",h),a[Symbol.asyncIterator]=function(){return this},a;function h(T){return function(N){return Promise.resolve(N).then(T,v)}}function w(T,N){s[T]&&(a[T]=function(B){return new Promise(function(F,k){l.push([T,B,F,k])>1||g(T,B)})},N&&(a[T]=N(a[T])))}function g(T,N){try{p(s[T](N))}catch(B){_(l[0][3],B)}}function p(T){T.value instanceof Bs?Promise.resolve(T.value.v).then(y,v):_(l[0][2],T)}function y(T){g("next",T)}function v(T){g("throw",T)}function _(T,N){T(N),l.shift(),l.length&&g(l[0][0],l[0][1])}}function Vp(t){var e,r;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,l){e[a]=t[a]?function(h){return(r=!r)?{value:Bs(t[a](h)),done:!1}:l?l(h):h}:l}}function zp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Tl=="function"?Tl(t):t[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(l){r[l]=t[l]&&function(h){return new Promise(function(w,g){h=t[l](h),a(w,g,h.done,h.value)})}}function a(l,h,w,g){Promise.resolve(g).then(function(p){l({value:p,done:w})},h)}}function Wp(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Pv=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},id=function(t){return id=Object.getOwnPropertyNames||function(e){var r=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[r.length]=s);return r},id(t)};function Hp(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=id(t),s=0;s<r.length;s++)r[s]!=="default"&&tu(e,t,r[s]);return Pv(e,t),e}function Gp(t){return t&&t.__esModule?t:{default:t}}function Xp(t,e,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(t):s?s.value:e.get(t)}function $p(t,e,r,s,a){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?a.call(t,r):a?a.value=r:e.set(t,r),r}function Kp(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function qp(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],r&&(a=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");a&&(s=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:e,dispose:s,async:r})}else r&&t.stack.push({async:!0});return e}var Dv=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var s=new Error(r);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function Yp(t){function e(l){t.error=t.hasError?new Dv(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var r,s=0;function a(){for(;r=t.stack.pop();)try{if(!r.async&&s===1)return s=0,t.stack.push(r),Promise.resolve().then(a);if(r.dispose){var l=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(l).then(a,function(h){return e(h),a()})}else s|=1}catch(h){e(h)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function Zp(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,s,a,l,h){return s?e?".jsx":".js":a&&(!l||!h)?r:a+l+"."+h.toLowerCase()+"js"}):t}const Mv={__extends:Ip,__assign:Il,__rest:Ws,__decorate:Tp,__param:Rp,__esDecorate:Np,__runInitializers:Op,__propKey:kp,__setFunctionName:Pp,__metadata:Dp,__awaiter:xe,__generator:Mp,__createBinding:tu,__exportStar:Lp,__values:Tl,__read:xh,__spread:Bp,__spreadArrays:Fp,__spreadArray:jp,__await:Bs,__asyncGenerator:Up,__asyncDelegator:Vp,__asyncValues:zp,__makeTemplateObject:Wp,__importStar:Hp,__importDefault:Gp,__classPrivateFieldGet:Xp,__classPrivateFieldSet:$p,__classPrivateFieldIn:Kp,__addDisposableResource:qp,__disposeResources:Yp,__rewriteRelativeImportExtension:Zp},Lv=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:qp,get __assign(){return Il},__asyncDelegator:Vp,__asyncGenerator:Up,__asyncValues:zp,__await:Bs,__awaiter:xe,__classPrivateFieldGet:Xp,__classPrivateFieldIn:Kp,__classPrivateFieldSet:$p,__createBinding:tu,__decorate:Tp,__disposeResources:Yp,__esDecorate:Np,__exportStar:Lp,__extends:Ip,__generator:Mp,__importDefault:Gp,__importStar:Hp,__makeTemplateObject:Wp,__metadata:Dp,__param:Rp,__propKey:kp,__read:xh,__rest:Ws,__rewriteRelativeImportExtension:Zp,__runInitializers:Op,__setFunctionName:Pp,__spread:Bp,__spreadArray:jp,__spreadArrays:Fp,__values:Tl,default:Mv},Symbol.toStringTag,{value:"Module"})),Bv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class yh extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class Fv extends yh{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class c0 extends yh{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class d0 extends yh{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var sd;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(sd||(sd={}));class jv{constructor(e,{headers:r={},customFetch:s,region:a=sd.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=Bv(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return xe(this,arguments,void 0,function*(r,s={}){var a;let l,h;try{const{headers:w,method:g,body:p,signal:y,timeout:v}=s;let _={},{region:T}=s;T||(T=this.region);const N=new URL(`${this.url}/${r}`);T&&T!=="any"&&(_["x-region"]=T,N.searchParams.set("forceFunctionRegion",T));let B;p&&(w&&!Object.prototype.hasOwnProperty.call(w,"Content-Type")||!w)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",B=p):typeof p=="string"?(_["Content-Type"]="text/plain",B=p):typeof FormData<"u"&&p instanceof FormData?B=p:(_["Content-Type"]="application/json",B=JSON.stringify(p)):B=p;let F=y;v&&(h=new AbortController,l=setTimeout(()=>h.abort(),v),y?(F=h.signal,y.addEventListener("abort",()=>h.abort())):F=h.signal);const k=yield this.fetch(N.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),w),body:B,signal:F}).catch(X=>{throw new Fv(X)}),I=k.headers.get("x-relay-error");if(I&&I==="true")throw new c0(k);if(!k.ok)throw new d0(k);let b=((a=k.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),P;return b==="application/json"?P=yield k.json():b==="application/octet-stream"||b==="application/pdf"?P=yield k.blob():b==="text/event-stream"?P=k:b==="multipart/form-data"?P=yield k.formData():P=yield k.text(),{data:P,error:null,response:k}}catch(w){return{data:null,error:w,response:w instanceof d0||w instanceof c0?w.context:void 0}}finally{l&&clearTimeout(l)}})}}var dr={};const Hs=g2(Lv);var ka={},Pa={},Da={},Ma={},La={},Ba={},h0;function Qp(){if(h0)return Ba;h0=1,Object.defineProperty(Ba,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Ba.default=t,Ba}var f0;function Jp(){if(f0)return La;f0=1,Object.defineProperty(La,"__esModule",{value:!0});const e=Hs.__importDefault(Qp());class r{constructor(a){var l,h;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(h=a.isMaybeSingle)!==null&&h!==void 0?h:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let w=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var p,y,v,_;let T=null,N=null,B=null,F=g.status,k=g.statusText;if(g.ok){if(this.method!=="HEAD"){const X=await g.text();X===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?N=X:N=JSON.parse(X))}const b=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),P=(v=g.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");b&&P&&P.length>1&&(B=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(T={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,B=null,F=406,k="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const b=await g.text();try{T=JSON.parse(b),Array.isArray(T)&&g.status===404&&(N=[],T=null,F=200,k="OK")}catch{g.status===404&&b===""?(F=204,k="No Content"):T={message:b}}if(T&&this.isMaybeSingle&&(!((_=T==null?void 0:T.details)===null||_===void 0)&&_.includes("0 rows"))&&(T=null,F=200,k="OK"),T&&this.shouldThrowOnError)throw new e.default(T)}return{error:T,data:N,count:B,status:F,statusText:k}});return this.shouldThrowOnError||(w=w.catch(g=>{var p,y,v;return{error:{message:`${(p=g==null?void 0:g.name)!==null&&p!==void 0?p:"FetchError"}: ${g==null?void 0:g.message}`,details:`${(y=g==null?void 0:g.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(v=g==null?void 0:g.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),w.then(a,l)}returns(){return this}overrideTypes(){return this}}return La.default=r,La}var g0;function em(){if(g0)return Ma;g0=1,Object.defineProperty(Ma,"__esModule",{value:!0});const e=Hs.__importDefault(Jp());class r extends e.default{select(a){let l=!1;const h=(a??"*").split("").map(w=>/\s/.test(w)&&!l?"":(w==='"'&&(l=!l),w)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:h,foreignTable:w,referencedTable:g=w}={}){const p=g?`${g}.order`:"order",y=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${y?`${y},`:""}${a}.${l?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:h=l}={}){const w=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(w,`${a}`),this}range(a,l,{foreignTable:h,referencedTable:w=h}={}){const g=typeof w>"u"?"offset":`${w}.offset`,p=typeof w>"u"?"limit":`${w}.limit`;return this.url.searchParams.set(g,`${a}`),this.url.searchParams.set(p,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:h=!1,buffers:w=!1,wal:g=!1,format:p="text"}={}){var y;const v=[a?"analyze":null,l?"verbose":null,h?"settings":null,w?"buffers":null,g?"wal":null].filter(Boolean).join("|"),_=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${_}"; options=${v};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Ma.default=r,Ma}var p0;function vh(){if(p0)return Da;p0=1,Object.defineProperty(Da,"__esModule",{value:!0});const e=Hs.__importDefault(em()),r=new RegExp("[,()]");class s extends e.default{eq(l,h){return this.url.searchParams.append(l,`eq.${h}`),this}neq(l,h){return this.url.searchParams.append(l,`neq.${h}`),this}gt(l,h){return this.url.searchParams.append(l,`gt.${h}`),this}gte(l,h){return this.url.searchParams.append(l,`gte.${h}`),this}lt(l,h){return this.url.searchParams.append(l,`lt.${h}`),this}lte(l,h){return this.url.searchParams.append(l,`lte.${h}`),this}like(l,h){return this.url.searchParams.append(l,`like.${h}`),this}likeAllOf(l,h){return this.url.searchParams.append(l,`like(all).{${h.join(",")}}`),this}likeAnyOf(l,h){return this.url.searchParams.append(l,`like(any).{${h.join(",")}}`),this}ilike(l,h){return this.url.searchParams.append(l,`ilike.${h}`),this}ilikeAllOf(l,h){return this.url.searchParams.append(l,`ilike(all).{${h.join(",")}}`),this}ilikeAnyOf(l,h){return this.url.searchParams.append(l,`ilike(any).{${h.join(",")}}`),this}is(l,h){return this.url.searchParams.append(l,`is.${h}`),this}in(l,h){const w=Array.from(new Set(h)).map(g=>typeof g=="string"&&r.test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(l,`in.(${w})`),this}contains(l,h){return typeof h=="string"?this.url.searchParams.append(l,`cs.${h}`):Array.isArray(h)?this.url.searchParams.append(l,`cs.{${h.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(h)}`),this}containedBy(l,h){return typeof h=="string"?this.url.searchParams.append(l,`cd.${h}`):Array.isArray(h)?this.url.searchParams.append(l,`cd.{${h.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(h)}`),this}rangeGt(l,h){return this.url.searchParams.append(l,`sr.${h}`),this}rangeGte(l,h){return this.url.searchParams.append(l,`nxl.${h}`),this}rangeLt(l,h){return this.url.searchParams.append(l,`sl.${h}`),this}rangeLte(l,h){return this.url.searchParams.append(l,`nxr.${h}`),this}rangeAdjacent(l,h){return this.url.searchParams.append(l,`adj.${h}`),this}overlaps(l,h){return typeof h=="string"?this.url.searchParams.append(l,`ov.${h}`):this.url.searchParams.append(l,`ov.{${h.join(",")}}`),this}textSearch(l,h,{config:w,type:g}={}){let p="";g==="plain"?p="pl":g==="phrase"?p="ph":g==="websearch"&&(p="w");const y=w===void 0?"":`(${w})`;return this.url.searchParams.append(l,`${p}fts${y}.${h}`),this}match(l){return Object.entries(l).forEach(([h,w])=>{this.url.searchParams.append(h,`eq.${w}`)}),this}not(l,h,w){return this.url.searchParams.append(l,`not.${h}.${w}`),this}or(l,{foreignTable:h,referencedTable:w=h}={}){const g=w?`${w}.or`:"or";return this.url.searchParams.append(g,`(${l})`),this}filter(l,h,w){return this.url.searchParams.append(l,`${h}.${w}`),this}}return Da.default=s,Da}var m0;function tm(){if(m0)return Pa;m0=1,Object.defineProperty(Pa,"__esModule",{value:!0});const e=Hs.__importDefault(vh());class r{constructor(a,{headers:l={},schema:h,fetch:w}){this.url=a,this.headers=new Headers(l),this.schema=h,this.fetch=w}select(a,l){const{head:h=!1,count:w}=l??{},g=h?"HEAD":"GET";let p=!1;const y=(a??"*").split("").map(v=>/\s/.test(v)&&!p?"":(v==='"'&&(p=!p),v)).join("");return this.url.searchParams.set("select",y),w&&this.headers.append("Prefer",`count=${w}`),new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:h=!0}={}){var w;const g="POST";if(l&&this.headers.append("Prefer",`count=${l}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((y,v)=>y.concat(Object.keys(v)),[]);if(p.length>0){const y=[...new Set(p)].map(v=>`"${v}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(w=this.fetch)!==null&&w!==void 0?w:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:h=!1,count:w,defaultToNull:g=!0}={}){var p;const y="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),w&&this.headers.append("Prefer",`count=${w}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const v=a.reduce((_,T)=>_.concat(Object.keys(T)),[]);if(v.length>0){const _=[...new Set(v)].map(T=>`"${T}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(a,{count:l}={}){var h;const w="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:w,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:a}={}){var l;const h="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return Pa.default=r,Pa}var w0;function Uv(){if(w0)return ka;w0=1,Object.defineProperty(ka,"__esModule",{value:!0});const t=Hs,e=t.__importDefault(tm()),r=t.__importDefault(vh());class s{constructor(l,{headers:h={},schema:w,fetch:g}={}){this.url=l,this.headers=new Headers(h),this.schemaName=w,this.fetch=g}from(l){const h=new URL(`${this.url}/${l}`);return new e.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,h={},{head:w=!1,get:g=!1,count:p}={}){var y;let v;const _=new URL(`${this.url}/rpc/${l}`);let T;w||g?(v=w?"HEAD":"GET",Object.entries(h).filter(([B,F])=>F!==void 0).map(([B,F])=>[B,Array.isArray(F)?`{${F.join(",")}}`:`${F}`]).forEach(([B,F])=>{_.searchParams.append(B,F)})):(v="POST",T=h);const N=new Headers(this.headers);return p&&N.set("Prefer",`count=${p}`),new r.default({method:v,url:_,headers:N,schema:this.schemaName,body:T,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return ka.default=s,ka}Object.defineProperty(dr,"__esModule",{value:!0});var rm=dr.PostgrestError=hm=dr.PostgrestBuilder=cm=dr.PostgrestTransformBuilder=lm=dr.PostgrestFilterBuilder=om=dr.PostgrestQueryBuilder=im=dr.PostgrestClient=void 0;const Gs=Hs,nm=Gs.__importDefault(Uv());var im=dr.PostgrestClient=nm.default;const sm=Gs.__importDefault(tm());var om=dr.PostgrestQueryBuilder=sm.default;const am=Gs.__importDefault(vh());var lm=dr.PostgrestFilterBuilder=am.default;const um=Gs.__importDefault(em());var cm=dr.PostgrestTransformBuilder=um.default;const dm=Gs.__importDefault(Jp());var hm=dr.PostgrestBuilder=dm.default;const fm=Gs.__importDefault(Qp());rm=dr.PostgrestError=fm.default;var gm=dr.default={PostgrestClient:nm.default,PostgrestQueryBuilder:sm.default,PostgrestFilterBuilder:am.default,PostgrestTransformBuilder:um.default,PostgrestBuilder:dm.default,PostgrestError:fm.default};const Vv=xd({__proto__:null,get PostgrestBuilder(){return hm},get PostgrestClient(){return im},get PostgrestError(){return rm},get PostgrestFilterBuilder(){return lm},get PostgrestQueryBuilder(){return om},get PostgrestTransformBuilder(){return cm},default:gm},[dr]),{PostgrestClient:zv,PostgrestQueryBuilder:Q3,PostgrestFilterBuilder:J3,PostgrestTransformBuilder:eC,PostgrestBuilder:tC,PostgrestError:rC}=gm||Vv;class Wv{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const s=this.getWebSocketConstructor();return new s(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Hv="2.81.1",Gv=`realtime-js/${Hv}`,pm="1.0.0",Xv="2.0.0",x0=pm,od=1e4,$v=1e3,Kv=100;var Si;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Si||(Si={}));var Bt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Bt||(Bt={}));var Vr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Vr||(Vr={}));var ad;(function(t){t.websocket="websocket"})(ad||(ad={}));var Ii;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ii||(Ii={}));class qv{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,r){if(this._isArrayBuffer(e.payload))return r(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(s))}_binaryEncodePush(e){const{join_ref:r,ref:s,event:a,topic:l,payload:h}=e,w=this.META_LENGTH+r.length+s.length+l.length+a.length,g=new ArrayBuffer(this.HEADER_LENGTH+w);let p=new DataView(g),y=0;p.setUint8(y++,this.KINDS.push),p.setUint8(y++,r.length),p.setUint8(y++,s.length),p.setUint8(y++,l.length),p.setUint8(y++,a.length),Array.from(r,_=>p.setUint8(y++,_.charCodeAt(0))),Array.from(s,_=>p.setUint8(y++,_.charCodeAt(0))),Array.from(l,_=>p.setUint8(y++,_.charCodeAt(0))),Array.from(a,_=>p.setUint8(y++,_.charCodeAt(0)));var v=new Uint8Array(g.byteLength+h.byteLength);return v.set(new Uint8Array(g),0),v.set(new Uint8Array(h),g.byteLength),v.buffer}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,s;const{join_ref:a,ref:l,topic:h}=e,w=e.payload.event,g=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0),p=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+l.length+h.length+w.length,y=new ArrayBuffer(this.HEADER_LENGTH+p);let v=new DataView(y),_=0;v.setUint8(_++,this.KINDS.userBroadcastPush),v.setUint8(_++,a.length),v.setUint8(_++,l.length),v.setUint8(_++,h.length),v.setUint8(_++,w.length),v.setUint8(_++,this.BINARY_ENCODING),Array.from(a,N=>v.setUint8(_++,N.charCodeAt(0))),Array.from(l,N=>v.setUint8(_++,N.charCodeAt(0))),Array.from(h,N=>v.setUint8(_++,N.charCodeAt(0))),Array.from(w,N=>v.setUint8(_++,N.charCodeAt(0)));var T=new Uint8Array(y.byteLength+g.byteLength);return T.set(new Uint8Array(y),0),T.set(new Uint8Array(g),y.byteLength),T.buffer}_encodeJsonUserBroadcastPush(e){var r,s;const{join_ref:a,ref:l,topic:h}=e,w=e.payload.event,g=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},y=new TextEncoder().encode(JSON.stringify(g)).buffer,v=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+l.length+h.length+w.length,_=new ArrayBuffer(this.HEADER_LENGTH+v);let T=new DataView(_),N=0;T.setUint8(N++,this.KINDS.userBroadcastPush),T.setUint8(N++,a.length),T.setUint8(N++,l.length),T.setUint8(N++,h.length),T.setUint8(N++,w.length),T.setUint8(N++,this.JSON_ENCODING),Array.from(a,F=>T.setUint8(N++,F.charCodeAt(0))),Array.from(l,F=>T.setUint8(N++,F.charCodeAt(0))),Array.from(h,F=>T.setUint8(N++,F.charCodeAt(0))),Array.from(w,F=>T.setUint8(N++,F.charCodeAt(0)));var B=new Uint8Array(_.byteLength+y.byteLength);return B.set(new Uint8Array(_),0),B.set(new Uint8Array(y),_.byteLength),B.buffer}decode(e,r){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return r(s)}if(typeof e=="string"){const s=JSON.parse(e),[a,l,h,w,g]=s;return r({join_ref:a,ref:l,topic:h,event:w,payload:g})}return r({})}_binaryDecode(e){const r=new DataView(e),s=r.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.push:return this._decodePush(e,r,a);case this.KINDS.reply:return this._decodeReply(e,r,a);case this.KINDS.broadcast:return this._decodeBroadcast(e,r,a);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,a)}}_decodePush(e,r,s){const a=r.getUint8(1),l=r.getUint8(2),h=r.getUint8(3);let w=this.HEADER_LENGTH+this.META_LENGTH-1;const g=s.decode(e.slice(w,w+a));w=w+a;const p=s.decode(e.slice(w,w+l));w=w+l;const y=s.decode(e.slice(w,w+h));w=w+h;const v=JSON.parse(s.decode(e.slice(w,e.byteLength)));return{join_ref:g,ref:null,topic:p,event:y,payload:v}}_decodeReply(e,r,s){const a=r.getUint8(1),l=r.getUint8(2),h=r.getUint8(3),w=r.getUint8(4);let g=this.HEADER_LENGTH+this.META_LENGTH;const p=s.decode(e.slice(g,g+a));g=g+a;const y=s.decode(e.slice(g,g+l));g=g+l;const v=s.decode(e.slice(g,g+h));g=g+h;const _=s.decode(e.slice(g,g+w));g=g+w;const T=JSON.parse(s.decode(e.slice(g,e.byteLength))),N={status:_,response:T};return{join_ref:p,ref:y,topic:v,event:Vr.reply,payload:N}}_decodeBroadcast(e,r,s){const a=r.getUint8(1),l=r.getUint8(2);let h=this.HEADER_LENGTH+2;const w=s.decode(e.slice(h,h+a));h=h+a;const g=s.decode(e.slice(h,h+l));h=h+l;const p=JSON.parse(s.decode(e.slice(h,e.byteLength)));return{join_ref:null,ref:null,topic:w,event:g,payload:p}}_decodeUserBroadcast(e,r,s){const a=r.getUint8(1),l=r.getUint8(2),h=r.getUint8(3),w=r.getUint8(4);let g=this.HEADER_LENGTH+4;const p=s.decode(e.slice(g,g+a));g=g+a;const y=s.decode(e.slice(g,g+l));g=g+l;const v=s.decode(e.slice(g,g+h));g=g+h;const _=e.slice(g,e.byteLength),T=w===this.JSON_ENCODING?JSON.parse(s.decode(_)):_,N={type:this.BROADCAST,event:y,payload:T};return h>0&&(N.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST,payload:N}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class mm{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var lt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(lt||(lt={}));const y0=(t,e,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,h)=>(l[h]=Yv(h,t,e,a),l),{}):{}},Yv=(t,e,r,s)=>{const a=e.find(w=>w.name===t),l=a==null?void 0:a.type,h=r[t];return l&&!s.includes(l)?wm(l,h):ld(h)},wm=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return eE(e,r)}switch(t){case lt.bool:return Zv(e);case lt.float4:case lt.float8:case lt.int2:case lt.int4:case lt.int8:case lt.numeric:case lt.oid:return Qv(e);case lt.json:case lt.jsonb:return Jv(e);case lt.timestamp:return tE(e);case lt.abstime:case lt.date:case lt.daterange:case lt.int4range:case lt.int8range:case lt.money:case lt.reltime:case lt.text:case lt.time:case lt.timestamptz:case lt.timetz:case lt.tsrange:case lt.tstzrange:return ld(e);default:return ld(e)}},ld=t=>t,Zv=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Qv=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Jv=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},eE=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let l;const h=t.slice(1,r);try{l=JSON.parse("["+h+"]")}catch{l=h?h.split(","):[]}return l.map(w=>wm(e,w))}return t},tE=t=>typeof t=="string"?t.replace(" ","T"):t,xm=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class qu{constructor(e,r,s={},a=od){this.channel=e,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var v0;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(v0||(v0={}));class Io{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:h,onSync:w}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Io.syncState(this.state,a,l,h),this.pendingDiffs.forEach(g=>{this.state=Io.syncDiff(this.state,g,l,h)}),this.pendingDiffs=[],w()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:h,onSync:w}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Io.syncDiff(this.state,a,l,h),w())}),this.onJoin((a,l,h)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:h})}),this.onLeave((a,l,h)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,a){const l=this.cloneDeep(e),h=this.transformState(r),w={},g={};return this.map(l,(p,y)=>{h[p]||(g[p]=y)}),this.map(h,(p,y)=>{const v=l[p];if(v){const _=y.map(F=>F.presence_ref),T=v.map(F=>F.presence_ref),N=y.filter(F=>T.indexOf(F.presence_ref)<0),B=v.filter(F=>_.indexOf(F.presence_ref)<0);N.length>0&&(w[p]=N),B.length>0&&(g[p]=B)}else w[p]=y}),this.syncDiff(l,{joins:w,leaves:g},s,a)}static syncDiff(e,r,s,a){const{joins:l,leaves:h}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(w,g)=>{var p;const y=(p=e[w])!==null&&p!==void 0?p:[];if(e[w]=this.cloneDeep(g),y.length>0){const v=e[w].map(T=>T.presence_ref),_=y.filter(T=>v.indexOf(T.presence_ref)<0);e[w].unshift(..._)}s(w,y,g)}),this.map(h,(w,g)=>{let p=e[w];if(!p)return;const y=g.map(v=>v.presence_ref);p=p.filter(v=>y.indexOf(v.presence_ref)<0),e[w]=p,a(w,p,g),p.length===0&&delete e[w]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const a=e[s];return"metas"in a?r[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[s]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var E0;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(E0||(E0={}));var To;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(To||(To={}));var An;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(An||(An={}));class Eh{constructor(e,r={config:{}},s){var a,l;if(this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=Bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new qu(this,Vr.join,this.params,this.timeout),this.rejoinTimer=new mm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bt.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vr.reply,{},(h,w)=>{this._trigger(this._replyEventName(w),h)}),this.presence=new Io(this),this.broadcastEndpointURL=xm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var s,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Bt.closed){const{config:{broadcast:h,presence:w,private:g}}=this.params,p=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(T=>T.filter))!==null&&a!==void 0?a:[],y=!!this.bindings[To.PRESENCE]&&this.bindings[To.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,v={},_={broadcast:h,presence:Object.assign(Object.assign({},w),{enabled:y}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(T=>e==null?void 0:e(An.CHANNEL_ERROR,T)),this._onClose(()=>e==null?void 0:e(An.CLOSED)),this.updateJoinPayload(Object.assign({config:_},v)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:T})=>{var N;if(this.socket.setAuth(),T===void 0){e==null||e(An.SUBSCRIBED);return}else{const B=this.bindings.postgres_changes,F=(N=B==null?void 0:B.length)!==null&&N!==void 0?N:0,k=[];for(let I=0;I<F;I++){const b=B[I],{filter:{event:P,schema:X,table:G,filter:U}}=b,M=T&&T[I];if(M&&M.event===P&&M.schema===X&&M.table===G&&M.filter===U)k.push(Object.assign(Object.assign({},b),{id:M.id}));else{this.unsubscribe(),this.state=Bt.errored,e==null||e(An.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(An.SUBSCRIBED);return}}).receive("error",T=>{this.state=Bt.errored,e==null||e(An.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(An.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this.state===Bt.joined&&e===To.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,s)}async httpSend(e,r,s={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const h={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},w=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(w.status===202)return{success:!0};let g=w.statusText;try{const p=await w.json();g=p.error||p.message||g}catch{}return Promise.reject(new Error(g))}async send(e,r={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:h}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:h,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var h,w,g;const p=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(w=(h=this.params)===null||h===void 0?void 0:h.config)===null||w===void 0?void 0:w.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Bt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vr.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new qu(this,Vr.leave,{},e),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bt.closed,this.bindings={}}async _fetchWithTimeout(e,r,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),h=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(l),h}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new qu(this,e,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Kv){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var a,l;const h=e.toLocaleLowerCase(),{close:w,error:g,leave:p,join:y}=Vr;if(s&&[w,g,p,y].indexOf(h)>=0&&s!==this._joinRef())return;let _=this._onMessage(h,r,s);if(r&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(T=>{var N,B,F;return((N=T.filter)===null||N===void 0?void 0:N.event)==="*"||((F=(B=T.filter)===null||B===void 0?void 0:B.event)===null||F===void 0?void 0:F.toLocaleLowerCase())===h}).map(T=>T.callback(_,s)):(l=this.bindings[h])===null||l===void 0||l.filter(T=>{var N,B,F,k,I,b;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in T){const P=T.id,X=(N=T.filter)===null||N===void 0?void 0:N.event;return P&&((B=r.ids)===null||B===void 0?void 0:B.includes(P))&&(X==="*"||(X==null?void 0:X.toLocaleLowerCase())===((F=r.data)===null||F===void 0?void 0:F.type.toLocaleLowerCase()))}else{const P=(I=(k=T==null?void 0:T.filter)===null||k===void 0?void 0:k.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return P==="*"||P===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===h}).map(T=>{if(typeof _=="object"&&"ids"in _){const N=_.data,{schema:B,table:F,commit_timestamp:k,type:I,errors:b}=N;_=Object.assign(Object.assign({},{schema:B,table:F,commit_timestamp:k,eventType:I,new:{},old:{},errors:b}),this._getPayloadRecords(N))}T.callback(_,s)})}_isClosed(){return this.state===Bt.closed}_isJoined(){return this.state===Bt.joined}_isJoining(){return this.state===Bt.joining}_isLeaving(){return this.state===Bt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const a=e.toLocaleLowerCase(),l={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&Eh.isEqual(a.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vr.close,{},e)}_onError(e){this._on(Vr.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=y0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=y0(e.columns,e.old_record)),r}}const Yu=()=>{},Fa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},rE=[1e3,2e3,5e3,1e4],nE=1e4,iE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class sE{constructor(e,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=od,this.transport=null,this.heartbeatIntervalMs=Fa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yu,this.ref=0,this.reconnectTimer=null,this.vsn=x0,this.logger=Yu,this.conn=null,this.sendBuffer=[],this.serializer=new qv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${ad.websocket}`,this.httpEndpoint=xm(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Wv.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Si.connecting:return Ii.Connecting;case Si.open:return Ii.Open;case Si.closing:return Ii.Closing;default:return Ii.Closed}}isConnected(){return this.connectionState()===Ii.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new Eh(`realtime:${e}`,r,this);return this.channels.push(l),l}}push(e){const{topic:r,event:s,payload:a,ref:l}=e,h=()=>{this.encode(e,w=>{var g;(g=this.conn)===null||g===void 0||g.send(w)})};this.log("push",`${r} ${s} (${l})`,a),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close($v,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Fa.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:l,ref:h}=r,w=h?`(${h})`:"",g=l.status||"";this.log("receive",`${g} ${s} ${a} ${w}`.trim(),l),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(a,l,h)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Si.open||this.conn.readyState===Si.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vr.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${s}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([iE],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:Gv};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(Vr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new mm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,s,a,l,h,w,g,p,y,v,_,T;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:od,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Fa.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(h=e==null?void 0:e.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(w=e==null?void 0:e.heartbeatCallback)!==null&&w!==void 0?w:Yu,this.vsn=(g=e==null?void 0:e.vsn)!==null&&g!==void 0?g:x0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:N=>rE[N-1]||nE,this.vsn){case pm:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:(N,B)=>B(JSON.stringify(N)),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:(N,B)=>B(JSON.parse(N));break;case Xv:this.encode=(_=e==null?void 0:e.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(T=e==null?void 0:e.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class _h extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function xt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class oE extends _h{constructor(e,r,s){super(e),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ud extends _h{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Ch=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),aE=()=>Response,cd=t=>{if(Array.isArray(t))return t.map(r=>cd(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=cd(s)}),e},lE=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Zu=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},uE=(t,e,r)=>xe(void 0,void 0,void 0,function*(){const s=yield aE();t instanceof s&&!(r!=null&&r.noResolveJson)?t.json().then(a=>{const l=t.status||500,h=(a==null?void 0:a.statusCode)||l+"";e(new oE(Zu(a),l,h))}).catch(a=>{e(new ud(Zu(a),a))}):e(new ud(Zu(t),t))}),cE=(t,e,r,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?a:(lE(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),r))};function ia(t,e,r,s,a,l){return xe(this,void 0,void 0,function*(){return new Promise((h,w)=>{t(r,cE(e,s,a,l)).then(g=>{if(!g.ok)throw g;return s!=null&&s.noResolveJson?g:g.json()}).then(g=>h(g)).catch(g=>uE(g,w,s))})})}function Ko(t,e,r,s){return xe(this,void 0,void 0,function*(){return ia(t,"GET",e,r,s)})}function rn(t,e,r,s,a){return xe(this,void 0,void 0,function*(){return ia(t,"POST",e,s,a,r)})}function dd(t,e,r,s,a){return xe(this,void 0,void 0,function*(){return ia(t,"PUT",e,s,a,r)})}function dE(t,e,r,s){return xe(this,void 0,void 0,function*(){return ia(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Ah(t,e,r,s,a){return xe(this,void 0,void 0,function*(){return ia(t,"DELETE",e,s,a,r)})}class hE{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return xe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xt(e))return{data:null,error:e};throw e}})}}var ym;class fE{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[ym]="BlobDownloadBuilder",this.promise=null}asStream(){return new hE(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return xe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xt(e))return{data:null,error:e};throw e}})}}ym=Symbol.toStringTag;const gE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class pE{constructor(e,r={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=s,this.fetch=Ch(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,s,a){return xe(this,void 0,void 0,function*(){try{let l;const h=Object.assign(Object.assign({},_0),a);let w=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(h.upsert)});const g=h.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",h.cacheControl),g&&l.append("metadata",this.encodeMetadata(g)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",h.cacheControl),g&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(g))):(l=s,w["cache-control"]=`max-age=${h.cacheControl}`,w["content-type"]=h.contentType,g&&(w["x-metadata"]=this.toBase64(this.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!h.duplex&&(h.duplex="half")),a!=null&&a.headers&&(w=Object.assign(Object.assign({},w),a.headers));const p=this._removeEmptyFolders(r),y=this._getFinalPath(p),v=yield(e=="PUT"?dd:rn)(this.fetch,`${this.url}/object/${y}`,l,Object.assign({headers:w},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{data:{path:p,id:v.Id,fullPath:v.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(xt(l))return{data:null,error:l};throw l}})}upload(e,r,s){return xe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,a){return xe(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),h=this._getFinalPath(l),w=new URL(this.url+`/object/upload/sign/${h}`);w.searchParams.set("token",r);try{let g;const p=Object.assign({upsert:_0.upsert},a),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",s)):typeof FormData<"u"&&s instanceof FormData?(g=s,g.append("cacheControl",p.cacheControl)):(g=s,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType);const v=yield dd(this.fetch,w.toString(),g,{headers:y});return{data:{path:l,fullPath:v.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(xt(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,r){return xe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const l=yield rn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),h=new URL(this.url+l.url),w=h.searchParams.get("token");if(!w)throw new _h("No token returned by API");return{data:{signedUrl:h.toString(),path:e,token:w},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xt(s))return{data:null,error:s};throw s}})}update(e,r,s){return xe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return xe(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(xt(a))return{data:null,error:a};throw a}})}copy(e,r,s){return xe(this,void 0,void 0,function*(){try{return{data:{path:(yield rn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(xt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,s){return xe(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield rn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const h=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${h}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(xt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,s){return xe(this,void 0,void 0,function*(){try{const a=yield rn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(xt(a))return{data:null,error:a};throw a}})}download(e,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),h=l?`?${l}`:"",w=this._getFinalPath(e),g=()=>Ko(this.fetch,`${this.url}/${a}/${w}${h}`,{headers:this.headers,noResolveJson:!0});return new fE(g,this.shouldThrowOnError)}info(e){return xe(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield Ko(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:cd(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xt(s))return{data:null,error:s};throw s}})}exists(e){return xe(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield dE(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xt(s)&&s instanceof ud){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),a=[],l=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";l!==""&&a.push(l);const w=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});g!==""&&a.push(g);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${w}/public/${s}${p}`)}}}remove(e){return xe(this,void 0,void 0,function*(){try{return{data:yield Ah(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}list(e,r,s){return xe(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},gE),r),{prefix:e||""});return{data:yield rn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(xt(a))return{data:null,error:a};throw a}})}listV2(e,r){return xe(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield rn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const vm="2.81.1",Em={"X-Client-Info":`storage-js/${vm}`};class mE{constructor(e,r={},s,a){this.shouldThrowOnError=!1;const l=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Em),r),this.fetch=Ch(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return xe(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield Ko(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}getBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield Ko(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}createBucket(e){return xe(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield rn(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(xt(a))return{data:null,error:a};throw a}})}updateBucket(e,r){return xe(this,void 0,void 0,function*(){try{return{data:yield dd(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield Ah(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class wE{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Em),r),this.fetch=Ch(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}listBuckets(e){return xe(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const s=r.toString(),a=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Ko(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield Ah(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xt(r))return{data:null,error:r};throw r}})}}const bh={"X-Client-Info":`storage-js/${vm}`,"Content-Type":"application/json"};class _m extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Rr(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Qu extends _m{constructor(e,r,s){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class xE extends _m{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var C0;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(C0||(C0={}));const Sh=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),yE=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},A0=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),vE=(t,e,r)=>xe(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const a=t.status||500,l=t;if(typeof l.json=="function")l.json().then(h=>{const w=(h==null?void 0:h.statusCode)||(h==null?void 0:h.code)||a+"";e(new Qu(A0(h),a,w))}).catch(()=>{const h=a+"",w=l.statusText||`HTTP ${a} error`;e(new Qu(w,a,h))});else{const h=a+"",w=l.statusText||`HTTP ${a} error`;e(new Qu(w,a,h))}}else e(new xE(A0(t),t))}),EE=(t,e,r,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return s?(yE(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),r)):a};function _E(t,e,r,s,a,l){return xe(this,void 0,void 0,function*(){return new Promise((h,w)=>{t(r,EE(e,s,a,l)).then(g=>{if(!g.ok)throw g;if(s!=null&&s.noResolveJson)return g;const p=g.headers.get("content-type");return!p||!p.includes("application/json")?{}:g.json()}).then(g=>h(g)).catch(g=>vE(g,w,s))})})}function Nr(t,e,r,s,a){return xe(this,void 0,void 0,function*(){return _E(t,"POST",e,s,a,r)})}class CE{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bh),r),this.fetch=Sh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return xe(this,void 0,void 0,function*(){try{return{data:(yield Nr(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}getIndex(e,r){return xe(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Rr(s))return{data:null,error:s};throw s}})}listIndexes(e){return xe(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return xe(this,void 0,void 0,function*(){try{return{data:(yield Nr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Rr(s))return{data:null,error:s};throw s}})}}class AE{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bh),r),this.fetch=Sh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return xe(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Nr(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}getVectors(e){return xe(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}listVectors(e){return xe(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Nr(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}queryVectors(e){return xe(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}deleteVectors(e){return xe(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Nr(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}}class bE{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bh),r),this.fetch=Sh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:(yield Nr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}getBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}listBuckets(){return xe(this,arguments,void 0,function*(e={}){try{return{data:yield Nr(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:(yield Nr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}}class SE extends bE{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new IE(this.url,this.headers,e,this.fetch)}}class IE extends CE{constructor(e,r,s,a){super(e,r,a),this.vectorBucketName=s}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return xe(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return xe(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return xe(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return xe(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new TE(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class TE extends AE{constructor(e,r,s,a,l){super(e,r,l),this.vectorBucketName=s,this.indexName=a}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return xe(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return xe(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return xe(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return xe(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return xe(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class RE extends mE{constructor(e,r={},s,a){super(e,r,s,a)}from(e){return new pE(this.url,this.headers,e,this.fetch)}get vectors(){return new SE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new wE(this.url+"/iceberg",this.headers,this.fetch)}}const NE="2.81.1";let mo="";typeof Deno<"u"?mo="deno":typeof document<"u"?mo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?mo="react-native":mo="node";const OE={"X-Client-Info":`supabase-js-${mo}/${NE}`},kE={headers:OE},PE={schema:"public"},DE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ME={},LE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),BE=()=>Headers,FE=(t,e,r)=>{const s=LE(r),a=BE();return async(l,h)=>{var w;const g=(w=await e())!==null&&w!==void 0?w:t;let p=new a(h==null?void 0:h.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),s(l,Object.assign(Object.assign({},h),{headers:p}))}};function jE(t){return t.endsWith("/")?t:t+"/"}function UE(t,e){var r,s;const{db:a,auth:l,realtime:h,global:w}=t,{db:g,auth:p,realtime:y,global:v}=e,_={db:Object.assign(Object.assign({},g),a),auth:Object.assign(Object.assign({},p),l),realtime:Object.assign(Object.assign({},y),h),storage:{},global:Object.assign(Object.assign(Object.assign({},v),w),{headers:Object.assign(Object.assign({},(r=v==null?void 0:v.headers)!==null&&r!==void 0?r:{}),(s=w==null?void 0:w.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?_.accessToken=t.accessToken:delete _.accessToken,_}function VE(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(jE(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Cm="2.81.1",ls=30*1e3,hd=3,Ju=hd*ls,zE="http://localhost:9999",WE="supabase.auth.token",HE={"X-Client-Info":`gotrue-js/${Cm}`},fd="X-Supabase-Api-Version",Am={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},GE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,XE=10*60*1e3;class qo extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function _e(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class $E extends qo{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function KE(t){return _e(t)&&t.name==="AuthApiError"}class Ti extends qo{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class gi extends qo{constructor(e,r,s,a){super(e,s,a),this.name=r,this.status=s}}class Qr extends gi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function qE(t){return _e(t)&&t.name==="AuthSessionMissingError"}class ts extends gi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ja extends gi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ua extends gi{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function YE(t){return _e(t)&&t.name==="AuthImplicitGrantRedirectError"}class b0 extends gi{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gd extends gi{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function ec(t){return _e(t)&&t.name==="AuthRetryableFetchError"}class S0 extends gi{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class pd extends gi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Rl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),I0=` 	
\r=`.split(""),ZE=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<I0.length;e+=1)t[I0[e].charCodeAt(0)]=-2;for(let e=0;e<Rl.length;e+=1)t[Rl[e].charCodeAt(0)]=e;return t})();function T0(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Rl[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Rl[s]),e.queuedBits-=6}}function bm(t,e,r){const s=ZE[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function R0(t){const e=[],r=h=>{e.push(String.fromCodePoint(h))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=h=>{e_(h,s,r)};for(let h=0;h<t.length;h+=1)bm(t.charCodeAt(h),a,l);return e.join("")}function QE(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function JE(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}QE(s,e)}}function e_(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Rs(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)bm(t.charCodeAt(a),r,s);return new Uint8Array(e)}function t_(t){const e=[];return JE(t,r=>e.push(r)),new Uint8Array(e)}function ki(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>T0(a,r,s)),T0(null,r,s),e.join("")}function r_(t){return Math.round(Date.now()/1e3)+t}function n_(){return Symbol("auth-callback")}const Qt=()=>typeof window<"u"&&typeof document<"u",Ei={tested:!1,writable:!1},Sm=()=>{if(!Qt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ei.tested)return Ei.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ei.tested=!0,Ei.writable=!0}catch{Ei.tested=!0,Ei.writable=!1}return Ei.writable};function i_(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return r.searchParams.forEach((s,a)=>{e[a]=s}),e}const Im=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),s_=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",us=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},_i=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Wn=async(t,e)=>{await t.removeItem(e)};class ru{constructor(){this.promise=new ru.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}ru.promiseConstructor=Promise;function tc(t){const e=t.split(".");if(e.length!==3)throw new pd("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!GE.test(e[s]))throw new pd("JWT not in base64url format");return{header:JSON.parse(R0(e[0])),payload:JSON.parse(R0(e[1])),signature:Rs(e[2]),raw:{header:e[0],payload:e[1]}}}async function o_(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function a_(t,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const h=await t(l);if(!e(l,null,h)){s(h);return}}catch(h){if(!e(l,h)){a(h);return}}})()})}function l_(t){return("0"+t.toString(16)).substr(-2)}function u_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let l=0;l<56;l++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,l_).join("")}async function c_(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function d_(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await c_(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function rs(t,e,r=!1){const s=u_();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await us(t,`${e}-code-verifier`,a);const l=await d_(s);return[l,s===l?"plain":"s256"]}const h_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function f_(t){const e=t.headers.get(fd);if(!e||!e.match(h_))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function g_(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function p_(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const m_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ns(t){if(!m_.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function rc(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function w_(t,e){return new Proxy(t,{get:(r,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,s,a)}})}function N0(t){return JSON.parse(JSON.stringify(t))}const bi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),x_=[502,503,504];async function O0(t){var e;if(!s_(t))throw new gd(bi(t),0);if(x_.includes(t.status))throw new gd(bi(t),t.status);let r;try{r=await t.json()}catch(l){throw new Ti(bi(l),l)}let s;const a=f_(t);if(a&&a.getTime()>=Am["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new S0(bi(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Qr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,h)=>l&&typeof h=="string",!0))throw new S0(bi(r),t.status,r.weak_password.reasons);throw new $E(bi(r),t.status||500,s)}const y_=(t,e,r,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function Re(t,e,r,s){var a;const l=Object.assign({},s==null?void 0:s.headers);l[fd]||(l[fd]=Am["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const h=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(h.redirect_to=s.redirectTo);const w=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",g=await v_(t,e,r+w,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(g):{data:Object.assign({},g),error:null}}async function v_(t,e,r,s,a,l){const h=y_(e,s,a,l);let w;try{w=await t(r,Object.assign({},h))}catch(g){throw console.error(g),new gd(bi(g),0)}if(w.ok||await O0(w),s!=null&&s.noResolveJson)return w;try{return await w.json()}catch(g){await O0(g)}}function Jr(t){var e;let r=null;C_(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=r_(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function k0(t){const e=Jr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function qn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function E_(t){return{data:t,error:null}}function __(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:l}=t,h=Ws(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),w={action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:l},g=Object.assign({},h);return{data:{properties:w,user:g},error:null}}function P0(t){return t}function C_(t){return t.access_token&&t.refresh_token&&t.expires_in}const nc=["global","local","others"];class A_{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=Im(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=nc[0]){if(nc.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${nc.join(", ")}`);try{return await Re(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await Re(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:qn})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=Ws(e,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:__,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(_e(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Re(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:qn})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,a,l,h,w,g;try{const p={nextPage:null,lastPage:0,total:0},y=await Re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:P0});if(y.error)throw y.error;const v=await y.json(),_=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,T=(g=(w=y.headers.get("link"))===null||w===void 0?void 0:w.split(","))!==null&&g!==void 0?g:[];return T.length>0&&(T.forEach(N=>{const B=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),F=JSON.parse(N.split(";")[1].split("=")[1]);p[`${F}Page`]=B}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},v),p),error:null}}catch(p){if(_e(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){ns(e);try{return await Re(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:qn})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){ns(e);try{return await Re(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:qn})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){ns(e);try{return await Re(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:qn})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){ns(e.userId);try{const{data:r,error:s}=await Re(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(_e(r))return{data:null,error:r};throw r}}async _deleteFactor(e){ns(e.userId),ns(e.id);try{return{data:await Re(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,s,a,l,h,w,g;try{const p={nextPage:null,lastPage:0,total:0},y=await Re(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:P0});if(y.error)throw y.error;const v=await y.json(),_=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,T=(g=(w=y.headers.get("link"))===null||w===void 0?void 0:w.split(","))!==null&&g!==void 0?g:[];return T.length>0&&(T.forEach(N=>{const B=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),F=JSON.parse(N.split(";")[1].split("=")[1]);p[`${F}Page`]=B}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},v),p),error:null}}catch(p){if(_e(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await Re(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(_e(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await Re(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(_e(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await Re(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await Re(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await Re(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(_e(r))return{data:null,error:r};throw r}}}function D0(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const is={debug:!!(globalThis&&Sm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Tm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class b_ extends Tm{}async function S_(t,e,r){is.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),is.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){is.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{is.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw is.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new b_(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(is.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function I_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Rm(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function T_(t){return parseInt(t,16)}function R_(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function N_(t){var e;const{chainId:r,domain:s,expirationTime:a,issuedAt:l=new Date,nonce:h,notBefore:w,requestId:g,resources:p,scheme:y,uri:v,version:_}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const T=Rm(t.address),N=y?`${y}://${s}`:s,B=t.statement?`${t.statement}
`:"",F=`${N} wants you to sign in with your Ethereum account:
${T}

${B}`;let k=`URI: ${v}
Version: ${_}
Chain ID: ${r}${h?`
Nonce: ${h}`:""}
Issued At: ${l.toISOString()}`;if(a&&(k+=`
Expiration Time: ${a.toISOString()}`),w&&(k+=`
Not Before: ${w.toISOString()}`),g&&(k+=`
Request ID: ${g}`),p){let I=`
Resources:`;for(const b of p){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);I+=`
- ${b}`}k+=I}return`${F}
${k}`}class Nt extends Error{constructor({message:e,code:r,cause:s,name:a}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=a??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=r}}class Nl extends Nt{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function O_({error:t,options:e}){var r,s,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Nt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=l.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Nt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Nt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Nt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Nt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Nt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(w=>w.type==="public-key").length===0?new Nt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Nt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const h=window.location.hostname;if(Nm(h)){if(l.rp.id!==h)return new Nt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Nt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function k_({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Nt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Nt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(Nm(s)){if(r.rpId!==s)return new Nt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class P_{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const D_=new P_;function M_(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:s}=t,a=Ws(t,["challenge","user","excludeCredentials"]),l=Rs(e).buffer,h=Object.assign(Object.assign({},r),{id:Rs(r.id).buffer}),w=Object.assign(Object.assign({},a),{challenge:l,user:h});if(s&&s.length>0){w.excludeCredentials=new Array(s.length);for(let g=0;g<s.length;g++){const p=s[g];w.excludeCredentials[g]=Object.assign(Object.assign({},p),{id:Rs(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return w}function L_(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,s=Ws(t,["challenge","allowCredentials"]),a=Rs(e).buffer,l=Object.assign(Object.assign({},s),{challenge:a});if(r&&r.length>0){l.allowCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const w=r[h];l.allowCredentials[h]=Object.assign(Object.assign({},w),{id:Rs(w.id).buffer,type:w.type||"public-key",transports:w.transports})}}return l}function B_(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:ki(new Uint8Array(t.response.attestationObject)),clientDataJSON:ki(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function F_(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,s=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ki(new Uint8Array(a.authenticatorData)),clientDataJSON:ki(new Uint8Array(a.clientDataJSON)),signature:ki(new Uint8Array(a.signature)),userHandle:a.userHandle?ki(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Nm(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function M0(){var t,e;return!!(Qt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function j_(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Nl("Browser returned unexpected credential type",e)}:{data:null,error:new Nl("Empty credential response",e)}}catch(e){return{data:null,error:O_({error:e,options:t})}}}async function U_(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Nl("Browser returned unexpected credential type",e)}:{data:null,error:new Nl("Empty credential response",e)}}catch(e){return{data:null,error:k_({error:e,options:t})}}}const V_={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},z_={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ol(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of t)if(a)for(const l in a){const h=a[l];if(h!==void 0)if(Array.isArray(h))s[l]=h;else if(r(h))s[l]=h;else if(e(h)){const w=s[l];e(w)?s[l]=Ol(w,h):s[l]=Ol(h)}else s[l]=h}return s}function W_(t,e){return Ol(V_,t,e||{})}function H_(t,e){return Ol(z_,t,e||{})}class G_{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:s,signal:a},l){try{const{data:h,error:w}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!h)return{data:null,error:w};const g=a??D_.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:p}=h.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(h.webauthn.type){case"create":{const p=W_(h.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:y,error:v}=await j_({publicKey:p,signal:g});return y?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}case"request":{const p=H_(h.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:y,error:v}=await U_(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:p,signal:g}));return y?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}}}catch(h){return _e(h)?{data:null,error:h}:{data:null,error:new Ti("Unexpected error in challenge",h)}}}async _verify({challengeId:e,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!r)return{data:null,error:new qo("rpId is required for WebAuthn authentication")};try{if(!M0())return{data:null,error:new Ti("Browser does not support WebAuthn",null)};const{data:h,error:w}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:s},signal:a},{request:l});if(!h)return{data:null,error:w};const{webauthn:g}=h;return this._verify({factorId:e,challengeId:h.challengeId,webauthn:{type:g.type,rpId:r,rpOrigins:s,credential_response:g.credential_response}})}catch(h){return _e(h)?{data:null,error:h}:{data:null,error:new Ti("Unexpected error in authenticate",h)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!r)return{data:null,error:new qo("rpId is required for WebAuthn registration")};try{if(!M0())return{data:null,error:new Ti("Browser does not support WebAuthn",null)};const{data:h,error:w}=await this._enroll({friendlyName:e});if(!h)return await this.client.mfa.listFactors().then(y=>{var v;return(v=y.data)===null||v===void 0?void 0:v.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===e&&_.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:w};const{data:g,error:p}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:a},{create:l});return g?this._verify({factorId:h.id,challengeId:g.challengeId,webauthn:{rpId:r,rpOrigins:s,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:p}}catch(h){return _e(h)?{data:null,error:h}:{data:null,error:new Ti("Unexpected error in register",h)}}}}I_();const X_={url:zE,storageKey:WE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:HE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function L0(t,e,r){return await r()}const ss={};class Yo{get jwks(){var e,r;return(r=(e=ss[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){ss[this.storageKey]=Object.assign(Object.assign({},ss[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=ss[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ss[this.storageKey]=Object.assign(Object.assign({},ss[this.storageKey]),{cachedAt:e})}constructor(e){var r,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},X_),e);if(this.storageKey=l.storageKey,this.instanceID=(r=Yo.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Yo.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Qt()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new A_({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Im(l.fetch),this.lock=l.lock||L0,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:Qt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=S_:this.lock=L0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new G_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Sm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=D0(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=D0(this.memoryStorage)),Qt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Cm}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},s="none";if(Qt()&&(r=i_(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),Qt()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(r,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),YE(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:h,redirectType:w}=a;return this._debug("#_initialize()","detected session in URL",h,"redirect type",w),await this._saveSession(h),setTimeout(async()=>{w==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return _e(r)?this._returnResult({error:r}):this._returnResult({error:new Ti("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,a;try{const l=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Jr}),{data:h,error:w}=l;if(w||!h)return this._returnResult({data:{user:null,session:null},error:w});const g=h.session,p=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(_e(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var r,s,a;try{let l;if("email"in e){const{email:y,password:v,options:_}=e;let T=null,N=null;this.flowType==="pkce"&&([T,N]=await rs(this.storage,this.storageKey)),l=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:y,password:v,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:T,code_challenge_method:N},xform:Jr})}else if("phone"in e){const{phone:y,password:v,options:_}=e;l=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:v,data:(s=_==null?void 0:_.data)!==null&&s!==void 0?s:{},channel:(a=_==null?void 0:_.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:Jr})}else throw new ja("You must provide either an email or phone number and a password");const{data:h,error:w}=l;if(w||!h)return this._returnResult({data:{user:null,session:null},error:w});const g=h.session,p=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(_e(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let r;if("email"in e){const{email:l,password:h,options:w}=e;r=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:h,gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:k0})}else if("phone"in e){const{phone:l,password:h,options:w}=e;r=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:h,gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:k0})}else throw new ja("You must provide either an email or phone number and a password");const{data:s,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const l=new ts;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(_e(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,s,a,l,h,w,g,p,y,v,_;let T,N;if("message"in e)T=e.message,N=e.signature;else{const{chain:B,wallet:F,statement:k,options:I}=e;let b;if(Qt())if(typeof F=="object")b=F;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")b=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof F!="object"||!(I!=null&&I.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=F}const P=new URL((r=I==null?void 0:I.url)!==null&&r!==void 0?r:window.location.href),X=await b.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!X||X.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const G=Rm(X[0]);let U=(s=I==null?void 0:I.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!U){const R=await b.request({method:"eth_chainId"});U=T_(R)}const M={domain:P.host,address:G,statement:k,uri:P.href,version:"1",chainId:U,nonce:(a=I==null?void 0:I.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(h=(l=I==null?void 0:I.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(w=I==null?void 0:I.signInWithEthereum)===null||w===void 0?void 0:w.expirationTime,notBefore:(g=I==null?void 0:I.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(p=I==null?void 0:I.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(y=I==null?void 0:I.signInWithEthereum)===null||y===void 0?void 0:y.resources};T=N_(M),N=await b.request({method:"personal_sign",params:[R_(T),G]})}try{const{data:B,error:F}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:N},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Jr});if(F)throw F;if(!B||!B.session||!B.user){const k=new ts;return this._returnResult({data:{user:null,session:null},error:k})}return B.session&&(await this._saveSession(B.session),await this._notifyAllSubscribers("SIGNED_IN",B.session)),this._returnResult({data:Object.assign({},B),error:F})}catch(B){if(_e(B))return this._returnResult({data:{user:null,session:null},error:B});throw B}}async signInWithSolana(e){var r,s,a,l,h,w,g,p,y,v,_,T;let N,B;if("message"in e)N=e.message,B=e.signature;else{const{chain:F,wallet:k,statement:I,options:b}=e;let P;if(Qt())if(typeof k=="object")P=k;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))P=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=k}const X=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in P&&P.signIn){const G=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:X.host,uri:X.href}),I?{statement:I}:null));let U;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")U=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)U=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)N=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),B=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${X.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${X.href}`,`Issued At: ${(a=(s=b==null?void 0:b.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((h=b==null?void 0:b.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((w=b==null?void 0:b.signInWithSolana)===null||w===void 0)&&w.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((g=b==null?void 0:b.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((p=b==null?void 0:b.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((v=(y=b==null?void 0:b.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||v===void 0)&&v.length?["Resources",...b.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const G=await P.signMessage(new TextEncoder().encode(N),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");B=G}}try{const{data:F,error:k}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:ki(B)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:Jr});if(k)throw k;if(!F||!F.session||!F.user){const I=new ts;return this._returnResult({data:{user:null,session:null},error:I})}return F.session&&(await this._saveSession(F.session),await this._notifyAllSubscribers("SIGNED_IN",F.session)),this._returnResult({data:Object.assign({},F),error:k})}catch(F){if(_e(F))return this._returnResult({data:{user:null,session:null},error:F});throw F}}async _exchangeCodeForSession(e){const r=await _i(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{const{data:l,error:h}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Jr});if(await Wn(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!l||!l.session||!l.user){const w=new ts;return this._returnResult({data:{user:null,session:null,redirectType:null},error:w})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:h})}catch(l){if(_e(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:r,provider:s,token:a,access_token:l,nonce:h}=e,w=await Re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:h,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Jr}),{data:g,error:p}=w;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g||!g.session||!g.user){const y=new ts;return this._returnResult({data:{user:null,session:null},error:y})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:p})}catch(r){if(_e(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,s,a,l,h;try{if("email"in e){const{email:w,options:g}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await rs(this.storage,this.storageKey));const{error:v}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:w,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},create_user:(s=g==null?void 0:g.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in e){const{phone:w,options:g}=e,{data:p,error:y}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:w,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(h=g==null?void 0:g.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:y})}throw new ja("You must provide either an email or phone number.")}catch(w){if(_e(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async verifyOtp(e){var r,s;try{let a,l;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:h,error:w}=await Re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:Jr});if(w)throw w;if(!h)throw new Error("An error occurred on token verification.");const g=h.session,p=h.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(a){if(_e(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var r,s,a,l,h;try{let w=null,g=null;this.flowType==="pkce"&&([w,g]=await rs(this.storage,this.storageKey));const p=await Re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:w,code_challenge_method:g}),headers:this.headers,xform:E_});return!((l=p.data)===null||l===void 0)&&l.url&&Qt()&&!(!((h=e.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(w){if(_e(w))return this._returnResult({data:null,error:w});throw w}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new Qr;const{error:a}=await Re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(_e(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:h}=await Re(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:h,error:w}=await Re(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:w})}throw new ja("You must provide either an email or phone number and a type")}catch(r){if(_e(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await _i(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Ju:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const h=await _i(this.userStorage,this.storageKey+"-user");h!=null&&h.user?e.user=h.user:e.user=rc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};e.user=w_(e.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:qn}):await this._useSession(async r=>{var s,a,l;const{data:h,error:w}=r;if(w)throw w;return!(!((s=h.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qr}:await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=h.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:qn})})}catch(r){if(_e(r))return qE(r)&&(await this._removeSession(),await Wn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new Qr;const h=a.session;let w=null,g=null;this.flowType==="pkce"&&e.email!=null&&([w,g]=await rs(this.storage,this.storageKey));const{data:p,error:y}=await Re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:w,code_challenge_method:g}),jwt:h.access_token,xform:qn});if(y)throw y;return h.user=p.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(s){if(_e(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Qr;const r=Date.now()/1e3;let s=r,a=!0,l=null;const{payload:h}=tc(e.access_token);if(h.exp&&(s=h.exp,a=s<=r),a){const{data:w,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!w)return{data:{user:null,session:null},error:null};l=w}else{const{data:w,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:w.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(r){if(_e(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:h,error:w}=r;if(w)throw w;e=(s=h.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Qr;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(_e(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Qt())throw new Ua("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ua(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new b0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ua("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new b0("No code detected.");const{data:I,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:h,expires_in:w,expires_at:g,token_type:p}=e;if(!l||!w||!h||!p)throw new Ua("No session defined in URL");const y=Math.round(Date.now()/1e3),v=parseInt(w);let _=y+v;g&&(_=parseInt(g));const T=_-y;T*1e3<=ls&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${v}s`);const N=_-v;y-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,_,y):y-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,_,y);const{data:B,error:F}=await this._getUser(l);if(F)throw F;const k={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:v,expires_at:_,refresh_token:h,token_type:p,user:B.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:k,redirectType:e.type},error:null})}catch(s){if(_e(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await _i(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:l}=r;if(l)return this._returnResult({error:l});const h=(s=a.session)===null||s===void 0?void 0:s.access_token;if(h){const{error:w}=await this.admin.signOut(h,e);if(w&&!(KE(w)&&(w.status===404||w.status===401||w.status===403)))return this._returnResult({error:w})}return e!=="others"&&(await this._removeSession(),await Wn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=n_(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,a;try{const{data:{session:l},error:h}=r;if(h)throw h;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await rs(this.storage,this.storageKey,!0));try{return await Re(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(_e(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(_e(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:s,error:a}=await this._useSession(async l=>{var h,w,g,p,y;const{data:v,error:_}=l;if(_)throw _;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(h=e.options)===null||h===void 0?void 0:h.redirectTo,scopes:(w=e.options)===null||w===void 0?void 0:w.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Re(this.fetch,"GET",T,{headers:this.headers,jwt:(y=(p=v.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(a)throw a;return Qt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(_e(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var s;try{const{error:a,data:{session:l}}=r;if(a)throw a;const{options:h,provider:w,token:g,access_token:p,nonce:y}=e,v=await Re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:w,id_token:g,access_token:p,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Jr}),{data:_,error:T}=v;return T?this._returnResult({data:{user:null,session:null},error:T}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new ts}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:T}))}catch(a){if(_e(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,a;const{data:l,error:h}=r;if(h)throw h;return await Re(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(_e(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await a_(async a=>(a>0&&await o_(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Jr})),(a,l)=>{const h=200*Math.pow(2,a);return l&&ec(l)&&Date.now()+h-s<ls})}catch(s){if(this._debug(r,"error",s),_e(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),Qt()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await _i(this.storage,this.storageKey);if(a&&this.userStorage){let h=await _i(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:a.user},await us(this.userStorage,this.storageKey+"-user",h)),a.user=(e=h==null?void 0:h.user)!==null&&e!==void 0?e:rc()}else if(a&&!a.user&&!a.user){const h=await _i(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(a.user=h.user,await Wn(this.storage,this.storageKey+"-user"),await us(this.storage,this.storageKey,a)):a.user=rc()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ju;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Ju}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:h}=await this._callRefreshToken(a.refresh_token);h&&(console.error(h),ec(h)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:w}=await this._getUser(a.access_token);!w&&(h!=null&&h.user)?(a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(s,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new Qr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new ru;const{data:l,error:h}=await this._refreshAccessToken(e);if(h)throw h;if(!l.session)throw new Qr;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const w={data:l.session,error:null};return this.refreshingDeferred.resolve(w),w}catch(l){if(this._debug(a,"error",l),_e(l)){const h={data:null,error:l};return ec(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(h),h}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const l=[],h=Array.from(this.stateChangeEmitters.values()).map(async w=>{try{await w.callback(e,r)}catch(g){l.push(g)}});if(await Promise.all(h),l.length>0){for(let w=0;w<l.length;w+=1)console.error(l[w]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await us(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const l=N0(a);await us(this.storage,this.storageKey,l)}else{const a=N0(r);await us(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Wn(this.storage,this.storageKey),await Wn(this.storage,this.storageKey+"-code-verifier"),await Wn(this.storage,this.storageKey+"-user"),this.userStorage&&await Wn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ls);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/ls);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${ls}ms, refresh threshold is ${hd} ticks`),a<=hd&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Tm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,h]=await rs(this.storage,this.storageKey),w=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(h)}`});a.push(w.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:a,error:l}=r;return l?this._returnResult({data:null,error:l}):await Re(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(_e(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,a;const{data:l,error:h}=r;if(h)return this._returnResult({data:null,error:h});const w=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:p}=await Re(this.fetch,"POST",`${this.url}/factors`,{body:w,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&g.type==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(r){if(_e(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:l}=r;if(l)return this._returnResult({data:null,error:l});const h=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?B_(e.webauthn.credential_response):F_(e.webauthn.credential_response)})}:{code:e.code}),{data:w,error:g}=await Re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:h,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+w.expires_in},w)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",w),this._returnResult({data:w,error:g}))})}catch(r){if(_e(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:l}=r;if(l)return this._returnResult({data:null,error:l});const h=await Re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(h.error)return h;const{data:w}=h;if(w.type!=="webauthn")return{data:w,error:null};switch(w.webauthn.type){case"create":return{data:Object.assign(Object.assign({},w),{webauthn:Object.assign(Object.assign({},w.webauthn),{credential_options:Object.assign(Object.assign({},w.webauthn.credential_options),{publicKey:M_(w.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},w),{webauthn:Object.assign(Object.assign({},w.webauthn),{credential_options:Object.assign(Object.assign({},w.webauthn.credential_options),{publicKey:L_(w.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(_e(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=tc(s.access_token);let h=null;l.aal&&(h=l.aal);let w=h;((r=(e=s.user.factors)===null||e===void 0?void 0:e.filter(y=>y.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(w="aal2");const p=l.amr||[];return{data:{currentLevel:h,nextLevel:w,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?await Re(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Qr})})}catch(r){if(_e(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Qr});const h=await Re(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:w=>({data:w,error:null})});return h.data&&h.data.redirect_url&&Qt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(s){if(_e(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Qr});const h=await Re(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:w=>({data:w,error:null})});return h.data&&h.data.redirect_url&&Qt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(s){if(_e(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(w=>w.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(w=>w.kid===e),s&&this.jwks_cached_at+XE>a)return s;const{data:l,error:h}=await Re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,s=l.keys.find(w=>w.kid===e),!s)?null:s}async getClaims(e,r={}){try{let s=e;if(!s){const{data:T,error:N}=await this.getSession();if(N||!T.session)return this._returnResult({data:null,error:N});s=T.session.access_token}const{header:a,payload:l,signature:h,raw:{header:w,payload:g}}=tc(s);r!=null&&r.allowExpired||g_(l.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!p){const{error:T}=await this.getUser(s);if(T)throw T;return{data:{claims:l,header:a,signature:h},error:null}}const y=p_(a.alg),v=await crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!await crypto.subtle.verify(y,v,h,t_(`${w}.${g}`)))throw new pd("Invalid JWT signature");return{data:{claims:l,header:a,signature:h},error:null}}catch(s){if(_e(s))return this._returnResult({data:null,error:s});throw s}}}Yo.nextInstanceID={};const $_=Yo;class K_ extends $_{constructor(e){super(e)}}class q_{constructor(e,r,s){var a,l,h;this.supabaseUrl=e,this.supabaseKey=r;const w=VE(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",w),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",w),this.storageUrl=new URL("storage/v1",w),this.functionsUrl=new URL("functions/v1",w);const g=`sb-${w.hostname.split(".")[0]}-auth-token`,p={db:PE,realtime:ME,auth:Object.assign(Object.assign({},DE),{storageKey:g}),global:kE},y=UE(s??{},p);this.storageKey=(a=y.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=y.global.headers)!==null&&l!==void 0?l:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(v,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=y.auth)!==null&&h!==void 0?h:{},this.headers,y.global.fetch),this.fetch=FE(r,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new zv(new URL("rest/v1",w).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new RE(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new jv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:l,storageKey:h,flowType:w,lock:g,debug:p,throwOnError:y},v,_){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new K_({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),v),storageKey:h,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:l,flowType:w,lock:g,debug:p,throwOnError:y,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(N=>N.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new sE(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Y_=(t,e,r)=>new q_(t,e,r);function Z_(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Z_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Q_="https://hricrwfhshdmchbpfpqh.supabase.co",J_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhyaWNyd2Zoc2hkbWNoYnBmcHFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwMzkzMzcsImV4cCI6MjA3ODYxNTMzN30.kCdMMdoXayK3HwoGPMHkj1qLUWTu-21U5n2vVpPnAfo",Gt=Y_(Q_,J_);function e3(){const t=mh(),[e,r]=Y.useState(!1),[s,a]=Y.useState({nome:"",data:"",hora:"",local:""}),l=w=>{a({...s,[w.target.name]:w.target.value})},h=async w=>{if(w.preventDefault(),!s.nome||!s.data||!s.hora||!s.local){Be.error("Por favor, preencha todos os campos");return}r(!0);try{const{data:g,error:p}=await Gt.from("eventos").insert([s]).select().single();if(p)throw p;localStorage.setItem("currentEventId",g.id),Be.success("Evento criado com sucesso!"),t("/upload")}catch(g){console.error("Erro ao criar evento:",g),Be.error("Erro ao criar evento: "+g.message)}finally{r(!1)}};return L.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[L.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Criar Novo Evento"}),L.jsxs("form",{onSubmit:h,className:"space-y-4",children:[L.jsxs("div",{children:[L.jsx("label",{htmlFor:"nome",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Evento"}),L.jsx("input",{type:"text",id:"nome",name:"nome",value:s.nome,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Casamento Joo e Maria",required:!0})]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[L.jsxs("div",{children:[L.jsx("label",{htmlFor:"data",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data"}),L.jsx("input",{type:"date",id:"data",name:"data",value:s.data,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),L.jsxs("div",{children:[L.jsx("label",{htmlFor:"hora",className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora"}),L.jsx("input",{type:"time",id:"hora",name:"hora",value:s.hora,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),L.jsxs("div",{children:[L.jsx("label",{htmlFor:"local",className:"block text-sm font-medium text-gray-700 mb-1",children:"Local"}),L.jsx("input",{type:"text",id:"local",name:"local",value:s.local,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Quinta do Palcio, Lisboa",required:!0})]}),L.jsx("button",{type:"submit",disabled:e,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition",children:e?"A criar evento...":"Criar Evento"})]})]}),L.jsx("div",{className:"mt-6 bg-blue-50 border-l-4 border-blue-400 p-4",children:L.jsxs("div",{className:"flex",children:[L.jsx("div",{className:"flex-shrink-0",children:L.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:L.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),L.jsx("div",{className:"ml-3",children:L.jsx("p",{className:"text-sm text-blue-700",children:"Aps criar o evento, ser redirecionado para fazer upload da lista de convidados."})})]})})]})}var Om={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((r,s)=>{t.exports=s()})(os,function r(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},a,l=!s.document&&!!s.postMessage,h=s.IS_PAPA_WORKER||!1,w={},g=0,p={};function y(M){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(R){var z=X(R);z.chunkSize=parseInt(z.chunkSize),R.step||R.chunk||(z.chunkSize=null),this._handle=new B(z),(this._handle.streamer=this)._config=z}).call(this,M),this.parseChunk=function(R,z){var J=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<J){let ue=this._config.newline;ue||(Z=this._config.quoteChar||'"',ue=this._handle.guessLineEndings(R,Z)),R=[...R.split(ue).slice(J)].join(ue)}this.isFirstChunk&&U(this._config.beforeFirstChunk)&&(Z=this._config.beforeFirstChunk(R))!==void 0&&(R=Z),this.isFirstChunk=!1,this._halted=!1;var J=this._partialLine+R,Z=(this._partialLine="",this._handle.parse(J,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(R=Z.meta.cursor,J=(this._finished||(this._partialLine=J.substring(R-this._baseIndex),this._baseIndex=R),Z&&Z.data&&(this._rowCount+=Z.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),h)s.postMessage({results:Z,workerId:p.WORKER_ID,finished:J});else if(U(this._config.chunk)&&!z){if(this._config.chunk(Z,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=Z=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(Z.data),this._completeResults.errors=this._completeResults.errors.concat(Z.errors),this._completeResults.meta=Z.meta),this._completed||!J||!U(this._config.complete)||Z&&Z.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),J||Z&&Z.meta.paused||this._nextChunk(),Z}this._halted=!0},this._sendError=function(R){U(this._config.error)?this._config.error(R):h&&this._config.error&&s.postMessage({workerId:p.WORKER_ID,error:R,finished:!1})}}function v(M){var R;(M=M||{}).chunkSize||(M.chunkSize=p.RemoteChunkSize),y.call(this,M),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(z){this._input=z,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(R=new XMLHttpRequest,this._config.withCredentials&&(R.withCredentials=this._config.withCredentials),l||(R.onload=G(this._chunkLoaded,this),R.onerror=G(this._chunkError,this)),R.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var z,J=this._config.downloadRequestHeaders;for(z in J)R.setRequestHeader(z,J[z])}var Z;this._config.chunkSize&&(Z=this._start+this._config.chunkSize-1,R.setRequestHeader("Range","bytes="+this._start+"-"+Z));try{R.send(this._config.downloadRequestBody)}catch(ue){this._chunkError(ue.message)}l&&R.status===0&&this._chunkError()}},this._chunkLoaded=function(){R.readyState===4&&(R.status<200||400<=R.status?this._chunkError():(this._start+=this._config.chunkSize||R.responseText.length,this._finished=!this._config.chunkSize||this._start>=(z=>(z=z.getResponseHeader("Content-Range"))!==null?parseInt(z.substring(z.lastIndexOf("/")+1)):-1)(R),this.parseChunk(R.responseText)))},this._chunkError=function(z){z=R.statusText||z,this._sendError(new Error(z))}}function _(M){(M=M||{}).chunkSize||(M.chunkSize=p.LocalChunkSize),y.call(this,M);var R,z,J=typeof FileReader<"u";this.stream=function(Z){this._input=Z,z=Z.slice||Z.webkitSlice||Z.mozSlice,J?((R=new FileReader).onload=G(this._chunkLoaded,this),R.onerror=G(this._chunkError,this)):R=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var Z=this._input,ue=(this._config.chunkSize&&(ue=Math.min(this._start+this._config.chunkSize,this._input.size),Z=z.call(Z,this._start,ue)),R.readAsText(Z,this._config.encoding));J||this._chunkLoaded({target:{result:ue}})},this._chunkLoaded=function(Z){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(Z.target.result)},this._chunkError=function(){this._sendError(R.error)}}function T(M){var R;y.call(this,M=M||{}),this.stream=function(z){return R=z,this._nextChunk()},this._nextChunk=function(){var z,J;if(!this._finished)return z=this._config.chunkSize,R=z?(J=R.substring(0,z),R.substring(z)):(J=R,""),this._finished=!R,this.parseChunk(J)}}function N(M){y.call(this,M=M||{});var R=[],z=!0,J=!1;this.pause=function(){y.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){y.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(Z){this._input=Z,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){J&&R.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),R.length?this.parseChunk(R.shift()):z=!0},this._streamData=G(function(Z){try{R.push(typeof Z=="string"?Z:Z.toString(this._config.encoding)),z&&(z=!1,this._checkIsFinished(),this.parseChunk(R.shift()))}catch(ue){this._streamError(ue)}},this),this._streamError=G(function(Z){this._streamCleanUp(),this._sendError(Z)},this),this._streamEnd=G(function(){this._streamCleanUp(),J=!0,this._streamData("")},this),this._streamCleanUp=G(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function B(M){var R,z,J,Z,ue=Math.pow(2,53),Ne=-ue,q=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Ve=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ae=this,re=0,te=0,we=!1,me=!1,ce=[],he={data:[],errors:[],meta:{}};function Oe(Ce){return M.skipEmptyLines==="greedy"?Ce.join("").trim()==="":Ce.length===1&&Ce[0].length===0}function Je(){if(he&&J&&(It("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),J=!1),M.skipEmptyLines&&(he.data=he.data.filter(function(Ze){return!Oe(Ze)})),le()){let Ze=function(Ie,Xe){U(M.transformHeader)&&(Ie=M.transformHeader(Ie,Xe)),ce.push(Ie)};var be=Ze;if(he)if(Array.isArray(he.data[0])){for(var Ce=0;le()&&Ce<he.data.length;Ce++)he.data[Ce].forEach(Ze);he.data.splice(0,1)}else he.data.forEach(Ze)}function Fe(Ze,Ie){for(var Xe=M.header?{}:[],Me=0;Me<Ze.length;Me++){var ke=Me,We=Ze[Me],We=((ve,ye)=>(gt=>(M.dynamicTypingFunction&&M.dynamicTyping[gt]===void 0&&(M.dynamicTyping[gt]=M.dynamicTypingFunction(gt)),(M.dynamicTyping[gt]||M.dynamicTyping)===!0))(ve)?ye==="true"||ye==="TRUE"||ye!=="false"&&ye!=="FALSE"&&((gt=>{if(q.test(gt)&&(gt=parseFloat(gt),Ne<gt&&gt<ue))return 1})(ye)?parseFloat(ye):Ve.test(ye)?new Date(ye):ye===""?null:ye):ye)(ke=M.header?Me>=ce.length?"__parsed_extra":ce[Me]:ke,We=M.transform?M.transform(We,ke):We);ke==="__parsed_extra"?(Xe[ke]=Xe[ke]||[],Xe[ke].push(We)):Xe[ke]=We}return M.header&&(Me>ce.length?It("FieldMismatch","TooManyFields","Too many fields: expected "+ce.length+" fields but parsed "+Me,te+Ie):Me<ce.length&&It("FieldMismatch","TooFewFields","Too few fields: expected "+ce.length+" fields but parsed "+Me,te+Ie)),Xe}var et;he&&(M.header||M.dynamicTyping||M.transform)&&(et=1,!he.data.length||Array.isArray(he.data[0])?(he.data=he.data.map(Fe),et=he.data.length):he.data=Fe(he.data,0),M.header&&he.meta&&(he.meta.fields=ce),te+=et)}function le(){return M.header&&ce.length===0}function It(Ce,Fe,et,be){Ce={type:Ce,code:Fe,message:et},be!==void 0&&(Ce.row=be),he.errors.push(Ce)}U(M.step)&&(Z=M.step,M.step=function(Ce){he=Ce,le()?Je():(Je(),he.data.length!==0&&(re+=Ce.data.length,M.preview&&re>M.preview?z.abort():(he.data=he.data[0],Z(he,ae))))}),this.parse=function(Ce,Fe,et){var be=M.quoteChar||'"',be=(M.newline||(M.newline=this.guessLineEndings(Ce,be)),J=!1,M.delimiter?U(M.delimiter)&&(M.delimiter=M.delimiter(Ce),he.meta.delimiter=M.delimiter):((be=((Ze,Ie,Xe,Me,ke)=>{var We,ve,ye,gt;ke=ke||[",","	","|",";",p.RECORD_SEP,p.UNIT_SEP];for(var de=0;de<ke.length;de++){for(var lr,Mn=ke[de],st=0,pr=0,qe=0,$t=(ye=void 0,new k({comments:Me,delimiter:Mn,newline:Ie,preview:10}).parse(Ze)),Vt=0;Vt<$t.data.length;Vt++)Xe&&Oe($t.data[Vt])?qe++:(lr=$t.data[Vt].length,pr+=lr,ye===void 0?ye=lr:0<lr&&(st+=Math.abs(lr-ye),ye=lr));0<$t.data.length&&(pr/=$t.data.length-qe),(ve===void 0||st<=ve)&&(gt===void 0||gt<pr)&&1.99<pr&&(ve=st,We=Mn,gt=pr)}return{successful:!!(M.delimiter=We),bestDelimiter:We}})(Ce,M.newline,M.skipEmptyLines,M.comments,M.delimitersToGuess)).successful?M.delimiter=be.bestDelimiter:(J=!0,M.delimiter=p.DefaultDelimiter),he.meta.delimiter=M.delimiter),X(M));return M.preview&&M.header&&be.preview++,R=Ce,z=new k(be),he=z.parse(R,Fe,et),Je(),we?{meta:{paused:!0}}:he||{meta:{paused:!1}}},this.paused=function(){return we},this.pause=function(){we=!0,z.abort(),R=U(M.chunk)?"":R.substring(z.getCharIndex())},this.resume=function(){ae.streamer._halted?(we=!1,ae.streamer.parseChunk(R,!0)):setTimeout(ae.resume,3)},this.aborted=function(){return me},this.abort=function(){me=!0,z.abort(),he.meta.aborted=!0,U(M.complete)&&M.complete(he),R=""},this.guessLineEndings=function(Ze,be){Ze=Ze.substring(0,1048576);var be=new RegExp(F(be)+"([^]*?)"+F(be),"gm"),et=(Ze=Ze.replace(be,"")).split("\r"),be=Ze.split(`
`),Ze=1<be.length&&be[0].length<et[0].length;if(et.length===1||Ze)return`
`;for(var Ie=0,Xe=0;Xe<et.length;Xe++)et[Xe][0]===`
`&&Ie++;return Ie>=et.length/2?`\r
`:"\r"}}function F(M){return M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function k(M){var R=(M=M||{}).delimiter,z=M.newline,J=M.comments,Z=M.step,ue=M.preview,Ne=M.fastMode,q=null,Ve=!1,ae=M.quoteChar==null?'"':M.quoteChar,re=ae;if(M.escapeChar!==void 0&&(re=M.escapeChar),(typeof R!="string"||-1<p.BAD_DELIMITERS.indexOf(R))&&(R=","),J===R)throw new Error("Comment character same as delimiter");J===!0?J="#":(typeof J!="string"||-1<p.BAD_DELIMITERS.indexOf(J))&&(J=!1),z!==`
`&&z!=="\r"&&z!==`\r
`&&(z=`
`);var te=0,we=!1;this.parse=function(me,ce,he){if(typeof me!="string")throw new Error("Input must be a string");var Oe=me.length,Je=R.length,le=z.length,It=J.length,Ce=U(Z),Fe=[],et=[],be=[],Ze=te=0;if(!me)return st();if(Ne||Ne!==!1&&me.indexOf(ae)===-1){for(var Ie=me.split(z),Xe=0;Xe<Ie.length;Xe++){if(be=Ie[Xe],te+=be.length,Xe!==Ie.length-1)te+=z.length;else if(he)return st();if(!J||be.substring(0,It)!==J){if(Ce){if(Fe=[],gt(be.split(R)),pr(),we)return st()}else gt(be.split(R));if(ue&&ue<=Xe)return Fe=Fe.slice(0,ue),st(!0)}}return st()}for(var Me=me.indexOf(R,te),ke=me.indexOf(z,te),We=new RegExp(F(re)+F(ae),"g"),ve=me.indexOf(ae,te);;)if(me[te]===ae)for(ve=te,te++;;){if((ve=me.indexOf(ae,ve+1))===-1)return he||et.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Fe.length,index:te}),lr();if(ve===Oe-1)return lr(me.substring(te,ve).replace(We,ae));if(ae===re&&me[ve+1]===re)ve++;else if(ae===re||ve===0||me[ve-1]!==re){Me!==-1&&Me<ve+1&&(Me=me.indexOf(R,ve+1));var ye=de((ke=ke!==-1&&ke<ve+1?me.indexOf(z,ve+1):ke)===-1?Me:Math.min(Me,ke));if(me.substr(ve+1+ye,Je)===R){be.push(me.substring(te,ve).replace(We,ae)),me[te=ve+1+ye+Je]!==ae&&(ve=me.indexOf(ae,te)),Me=me.indexOf(R,te),ke=me.indexOf(z,te);break}if(ye=de(ke),me.substring(ve+1+ye,ve+1+ye+le)===z){if(be.push(me.substring(te,ve).replace(We,ae)),Mn(ve+1+ye+le),Me=me.indexOf(R,te),ve=me.indexOf(ae,te),Ce&&(pr(),we))return st();if(ue&&Fe.length>=ue)return st(!0);break}et.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Fe.length,index:te}),ve++}}else if(J&&be.length===0&&me.substring(te,te+It)===J){if(ke===-1)return st();te=ke+le,ke=me.indexOf(z,te),Me=me.indexOf(R,te)}else if(Me!==-1&&(Me<ke||ke===-1))be.push(me.substring(te,Me)),te=Me+Je,Me=me.indexOf(R,te);else{if(ke===-1)break;if(be.push(me.substring(te,ke)),Mn(ke+le),Ce&&(pr(),we))return st();if(ue&&Fe.length>=ue)return st(!0)}return lr();function gt(qe){Fe.push(qe),Ze=te}function de(qe){var $t=0;return $t=qe!==-1&&(qe=me.substring(ve+1,qe))&&qe.trim()===""?qe.length:$t}function lr(qe){return he||(qe===void 0&&(qe=me.substring(te)),be.push(qe),te=Oe,gt(be),Ce&&pr()),st()}function Mn(qe){te=qe,gt(be),be=[],ke=me.indexOf(z,te)}function st(qe){if(M.header&&!ce&&Fe.length&&!Ve){var $t=Fe[0],Vt=Object.create(null),Pt=new Set($t);let Xs=!1;for(let Kr=0;Kr<$t.length;Kr++){let Lr=$t[Kr];if(Vt[Lr=U(M.transformHeader)?M.transformHeader(Lr,Kr):Lr]){let ot,oe=Vt[Lr];for(;ot=Lr+"_"+oe,oe++,Pt.has(ot););Pt.add(ot),$t[Kr]=ot,Vt[Lr]++,Xs=!0,(q=q===null?{}:q)[ot]=Lr}else Vt[Lr]=1,$t[Kr]=Lr;Pt.add(Lr)}Xs&&console.warn("Duplicate headers found and renamed."),Ve=!0}return{data:Fe,errors:et,meta:{delimiter:R,linebreak:z,aborted:we,truncated:!!qe,cursor:Ze+(ce||0),renamedHeaders:q}}}function pr(){Z(st()),Fe=[],et=[]}},this.abort=function(){we=!0},this.getCharIndex=function(){return te}}function I(M){var R=M.data,z=w[R.workerId],J=!1;if(R.error)z.userError(R.error,R.file);else if(R.results&&R.results.data){var Z={abort:function(){J=!0,b(R.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:P,resume:P};if(U(z.userStep)){for(var ue=0;ue<R.results.data.length&&(z.userStep({data:R.results.data[ue],errors:R.results.errors,meta:R.results.meta},Z),!J);ue++);delete R.results}else U(z.userChunk)&&(z.userChunk(R.results,Z,R.file),delete R.results)}R.finished&&!J&&b(R.workerId,R.results)}function b(M,R){var z=w[M];U(z.userComplete)&&z.userComplete(R),z.terminate(),delete w[M]}function P(){throw new Error("Not implemented.")}function X(M){if(typeof M!="object"||M===null)return M;var R,z=Array.isArray(M)?[]:{};for(R in M)z[R]=X(M[R]);return z}function G(M,R){return function(){M.apply(R,arguments)}}function U(M){return typeof M=="function"}return p.parse=function(M,R){var z=(R=R||{}).dynamicTyping||!1;if(U(z)&&(R.dynamicTypingFunction=z,z={}),R.dynamicTyping=z,R.transform=!!U(R.transform)&&R.transform,!R.worker||!p.WORKERS_SUPPORTED)return z=null,p.NODE_STREAM_INPUT,typeof M=="string"?(M=(J=>J.charCodeAt(0)!==65279?J:J.slice(1))(M),z=new(R.download?v:T)(R)):M.readable===!0&&U(M.read)&&U(M.on)?z=new N(R):(s.File&&M instanceof File||M instanceof Object)&&(z=new _(R)),z.stream(M);(z=(()=>{var J;return!!p.WORKERS_SUPPORTED&&(J=(()=>{var Z=s.URL||s.webkitURL||null,ue=r.toString();return p.BLOB_URL||(p.BLOB_URL=Z.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",ue,")();"],{type:"text/javascript"})))})(),(J=new s.Worker(J)).onmessage=I,J.id=g++,w[J.id]=J)})()).userStep=R.step,z.userChunk=R.chunk,z.userComplete=R.complete,z.userError=R.error,R.step=U(R.step),R.chunk=U(R.chunk),R.complete=U(R.complete),R.error=U(R.error),delete R.worker,z.postMessage({input:M,config:R,workerId:z.id})},p.unparse=function(M,R){var z=!1,J=!0,Z=",",ue=`\r
`,Ne='"',q=Ne+Ne,Ve=!1,ae=null,re=!1,te=((()=>{if(typeof R=="object"){if(typeof R.delimiter!="string"||p.BAD_DELIMITERS.filter(function(ce){return R.delimiter.indexOf(ce)!==-1}).length||(Z=R.delimiter),typeof R.quotes!="boolean"&&typeof R.quotes!="function"&&!Array.isArray(R.quotes)||(z=R.quotes),typeof R.skipEmptyLines!="boolean"&&typeof R.skipEmptyLines!="string"||(Ve=R.skipEmptyLines),typeof R.newline=="string"&&(ue=R.newline),typeof R.quoteChar=="string"&&(Ne=R.quoteChar),typeof R.header=="boolean"&&(J=R.header),Array.isArray(R.columns)){if(R.columns.length===0)throw new Error("Option columns is empty");ae=R.columns}R.escapeChar!==void 0&&(q=R.escapeChar+Ne),R.escapeFormulae instanceof RegExp?re=R.escapeFormulae:typeof R.escapeFormulae=="boolean"&&R.escapeFormulae&&(re=/^[=+\-@\t\r].*$/)}})(),new RegExp(F(Ne),"g"));if(typeof M=="string"&&(M=JSON.parse(M)),Array.isArray(M)){if(!M.length||Array.isArray(M[0]))return we(null,M,Ve);if(typeof M[0]=="object")return we(ae||Object.keys(M[0]),M,Ve)}else if(typeof M=="object")return typeof M.data=="string"&&(M.data=JSON.parse(M.data)),Array.isArray(M.data)&&(M.fields||(M.fields=M.meta&&M.meta.fields||ae),M.fields||(M.fields=Array.isArray(M.data[0])?M.fields:typeof M.data[0]=="object"?Object.keys(M.data[0]):[]),Array.isArray(M.data[0])||typeof M.data[0]=="object"||(M.data=[M.data])),we(M.fields||[],M.data||[],Ve);throw new Error("Unable to serialize unrecognized input");function we(ce,he,Oe){var Je="",le=(typeof ce=="string"&&(ce=JSON.parse(ce)),typeof he=="string"&&(he=JSON.parse(he)),Array.isArray(ce)&&0<ce.length),It=!Array.isArray(he[0]);if(le&&J){for(var Ce=0;Ce<ce.length;Ce++)0<Ce&&(Je+=Z),Je+=me(ce[Ce],Ce);0<he.length&&(Je+=ue)}for(var Fe=0;Fe<he.length;Fe++){var et=(le?ce:he[Fe]).length,be=!1,Ze=le?Object.keys(he[Fe]).length===0:he[Fe].length===0;if(Oe&&!le&&(be=Oe==="greedy"?he[Fe].join("").trim()==="":he[Fe].length===1&&he[Fe][0].length===0),Oe==="greedy"&&le){for(var Ie=[],Xe=0;Xe<et;Xe++){var Me=It?ce[Xe]:Xe;Ie.push(he[Fe][Me])}be=Ie.join("").trim()===""}if(!be){for(var ke=0;ke<et;ke++){0<ke&&!Ze&&(Je+=Z);var We=le&&It?ce[ke]:ke;Je+=me(he[Fe][We],ke)}Fe<he.length-1&&(!Oe||0<et&&!Ze)&&(Je+=ue)}}return Je}function me(ce,he){var Oe,Je;return ce==null?"":ce.constructor===Date?JSON.stringify(ce).slice(1,25):(Je=!1,re&&typeof ce=="string"&&re.test(ce)&&(ce="'"+ce,Je=!0),Oe=ce.toString().replace(te,q),(Je=Je||z===!0||typeof z=="function"&&z(ce,he)||Array.isArray(z)&&z[he]||((le,It)=>{for(var Ce=0;Ce<It.length;Ce++)if(-1<le.indexOf(It[Ce]))return!0;return!1})(Oe,p.BAD_DELIMITERS)||-1<Oe.indexOf(Z)||Oe.charAt(0)===" "||Oe.charAt(Oe.length-1)===" ")?Ne+Oe+Ne:Oe)}},p.RECORD_SEP="",p.UNIT_SEP="",p.BYTE_ORDER_MARK="\uFEFF",p.BAD_DELIMITERS=["\r",`
`,'"',p.BYTE_ORDER_MARK],p.WORKERS_SUPPORTED=!l&&!!s.Worker,p.NODE_STREAM_INPUT=1,p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=k,p.ParserHandle=B,p.NetworkStreamer=v,p.FileStreamer=_,p.StringStreamer=T,p.ReadableStreamStreamer=N,s.jQuery&&((a=s.jQuery).fn.parse=function(M){var R=M.config||{},z=[];return this.each(function(ue){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var Ne=0;Ne<this.files.length;Ne++)z.push({file:this.files[Ne],inputElem:this,instanceConfig:a.extend({},R)})}),J(),this;function J(){if(z.length===0)U(M.complete)&&M.complete();else{var ue,Ne,q,Ve,ae=z[0];if(U(M.before)){var re=M.before(ae.file,ae.inputElem);if(typeof re=="object"){if(re.action==="abort")return ue="AbortError",Ne=ae.file,q=ae.inputElem,Ve=re.reason,void(U(M.error)&&M.error({name:ue},Ne,q,Ve));if(re.action==="skip")return void Z();typeof re.config=="object"&&(ae.instanceConfig=a.extend(ae.instanceConfig,re.config))}else if(re==="skip")return void Z()}var te=ae.instanceConfig.complete;ae.instanceConfig.complete=function(we){U(te)&&te(we,ae.file,ae.inputElem),Z()},p.parse(ae.file,ae.instanceConfig)}}function Z(){z.splice(0,1),J()}}),h&&(s.onmessage=function(M){M=M.data,p.WORKER_ID===void 0&&M&&(p.WORKER_ID=M.workerId),typeof M.input=="string"?s.postMessage({workerId:p.WORKER_ID,results:p.parse(M.input,M.config),finished:!0}):(s.File&&M.input instanceof File||M.input instanceof Object)&&(M=p.parse(M.input,M.config))&&s.postMessage({workerId:p.WORKER_ID,results:M,finished:!0})}),(v.prototype=Object.create(y.prototype)).constructor=v,(_.prototype=Object.create(y.prototype)).constructor=_,(T.prototype=Object.create(T.prototype)).constructor=T,(N.prototype=Object.create(y.prototype)).constructor=N,p})})(Om);var t3=Om.exports;const r3=yd(t3);let Va;const n3=new Uint8Array(16);function i3(){if(!Va&&(Va=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Va))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Va(n3)}const Zt=[];for(let t=0;t<256;++t)Zt.push((t+256).toString(16).slice(1));function s3(t,e=0){return Zt[t[e+0]]+Zt[t[e+1]]+Zt[t[e+2]]+Zt[t[e+3]]+"-"+Zt[t[e+4]]+Zt[t[e+5]]+"-"+Zt[t[e+6]]+Zt[t[e+7]]+"-"+Zt[t[e+8]]+Zt[t[e+9]]+"-"+Zt[t[e+10]]+Zt[t[e+11]]+Zt[t[e+12]]+Zt[t[e+13]]+Zt[t[e+14]]+Zt[t[e+15]]}const o3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),B0={randomUUID:o3};function a3(t,e,r){if(B0.randomUUID&&!t)return B0.randomUUID();t=t||{};const s=t.random||(t.rng||i3)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,s3(s)}function l3(){const[t,e]=Y.useState(!1),[r,s]=Y.useState(null),[a,l]=Y.useState([]),[h,w]=Y.useState([]),[g,p]=Y.useState(null),[y,v]=Y.useState({});Y.useEffect(()=>{_()},[]);const _=async()=>{const I=localStorage.getItem("currentEventId");if(!I){Be.error("Nenhum evento selecionado. Por favor, crie um evento primeiro.");return}try{const{data:b,error:P}=await Gt.from("eventos").select("*").eq("id",I).single();if(P)throw P;p(b)}catch(b){console.error("Erro ao carregar evento:",b),Be.error("Erro ao carregar evento")}},T=I=>{const b=I.target.files[0];b&&(s(b),N(b))},N=I=>{r3.parse(I,{header:!0,complete:b=>{const P=b.data.filter(X=>X.nome&&X.email&&X.mesa);l(P),P.length===0?Be.error("O ficheiro CSV no contm dados vlidos. Certifique-se de incluir colunas: nome, email, mesa"):Be.success(`${P.length} convidados carregados do CSV`)},error:b=>{Be.error("Erro ao processar o ficheiro CSV: "+b.message)}})},B=async()=>{if(!g){Be.error("Por favor, crie um evento primeiro");return}if(a.length===0){Be.error("Nenhum convidado para fazer upload");return}e(!0);try{const I=a.map(G=>({id:a3(),evento_id:g.id,nome:G.nome,email:G.email,mesa:G.mesa,confirmado:!1,checkin:!1})),{data:b,error:P}=await Gt.from("convidados").insert(I).select();if(P)throw P;const X=b.map(G=>({...G,link:`${window.location.origin}/confirmar?id=${G.id}`}));w(X),Be.success(`${b.length} convidados adicionados com sucesso!`)}catch(I){console.error("Erro ao fazer upload dos convidados:",I),Be.error("Erro ao fazer upload: "+I.message)}finally{e(!1)}},F=(I,b)=>{navigator.clipboard.writeText(b),v({...y,[I]:!0}),Be.success("Link copiado!"),setTimeout(()=>{v({...y,[I]:!1})},2e3)},k=(I,b)=>{const P=encodeURIComponent(`Confirmao de Presena - ${(g==null?void 0:g.nome)||"Evento"}`),X=encodeURIComponent(`Ol,

Por favor confirme a sua presena no evento clicando no link abaixo:

${b}

Obrigado!`);window.open(`mailto:${I}?subject=${P}&body=${X}`)};return L.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[L.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Upload de Convidados"}),g&&L.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[L.jsx("p",{className:"text-sm text-gray-600",children:"Evento atual:"}),L.jsx("p",{className:"font-semibold text-gray-900",children:g.nome}),L.jsxs("p",{className:"text-sm text-gray-600",children:[g.data," s ",g.hora," - ",g.local]})]}),L.jsxs("div",{className:"space-y-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ficheiro CSV (colunas: nome, email, mesa)"}),L.jsx("input",{type:"file",accept:".csv",onChange:T,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),a.length>0&&L.jsxs("div",{className:"mt-4",children:[L.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["Pr-visualizao (",a.length," convidados)"]}),L.jsxs("div",{className:"max-h-60 overflow-y-auto border rounded-lg",children:[L.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[L.jsx("thead",{className:"bg-gray-50",children:L.jsxs("tr",{children:[L.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Nome"}),L.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),L.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Mesa"})]})}),L.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.slice(0,10).map((I,b)=>L.jsxs("tr",{children:[L.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:I.nome}),L.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:I.email}),L.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:I.mesa})]},b))})]}),a.length>10&&L.jsxs("p",{className:"text-sm text-gray-500 p-2 text-center",children:["... e mais ",a.length-10," convidados"]})]})]}),L.jsx("button",{onClick:B,disabled:t||a.length===0,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition",children:t?"A fazer upload...":`Fazer Upload de ${a.length} Convidados`})]})]}),h.length>0&&L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[L.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Links de Confirmao"}),L.jsx("div",{className:"overflow-x-auto",children:L.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[L.jsx("thead",{className:"bg-gray-50",children:L.jsxs("tr",{children:[L.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nome"}),L.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),L.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mesa"}),L.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),L.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(I=>L.jsxs("tr",{children:[L.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:I.nome}),L.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:I.email}),L.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:I.mesa}),L.jsx("td",{className:"px-4 py-3 text-sm",children:L.jsxs("div",{className:"flex space-x-2",children:[L.jsx("button",{onClick:()=>F(I.id,I.link),className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:y[I.id]?" Copiado":" Copiar Link"}),L.jsx("button",{onClick:()=>k(I.email,I.link),className:"inline-flex items-center px-3 py-1 border border-blue-300 text-sm font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:" Email"})]})})]},I.id))})]})})]}),L.jsx("div",{className:"mt-6 bg-blue-50 border-l-4 border-blue-400 p-4",children:L.jsx("div",{className:"flex",children:L.jsxs("div",{className:"ml-3",children:[L.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Formato do ficheiro CSV:"}),L.jsx("pre",{className:"text-xs text-blue-700 bg-white p-2 rounded",children:`nome,email,mesa
Joo Silva,joao@email.com,1
Maria Santos,maria@email.com,2
Pedro Costa,pedro@email.com,1`})]})})})]})}var u3=Object.defineProperty,kl=Object.getOwnPropertySymbols,km=Object.prototype.hasOwnProperty,Pm=Object.prototype.propertyIsEnumerable,F0=(t,e,r)=>e in t?u3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,j0=(t,e)=>{for(var r in e||(e={}))km.call(e,r)&&F0(t,r,e[r]);if(kl)for(var r of kl(e))Pm.call(e,r)&&F0(t,r,e[r]);return t},c3=(t,e)=>{var r={};for(var s in t)km.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&kl)for(var s of kl(t))e.indexOf(s)<0&&Pm.call(t,s)&&(r[s]=t[s]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ui;(t=>{const e=class{constructor(g,p,y,v){if(this.version=g,this.errorCorrectionLevel=p,this.modules=[],this.isFunction=[],g<e.MIN_VERSION||g>e.MAX_VERSION)throw new RangeError("Version value out of range");if(v<-1||v>7)throw new RangeError("Mask value out of range");this.size=g*4+17;let _=[];for(let N=0;N<this.size;N++)_.push(!1);for(let N=0;N<this.size;N++)this.modules.push(_.slice()),this.isFunction.push(_.slice());this.drawFunctionPatterns();const T=this.addEccAndInterleave(y);if(this.drawCodewords(T),v==-1){let N=1e9;for(let B=0;B<8;B++){this.applyMask(B),this.drawFormatBits(B);const F=this.getPenaltyScore();F<N&&(v=B,N=F),this.applyMask(B)}}l(0<=v&&v<=7),this.mask=v,this.applyMask(v),this.drawFormatBits(v),this.isFunction=[]}static encodeText(g,p){const y=t.QrSegment.makeSegments(g);return e.encodeSegments(y,p)}static encodeBinary(g,p){const y=t.QrSegment.makeBytes(g);return e.encodeSegments([y],p)}static encodeSegments(g,p,y=1,v=40,_=-1,T=!0){if(!(e.MIN_VERSION<=y&&y<=v&&v<=e.MAX_VERSION)||_<-1||_>7)throw new RangeError("Invalid value");let N,B;for(N=y;;N++){const b=e.getNumDataCodewords(N,p)*8,P=w.getTotalBits(g,N);if(P<=b){B=P;break}if(N>=v)throw new RangeError("Data too long")}for(const b of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])T&&B<=e.getNumDataCodewords(N,b)*8&&(p=b);let F=[];for(const b of g){s(b.mode.modeBits,4,F),s(b.numChars,b.mode.numCharCountBits(N),F);for(const P of b.getData())F.push(P)}l(F.length==B);const k=e.getNumDataCodewords(N,p)*8;l(F.length<=k),s(0,Math.min(4,k-F.length),F),s(0,(8-F.length%8)%8,F),l(F.length%8==0);for(let b=236;F.length<k;b^=253)s(b,8,F);let I=[];for(;I.length*8<F.length;)I.push(0);return F.forEach((b,P)=>I[P>>>3]|=b<<7-(P&7)),new e(N,p,I,_)}getModule(g,p){return 0<=g&&g<this.size&&0<=p&&p<this.size&&this.modules[p][g]}getModules(){return this.modules}drawFunctionPatterns(){for(let y=0;y<this.size;y++)this.setFunctionModule(6,y,y%2==0),this.setFunctionModule(y,6,y%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const g=this.getAlignmentPatternPositions(),p=g.length;for(let y=0;y<p;y++)for(let v=0;v<p;v++)y==0&&v==0||y==0&&v==p-1||y==p-1&&v==0||this.drawAlignmentPattern(g[y],g[v]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(g){const p=this.errorCorrectionLevel.formatBits<<3|g;let y=p;for(let _=0;_<10;_++)y=y<<1^(y>>>9)*1335;const v=(p<<10|y)^21522;l(v>>>15==0);for(let _=0;_<=5;_++)this.setFunctionModule(8,_,a(v,_));this.setFunctionModule(8,7,a(v,6)),this.setFunctionModule(8,8,a(v,7)),this.setFunctionModule(7,8,a(v,8));for(let _=9;_<15;_++)this.setFunctionModule(14-_,8,a(v,_));for(let _=0;_<8;_++)this.setFunctionModule(this.size-1-_,8,a(v,_));for(let _=8;_<15;_++)this.setFunctionModule(8,this.size-15+_,a(v,_));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let g=this.version;for(let y=0;y<12;y++)g=g<<1^(g>>>11)*7973;const p=this.version<<12|g;l(p>>>18==0);for(let y=0;y<18;y++){const v=a(p,y),_=this.size-11+y%3,T=Math.floor(y/3);this.setFunctionModule(_,T,v),this.setFunctionModule(T,_,v)}}drawFinderPattern(g,p){for(let y=-4;y<=4;y++)for(let v=-4;v<=4;v++){const _=Math.max(Math.abs(v),Math.abs(y)),T=g+v,N=p+y;0<=T&&T<this.size&&0<=N&&N<this.size&&this.setFunctionModule(T,N,_!=2&&_!=4)}}drawAlignmentPattern(g,p){for(let y=-2;y<=2;y++)for(let v=-2;v<=2;v++)this.setFunctionModule(g+v,p+y,Math.max(Math.abs(v),Math.abs(y))!=1)}setFunctionModule(g,p,y){this.modules[p][g]=y,this.isFunction[p][g]=!0}addEccAndInterleave(g){const p=this.version,y=this.errorCorrectionLevel;if(g.length!=e.getNumDataCodewords(p,y))throw new RangeError("Invalid argument");const v=e.NUM_ERROR_CORRECTION_BLOCKS[y.ordinal][p],_=e.ECC_CODEWORDS_PER_BLOCK[y.ordinal][p],T=Math.floor(e.getNumRawDataModules(p)/8),N=v-T%v,B=Math.floor(T/v);let F=[];const k=e.reedSolomonComputeDivisor(_);for(let b=0,P=0;b<v;b++){let X=g.slice(P,P+B-_+(b<N?0:1));P+=X.length;const G=e.reedSolomonComputeRemainder(X,k);b<N&&X.push(0),F.push(X.concat(G))}let I=[];for(let b=0;b<F[0].length;b++)F.forEach((P,X)=>{(b!=B-_||X>=N)&&I.push(P[b])});return l(I.length==T),I}drawCodewords(g){if(g.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let p=0;for(let y=this.size-1;y>=1;y-=2){y==6&&(y=5);for(let v=0;v<this.size;v++)for(let _=0;_<2;_++){const T=y-_,B=(y+1&2)==0?this.size-1-v:v;!this.isFunction[B][T]&&p<g.length*8&&(this.modules[B][T]=a(g[p>>>3],7-(p&7)),p++)}}l(p==g.length*8)}applyMask(g){if(g<0||g>7)throw new RangeError("Mask value out of range");for(let p=0;p<this.size;p++)for(let y=0;y<this.size;y++){let v;switch(g){case 0:v=(y+p)%2==0;break;case 1:v=p%2==0;break;case 2:v=y%3==0;break;case 3:v=(y+p)%3==0;break;case 4:v=(Math.floor(y/3)+Math.floor(p/2))%2==0;break;case 5:v=y*p%2+y*p%3==0;break;case 6:v=(y*p%2+y*p%3)%2==0;break;case 7:v=((y+p)%2+y*p%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[p][y]&&v&&(this.modules[p][y]=!this.modules[p][y])}}getPenaltyScore(){let g=0;for(let _=0;_<this.size;_++){let T=!1,N=0,B=[0,0,0,0,0,0,0];for(let F=0;F<this.size;F++)this.modules[_][F]==T?(N++,N==5?g+=e.PENALTY_N1:N>5&&g++):(this.finderPenaltyAddHistory(N,B),T||(g+=this.finderPenaltyCountPatterns(B)*e.PENALTY_N3),T=this.modules[_][F],N=1);g+=this.finderPenaltyTerminateAndCount(T,N,B)*e.PENALTY_N3}for(let _=0;_<this.size;_++){let T=!1,N=0,B=[0,0,0,0,0,0,0];for(let F=0;F<this.size;F++)this.modules[F][_]==T?(N++,N==5?g+=e.PENALTY_N1:N>5&&g++):(this.finderPenaltyAddHistory(N,B),T||(g+=this.finderPenaltyCountPatterns(B)*e.PENALTY_N3),T=this.modules[F][_],N=1);g+=this.finderPenaltyTerminateAndCount(T,N,B)*e.PENALTY_N3}for(let _=0;_<this.size-1;_++)for(let T=0;T<this.size-1;T++){const N=this.modules[_][T];N==this.modules[_][T+1]&&N==this.modules[_+1][T]&&N==this.modules[_+1][T+1]&&(g+=e.PENALTY_N2)}let p=0;for(const _ of this.modules)p=_.reduce((T,N)=>T+(N?1:0),p);const y=this.size*this.size,v=Math.ceil(Math.abs(p*20-y*10)/y)-1;return l(0<=v&&v<=9),g+=v*e.PENALTY_N4,l(0<=g&&g<=2568888),g}getAlignmentPatternPositions(){if(this.version==1)return[];{const g=Math.floor(this.version/7)+2,p=this.version==32?26:Math.ceil((this.version*4+4)/(g*2-2))*2;let y=[6];for(let v=this.size-7;y.length<g;v-=p)y.splice(1,0,v);return y}}static getNumRawDataModules(g){if(g<e.MIN_VERSION||g>e.MAX_VERSION)throw new RangeError("Version number out of range");let p=(16*g+128)*g+64;if(g>=2){const y=Math.floor(g/7)+2;p-=(25*y-10)*y-55,g>=7&&(p-=36)}return l(208<=p&&p<=29648),p}static getNumDataCodewords(g,p){return Math.floor(e.getNumRawDataModules(g)/8)-e.ECC_CODEWORDS_PER_BLOCK[p.ordinal][g]*e.NUM_ERROR_CORRECTION_BLOCKS[p.ordinal][g]}static reedSolomonComputeDivisor(g){if(g<1||g>255)throw new RangeError("Degree out of range");let p=[];for(let v=0;v<g-1;v++)p.push(0);p.push(1);let y=1;for(let v=0;v<g;v++){for(let _=0;_<p.length;_++)p[_]=e.reedSolomonMultiply(p[_],y),_+1<p.length&&(p[_]^=p[_+1]);y=e.reedSolomonMultiply(y,2)}return p}static reedSolomonComputeRemainder(g,p){let y=p.map(v=>0);for(const v of g){const _=v^y.shift();y.push(0),p.forEach((T,N)=>y[N]^=e.reedSolomonMultiply(T,_))}return y}static reedSolomonMultiply(g,p){if(g>>>8||p>>>8)throw new RangeError("Byte out of range");let y=0;for(let v=7;v>=0;v--)y=y<<1^(y>>>7)*285,y^=(p>>>v&1)*g;return l(y>>>8==0),y}finderPenaltyCountPatterns(g){const p=g[1];l(p<=this.size*3);const y=p>0&&g[2]==p&&g[3]==p*3&&g[4]==p&&g[5]==p;return(y&&g[0]>=p*4&&g[6]>=p?1:0)+(y&&g[6]>=p*4&&g[0]>=p?1:0)}finderPenaltyTerminateAndCount(g,p,y){return g&&(this.finderPenaltyAddHistory(p,y),p=0),p+=this.size,this.finderPenaltyAddHistory(p,y),this.finderPenaltyCountPatterns(y)}finderPenaltyAddHistory(g,p){p[0]==0&&(g+=this.size),p.pop(),p.unshift(g)}};let r=e;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function s(g,p,y){if(p<0||p>31||g>>>p)throw new RangeError("Value out of range");for(let v=p-1;v>=0;v--)y.push(g>>>v&1)}function a(g,p){return(g>>>p&1)!=0}function l(g){if(!g)throw new Error("Assertion error")}const h=class{constructor(g,p,y){if(this.mode=g,this.numChars=p,this.bitData=y,p<0)throw new RangeError("Invalid argument");this.bitData=y.slice()}static makeBytes(g){let p=[];for(const y of g)s(y,8,p);return new h(h.Mode.BYTE,g.length,p)}static makeNumeric(g){if(!h.isNumeric(g))throw new RangeError("String contains non-numeric characters");let p=[];for(let y=0;y<g.length;){const v=Math.min(g.length-y,3);s(parseInt(g.substr(y,v),10),v*3+1,p),y+=v}return new h(h.Mode.NUMERIC,g.length,p)}static makeAlphanumeric(g){if(!h.isAlphanumeric(g))throw new RangeError("String contains unencodable characters in alphanumeric mode");let p=[],y;for(y=0;y+2<=g.length;y+=2){let v=h.ALPHANUMERIC_CHARSET.indexOf(g.charAt(y))*45;v+=h.ALPHANUMERIC_CHARSET.indexOf(g.charAt(y+1)),s(v,11,p)}return y<g.length&&s(h.ALPHANUMERIC_CHARSET.indexOf(g.charAt(y)),6,p),new h(h.Mode.ALPHANUMERIC,g.length,p)}static makeSegments(g){return g==""?[]:h.isNumeric(g)?[h.makeNumeric(g)]:h.isAlphanumeric(g)?[h.makeAlphanumeric(g)]:[h.makeBytes(h.toUtf8ByteArray(g))]}static makeEci(g){let p=[];if(g<0)throw new RangeError("ECI assignment value out of range");if(g<128)s(g,8,p);else if(g<16384)s(2,2,p),s(g,14,p);else if(g<1e6)s(6,3,p),s(g,21,p);else throw new RangeError("ECI assignment value out of range");return new h(h.Mode.ECI,0,p)}static isNumeric(g){return h.NUMERIC_REGEX.test(g)}static isAlphanumeric(g){return h.ALPHANUMERIC_REGEX.test(g)}getData(){return this.bitData.slice()}static getTotalBits(g,p){let y=0;for(const v of g){const _=v.mode.numCharCountBits(p);if(v.numChars>=1<<_)return 1/0;y+=4+_+v.bitData.length}return y}static toUtf8ByteArray(g){g=encodeURI(g);let p=[];for(let y=0;y<g.length;y++)g.charAt(y)!="%"?p.push(g.charCodeAt(y)):(p.push(parseInt(g.substr(y+1,2),16)),y+=2);return p}};let w=h;w.NUMERIC_REGEX=/^[0-9]*$/,w.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,w.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=w})(Ui||(Ui={}));(t=>{(e=>{const r=class{constructor(a,l){this.ordinal=a,this.formatBits=l}};let s=r;s.LOW=new r(0,1),s.MEDIUM=new r(1,0),s.QUARTILE=new r(2,3),s.HIGH=new r(3,2),e.Ecc=s})(t.QrCode||(t.QrCode={}))})(Ui||(Ui={}));(t=>{(e=>{const r=class{constructor(a,l){this.modeBits=a,this.numBitsCharCount=l}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};let s=r;s.NUMERIC=new r(1,[10,12,14]),s.ALPHANUMERIC=new r(2,[9,11,13]),s.BYTE=new r(4,[8,16,16]),s.KANJI=new r(8,[8,10,12]),s.ECI=new r(7,[0,0,0]),e.Mode=s})(t.QrSegment||(t.QrSegment={}))})(Ui||(Ui={}));var wo=Ui;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var d3={L:wo.QrCode.Ecc.LOW,M:wo.QrCode.Ecc.MEDIUM,Q:wo.QrCode.Ecc.QUARTILE,H:wo.QrCode.Ecc.HIGH},h3=128,f3="L",g3="#FFFFFF",p3="#000000",m3=!1,Dm=4,w3=.1;function x3(t,e=0){const r=[];return t.forEach(function(s,a){let l=null;s.forEach(function(h,w){if(!h&&l!==null){r.push(`M${l+e} ${a+e}h${w-l}v1H${l+e}z`),l=null;return}if(w===s.length-1){if(!h)return;l===null?r.push(`M${w+e},${a+e} h1v1H${w+e}z`):r.push(`M${l+e},${a+e} h${w+1-l}v1H${l+e}z`);return}h&&l===null&&(l=w)})}),r.join("")}function y3(t,e){return t.slice().map((r,s)=>s<e.y||s>=e.y+e.h?r:r.map((a,l)=>l<e.x||l>=e.x+e.w?a:!1))}function v3(t,e,r,s){if(s==null)return null;const a=r?Dm:0,l=t.length+a*2,h=Math.floor(e*w3),w=l/e,g=(s.width||h)*w,p=(s.height||h)*w,y=s.x==null?t.length/2-g/2:s.x*w,v=s.y==null?t.length/2-p/2:s.y*w;let _=null;if(s.excavate){let T=Math.floor(y),N=Math.floor(v),B=Math.ceil(g+y-T),F=Math.ceil(p+v-N);_={x:T,y:N,w:B,h:F}}return{x:y,y:v,h:p,w:g,excavation:_}}var E3=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function _3(t){const e=t,{value:r,size:s=h3,level:a=f3,bgColor:l=g3,fgColor:h=p3,includeMargin:w=m3,style:g,imageSettings:p}=e,y=c3(e,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),v=p==null?void 0:p.src,_=en.useRef(null),T=en.useRef(null),[N,B]=en.useState(!1);en.useEffect(()=>{if(_.current!=null){const I=_.current,b=I.getContext("2d");if(!b)return;let P=wo.QrCode.encodeText(r,d3[a]).getModules();const X=w?Dm:0,G=P.length+X*2,U=v3(P,s,w,p),M=T.current,R=U!=null&&M!==null&&M.complete&&M.naturalHeight!==0&&M.naturalWidth!==0;R&&U.excavation!=null&&(P=y3(P,U.excavation));const z=window.devicePixelRatio||1;I.height=I.width=s*z;const J=s/G*z;b.scale(J,J),b.fillStyle=l,b.fillRect(0,0,G,G),b.fillStyle=h,E3?b.fill(new Path2D(x3(P,X))):P.forEach(function(Z,ue){Z.forEach(function(Ne,q){Ne&&b.fillRect(q+X,ue+X,1,1)})}),R&&b.drawImage(M,U.x+X,U.y+X,U.w,U.h)}}),en.useEffect(()=>{B(!1)},[v]);const F=j0({height:s,width:s},g);let k=null;return v!=null&&(k=en.createElement("img",{src:v,key:v,style:{display:"none"},onLoad:()=>{B(!0)},ref:T})),en.createElement(en.Fragment,null,en.createElement("canvas",j0({style:F,height:s,width:s,ref:_},y)),k)}function C3(){const[t]=Hy(),[e,r]=Y.useState(!0),[s,a]=Y.useState(null),[l,h]=Y.useState(null),[w,g]=Y.useState(!1),[p,y]=Y.useState(""),v=Y.useRef(null);Y.useEffect(()=>{_()},[]);const _=async()=>{const F=t.get("id");if(!F){Be.error("Link invlido - ID do convidado no encontrado"),r(!1);return}try{const{data:k,error:I}=await Gt.from("convidados").select("*").eq("id",F).single();if(I)throw I;a(k),g(k.confirmado);const{data:b,error:P}=await Gt.from("eventos").select("*").eq("id",k.evento_id).single();if(P)throw P;h(b);const X=JSON.stringify({id:k.id,nome:k.nome,mesa:k.mesa});y(X)}catch(k){console.error("Erro ao carregar dados:",k),Be.error("Erro ao carregar dados do convidado")}finally{r(!1)}},T=async()=>{if(s){r(!0);try{const{error:F}=await Gt.from("convidados").update({confirmado:!0}).eq("id",s.id);if(F)throw F;await N(),g(!0),Be.success("Presena confirmada com sucesso!")}catch(F){console.error("Erro ao confirmar presena:",F),Be.error("Erro ao confirmar presena")}finally{r(!1)}}},N=async()=>{if(v.current)try{const F=v.current.querySelector("canvas"),k=await new Promise(P=>F.toBlob(P)),I=`qrcodes/${s.id}.png`,{error:b}=await Gt.storage.from("qrcodes").upload(I,k,{contentType:"image/png",upsert:!0});if(b)throw b}catch(F){console.error("Erro ao salvar QR code:",F)}},B=()=>{const k=v.current.querySelector("canvas").toDataURL("image/png"),I=document.createElement("a");I.href=k,I.download=`qrcode-${s.nome.replace(/\s+/g,"-")}.png`,document.body.appendChild(I),I.click(),document.body.removeChild(I),Be.success("QR Code descarregado!")};return e?L.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),L.jsx("p",{className:"mt-4 text-gray-600",children:"A carregar..."})]})}):!s||!l?L.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"text-red-600 text-6xl mb-4",children:""}),L.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Link Invlido"}),L.jsx("p",{className:"text-gray-600",children:"O link de confirmao no  vlido ou expirou."})]})}):L.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4",children:L.jsx("div",{className:"max-w-2xl mx-auto",children:L.jsxs("div",{className:"bg-white rounded-xl shadow-xl overflow-hidden",children:[L.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6",children:[L.jsx("h1",{className:"text-3xl font-bold mb-2",children:l.nome}),L.jsxs("div",{className:"flex items-center space-x-4 text-blue-100",children:[L.jsxs("span",{className:"flex items-center",children:[" ",new Date(l.data).toLocaleDateString("pt-PT")]}),L.jsxs("span",{className:"flex items-center",children:[" ",l.hora]})]}),L.jsxs("p",{className:"mt-2 flex items-center text-blue-100",children:[" ",l.local]})]}),L.jsxs("div",{className:"p-6",children:[L.jsxs("div",{className:"text-center mb-6",children:[L.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-blue-100 rounded-full mb-4",children:L.jsx("span",{className:"text-3xl",children:""})}),L.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s.nome}),L.jsxs("p",{className:"text-lg text-gray-600 mt-2",children:["Mesa ",s.mesa]})]}),w?L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:L.jsxs("p",{className:"text-green-800 font-medium flex items-center justify-center",children:[L.jsx("span",{className:"text-2xl mr-2",children:""}),"Presena Confirmada!"]})}),L.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[L.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Seu QR Code para Check-in"}),L.jsx("div",{ref:v,className:"flex justify-center mb-4",children:L.jsx("div",{className:"p-4 bg-white rounded-lg shadow-md",children:L.jsx(_3,{value:p,size:200,level:"H",includeMargin:!0})})}),L.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Apresente este QR Code na entrada do evento"}),L.jsxs("button",{onClick:B,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[L.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Descarregar QR Code"]})]}),L.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[L.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Informaes importantes:"}),L.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[L.jsx("li",{children:" Guarde este QR Code no seu telemvel"}),L.jsx("li",{children:" Apresente-o na entrada do evento"}),L.jsx("li",{children:" Cada QR Code  nico e intransmissvel"})]})]})]}):L.jsxs("div",{className:"text-center",children:[L.jsx("p",{className:"text-gray-600 mb-6",children:"Por favor, confirme a sua presena no evento clicando no boto abaixo."}),L.jsx("button",{onClick:T,disabled:e,className:"bg-green-600 text-white px-8 py-3 rounded-lg text-lg font-medium hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-green-500 focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed transition",children:e?"A confirmar...":" Confirmar Presena"})]})]})]})})})}var ge;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ge||(ge={}));var U0=new Map([[ge.QR_CODE,"QR_CODE"],[ge.AZTEC,"AZTEC"],[ge.CODABAR,"CODABAR"],[ge.CODE_39,"CODE_39"],[ge.CODE_93,"CODE_93"],[ge.CODE_128,"CODE_128"],[ge.DATA_MATRIX,"DATA_MATRIX"],[ge.MAXICODE,"MAXICODE"],[ge.ITF,"ITF"],[ge.EAN_13,"EAN_13"],[ge.EAN_8,"EAN_8"],[ge.PDF_417,"PDF_417"],[ge.RSS_14,"RSS_14"],[ge.RSS_EXPANDED,"RSS_EXPANDED"],[ge.UPC_A,"UPC_A"],[ge.UPC_E,"UPC_E"],[ge.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),V0;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(V0||(V0={}));function A3(t){return Object.values(ge).includes(t)}var Pl;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Pl||(Pl={}));var b3=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Pl.SCAN_TYPE_CAMERA,Pl.SCAN_TYPE_FILE],t}(),Mm=function(){function t(e,r){this.format=e,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!U0.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,U0.get(e))},t}(),z0=function(){function t(){}return t.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),md;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(md||(md={}));var S3=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:md.UNKWOWN_ERROR}},t}(),I3=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function _n(t){return typeof t>"u"||t===null}var _s=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),Lm=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var s=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(s,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(a),h=Object.keys(e),w=0,g=h;w<g.length;w++){var p=g[w];if(l.has(p))return r.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},t}(),wd={exports:{}};(function(t,e){(function(r,s){s(e)})(os,function(r){function s(C){return C==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,n){C.__proto__=n}||function(C,n){for(var i in n)n.hasOwnProperty(i)&&(C[i]=n[i])};function l(C,n){a(C,n);function i(){this.constructor=C}C.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}function h(C,n){var i=Object.setPrototypeOf;i?i(C,n):C.__proto__=n}function w(C,n){n===void 0&&(n=C.constructor);var i=Error.captureStackTrace;i&&i(C,n)}var g=function(C){l(n,C);function n(i){var o=this.constructor,u=C.call(this,i)||this;return Object.defineProperty(u,"name",{value:o.name,enumerable:!1}),h(u,o.prototype),w(u),u}return n}(Error);class p extends g{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}p.kind="Exception";class y extends p{}y.kind="ArgumentException";class v extends p{}v.kind="IllegalArgumentException";class _{constructor(n){if(this.binarizer=n,n===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,i){return this.binarizer.getBlackRow(n,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,i,o,u){const c=this.binarizer.getLuminanceSource().crop(n,i,o,u);return new _(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class T extends p{static getChecksumInstance(){return new T}}T.kind="ChecksumException";class N{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class B{static arraycopy(n,i,o,u,c){for(;c--;)o[u++]=n[i++]}static currentTimeMillis(){return Date.now()}}class F extends p{}F.kind="IndexOutOfBoundsException";class k extends F{constructor(n=void 0,i=void 0){super(i),this.index=n,this.message=i}}k.kind="ArrayIndexOutOfBoundsException";class I{static fill(n,i){for(let o=0,u=n.length;o<u;o++)n[o]=i}static fillWithin(n,i,o,u){I.rangeCheck(n.length,i,o);for(let c=i;c<o;c++)n[c]=u}static rangeCheck(n,i,o){if(i>o)throw new v("fromIndex("+i+") > toIndex("+o+")");if(i<0)throw new k(i);if(o>n)throw new k(o)}static asList(...n){return n}static create(n,i,o){return Array.from({length:n}).map(c=>Array.from({length:i}).fill(o))}static createInt32Array(n,i,o){return Array.from({length:n}).map(c=>Int32Array.from({length:i}).fill(o))}static equals(n,i){if(!n||!i||!n.length||!i.length||n.length!==i.length)return!1;for(let o=0,u=n.length;o<u;o++)if(n[o]!==i[o])return!1;return!0}static hashCode(n){if(n===null)return 0;let i=1;for(const o of n)i=31*i+o;return i}static fillUint8Array(n,i){for(let o=0;o!==n.length;o++)n[o]=i}static copyOf(n,i){return n.slice(0,i)}static copyOfUint8Array(n,i){if(n.length<=i){const o=new Uint8Array(i);return o.set(n),o}return n.slice(0,i)}static copyOfRange(n,i,o){const u=o-i,c=new Int32Array(u);return B.arraycopy(n,i,c,0,u),c}static binarySearch(n,i,o){o===void 0&&(o=I.numberComparator);let u=0,c=n.length-1;for(;u<=c;){const d=c+u>>1,f=o(i,n[d]);if(f>0)u=d+1;else if(f<0)c=d-1;else return d}return-u-1}static numberComparator(n,i){return n-i}}class b{static numberOfTrailingZeros(n){let i;if(n===0)return 32;let o=31;return i=n<<16,i!==0&&(o-=16,n=i),i=n<<8,i!==0&&(o-=8,n=i),i=n<<4,i!==0&&(o-=4,n=i),i=n<<2,i!==0&&(o-=2,n=i),o-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let i=1;return n>>>16||(i+=16,n<<=16),n>>>24||(i+=8,n<<=8),n>>>28||(i+=4,n<<=4),n>>>30||(i+=2,n<<=2),i-=n>>>31,i}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,i){return Math.trunc(n/i)}static parseInt(n,i=void 0){return parseInt(n,i)}}b.MIN_VALUE_32_BITS=-2147483648,b.MAX_VALUE=Number.MAX_SAFE_INTEGER;class P{constructor(n,i){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,i==null?this.bits=P.makeArray(n):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const i=P.makeArray(n);B.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const i=this.size;if(n>=i)return i;const o=this.bits;let u=Math.floor(n/32),c=o[u];c&=~((1<<(n&31))-1);const d=o.length;for(;c===0;){if(++u===d)return i;c=o[u]}const f=u*32+b.numberOfTrailingZeros(c);return f>i?i:f}getNextUnset(n){const i=this.size;if(n>=i)return i;const o=this.bits;let u=Math.floor(n/32),c=~o[u];c&=~((1<<(n&31))-1);const d=o.length;for(;c===0;){if(++u===d)return i;c=~o[u]}const f=u*32+b.numberOfTrailingZeros(c);return f>i?i:f}setBulk(n,i){this.bits[Math.floor(n/32)]=i}setRange(n,i){if(i<n||n<0||i>this.size)throw new v;if(i===n)return;i--;const o=Math.floor(n/32),u=Math.floor(i/32),c=this.bits;for(let d=o;d<=u;d++){const f=d>o?0:n&31,x=(2<<(d<u?31:i&31))-(1<<f);c[d]|=x}}clear(){const n=this.bits.length,i=this.bits;for(let o=0;o<n;o++)i[o]=0}isRange(n,i,o){if(i<n||n<0||i>this.size)throw new v;if(i===n)return!0;i--;const u=Math.floor(n/32),c=Math.floor(i/32),d=this.bits;for(let f=u;f<=c;f++){const m=f>u?0:n&31,E=(2<<(f<c?31:i&31))-(1<<m)&4294967295;if((d[f]&E)!==(o?E:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,i){if(i<0||i>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let o=i;o>0;o--)this.appendBit((n>>o-1&1)===1)}appendBitArray(n){const i=n.size;this.ensureCapacity(this.size+i);for(let o=0;o<i;o++)this.appendBit(n.get(o))}xor(n){if(this.size!==n.size)throw new v("Sizes don't match");const i=this.bits;for(let o=0,u=i.length;o<u;o++)i[o]^=n.bits[o]}toBytes(n,i,o,u){for(let c=0;c<u;c++){let d=0;for(let f=0;f<8;f++)this.get(n)&&(d|=1<<7-f),n++;i[o+c]=d}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),o=i+1,u=this.bits;for(let c=0;c<o;c++){let d=u[c];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,n[i-c]=d}if(this.size!==o*32){const c=o*32-this.size;let d=n[0]>>>c;for(let f=1;f<o;f++){const m=n[f];d|=m<<32-c,n[f-1]=d,d=m>>>c}n[o-1]=d}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof P))return!1;const i=n;return this.size===i.size&&I.equals(this.bits,i.bits)}hashCode(){return 31*this.size+I.hashCode(this.bits)}toString(){let n="";for(let i=0,o=this.size;i<o;i++)i&7||(n+=" "),n+=this.get(i)?"X":".";return n}clone(){return new P(this.size,this.bits.slice())}}var X;(function(C){C[C.OTHER=0]="OTHER",C[C.PURE_BARCODE=1]="PURE_BARCODE",C[C.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",C[C.TRY_HARDER=3]="TRY_HARDER",C[C.CHARACTER_SET=4]="CHARACTER_SET",C[C.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",C[C.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",C[C.ASSUME_GS1=7]="ASSUME_GS1",C[C.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",C[C.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",C[C.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(X||(X={}));var G=X;class U extends p{static getFormatInstance(){return new U}}U.kind="FormatException";var M;(function(C){C[C.Cp437=0]="Cp437",C[C.ISO8859_1=1]="ISO8859_1",C[C.ISO8859_2=2]="ISO8859_2",C[C.ISO8859_3=3]="ISO8859_3",C[C.ISO8859_4=4]="ISO8859_4",C[C.ISO8859_5=5]="ISO8859_5",C[C.ISO8859_6=6]="ISO8859_6",C[C.ISO8859_7=7]="ISO8859_7",C[C.ISO8859_8=8]="ISO8859_8",C[C.ISO8859_9=9]="ISO8859_9",C[C.ISO8859_10=10]="ISO8859_10",C[C.ISO8859_11=11]="ISO8859_11",C[C.ISO8859_13=12]="ISO8859_13",C[C.ISO8859_14=13]="ISO8859_14",C[C.ISO8859_15=14]="ISO8859_15",C[C.ISO8859_16=15]="ISO8859_16",C[C.SJIS=16]="SJIS",C[C.Cp1250=17]="Cp1250",C[C.Cp1251=18]="Cp1251",C[C.Cp1252=19]="Cp1252",C[C.Cp1256=20]="Cp1256",C[C.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",C[C.UTF8=22]="UTF8",C[C.ASCII=23]="ASCII",C[C.Big5=24]="Big5",C[C.GB18030=25]="GB18030",C[C.EUC_KR=26]="EUC_KR"})(M||(M={}));class R{constructor(n,i,o,...u){this.valueIdentifier=n,this.name=o,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=u,R.VALUE_IDENTIFIER_TO_ECI.set(n,this),R.NAME_TO_ECI.set(o,this);const c=this.values;for(let d=0,f=c.length;d!==f;d++){const m=c[d];R.VALUES_TO_ECI.set(m,this)}for(const d of u)R.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new U("incorect value");const i=R.VALUES_TO_ECI.get(n);if(i===void 0)throw new U("incorect value");return i}static getCharacterSetECIByName(n){const i=R.NAME_TO_ECI.get(n);if(i===void 0)throw new U("incorect value");return i}equals(n){if(!(n instanceof R))return!1;const i=n;return this.getName()===i.getName()}}R.VALUE_IDENTIFIER_TO_ECI=new Map,R.VALUES_TO_ECI=new Map,R.NAME_TO_ECI=new Map,R.Cp437=new R(M.Cp437,Int32Array.from([0,2]),"Cp437"),R.ISO8859_1=new R(M.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),R.ISO8859_2=new R(M.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),R.ISO8859_3=new R(M.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),R.ISO8859_4=new R(M.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),R.ISO8859_5=new R(M.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),R.ISO8859_6=new R(M.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),R.ISO8859_7=new R(M.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),R.ISO8859_8=new R(M.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),R.ISO8859_9=new R(M.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),R.ISO8859_10=new R(M.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),R.ISO8859_11=new R(M.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),R.ISO8859_13=new R(M.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),R.ISO8859_14=new R(M.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),R.ISO8859_15=new R(M.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),R.ISO8859_16=new R(M.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),R.SJIS=new R(M.SJIS,20,"SJIS","Shift_JIS"),R.Cp1250=new R(M.Cp1250,21,"Cp1250","windows-1250"),R.Cp1251=new R(M.Cp1251,22,"Cp1251","windows-1251"),R.Cp1252=new R(M.Cp1252,23,"Cp1252","windows-1252"),R.Cp1256=new R(M.Cp1256,24,"Cp1256","windows-1256"),R.UnicodeBigUnmarked=new R(M.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),R.UTF8=new R(M.UTF8,26,"UTF8","UTF-8"),R.ASCII=new R(M.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),R.Big5=new R(M.Big5,28,"Big5"),R.GB18030=new R(M.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),R.EUC_KR=new R(M.EUC_KR,30,"EUC_KR","EUC-KR");class z extends p{}z.kind="UnsupportedOperationException";class J{static decode(n,i){const o=this.encodingName(i);return this.customDecoder?this.customDecoder(n,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(n,o):new TextDecoder(o).decode(n)}static shouldDecodeOnFallback(n){return!J.isBrowser()&&n==="ISO-8859-1"}static encode(n,i){const o=this.encodingName(i);return this.customEncoder?this.customEncoder(n,o):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof R?n:R.getCharacterSetECIByName(n)}static decodeFallback(n,i){const o=this.encodingCharacterSet(i);if(J.isDecodeFallbackSupported(o)){let u="";for(let c=0,d=n.length;c<d;c++){let f=n[c].toString(16);f.length<2&&(f="0"+f),u+="%"+f}return decodeURIComponent(u)}if(o.equals(R.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new z(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(R.UTF8)||n.equals(R.ISO8859_1)||n.equals(R.ASCII)}static encodeFallback(n){const o=btoa(unescape(encodeURIComponent(n))).split(""),u=[];for(let c=0;c<o.length;c++)u.push(o[c].charCodeAt(0));return new Uint8Array(u)}}class Z{static castAsNonUtf8Char(n,i=null){const o=i?i.getName():this.ISO88591;return J.decode(new Uint8Array([n]),o)}static guessEncoding(n,i){if(i!=null&&i.get(G.CHARACTER_SET)!==void 0)return i.get(G.CHARACTER_SET).toString();const o=n.length;let u=!0,c=!0,d=!0,f=0,m=0,x=0,E=0,A=0,S=0,D=0,j=0,V=0,W=0,K=0;const ie=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let se=0;se<o&&(u||c||d);se++){const ee=n[se]&255;d&&(f>0?ee&128?f--:d=!1:ee&128&&(ee&64?(f++,ee&32?(f++,ee&16?(f++,ee&8?d=!1:E++):x++):m++):d=!1)),u&&(ee>127&&ee<160?u=!1:ee>159&&(ee<192||ee===215||ee===247)&&K++),c&&(A>0?ee<64||ee===127||ee>252?c=!1:A--:ee===128||ee===160||ee>239?c=!1:ee>160&&ee<224?(S++,j=0,D++,D>V&&(V=D)):ee>127?(A++,D=0,j++,j>W&&(W=j)):(D=0,j=0))}return d&&f>0&&(d=!1),c&&A>0&&(c=!1),d&&(ie||m+x+E>0)?Z.UTF8:c&&(Z.ASSUME_SHIFT_JIS||V>=3||W>=3)?Z.SHIFT_JIS:u&&c?V===2&&S===2||K*10>=o?Z.SHIFT_JIS:Z.ISO88591:u?Z.ISO88591:c?Z.SHIFT_JIS:d?Z.UTF8:Z.PLATFORM_DEFAULT_ENCODING}static format(n,...i){let o=-1;function u(d,f,m,x,E,A){if(d==="%%")return"%";if(i[++o]===void 0)return;d=x?parseInt(x.substr(1)):void 0;let S=E?parseInt(E.substr(1)):void 0,D;switch(A){case"s":D=i[o];break;case"c":D=i[o][0];break;case"f":D=parseFloat(i[o]).toFixed(d);break;case"p":D=parseFloat(i[o]).toPrecision(d);break;case"e":D=parseFloat(i[o]).toExponential(d);break;case"x":D=parseInt(i[o]).toString(S||16);break;case"d":D=parseFloat(parseInt(i[o],S||10).toPrecision(d)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(S);let j=parseInt(m),V=m&&m[0]+""=="0"?"0":" ";for(;D.length<j;)D=f!==void 0?D+V:V+D;return D}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(c,u)}static getBytes(n,i){return J.encode(n,i)}static getCharCode(n,i=0){return n.charCodeAt(i)}static getCharAt(n){return String.fromCharCode(n)}}Z.SHIFT_JIS=R.SJIS.getName(),Z.GB2312="GB2312",Z.ISO88591=R.ISO8859_1.getName(),Z.EUC_JP="EUC_JP",Z.UTF8=R.UTF8.getName(),Z.PLATFORM_DEFAULT_ENCODING=Z.UTF8,Z.ASSUME_SHIFT_JIS=!1;class ue{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=Z.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,i,o){for(let u=i;i<i+o;u++)this.append(n[u]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,i){this.value=this.value.substr(0,n)+i+this.value.substr(n+1)}substring(n,i){return this.value.substring(n,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,i){this.value=this.value.substr(0,n)+i+this.value.substr(n+i.length)}}class Ne{constructor(n,i,o,u){if(this.width=n,this.height=i,this.rowSize=o,this.bits=u,i==null&&(i=n),this.height=i,n<1||i<1)throw new v("Both dimensions must be greater than 0");o==null&&(o=Math.floor((n+31)/32)),this.rowSize=o,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const i=n.length,o=n[0].length,u=new Ne(o,i);for(let c=0;c<i;c++){const d=n[c];for(let f=0;f<o;f++)d[f]&&u.set(f,c)}return u}static parseFromString(n,i,o){if(n===null)throw new v("stringRepresentation cannot be null");const u=new Array(n.length);let c=0,d=0,f=-1,m=0,x=0;for(;x<n.length;)if(n.charAt(x)===`
`||n.charAt(x)==="\r"){if(c>d){if(f===-1)f=c-d;else if(c-d!==f)throw new v("row lengths do not match");d=c,m++}x++}else if(n.substring(x,x+i.length)===i)x+=i.length,u[c]=!0,c++;else if(n.substring(x,x+o.length)===o)x+=o.length,u[c]=!1,c++;else throw new v("illegal character encountered: "+n.substring(x));if(c>d){if(f===-1)f=c-d;else if(c-d!==f)throw new v("row lengths do not match");m++}const E=new Ne(f,m);for(let A=0;A<c;A++)u[A]&&E.set(Math.floor(A%f),Math.floor(A/f));return E}get(n,i){const o=i*this.rowSize+Math.floor(n/32);return(this.bits[o]>>>(n&31)&1)!==0}set(n,i){const o=i*this.rowSize+Math.floor(n/32);this.bits[o]|=1<<(n&31)&4294967295}unset(n,i){const o=i*this.rowSize+Math.floor(n/32);this.bits[o]&=~(1<<(n&31)&4294967295)}flip(n,i){const o=i*this.rowSize+Math.floor(n/32);this.bits[o]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new v("input matrix dimensions do not match");const i=new P(Math.floor(this.width/32)+1),o=this.rowSize,u=this.bits;for(let c=0,d=this.height;c<d;c++){const f=c*o,m=n.getRow(c,i).getBitArray();for(let x=0;x<o;x++)u[f+x]^=m[x]}}clear(){const n=this.bits,i=n.length;for(let o=0;o<i;o++)n[o]=0}setRegion(n,i,o,u){if(i<0||n<0)throw new v("Left and top must be nonnegative");if(u<1||o<1)throw new v("Height and width must be at least 1");const c=n+o,d=i+u;if(d>this.height||c>this.width)throw new v("The region must fit inside the matrix");const f=this.rowSize,m=this.bits;for(let x=i;x<d;x++){const E=x*f;for(let A=n;A<c;A++)m[E+Math.floor(A/32)]|=1<<(A&31)&4294967295}}getRow(n,i){i==null||i.getSize()<this.width?i=new P(this.width):i.clear();const o=this.rowSize,u=this.bits,c=n*o;for(let d=0;d<o;d++)i.setBulk(d*32,u[c+d]);return i}setRow(n,i){B.arraycopy(i.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),i=this.getHeight();let o=new P(n),u=new P(n);for(let c=0,d=Math.floor((i+1)/2);c<d;c++)o=this.getRow(c,o),u=this.getRow(i-1-c,u),o.reverse(),u.reverse(),this.setRow(c,u),this.setRow(i-1-c,o)}getEnclosingRectangle(){const n=this.width,i=this.height,o=this.rowSize,u=this.bits;let c=n,d=i,f=-1,m=-1;for(let x=0;x<i;x++)for(let E=0;E<o;E++){const A=u[x*o+E];if(A!==0){if(x<d&&(d=x),x>m&&(m=x),E*32<c){let S=0;for(;!(A<<31-S&4294967295);)S++;E*32+S<c&&(c=E*32+S)}if(E*32+31>f){let S=31;for(;!(A>>>S);)S--;E*32+S>f&&(f=E*32+S)}}}return f<c||m<d?null:Int32Array.from([c,d,f-c+1,m-d+1])}getTopLeftOnBit(){const n=this.rowSize,i=this.bits;let o=0;for(;o<i.length&&i[o]===0;)o++;if(o===i.length)return null;const u=o/n;let c=o%n*32;const d=i[o];let f=0;for(;!(d<<31-f&4294967295);)f++;return c+=f,Int32Array.from([c,u])}getBottomRightOnBit(){const n=this.rowSize,i=this.bits;let o=i.length-1;for(;o>=0&&i[o]===0;)o--;if(o<0)return null;const u=Math.floor(o/n);let c=Math.floor(o%n)*32;const d=i[o];let f=31;for(;!(d>>>f);)f--;return c+=f,Int32Array.from([c,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof Ne))return!1;const i=n;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&I.equals(this.bits,i.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+I.hashCode(this.bits),n}toString(n="X ",i="  ",o=`
`){return this.buildToString(n,i,o)}buildToString(n,i,o){let u=new ue;for(let c=0,d=this.height;c<d;c++){for(let f=0,m=this.width;f<m;f++)u.append(this.get(f,c)?n:i);u.append(o)}return u.toString()}clone(){return new Ne(this.width,this.height,this.rowSize,this.bits.slice())}}class q extends p{static getNotFoundInstance(){return new q}}q.kind="NotFoundException";class Ve extends N{constructor(n){super(n),this.luminances=Ve.EMPTY,this.buckets=new Int32Array(Ve.LUMINANCE_BUCKETS)}getBlackRow(n,i){const o=this.getLuminanceSource(),u=o.getWidth();i==null||i.getSize()<u?i=new P(u):i.clear(),this.initArrays(u);const c=o.getRow(n,this.luminances),d=this.buckets;for(let m=0;m<u;m++)d[(c[m]&255)>>Ve.LUMINANCE_SHIFT]++;const f=Ve.estimateBlackPoint(d);if(u<3)for(let m=0;m<u;m++)(c[m]&255)<f&&i.set(m);else{let m=c[0]&255,x=c[1]&255;for(let E=1;E<u-1;E++){const A=c[E+1]&255;(x*4-m-A)/2<f&&i.set(E),m=x,x=A}}return i}getBlackMatrix(){const n=this.getLuminanceSource(),i=n.getWidth(),o=n.getHeight(),u=new Ne(i,o);this.initArrays(i);const c=this.buckets;for(let m=1;m<5;m++){const x=Math.floor(o*m/5),E=n.getRow(x,this.luminances),A=Math.floor(i*4/5);for(let S=Math.floor(i/5);S<A;S++){const D=E[S]&255;c[D>>Ve.LUMINANCE_SHIFT]++}}const d=Ve.estimateBlackPoint(c),f=n.getMatrix();for(let m=0;m<o;m++){const x=m*i;for(let E=0;E<i;E++)(f[x+E]&255)<d&&u.set(E,m)}return u}createBinarizer(n){return new Ve(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const i=this.buckets;for(let o=0;o<Ve.LUMINANCE_BUCKETS;o++)i[o]=0}static estimateBlackPoint(n){const i=n.length;let o=0,u=0,c=0;for(let E=0;E<i;E++)n[E]>c&&(u=E,c=n[E]),n[E]>o&&(o=n[E]);let d=0,f=0;for(let E=0;E<i;E++){const A=E-u,S=n[E]*A*A;S>f&&(d=E,f=S)}if(u>d){const E=u;u=d,d=E}if(d-u<=i/16)throw new q;let m=d-1,x=-1;for(let E=d-1;E>u;E--){const A=E-u,S=A*A*(d-E)*(o-n[E]);S>x&&(m=E,x=S)}return m<<Ve.LUMINANCE_SHIFT}}Ve.LUMINANCE_BITS=5,Ve.LUMINANCE_SHIFT=8-Ve.LUMINANCE_BITS,Ve.LUMINANCE_BUCKETS=1<<Ve.LUMINANCE_BITS,Ve.EMPTY=Uint8ClampedArray.from([0]);class ae extends Ve{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),i=n.getWidth(),o=n.getHeight();if(i>=ae.MINIMUM_DIMENSION&&o>=ae.MINIMUM_DIMENSION){const u=n.getMatrix();let c=i>>ae.BLOCK_SIZE_POWER;i&ae.BLOCK_SIZE_MASK&&c++;let d=o>>ae.BLOCK_SIZE_POWER;o&ae.BLOCK_SIZE_MASK&&d++;const f=ae.calculateBlackPoints(u,c,d,i,o),m=new Ne(i,o);ae.calculateThresholdForBlock(u,c,d,i,o,f,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new ae(n)}static calculateThresholdForBlock(n,i,o,u,c,d,f){const m=c-ae.BLOCK_SIZE,x=u-ae.BLOCK_SIZE;for(let E=0;E<o;E++){let A=E<<ae.BLOCK_SIZE_POWER;A>m&&(A=m);const S=ae.cap(E,2,o-3);for(let D=0;D<i;D++){let j=D<<ae.BLOCK_SIZE_POWER;j>x&&(j=x);const V=ae.cap(D,2,i-3);let W=0;for(let ie=-2;ie<=2;ie++){const se=d[S+ie];W+=se[V-2]+se[V-1]+se[V]+se[V+1]+se[V+2]}const K=W/25;ae.thresholdBlock(n,j,A,K,u,f)}}}static cap(n,i,o){return n<i?i:n>o?o:n}static thresholdBlock(n,i,o,u,c,d){for(let f=0,m=o*c+i;f<ae.BLOCK_SIZE;f++,m+=c)for(let x=0;x<ae.BLOCK_SIZE;x++)(n[m+x]&255)<=u&&d.set(i+x,o+f)}static calculateBlackPoints(n,i,o,u,c){const d=c-ae.BLOCK_SIZE,f=u-ae.BLOCK_SIZE,m=new Array(o);for(let x=0;x<o;x++){m[x]=new Int32Array(i);let E=x<<ae.BLOCK_SIZE_POWER;E>d&&(E=d);for(let A=0;A<i;A++){let S=A<<ae.BLOCK_SIZE_POWER;S>f&&(S=f);let D=0,j=255,V=0;for(let K=0,ie=E*u+S;K<ae.BLOCK_SIZE;K++,ie+=u){for(let se=0;se<ae.BLOCK_SIZE;se++){const ee=n[ie+se]&255;D+=ee,ee<j&&(j=ee),ee>V&&(V=ee)}if(V-j>ae.MIN_DYNAMIC_RANGE)for(K++,ie+=u;K<ae.BLOCK_SIZE;K++,ie+=u)for(let se=0;se<ae.BLOCK_SIZE;se++)D+=n[ie+se]&255}let W=D>>ae.BLOCK_SIZE_POWER*2;if(V-j<=ae.MIN_DYNAMIC_RANGE&&(W=j/2,x>0&&A>0)){const K=(m[x-1][A]+2*m[x][A-1]+m[x-1][A-1])/4;j<K&&(W=K)}m[x][A]=W}}return m}}ae.BLOCK_SIZE_POWER=3,ae.BLOCK_SIZE=1<<ae.BLOCK_SIZE_POWER,ae.BLOCK_SIZE_MASK=ae.BLOCK_SIZE-1,ae.MINIMUM_DIMENSION=ae.BLOCK_SIZE*5,ae.MIN_DYNAMIC_RANGE=24;class re{constructor(n,i){this.width=n,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,i,o,u){throw new z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new z("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let i=new ue;for(let o=0;o<this.height;o++){const u=this.getRow(o,n);for(let c=0;c<this.width;c++){const d=u[c]&255;let f;d<64?f="#":d<128?f="+":d<192?f=".":f=" ",i.append(f)}i.append(`
`)}return i.toString()}}class te extends re{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,i){const o=this.delegate.getRow(n,i),u=this.getWidth();for(let c=0;c<u;c++)o[c]=255-(o[c]&255);return o}getMatrix(){const n=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(i);for(let u=0;u<i;u++)o[u]=255-(n[u]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(n,i,o,u){return new te(this.delegate.crop(n,i,o,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new te(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new te(this.delegate.rotateCounterClockwise45())}}class we extends re{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=we.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const i=n.getContext("2d").getImageData(0,0,n.width,n.height);return we.toGrayscaleBuffer(i.data,n.width,n.height)}static toGrayscaleBuffer(n,i,o){const u=new Uint8ClampedArray(i*o);for(let c=0,d=0,f=n.length;c<f;c+=4,d++){let m;if(n[c+3]===0)m=255;else{const E=n[c],A=n[c+1],S=n[c+2];m=306*E+601*A+117*S+512>>10}u[d]=m}return u}getRow(n,i){if(n<0||n>=this.getHeight())throw new v("Requested row is outside the image: "+n);const o=this.getWidth(),u=n*o;return i===null?i=this.buffer.slice(u,u+o):(i.length<o&&(i=new Uint8ClampedArray(o)),i.set(this.buffer.slice(u,u+o))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,i,o,u){return super.crop(n,i,o,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const i=this.getTempCanvasElement(),o=i.getContext("2d"),u=n*we.DEGREE_TO_RADIANS,c=this.canvas.width,d=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(u))*c+Math.abs(Math.sin(u))*d),m=Math.ceil(Math.abs(Math.sin(u))*c+Math.abs(Math.cos(u))*d);return i.width=f,i.height=m,o.translate(f/2,m/2),o.rotate(u),o.drawImage(this.canvas,c/-2,d/-2),this.buffer=we.makeBufferFromCanvasImageData(i),this}invert(){return new te(this)}}we.DEGREE_TO_RADIANS=Math.PI/180;class me{constructor(n,i,o){this.deviceId=n,this.label=i,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ce=(globalThis||os||self||window||void 0)&&(globalThis||os||self||window||void 0).__awaiter||function(C,n,i,o){function u(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function f(E){try{x(o.next(E))}catch(A){d(A)}}function m(E){try{x(o.throw(E))}catch(A){d(A)}}function x(E){E.done?c(E.value):u(E.value).then(f,m)}x((o=o.apply(C,n||[])).next())})};class he{constructor(n,i=500,o){this.reader=n,this.timeBetweenScansMillis=i,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return ce(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const o of n){const u=o.kind==="video"?"videoinput":o.kind;if(u!=="videoinput")continue;const c=o.deviceId||o.id,d=o.label||`Video device ${i.length+1}`,f=o.groupId,m={deviceId:c,label:d,kind:u,groupId:f};i.push(m)}return i})}getVideoInputDevices(){return ce(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new me(i.deviceId,i.label))})}findDeviceById(n){return ce(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(o=>o.deviceId===n):null})}decodeFromInputVideoDevice(n,i){return ce(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,i)})}decodeOnceFromVideoDevice(n,i){return ce(this,void 0,void 0,function*(){this.reset();let o;n?o={deviceId:{exact:n}}:o={facingMode:"environment"};const u={video:o};return yield this.decodeOnceFromConstraints(u,i)})}decodeOnceFromConstraints(n,i){return ce(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(o,i)})}decodeOnceFromStream(n,i){return ce(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(n,i);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(n,i,o){return ce(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,i,o)})}decodeFromVideoDevice(n,i,o){return ce(this,void 0,void 0,function*(){let u;n?u={deviceId:{exact:n}}:u={facingMode:"environment"};const c={video:u};return yield this.decodeFromConstraints(c,i,o)})}decodeFromConstraints(n,i,o){return ce(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(u,i,o)})}decodeFromStream(n,i,o){return ce(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(n,i);return yield this.decodeContinuously(u,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,i){return ce(this,void 0,void 0,function*(){const o=this.prepareVideoElement(i);return this.addVideoSource(o,n),this.videoElement=o,this.stream=n,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(n){return new Promise((i,o)=>this.playVideoOnLoad(n,()=>i()))}playVideoOnLoad(n,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",i),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return ce(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,i){const o=document.getElementById(n);if(!o)throw new y(`element with id '${n}' not found`);if(o.nodeName.toLowerCase()!==i.toLowerCase())throw new y(`element with id '${n}' must be an ${i} element`);return o}decodeFromImage(n,i){if(!n&&!i)throw new y("either imageElement with a src set or an url must be provided");return i&&!n?this.decodeFromImageUrl(i):this.decodeFromImageElement(n)}decodeFromVideo(n,i){if(!n&&!i)throw new y("Either an element with a src set or an URL must be provided");return i&&!n?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,i,o){if(n===void 0&&i===void 0)throw new y("Either an element with a src set or an URL must be provided");return i&&!n?this.decodeFromVideoUrlContinuously(i,o):this.decodeFromVideoElementContinuously(n,o)}decodeFromImageElement(n){if(!n)throw new y("An image element must be provided.");this.reset();const i=this.prepareImageElement(n);this.imageElement=i;let o;return this.isImageLoaded(i)?o=this.decodeOnce(i,!1,!0):o=this._decodeOnLoadImage(i),o}decodeFromVideoElement(n){const i=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(n,i){const o=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(o,i)}_decodeFromVideoElementSetup(n){if(!n)throw new y("A video element must be provided.");this.reset();const i=this.prepareVideoElement(n);return this.videoElement=i,i}decodeFromImageUrl(n){if(!n)throw new y("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const o=this._decodeOnLoadImage(i);return i.src=n,o}decodeFromVideoUrl(n){if(!n)throw new y("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),o=this.decodeFromVideoElement(i);return i.src=n,o}decodeFromVideoUrlContinuously(n,i){if(!n)throw new y("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(o,i);return o.src=n,u}_decodeOnLoadImage(n){return new Promise((i,o)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(i,o),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return ce(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,i){return ce(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,i)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let i;return typeof n>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof n=="string"&&(i=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(i=n),i}prepareVideoElement(n){let i;return!n&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof n=="string"&&(i=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(i=n),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(n,i=!0,o=!0){this._stopAsyncDecode=!1;const u=(c,d)=>{if(this._stopAsyncDecode){d(new q("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const f=this.decode(n);c(f)}catch(f){const m=i&&f instanceof q,E=(f instanceof T||f instanceof U)&&o;if(m||E)return setTimeout(u,this._timeBetweenDecodingAttempts,c,d);d(f)}};return new Promise((c,d)=>u(c,d))}decodeContinuously(n,i){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(n);i(u,null),setTimeout(o,this.timeBetweenScansMillis)}catch(u){i(null,u);const c=u instanceof T||u instanceof U,d=u instanceof q;(c||d)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(n){const i=this.createBinaryBitmap(n);return this.decodeBitmap(i)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,i,o){i||(i={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(n,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(n,i,o=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(n,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const i=this.getCaptureCanvas(n),o=new we(i),u=new ae(o);return new _(u)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const i=this.createCaptureCanvas(n);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let o,u;return typeof n<"u"&&(n instanceof HTMLVideoElement?(o=n.videoWidth,u=n.videoHeight):n instanceof HTMLImageElement&&(o=n.naturalWidth||n.width,u=n.naturalHeight||n.height)),i.style.width=o+"px",i.style.height=u+"px",i.width=o,i.height=u,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,i){try{n.srcObject=i}catch{n.src=URL.createObjectURL(i)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class Oe{constructor(n,i,o=i==null?0:8*i.length,u,c,d=B.currentTimeMillis()){this.text=n,this.rawBytes=i,this.numBits=o,this.resultPoints=u,this.format=c,this.timestamp=d,this.text=n,this.rawBytes=i,o==null?this.numBits=i==null?0:8*i.length:this.numBits=o,this.resultPoints=u,this.format=c,this.resultMetadata=null,d==null?this.timestamp=B.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,i)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const i=this.resultPoints;if(i===null)this.resultPoints=n;else if(n!==null&&n.length>0){const o=new Array(i.length+n.length);B.arraycopy(i,0,o,0,i.length),B.arraycopy(n,0,o,i.length,n.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Je;(function(C){C[C.AZTEC=0]="AZTEC",C[C.CODABAR=1]="CODABAR",C[C.CODE_39=2]="CODE_39",C[C.CODE_93=3]="CODE_93",C[C.CODE_128=4]="CODE_128",C[C.DATA_MATRIX=5]="DATA_MATRIX",C[C.EAN_8=6]="EAN_8",C[C.EAN_13=7]="EAN_13",C[C.ITF=8]="ITF",C[C.MAXICODE=9]="MAXICODE",C[C.PDF_417=10]="PDF_417",C[C.QR_CODE=11]="QR_CODE",C[C.RSS_14=12]="RSS_14",C[C.RSS_EXPANDED=13]="RSS_EXPANDED",C[C.UPC_A=14]="UPC_A",C[C.UPC_E=15]="UPC_E",C[C.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Je||(Je={}));var le=Je,It;(function(C){C[C.OTHER=0]="OTHER",C[C.ORIENTATION=1]="ORIENTATION",C[C.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",C[C.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",C[C.ISSUE_NUMBER=4]="ISSUE_NUMBER",C[C.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",C[C.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",C[C.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",C[C.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",C[C.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",C[C.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(It||(It={}));var Ce=It;class Fe{constructor(n,i,o,u,c=-1,d=-1){this.rawBytes=n,this.text=i,this.byteSegments=o,this.ecLevel=u,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=d,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class et{exp(n){return this.expTable[n]}log(n){if(n===0)throw new v;return this.logTable[n]}static addOrSubtract(n,i){return n^i}}class be{constructor(n,i){if(i.length===0)throw new v;this.field=n;const o=i.length;if(o>1&&i[0]===0){let u=1;for(;u<o&&i[u]===0;)u++;u===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-u),B.arraycopy(i,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const i=this.coefficients;let o;if(n===1){o=0;for(let d=0,f=i.length;d!==f;d++){const m=i[d];o=et.addOrSubtract(o,m)}return o}o=i[0];const u=i.length,c=this.field;for(let d=1;d<u;d++)o=et.addOrSubtract(c.multiply(n,o),i[d]);return o}addOrSubtract(n){if(!this.field.equals(n.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let i=this.coefficients,o=n.coefficients;if(i.length>o.length){const d=i;i=o,o=d}let u=new Int32Array(o.length);const c=o.length-i.length;B.arraycopy(o,0,u,0,c);for(let d=c;d<o.length;d++)u[d]=et.addOrSubtract(i[d-c],o[d]);return new be(this.field,u)}multiply(n){if(!this.field.equals(n.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const i=this.coefficients,o=i.length,u=n.coefficients,c=u.length,d=new Int32Array(o+c-1),f=this.field;for(let m=0;m<o;m++){const x=i[m];for(let E=0;E<c;E++)d[m+E]=et.addOrSubtract(d[m+E],f.multiply(x,u[E]))}return new be(f,d)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const i=this.coefficients.length,o=this.field,u=new Int32Array(i),c=this.coefficients;for(let d=0;d<i;d++)u[d]=o.multiply(c[d],n);return new be(o,u)}multiplyByMonomial(n,i){if(n<0)throw new v;if(i===0)return this.field.getZero();const o=this.coefficients,u=o.length,c=new Int32Array(u+n),d=this.field;for(let f=0;f<u;f++)c[f]=d.multiply(o[f],i);return new be(d,c)}divide(n){if(!this.field.equals(n.field))throw new v("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new v("Divide by 0");const i=this.field;let o=i.getZero(),u=this;const c=n.getCoefficient(n.getDegree()),d=i.inverse(c);for(;u.getDegree()>=n.getDegree()&&!u.isZero();){const f=u.getDegree()-n.getDegree(),m=i.multiply(u.getCoefficient(u.getDegree()),d),x=n.multiplyByMonomial(f,m),E=i.buildMonomial(f,m);o=o.addOrSubtract(E),u=u.addOrSubtract(x)}return[o,u]}toString(){let n="";for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);if(o!==0){if(o<0?(n+=" - ",o=-o):n.length>0&&(n+=" + "),i===0||o!==1){const u=this.field.log(o);u===0?n+="1":u===1?n+="a":(n+="a^",n+=u)}i!==0&&(i===1?n+="x":(n+="x^",n+=i))}}return n}}class Ze extends p{}Ze.kind="ArithmeticException";class Ie extends et{constructor(n,i,o){super(),this.primitive=n,this.size=i,this.generatorBase=o;const u=new Int32Array(i);let c=1;for(let f=0;f<i;f++)u[f]=c,c*=2,c>=i&&(c^=n,c&=i-1);this.expTable=u;const d=new Int32Array(i);for(let f=0;f<i-1;f++)d[u[f]]=f;this.logTable=d,this.zero=new be(this,Int32Array.from([0])),this.one=new be(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,i){if(n<0)throw new v;if(i===0)return this.zero;const o=new Int32Array(n+1);return o[0]=i,new be(this,o)}inverse(n){if(n===0)throw new Ze;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,i){return n===0||i===0?0:this.expTable[(this.logTable[n]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+b.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}Ie.AZTEC_DATA_12=new Ie(4201,4096,1),Ie.AZTEC_DATA_10=new Ie(1033,1024,1),Ie.AZTEC_DATA_6=new Ie(67,64,1),Ie.AZTEC_PARAM=new Ie(19,16,1),Ie.QR_CODE_FIELD_256=new Ie(285,256,0),Ie.DATA_MATRIX_FIELD_256=new Ie(301,256,1),Ie.AZTEC_DATA_8=Ie.DATA_MATRIX_FIELD_256,Ie.MAXICODE_FIELD_64=Ie.AZTEC_DATA_6;class Xe extends p{}Xe.kind="ReedSolomonException";class Me extends p{}Me.kind="IllegalStateException";class ke{constructor(n){this.field=n}decode(n,i){const o=this.field,u=new be(o,n),c=new Int32Array(i);let d=!0;for(let D=0;D<i;D++){const j=u.evaluateAt(o.exp(D+o.getGeneratorBase()));c[c.length-1-D]=j,j!==0&&(d=!1)}if(d)return;const f=new be(o,c),m=this.runEuclideanAlgorithm(o.buildMonomial(i,1),f,i),x=m[0],E=m[1],A=this.findErrorLocations(x),S=this.findErrorMagnitudes(E,A);for(let D=0;D<A.length;D++){const j=n.length-1-o.log(A[D]);if(j<0)throw new Xe("Bad error location");n[j]=Ie.addOrSubtract(n[j],S[D])}}runEuclideanAlgorithm(n,i,o){if(n.getDegree()<i.getDegree()){const D=n;n=i,i=D}const u=this.field;let c=n,d=i,f=u.getZero(),m=u.getOne();for(;d.getDegree()>=(o/2|0);){let D=c,j=f;if(c=d,f=m,c.isZero())throw new Xe("r_{i-1} was zero");d=D;let V=u.getZero();const W=c.getCoefficient(c.getDegree()),K=u.inverse(W);for(;d.getDegree()>=c.getDegree()&&!d.isZero();){const ie=d.getDegree()-c.getDegree(),se=u.multiply(d.getCoefficient(d.getDegree()),K);V=V.addOrSubtract(u.buildMonomial(ie,se)),d=d.addOrSubtract(c.multiplyByMonomial(ie,se))}if(m=V.multiply(f).addOrSubtract(j),d.getDegree()>=c.getDegree())throw new Me("Division algorithm failed to reduce polynomial?")}const x=m.getCoefficient(0);if(x===0)throw new Xe("sigmaTilde(0) was zero");const E=u.inverse(x),A=m.multiplyScalar(E),S=d.multiplyScalar(E);return[A,S]}findErrorLocations(n){const i=n.getDegree();if(i===1)return Int32Array.from([n.getCoefficient(1)]);const o=new Int32Array(i);let u=0;const c=this.field;for(let d=1;d<c.getSize()&&u<i;d++)n.evaluateAt(d)===0&&(o[u]=c.inverse(d),u++);if(u!==i)throw new Xe("Error locator degree does not match number of roots");return o}findErrorMagnitudes(n,i){const o=i.length,u=new Int32Array(o),c=this.field;for(let d=0;d<o;d++){const f=c.inverse(i[d]);let m=1;for(let x=0;x<o;x++)if(d!==x){const E=c.multiply(i[x],f),A=E&1?E&-2:E|1;m=c.multiply(m,A)}u[d]=c.multiply(n.evaluateAt(f),c.inverse(m)),c.getGeneratorBase()!==0&&(u[d]=c.multiply(u[d],f))}return u}}var We;(function(C){C[C.UPPER=0]="UPPER",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.DIGIT=3]="DIGIT",C[C.PUNCT=4]="PUNCT",C[C.BINARY=5]="BINARY"})(We||(We={}));class ve{decode(n){this.ddata=n;let i=n.getBits(),o=this.extractBits(i),u=this.correctBits(o),c=ve.convertBoolArrayToByteArray(u),d=ve.getEncodedData(u),f=new Fe(c,d,null,null);return f.setNumBits(u.length),f}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let i=n.length,o=We.UPPER,u=We.UPPER,c="",d=0;for(;d<i;)if(u===We.BINARY){if(i-d<5)break;let f=ve.readCode(n,d,5);if(d+=5,f===0){if(i-d<11)break;f=ve.readCode(n,d,11)+31,d+=11}for(let m=0;m<f;m++){if(i-d<8){d=i;break}const x=ve.readCode(n,d,8);c+=Z.castAsNonUtf8Char(x),d+=8}u=o}else{let f=u===We.DIGIT?4:5;if(i-d<f)break;let m=ve.readCode(n,d,f);d+=f;let x=ve.getCharacter(u,m);x.startsWith("CTRL_")?(o=u,u=ve.getTable(x.charAt(5)),x.charAt(6)==="L"&&(o=u)):(c+=x,u=o)}return c}static getTable(n){switch(n){case"L":return We.LOWER;case"P":return We.PUNCT;case"M":return We.MIXED;case"D":return We.DIGIT;case"B":return We.BINARY;case"U":default:return We.UPPER}}static getCharacter(n,i){switch(n){case We.UPPER:return ve.UPPER_TABLE[i];case We.LOWER:return ve.LOWER_TABLE[i];case We.MIXED:return ve.MIXED_TABLE[i];case We.PUNCT:return ve.PUNCT_TABLE[i];case We.DIGIT:return ve.DIGIT_TABLE[i];default:throw new Me("Bad table")}}correctBits(n){let i,o;this.ddata.getNbLayers()<=2?(o=6,i=Ie.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,i=Ie.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,i=Ie.AZTEC_DATA_10):(o=12,i=Ie.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),c=n.length/o;if(c<u)throw new U;let d=n.length%o,f=new Int32Array(c);for(let S=0;S<c;S++,d+=o)f[S]=ve.readCode(n,d,o);try{new ke(i).decode(f,c-u)}catch(S){throw new U(S)}let m=(1<<o)-1,x=0;for(let S=0;S<u;S++){let D=f[S];if(D===0||D===m)throw new U;(D===1||D===m-1)&&x++}let E=new Array(u*o-x),A=0;for(let S=0;S<u;S++){let D=f[S];if(D===1||D===m-1)E.fill(D>1,A,A+o-1),A+=o-1;else for(let j=o-1;j>=0;--j)E[A++]=(D&1<<j)!==0}return E}extractBits(n){let i=this.ddata.isCompact(),o=this.ddata.getNbLayers(),u=(i?11:14)+o*4,c=new Int32Array(u),d=new Array(this.totalBitsInLayer(o,i));if(i)for(let f=0;f<c.length;f++)c[f]=f;else{let f=u+1+2*b.truncDivision(b.truncDivision(u,2)-1,15),m=u/2,x=b.truncDivision(f,2);for(let E=0;E<m;E++){let A=E+b.truncDivision(E,15);c[m-E-1]=x-A-1,c[m+E]=x+A+1}}for(let f=0,m=0;f<o;f++){let x=(o-f)*4+(i?9:12),E=f*2,A=u-1-E;for(let S=0;S<x;S++){let D=S*2;for(let j=0;j<2;j++)d[m+D+j]=n.get(c[E+j],c[E+S]),d[m+2*x+D+j]=n.get(c[E+S],c[A-j]),d[m+4*x+D+j]=n.get(c[A-j],c[A-S]),d[m+6*x+D+j]=n.get(c[A-S],c[E+j])}m+=x*8}return d}static readCode(n,i,o){let u=0;for(let c=i;c<i+o;c++)u<<=1,n[c]&&(u|=1);return u}static readByte(n,i){let o=n.length-i;return o>=8?ve.readCode(n,i,8):ve.readCode(n,i,o)<<8-o}static convertBoolArrayToByteArray(n){let i=new Uint8Array((n.length+7)/8);for(let o=0;o<i.length;o++)i[o]=ve.readByte(n,8*o);return i}totalBitsInLayer(n,i){return((i?88:112)+16*n)*n}}ve.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ve.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ve.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ve.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ve.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ye{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,i,o,u){const c=n-o,d=i-u;return Math.sqrt(c*c+d*d)}static sum(n){let i=0;for(let o=0,u=n.length;o!==u;o++){const c=n[o];i+=c}return i}}class gt{static floatToIntBits(n){return n}}gt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class de{constructor(n,i){this.x=n,this.y=i}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof de){const i=n;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*gt.floatToIntBits(this.x)+gt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const i=this.distance(n[0],n[1]),o=this.distance(n[1],n[2]),u=this.distance(n[0],n[2]);let c,d,f;if(o>=i&&o>=u?(d=n[0],c=n[1],f=n[2]):u>=o&&u>=i?(d=n[1],c=n[0],f=n[2]):(d=n[2],c=n[0],f=n[1]),this.crossProductZ(c,d,f)<0){const m=c;c=f,f=m}n[0]=c,n[1]=d,n[2]=f}static distance(n,i){return ye.distance(n.x,n.y,i.x,i.y)}static crossProductZ(n,i,o){const u=i.x,c=i.y;return(o.x-u)*(n.y-c)-(o.y-c)*(n.x-u)}}class lr{constructor(n,i){this.bits=n,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Mn extends lr{constructor(n,i,o,u,c){super(n,i),this.compact=o,this.nbDatablocks=u,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class st{constructor(n,i,o,u){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),i==null&&(i=st.INIT_SIZE),o==null&&(o=n.getWidth()/2|0),u==null&&(u=n.getHeight()/2|0);const c=i/2|0;if(this.leftInit=o-c,this.rightInit=o+c,this.upInit=u-c,this.downInit=u+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new q}detect(){let n=this.leftInit,i=this.rightInit,o=this.upInit,u=this.downInit,c=!1,d=!0,f=!1,m=!1,x=!1,E=!1,A=!1;const S=this.width,D=this.height;for(;d;){d=!1;let j=!0;for(;(j||!m)&&i<S;)j=this.containsBlackPoint(o,u,i,!1),j?(i++,d=!0,m=!0):m||i++;if(i>=S){c=!0;break}let V=!0;for(;(V||!x)&&u<D;)V=this.containsBlackPoint(n,i,u,!0),V?(u++,d=!0,x=!0):x||u++;if(u>=D){c=!0;break}let W=!0;for(;(W||!E)&&n>=0;)W=this.containsBlackPoint(o,u,n,!1),W?(n--,d=!0,E=!0):E||n--;if(n<0){c=!0;break}let K=!0;for(;(K||!A)&&o>=0;)K=this.containsBlackPoint(n,i,o,!0),K?(o--,d=!0,A=!0):A||o--;if(o<0){c=!0;break}d&&(f=!0)}if(!c&&f){const j=i-n;let V=null;for(let se=1;V===null&&se<j;se++)V=this.getBlackPointOnSegment(n,u-se,n+se,u);if(V==null)throw new q;let W=null;for(let se=1;W===null&&se<j;se++)W=this.getBlackPointOnSegment(n,o+se,n+se,o);if(W==null)throw new q;let K=null;for(let se=1;K===null&&se<j;se++)K=this.getBlackPointOnSegment(i,o+se,i-se,o);if(K==null)throw new q;let ie=null;for(let se=1;ie===null&&se<j;se++)ie=this.getBlackPointOnSegment(i,u-se,i-se,u);if(ie==null)throw new q;return this.centerEdges(ie,V,K,W)}else throw new q}getBlackPointOnSegment(n,i,o,u){const c=ye.round(ye.distance(n,i,o,u)),d=(o-n)/c,f=(u-i)/c,m=this.image;for(let x=0;x<c;x++){const E=ye.round(n+x*d),A=ye.round(i+x*f);if(m.get(E,A))return new de(E,A)}return null}centerEdges(n,i,o,u){const c=n.getX(),d=n.getY(),f=i.getX(),m=i.getY(),x=o.getX(),E=o.getY(),A=u.getX(),S=u.getY(),D=st.CORR;return c<this.width/2?[new de(A-D,S+D),new de(f+D,m+D),new de(x-D,E-D),new de(c+D,d-D)]:[new de(A+D,S+D),new de(f+D,m-D),new de(x-D,E+D),new de(c-D,d-D)]}containsBlackPoint(n,i,o,u){const c=this.image;if(u){for(let d=n;d<=i;d++)if(c.get(d,o))return!0}else for(let d=n;d<=i;d++)if(c.get(o,d))return!0;return!1}}st.INIT_SIZE=10,st.CORR=1;class pr{static checkAndNudgePoints(n,i){const o=n.getWidth(),u=n.getHeight();let c=!0;for(let d=0;d<i.length&&c;d+=2){const f=Math.floor(i[d]),m=Math.floor(i[d+1]);if(f<-1||f>o||m<-1||m>u)throw new q;c=!1,f===-1?(i[d]=0,c=!0):f===o&&(i[d]=o-1,c=!0),m===-1?(i[d+1]=0,c=!0):m===u&&(i[d+1]=u-1,c=!0)}c=!0;for(let d=i.length-2;d>=0&&c;d-=2){const f=Math.floor(i[d]),m=Math.floor(i[d+1]);if(f<-1||f>o||m<-1||m>u)throw new q;c=!1,f===-1?(i[d]=0,c=!0):f===o&&(i[d]=o-1,c=!0),m===-1?(i[d+1]=0,c=!0):m===u&&(i[d+1]=u-1,c=!0)}}}class qe{constructor(n,i,o,u,c,d,f,m,x){this.a11=n,this.a21=i,this.a31=o,this.a12=u,this.a22=c,this.a32=d,this.a13=f,this.a23=m,this.a33=x}static quadrilateralToQuadrilateral(n,i,o,u,c,d,f,m,x,E,A,S,D,j,V,W){const K=qe.quadrilateralToSquare(n,i,o,u,c,d,f,m);return qe.squareToQuadrilateral(x,E,A,S,D,j,V,W).times(K)}transformPoints(n){const i=n.length,o=this.a11,u=this.a12,c=this.a13,d=this.a21,f=this.a22,m=this.a23,x=this.a31,E=this.a32,A=this.a33;for(let S=0;S<i;S+=2){const D=n[S],j=n[S+1],V=c*D+m*j+A;n[S]=(o*D+d*j+x)/V,n[S+1]=(u*D+f*j+E)/V}}transformPointsWithValues(n,i){const o=this.a11,u=this.a12,c=this.a13,d=this.a21,f=this.a22,m=this.a23,x=this.a31,E=this.a32,A=this.a33,S=n.length;for(let D=0;D<S;D++){const j=n[D],V=i[D],W=c*j+m*V+A;n[D]=(o*j+d*V+x)/W,i[D]=(u*j+f*V+E)/W}}static squareToQuadrilateral(n,i,o,u,c,d,f,m){const x=n-o+c-f,E=i-u+d-m;if(x===0&&E===0)return new qe(o-n,c-o,n,u-i,d-u,i,0,0,1);{const A=o-c,S=f-c,D=u-d,j=m-d,V=A*j-S*D,W=(x*j-S*E)/V,K=(A*E-x*D)/V;return new qe(o-n+W*o,f-n+K*f,n,u-i+W*u,m-i+K*m,i,W,K,1)}}static quadrilateralToSquare(n,i,o,u,c,d,f,m){return qe.squareToQuadrilateral(n,i,o,u,c,d,f,m).buildAdjoint()}buildAdjoint(){return new qe(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new qe(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class $t extends pr{sampleGrid(n,i,o,u,c,d,f,m,x,E,A,S,D,j,V,W,K,ie,se){const ee=qe.quadrilateralToQuadrilateral(u,c,d,f,m,x,E,A,S,D,j,V,W,K,ie,se);return this.sampleGridWithTransform(n,i,o,ee)}sampleGridWithTransform(n,i,o,u){if(i<=0||o<=0)throw new q;const c=new Ne(i,o),d=new Float32Array(2*i);for(let f=0;f<o;f++){const m=d.length,x=f+.5;for(let E=0;E<m;E+=2)d[E]=E/2+.5,d[E+1]=x;u.transformPoints(d),pr.checkAndNudgePoints(n,d);try{for(let E=0;E<m;E+=2)n.get(Math.floor(d[E]),Math.floor(d[E+1]))&&c.set(E/2,f)}catch{throw new q}}return c}}class Vt{static setGridSampler(n){Vt.gridSampler=n}static getInstance(){return Vt.gridSampler}}Vt.gridSampler=new $t;class Pt{constructor(n,i){this.x=n,this.y=i}toResultPoint(){return new de(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Xs{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let i=this.getMatrixCenter(),o=this.getBullsEyeCorners(i);if(n){let d=o[0];o[0]=o[2],o[2]=d}this.extractParameters(o);let u=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),c=this.getMatrixCornerPoints(o);return new Mn(u,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new q;let i=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(n[0],n[1],i),this.sampleLine(n[1],n[2],i),this.sampleLine(n[2],n[3],i),this.sampleLine(n[3],n[0],i)]);this.shift=this.getRotation(o,i);let u=0;for(let d=0;d<4;d++){let f=o[(this.shift+d)%4];this.compact?(u<<=7,u+=f>>1&127):(u<<=10,u+=(f>>2&992)+(f>>1&31))}let c=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(n,i){let o=0;n.forEach((u,c,d)=>{let f=(u>>i-2<<1)+(u&1);o=(o<<3)+f}),o=((o&1)<<11)+(o>>1);for(let u=0;u<4;u++)if(b.bitCount(o^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new q}getCorrectedParameterData(n,i){let o,u;i?(o=7,u=2):(o=10,u=4);let c=o-u,d=new Int32Array(o);for(let m=o-1;m>=0;--m)d[m]=n&15,n>>=4;try{new ke(Ie.AZTEC_PARAM).decode(d,c)}catch{throw new q}let f=0;for(let m=0;m<u;m++)f=(f<<4)+d[m];return f}getBullsEyeCorners(n){let i=n,o=n,u=n,c=n,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let A=this.getFirstDifferent(i,d,1,-1),S=this.getFirstDifferent(o,d,1,1),D=this.getFirstDifferent(u,d,-1,1),j=this.getFirstDifferent(c,d,-1,-1);if(this.nbCenterLayers>2){let V=this.distancePoint(j,A)*this.nbCenterLayers/(this.distancePoint(c,i)*(this.nbCenterLayers+2));if(V<.75||V>1.25||!this.isWhiteOrBlackRectangle(A,S,D,j))break}i=A,o=S,u=D,c=j,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new q;this.compact=this.nbCenterLayers===5;let f=new de(i.getX()+.5,i.getY()-.5),m=new de(o.getX()+.5,o.getY()+.5),x=new de(u.getX()-.5,u.getY()+.5),E=new de(c.getX()-.5,c.getY()-.5);return this.expandSquare([f,m,x,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,i,o,u;try{let f=new st(this.image).detect();n=f[0],i=f[1],o=f[2],u=f[3]}catch{let m=this.image.getWidth()/2,x=this.image.getHeight()/2;n=this.getFirstDifferent(new Pt(m+7,x-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Pt(m+7,x+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Pt(m-7,x+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Pt(m-7,x-7),!1,-1,-1).toResultPoint()}let c=ye.round((n.getX()+u.getX()+i.getX()+o.getX())/4),d=ye.round((n.getY()+u.getY()+i.getY()+o.getY())/4);try{let f=new st(this.image,15,c,d).detect();n=f[0],i=f[1],o=f[2],u=f[3]}catch{n=this.getFirstDifferent(new Pt(c+7,d-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Pt(c+7,d+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Pt(c-7,d+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Pt(c-7,d-7),!1,-1,-1).toResultPoint()}return c=ye.round((n.getX()+u.getX()+i.getX()+o.getX())/4),d=ye.round((n.getY()+u.getY()+i.getY()+o.getY())/4),new Pt(c,d)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,i,o,u,c){let d=Vt.getInstance(),f=this.getDimension(),m=f/2-this.nbCenterLayers,x=f/2+this.nbCenterLayers;return d.sampleGrid(n,f,f,m,m,x,m,x,x,m,x,i.getX(),i.getY(),o.getX(),o.getY(),u.getX(),u.getY(),c.getX(),c.getY())}sampleLine(n,i,o){let u=0,c=this.distanceResultPoint(n,i),d=c/o,f=n.getX(),m=n.getY(),x=d*(i.getX()-n.getX())/c,E=d*(i.getY()-n.getY())/c;for(let A=0;A<o;A++)this.image.get(ye.round(f+A*x),ye.round(m+A*E))&&(u|=1<<o-A-1);return u}isWhiteOrBlackRectangle(n,i,o,u){let c=3;n=new Pt(n.getX()-c,n.getY()+c),i=new Pt(i.getX()-c,i.getY()-c),o=new Pt(o.getX()+c,o.getY()-c),u=new Pt(u.getX()+c,u.getY()+c);let d=this.getColor(u,n);if(d===0)return!1;let f=this.getColor(n,i);return f!==d||(f=this.getColor(i,o),f!==d)?!1:(f=this.getColor(o,u),f===d)}getColor(n,i){let o=this.distancePoint(n,i),u=(i.getX()-n.getX())/o,c=(i.getY()-n.getY())/o,d=0,f=n.getX(),m=n.getY(),x=this.image.get(n.getX(),n.getY()),E=Math.ceil(o);for(let S=0;S<E;S++)f+=u,m+=c,this.image.get(ye.round(f),ye.round(m))!==x&&d++;let A=d/o;return A>.1&&A<.9?0:A<=.1===x?1:-1}getFirstDifferent(n,i,o,u){let c=n.getX()+o,d=n.getY()+u;for(;this.isValid(c,d)&&this.image.get(c,d)===i;)c+=o,d+=u;for(c-=o,d-=u;this.isValid(c,d)&&this.image.get(c,d)===i;)c+=o;for(c-=o;this.isValid(c,d)&&this.image.get(c,d)===i;)d+=u;return d-=u,new Pt(c,d)}expandSquare(n,i,o){let u=o/(2*i),c=n[0].getX()-n[2].getX(),d=n[0].getY()-n[2].getY(),f=(n[0].getX()+n[2].getX())/2,m=(n[0].getY()+n[2].getY())/2,x=new de(f+u*c,m+u*d),E=new de(f-u*c,m-u*d);c=n[1].getX()-n[3].getX(),d=n[1].getY()-n[3].getY(),f=(n[1].getX()+n[3].getX())/2,m=(n[1].getY()+n[3].getY())/2;let A=new de(f+u*c,m+u*d),S=new de(f-u*c,m-u*d);return[x,A,E,S]}isValid(n,i){return n>=0&&n<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(n){let i=ye.round(n.getX()),o=ye.round(n.getY());return this.isValid(i,o)}distancePoint(n,i){return ye.distance(n.getX(),n.getY(),i.getX(),i.getY())}distanceResultPoint(n,i){return ye.distance(n.getX(),n.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(b.truncDivision(this.nbLayers-4,8)+1)+15}}class Kr{decode(n,i=null){let o=null,u=new Xs(n.getBlackMatrix()),c=null,d=null;try{let E=u.detectMirror(!1);c=E.getPoints(),this.reportFoundResultPoints(i,c),d=new ve().decode(E)}catch(E){o=E}if(d==null)try{let E=u.detectMirror(!0);c=E.getPoints(),this.reportFoundResultPoints(i,c),d=new ve().decode(E)}catch(E){throw o??E}let f=new Oe(d.getText(),d.getRawBytes(),d.getNumBits(),c,le.AZTEC,B.currentTimeMillis()),m=d.getByteSegments();m!=null&&f.putMetadata(Ce.BYTE_SEGMENTS,m);let x=d.getECLevel();return x!=null&&f.putMetadata(Ce.ERROR_CORRECTION_LEVEL,x),f}reportFoundResultPoints(n,i){if(n!=null){let o=n.get(G.NEED_RESULT_POINT_CALLBACK);o!=null&&i.forEach((u,c,d)=>{o.foundPossibleResultPoint(u)})}}reset(){}}class Lr extends he{constructor(n=500){super(new Kr,n)}}class ot{decode(n,i){try{return this.doDecode(n,i)}catch{if(i&&i.get(G.TRY_HARDER)===!0&&n.isRotateSupported()){const c=n.rotateCounterClockwise(),d=this.doDecode(c,i),f=d.getResultMetadata();let m=270;f!==null&&f.get(Ce.ORIENTATION)===!0&&(m=m+f.get(Ce.ORIENTATION)%360),d.putMetadata(Ce.ORIENTATION,m);const x=d.getResultPoints();if(x!==null){const E=c.getHeight();for(let A=0;A<x.length;A++)x[A]=new de(E-x[A].getY()-1,x[A].getX())}return d}else throw new q}}reset(){}doDecode(n,i){const o=n.getWidth(),u=n.getHeight();let c=new P(o);const d=i&&i.get(G.TRY_HARDER)===!0,f=Math.max(1,u>>(d?8:5));let m;d?m=u:m=15;const x=Math.trunc(u/2);for(let E=0;E<m;E++){const A=Math.trunc((E+1)/2),S=(E&1)===0,D=x+f*(S?A:-A);if(D<0||D>=u)break;try{c=n.getBlackRow(D,c)}catch{continue}for(let j=0;j<2;j++){if(j===1&&(c.reverse(),i&&i.get(G.NEED_RESULT_POINT_CALLBACK)===!0)){const V=new Map;i.forEach((W,K)=>V.set(K,W)),V.delete(G.NEED_RESULT_POINT_CALLBACK),i=V}try{const V=this.decodeRow(D,c,i);if(j===1){V.putMetadata(Ce.ORIENTATION,180);const W=V.getResultPoints();W!==null&&(W[0]=new de(o-W[0].getX()-1,W[0].getY()),W[1]=new de(o-W[1].getX()-1,W[1].getY()))}return V}catch{}}}throw new q}static recordPattern(n,i,o){const u=o.length;for(let x=0;x<u;x++)o[x]=0;const c=n.getSize();if(i>=c)throw new q;let d=!n.get(i),f=0,m=i;for(;m<c;){if(n.get(m)!==d)o[f]++;else{if(++f===u)break;o[f]=1,d=!d}m++}if(!(f===u||f===u-1&&m===c))throw new q}static recordPatternInReverse(n,i,o){let u=o.length,c=n.get(i);for(;i>0&&u>=0;)n.get(--i)!==c&&(u--,c=!c);if(u>=0)throw new q;ot.recordPattern(n,i+1,o)}static patternMatchVariance(n,i,o){const u=n.length;let c=0,d=0;for(let x=0;x<u;x++)c+=n[x],d+=i[x];if(c<d)return Number.POSITIVE_INFINITY;const f=c/d;o*=f;let m=0;for(let x=0;x<u;x++){const E=n[x],A=i[x]*f,S=E>A?E-A:A-E;if(S>o)return Number.POSITIVE_INFINITY;m+=S}return m/c}}class oe extends ot{static findStartPattern(n){const i=n.getSize(),o=n.getNextSet(0);let u=0,c=Int32Array.from([0,0,0,0,0,0]),d=o,f=!1;const m=6;for(let x=o;x<i;x++)if(n.get(x)!==f)c[u]++;else{if(u===m-1){let E=oe.MAX_AVG_VARIANCE,A=-1;for(let S=oe.CODE_START_A;S<=oe.CODE_START_C;S++){const D=ot.patternMatchVariance(c,oe.CODE_PATTERNS[S],oe.MAX_INDIVIDUAL_VARIANCE);D<E&&(E=D,A=S)}if(A>=0&&n.isRange(Math.max(0,d-(x-d)/2),d,!1))return Int32Array.from([d,x,A]);d+=c[0]+c[1],c=c.slice(2,c.length-1),c[u-1]=0,c[u]=0,u--}else u++;c[u]=1,f=!f}throw new q}static decodeCode(n,i,o){ot.recordPattern(n,o,i);let u=oe.MAX_AVG_VARIANCE,c=-1;for(let d=0;d<oe.CODE_PATTERNS.length;d++){const f=oe.CODE_PATTERNS[d],m=this.patternMatchVariance(i,f,oe.MAX_INDIVIDUAL_VARIANCE);m<u&&(u=m,c=d)}if(c>=0)return c;throw new q}decodeRow(n,i,o){const u=o&&o.get(G.ASSUME_GS1)===!0,c=oe.findStartPattern(i),d=c[2];let f=0;const m=new Uint8Array(20);m[f++]=d;let x;switch(d){case oe.CODE_START_A:x=oe.CODE_CODE_A;break;case oe.CODE_START_B:x=oe.CODE_CODE_B;break;case oe.CODE_START_C:x=oe.CODE_CODE_C;break;default:throw new U}let E=!1,A=!1,S="",D=c[0],j=c[1];const V=Int32Array.from([0,0,0,0,0,0]);let W=0,K=0,ie=d,se=0,ee=!0,Ue=!1,Pe=!1;for(;!E;){const Ji=A;switch(A=!1,W=K,K=oe.decodeCode(i,V,j),m[f++]=K,K!==oe.CODE_STOP&&(ee=!0),K!==oe.CODE_STOP&&(se++,ie+=se*K),D=j,j+=V.reduce((h2,f2)=>h2+f2,0),K){case oe.CODE_START_A:case oe.CODE_START_B:case oe.CODE_START_C:throw new U}switch(x){case oe.CODE_CODE_A:if(K<64)Pe===Ue?S+=String.fromCharCode(32+K):S+=String.fromCharCode(32+K+128),Pe=!1;else if(K<96)Pe===Ue?S+=String.fromCharCode(K-64):S+=String.fromCharCode(K+64),Pe=!1;else switch(K!==oe.CODE_STOP&&(ee=!1),K){case oe.CODE_FNC_1:u&&(S.length===0?S+="]C1":S+="");break;case oe.CODE_FNC_2:case oe.CODE_FNC_3:break;case oe.CODE_FNC_4_A:!Ue&&Pe?(Ue=!0,Pe=!1):Ue&&Pe?(Ue=!1,Pe=!1):Pe=!0;break;case oe.CODE_SHIFT:A=!0,x=oe.CODE_CODE_B;break;case oe.CODE_CODE_B:x=oe.CODE_CODE_B;break;case oe.CODE_CODE_C:x=oe.CODE_CODE_C;break;case oe.CODE_STOP:E=!0;break}break;case oe.CODE_CODE_B:if(K<96)Pe===Ue?S+=String.fromCharCode(32+K):S+=String.fromCharCode(32+K+128),Pe=!1;else switch(K!==oe.CODE_STOP&&(ee=!1),K){case oe.CODE_FNC_1:u&&(S.length===0?S+="]C1":S+="");break;case oe.CODE_FNC_2:case oe.CODE_FNC_3:break;case oe.CODE_FNC_4_B:!Ue&&Pe?(Ue=!0,Pe=!1):Ue&&Pe?(Ue=!1,Pe=!1):Pe=!0;break;case oe.CODE_SHIFT:A=!0,x=oe.CODE_CODE_A;break;case oe.CODE_CODE_A:x=oe.CODE_CODE_A;break;case oe.CODE_CODE_C:x=oe.CODE_CODE_C;break;case oe.CODE_STOP:E=!0;break}break;case oe.CODE_CODE_C:if(K<100)K<10&&(S+="0"),S+=K;else switch(K!==oe.CODE_STOP&&(ee=!1),K){case oe.CODE_FNC_1:u&&(S.length===0?S+="]C1":S+="");break;case oe.CODE_CODE_A:x=oe.CODE_CODE_A;break;case oe.CODE_CODE_B:x=oe.CODE_CODE_B;break;case oe.CODE_STOP:E=!0;break}break}Ji&&(x=x===oe.CODE_CODE_A?oe.CODE_CODE_B:oe.CODE_CODE_A)}const yr=j-D;if(j=i.getNextUnset(j),!i.isRange(j,Math.min(i.getSize(),j+(j-D)/2),!1))throw new q;if(ie-=se*W,ie%103!==W)throw new T;const Yr=S.length;if(Yr===0)throw new q;Yr>0&&ee&&(x===oe.CODE_CODE_C?S=S.substring(0,Yr-2):S=S.substring(0,Yr-1));const vr=(c[1]+c[0])/2,it=D+yr/2,Yt=m.length,Sr=new Uint8Array(Yt);for(let Ji=0;Ji<Yt;Ji++)Sr[Ji]=m[Ji];const Qi=[new de(vr,n),new de(it,n)];return new Oe(S,Sr,0,Qi,le.CODE_128,new Date().getTime())}}oe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],oe.MAX_AVG_VARIANCE=.25,oe.MAX_INDIVIDUAL_VARIANCE=.7,oe.CODE_SHIFT=98,oe.CODE_CODE_C=99,oe.CODE_CODE_B=100,oe.CODE_CODE_A=101,oe.CODE_FNC_1=102,oe.CODE_FNC_2=97,oe.CODE_FNC_3=96,oe.CODE_FNC_4_A=101,oe.CODE_FNC_4_B=100,oe.CODE_START_A=103,oe.CODE_START_B=104,oe.CODE_START_C=105,oe.CODE_STOP=106;class Dt extends ot{constructor(n=!1,i=!1){super(),this.usingCheckDigit=n,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,i,o){let u=this.counters;u.fill(0),this.decodeRowResult="";let c=Dt.findAsteriskPattern(i,u),d=i.getNextSet(c[1]),f=i.getSize(),m,x;do{Dt.recordPattern(i,d,u);let V=Dt.toNarrowWidePattern(u);if(V<0)throw new q;m=Dt.patternToChar(V),this.decodeRowResult+=m,x=d;for(let W of u)d+=W;d=i.getNextSet(d)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let E=0;for(let V of u)E+=V;let A=d-x-E;if(d!==f&&A*2<E)throw new q;if(this.usingCheckDigit){let V=this.decodeRowResult.length-1,W=0;for(let K=0;K<V;K++)W+=Dt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(K));if(this.decodeRowResult.charAt(V)!==Dt.ALPHABET_STRING.charAt(W%43))throw new T;this.decodeRowResult=this.decodeRowResult.substring(0,V)}if(this.decodeRowResult.length===0)throw new q;let S;this.extendedMode?S=Dt.decodeExtended(this.decodeRowResult):S=this.decodeRowResult;let D=(c[1]+c[0])/2,j=x+E/2;return new Oe(S,null,0,[new de(D,n),new de(j,n)],le.CODE_39,new Date().getTime())}static findAsteriskPattern(n,i){let o=n.getSize(),u=n.getNextSet(0),c=0,d=u,f=!1,m=i.length;for(let x=u;x<o;x++)if(n.get(x)!==f)i[c]++;else{if(c===m-1){if(this.toNarrowWidePattern(i)===Dt.ASTERISK_ENCODING&&n.isRange(Math.max(0,d-Math.floor((x-d)/2)),d,!1))return[d,x];d+=i[0]+i[1],i.copyWithin(0,2,2+c-1),i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,f=!f}throw new q}static toNarrowWidePattern(n){let i=n.length,o=0,u;do{let c=2147483647;for(let m of n)m<c&&m>o&&(c=m);o=c,u=0;let d=0,f=0;for(let m=0;m<i;m++){let x=n[m];x>o&&(f|=1<<i-1-m,u++,d+=x)}if(u===3){for(let m=0;m<i&&u>0;m++){let x=n[m];if(x>o&&(u--,x*2>=d))return-1}return f}}while(u>3);return-1}static patternToChar(n){for(let i=0;i<Dt.CHARACTER_ENCODINGS.length;i++)if(Dt.CHARACTER_ENCODINGS[i]===n)return Dt.ALPHABET_STRING.charAt(i);if(n===Dt.ASTERISK_ENCODING)return"*";throw new q}static decodeExtended(n){let i=n.length,o="";for(let u=0;u<i;u++){let c=n.charAt(u);if(c==="+"||c==="$"||c==="%"||c==="/"){let d=n.charAt(u+1),f="\0";switch(c){case"+":if(d>="A"&&d<="Z")f=String.fromCharCode(d.charCodeAt(0)+32);else throw new U;break;case"$":if(d>="A"&&d<="Z")f=String.fromCharCode(d.charCodeAt(0)-64);else throw new U;break;case"%":if(d>="A"&&d<="E")f=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")f=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")f=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")f=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")f="\0";else if(d==="V")f="@";else if(d==="W")f="`";else if(d==="X"||d==="Y"||d==="Z")f="";else throw new U;break;case"/":if(d>="A"&&d<="O")f=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")f=":";else throw new U;break}o+=f,u++}else o+=c}return o}}Dt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Dt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Dt.ASTERISK_ENCODING=148;class rt extends ot{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,i,o){let u=this.decodeStart(i),c=this.decodeEnd(i),d=new ue;rt.decodeMiddle(i,u[1],c[0],d);let f=d.toString(),m=null;o!=null&&(m=o.get(G.ALLOWED_LENGTHS)),m==null&&(m=rt.DEFAULT_ALLOWED_LENGTHS);let x=f.length,E=!1,A=0;for(let j of m){if(x===j){E=!0;break}j>A&&(A=j)}if(!E&&x>A&&(E=!0),!E)throw new U;const S=[new de(u[1],n),new de(c[0],n)];return new Oe(f,null,0,S,le.ITF,new Date().getTime())}static decodeMiddle(n,i,o,u){let c=new Int32Array(10),d=new Int32Array(5),f=new Int32Array(5);for(c.fill(0),d.fill(0),f.fill(0);i<o;){ot.recordPattern(n,i,c);for(let x=0;x<5;x++){let E=2*x;d[x]=c[E],f[x]=c[E+1]}let m=rt.decodeDigit(d);u.append(m.toString()),m=this.decodeDigit(f),u.append(m.toString()),c.forEach(function(x){i+=x})}}decodeStart(n){let i=rt.skipWhiteSpace(n),o=rt.findGuardPattern(n,i,rt.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(n,o[0]),o}validateQuietZone(n,i){let o=this.narrowLineWidth*10;o=o<i?o:i;for(let u=i-1;o>0&&u>=0&&!n.get(u);u--)o--;if(o!==0)throw new q}static skipWhiteSpace(n){const i=n.getSize(),o=n.getNextSet(0);if(o===i)throw new q;return o}decodeEnd(n){n.reverse();try{let i=rt.skipWhiteSpace(n),o;try{o=rt.findGuardPattern(n,i,rt.END_PATTERN_REVERSED[0])}catch(c){c instanceof q&&(o=rt.findGuardPattern(n,i,rt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,o[0]);let u=o[0];return o[0]=n.getSize()-o[1],o[1]=n.getSize()-u,o}finally{n.reverse()}}static findGuardPattern(n,i,o){let u=o.length,c=new Int32Array(u),d=n.getSize(),f=!1,m=0,x=i;c.fill(0);for(let E=i;E<d;E++)if(n.get(E)!==f)c[m]++;else{if(m===u-1){if(ot.patternMatchVariance(c,o,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return[x,E];x+=c[0]+c[1],B.arraycopy(c,2,c,0,m-1),c[m-1]=0,c[m]=0,m--}else m++;c[m]=1,f=!f}throw new q}static decodeDigit(n){let i=rt.MAX_AVG_VARIANCE,o=-1,u=rt.PATTERNS.length;for(let c=0;c<u;c++){let d=rt.PATTERNS[c],f=ot.patternMatchVariance(n,d,rt.MAX_INDIVIDUAL_VARIANCE);f<i?(i=f,o=c):f===i&&(o=-1)}if(o>=0)return o%10;throw new q}}rt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],rt.MAX_AVG_VARIANCE=.38,rt.MAX_INDIVIDUAL_VARIANCE=.5,rt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],rt.START_PATTERN=Int32Array.from([1,1,1,1]),rt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class _t extends ot{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let i=!1,o,u=0,c=Int32Array.from([0,0,0]);for(;!i;){c=Int32Array.from([0,0,0]),o=_t.findGuardPattern(n,u,!1,this.START_END_PATTERN,c);let d=o[0];u=o[1];let f=d-(u-d);f>=0&&(i=n.isRange(f,d,!1))}return o}static checkChecksum(n){return _t.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let i=n.length;if(i===0)return!1;let o=parseInt(n.charAt(i-1),10);return _t.getStandardUPCEANChecksum(n.substring(0,i-1))===o}static getStandardUPCEANChecksum(n){let i=n.length,o=0;for(let u=i-1;u>=0;u-=2){let c=n.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new U;o+=c}o*=3;for(let u=i-2;u>=0;u-=2){let c=n.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new U;o+=c}return(1e3-o)%10}static decodeEnd(n,i){return _t.findGuardPattern(n,i,!1,_t.START_END_PATTERN,new Int32Array(_t.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,i,o,u){return this.findGuardPattern(n,i,o,u,new Int32Array(u.length))}static findGuardPattern(n,i,o,u,c){let d=n.getSize();i=o?n.getNextUnset(i):n.getNextSet(i);let f=0,m=i,x=u.length,E=o;for(let A=i;A<d;A++)if(n.get(A)!==E)c[f]++;else{if(f===x-1){if(ot.patternMatchVariance(c,u,_t.MAX_INDIVIDUAL_VARIANCE)<_t.MAX_AVG_VARIANCE)return Int32Array.from([m,A]);m+=c[0]+c[1];let S=c.slice(2,c.length-1);for(let D=0;D<f-1;D++)c[D]=S[D];c[f-1]=0,c[f]=0,f--}else f++;c[f]=1,E=!E}throw new q}static decodeDigit(n,i,o,u){this.recordPattern(n,o,i);let c=this.MAX_AVG_VARIANCE,d=-1,f=u.length;for(let m=0;m<f;m++){let x=u[m],E=ot.patternMatchVariance(i,x,_t.MAX_INDIVIDUAL_VARIANCE);E<c&&(c=E,d=m)}if(d>=0)return d;throw new q}}_t.MAX_AVG_VARIANCE=.48,_t.MAX_INDIVIDUAL_VARIANCE=.7,_t.START_END_PATTERN=Int32Array.from([1,1,1]),_t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),_t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),_t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class $s{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,i,o){let u=this.decodeRowStringBuffer,c=this.decodeMiddle(i,o,u),d=u.toString(),f=$s.parseExtensionString(d),m=[new de((o[0]+o[1])/2,n),new de(c,n)],x=new Oe(d,null,0,m,le.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&x.putAllMetadata(f),x}decodeMiddle(n,i,o){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=n.getSize(),d=i[1],f=0;for(let x=0;x<5&&d<c;x++){let E=_t.decodeDigit(n,u,d,_t.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let A of u)d+=A;E>=10&&(f|=1<<4-x),x!==4&&(d=n.getNextSet(d),d=n.getNextUnset(d))}if(o.length!==5)throw new q;let m=this.determineCheckDigit(f);if($s.extensionChecksum(o.toString())!==m)throw new q;return d}static extensionChecksum(n){let i=n.length,o=0;for(let u=i-2;u>=0;u-=2)o+=n.charAt(u).charCodeAt(0)-48;o*=3;for(let u=i-1;u>=0;u-=2)o+=n.charAt(u).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(n){for(let i=0;i<10;i++)if(n===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new q}static parseExtensionString(n){if(n.length!==5)return null;let i=$s.parseExtension5String(n);return i==null?null:new Map([[Ce.SUGGESTED_PRICE,i]])}static parseExtension5String(n){let i;switch(n.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let o=parseInt(n.substring(1)),u=(o/100).toString(),c=o%100,d=c<10?"0"+c:c.toString();return i+u+"."+d}}class nu{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,i,o){let u=this.decodeRowStringBuffer,c=this.decodeMiddle(i,o,u),d=u.toString(),f=nu.parseExtensionString(d),m=[new de((o[0]+o[1])/2,n),new de(c,n)],x=new Oe(d,null,0,m,le.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&x.putAllMetadata(f),x}decodeMiddle(n,i,o){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=n.getSize(),d=i[1],f=0;for(let m=0;m<2&&d<c;m++){let x=_t.decodeDigit(n,u,d,_t.L_AND_G_PATTERNS);o+=String.fromCharCode(48+x%10);for(let E of u)d+=E;x>=10&&(f|=1<<1-m),m!==1&&(d=n.getNextSet(d),d=n.getNextUnset(d))}if(o.length!==2)throw new q;if(parseInt(o.toString())%4!==f)throw new q;return d}static parseExtensionString(n){return n.length!==2?null:new Map([[Ce.ISSUE_NUMBER,parseInt(n)]])}}class Th{static decodeRow(n,i,o){let u=_t.findGuardPattern(i,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new $s().decodeRow(n,i,u)}catch{return new nu().decodeRow(n,i,u)}}}Th.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class $e extends _t{constructor(){super(),this.decodeRowStringBuffer="",$e.L_AND_G_PATTERNS=$e.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let i=$e.L_PATTERNS[n-10],o=new Int32Array(i.length);for(let u=0;u<i.length;u++)o[u]=i[i.length-u-1];$e.L_AND_G_PATTERNS[n]=o}}decodeRow(n,i,o){let u=$e.findStartGuardPattern(i),c=o==null?null:o.get(G.NEED_RESULT_POINT_CALLBACK);if(c!=null){const ee=new de((u[0]+u[1])/2,n);c.foundPossibleResultPoint(ee)}let d=this.decodeMiddle(i,u,this.decodeRowStringBuffer),f=d.rowOffset,m=d.resultString;if(c!=null){const ee=new de(f,n);c.foundPossibleResultPoint(ee)}let x=this.decodeEnd(i,f);if(c!=null){const ee=new de((x[0]+x[1])/2,n);c.foundPossibleResultPoint(ee)}let E=x[1],A=E+(E-x[0]);if(A>=i.getSize()||!i.isRange(E,A,!1))throw new q;let S=m.toString();if(S.length<8)throw new U;if(!$e.checkChecksum(S))throw new T;let D=(u[1]+u[0])/2,j=(x[1]+x[0])/2,V=this.getBarcodeFormat(),W=[new de(D,n),new de(j,n)],K=new Oe(S,null,0,W,V,new Date().getTime()),ie=0;try{let ee=Th.decodeRow(n,i,x[1]);K.putMetadata(Ce.UPC_EAN_EXTENSION,ee.getText()),K.putAllMetadata(ee.getResultMetadata()),K.addResultPoints(ee.getResultPoints()),ie=ee.getText().length}catch{}let se=o==null?null:o.get(G.ALLOWED_EAN_EXTENSIONS);if(se!=null){let ee=!1;for(let Ue in se)if(ie.toString()===Ue){ee=!0;break}if(!ee)throw new q}return K}decodeEnd(n,i){return $e.findGuardPattern(n,i,!1,$e.START_END_PATTERN,new Int32Array($e.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return $e.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let i=n.length;if(i===0)return!1;let o=parseInt(n.charAt(i-1),10);return $e.getStandardUPCEANChecksum(n.substring(0,i-1))===o}static getStandardUPCEANChecksum(n){let i=n.length,o=0;for(let u=i-1;u>=0;u-=2){let c=n.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new U;o+=c}o*=3;for(let u=i-2;u>=0;u-=2){let c=n.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new U;o+=c}return(1e3-o)%10}}class pi extends $e{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,i,o){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=n.getSize(),d=i[1],f=0;for(let x=0;x<6&&d<c;x++){let E=$e.decodeDigit(n,u,d,$e.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let A of u)d+=A;E>=10&&(f|=1<<5-x)}o=pi.determineFirstDigit(o,f),d=$e.findGuardPattern(n,d,!0,$e.MIDDLE_PATTERN,new Int32Array($e.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<6&&d<c;x++){let E=$e.decodeDigit(n,u,d,$e.L_PATTERNS);o+=String.fromCharCode(48+E);for(let A of u)d+=A}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return le.EAN_13}static determineFirstDigit(n,i){for(let o=0;o<10;o++)if(i===this.FIRST_DIGIT_ENCODINGS[o])return n=String.fromCharCode(48+o)+n,n;throw new q}}pi.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Rh extends $e{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,i,o){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=n.getSize(),d=i[1];for(let m=0;m<4&&d<c;m++){let x=$e.decodeDigit(n,u,d,$e.L_PATTERNS);o+=String.fromCharCode(48+x);for(let E of u)d+=E}d=$e.findGuardPattern(n,d,!0,$e.MIDDLE_PATTERN,new Int32Array($e.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&d<c;m++){let x=$e.decodeDigit(n,u,d,$e.L_PATTERNS);o+=String.fromCharCode(48+x);for(let E of u)d+=E}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return le.EAN_8}}class Nh extends $e{constructor(){super(...arguments),this.ean13Reader=new pi}getBarcodeFormat(){return le.UPC_A}decode(n,i){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,i,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,i,o))}decodeMiddle(n,i,o){return this.ean13Reader.decodeMiddle(n,i,o)}maybeReturnResult(n){let i=n.getText();if(i.charAt(0)==="0"){let o=new Oe(i.substring(1),null,null,n.getResultPoints(),le.UPC_A);return n.getResultMetadata()!=null&&o.putAllMetadata(n.getResultMetadata()),o}else throw new q}reset(){this.ean13Reader.reset()}}class qr extends $e{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,i,o){const u=this.decodeMiddleCounters.map(x=>x);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const c=n.getSize();let d=i[1],f=0;for(let x=0;x<6&&d<c;x++){const E=qr.decodeDigit(n,u,d,qr.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let A of u)d+=A;E>=10&&(f|=1<<5-x)}let m=qr.determineNumSysAndCheckDigit(o,f);return{rowOffset:d,resultString:m}}decodeEnd(n,i){return qr.findGuardPatternWithoutCounters(n,i,!0,qr.MIDDLE_END_PATTERN)}checkChecksum(n){return $e.checkChecksum(qr.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,i){for(let o=0;o<=1;o++)for(let u=0;u<10;u++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][u]){let c=String.fromCharCode(48+o),d=String.fromCharCode(48+u);return c+n+d}throw q.getNotFoundInstance()}getBarcodeFormat(){return le.UPC_E}static convertUPCEtoUPCA(n){const i=n.slice(1,7).split("").map(c=>c.charCodeAt(0)),o=new ue;o.append(n.charAt(0));let u=i[5];switch(u){case 0:case 1:case 2:o.appendChars(i,0,2),o.append(u),o.append("0000"),o.appendChars(i,2,3);break;case 3:o.appendChars(i,0,3),o.append("00000"),o.appendChars(i,3,2);break;case 4:o.appendChars(i,0,4),o.append("00000"),o.append(i[4]);break;default:o.appendChars(i,0,5),o.append("0000"),o.append(u);break}return n.length>=8&&o.append(n.charAt(7)),o.toString()}}qr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),qr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class iu extends ot{constructor(n){super();let i=n==null?null:n.get(G.POSSIBLE_FORMATS),o=[];s(i)?(o.push(new pi),o.push(new Nh),o.push(new Rh),o.push(new qr)):(i.indexOf(le.EAN_13)>-1&&o.push(new pi),i.indexOf(le.UPC_A)>-1&&o.push(new Nh),i.indexOf(le.EAN_8)>-1&&o.push(new Rh),i.indexOf(le.UPC_E)>-1&&o.push(new qr)),this.readers=o}decodeRow(n,i,o){for(let u of this.readers)try{const c=u.decodeRow(n,i,o),d=c.getBarcodeFormat()===le.EAN_13&&c.getText().charAt(0)==="0",f=o==null?null:o.get(G.POSSIBLE_FORMATS),m=f==null||f.includes(le.UPC_A);if(d&&m){const x=c.getRawBytes(),E=new Oe(c.getText().substring(1),x,x?x.length:null,c.getResultPoints(),le.UPC_A);return E.putAllMetadata(c.getResultMetadata()),E}return c}catch{}throw new q}reset(){for(let n of this.readers)n.reset()}}class rr extends ot{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,i){for(let o=0;o<i.length;o++)if(ot.patternMatchVariance(n,i[o],rr.MAX_INDIVIDUAL_VARIANCE)<rr.MAX_AVG_VARIANCE)return o;throw new q}static count(n){return ye.sum(new Int32Array(n))}static increment(n,i){let o=0,u=i[0];for(let c=1;c<n.length;c++)i[c]>u&&(u=i[c],o=c);n[o]++}static decrement(n,i){let o=0,u=i[0];for(let c=1;c<n.length;c++)i[c]<u&&(u=i[c],o=c);n[o]--}static isFinderPattern(n){let i=n[0]+n[1],o=i+n[2]+n[3],u=i/o;if(u>=rr.MIN_FINDER_PATTERN_RATIO&&u<=rr.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let f of n)f>d&&(d=f),f<c&&(c=f);return d<10*c}return!1}}rr.MAX_AVG_VARIANCE=.2,rr.MAX_INDIVIDUAL_VARIANCE=.45,rr.MIN_FINDER_PATTERN_RATIO=9.5/12,rr.MAX_FINDER_PATTERN_RATIO=12.5/14;class Gi{constructor(n,i){this.value=n,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof Gi))return!1;const i=n;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class sa{constructor(n,i,o,u,c){this.value=n,this.startEnd=i,this.value=n,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new de(o,c)),this.resultPoints.push(new de(u,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof sa))return!1;const i=n;return this.value===i.value}hashCode(){return this.value}}class un{constructor(){}static getRSSvalue(n,i,o){let u=0;for(let m of n)u+=m;let c=0,d=0,f=n.length;for(let m=0;m<f-1;m++){let x;for(x=1,d|=1<<m;x<n[m];x++,d&=~(1<<m)){let E=un.combins(u-x-1,f-m-2);if(o&&d===0&&u-x-(f-m-1)>=f-m-1&&(E-=un.combins(u-x-(f-m),f-m-2)),f-m-1>1){let A=0;for(let S=u-x-(f-m-2);S>i;S--)A+=un.combins(u-x-S-1,f-m-3);E-=A*(f-1-m)}else u-x>i&&E--;c+=E}u-=x}return c}static combins(n,i){let o,u;n-i>i?(u=i,o=n-i):(u=n-i,o=i);let c=1,d=1;for(let f=n;f>o;f--)c*=f,d<=u&&(c/=d,d++);for(;d<=u;)c/=d,d++;return c}}class Fm{static buildBitArray(n){let i=n.length*2-1;n[n.length-1].getRightChar()==null&&(i-=1);let o=12*i,u=new P(o),c=0,f=n[0].getRightChar().getValue();for(let m=11;m>=0;--m)f&1<<m&&u.set(c),c++;for(let m=1;m<n.length;++m){let x=n[m],E=x.getLeftChar().getValue();for(let A=11;A>=0;--A)E&1<<A&&u.set(c),c++;if(x.getRightChar()!=null){let A=x.getRightChar().getValue();for(let S=11;S>=0;--S)A&1<<S&&u.set(c),c++}}return u}}class mi{constructor(n,i){i?this.decodedInformation=null:(this.finished=n,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class su{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class mr extends su{constructor(n,i){super(n),this.value=i}getValue(){return this.value}isFNC1(){return this.value===mr.FNC1}}mr.FNC1="$";class wi extends su{constructor(n,i,o){super(n),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Br extends su{constructor(n,i,o){if(super(n),i<0||i>10||o<0||o>10)throw new U;this.firstDigit=i,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Br.FNC1}isSecondDigitFNC1(){return this.secondDigit===Br.FNC1}isAnyFNC1(){return this.firstDigit===Br.FNC1||this.secondDigit===Br.FNC1}}Br.FNC1=10;class fe{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new q;let i=n.substring(0,2);for(let c of fe.TWO_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(2,c[2],n):fe.processFixedAI(2,c[1],n);if(n.length<3)throw new q;let o=n.substring(0,3);for(let c of fe.THREE_DIGIT_DATA_LENGTH)if(c[0]===o)return c[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(3,c[2],n):fe.processFixedAI(3,c[1],n);for(let c of fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===o)return c[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(4,c[2],n):fe.processFixedAI(4,c[1],n);if(n.length<4)throw new q;let u=n.substring(0,4);for(let c of fe.FOUR_DIGIT_DATA_LENGTH)if(c[0]===u)return c[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(4,c[2],n):fe.processFixedAI(4,c[1],n);throw new q}static processFixedAI(n,i,o){if(o.length<n)throw new q;let u=o.substring(0,n);if(o.length<n+i)throw new q;let c=o.substring(n,n+i),d=o.substring(n+i),f="("+u+")"+c,m=fe.parseFieldsInGeneralPurpose(d);return m==null?f:f+m}static processVariableAI(n,i,o){let u=o.substring(0,n),c;o.length<n+i?c=o.length:c=n+i;let d=o.substring(n,c),f=o.substring(c),m="("+u+")"+d,x=fe.parseFieldsInGeneralPurpose(f);return x==null?m:m+x}}fe.VARIABLE_LENGTH=[],fe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",fe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",fe.VARIABLE_LENGTH,20],["22",fe.VARIABLE_LENGTH,29],["30",fe.VARIABLE_LENGTH,8],["37",fe.VARIABLE_LENGTH,8],["90",fe.VARIABLE_LENGTH,30],["91",fe.VARIABLE_LENGTH,30],["92",fe.VARIABLE_LENGTH,30],["93",fe.VARIABLE_LENGTH,30],["94",fe.VARIABLE_LENGTH,30],["95",fe.VARIABLE_LENGTH,30],["96",fe.VARIABLE_LENGTH,30],["97",fe.VARIABLE_LENGTH,3],["98",fe.VARIABLE_LENGTH,30],["99",fe.VARIABLE_LENGTH,30]],fe.THREE_DIGIT_DATA_LENGTH=[["240",fe.VARIABLE_LENGTH,30],["241",fe.VARIABLE_LENGTH,30],["242",fe.VARIABLE_LENGTH,6],["250",fe.VARIABLE_LENGTH,30],["251",fe.VARIABLE_LENGTH,30],["253",fe.VARIABLE_LENGTH,17],["254",fe.VARIABLE_LENGTH,20],["400",fe.VARIABLE_LENGTH,30],["401",fe.VARIABLE_LENGTH,30],["402",17],["403",fe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",fe.VARIABLE_LENGTH,20],["421",fe.VARIABLE_LENGTH,15],["422",3],["423",fe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",fe.VARIABLE_LENGTH,15],["391",fe.VARIABLE_LENGTH,18],["392",fe.VARIABLE_LENGTH,15],["393",fe.VARIABLE_LENGTH,18],["703",fe.VARIABLE_LENGTH,30]],fe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",fe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",fe.VARIABLE_LENGTH,20],["8003",fe.VARIABLE_LENGTH,30],["8004",fe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",fe.VARIABLE_LENGTH,30],["8008",fe.VARIABLE_LENGTH,12],["8018",18],["8020",fe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",fe.VARIABLE_LENGTH,70],["8200",fe.VARIABLE_LENGTH,70]];class Xi{constructor(n){this.buffer=new ue,this.information=n}decodeAllCodes(n,i){let o=i,u=null;do{let c=this.decodeGeneralPurposeField(o,u),d=fe.parseFieldsInGeneralPurpose(c.getNewString());if(d!=null&&n.append(d),c.isRemaining()?u=""+c.getRemainingValue():u=null,o===c.getNewPosition())break;o=c.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let i=n;i<n+3;++i)if(this.information.get(i))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(n,4);return c===0?new Br(this.information.getSize(),Br.FNC1,Br.FNC1):new Br(this.information.getSize(),c-1,Br.FNC1)}let i=this.extractNumericValueFromBitArray(n,7),o=(i-8)/11,u=(i-8)%11;return new Br(n+7,o,u)}extractNumericValueFromBitArray(n,i){return Xi.extractNumericValueFromBitArray(this.information,n,i)}static extractNumericValueFromBitArray(n,i,o){let u=0;for(let c=0;c<o;++c)n.get(i+c)&&(u|=1<<o-c-1);return u}decodeGeneralPurposeField(n,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(n);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new wi(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new wi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,i;do{let o=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),n=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),n=i.isFinished()):(i=this.parseNumericBlock(),n=i.isFinished()),!(o!==this.current.getPosition())&&!n)break}while(!n);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let i;return n.isSecondDigitFNC1()?i=new wi(this.current.getPosition(),this.buffer.toString()):i=new wi(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new mi(!0,i)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let i=new wi(this.current.getPosition(),this.buffer.toString());return new mi(!0,i)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new mi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let i=new wi(this.current.getPosition(),this.buffer.toString());return new mi(!0,i)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new mi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let i=new wi(this.current.getPosition(),this.buffer.toString());return new mi(!0,i)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new mi(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,5);if(i>=5&&i<16)return!0;if(n+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(n,7);if(o>=64&&o<116)return!0;if(n+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(n,8);return u>=232&&u<253}decodeIsoIec646(n){let i=this.extractNumericValueFromBitArray(n,5);if(i===15)return new mr(n+5,mr.FNC1);if(i>=5&&i<15)return new mr(n+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(n,7);if(o>=64&&o<90)return new mr(n+7,""+(o+1));if(o>=90&&o<116)return new mr(n+7,""+(o+7));let u=this.extractNumericValueFromBitArray(n,8),c;switch(u){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new U}return new mr(n+8,c)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,5);if(i>=5&&i<16)return!0;if(n+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(n,6);return o>=16&&o<63}decodeAlphanumeric(n){let i=this.extractNumericValueFromBitArray(n,5);if(i===15)return new mr(n+5,mr.FNC1);if(i>=5&&i<15)return new mr(n+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(n,6);if(o>=32&&o<58)return new mr(n+6,""+(o+33));let u;switch(o){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new Me("Decoding invalid alphanumeric value: "+o)}return new mr(n+6,u)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let i=0;i<5&&i+n<this.information.getSize();++i)if(i===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+i))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let i=n;i<n+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let i=0;i<4&&i+n<this.information.getSize();++i)if(this.information.get(n+i))return!1;return!0}}class ou{constructor(n){this.information=n,this.generalDecoder=new Xi(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class wr extends ou{constructor(n){super(n)}encodeCompressedGtin(n,i){n.append("(01)");let o=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,i,o)}encodeCompressedGtinWithoutAI(n,i,o){for(let u=0;u<4;++u){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*u,10);c/100===0&&n.append("0"),c/10===0&&n.append("0"),n.append(c)}wr.appendCheckDigit(n,o)}static appendCheckDigit(n,i){let o=0;for(let u=0;u<13;u++){let c=n.charAt(u+i).charCodeAt(0)-48;o+=u&1?c:3*c}o=10-o%10,o===10&&(o=0),n.append(o)}}wr.GTIN_SIZE=40;class $i extends wr{constructor(n){super(n)}parseInformation(){let n=new ue;n.append("(01)");let i=n.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray($i.HEADER_SIZE,4);return n.append(o),this.encodeCompressedGtinWithoutAI(n,$i.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(n,$i.HEADER_SIZE+44)}}$i.HEADER_SIZE=4;class oa extends ou{constructor(n){super(n)}parseInformation(){let n=new ue;return this.getGeneralDecoder().decodeAllCodes(n,oa.HEADER_SIZE)}}oa.HEADER_SIZE=5;class aa extends wr{constructor(n){super(n)}encodeCompressedWeight(n,i,o){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(i,o);this.addWeightCode(n,u);let c=this.checkWeight(u),d=1e5;for(let f=0;f<5;++f)c/d===0&&n.append("0"),d/=10;n.append(c)}}class cn extends aa{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=cn.HEADER_SIZE+aa.GTIN_SIZE+cn.WEIGHT_SIZE)throw new q;let n=new ue;return this.encodeCompressedGtin(n,cn.HEADER_SIZE),this.encodeCompressedWeight(n,cn.HEADER_SIZE+aa.GTIN_SIZE,cn.WEIGHT_SIZE),n.toString()}}cn.HEADER_SIZE=5,cn.WEIGHT_SIZE=15;class jm extends cn{constructor(n){super(n)}addWeightCode(n,i){n.append("(3103)")}checkWeight(n){return n}}class Um extends cn{constructor(n){super(n)}addWeightCode(n,i){i<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class dn extends wr{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<dn.HEADER_SIZE+wr.GTIN_SIZE)throw new q;let n=new ue;this.encodeCompressedGtin(n,dn.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(dn.HEADER_SIZE+wr.GTIN_SIZE,dn.LAST_DIGIT_SIZE);n.append("(392"),n.append(i),n.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(dn.HEADER_SIZE+wr.GTIN_SIZE+dn.LAST_DIGIT_SIZE,null);return n.append(o.getNewString()),n.toString()}}dn.HEADER_SIZE=8,dn.LAST_DIGIT_SIZE=2;class ur extends wr{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<ur.HEADER_SIZE+wr.GTIN_SIZE)throw new q;let n=new ue;this.encodeCompressedGtin(n,ur.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(ur.HEADER_SIZE+wr.GTIN_SIZE,ur.LAST_DIGIT_SIZE);n.append("(393"),n.append(i),n.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(ur.HEADER_SIZE+wr.GTIN_SIZE+ur.LAST_DIGIT_SIZE,ur.FIRST_THREE_DIGITS_SIZE);o/100==0&&n.append("0"),o/10==0&&n.append("0"),n.append(o);let u=this.getGeneralDecoder().decodeGeneralPurposeField(ur.HEADER_SIZE+wr.GTIN_SIZE+ur.LAST_DIGIT_SIZE+ur.FIRST_THREE_DIGITS_SIZE,null);return n.append(u.getNewString()),n.toString()}}ur.HEADER_SIZE=8,ur.LAST_DIGIT_SIZE=2,ur.FIRST_THREE_DIGITS_SIZE=10;class pt extends aa{constructor(n,i,o){super(n),this.dateCode=o,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=pt.HEADER_SIZE+pt.GTIN_SIZE+pt.WEIGHT_SIZE+pt.DATE_SIZE)throw new q;let n=new ue;return this.encodeCompressedGtin(n,pt.HEADER_SIZE),this.encodeCompressedWeight(n,pt.HEADER_SIZE+pt.GTIN_SIZE,pt.WEIGHT_SIZE),this.encodeCompressedDate(n,pt.HEADER_SIZE+pt.GTIN_SIZE+pt.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,i){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(i,pt.DATE_SIZE);if(o==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let u=o%32;o/=32;let c=o%12+1;o/=12;let d=o;d/10==0&&n.append("0"),n.append(d),c/10==0&&n.append("0"),n.append(c),u/10==0&&n.append("0"),n.append(u)}addWeightCode(n,i){n.append("("),n.append(this.firstAIdigits),n.append(i/1e5),n.append(")")}checkWeight(n){return n%1e5}}pt.HEADER_SIZE=8,pt.WEIGHT_SIZE=20,pt.DATE_SIZE=16;function Oh(C){try{if(C.get(1))return new $i(C);if(!C.get(2))return new oa(C);switch(Xi.extractNumericValueFromBitArray(C,1,4)){case 4:return new jm(C);case 5:return new Um(C)}switch(Xi.extractNumericValueFromBitArray(C,1,5)){case 12:return new dn(C);case 13:return new ur(C)}switch(Xi.extractNumericValueFromBitArray(C,1,7)){case 56:return new pt(C,"310","11");case 57:return new pt(C,"320","11");case 58:return new pt(C,"310","13");case 59:return new pt(C,"320","13");case 60:return new pt(C,"310","15");case 61:return new pt(C,"320","15");case 62:return new pt(C,"310","17");case 63:return new pt(C,"320","17")}}catch(n){throw console.log(n),new Me("unknown decoder: "+C)}}class Ln{constructor(n,i,o,u){this.leftchar=n,this.rightchar=i,this.finderpattern=o,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,i){return n instanceof Ln?Ln.equalsOrNull(n.leftchar,i.leftchar)&&Ln.equalsOrNull(n.rightchar,i.rightchar)&&Ln.equalsOrNull(n.finderpattern,i.finderpattern):!1}static equalsOrNull(n,i){return n===null?i===null:Ln.equals(n,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class au{constructor(n,i,o){this.pairs=n,this.rowNumber=i,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,i){return n instanceof au?this.checkEqualitity(n,i)&&n.wasReversed===i.wasReversed:!1}checkEqualitity(n,i){if(!n||!i)return;let o;return n.forEach((u,c)=>{i.forEach(d=>{u.getLeftChar().getValue()===d.getLeftChar().getValue()&&u.getRightChar().getValue()===d.getRightChar().getValue()&&u.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(o=!0)})}),o}}class Q extends rr{constructor(n){super(...arguments),this.pairs=new Array(Q.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,i,o){this.pairs.length=0,this.startFromEven=!1;try{return Q.constructResult(this.decodeRow2pairs(n,i))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,Q.constructResult(this.decodeRow2pairs(n,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,i){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,n))}catch(c){if(c instanceof q){if(!this.pairs.length)throw new q;o=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(n,!1),u){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new q}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return n&&(this.rows=this.rows.reverse()),i}checkRows(n,i){for(let o=i;o<this.rows.length;o++){let u=this.rows[o];this.pairs.length=0;for(let d of n)this.pairs.push(d.getPairs());if(this.pairs.push(u.getPairs()),!Q.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(n);c.push(u);try{return this.checkRows(c,o+1)}catch(d){this.verbose&&console.log(d)}}throw new q}static isValidSequence(n){for(let i of Q.FINDER_PATTERN_SEQUENCES){if(n.length>i.length)continue;let o=!0;for(let u=0;u<n.length;u++)if(n[u].getFinderPattern().getValue()!=i[u]){o=!1;break}if(o)return!0}return!1}storeRow(n,i){let o=0,u=!1,c=!1;for(;o<this.rows.length;){let d=this.rows[o];if(d.getRowNumber()>n){c=d.isEquivalent(this.pairs);break}u=d.isEquivalent(this.pairs),o++}c||u||Q.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new au(this.pairs,n,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,i){for(let o of i)if(o.getPairs().length!==n.length){for(let u of o.getPairs())for(let c of n)if(Ln.equals(u,c))break}}static isPartialRow(n,i){for(let o of i){let u=!0;for(let c of n){let d=!1;for(let f of o.getPairs())if(c.equals(f)){d=!0;break}if(!d){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(n){let i=Fm.buildBitArray(n),u=Oh(i).parseInformation(),c=n[0].getFinderPattern().getResultPoints(),d=n[n.length-1].getFinderPattern().getResultPoints(),f=[c[0],c[1],d[0],d[1]];return new Oe(u,null,null,f,le.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),i=n.getLeftChar(),o=n.getRightChar();if(o==null)return!1;let u=o.getChecksumPortion(),c=2;for(let f=1;f<this.pairs.size();++f){let m=this.pairs.get(f);u+=m.getLeftChar().getChecksumPortion(),c++;let x=m.getRightChar();x!=null&&(u+=x.getChecksumPortion(),c++)}return u%=211,211*(c-4)+u==i.getValue()}static getNextSecondBar(n,i){let o;return n.get(i)?(o=n.getNextUnset(i),o=n.getNextSet(o)):(o=n.getNextSet(i),o=n.getNextUnset(o)),o}retrieveNextPair(n,i,o){let u=i.length%2==0;this.startFromEven&&(u=!u);let c,d=!0,f=-1;do this.findNextPair(n,i,f),c=this.parseFoundFinderPattern(n,o,u),c==null?f=Q.getNextSecondBar(n,this.startEnd[0]):d=!1;while(d);let m=this.decodeDataCharacter(n,c,u,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new q;let x;try{x=this.decodeDataCharacter(n,c,u,!1)}catch(E){x=null,this.verbose&&console.log(E)}return new Ln(m,x,c,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,i,o){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=n.getSize(),d;o>=0?d=o:this.isEmptyPair(i)?d=0:d=i[i.length-1].getFinderPattern().getStartEnd()[1];let f=i.length%2!=0;this.startFromEven&&(f=!f);let m=!1;for(;d<c&&(m=!n.get(d),!!m);)d++;let x=0,E=d;for(let A=d;A<c;A++)if(n.get(A)!=m)u[x]++;else{if(x==3){if(f&&Q.reverseCounters(u),Q.isFinderPattern(u)){this.startEnd[0]=E,this.startEnd[1]=A;return}f&&Q.reverseCounters(u),E+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,x--}else x++;u[x]=1,m=!m}throw new q}static reverseCounters(n){let i=n.length;for(let o=0;o<i/2;++o){let u=n[o];n[o]=n[i-o-1],n[i-o-1]=u}}parseFoundFinderPattern(n,i,o){let u,c,d;if(o){let x=this.startEnd[0]-1;for(;x>=0&&!n.get(x);)x--;x++,u=this.startEnd[0]-x,c=x,d=this.startEnd[1]}else c=this.startEnd[0],d=n.getNextUnset(this.startEnd[1]+1),u=d-this.startEnd[1];let f=this.getDecodeFinderCounters();B.arraycopy(f,0,f,1,f.length-1),f[0]=u;let m;try{m=this.parseFinderValue(f,Q.FINDER_PATTERNS)}catch{return null}return new sa(m,[c,d],c,d,i)}decodeDataCharacter(n,i,o,u){let c=this.getDataCharacterCounters();for(let it=0;it<c.length;it++)c[it]=0;if(u)Q.recordPatternInReverse(n,i.getStartEnd()[0],c);else{Q.recordPattern(n,i.getStartEnd()[1],c);for(let it=0,Yt=c.length-1;it<Yt;it++,Yt--){let Sr=c[it];c[it]=c[Yt],c[Yt]=Sr}}let d=17,f=ye.sum(new Int32Array(c))/d,m=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(f-m)/m>.3)throw new q;let x=this.getOddCounts(),E=this.getEvenCounts(),A=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let it=0;it<c.length;it++){let Yt=1*c[it]/f,Sr=Yt+.5;if(Sr<1){if(Yt<.3)throw new q;Sr=1}else if(Sr>8){if(Yt>8.7)throw new q;Sr=8}let Qi=it/2;it&1?(E[Qi]=Sr,S[Qi]=Yt-Sr):(x[Qi]=Sr,A[Qi]=Yt-Sr)}this.adjustOddEvenCounts(d);let D=4*i.getValue()+(o?0:2)+(u?0:1)-1,j=0,V=0;for(let it=x.length-1;it>=0;it--){if(Q.isNotA1left(i,o,u)){let Yt=Q.WEIGHTS[D][2*it];V+=x[it]*Yt}j+=x[it]}let W=0;for(let it=E.length-1;it>=0;it--)if(Q.isNotA1left(i,o,u)){let Yt=Q.WEIGHTS[D][2*it+1];W+=E[it]*Yt}let K=V+W;if(j&1||j>13||j<4)throw new q;let ie=(13-j)/2,se=Q.SYMBOL_WIDEST[ie],ee=9-se,Ue=un.getRSSvalue(x,se,!0),Pe=un.getRSSvalue(E,ee,!1),yr=Q.EVEN_TOTAL_SUBSET[ie],Yr=Q.GSUM[ie],vr=Ue*yr+Pe+Yr;return new Gi(vr,K)}static isNotA1left(n,i,o){return!(n.getValue()==0&&i&&o)}adjustOddEvenCounts(n){let i=ye.sum(new Int32Array(this.getOddCounts())),o=ye.sum(new Int32Array(this.getEvenCounts())),u=!1,c=!1;i>13?c=!0:i<4&&(u=!0);let d=!1,f=!1;o>13?f=!0:o<4&&(d=!0);let m=i+o-n,x=(i&1)==1,E=(o&1)==0;if(m==1)if(x){if(E)throw new q;c=!0}else{if(!E)throw new q;f=!0}else if(m==-1)if(x){if(E)throw new q;u=!0}else{if(!E)throw new q;d=!0}else if(m==0){if(x){if(!E)throw new q;i<o?(u=!0,f=!0):(c=!0,d=!0)}else if(E)throw new q}else throw new q;if(u){if(c)throw new q;Q.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&Q.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(f)throw new q;Q.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&Q.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Q.SYMBOL_WIDEST=[7,5,4,3,1],Q.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Q.GSUM=[0,348,1388,2948,3988],Q.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Q.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Q.FINDER_PAT_A=0,Q.FINDER_PAT_B=1,Q.FINDER_PAT_C=2,Q.FINDER_PAT_D=3,Q.FINDER_PAT_E=4,Q.FINDER_PAT_F=5,Q.FINDER_PATTERN_SEQUENCES=[[Q.FINDER_PAT_A,Q.FINDER_PAT_A],[Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B],[Q.FINDER_PAT_A,Q.FINDER_PAT_C,Q.FINDER_PAT_B,Q.FINDER_PAT_D],[Q.FINDER_PAT_A,Q.FINDER_PAT_E,Q.FINDER_PAT_B,Q.FINDER_PAT_D,Q.FINDER_PAT_C],[Q.FINDER_PAT_A,Q.FINDER_PAT_E,Q.FINDER_PAT_B,Q.FINDER_PAT_D,Q.FINDER_PAT_D,Q.FINDER_PAT_F],[Q.FINDER_PAT_A,Q.FINDER_PAT_E,Q.FINDER_PAT_B,Q.FINDER_PAT_D,Q.FINDER_PAT_E,Q.FINDER_PAT_F,Q.FINDER_PAT_F],[Q.FINDER_PAT_A,Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B,Q.FINDER_PAT_C,Q.FINDER_PAT_C,Q.FINDER_PAT_D,Q.FINDER_PAT_D],[Q.FINDER_PAT_A,Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B,Q.FINDER_PAT_C,Q.FINDER_PAT_C,Q.FINDER_PAT_D,Q.FINDER_PAT_E,Q.FINDER_PAT_E],[Q.FINDER_PAT_A,Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B,Q.FINDER_PAT_C,Q.FINDER_PAT_C,Q.FINDER_PAT_D,Q.FINDER_PAT_E,Q.FINDER_PAT_F,Q.FINDER_PAT_F],[Q.FINDER_PAT_A,Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B,Q.FINDER_PAT_C,Q.FINDER_PAT_D,Q.FINDER_PAT_D,Q.FINDER_PAT_E,Q.FINDER_PAT_E,Q.FINDER_PAT_F,Q.FINDER_PAT_F]],Q.MAX_PAIRS=11;class Vm extends Gi{constructor(n,i,o){super(n,i),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ct extends rr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,i,o){const u=this.decodePair(i,!1,n,o);Ct.addOrTally(this.possibleLeftPairs,u),i.reverse();let c=this.decodePair(i,!0,n,o);Ct.addOrTally(this.possibleRightPairs,c),i.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let f of this.possibleRightPairs)if(f.getCount()>1&&Ct.checkChecksum(d,f))return Ct.constructResult(d,f)}throw new q}static addOrTally(n,i){if(i==null)return;let o=!1;for(let u of n)if(u.getValue()===i.getValue()){u.incrementCount(),o=!0;break}o||n.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,i){let o=4537077*n.getValue()+i.getValue(),u=new String(o).toString(),c=new ue;for(let x=13-u.length;x>0;x--)c.append("0");c.append(u);let d=0;for(let x=0;x<13;x++){let E=c.charAt(x).charCodeAt(0)-48;d+=x&1?E:3*E}d=10-d%10,d===10&&(d=0),c.append(d.toString());let f=n.getFinderPattern().getResultPoints(),m=i.getFinderPattern().getResultPoints();return new Oe(c.toString(),null,0,[f[0],f[1],m[0],m[1]],le.RSS_14,new Date().getTime())}static checkChecksum(n,i){let o=(n.getChecksumPortion()+16*i.getChecksumPortion())%79,u=9*n.getFinderPattern().getValue()+i.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,o===u}decodePair(n,i,o,u){try{let c=this.findFinderPattern(n,i),d=this.parseFoundFinderPattern(n,o,i,c),f=u==null?null:u.get(G.NEED_RESULT_POINT_CALLBACK);if(f!=null){let E=(c[0]+c[1])/2;i&&(E=n.getSize()-1-E),f.foundPossibleResultPoint(new de(E,o))}let m=this.decodeDataCharacter(n,d,!0),x=this.decodeDataCharacter(n,d,!1);return new Vm(1597*m.getValue()+x.getValue(),m.getChecksumPortion()+4*x.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(n,i,o){let u=this.getDataCharacterCounters();for(let W=0;W<u.length;W++)u[W]=0;if(o)ot.recordPatternInReverse(n,i.getStartEnd()[0],u);else{ot.recordPattern(n,i.getStartEnd()[1]+1,u);for(let W=0,K=u.length-1;W<K;W++,K--){let ie=u[W];u[W]=u[K],u[K]=ie}}let c=o?16:15,d=ye.sum(new Int32Array(u))/c,f=this.getOddCounts(),m=this.getEvenCounts(),x=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let W=0;W<u.length;W++){let K=u[W]/d,ie=Math.floor(K+.5);ie<1?ie=1:ie>8&&(ie=8);let se=Math.floor(W/2);W&1?(m[se]=ie,E[se]=K-ie):(f[se]=ie,x[se]=K-ie)}this.adjustOddEvenCounts(o,c);let A=0,S=0;for(let W=f.length-1;W>=0;W--)S*=9,S+=f[W],A+=f[W];let D=0,j=0;for(let W=m.length-1;W>=0;W--)D*=9,D+=m[W],j+=m[W];let V=S+3*D;if(o){if(A&1||A>12||A<4)throw new q;let W=(12-A)/2,K=Ct.OUTSIDE_ODD_WIDEST[W],ie=9-K,se=un.getRSSvalue(f,K,!1),ee=un.getRSSvalue(m,ie,!0),Ue=Ct.OUTSIDE_EVEN_TOTAL_SUBSET[W],Pe=Ct.OUTSIDE_GSUM[W];return new Gi(se*Ue+ee+Pe,V)}else{if(j&1||j>10||j<4)throw new q;let W=(10-j)/2,K=Ct.INSIDE_ODD_WIDEST[W],ie=9-K,se=un.getRSSvalue(f,K,!0),ee=un.getRSSvalue(m,ie,!1),Ue=Ct.INSIDE_ODD_TOTAL_SUBSET[W],Pe=Ct.INSIDE_GSUM[W];return new Gi(ee*Ue+se+Pe,V)}}findFinderPattern(n,i){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=n.getSize(),c=!1,d=0;for(;d<u&&(c=!n.get(d),i!==c);)d++;let f=0,m=d;for(let x=d;x<u;x++)if(n.get(x)!==c)o[f]++;else{if(f===3){if(rr.isFinderPattern(o))return[m,x];m+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,f--}else f++;o[f]=1,c=!c}throw new q}parseFoundFinderPattern(n,i,o,u){let c=n.get(u[0]),d=u[0]-1;for(;d>=0&&c!==n.get(d);)d--;d++;const f=u[0]-d,m=this.getDecodeFinderCounters(),x=new Int32Array(m.length);B.arraycopy(m,0,x,1,m.length-1),x[0]=f;const E=this.parseFinderValue(x,Ct.FINDER_PATTERNS);let A=d,S=u[1];return o&&(A=n.getSize()-1-A,S=n.getSize()-1-S),new sa(E,[d,u[1]],A,S,i)}adjustOddEvenCounts(n,i){let o=ye.sum(new Int32Array(this.getOddCounts())),u=ye.sum(new Int32Array(this.getEvenCounts())),c=!1,d=!1,f=!1,m=!1;n?(o>12?d=!0:o<4&&(c=!0),u>12?m=!0:u<4&&(f=!0)):(o>11?d=!0:o<5&&(c=!0),u>10?m=!0:u<4&&(f=!0));let x=o+u-i,E=(o&1)===(n?1:0),A=(u&1)===1;if(x===1)if(E){if(A)throw new q;d=!0}else{if(!A)throw new q;m=!0}else if(x===-1)if(E){if(A)throw new q;c=!0}else{if(!A)throw new q;f=!0}else if(x===0){if(E){if(!A)throw new q;o<u?(c=!0,m=!0):(d=!0,f=!0)}else if(A)throw new q}else throw new q;if(c){if(d)throw new q;rr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&rr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(m)throw new q;rr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&rr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ct.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ct.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ct.OUTSIDE_GSUM=[0,161,961,2015,2715],Ct.INSIDE_GSUM=[0,336,1036,1516],Ct.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ct.INSIDE_ODD_WIDEST=[2,4,6,8],Ct.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ki extends ot{constructor(n,i){super(),this.readers=[],this.verbose=i===!0;const o=n?n.get(G.POSSIBLE_FORMATS):null,u=n&&n.get(G.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(le.EAN_13)||o.includes(le.UPC_A)||o.includes(le.EAN_8)||o.includes(le.UPC_E))&&this.readers.push(new iu(n)),o.includes(le.CODE_39)&&this.readers.push(new Dt(u)),o.includes(le.CODE_128)&&this.readers.push(new oe),o.includes(le.ITF)&&this.readers.push(new rt),o.includes(le.RSS_14)&&this.readers.push(new Ct),o.includes(le.RSS_EXPANDED)&&this.readers.push(new Q(this.verbose))):(this.readers.push(new iu(n)),this.readers.push(new Dt),this.readers.push(new iu(n)),this.readers.push(new oe),this.readers.push(new rt),this.readers.push(new Ct),this.readers.push(new Q(this.verbose)))}decodeRow(n,i,o){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(n,i,o)}catch{}throw new q}reset(){this.readers.forEach(n=>n.reset())}}class zm extends he{constructor(n=500,i){super(new Ki(i),n,i)}}class Ye{constructor(n,i,o){this.ecCodewords=n,this.ecBlocks=[i],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ke{constructor(n,i){this.count=n,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ze{constructor(n,i,o,u,c,d){this.versionNumber=n,this.symbolSizeRows=i,this.symbolSizeColumns=o,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=c,this.ecBlocks=d;let f=0;const m=d.getECCodewords(),x=d.getECBlocks();for(let E of x)f+=E.getCount()*(E.getDataCodewords()+m);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,i){if(n&1||i&1)throw new U;for(let o of ze.VERSIONS)if(o.symbolSizeRows===n&&o.symbolSizeColumns===i)return o;throw new U}toString(){return""+this.versionNumber}static buildVersions(){return[new ze(1,10,10,8,8,new Ye(5,new Ke(1,3))),new ze(2,12,12,10,10,new Ye(7,new Ke(1,5))),new ze(3,14,14,12,12,new Ye(10,new Ke(1,8))),new ze(4,16,16,14,14,new Ye(12,new Ke(1,12))),new ze(5,18,18,16,16,new Ye(14,new Ke(1,18))),new ze(6,20,20,18,18,new Ye(18,new Ke(1,22))),new ze(7,22,22,20,20,new Ye(20,new Ke(1,30))),new ze(8,24,24,22,22,new Ye(24,new Ke(1,36))),new ze(9,26,26,24,24,new Ye(28,new Ke(1,44))),new ze(10,32,32,14,14,new Ye(36,new Ke(1,62))),new ze(11,36,36,16,16,new Ye(42,new Ke(1,86))),new ze(12,40,40,18,18,new Ye(48,new Ke(1,114))),new ze(13,44,44,20,20,new Ye(56,new Ke(1,144))),new ze(14,48,48,22,22,new Ye(68,new Ke(1,174))),new ze(15,52,52,24,24,new Ye(42,new Ke(2,102))),new ze(16,64,64,14,14,new Ye(56,new Ke(2,140))),new ze(17,72,72,16,16,new Ye(36,new Ke(4,92))),new ze(18,80,80,18,18,new Ye(48,new Ke(4,114))),new ze(19,88,88,20,20,new Ye(56,new Ke(4,144))),new ze(20,96,96,22,22,new Ye(68,new Ke(4,174))),new ze(21,104,104,24,24,new Ye(56,new Ke(6,136))),new ze(22,120,120,18,18,new Ye(68,new Ke(6,175))),new ze(23,132,132,20,20,new Ye(62,new Ke(8,163))),new ze(24,144,144,22,22,new Ye(62,new Ke(8,156),new Ke(2,155))),new ze(25,8,18,6,16,new Ye(7,new Ke(1,5))),new ze(26,8,32,6,14,new Ye(11,new Ke(1,10))),new ze(27,12,26,10,24,new Ye(14,new Ke(1,16))),new ze(28,12,36,10,16,new Ye(18,new Ke(1,22))),new ze(29,16,36,14,16,new Ye(24,new Ke(1,32))),new ze(30,16,48,14,22,new Ye(28,new Ke(1,49)))]}}ze.VERSIONS=ze.buildVersions();class lu{constructor(n){const i=n.getHeight();if(i<8||i>144||i&1)throw new U;this.version=lu.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new Ne(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const i=n.getHeight(),o=n.getWidth();return ze.getVersionForDimensions(i,o)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let i=0,o=4,u=0;const c=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let f=!1,m=!1,x=!1,E=!1;do if(o===c&&u===0&&!f)n[i++]=this.readCorner1(c,d)&255,o-=2,u+=2,f=!0;else if(o===c-2&&u===0&&d&3&&!m)n[i++]=this.readCorner2(c,d)&255,o-=2,u+=2,m=!0;else if(o===c+4&&u===2&&!(d&7)&&!x)n[i++]=this.readCorner3(c,d)&255,o-=2,u+=2,x=!0;else if(o===c-2&&u===0&&(d&7)===4&&!E)n[i++]=this.readCorner4(c,d)&255,o-=2,u+=2,E=!0;else{do o<c&&u>=0&&!this.readMappingMatrix.get(u,o)&&(n[i++]=this.readUtah(o,u,c,d)&255),o-=2,u+=2;while(o>=0&&u<d);o+=1,u+=3;do o>=0&&u<d&&!this.readMappingMatrix.get(u,o)&&(n[i++]=this.readUtah(o,u,c,d)&255),o+=2,u-=2;while(o<c&&u>=0);o+=3,u+=1}while(o<c||u<d);if(i!==this.version.getTotalCodewords())throw new U;return n}readModule(n,i,o,u){return n<0&&(n+=o,i+=4-(o+4&7)),i<0&&(i+=u,n+=4-(u+4&7)),this.readMappingMatrix.set(i,n),this.mappingBitMatrix.get(i,n)}readUtah(n,i,o,u){let c=0;return this.readModule(n-2,i-2,o,u)&&(c|=1),c<<=1,this.readModule(n-2,i-1,o,u)&&(c|=1),c<<=1,this.readModule(n-1,i-2,o,u)&&(c|=1),c<<=1,this.readModule(n-1,i-1,o,u)&&(c|=1),c<<=1,this.readModule(n-1,i,o,u)&&(c|=1),c<<=1,this.readModule(n,i-2,o,u)&&(c|=1),c<<=1,this.readModule(n,i-1,o,u)&&(c|=1),c<<=1,this.readModule(n,i,o,u)&&(c|=1),c}readCorner1(n,i){let o=0;return this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,1,n,i)&&(o|=1),o<<=1,this.readModule(n-1,2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o<<=1,this.readModule(2,i-1,n,i)&&(o|=1),o<<=1,this.readModule(3,i-1,n,i)&&(o|=1),o}readCorner2(n,i){let o=0;return this.readModule(n-3,0,n,i)&&(o|=1),o<<=1,this.readModule(n-2,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(0,i-4,n,i)&&(o|=1),o<<=1,this.readModule(0,i-3,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o}readCorner3(n,i){let o=0;return this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,i-1,n,i)&&(o|=1),o<<=1,this.readModule(0,i-3,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-3,n,i)&&(o|=1),o<<=1,this.readModule(1,i-2,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o}readCorner4(n,i){let o=0;return this.readModule(n-3,0,n,i)&&(o|=1),o<<=1,this.readModule(n-2,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o<<=1,this.readModule(2,i-1,n,i)&&(o|=1),o<<=1,this.readModule(3,i-1,n,i)&&(o|=1),o}extractDataRegion(n){const i=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(n.getHeight()!==i)throw new v("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),d=i/u|0,f=o/c|0,m=d*u,x=f*c,E=new Ne(x,m);for(let A=0;A<d;++A){const S=A*u;for(let D=0;D<f;++D){const j=D*c;for(let V=0;V<u;++V){const W=A*(u+2)+1+V,K=S+V;for(let ie=0;ie<c;++ie){const se=D*(c+2)+1+ie;if(n.get(se,W)){const ee=j+ie;E.set(ee,K)}}}}}return E}}class uu{constructor(n,i){this.numDataCodewords=n,this.codewords=i}static getDataBlocks(n,i){const o=i.getECBlocks();let u=0;const c=o.getECBlocks();for(let V of c)u+=V.getCount();const d=new Array(u);let f=0;for(let V of c)for(let W=0;W<V.getCount();W++){const K=V.getDataCodewords(),ie=o.getECCodewords()+K;d[f++]=new uu(K,new Uint8Array(ie))}const x=d[0].codewords.length-o.getECCodewords(),E=x-1;let A=0;for(let V=0;V<E;V++)for(let W=0;W<f;W++)d[W].codewords[V]=n[A++];const S=i.getVersionNumber()===24,D=S?8:f;for(let V=0;V<D;V++)d[V].codewords[x-1]=n[A++];const j=d[0].codewords.length;for(let V=x;V<j;V++)for(let W=0;W<f;W++){const K=S?(W+8)%f:W,ie=S&&K>7?V-1:V;d[K].codewords[ie]=n[A++]}if(A!==n.length)throw new v;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class cu{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new v(""+n);let i=0,o=this.bitOffset,u=this.byteOffset;const c=this.bytes;if(o>0){const d=8-o,f=n<d?n:d,m=d-f,x=255>>8-f<<m;i=(c[u]&x)>>m,n-=f,o+=f,o===8&&(o=0,u++)}if(n>0){for(;n>=8;)i=i<<8|c[u]&255,u++,n-=8;if(n>0){const d=8-n,f=255>>d<<d;i=i<<n|(c[u]&f)>>d,o+=n}}return this.bitOffset=o,this.byteOffset=u,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Mt;(function(C){C[C.PAD_ENCODE=0]="PAD_ENCODE",C[C.ASCII_ENCODE=1]="ASCII_ENCODE",C[C.C40_ENCODE=2]="C40_ENCODE",C[C.TEXT_ENCODE=3]="TEXT_ENCODE",C[C.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",C[C.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",C[C.BASE256_ENCODE=6]="BASE256_ENCODE"})(Mt||(Mt={}));class Bn{static decode(n){const i=new cu(n),o=new ue,u=new ue,c=new Array;let d=Mt.ASCII_ENCODE;do if(d===Mt.ASCII_ENCODE)d=this.decodeAsciiSegment(i,o,u);else{switch(d){case Mt.C40_ENCODE:this.decodeC40Segment(i,o);break;case Mt.TEXT_ENCODE:this.decodeTextSegment(i,o);break;case Mt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,o);break;case Mt.EDIFACT_ENCODE:this.decodeEdifactSegment(i,o);break;case Mt.BASE256_ENCODE:this.decodeBase256Segment(i,o,c);break;default:throw new U}d=Mt.ASCII_ENCODE}while(d!==Mt.PAD_ENCODE&&i.available()>0);return u.length()>0&&o.append(u.toString()),new Fe(n,o.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(n,i,o){let u=!1;do{let c=n.readBits(8);if(c===0)throw new U;if(c<=128)return u&&(c+=128),i.append(String.fromCharCode(c-1)),Mt.ASCII_ENCODE;if(c===129)return Mt.PAD_ENCODE;if(c<=229){const d=c-130;d<10&&i.append("0"),i.append(""+d)}else switch(c){case 230:return Mt.C40_ENCODE;case 231:return Mt.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:i.append("[)>05"),o.insert(0,"");break;case 237:i.append("[)>06"),o.insert(0,"");break;case 238:return Mt.ANSIX12_ENCODE;case 239:return Mt.TEXT_ENCODE;case 240:return Mt.EDIFACT_ENCODE;case 241:break;default:if(c!==254||n.available()!==0)throw new U;break}}while(n.available()>0);return Mt.ASCII_ENCODE}static decodeC40Segment(n,i){let o=!1;const u=[];let c=0;do{if(n.available()===8)return;const d=n.readBits(8);if(d===254)return;this.parseTwoBytes(d,n.readBits(8),u);for(let f=0;f<3;f++){const m=u[f];switch(c){case 0:if(m<3)c=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const x=this.C40_BASIC_SET_CHARS[m];o?(i.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):i.append(x)}else throw new U;break;case 1:o?(i.append(String.fromCharCode(m+128)),o=!1):i.append(String.fromCharCode(m)),c=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const x=this.C40_SHIFT2_SET_CHARS[m];o?(i.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):i.append(x)}else switch(m){case 27:i.append("");break;case 30:o=!0;break;default:throw new U}c=0;break;case 3:o?(i.append(String.fromCharCode(m+224)),o=!1):i.append(String.fromCharCode(m+96)),c=0;break;default:throw new U}}}while(n.available()>0)}static decodeTextSegment(n,i){let o=!1,u=[],c=0;do{if(n.available()===8)return;const d=n.readBits(8);if(d===254)return;this.parseTwoBytes(d,n.readBits(8),u);for(let f=0;f<3;f++){const m=u[f];switch(c){case 0:if(m<3)c=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const x=this.TEXT_BASIC_SET_CHARS[m];o?(i.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):i.append(x)}else throw new U;break;case 1:o?(i.append(String.fromCharCode(m+128)),o=!1):i.append(String.fromCharCode(m)),c=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const x=this.TEXT_SHIFT2_SET_CHARS[m];o?(i.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):i.append(x)}else switch(m){case 27:i.append("");break;case 30:o=!0;break;default:throw new U}c=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const x=this.TEXT_SHIFT3_SET_CHARS[m];o?(i.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):i.append(x),c=0}else throw new U;break;default:throw new U}}}while(n.available()>0)}static decodeAnsiX12Segment(n,i){const o=[];do{if(n.available()===8)return;const u=n.readBits(8);if(u===254)return;this.parseTwoBytes(u,n.readBits(8),o);for(let c=0;c<3;c++){const d=o[c];switch(d){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(d<14)i.append(String.fromCharCode(d+44));else if(d<40)i.append(String.fromCharCode(d+51));else throw new U;break}}}while(n.available()>0)}static parseTwoBytes(n,i,o){let u=(n<<8)+i-1,c=Math.floor(u/1600);o[0]=c,u-=c*1600,c=Math.floor(u/40),o[1]=c,o[2]=u-c*40}static decodeEdifactSegment(n,i){do{if(n.available()<=16)return;for(let o=0;o<4;o++){let u=n.readBits(6);if(u===31){const c=8-n.getBitOffset();c!==8&&n.readBits(c);return}u&32||(u|=64),i.append(String.fromCharCode(u))}}while(n.available()>0)}static decodeBase256Segment(n,i,o){let u=1+n.getByteOffset();const c=this.unrandomize255State(n.readBits(8),u++);let d;if(c===0?d=n.available()/8|0:c<250?d=c:d=250*(c-249)+this.unrandomize255State(n.readBits(8),u++),d<0)throw new U;const f=new Uint8Array(d);for(let m=0;m<d;m++){if(n.available()<8)throw new U;f[m]=this.unrandomize255State(n.readBits(8),u++)}o.push(f);try{i.append(J.decode(f,Z.ISO88591))}catch(m){throw new Me("Platform does not support required encoding: "+m.message)}}static unrandomize255State(n,i){const o=149*i%255+1,u=n-o;return u>=0?u:u+256}}Bn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Bn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Bn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Bn.TEXT_SHIFT2_SET_CHARS=Bn.C40_SHIFT2_SET_CHARS,Bn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Wm{constructor(){this.rsDecoder=new ke(Ie.DATA_MATRIX_FIELD_256)}decode(n){const i=new lu(n),o=i.getVersion(),u=i.readCodewords(),c=uu.getDataBlocks(u,o);let d=0;for(let x of c)d+=x.getNumDataCodewords();const f=new Uint8Array(d),m=c.length;for(let x=0;x<m;x++){const E=c[x],A=E.getCodewords(),S=E.getNumDataCodewords();this.correctErrors(A,S);for(let D=0;D<S;D++)f[D*m+x]=A[D]}return Bn.decode(f)}correctErrors(n,i){const o=new Int32Array(n);try{this.rsDecoder.decode(o,n.length-i)}catch{throw new T}for(let u=0;u<i;u++)n[u]=o[u]}}class Tt{constructor(n){this.image=n,this.rectangleDetector=new st(this.image)}detect(){const n=this.rectangleDetector.detect();let i=this.detectSolid1(n);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new q;i=this.shiftToModuleCenter(i);const o=i[0],u=i[1],c=i[2],d=i[3];let f=this.transitionsBetween(o,d)+1,m=this.transitionsBetween(c,d)+1;(f&1)===1&&(f+=1),(m&1)===1&&(m+=1),4*f<7*m&&4*m<7*f&&(f=m=Math.max(f,m));let x=Tt.sampleGrid(this.image,o,u,c,d,f,m);return new lr(x,[o,u,c,d])}static shiftPoint(n,i,o){let u=(i.getX()-n.getX())/(o+1),c=(i.getY()-n.getY())/(o+1);return new de(n.getX()+u,n.getY()+c)}static moveAway(n,i,o){let u=n.getX(),c=n.getY();return u<i?u-=1:u+=1,c<o?c-=1:c+=1,new de(u,c)}detectSolid1(n){let i=n[0],o=n[1],u=n[3],c=n[2],d=this.transitionsBetween(i,o),f=this.transitionsBetween(o,u),m=this.transitionsBetween(u,c),x=this.transitionsBetween(c,i),E=d,A=[c,i,o,u];return E>f&&(E=f,A[0]=i,A[1]=o,A[2]=u,A[3]=c),E>m&&(E=m,A[0]=o,A[1]=u,A[2]=c,A[3]=i),E>x&&(A[0]=u,A[1]=c,A[2]=i,A[3]=o),A}detectSolid2(n){let i=n[0],o=n[1],u=n[2],c=n[3],d=this.transitionsBetween(i,c),f=Tt.shiftPoint(o,u,(d+1)*4),m=Tt.shiftPoint(u,o,(d+1)*4),x=this.transitionsBetween(f,i),E=this.transitionsBetween(m,c);return x<E?(n[0]=i,n[1]=o,n[2]=u,n[3]=c):(n[0]=o,n[1]=u,n[2]=c,n[3]=i),n}correctTopRight(n){let i=n[0],o=n[1],u=n[2],c=n[3],d=this.transitionsBetween(i,c),f=this.transitionsBetween(o,c),m=Tt.shiftPoint(i,o,(f+1)*4),x=Tt.shiftPoint(u,o,(d+1)*4);d=this.transitionsBetween(m,c),f=this.transitionsBetween(x,c);let E=new de(c.getX()+(u.getX()-o.getX())/(d+1),c.getY()+(u.getY()-o.getY())/(d+1)),A=new de(c.getX()+(i.getX()-o.getX())/(f+1),c.getY()+(i.getY()-o.getY())/(f+1));if(!this.isValid(E))return this.isValid(A)?A:null;if(!this.isValid(A))return E;let S=this.transitionsBetween(m,E)+this.transitionsBetween(x,E),D=this.transitionsBetween(m,A)+this.transitionsBetween(x,A);return S>D?E:A}shiftToModuleCenter(n){let i=n[0],o=n[1],u=n[2],c=n[3],d=this.transitionsBetween(i,c)+1,f=this.transitionsBetween(u,c)+1,m=Tt.shiftPoint(i,o,f*4),x=Tt.shiftPoint(u,o,d*4);d=this.transitionsBetween(m,c)+1,f=this.transitionsBetween(x,c)+1,(d&1)===1&&(d+=1),(f&1)===1&&(f+=1);let E=(i.getX()+o.getX()+u.getX()+c.getX())/4,A=(i.getY()+o.getY()+u.getY()+c.getY())/4;i=Tt.moveAway(i,E,A),o=Tt.moveAway(o,E,A),u=Tt.moveAway(u,E,A),c=Tt.moveAway(c,E,A);let S,D;return m=Tt.shiftPoint(i,o,f*4),m=Tt.shiftPoint(m,c,d*4),S=Tt.shiftPoint(o,i,f*4),S=Tt.shiftPoint(S,u,d*4),x=Tt.shiftPoint(u,c,f*4),x=Tt.shiftPoint(x,o,d*4),D=Tt.shiftPoint(c,u,f*4),D=Tt.shiftPoint(D,i,d*4),[m,S,x,D]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,i,o,u,c,d,f){return Vt.getInstance().sampleGrid(n,d,f,.5,.5,d-.5,.5,d-.5,f-.5,.5,f-.5,i.getX(),i.getY(),c.getX(),c.getY(),u.getX(),u.getY(),o.getX(),o.getY())}transitionsBetween(n,i){let o=Math.trunc(n.getX()),u=Math.trunc(n.getY()),c=Math.trunc(i.getX()),d=Math.trunc(i.getY()),f=Math.abs(d-u)>Math.abs(c-o);if(f){let V=o;o=u,u=V,V=c,c=d,d=V}let m=Math.abs(c-o),x=Math.abs(d-u),E=-m/2,A=u<d?1:-1,S=o<c?1:-1,D=0,j=this.image.get(f?u:o,f?o:u);for(let V=o,W=u;V!==c;V+=S){let K=this.image.get(f?W:V,f?V:W);if(K!==j&&(D++,j=K),E+=x,E>0){if(W===d)break;W+=A,E-=m}}return D}}class Fn{constructor(){this.decoder=new Wm}decode(n,i=null){let o,u;if(i!=null&&i.has(G.PURE_BARCODE)){const x=Fn.extractPureBits(n.getBlackMatrix());o=this.decoder.decode(x),u=Fn.NO_POINTS}else{const x=new Tt(n.getBlackMatrix()).detect();o=this.decoder.decode(x.getBits()),u=x.getPoints()}const c=o.getRawBytes(),d=new Oe(o.getText(),c,8*c.length,u,le.DATA_MATRIX,B.currentTimeMillis()),f=o.getByteSegments();f!=null&&d.putMetadata(Ce.BYTE_SEGMENTS,f);const m=o.getECLevel();return m!=null&&d.putMetadata(Ce.ERROR_CORRECTION_LEVEL,m),d}reset(){}static extractPureBits(n){const i=n.getTopLeftOnBit(),o=n.getBottomRightOnBit();if(i==null||o==null)throw new q;const u=this.moduleSize(i,n);let c=i[1];const d=o[1];let f=i[0];const x=(o[0]-f+1)/u,E=(d-c+1)/u;if(x<=0||E<=0)throw new q;const A=u/2;c+=A,f+=A;const S=new Ne(x,E);for(let D=0;D<E;D++){const j=c+D*u;for(let V=0;V<x;V++)n.get(f+V*u,j)&&S.set(V,D)}return S}static moduleSize(n,i){const o=i.getWidth();let u=n[0];const c=n[1];for(;u<o&&i.get(u,c);)u++;if(u===o)throw new q;const d=u-n[0];if(d===0)throw new q;return d}}Fn.NO_POINTS=[];class Hm extends he{constructor(n=500){super(new Fn,n)}}var qi;(function(C){C[C.L=0]="L",C[C.M=1]="M",C[C.Q=2]="Q",C[C.H=3]="H"})(qi||(qi={}));class at{constructor(n,i,o){this.value=n,this.stringValue=i,this.bits=o,at.FOR_BITS.set(o,this),at.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return at.L;case"M":return at.M;case"Q":return at.Q;case"H":return at.H;default:throw new y(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof at))return!1;const i=n;return this.value===i.value}static forBits(n){if(n<0||n>=at.FOR_BITS.size)throw new v;return at.FOR_BITS.get(n)}}at.FOR_BITS=new Map,at.FOR_VALUE=new Map,at.L=new at(qi.L,"L",1),at.M=new at(qi.M,"M",0),at.Q=new at(qi.Q,"Q",3),at.H=new at(qi.H,"H",2);class nr{constructor(n){this.errorCorrectionLevel=at.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,i){return b.bitCount(n^i)}static decodeFormatInformation(n,i){const o=nr.doDecodeFormatInformation(n,i);return o!==null?o:nr.doDecodeFormatInformation(n^nr.FORMAT_INFO_MASK_QR,i^nr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,i){let o=Number.MAX_SAFE_INTEGER,u=0;for(const c of nr.FORMAT_INFO_DECODE_LOOKUP){const d=c[0];if(d===n||d===i)return new nr(c[1]);let f=nr.numBitsDiffering(n,d);f<o&&(u=c[1],o=f),n!==i&&(f=nr.numBitsDiffering(i,d),f<o&&(u=c[1],o=f))}return o<=3?new nr(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof nr))return!1;const i=n;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}nr.FORMAT_INFO_MASK_QR=21522,nr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class H{constructor(n,...i){this.ecCodewordsPerBlock=n,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const i=this.ecBlocks;for(const o of i)n+=o.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class O{constructor(n,i){this.count=n,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ee{constructor(n,i,...o){this.versionNumber=n,this.alignmentPatternCenters=i,this.ecBlocks=o;let u=0;const c=o[0].getECCodewordsPerBlock(),d=o[0].getECBlocks();for(const f of d)u+=f.getCount()*(f.getDataCodewords()+c);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new U;try{return this.getVersionForNumber((n-17)/4)}catch{throw new U}}static getVersionForNumber(n){if(n<1||n>40)throw new v;return Ee.VERSIONS[n-1]}static decodeVersionInformation(n){let i=Number.MAX_SAFE_INTEGER,o=0;for(let u=0;u<Ee.VERSION_DECODE_INFO.length;u++){const c=Ee.VERSION_DECODE_INFO[u];if(c===n)return Ee.getVersionForNumber(u+7);const d=nr.numBitsDiffering(n,c);d<i&&(o=u+7,i=d)}return i<=3?Ee.getVersionForNumber(o):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),i=new Ne(n);i.setRegion(0,0,9,9),i.setRegion(n-8,0,8,9),i.setRegion(0,n-8,9,8);const o=this.alignmentPatternCenters.length;for(let u=0;u<o;u++){const c=this.alignmentPatternCenters[u]-2;for(let d=0;d<o;d++)u===0&&(d===0||d===o-1)||u===o-1&&d===0||i.setRegion(this.alignmentPatternCenters[d]-2,c,5,5)}return i.setRegion(6,9,1,n-17),i.setRegion(9,6,n-17,1),this.versionNumber>6&&(i.setRegion(n-11,0,3,6),i.setRegion(0,n-11,6,3)),i}toString(){return""+this.versionNumber}}Ee.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ee.VERSIONS=[new Ee(1,new Int32Array(0),new H(7,new O(1,19)),new H(10,new O(1,16)),new H(13,new O(1,13)),new H(17,new O(1,9))),new Ee(2,Int32Array.from([6,18]),new H(10,new O(1,34)),new H(16,new O(1,28)),new H(22,new O(1,22)),new H(28,new O(1,16))),new Ee(3,Int32Array.from([6,22]),new H(15,new O(1,55)),new H(26,new O(1,44)),new H(18,new O(2,17)),new H(22,new O(2,13))),new Ee(4,Int32Array.from([6,26]),new H(20,new O(1,80)),new H(18,new O(2,32)),new H(26,new O(2,24)),new H(16,new O(4,9))),new Ee(5,Int32Array.from([6,30]),new H(26,new O(1,108)),new H(24,new O(2,43)),new H(18,new O(2,15),new O(2,16)),new H(22,new O(2,11),new O(2,12))),new Ee(6,Int32Array.from([6,34]),new H(18,new O(2,68)),new H(16,new O(4,27)),new H(24,new O(4,19)),new H(28,new O(4,15))),new Ee(7,Int32Array.from([6,22,38]),new H(20,new O(2,78)),new H(18,new O(4,31)),new H(18,new O(2,14),new O(4,15)),new H(26,new O(4,13),new O(1,14))),new Ee(8,Int32Array.from([6,24,42]),new H(24,new O(2,97)),new H(22,new O(2,38),new O(2,39)),new H(22,new O(4,18),new O(2,19)),new H(26,new O(4,14),new O(2,15))),new Ee(9,Int32Array.from([6,26,46]),new H(30,new O(2,116)),new H(22,new O(3,36),new O(2,37)),new H(20,new O(4,16),new O(4,17)),new H(24,new O(4,12),new O(4,13))),new Ee(10,Int32Array.from([6,28,50]),new H(18,new O(2,68),new O(2,69)),new H(26,new O(4,43),new O(1,44)),new H(24,new O(6,19),new O(2,20)),new H(28,new O(6,15),new O(2,16))),new Ee(11,Int32Array.from([6,30,54]),new H(20,new O(4,81)),new H(30,new O(1,50),new O(4,51)),new H(28,new O(4,22),new O(4,23)),new H(24,new O(3,12),new O(8,13))),new Ee(12,Int32Array.from([6,32,58]),new H(24,new O(2,92),new O(2,93)),new H(22,new O(6,36),new O(2,37)),new H(26,new O(4,20),new O(6,21)),new H(28,new O(7,14),new O(4,15))),new Ee(13,Int32Array.from([6,34,62]),new H(26,new O(4,107)),new H(22,new O(8,37),new O(1,38)),new H(24,new O(8,20),new O(4,21)),new H(22,new O(12,11),new O(4,12))),new Ee(14,Int32Array.from([6,26,46,66]),new H(30,new O(3,115),new O(1,116)),new H(24,new O(4,40),new O(5,41)),new H(20,new O(11,16),new O(5,17)),new H(24,new O(11,12),new O(5,13))),new Ee(15,Int32Array.from([6,26,48,70]),new H(22,new O(5,87),new O(1,88)),new H(24,new O(5,41),new O(5,42)),new H(30,new O(5,24),new O(7,25)),new H(24,new O(11,12),new O(7,13))),new Ee(16,Int32Array.from([6,26,50,74]),new H(24,new O(5,98),new O(1,99)),new H(28,new O(7,45),new O(3,46)),new H(24,new O(15,19),new O(2,20)),new H(30,new O(3,15),new O(13,16))),new Ee(17,Int32Array.from([6,30,54,78]),new H(28,new O(1,107),new O(5,108)),new H(28,new O(10,46),new O(1,47)),new H(28,new O(1,22),new O(15,23)),new H(28,new O(2,14),new O(17,15))),new Ee(18,Int32Array.from([6,30,56,82]),new H(30,new O(5,120),new O(1,121)),new H(26,new O(9,43),new O(4,44)),new H(28,new O(17,22),new O(1,23)),new H(28,new O(2,14),new O(19,15))),new Ee(19,Int32Array.from([6,30,58,86]),new H(28,new O(3,113),new O(4,114)),new H(26,new O(3,44),new O(11,45)),new H(26,new O(17,21),new O(4,22)),new H(26,new O(9,13),new O(16,14))),new Ee(20,Int32Array.from([6,34,62,90]),new H(28,new O(3,107),new O(5,108)),new H(26,new O(3,41),new O(13,42)),new H(30,new O(15,24),new O(5,25)),new H(28,new O(15,15),new O(10,16))),new Ee(21,Int32Array.from([6,28,50,72,94]),new H(28,new O(4,116),new O(4,117)),new H(26,new O(17,42)),new H(28,new O(17,22),new O(6,23)),new H(30,new O(19,16),new O(6,17))),new Ee(22,Int32Array.from([6,26,50,74,98]),new H(28,new O(2,111),new O(7,112)),new H(28,new O(17,46)),new H(30,new O(7,24),new O(16,25)),new H(24,new O(34,13))),new Ee(23,Int32Array.from([6,30,54,78,102]),new H(30,new O(4,121),new O(5,122)),new H(28,new O(4,47),new O(14,48)),new H(30,new O(11,24),new O(14,25)),new H(30,new O(16,15),new O(14,16))),new Ee(24,Int32Array.from([6,28,54,80,106]),new H(30,new O(6,117),new O(4,118)),new H(28,new O(6,45),new O(14,46)),new H(30,new O(11,24),new O(16,25)),new H(30,new O(30,16),new O(2,17))),new Ee(25,Int32Array.from([6,32,58,84,110]),new H(26,new O(8,106),new O(4,107)),new H(28,new O(8,47),new O(13,48)),new H(30,new O(7,24),new O(22,25)),new H(30,new O(22,15),new O(13,16))),new Ee(26,Int32Array.from([6,30,58,86,114]),new H(28,new O(10,114),new O(2,115)),new H(28,new O(19,46),new O(4,47)),new H(28,new O(28,22),new O(6,23)),new H(30,new O(33,16),new O(4,17))),new Ee(27,Int32Array.from([6,34,62,90,118]),new H(30,new O(8,122),new O(4,123)),new H(28,new O(22,45),new O(3,46)),new H(30,new O(8,23),new O(26,24)),new H(30,new O(12,15),new O(28,16))),new Ee(28,Int32Array.from([6,26,50,74,98,122]),new H(30,new O(3,117),new O(10,118)),new H(28,new O(3,45),new O(23,46)),new H(30,new O(4,24),new O(31,25)),new H(30,new O(11,15),new O(31,16))),new Ee(29,Int32Array.from([6,30,54,78,102,126]),new H(30,new O(7,116),new O(7,117)),new H(28,new O(21,45),new O(7,46)),new H(30,new O(1,23),new O(37,24)),new H(30,new O(19,15),new O(26,16))),new Ee(30,Int32Array.from([6,26,52,78,104,130]),new H(30,new O(5,115),new O(10,116)),new H(28,new O(19,47),new O(10,48)),new H(30,new O(15,24),new O(25,25)),new H(30,new O(23,15),new O(25,16))),new Ee(31,Int32Array.from([6,30,56,82,108,134]),new H(30,new O(13,115),new O(3,116)),new H(28,new O(2,46),new O(29,47)),new H(30,new O(42,24),new O(1,25)),new H(30,new O(23,15),new O(28,16))),new Ee(32,Int32Array.from([6,34,60,86,112,138]),new H(30,new O(17,115)),new H(28,new O(10,46),new O(23,47)),new H(30,new O(10,24),new O(35,25)),new H(30,new O(19,15),new O(35,16))),new Ee(33,Int32Array.from([6,30,58,86,114,142]),new H(30,new O(17,115),new O(1,116)),new H(28,new O(14,46),new O(21,47)),new H(30,new O(29,24),new O(19,25)),new H(30,new O(11,15),new O(46,16))),new Ee(34,Int32Array.from([6,34,62,90,118,146]),new H(30,new O(13,115),new O(6,116)),new H(28,new O(14,46),new O(23,47)),new H(30,new O(44,24),new O(7,25)),new H(30,new O(59,16),new O(1,17))),new Ee(35,Int32Array.from([6,30,54,78,102,126,150]),new H(30,new O(12,121),new O(7,122)),new H(28,new O(12,47),new O(26,48)),new H(30,new O(39,24),new O(14,25)),new H(30,new O(22,15),new O(41,16))),new Ee(36,Int32Array.from([6,24,50,76,102,128,154]),new H(30,new O(6,121),new O(14,122)),new H(28,new O(6,47),new O(34,48)),new H(30,new O(46,24),new O(10,25)),new H(30,new O(2,15),new O(64,16))),new Ee(37,Int32Array.from([6,28,54,80,106,132,158]),new H(30,new O(17,122),new O(4,123)),new H(28,new O(29,46),new O(14,47)),new H(30,new O(49,24),new O(10,25)),new H(30,new O(24,15),new O(46,16))),new Ee(38,Int32Array.from([6,32,58,84,110,136,162]),new H(30,new O(4,122),new O(18,123)),new H(28,new O(13,46),new O(32,47)),new H(30,new O(48,24),new O(14,25)),new H(30,new O(42,15),new O(32,16))),new Ee(39,Int32Array.from([6,26,54,82,110,138,166]),new H(30,new O(20,117),new O(4,118)),new H(28,new O(40,47),new O(7,48)),new H(30,new O(43,24),new O(22,25)),new H(30,new O(10,15),new O(67,16))),new Ee(40,Int32Array.from([6,30,58,86,114,142,170]),new H(30,new O(19,118),new O(6,119)),new H(28,new O(18,47),new O(31,48)),new H(30,new O(34,24),new O(34,25)),new H(30,new O(20,15),new O(61,16)))];var zt;(function(C){C[C.DATA_MASK_000=0]="DATA_MASK_000",C[C.DATA_MASK_001=1]="DATA_MASK_001",C[C.DATA_MASK_010=2]="DATA_MASK_010",C[C.DATA_MASK_011=3]="DATA_MASK_011",C[C.DATA_MASK_100=4]="DATA_MASK_100",C[C.DATA_MASK_101=5]="DATA_MASK_101",C[C.DATA_MASK_110=6]="DATA_MASK_110",C[C.DATA_MASK_111=7]="DATA_MASK_111"})(zt||(zt={}));class Fr{constructor(n,i){this.value=n,this.isMasked=i}unmaskBitMatrix(n,i){for(let o=0;o<i;o++)for(let u=0;u<i;u++)this.isMasked(o,u)&&n.flip(u,o)}}Fr.values=new Map([[zt.DATA_MASK_000,new Fr(zt.DATA_MASK_000,(C,n)=>(C+n&1)===0)],[zt.DATA_MASK_001,new Fr(zt.DATA_MASK_001,(C,n)=>(C&1)===0)],[zt.DATA_MASK_010,new Fr(zt.DATA_MASK_010,(C,n)=>n%3===0)],[zt.DATA_MASK_011,new Fr(zt.DATA_MASK_011,(C,n)=>(C+n)%3===0)],[zt.DATA_MASK_100,new Fr(zt.DATA_MASK_100,(C,n)=>(Math.floor(C/2)+Math.floor(n/3)&1)===0)],[zt.DATA_MASK_101,new Fr(zt.DATA_MASK_101,(C,n)=>C*n%6===0)],[zt.DATA_MASK_110,new Fr(zt.DATA_MASK_110,(C,n)=>C*n%6<3)],[zt.DATA_MASK_111,new Fr(zt.DATA_MASK_111,(C,n)=>(C+n+C*n%3&1)===0)]]);class Gm{constructor(n){const i=n.getHeight();if(i<21||(i&3)!==1)throw new U;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let c=0;c<6;c++)n=this.copyBit(c,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let c=5;c>=0;c--)n=this.copyBit(8,c,n);const i=this.bitMatrix.getHeight();let o=0;const u=i-7;for(let c=i-1;c>=u;c--)o=this.copyBit(8,c,o);for(let c=i-8;c<i;c++)o=this.copyBit(c,8,o);if(this.parsedFormatInfo=nr.decodeFormatInformation(n,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new U}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),i=Math.floor((n-17)/4);if(i<=6)return Ee.getVersionForNumber(i);let o=0;const u=n-11;for(let d=5;d>=0;d--)for(let f=n-9;f>=u;f--)o=this.copyBit(f,d,o);let c=Ee.decodeVersionInformation(o);if(c!==null&&c.getDimensionForVersion()===n)return this.parsedVersion=c,c;o=0;for(let d=5;d>=0;d--)for(let f=n-9;f>=u;f--)o=this.copyBit(d,f,o);if(c=Ee.decodeVersionInformation(o),c!==null&&c.getDimensionForVersion()===n)return this.parsedVersion=c,c;throw new U}copyBit(n,i,o){return(this.isMirror?this.bitMatrix.get(i,n):this.bitMatrix.get(n,i))?o<<1|1:o<<1}readCodewords(){const n=this.readFormatInformation(),i=this.readVersion(),o=Fr.values.get(n.getDataMask()),u=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,u);const c=i.buildFunctionPattern();let d=!0;const f=new Uint8Array(i.getTotalCodewords());let m=0,x=0,E=0;for(let A=u-1;A>0;A-=2){A===6&&A--;for(let S=0;S<u;S++){const D=d?u-1-S:S;for(let j=0;j<2;j++)c.get(A-j,D)||(E++,x<<=1,this.bitMatrix.get(A-j,D)&&(x|=1),E===8&&(f[m++]=x,E=0,x=0))}d=!d}if(m!==i.getTotalCodewords())throw new U;return f}remask(){if(this.parsedFormatInfo===null)return;const n=Fr.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let i=0,o=n.getWidth();i<o;i++)for(let u=i+1,c=n.getHeight();u<c;u++)n.get(i,u)!==n.get(u,i)&&(n.flip(u,i),n.flip(i,u))}}class du{constructor(n,i){this.numDataCodewords=n,this.codewords=i}static getDataBlocks(n,i,o){if(n.length!==i.getTotalCodewords())throw new v;const u=i.getECBlocksForLevel(o);let c=0;const d=u.getECBlocks();for(const j of d)c+=j.getCount();const f=new Array(c);let m=0;for(const j of d)for(let V=0;V<j.getCount();V++){const W=j.getDataCodewords(),K=u.getECCodewordsPerBlock()+W;f[m++]=new du(W,new Uint8Array(K))}const x=f[0].codewords.length;let E=f.length-1;for(;E>=0&&f[E].codewords.length!==x;)E--;E++;const A=x-u.getECCodewordsPerBlock();let S=0;for(let j=0;j<A;j++)for(let V=0;V<m;V++)f[V].codewords[j]=n[S++];for(let j=E;j<m;j++)f[j].codewords[A]=n[S++];const D=f[0].codewords.length;for(let j=A;j<D;j++)for(let V=0;V<m;V++){const W=V<E?j:j+1;f[V].codewords[W]=n[S++]}return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var jr;(function(C){C[C.TERMINATOR=0]="TERMINATOR",C[C.NUMERIC=1]="NUMERIC",C[C.ALPHANUMERIC=2]="ALPHANUMERIC",C[C.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",C[C.BYTE=4]="BYTE",C[C.ECI=5]="ECI",C[C.KANJI=6]="KANJI",C[C.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",C[C.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",C[C.HANZI=9]="HANZI"})(jr||(jr={}));class Ae{constructor(n,i,o,u){this.value=n,this.stringValue=i,this.characterCountBitsForVersions=o,this.bits=u,Ae.FOR_BITS.set(u,this),Ae.FOR_VALUE.set(n,this)}static forBits(n){const i=Ae.FOR_BITS.get(n);if(i===void 0)throw new v;return i}getCharacterCountBits(n){const i=n.getVersionNumber();let o;return i<=9?o=0:i<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof Ae))return!1;const i=n;return this.value===i.value}toString(){return this.stringValue}}Ae.FOR_BITS=new Map,Ae.FOR_VALUE=new Map,Ae.TERMINATOR=new Ae(jr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ae.NUMERIC=new Ae(jr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ae.ALPHANUMERIC=new Ae(jr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ae.STRUCTURED_APPEND=new Ae(jr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ae.BYTE=new Ae(jr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ae.ECI=new Ae(jr.ECI,"ECI",Int32Array.from([0,0,0]),7),Ae.KANJI=new Ae(jr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ae.FNC1_FIRST_POSITION=new Ae(jr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ae.FNC1_SECOND_POSITION=new Ae(jr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ae.HANZI=new Ae(jr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class wt{static decode(n,i,o,u){const c=new cu(n);let d=new ue;const f=new Array;let m=-1,x=-1;try{let E=null,A=!1,S;do{if(c.available()<4)S=Ae.TERMINATOR;else{const D=c.readBits(4);S=Ae.forBits(D)}switch(S){case Ae.TERMINATOR:break;case Ae.FNC1_FIRST_POSITION:case Ae.FNC1_SECOND_POSITION:A=!0;break;case Ae.STRUCTURED_APPEND:if(c.available()<16)throw new U;m=c.readBits(8),x=c.readBits(8);break;case Ae.ECI:const D=wt.parseECIValue(c);if(E=R.getCharacterSetECIByValue(D),E===null)throw new U;break;case Ae.HANZI:const j=c.readBits(4),V=c.readBits(S.getCharacterCountBits(i));j===wt.GB2312_SUBSET&&wt.decodeHanziSegment(c,d,V);break;default:const W=c.readBits(S.getCharacterCountBits(i));switch(S){case Ae.NUMERIC:wt.decodeNumericSegment(c,d,W);break;case Ae.ALPHANUMERIC:wt.decodeAlphanumericSegment(c,d,W,A);break;case Ae.BYTE:wt.decodeByteSegment(c,d,W,E,f,u);break;case Ae.KANJI:wt.decodeKanjiSegment(c,d,W);break;default:throw new U}break}}while(S!==Ae.TERMINATOR)}catch{throw new U}return new Fe(n,d.toString(),f.length===0?null:f,o===null?null:o.toString(),m,x)}static decodeHanziSegment(n,i,o){if(o*13>n.available())throw new U;const u=new Uint8Array(2*o);let c=0;for(;o>0;){const d=n.readBits(13);let f=d/96<<8&4294967295|d%96;f<959?f+=41377:f+=42657,u[c]=f>>8&255,u[c+1]=f&255,c+=2,o--}try{i.append(J.decode(u,Z.GB2312))}catch(d){throw new U(d)}}static decodeKanjiSegment(n,i,o){if(o*13>n.available())throw new U;const u=new Uint8Array(2*o);let c=0;for(;o>0;){const d=n.readBits(13);let f=d/192<<8&4294967295|d%192;f<7936?f+=33088:f+=49472,u[c]=f>>8,u[c+1]=f,c+=2,o--}try{i.append(J.decode(u,Z.SHIFT_JIS))}catch(d){throw new U(d)}}static decodeByteSegment(n,i,o,u,c,d){if(8*o>n.available())throw new U;const f=new Uint8Array(o);for(let x=0;x<o;x++)f[x]=n.readBits(8);let m;u===null?m=Z.guessEncoding(f,d):m=u.getName();try{i.append(J.decode(f,m))}catch(x){throw new U(x)}c.push(f)}static toAlphaNumericChar(n){if(n>=wt.ALPHANUMERIC_CHARS.length)throw new U;return wt.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,i,o,u){const c=i.length();for(;o>1;){if(n.available()<11)throw new U;const d=n.readBits(11);i.append(wt.toAlphaNumericChar(Math.floor(d/45))),i.append(wt.toAlphaNumericChar(d%45)),o-=2}if(o===1){if(n.available()<6)throw new U;i.append(wt.toAlphaNumericChar(n.readBits(6)))}if(u)for(let d=c;d<i.length();d++)i.charAt(d)==="%"&&(d<i.length()-1&&i.charAt(d+1)==="%"?i.deleteCharAt(d+1):i.setCharAt(d,""))}static decodeNumericSegment(n,i,o){for(;o>=3;){if(n.available()<10)throw new U;const u=n.readBits(10);if(u>=1e3)throw new U;i.append(wt.toAlphaNumericChar(Math.floor(u/100))),i.append(wt.toAlphaNumericChar(Math.floor(u/10)%10)),i.append(wt.toAlphaNumericChar(u%10)),o-=3}if(o===2){if(n.available()<7)throw new U;const u=n.readBits(7);if(u>=100)throw new U;i.append(wt.toAlphaNumericChar(Math.floor(u/10))),i.append(wt.toAlphaNumericChar(u%10))}else if(o===1){if(n.available()<4)throw new U;const u=n.readBits(4);if(u>=10)throw new U;i.append(wt.toAlphaNumericChar(u))}}static parseECIValue(n){const i=n.readBits(8);if(!(i&128))return i&127;if((i&192)===128){const o=n.readBits(8);return(i&63)<<8&4294967295|o}if((i&224)===192){const o=n.readBits(16);return(i&31)<<16&4294967295|o}throw new U}}wt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",wt.GB2312_SUBSET=1;class kh{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const i=n[0];n[0]=n[2],n[2]=i}}class Xm{constructor(){this.rsDecoder=new ke(Ie.QR_CODE_FIELD_256)}decodeBooleanArray(n,i){return this.decodeBitMatrix(Ne.parseFromBooleanArray(n),i)}decodeBitMatrix(n,i){const o=new Gm(n);let u=null;try{return this.decodeBitMatrixParser(o,i)}catch(c){u=c}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const c=this.decodeBitMatrixParser(o,i);return c.setOther(new kh(!0)),c}catch(c){throw u!==null?u:c}}decodeBitMatrixParser(n,i){const o=n.readVersion(),u=n.readFormatInformation().getErrorCorrectionLevel(),c=n.readCodewords(),d=du.getDataBlocks(c,o,u);let f=0;for(const E of d)f+=E.getNumDataCodewords();const m=new Uint8Array(f);let x=0;for(const E of d){const A=E.getCodewords(),S=E.getNumDataCodewords();this.correctErrors(A,S);for(let D=0;D<S;D++)m[x++]=A[D]}return wt.decode(m,o,u,i)}correctErrors(n,i){const o=new Int32Array(n);try{this.rsDecoder.decode(o,n.length-i)}catch{throw new T}for(let u=0;u<i;u++)n[u]=o[u]}}class hu extends de{constructor(n,i,o){super(n,i),this.estimatedModuleSize=o}aboutEquals(n,i,o){if(Math.abs(i-this.getY())<=n&&Math.abs(o-this.getX())<=n){const u=Math.abs(n-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(n,i,o){const u=(this.getX()+i)/2,c=(this.getY()+n)/2,d=(this.estimatedModuleSize+o)/2;return new hu(u,c,d)}}class la{constructor(n,i,o,u,c,d,f){this.image=n,this.startX=i,this.startY=o,this.width=u,this.height=c,this.moduleSize=d,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,i=this.height,o=this.width,u=n+o,c=this.startY+i/2,d=new Int32Array(3),f=this.image;for(let m=0;m<i;m++){const x=c+(m&1?-Math.floor((m+1)/2):Math.floor((m+1)/2));d[0]=0,d[1]=0,d[2]=0;let E=n;for(;E<u&&!f.get(E,x);)E++;let A=0;for(;E<u;){if(f.get(E,x))if(A===1)d[1]++;else if(A===2){if(this.foundPatternCross(d)){const S=this.handlePossibleCenter(d,x,E);if(S!==null)return S}d[0]=d[2],d[1]=1,d[2]=0,A=1}else d[++A]++;else A===1&&A++,d[A]++;E++}if(this.foundPatternCross(d)){const S=this.handlePossibleCenter(d,x,u);if(S!==null)return S}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new q}static centerFromEnd(n,i){return i-n[2]-n[1]/2}foundPatternCross(n){const i=this.moduleSize,o=i/2;for(let u=0;u<3;u++)if(Math.abs(i-n[u])>=o)return!1;return!0}crossCheckVertical(n,i,o,u){const c=this.image,d=c.getHeight(),f=this.crossCheckStateCount;f[0]=0,f[1]=0,f[2]=0;let m=n;for(;m>=0&&c.get(i,m)&&f[1]<=o;)f[1]++,m--;if(m<0||f[1]>o)return NaN;for(;m>=0&&!c.get(i,m)&&f[0]<=o;)f[0]++,m--;if(f[0]>o)return NaN;for(m=n+1;m<d&&c.get(i,m)&&f[1]<=o;)f[1]++,m++;if(m===d||f[1]>o)return NaN;for(;m<d&&!c.get(i,m)&&f[2]<=o;)f[2]++,m++;if(f[2]>o)return NaN;const x=f[0]+f[1]+f[2];return 5*Math.abs(x-u)>=2*u?NaN:this.foundPatternCross(f)?la.centerFromEnd(f,m):NaN}handlePossibleCenter(n,i,o){const u=n[0]+n[1]+n[2],c=la.centerFromEnd(n,o),d=this.crossCheckVertical(i,c,2*n[1],u);if(!isNaN(d)){const f=(n[0]+n[1]+n[2])/3;for(const x of this.possibleCenters)if(x.aboutEquals(f,d,c))return x.combineEstimate(d,c,f);const m=new hu(c,d,f);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class fu extends de{constructor(n,i,o,u){super(n,i),this.estimatedModuleSize=o,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,i,o){if(Math.abs(i-this.getY())<=n&&Math.abs(o-this.getX())<=n){const u=Math.abs(n-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(n,i,o){const u=this.count+1,c=(this.count*this.getX()+i)/u,d=(this.count*this.getY()+n)/u,f=(this.count*this.estimatedModuleSize+o)/u;return new fu(c,d,f,u)}}class $m{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Wt{constructor(n,i){this.image=n,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const i=n!=null&&n.get(G.TRY_HARDER)!==void 0,o=n!=null&&n.get(G.PURE_BARCODE)!==void 0,u=this.image,c=u.getHeight(),d=u.getWidth();let f=Math.floor(3*c/(4*Wt.MAX_MODULES));(f<Wt.MIN_SKIP||i)&&(f=Wt.MIN_SKIP);let m=!1;const x=new Int32Array(5);for(let A=f-1;A<c&&!m;A+=f){x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0;let S=0;for(let D=0;D<d;D++)if(u.get(D,A))(S&1)===1&&S++,x[S]++;else if(S&1)x[S]++;else if(S===4)if(Wt.foundPatternCross(x)){if(this.handlePossibleCenter(x,A,D,o)===!0)if(f=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const V=this.findRowSkip();V>x[2]&&(A+=V-x[2]-f,D=d-1)}else{x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,S=3;continue}S=0,x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0}else x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,S=3;else x[++S]++;Wt.foundPatternCross(x)&&this.handlePossibleCenter(x,A,d,o)===!0&&(f=x[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const E=this.selectBestPatterns();return de.orderBestPatterns(E),new $m(E)}static centerFromEnd(n,i){return i-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let i=0;for(let c=0;c<5;c++){const d=n[c];if(d===0)return!1;i+=d}if(i<7)return!1;const o=i/7,u=o/2;return Math.abs(o-n[0])<u&&Math.abs(o-n[1])<u&&Math.abs(3*o-n[2])<3*u&&Math.abs(o-n[3])<u&&Math.abs(o-n[4])<u}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,i,o,u){const c=this.getCrossCheckStateCount();let d=0;const f=this.image;for(;n>=d&&i>=d&&f.get(i-d,n-d);)c[2]++,d++;if(n<d||i<d)return!1;for(;n>=d&&i>=d&&!f.get(i-d,n-d)&&c[1]<=o;)c[1]++,d++;if(n<d||i<d||c[1]>o)return!1;for(;n>=d&&i>=d&&f.get(i-d,n-d)&&c[0]<=o;)c[0]++,d++;if(c[0]>o)return!1;const m=f.getHeight(),x=f.getWidth();for(d=1;n+d<m&&i+d<x&&f.get(i+d,n+d);)c[2]++,d++;if(n+d>=m||i+d>=x)return!1;for(;n+d<m&&i+d<x&&!f.get(i+d,n+d)&&c[3]<o;)c[3]++,d++;if(n+d>=m||i+d>=x||c[3]>=o)return!1;for(;n+d<m&&i+d<x&&f.get(i+d,n+d)&&c[4]<o;)c[4]++,d++;if(c[4]>=o)return!1;const E=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(E-u)<2*u&&Wt.foundPatternCross(c)}crossCheckVertical(n,i,o,u){const c=this.image,d=c.getHeight(),f=this.getCrossCheckStateCount();let m=n;for(;m>=0&&c.get(i,m);)f[2]++,m--;if(m<0)return NaN;for(;m>=0&&!c.get(i,m)&&f[1]<=o;)f[1]++,m--;if(m<0||f[1]>o)return NaN;for(;m>=0&&c.get(i,m)&&f[0]<=o;)f[0]++,m--;if(f[0]>o)return NaN;for(m=n+1;m<d&&c.get(i,m);)f[2]++,m++;if(m===d)return NaN;for(;m<d&&!c.get(i,m)&&f[3]<o;)f[3]++,m++;if(m===d||f[3]>=o)return NaN;for(;m<d&&c.get(i,m)&&f[4]<o;)f[4]++,m++;if(f[4]>=o)return NaN;const x=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(x-u)>=2*u?NaN:Wt.foundPatternCross(f)?Wt.centerFromEnd(f,m):NaN}crossCheckHorizontal(n,i,o,u){const c=this.image,d=c.getWidth(),f=this.getCrossCheckStateCount();let m=n;for(;m>=0&&c.get(m,i);)f[2]++,m--;if(m<0)return NaN;for(;m>=0&&!c.get(m,i)&&f[1]<=o;)f[1]++,m--;if(m<0||f[1]>o)return NaN;for(;m>=0&&c.get(m,i)&&f[0]<=o;)f[0]++,m--;if(f[0]>o)return NaN;for(m=n+1;m<d&&c.get(m,i);)f[2]++,m++;if(m===d)return NaN;for(;m<d&&!c.get(m,i)&&f[3]<o;)f[3]++,m++;if(m===d||f[3]>=o)return NaN;for(;m<d&&c.get(m,i)&&f[4]<o;)f[4]++,m++;if(f[4]>=o)return NaN;const x=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(x-u)>=u?NaN:Wt.foundPatternCross(f)?Wt.centerFromEnd(f,m):NaN}handlePossibleCenter(n,i,o,u){const c=n[0]+n[1]+n[2]+n[3]+n[4];let d=Wt.centerFromEnd(n,o),f=this.crossCheckVertical(i,Math.floor(d),n[2],c);if(!isNaN(f)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(f),n[2],c),!isNaN(d)&&(!u||this.crossCheckDiagonal(Math.floor(f),Math.floor(d),n[2],c)))){const m=c/7;let x=!1;const E=this.possibleCenters;for(let A=0,S=E.length;A<S;A++){const D=E[A];if(D.aboutEquals(m,f,d)){E[A]=D.combineEstimate(f,d,m),x=!0;break}}if(!x){const A=new fu(d,f,m);E.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const o of this.possibleCenters)if(o.getCount()>=Wt.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,i=0;const o=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Wt.CENTER_QUORUM&&(n++,i+=d.getEstimatedModuleSize());if(n<3)return!1;const u=i/o;let c=0;for(const d of this.possibleCenters)c+=Math.abs(d.getEstimatedModuleSize()-u);return c<=.05*i}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new q;const i=this.possibleCenters;let o;if(n>3){let u=0,c=0;for(const m of this.possibleCenters){const x=m.getEstimatedModuleSize();u+=x,c+=x*x}o=u/n;let d=Math.sqrt(c/n-o*o);i.sort((m,x)=>{const E=Math.abs(x.getEstimatedModuleSize()-o),A=Math.abs(m.getEstimatedModuleSize()-o);return E<A?-1:E>A?1:0});const f=Math.max(.2*o,d);for(let m=0;m<i.length&&i.length>3;m++){const x=i[m];Math.abs(x.getEstimatedModuleSize()-o)>f&&(i.splice(m,1),m--)}}if(i.length>3){let u=0;for(const c of i)u+=c.getEstimatedModuleSize();o=u/i.length,i.sort((c,d)=>{if(d.getCount()===c.getCount()){const f=Math.abs(d.getEstimatedModuleSize()-o),m=Math.abs(c.getEstimatedModuleSize()-o);return f<m?1:f>m?-1:0}else return d.getCount()-c.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}Wt.CENTER_QUORUM=2,Wt.MIN_SKIP=3,Wt.MAX_MODULES=57;class Ks{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(G.NEED_RESULT_POINT_CALLBACK);const o=new Wt(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(o)}processFinderPatternInfo(n){const i=n.getTopLeft(),o=n.getTopRight(),u=n.getBottomLeft(),c=this.calculateModuleSize(i,o,u);if(c<1)throw new q("No pattern found in proccess finder.");const d=Ks.computeDimension(i,o,u,c),f=Ee.getProvisionalVersionForDimension(d),m=f.getDimensionForVersion()-7;let x=null;if(f.getAlignmentPatternCenters().length>0){const D=o.getX()-i.getX()+u.getX(),j=o.getY()-i.getY()+u.getY(),V=1-3/m,W=Math.floor(i.getX()+V*(D-i.getX())),K=Math.floor(i.getY()+V*(j-i.getY()));for(let ie=4;ie<=16;ie<<=1)try{x=this.findAlignmentInRegion(c,W,K,ie);break}catch(se){if(!(se instanceof q))throw se}}const E=Ks.createTransform(i,o,u,x,d),A=Ks.sampleGrid(this.image,E,d);let S;return x===null?S=[u,i,o]:S=[u,i,o,x],new lr(A,S)}static createTransform(n,i,o,u,c){const d=c-3.5;let f,m,x,E;return u!==null?(f=u.getX(),m=u.getY(),x=d-3,E=x):(f=i.getX()-n.getX()+o.getX(),m=i.getY()-n.getY()+o.getY(),x=d,E=d),qe.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,x,E,3.5,d,n.getX(),n.getY(),i.getX(),i.getY(),f,m,o.getX(),o.getY())}static sampleGrid(n,i,o){return Vt.getInstance().sampleGridWithTransform(n,o,o,i)}static computeDimension(n,i,o,u){const c=ye.round(de.distance(n,i)/u),d=ye.round(de.distance(n,o)/u);let f=Math.floor((c+d)/2)+7;switch(f&3){case 0:f++;break;case 2:f--;break;case 3:throw new q("Dimensions could be not found.")}return f}calculateModuleSize(n,i,o){return(this.calculateModuleSizeOneWay(n,i)+this.calculateModuleSizeOneWay(n,o))/2}calculateModuleSizeOneWay(n,i){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(i.getX()),Math.floor(i.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(o)?u/7:isNaN(u)?o/7:(o+u)/14}sizeOfBlackWhiteBlackRunBothWays(n,i,o,u){let c=this.sizeOfBlackWhiteBlackRun(n,i,o,u),d=1,f=n-(o-n);f<0?(d=n/(n-f),f=0):f>=this.image.getWidth()&&(d=(this.image.getWidth()-1-n)/(f-n),f=this.image.getWidth()-1);let m=Math.floor(i-(u-i)*d);return d=1,m<0?(d=i/(i-m),m=0):m>=this.image.getHeight()&&(d=(this.image.getHeight()-1-i)/(m-i),m=this.image.getHeight()-1),f=Math.floor(n+(f-n)*d),c+=this.sizeOfBlackWhiteBlackRun(n,i,f,m),c-1}sizeOfBlackWhiteBlackRun(n,i,o,u){const c=Math.abs(u-i)>Math.abs(o-n);if(c){let D=n;n=i,i=D,D=o,o=u,u=D}const d=Math.abs(o-n),f=Math.abs(u-i);let m=-d/2;const x=n<o?1:-1,E=i<u?1:-1;let A=0;const S=o+x;for(let D=n,j=i;D!==S;D+=x){const V=c?j:D,W=c?D:j;if(A===1===this.image.get(V,W)){if(A===2)return ye.distance(D,j,n,i);A++}if(m+=f,m>0){if(j===u)break;j+=E,m-=d}}return A===2?ye.distance(o+x,u,n,i):NaN}findAlignmentInRegion(n,i,o,u){const c=Math.floor(u*n),d=Math.max(0,i-c),f=Math.min(this.image.getWidth()-1,i+c);if(f-d<n*3)throw new q("Alignment top exceeds estimated module size.");const m=Math.max(0,o-c),x=Math.min(this.image.getHeight()-1,o+c);if(x-m<n*3)throw new q("Alignment bottom exceeds estimated module size.");return new la(this.image,d,m,f-d,x-m,n,this.resultPointCallback).find()}}class jn{constructor(){this.decoder=new Xm}getDecoder(){return this.decoder}decode(n,i){let o,u;if(i!=null&&i.get(G.PURE_BARCODE)!==void 0){const m=jn.extractPureBits(n.getBlackMatrix());o=this.decoder.decodeBitMatrix(m,i),u=jn.NO_POINTS}else{const m=new Ks(n.getBlackMatrix()).detect(i);o=this.decoder.decodeBitMatrix(m.getBits(),i),u=m.getPoints()}o.getOther()instanceof kh&&o.getOther().applyMirroredCorrection(u);const c=new Oe(o.getText(),o.getRawBytes(),void 0,u,le.QR_CODE,void 0),d=o.getByteSegments();d!==null&&c.putMetadata(Ce.BYTE_SEGMENTS,d);const f=o.getECLevel();return f!==null&&c.putMetadata(Ce.ERROR_CORRECTION_LEVEL,f),o.hasStructuredAppend()&&(c.putMetadata(Ce.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),c.putMetadata(Ce.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),c}reset(){}static extractPureBits(n){const i=n.getTopLeftOnBit(),o=n.getBottomRightOnBit();if(i===null||o===null)throw new q;const u=this.moduleSize(i,n);let c=i[1],d=o[1],f=i[0],m=o[0];if(f>=m||c>=d)throw new q;if(d-c!==m-f&&(m=f+(d-c),m>=n.getWidth()))throw new q;const x=Math.round((m-f+1)/u),E=Math.round((d-c+1)/u);if(x<=0||E<=0)throw new q;if(E!==x)throw new q;const A=Math.floor(u/2);c+=A,f+=A;const S=f+Math.floor((x-1)*u)-m;if(S>0){if(S>A)throw new q;f-=S}const D=c+Math.floor((E-1)*u)-d;if(D>0){if(D>A)throw new q;c-=D}const j=new Ne(x,E);for(let V=0;V<E;V++){const W=c+Math.floor(V*u);for(let K=0;K<x;K++)n.get(f+Math.floor(K*u),W)&&j.set(K,V)}return j}static moduleSize(n,i){const o=i.getHeight(),u=i.getWidth();let c=n[0],d=n[1],f=!0,m=0;for(;c<u&&d<o;){if(f!==i.get(c,d)){if(++m===5)break;f=!f}c++,d++}if(c===u||d===o)throw new q;return(c-n[0])/7}}jn.NO_POINTS=new Array;class Te{PDF417Common(){}static getBitCountSum(n){return ye.sum(n)}static toIntArray(n){if(n==null||!n.length)return Te.EMPTY_INT_ARRAY;const i=new Int32Array(n.length);let o=0;for(const u of n)i[o++]=u;return i}static getCodeword(n){const i=I.binarySearch(Te.SYMBOL_TABLE,n&262143);return i<0?-1:(Te.CODEWORD_TABLE[i]-1)%Te.NUMBER_OF_CODEWORDS}}Te.NUMBER_OF_CODEWORDS=929,Te.MAX_CODEWORDS_IN_BARCODE=Te.NUMBER_OF_CODEWORDS-1,Te.MIN_ROWS_IN_BARCODE=3,Te.MAX_ROWS_IN_BARCODE=90,Te.MODULES_IN_CODEWORD=17,Te.MODULES_IN_STOP_PATTERN=18,Te.BARS_IN_MODULE=8,Te.EMPTY_INT_ARRAY=new Int32Array([]),Te.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Te.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Km{constructor(n,i){this.bits=n,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class De{static detectMultiple(n,i,o){let u=n.getBlackMatrix(),c=De.detect(o,u);return c.length||(u=u.clone(),u.rotate180(),c=De.detect(o,u)),new Km(u,c)}static detect(n,i){const o=new Array;let u=0,c=0,d=!1;for(;u<i.getHeight();){const f=De.findVertices(i,u,c);if(f[0]==null&&f[3]==null){if(!d)break;d=!1,c=0;for(const m of o)m[1]!=null&&(u=Math.trunc(Math.max(u,m[1].getY()))),m[3]!=null&&(u=Math.max(u,Math.trunc(m[3].getY())));u+=De.ROW_STEP;continue}if(d=!0,o.push(f),!n)break;f[2]!=null?(c=Math.trunc(f[2].getX()),u=Math.trunc(f[2].getY())):(c=Math.trunc(f[4].getX()),u=Math.trunc(f[4].getY()))}return o}static findVertices(n,i,o){const u=n.getHeight(),c=n.getWidth(),d=new Array(8);return De.copyToResult(d,De.findRowsWithPattern(n,u,c,i,o,De.START_PATTERN),De.INDEXES_START_PATTERN),d[4]!=null&&(o=Math.trunc(d[4].getX()),i=Math.trunc(d[4].getY())),De.copyToResult(d,De.findRowsWithPattern(n,u,c,i,o,De.STOP_PATTERN),De.INDEXES_STOP_PATTERN),d}static copyToResult(n,i,o){for(let u=0;u<o.length;u++)n[o[u]]=i[u]}static findRowsWithPattern(n,i,o,u,c,d){const f=new Array(4);let m=!1;const x=new Int32Array(d.length);for(;u<i;u+=De.ROW_STEP){let A=De.findGuardPattern(n,c,u,o,!1,d,x);if(A!=null){for(;u>0;){const S=De.findGuardPattern(n,c,--u,o,!1,d,x);if(S!=null)A=S;else{u++;break}}f[0]=new de(A[0],u),f[1]=new de(A[1],u),m=!0;break}}let E=u+1;if(m){let A=0,S=Int32Array.from([Math.trunc(f[0].getX()),Math.trunc(f[1].getX())]);for(;E<i;E++){const D=De.findGuardPattern(n,S[0],E,o,!1,d,x);if(D!=null&&Math.abs(S[0]-D[0])<De.MAX_PATTERN_DRIFT&&Math.abs(S[1]-D[1])<De.MAX_PATTERN_DRIFT)S=D,A=0;else{if(A>De.SKIPPED_ROW_COUNT_MAX)break;A++}}E-=A+1,f[2]=new de(S[0],E),f[3]=new de(S[1],E)}return E-u<De.BARCODE_MIN_HEIGHT&&I.fill(f,null),f}static findGuardPattern(n,i,o,u,c,d,f){I.fillWithin(f,0,f.length,0);let m=i,x=0;for(;n.get(m,o)&&m>0&&x++<De.MAX_PIXEL_DRIFT;)m--;let E=m,A=0,S=d.length;for(let D=c;E<u;E++)if(n.get(E,o)!==D)f[A]++;else{if(A===S-1){if(De.patternMatchVariance(f,d,De.MAX_INDIVIDUAL_VARIANCE)<De.MAX_AVG_VARIANCE)return new Int32Array([m,E]);m+=f[0]+f[1],B.arraycopy(f,2,f,0,A-1),f[A-1]=0,f[A]=0,A--}else A++;f[A]=1,D=!D}return A===S-1&&De.patternMatchVariance(f,d,De.MAX_INDIVIDUAL_VARIANCE)<De.MAX_AVG_VARIANCE?new Int32Array([m,E-1]):null}static patternMatchVariance(n,i,o){let u=n.length,c=0,d=0;for(let x=0;x<u;x++)c+=n[x],d+=i[x];if(c<d)return 1/0;let f=c/d;o*=f;let m=0;for(let x=0;x<u;x++){let E=n[x],A=i[x]*f,S=E>A?E-A:A-E;if(S>o)return 1/0;m+=S}return m/c}}De.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),De.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),De.MAX_AVG_VARIANCE=.42,De.MAX_INDIVIDUAL_VARIANCE=.8,De.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),De.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),De.MAX_PIXEL_DRIFT=3,De.MAX_PATTERN_DRIFT=5,De.SKIPPED_ROW_COUNT_MAX=25,De.ROW_STEP=5,De.BARCODE_MIN_HEIGHT=10;class Kt{constructor(n,i){if(i.length===0)throw new v;this.field=n;let o=i.length;if(o>1&&i[0]===0){let u=1;for(;u<o&&i[u]===0;)u++;u===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-u),B.arraycopy(i,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let u=0;for(let c of this.coefficients)u=this.field.add(u,c);return u}let i=this.coefficients[0],o=this.coefficients.length;for(let u=1;u<o;u++)i=this.field.add(this.field.multiply(n,i),this.coefficients[u]);return i}add(n){if(!this.field.equals(n.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let i=this.coefficients,o=n.coefficients;if(i.length>o.length){let d=i;i=o,o=d}let u=new Int32Array(o.length),c=o.length-i.length;B.arraycopy(o,0,u,0,c);for(let d=c;d<o.length;d++)u[d]=this.field.add(i[d-c],o[d]);return new Kt(this.field,u)}subtract(n){if(!this.field.equals(n.field))throw new v("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof Kt?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new Kt(this.field,new Int32Array([0]));let i=this.coefficients,o=i.length,u=n.coefficients,c=u.length,d=new Int32Array(o+c-1);for(let f=0;f<o;f++){let m=i[f];for(let x=0;x<c;x++)d[f+x]=this.field.add(d[f+x],this.field.multiply(m,u[x]))}return new Kt(this.field,d)}negative(){let n=this.coefficients.length,i=new Int32Array(n);for(let o=0;o<n;o++)i[o]=this.field.subtract(0,this.coefficients[o]);return new Kt(this.field,i)}multiplyScalar(n){if(n===0)return new Kt(this.field,new Int32Array([0]));if(n===1)return this;let i=this.coefficients.length,o=new Int32Array(i);for(let u=0;u<i;u++)o[u]=this.field.multiply(this.coefficients[u],n);return new Kt(this.field,o)}multiplyByMonomial(n,i){if(n<0)throw new v;if(i===0)return new Kt(this.field,new Int32Array([0]));let o=this.coefficients.length,u=new Int32Array(o+n);for(let c=0;c<o;c++)u[c]=this.field.multiply(this.coefficients[c],i);return new Kt(this.field,u)}toString(){let n=new ue;for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);o!==0&&(o<0?(n.append(" - "),o=-o):n.length()>0&&n.append(" + "),(i===0||o!==1)&&n.append(o),i!==0&&(i===1?n.append("x"):(n.append("x^"),n.append(i))))}return n.toString()}}class qm{add(n,i){return(n+i)%this.modulus}subtract(n,i){return(this.modulus+n-i)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new v;return this.logTable[n]}inverse(n){if(n===0)throw new Ze;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,i){return n===0||i===0?0:this.expTable[(this.logTable[n]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class gu extends qm{constructor(n,i){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let o=1;for(let u=0;u<n;u++)this.expTable[u]=o,o=o*i%n;for(let u=0;u<n-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new Kt(this,new Int32Array([0])),this.one=new Kt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,i){if(n<0)throw new v;if(i===0)return this.zero;let o=new Int32Array(n+1);return o[0]=i,new Kt(this,o)}}gu.PDF417_GF=new gu(Te.NUMBER_OF_CODEWORDS,3);class Ph{constructor(){this.field=gu.PDF417_GF}decode(n,i,o){let u=new Kt(this.field,n),c=new Int32Array(i),d=!1;for(let j=i;j>0;j--){let V=u.evaluateAt(this.field.exp(j));c[i-j]=V,V!==0&&(d=!0)}if(!d)return 0;let f=this.field.getOne();if(o!=null)for(const j of o){let V=this.field.exp(n.length-1-j),W=new Kt(this.field,new Int32Array([this.field.subtract(0,V),1]));f=f.multiply(W)}let m=new Kt(this.field,c),x=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),m,i),E=x[0],A=x[1],S=this.findErrorLocations(E),D=this.findErrorMagnitudes(A,E,S);for(let j=0;j<S.length;j++){let V=n.length-1-this.field.log(S[j]);if(V<0)throw T.getChecksumInstance();n[V]=this.field.subtract(n[V],D[j])}return S.length}runEuclideanAlgorithm(n,i,o){if(n.getDegree()<i.getDegree()){let S=n;n=i,i=S}let u=n,c=i,d=this.field.getZero(),f=this.field.getOne();for(;c.getDegree()>=Math.round(o/2);){let S=u,D=d;if(u=c,d=f,u.isZero())throw T.getChecksumInstance();c=S;let j=this.field.getZero(),V=u.getCoefficient(u.getDegree()),W=this.field.inverse(V);for(;c.getDegree()>=u.getDegree()&&!c.isZero();){let K=c.getDegree()-u.getDegree(),ie=this.field.multiply(c.getCoefficient(c.getDegree()),W);j=j.add(this.field.buildMonomial(K,ie)),c=c.subtract(u.multiplyByMonomial(K,ie))}f=j.multiply(d).subtract(D).negative()}let m=f.getCoefficient(0);if(m===0)throw T.getChecksumInstance();let x=this.field.inverse(m),E=f.multiply(x),A=c.multiply(x);return[E,A]}findErrorLocations(n){let i=n.getDegree(),o=new Int32Array(i),u=0;for(let c=1;c<this.field.getSize()&&u<i;c++)n.evaluateAt(c)===0&&(o[u]=this.field.inverse(c),u++);if(u!==i)throw T.getChecksumInstance();return o}findErrorMagnitudes(n,i,o){let u=i.getDegree(),c=new Int32Array(u);for(let x=1;x<=u;x++)c[u-x]=this.field.multiply(x,i.getCoefficient(x));let d=new Kt(this.field,c),f=o.length,m=new Int32Array(f);for(let x=0;x<f;x++){let E=this.field.inverse(o[x]),A=this.field.subtract(0,n.evaluateAt(E)),S=this.field.inverse(d.evaluateAt(E));m[x]=this.field.multiply(A,S)}return m}}class xi{constructor(n,i,o,u,c){n instanceof xi?this.constructor_2(n):this.constructor_1(n,i,o,u,c)}constructor_1(n,i,o,u,c){const d=i==null||o==null,f=u==null||c==null;if(d&&f)throw new q;d?(i=new de(0,u.getY()),o=new de(0,c.getY())):f&&(u=new de(n.getWidth()-1,i.getY()),c=new de(n.getWidth()-1,o.getY())),this.image=n,this.topLeft=i,this.bottomLeft=o,this.topRight=u,this.bottomRight=c,this.minX=Math.trunc(Math.min(i.getX(),o.getX())),this.maxX=Math.trunc(Math.max(u.getX(),c.getX())),this.minY=Math.trunc(Math.min(i.getY(),u.getY())),this.maxY=Math.trunc(Math.max(o.getY(),c.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,i){return n==null?i:i==null?n:new xi(n.image,n.topLeft,n.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(n,i,o){let u=this.topLeft,c=this.bottomLeft,d=this.topRight,f=this.bottomRight;if(n>0){let m=o?this.topLeft:this.topRight,x=Math.trunc(m.getY()-n);x<0&&(x=0);let E=new de(m.getX(),x);o?u=E:d=E}if(i>0){let m=o?this.bottomLeft:this.bottomRight,x=Math.trunc(m.getY()+i);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);let E=new de(m.getX(),x);o?c=E:f=E}return new xi(this.image,u,c,d,f)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ym{constructor(n,i,o,u){this.columnCount=n,this.errorCorrectionLevel=u,this.rowCountUpperPart=i,this.rowCountLowerPart=o,this.rowCount=i+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class qs{constructor(){this.buffer=""}static form(n,i){let o=-1;function u(d,f,m,x,E,A){if(d==="%%")return"%";if(i[++o]===void 0)return;d=x?parseInt(x.substr(1)):void 0;let S=E?parseInt(E.substr(1)):void 0,D;switch(A){case"s":D=i[o];break;case"c":D=i[o][0];break;case"f":D=parseFloat(i[o]).toFixed(d);break;case"p":D=parseFloat(i[o]).toPrecision(d);break;case"e":D=parseFloat(i[o]).toExponential(d);break;case"x":D=parseInt(i[o]).toString(S||16);break;case"d":D=parseFloat(parseInt(i[o],S||10).toPrecision(d)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(S);let j=parseInt(m),V=m&&m[0]+""=="0"?"0":" ";for(;D.length<j;)D=f!==void 0?D+V:V+D;return D}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(c,u)}format(n,...i){this.buffer+=qs.form(n,i)}toString(){return this.buffer}}class Ys{constructor(n){this.boundingBox=new xi(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let i=this.getCodeword(n);if(i!=null)return i;for(let o=1;o<Ys.MAX_NEARBY_DISTANCE;o++){let u=this.imageRowToCodewordIndex(n)-o;if(u>=0&&(i=this.codewords[u],i!=null)||(u=this.imageRowToCodewordIndex(n)+o,u<this.codewords.length&&(i=this.codewords[u],i!=null)))return i}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,i){this.codewords[this.imageRowToCodewordIndex(n)]=i}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new qs;let i=0;for(const o of this.codewords){if(o==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}return n.toString()}}Ys.MAX_NEARBY_DISTANCE=5;class Zs{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let i=this.values.get(n);i==null&&(i=0),i++,this.values.set(n,i)}getValue(){let n=-1,i=new Array;for(const[o,u]of this.values.entries()){const c={getKey:()=>o,getValue:()=>u};c.getValue()>n?(n=c.getValue(),i=[],i.push(c.getKey())):c.getValue()===n&&i.push(c.getKey())}return Te.toIntArray(i)}getConfidence(n){return this.values.get(n)}}class Dh extends Ys{constructor(n,i){super(n),this._isLeft=i}setRowNumbers(){for(let n of this.getCodewords())n!=null&&n.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,n);let o=this.getBoundingBox(),u=this._isLeft?o.getTopLeft():o.getTopRight(),c=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(u.getY())),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=-1,x=1,E=0;for(let A=d;A<f;A++){if(i[A]==null)continue;let S=i[A],D=S.getRowNumber()-m;if(D===0)E++;else if(D===1)x=Math.max(x,E),E=1,m=S.getRowNumber();else if(D<0||S.getRowNumber()>=n.getRowCount()||D>A)i[A]=null;else{let j;x>2?j=(x-2)*D:j=D;let V=j>=A;for(let W=1;W<=j&&!V;W++)V=i[A-W]!=null;V?i[A]=null:(m=S.getRowNumber(),E=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let i=new Int32Array(n.getRowCount());for(let o of this.getCodewords())if(o!=null){let u=o.getRowNumber();if(u>=i.length)continue;i[u]++}return i}adjustIncompleteIndicatorColumnRowNumbers(n){let i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),u=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),d=this.imageRowToCodewordIndex(Math.trunc(u.getY())),f=this.getCodewords(),m=-1;for(let x=c;x<d;x++){if(f[x]==null)continue;let E=f[x];E.setRowNumberAsRowIndicatorColumn();let A=E.getRowNumber()-m;A===0||(A===1?m=E.getRowNumber():E.getRowNumber()>=n.getRowCount()?f[x]=null:m=E.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),i=new Zs,o=new Zs,u=new Zs,c=new Zs;for(let f of n){if(f==null)continue;f.setRowNumberAsRowIndicatorColumn();let m=f.getValue()%30,x=f.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:o.setValue(m*3+1);break;case 1:c.setValue(m/3),u.setValue(m%3);break;case 2:i.setValue(m+1);break}}if(i.getValue().length===0||o.getValue().length===0||u.getValue().length===0||c.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+u.getValue()[0]<Te.MIN_ROWS_IN_BARCODE||o.getValue()[0]+u.getValue()[0]>Te.MAX_ROWS_IN_BARCODE)return null;let d=new Ym(i.getValue()[0],o.getValue()[0],u.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(n,d),d}removeIncorrectCodewords(n,i){for(let o=0;o<n.length;o++){let u=n[o];if(n[o]==null)continue;let c=u.getValue()%30,d=u.getRowNumber();if(d>i.getRowCount()){n[o]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:c*3+1!==i.getRowCountUpperPart()&&(n[o]=null);break;case 1:(Math.trunc(c/3)!==i.getErrorCorrectionLevel()||c%3!==i.getRowCountLowerPart())&&(n[o]=null);break;case 2:c+1!==i.getColumnCount()&&(n[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Qs{constructor(n,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=Te.MAX_CODEWORDS_IN_BARCODE,i;do i=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n!=null&&n.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let o=this.detectionResultColumns[i].getCodewords();for(let u=0;u<o.length;u++)o[u]!=null&&(o[u].hasValidRowNumber()||this.adjustRowNumbers(i,u,o))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<n.length;o++)if(n[o]!=null&&i[o]!=null&&n[o].getRowNumber()===i[o].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let c=this.detectionResultColumns[u].getCodewords()[o];c!=null&&(c.setRowNumber(n[o].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let u=i[o].getRowNumber(),c=0;for(let d=this.barcodeColumnCount+1;d>0&&c<this.ADJUST_ROW_NUMBER_SKIP;d--){let f=this.detectionResultColumns[d].getCodewords()[o];f!=null&&(c=Qs.adjustRowNumberIfValid(u,c,f),f.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,i=this.detectionResultColumns[0].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let u=i[o].getRowNumber(),c=0;for(let d=1;d<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;d++){let f=this.detectionResultColumns[d].getCodewords()[o];f!=null&&(c=Qs.adjustRowNumberIfValid(u,c,f),f.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,i,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(n)?(o.setRowNumber(n),i=0):++i),i}adjustRowNumbers(n,i,o){if(!this.detectionResultColumns[n-1])return;let u=o[i],c=this.detectionResultColumns[n-1].getCodewords(),d=c;this.detectionResultColumns[n+1]!=null&&(d=this.detectionResultColumns[n+1].getCodewords());let f=new Array(14);f[2]=c[i],f[3]=d[i],i>0&&(f[0]=o[i-1],f[4]=c[i-1],f[5]=d[i-1]),i>1&&(f[8]=o[i-2],f[10]=c[i-2],f[11]=d[i-2]),i<o.length-1&&(f[1]=o[i+1],f[6]=c[i+1],f[7]=d[i+1]),i<o.length-2&&(f[9]=o[i+2],f[12]=c[i+2],f[13]=d[i+2]);for(let m of f)if(Qs.adjustRowNumber(u,m))return}static adjustRowNumber(n,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===n.getBucket()?(n.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,i){this.detectionResultColumns[n]=i}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new qs;for(let o=0;o<n.getCodewords().length;o++){i.format("CW %3d:",o);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){i.format("    |   ");continue}let c=this.detectionResultColumns[u].getCodewords()[o];if(c==null){i.format("    |   ");continue}i.format(" %3d|%3d",c.getRowNumber(),c.getValue())}i.format("%n")}return i.toString()}}class Js{constructor(n,i,o,u){this.rowNumber=Js.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(i),this.bucket=Math.trunc(o),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==Js.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}Js.BARCODE_ROW_UNKNOWN=-1;class xr{static initialize(){for(let n=0;n<Te.SYMBOL_TABLE.length;n++){let i=Te.SYMBOL_TABLE[n],o=i&1;for(let u=0;u<Te.BARS_IN_MODULE;u++){let c=0;for(;(i&1)===o;)c+=1,i>>=1;o=i&1,xr.RATIOS_TABLE[n]||(xr.RATIOS_TABLE[n]=new Array(Te.BARS_IN_MODULE)),xr.RATIOS_TABLE[n][Te.BARS_IN_MODULE-u-1]=Math.fround(c/Te.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let i=xr.getDecodedCodewordValue(xr.sampleBitCounts(n));return i!==-1?i:xr.getClosestDecodedValue(n)}static sampleBitCounts(n){let i=ye.sum(n),o=new Int32Array(Te.BARS_IN_MODULE),u=0,c=0;for(let d=0;d<Te.MODULES_IN_CODEWORD;d++){let f=i/(2*Te.MODULES_IN_CODEWORD)+d*i/Te.MODULES_IN_CODEWORD;c+n[u]<=f&&(c+=n[u],u++),o[u]++}return o}static getDecodedCodewordValue(n){let i=xr.getBitValue(n);return Te.getCodeword(i)===-1?-1:i}static getBitValue(n){let i=0;for(let o=0;o<n.length;o++)for(let u=0;u<n[o];u++)i=i<<1|(o%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(n){let i=ye.sum(n),o=new Array(Te.BARS_IN_MODULE);if(i>1)for(let d=0;d<o.length;d++)o[d]=Math.fround(n[d]/i);let u=gt.MAX_VALUE,c=-1;this.bSymbolTableReady||xr.initialize();for(let d=0;d<xr.RATIOS_TABLE.length;d++){let f=0,m=xr.RATIOS_TABLE[d];for(let x=0;x<Te.BARS_IN_MODULE;x++){let E=Math.fround(m[x]-o[x]);if(f+=Math.fround(E*E),f>=u)break}f<u&&(u=f,c=Te.SYMBOL_TABLE[d])}return c}}xr.bSymbolTableReady=!1,xr.RATIOS_TABLE=new Array(Te.SYMBOL_TABLE.length).map(C=>new Array(Te.BARS_IN_MODULE));class Mh{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class Lh{static parseLong(n,i=void 0){return parseInt(n,i)}}class Bh extends p{}Bh.kind="NullPointerException";class Zm{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,i,o){if(n==null)throw new Bh;if(i<0||i>n.length||o<0||i+o>n.length||i+o<0)throw new F;if(o===0)return;for(let u=0;u<o;u++)this.write(n[i+u])}flush(){}close(){}}class Qm extends p{}class Jm extends Zm{constructor(n=32){if(super(),this.count=0,n<0)throw new v("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let o=this.buf.length<<1;if(o-n<0&&(o=n),o<0){if(n<0)throw new Qm;o=b.MAX_VALUE}this.buf=I.copyOfUint8Array(this.buf,o)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,i,o){if(i<0||i>n.length||o<0||i+o-n.length>0)throw new F;this.ensureCapacity(this.count+o),B.arraycopy(n,i,this.buf,this.count,o),this.count+=o}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return I.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var tt;(function(C){C[C.ALPHA=0]="ALPHA",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.PUNCT=3]="PUNCT",C[C.ALPHA_SHIFT=4]="ALPHA_SHIFT",C[C.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(tt||(tt={}));function Fh(){if(typeof window<"u")return window.BigInt||null;if(typeof os<"u")return os.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ua;function Un(C){if(typeof ua>"u"&&(ua=Fh()),ua===null)throw new Error("BigInt is not supported!");return ua(C)}function e2(){let C=[];C[0]=Un(1);let n=Un(900);C[1]=n;for(let i=2;i<16;i++)C[i]=C[i-1]*n;return C}class ${static decode(n,i){let o=new ue(""),u=R.ISO8859_1;o.enableDecoding(u);let c=1,d=n[c++],f=new Mh;for(;c<n[0];){switch(d){case $.TEXT_COMPACTION_MODE_LATCH:c=$.textCompaction(n,c,o);break;case $.BYTE_COMPACTION_MODE_LATCH:case $.BYTE_COMPACTION_MODE_LATCH_6:c=$.byteCompaction(d,n,u,c,o);break;case $.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[c++]);break;case $.NUMERIC_COMPACTION_MODE_LATCH:c=$.numericCompaction(n,c,o);break;case $.ECI_CHARSET:R.getCharacterSetECIByValue(n[c++]);break;case $.ECI_GENERAL_PURPOSE:c+=2;break;case $.ECI_USER_DEFINED:c++;break;case $.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=$.decodeMacroBlock(n,c,f);break;case $.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case $.MACRO_PDF417_TERMINATOR:throw new U;default:c--,c=$.textCompaction(n,c,o);break}if(c<n.length)d=n[c++];else throw U.getFormatInstance()}if(o.length()===0)throw U.getFormatInstance();let m=new Fe(null,o.toString(),null,i);return m.setOther(f),m}static decodeMacroBlock(n,i,o){if(i+$.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw U.getFormatInstance();let u=new Int32Array($.NUMBER_OF_SEQUENCE_CODEWORDS);for(let f=0;f<$.NUMBER_OF_SEQUENCE_CODEWORDS;f++,i++)u[f]=n[i];o.setSegmentIndex(b.parseInt($.decodeBase900toBase10(u,$.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new ue;i=$.textCompaction(n,i,c),o.setFileId(c.toString());let d=-1;for(n[i]===$.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=i+1);i<n[0];)switch(n[i]){case $.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,n[i]){case $.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let f=new ue;i=$.textCompaction(n,i+1,f),o.setFileName(f.toString());break;case $.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new ue;i=$.textCompaction(n,i+1,m),o.setSender(m.toString());break;case $.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let x=new ue;i=$.textCompaction(n,i+1,x),o.setAddressee(x.toString());break;case $.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let E=new ue;i=$.numericCompaction(n,i+1,E),o.setSegmentCount(b.parseInt(E.toString()));break;case $.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let A=new ue;i=$.numericCompaction(n,i+1,A),o.setTimestamp(Lh.parseLong(A.toString()));break;case $.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let S=new ue;i=$.numericCompaction(n,i+1,S),o.setChecksum(b.parseInt(S.toString()));break;case $.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let D=new ue;i=$.numericCompaction(n,i+1,D),o.setFileSize(Lh.parseLong(D.toString()));break;default:throw U.getFormatInstance()}break;case $.MACRO_PDF417_TERMINATOR:i++,o.setLastSegment(!0);break;default:throw U.getFormatInstance()}if(d!==-1){let f=i-d;o.isLastSegment()&&f--,o.setOptionalData(I.copyOfRange(n,d,d+f))}return i}static textCompaction(n,i,o){let u=new Int32Array((n[0]-i)*2),c=new Int32Array((n[0]-i)*2),d=0,f=!1;for(;i<n[0]&&!f;){let m=n[i++];if(m<$.TEXT_COMPACTION_MODE_LATCH)u[d]=m/30,u[d+1]=m%30,d+=2;else switch(m){case $.TEXT_COMPACTION_MODE_LATCH:u[d++]=$.TEXT_COMPACTION_MODE_LATCH;break;case $.BYTE_COMPACTION_MODE_LATCH:case $.BYTE_COMPACTION_MODE_LATCH_6:case $.NUMERIC_COMPACTION_MODE_LATCH:case $.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case $.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case $.MACRO_PDF417_TERMINATOR:i--,f=!0;break;case $.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[d]=$.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=n[i++],c[d]=m,d++;break}}return $.decodeTextCompaction(u,c,d,o),i}static decodeTextCompaction(n,i,o,u){let c=tt.ALPHA,d=tt.ALPHA,f=0;for(;f<o;){let m=n[f],x="";switch(c){case tt.ALPHA:if(m<26)x=String.fromCharCode(65+m);else switch(m){case 26:x=" ";break;case $.LL:c=tt.LOWER;break;case $.ML:c=tt.MIXED;break;case $.PS:d=c,c=tt.PUNCT_SHIFT;break;case $.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[f]);break;case $.TEXT_COMPACTION_MODE_LATCH:c=tt.ALPHA;break}break;case tt.LOWER:if(m<26)x=String.fromCharCode(97+m);else switch(m){case 26:x=" ";break;case $.AS:d=c,c=tt.ALPHA_SHIFT;break;case $.ML:c=tt.MIXED;break;case $.PS:d=c,c=tt.PUNCT_SHIFT;break;case $.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[f]);break;case $.TEXT_COMPACTION_MODE_LATCH:c=tt.ALPHA;break}break;case tt.MIXED:if(m<$.PL)x=$.MIXED_CHARS[m];else switch(m){case $.PL:c=tt.PUNCT;break;case 26:x=" ";break;case $.LL:c=tt.LOWER;break;case $.AL:c=tt.ALPHA;break;case $.PS:d=c,c=tt.PUNCT_SHIFT;break;case $.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[f]);break;case $.TEXT_COMPACTION_MODE_LATCH:c=tt.ALPHA;break}break;case tt.PUNCT:if(m<$.PAL)x=$.PUNCT_CHARS[m];else switch(m){case $.PAL:c=tt.ALPHA;break;case $.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[f]);break;case $.TEXT_COMPACTION_MODE_LATCH:c=tt.ALPHA;break}break;case tt.ALPHA_SHIFT:if(c=d,m<26)x=String.fromCharCode(65+m);else switch(m){case 26:x=" ";break;case $.TEXT_COMPACTION_MODE_LATCH:c=tt.ALPHA;break}break;case tt.PUNCT_SHIFT:if(c=d,m<$.PAL)x=$.PUNCT_CHARS[m];else switch(m){case $.PAL:c=tt.ALPHA;break;case $.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[f]);break;case $.TEXT_COMPACTION_MODE_LATCH:c=tt.ALPHA;break}break}x!==""&&u.append(x),f++}}static byteCompaction(n,i,o,u,c){let d=new Jm,f=0,m=0,x=!1;switch(n){case $.BYTE_COMPACTION_MODE_LATCH:let E=new Int32Array(6),A=i[u++];for(;u<i[0]&&!x;)switch(E[f++]=A,m=900*m+A,A=i[u++],A){case $.TEXT_COMPACTION_MODE_LATCH:case $.BYTE_COMPACTION_MODE_LATCH:case $.NUMERIC_COMPACTION_MODE_LATCH:case $.BYTE_COMPACTION_MODE_LATCH_6:case $.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case $.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case $.MACRO_PDF417_TERMINATOR:u--,x=!0;break;default:if(f%5===0&&f>0){for(let S=0;S<6;++S)d.write(Number(Un(m)>>Un(8*(5-S))));m=0,f=0}break}u===i[0]&&A<$.TEXT_COMPACTION_MODE_LATCH&&(E[f++]=A);for(let S=0;S<f;S++)d.write(E[S]);break;case $.BYTE_COMPACTION_MODE_LATCH_6:for(;u<i[0]&&!x;){let S=i[u++];if(S<$.TEXT_COMPACTION_MODE_LATCH)f++,m=900*m+S;else switch(S){case $.TEXT_COMPACTION_MODE_LATCH:case $.BYTE_COMPACTION_MODE_LATCH:case $.NUMERIC_COMPACTION_MODE_LATCH:case $.BYTE_COMPACTION_MODE_LATCH_6:case $.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case $.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case $.MACRO_PDF417_TERMINATOR:u--,x=!0;break}if(f%5===0&&f>0){for(let D=0;D<6;++D)d.write(Number(Un(m)>>Un(8*(5-D))));m=0,f=0}}break}return c.append(J.decode(d.toByteArray(),o)),u}static numericCompaction(n,i,o){let u=0,c=!1,d=new Int32Array($.MAX_NUMERIC_CODEWORDS);for(;i<n[0]&&!c;){let f=n[i++];if(i===n[0]&&(c=!0),f<$.TEXT_COMPACTION_MODE_LATCH)d[u]=f,u++;else switch(f){case $.TEXT_COMPACTION_MODE_LATCH:case $.BYTE_COMPACTION_MODE_LATCH:case $.BYTE_COMPACTION_MODE_LATCH_6:case $.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case $.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case $.MACRO_PDF417_TERMINATOR:i--,c=!0;break}(u%$.MAX_NUMERIC_CODEWORDS===0||f===$.NUMERIC_COMPACTION_MODE_LATCH||c)&&u>0&&(o.append($.decodeBase900toBase10(d,u)),u=0)}return i}static decodeBase900toBase10(n,i){let o=Un(0);for(let c=0;c<i;c++)o+=$.EXP900[i-c-1]*Un(n[c]);let u=o.toString();if(u.charAt(0)!=="1")throw new U;return u.substring(1)}}$.TEXT_COMPACTION_MODE_LATCH=900,$.BYTE_COMPACTION_MODE_LATCH=901,$.NUMERIC_COMPACTION_MODE_LATCH=902,$.BYTE_COMPACTION_MODE_LATCH_6=924,$.ECI_USER_DEFINED=925,$.ECI_GENERAL_PURPOSE=926,$.ECI_CHARSET=927,$.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,$.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,$.MACRO_PDF417_TERMINATOR=922,$.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,$.MAX_NUMERIC_CODEWORDS=15,$.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,$.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,$.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,$.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,$.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,$.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,$.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,$.PL=25,$.LL=27,$.AS=27,$.ML=28,$.AL=28,$.PS=29,$.PAL=29,$.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,$.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",$.EXP900=Fh()?e2():[],$.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Le{constructor(){}static decode(n,i,o,u,c,d,f){let m=new xi(n,i,o,u,c),x=null,E=null,A;for(let j=!0;;j=!1){if(i!=null&&(x=Le.getRowIndicatorColumn(n,m,i,!0,d,f)),u!=null&&(E=Le.getRowIndicatorColumn(n,m,u,!1,d,f)),A=Le.merge(x,E),A==null)throw q.getNotFoundInstance();let V=A.getBoundingBox();if(j&&V!=null&&(V.getMinY()<m.getMinY()||V.getMaxY()>m.getMaxY()))m=V;else break}A.setBoundingBox(m);let S=A.getBarcodeColumnCount()+1;A.setDetectionResultColumn(0,x),A.setDetectionResultColumn(S,E);let D=x!=null;for(let j=1;j<=S;j++){let V=D?j:S-j;if(A.getDetectionResultColumn(V)!==void 0)continue;let W;V===0||V===S?W=new Dh(m,V===0):W=new Ys(m),A.setDetectionResultColumn(V,W);let K=-1,ie=K;for(let se=m.getMinY();se<=m.getMaxY();se++){if(K=Le.getStartColumn(A,V,se,D),K<0||K>m.getMaxX()){if(ie===-1)continue;K=ie}let ee=Le.detectCodeword(n,m.getMinX(),m.getMaxX(),D,K,se,d,f);ee!=null&&(W.setCodeword(se,ee),ie=K,d=Math.min(d,ee.getWidth()),f=Math.max(f,ee.getWidth()))}}return Le.createDecoderResult(A)}static merge(n,i){if(n==null&&i==null)return null;let o=Le.getBarcodeMetadata(n,i);if(o==null)return null;let u=xi.merge(Le.adjustBoundingBox(n),Le.adjustBoundingBox(i));return new Qs(o,u)}static adjustBoundingBox(n){if(n==null)return null;let i=n.getRowHeights();if(i==null)return null;let o=Le.getMax(i),u=0;for(let f of i)if(u+=o-f,f>0)break;let c=n.getCodewords();for(let f=0;u>0&&c[f]==null;f++)u--;let d=0;for(let f=i.length-1;f>=0&&(d+=o-i[f],!(i[f]>0));f--);for(let f=c.length-1;d>0&&c[f]==null;f--)d--;return n.getBoundingBox().addMissingRows(u,d,n.isLeft())}static getMax(n){let i=-1;for(let o of n)i=Math.max(i,o);return i}static getBarcodeMetadata(n,i){let o;if(n==null||(o=n.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let u;return i==null||(u=i.getBarcodeMetadata())==null?o:o.getColumnCount()!==u.getColumnCount()&&o.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&o.getRowCount()!==u.getRowCount()?null:o}static getRowIndicatorColumn(n,i,o,u,c,d){let f=new Dh(i,u);for(let m=0;m<2;m++){let x=m===0?1:-1,E=Math.trunc(Math.trunc(o.getX()));for(let A=Math.trunc(Math.trunc(o.getY()));A<=i.getMaxY()&&A>=i.getMinY();A+=x){let S=Le.detectCodeword(n,0,n.getWidth(),u,E,A,c,d);S!=null&&(f.setCodeword(A,S),u?E=S.getStartX():E=S.getEndX())}}return f}static adjustCodewordCount(n,i){let o=i[0][1],u=o.getValue(),c=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-Le.getNumberOfECCodeWords(n.getBarcodeECLevel());if(u.length===0){if(c<1||c>Te.MAX_CODEWORDS_IN_BARCODE)throw q.getNotFoundInstance();o.setValue(c)}else u[0]!==c&&o.setValue(c)}static createDecoderResult(n){let i=Le.createBarcodeMatrix(n);Le.adjustCodewordCount(n,i);let o=new Array,u=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),c=[],d=new Array;for(let m=0;m<n.getBarcodeRowCount();m++)for(let x=0;x<n.getBarcodeColumnCount();x++){let E=i[m][x+1].getValue(),A=m*n.getBarcodeColumnCount()+x;E.length===0?o.push(A):E.length===1?u[A]=E[0]:(d.push(A),c.push(E))}let f=new Array(c.length);for(let m=0;m<f.length;m++)f[m]=c[m];return Le.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),u,Te.toIntArray(o),Te.toIntArray(d),f)}static createDecoderResultFromAmbiguousValues(n,i,o,u,c){let d=new Int32Array(u.length),f=100;for(;f-- >0;){for(let m=0;m<d.length;m++)i[u[m]]=c[m][d[m]];try{return Le.decodeCodewords(i,n,o)}catch(m){if(!(m instanceof T))throw m}if(d.length===0)throw T.getChecksumInstance();for(let m=0;m<d.length;m++)if(d[m]<c[m].length-1){d[m]++;break}else if(d[m]=0,m===d.length-1)throw T.getChecksumInstance()}throw T.getChecksumInstance()}static createBarcodeMatrix(n){let i=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let u=0;u<i.length;u++)for(let c=0;c<i[u].length;c++)i[u][c]=new Zs;let o=0;for(let u of n.getDetectionResultColumns()){if(u!=null){for(let c of u.getCodewords())if(c!=null){let d=c.getRowNumber();if(d>=0){if(d>=i.length)continue;i[d][o].setValue(c.getValue())}}}o++}return i}static isValidBarcodeColumn(n,i){return i>=0&&i<=n.getBarcodeColumnCount()+1}static getStartColumn(n,i,o,u){let c=u?1:-1,d=null;if(Le.isValidBarcodeColumn(n,i-c)&&(d=n.getDetectionResultColumn(i-c).getCodeword(o)),d!=null)return u?d.getEndX():d.getStartX();if(d=n.getDetectionResultColumn(i).getCodewordNearby(o),d!=null)return u?d.getStartX():d.getEndX();if(Le.isValidBarcodeColumn(n,i-c)&&(d=n.getDetectionResultColumn(i-c).getCodewordNearby(o)),d!=null)return u?d.getEndX():d.getStartX();let f=0;for(;Le.isValidBarcodeColumn(n,i-c);){i-=c;for(let m of n.getDetectionResultColumn(i).getCodewords())if(m!=null)return(u?m.getEndX():m.getStartX())+c*f*(m.getEndX()-m.getStartX());f++}return u?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,i,o,u,c,d,f,m){c=Le.adjustCodewordStartColumn(n,i,o,u,c,d);let x=Le.getModuleBitCount(n,i,o,u,c,d);if(x==null)return null;let E,A=ye.sum(x);if(u)E=c+A;else{for(let j=0;j<x.length/2;j++){let V=x[j];x[j]=x[x.length-1-j],x[x.length-1-j]=V}E=c,c=E-A}if(!Le.checkCodewordSkew(A,f,m))return null;let S=xr.getDecodedValue(x),D=Te.getCodeword(S);return D===-1?null:new Js(c,E,Le.getCodewordBucketNumber(S),D)}static getModuleBitCount(n,i,o,u,c,d){let f=c,m=new Int32Array(8),x=0,E=u?1:-1,A=u;for(;(u?f<o:f>=i)&&x<m.length;)n.get(f,d)===A?(m[x]++,f+=E):(x++,A=!A);return x===m.length||f===(u?o:i)&&x===m.length-1?m:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,i,o,u,c,d){let f=c,m=u?-1:1;for(let x=0;x<2;x++){for(;(u?f>=i:f<o)&&u===n.get(f,d);){if(Math.abs(c-f)>Le.CODEWORD_SKEW_SIZE)return c;f+=m}m=-m,u=!u}return f}static checkCodewordSkew(n,i,o){return i-Le.CODEWORD_SKEW_SIZE<=n&&n<=o+Le.CODEWORD_SKEW_SIZE}static decodeCodewords(n,i,o){if(n.length===0)throw U.getFormatInstance();let u=1<<i+1,c=Le.correctErrors(n,o,u);Le.verifyCodewordCount(n,u);let d=$.decode(n,""+i);return d.setErrorsCorrected(c),d.setErasures(o.length),d}static correctErrors(n,i,o){if(i!=null&&i.length>o/2+Le.MAX_ERRORS||o<0||o>Le.MAX_EC_CODEWORDS)throw T.getChecksumInstance();return Le.errorCorrection.decode(n,o,i)}static verifyCodewordCount(n,i){if(n.length<4)throw U.getFormatInstance();let o=n[0];if(o>n.length)throw U.getFormatInstance();if(o===0)if(i<n.length)n[0]=n.length-i;else throw U.getFormatInstance()}static getBitCountForCodeword(n){let i=new Int32Array(8),o=0,u=i.length-1;for(;!((n&1)!==o&&(o=n&1,u--,u<0));)i[u]++,n>>=1;return i}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return Le.getCodewordBucketNumber(Le.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let i=new qs;for(let o=0;o<n.length;o++){i.format("Row %2d: ",o);for(let u=0;u<n[o].length;u++){let c=n[o][u];c.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}i.format("%n")}return i.toString()}}Le.CODEWORD_SKEW_SIZE=2,Le.MAX_ERRORS=3,Le.MAX_EC_CODEWORDS=512,Le.errorCorrection=new Ph;class qt{decode(n,i=null){let o=qt.decode(n,i,!1);if(o==null||o.length===0||o[0]==null)throw q.getNotFoundInstance();return o[0]}decodeMultiple(n,i=null){try{return qt.decode(n,i,!0)}catch(o){throw o instanceof U||o instanceof T?q.getNotFoundInstance():o}}static decode(n,i,o){const u=new Array,c=De.detectMultiple(n,i,o);for(const d of c.getPoints()){const f=Le.decode(c.getBits(),d[4],d[5],d[6],d[7],qt.getMinCodewordWidth(d),qt.getMaxCodewordWidth(d)),m=new Oe(f.getText(),f.getRawBytes(),void 0,d,le.PDF_417);m.putMetadata(Ce.ERROR_CORRECTION_LEVEL,f.getECLevel());const x=f.getOther();x!=null&&m.putMetadata(Ce.PDF417_EXTRA_METADATA,x),u.push(m)}return u.map(d=>d)}static getMaxWidth(n,i){return n==null||i==null?0:Math.trunc(Math.abs(n.getX()-i.getX()))}static getMinWidth(n,i){return n==null||i==null?b.MAX_VALUE:Math.trunc(Math.abs(n.getX()-i.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(qt.getMaxWidth(n[0],n[4]),qt.getMaxWidth(n[6],n[2])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN),Math.max(qt.getMaxWidth(n[1],n[5]),qt.getMaxWidth(n[7],n[3])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(qt.getMinWidth(n[0],n[4]),qt.getMinWidth(n[6],n[2])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN),Math.min(qt.getMinWidth(n[1],n[5]),qt.getMinWidth(n[7],n[3])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN)))}reset(){}}class ca extends p{}ca.kind="ReaderException";class jh{constructor(n,i){this.verbose=n===!0,i&&this.setHints(i)}decode(n,i){return i&&this.setHints(i),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const i=!s(n)&&n.get(G.TRY_HARDER)===!0,o=s(n)?null:n.get(G.POSSIBLE_FORMATS),u=new Array;if(!s(o)){const c=o.some(d=>d===le.UPC_A||d===le.UPC_E||d===le.EAN_13||d===le.EAN_8||d===le.CODABAR||d===le.CODE_39||d===le.CODE_93||d===le.CODE_128||d===le.ITF||d===le.RSS_14||d===le.RSS_EXPANDED);c&&!i&&u.push(new Ki(n,this.verbose)),o.includes(le.QR_CODE)&&u.push(new jn),o.includes(le.DATA_MATRIX)&&u.push(new Fn),o.includes(le.AZTEC)&&u.push(new Kr),o.includes(le.PDF_417)&&u.push(new qt),c&&i&&u.push(new Ki(n,this.verbose))}u.length===0&&(i||u.push(new Ki(n,this.verbose)),u.push(new jn),u.push(new Fn),u.push(new Kr),u.push(new qt),i&&u.push(new Ki(n,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new ca("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(n,this.hints)}catch(o){if(o instanceof ca)continue}throw new q("No MultiFormat Readers were able to detect the code.")}}class t2 extends he{constructor(n=null,i=500){const o=new jh;o.setHints(n),super(o,i)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class r2 extends he{constructor(n=500){super(new qt,n)}}class n2 extends he{constructor(n=500){super(new jn,n)}}var pu;(function(C){C[C.ERROR_CORRECTION=0]="ERROR_CORRECTION",C[C.CHARACTER_SET=1]="CHARACTER_SET",C[C.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",C[C.MIN_SIZE=3]="MIN_SIZE",C[C.MAX_SIZE=4]="MAX_SIZE",C[C.MARGIN=5]="MARGIN",C[C.PDF417_COMPACT=6]="PDF417_COMPACT",C[C.PDF417_COMPACTION=7]="PDF417_COMPACTION",C[C.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",C[C.AZTEC_LAYERS=9]="AZTEC_LAYERS",C[C.QR_VERSION=10]="QR_VERSION"})(pu||(pu={}));var Lt=pu;class mu{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new be(n,Int32Array.from([1])))}buildGenerator(n){const i=this.cachedGenerators;if(n>=i.length){let o=i[i.length-1];const u=this.field;for(let c=i.length;c<=n;c++){const d=o.multiply(new be(u,Int32Array.from([1,u.exp(c-1+u.getGeneratorBase())])));i.push(d),o=d}}return i[n]}encode(n,i){if(i===0)throw new v("No error correction bytes");const o=n.length-i;if(o<=0)throw new v("No data bytes provided");const u=this.buildGenerator(i),c=new Int32Array(o);B.arraycopy(n,0,c,0,o);let d=new be(this.field,c);d=d.multiplyByMonomial(i,1);const m=d.divide(u)[1].getCoefficients(),x=i-m.length;for(let E=0;E<x;E++)n[o+E]=0;B.arraycopy(m,0,n,o+x,m.length)}}class At{constructor(){}static applyMaskPenaltyRule1(n){return At.applyMaskPenaltyRule1Internal(n,!0)+At.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let i=0;const o=n.getArray(),u=n.getWidth(),c=n.getHeight();for(let d=0;d<c-1;d++){const f=o[d];for(let m=0;m<u-1;m++){const x=f[m];x===f[m+1]&&x===o[d+1][m]&&x===o[d+1][m+1]&&i++}}return At.N2*i}static applyMaskPenaltyRule3(n){let i=0;const o=n.getArray(),u=n.getWidth(),c=n.getHeight();for(let d=0;d<c;d++)for(let f=0;f<u;f++){const m=o[d];f+6<u&&m[f]===1&&m[f+1]===0&&m[f+2]===1&&m[f+3]===1&&m[f+4]===1&&m[f+5]===0&&m[f+6]===1&&(At.isWhiteHorizontal(m,f-4,f)||At.isWhiteHorizontal(m,f+7,f+11))&&i++,d+6<c&&o[d][f]===1&&o[d+1][f]===0&&o[d+2][f]===1&&o[d+3][f]===1&&o[d+4][f]===1&&o[d+5][f]===0&&o[d+6][f]===1&&(At.isWhiteVertical(o,f,d-4,d)||At.isWhiteVertical(o,f,d+7,d+11))&&i++}return i*At.N3}static isWhiteHorizontal(n,i,o){i=Math.max(i,0),o=Math.min(o,n.length);for(let u=i;u<o;u++)if(n[u]===1)return!1;return!0}static isWhiteVertical(n,i,o,u){o=Math.max(o,0),u=Math.min(u,n.length);for(let c=o;c<u;c++)if(n[c][i]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let i=0;const o=n.getArray(),u=n.getWidth(),c=n.getHeight();for(let m=0;m<c;m++){const x=o[m];for(let E=0;E<u;E++)x[E]===1&&i++}const d=n.getHeight()*n.getWidth();return Math.floor(Math.abs(i*2-d)*10/d)*At.N4}static getDataMaskBit(n,i,o){let u,c;switch(n){case 0:u=o+i&1;break;case 1:u=o&1;break;case 2:u=i%3;break;case 3:u=(o+i)%3;break;case 4:u=Math.floor(o/2)+Math.floor(i/3)&1;break;case 5:c=o*i,u=(c&1)+c%3;break;case 6:c=o*i,u=(c&1)+c%3&1;break;case 7:c=o*i,u=c%3+(o+i&1)&1;break;default:throw new v("Invalid mask pattern: "+n)}return u===0}static applyMaskPenaltyRule1Internal(n,i){let o=0;const u=i?n.getHeight():n.getWidth(),c=i?n.getWidth():n.getHeight(),d=n.getArray();for(let f=0;f<u;f++){let m=0,x=-1;for(let E=0;E<c;E++){const A=i?d[f][E]:d[E][f];A===x?m++:(m>=5&&(o+=At.N1+(m-5)),m=1,x=A)}m>=5&&(o+=At.N1+(m-5))}return o}}At.N1=3,At.N2=3,At.N3=40,At.N4=10;class da{constructor(n,i){this.width=n,this.height=i;const o=new Array(i);for(let u=0;u!==i;u++)o[u]=new Uint8Array(n);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(n,i){return this.bytes[i][n]}getArray(){return this.bytes}setNumber(n,i,o){this.bytes[i][n]=o}setBoolean(n,i,o){this.bytes[i][n]=o?1:0}clear(n){for(const i of this.bytes)I.fill(i,n)}equals(n){if(!(n instanceof da))return!1;const i=n;if(this.width!==i.width||this.height!==i.height)return!1;for(let o=0,u=this.height;o<u;++o){const c=this.bytes[o],d=i.bytes[o];for(let f=0,m=this.width;f<m;++f)if(c[f]!==d[f])return!1}return!0}toString(){const n=new ue;for(let i=0,o=this.height;i<o;++i){const u=this.bytes[i];for(let c=0,d=this.width;c<d;++c)switch(u[c]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class yi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new ue;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<yi.NUM_MASK_PATTERNS}}yi.NUM_MASK_PATTERNS=8;class nt extends p{}nt.kind="WriterException";class Se{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,i,o,u,c){Se.clearMatrix(c),Se.embedBasicPatterns(o,c),Se.embedTypeInfo(i,u,c),Se.maybeEmbedVersionInfo(o,c),Se.embedDataBits(n,u,c)}static embedBasicPatterns(n,i){Se.embedPositionDetectionPatternsAndSeparators(i),Se.embedDarkDotAtLeftBottomCorner(i),Se.maybeEmbedPositionAdjustmentPatterns(n,i),Se.embedTimingPatterns(i)}static embedTypeInfo(n,i,o){const u=new P;Se.makeTypeInfoBits(n,i,u);for(let c=0,d=u.getSize();c<d;++c){const f=u.get(u.getSize()-1-c),m=Se.TYPE_INFO_COORDINATES[c],x=m[0],E=m[1];if(o.setBoolean(x,E,f),c<8){const A=o.getWidth()-c-1;o.setBoolean(A,8,f)}else{const S=o.getHeight()-7+(c-8);o.setBoolean(8,S,f)}}}static maybeEmbedVersionInfo(n,i){if(n.getVersionNumber()<7)return;const o=new P;Se.makeVersionInfoBits(n,o);let u=6*3-1;for(let c=0;c<6;++c)for(let d=0;d<3;++d){const f=o.get(u);u--,i.setBoolean(c,i.getHeight()-11+d,f),i.setBoolean(i.getHeight()-11+d,c,f)}}static embedDataBits(n,i,o){let u=0,c=-1,d=o.getWidth()-1,f=o.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);f>=0&&f<o.getHeight();){for(let m=0;m<2;++m){const x=d-m;if(!Se.isEmpty(o.get(x,f)))continue;let E;u<n.getSize()?(E=n.get(u),++u):E=!1,i!==255&&At.getDataMaskBit(i,x,f)&&(E=!E),o.setBoolean(x,f,E)}f+=c}c=-c,f+=c,d-=2}if(u!==n.getSize())throw new nt("Not all bits consumed: "+u+"/"+n.getSize())}static findMSBSet(n){return 32-b.numberOfLeadingZeros(n)}static calculateBCHCode(n,i){if(i===0)throw new v("0 polynomial");const o=Se.findMSBSet(i);for(n<<=o-1;Se.findMSBSet(n)>=o;)n^=i<<Se.findMSBSet(n)-o;return n}static makeTypeInfoBits(n,i,o){if(!yi.isValidMaskPattern(i))throw new nt("Invalid mask pattern");const u=n.getBits()<<3|i;o.appendBits(u,5);const c=Se.calculateBCHCode(u,Se.TYPE_INFO_POLY);o.appendBits(c,10);const d=new P;if(d.appendBits(Se.TYPE_INFO_MASK_PATTERN,15),o.xor(d),o.getSize()!==15)throw new nt("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(n,i){i.appendBits(n.getVersionNumber(),6);const o=Se.calculateBCHCode(n.getVersionNumber(),Se.VERSION_INFO_POLY);if(i.appendBits(o,12),i.getSize()!==18)throw new nt("should not happen but we got: "+i.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let i=8;i<n.getWidth()-8;++i){const o=(i+1)%2;Se.isEmpty(n.get(i,6))&&n.setNumber(i,6,o),Se.isEmpty(n.get(6,i))&&n.setNumber(6,i,o)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new nt;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,i,o){for(let u=0;u<8;++u){if(!Se.isEmpty(o.get(n+u,i)))throw new nt;o.setNumber(n+u,i,0)}}static embedVerticalSeparationPattern(n,i,o){for(let u=0;u<7;++u){if(!Se.isEmpty(o.get(n,i+u)))throw new nt;o.setNumber(n,i+u,0)}}static embedPositionAdjustmentPattern(n,i,o){for(let u=0;u<5;++u){const c=Se.POSITION_ADJUSTMENT_PATTERN[u];for(let d=0;d<5;++d)o.setNumber(n+d,i+u,c[d])}}static embedPositionDetectionPattern(n,i,o){for(let u=0;u<7;++u){const c=Se.POSITION_DETECTION_PATTERN[u];for(let d=0;d<7;++d)o.setNumber(n+d,i+u,c[d])}}static embedPositionDetectionPatternsAndSeparators(n){const i=Se.POSITION_DETECTION_PATTERN[0].length;Se.embedPositionDetectionPattern(0,0,n),Se.embedPositionDetectionPattern(n.getWidth()-i,0,n),Se.embedPositionDetectionPattern(0,n.getWidth()-i,n);const o=8;Se.embedHorizontalSeparationPattern(0,o-1,n),Se.embedHorizontalSeparationPattern(n.getWidth()-o,o-1,n),Se.embedHorizontalSeparationPattern(0,n.getWidth()-o,n);const u=7;Se.embedVerticalSeparationPattern(u,0,n),Se.embedVerticalSeparationPattern(n.getHeight()-u-1,0,n),Se.embedVerticalSeparationPattern(u,n.getHeight()-u,n)}static maybeEmbedPositionAdjustmentPatterns(n,i){if(n.getVersionNumber()<2)return;const o=n.getVersionNumber()-1,u=Se.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let c=0,d=u.length;c!==d;c++){const f=u[c];if(f>=0)for(let m=0;m!==d;m++){const x=u[m];x>=0&&Se.isEmpty(i.get(x,f))&&Se.embedPositionAdjustmentPattern(x-2,f-2,i)}}}}Se.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Se.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Se.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Se.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Se.VERSION_INFO_POLY=7973,Se.TYPE_INFO_POLY=1335,Se.TYPE_INFO_MASK_PATTERN=21522;class i2{constructor(n,i){this.dataBytes=n,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ct{constructor(){}static calculateMaskPenalty(n){return At.applyMaskPenaltyRule1(n)+At.applyMaskPenaltyRule2(n)+At.applyMaskPenaltyRule3(n)+At.applyMaskPenaltyRule4(n)}static encode(n,i,o=null){let u=ct.DEFAULT_BYTE_MODE_ENCODING;const c=o!==null&&o.get(Lt.CHARACTER_SET)!==void 0;c&&(u=o.get(Lt.CHARACTER_SET).toString());const d=this.chooseMode(n,u),f=new P;if(d===Ae.BYTE&&(c||ct.DEFAULT_BYTE_MODE_ENCODING!==u)){const se=R.getCharacterSetECIByName(u);se!==void 0&&this.appendECI(se,f)}this.appendModeInfo(d,f);const m=new P;this.appendBytes(n,d,m,u);let x;if(o!==null&&o.get(Lt.QR_VERSION)!==void 0){const se=Number.parseInt(o.get(Lt.QR_VERSION).toString(),10);x=Ee.getVersionForNumber(se);const ee=this.calculateBitsNeeded(d,f,m,x);if(!this.willFit(ee,x,i))throw new nt("Data too big for requested version")}else x=this.recommendVersion(i,d,f,m);const E=new P;E.appendBitArray(f);const A=d===Ae.BYTE?m.getSizeInBytes():n.length;this.appendLengthInfo(A,x,d,E),E.appendBitArray(m);const S=x.getECBlocksForLevel(i),D=x.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(D,E);const j=this.interleaveWithECBytes(E,x.getTotalCodewords(),D,S.getNumBlocks()),V=new yi;V.setECLevel(i),V.setMode(d),V.setVersion(x);const W=x.getDimensionForVersion(),K=new da(W,W),ie=this.chooseMaskPattern(j,i,x,K);return V.setMaskPattern(ie),Se.buildMatrix(j,i,x,ie,K),V.setMatrix(K),V}static recommendVersion(n,i,o,u){const c=this.calculateBitsNeeded(i,o,u,Ee.getVersionForNumber(1)),d=this.chooseVersion(c,n),f=this.calculateBitsNeeded(i,o,u,d);return this.chooseVersion(f,n)}static calculateBitsNeeded(n,i,o,u){return i.getSize()+n.getCharacterCountBits(u)+o.getSize()}static getAlphanumericCode(n){return n<ct.ALPHANUMERIC_TABLE.length?ct.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,i=null){if(R.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(n))return Ae.KANJI;let o=!1,u=!1;for(let c=0,d=n.length;c<d;++c){const f=n.charAt(c);if(ct.isDigit(f))o=!0;else if(this.getAlphanumericCode(f.charCodeAt(0))!==-1)u=!0;else return Ae.BYTE}return u?Ae.ALPHANUMERIC:o?Ae.NUMERIC:Ae.BYTE}static isOnlyDoubleByteKanji(n){let i;try{i=J.encode(n,R.SJIS)}catch{return!1}const o=i.length;if(o%2!==0)return!1;for(let u=0;u<o;u+=2){const c=i[u]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(n,i,o,u){let c=Number.MAX_SAFE_INTEGER,d=-1;for(let f=0;f<yi.NUM_MASK_PATTERNS;f++){Se.buildMatrix(n,i,o,f,u);let m=this.calculateMaskPenalty(u);m<c&&(c=m,d=f)}return d}static chooseVersion(n,i){for(let o=1;o<=40;o++){const u=Ee.getVersionForNumber(o);if(ct.willFit(n,u,i))return u}throw new nt("Data too big")}static willFit(n,i,o){const u=i.getTotalCodewords(),d=i.getECBlocksForLevel(o).getTotalECCodewords(),f=u-d,m=(n+7)/8;return f>=m}static terminateBits(n,i){const o=n*8;if(i.getSize()>o)throw new nt("data bits cannot fit in the QR Code"+i.getSize()+" > "+o);for(let d=0;d<4&&i.getSize()<o;++d)i.appendBit(!1);const u=i.getSize()&7;if(u>0)for(let d=u;d<8;d++)i.appendBit(!1);const c=n-i.getSizeInBytes();for(let d=0;d<c;++d)i.appendBits(d&1?17:236,8);if(i.getSize()!==o)throw new nt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,i,o,u,c,d){if(u>=o)throw new nt("Block ID too large");const f=n%o,m=o-f,x=Math.floor(n/o),E=x+1,A=Math.floor(i/o),S=A+1,D=x-A,j=E-S;if(D!==j)throw new nt("EC bytes mismatch");if(o!==m+f)throw new nt("RS blocks mismatch");if(n!==(A+D)*m+(S+j)*f)throw new nt("Total bytes mismatch");u<m?(c[0]=A,d[0]=D):(c[0]=S,d[0]=j)}static interleaveWithECBytes(n,i,o,u){if(n.getSizeInBytes()!==o)throw new nt("Number of bits and data bytes does not match");let c=0,d=0,f=0;const m=new Array;for(let E=0;E<u;++E){const A=new Int32Array(1),S=new Int32Array(1);ct.getNumDataBytesAndNumECBytesForBlockID(i,o,u,E,A,S);const D=A[0],j=new Uint8Array(D);n.toBytes(8*c,j,0,D);const V=ct.generateECBytes(j,S[0]);m.push(new i2(j,V)),d=Math.max(d,D),f=Math.max(f,V.length),c+=A[0]}if(o!==c)throw new nt("Data bytes does not match offset");const x=new P;for(let E=0;E<d;++E)for(const A of m){const S=A.getDataBytes();E<S.length&&x.appendBits(S[E],8)}for(let E=0;E<f;++E)for(const A of m){const S=A.getErrorCorrectionBytes();E<S.length&&x.appendBits(S[E],8)}if(i!==x.getSizeInBytes())throw new nt("Interleaving error: "+i+" and "+x.getSizeInBytes()+" differ.");return x}static generateECBytes(n,i){const o=n.length,u=new Int32Array(o+i);for(let d=0;d<o;d++)u[d]=n[d]&255;new mu(Ie.QR_CODE_FIELD_256).encode(u,i);const c=new Uint8Array(i);for(let d=0;d<i;d++)c[d]=u[o+d];return c}static appendModeInfo(n,i){i.appendBits(n.getBits(),4)}static appendLengthInfo(n,i,o,u){const c=o.getCharacterCountBits(i);if(n>=1<<c)throw new nt(n+" is bigger than "+((1<<c)-1));u.appendBits(n,c)}static appendBytes(n,i,o,u){switch(i){case Ae.NUMERIC:ct.appendNumericBytes(n,o);break;case Ae.ALPHANUMERIC:ct.appendAlphanumericBytes(n,o);break;case Ae.BYTE:ct.append8BitBytes(n,o,u);break;case Ae.KANJI:ct.appendKanjiBytes(n,o);break;default:throw new nt("Invalid mode: "+i)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const i=ct.getDigit(n);return i>=0&&i<=9}static appendNumericBytes(n,i){const o=n.length;let u=0;for(;u<o;){const c=ct.getDigit(n.charAt(u));if(u+2<o){const d=ct.getDigit(n.charAt(u+1)),f=ct.getDigit(n.charAt(u+2));i.appendBits(c*100+d*10+f,10),u+=3}else if(u+1<o){const d=ct.getDigit(n.charAt(u+1));i.appendBits(c*10+d,7),u+=2}else i.appendBits(c,4),u++}}static appendAlphanumericBytes(n,i){const o=n.length;let u=0;for(;u<o;){const c=ct.getAlphanumericCode(n.charCodeAt(u));if(c===-1)throw new nt;if(u+1<o){const d=ct.getAlphanumericCode(n.charCodeAt(u+1));if(d===-1)throw new nt;i.appendBits(c*45+d,11),u+=2}else i.appendBits(c,6),u++}}static append8BitBytes(n,i,o){let u;try{u=J.encode(n,o)}catch(c){throw new nt(c)}for(let c=0,d=u.length;c!==d;c++){const f=u[c];i.appendBits(f,8)}}static appendKanjiBytes(n,i){let o;try{o=J.encode(n,R.SJIS)}catch(c){throw new nt(c)}const u=o.length;for(let c=0;c<u;c+=2){const d=o[c]&255,f=o[c+1]&255,m=d<<8&4294967295|f;let x=-1;if(m>=33088&&m<=40956?x=m-33088:m>=57408&&m<=60351&&(x=m-49472),x===-1)throw new nt("Invalid byte sequence");const E=(x>>8)*192+(x&255);i.appendBits(E,13)}}static appendECI(n,i){i.appendBits(Ae.ECI.getBits(),4),i.appendBits(n.getValue(),8)}}ct.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ct.DEFAULT_BYTE_MODE_ENCODING=R.UTF8.getName();class vi{write(n,i,o,u=null){if(n.length===0)throw new v("Found empty contents");if(i<0||o<0)throw new v("Requested dimensions are too small: "+i+"x"+o);let c=at.L,d=vi.QUIET_ZONE_SIZE;u!==null&&(u.get(Lt.ERROR_CORRECTION)!==void 0&&(c=at.fromString(u.get(Lt.ERROR_CORRECTION).toString())),u.get(Lt.MARGIN)!==void 0&&(d=Number.parseInt(u.get(Lt.MARGIN).toString(),10)));const f=ct.encode(n,c,u);return this.renderResult(f,i,o,d)}writeToDom(n,i,o,u,c=null){typeof n=="string"&&(n=document.querySelector(n));const d=this.write(i,o,u,c);n&&n.appendChild(d)}renderResult(n,i,o,u){const c=n.getMatrix();if(c===null)throw new Me;const d=c.getWidth(),f=c.getHeight(),m=d+u*2,x=f+u*2,E=Math.max(i,m),A=Math.max(o,x),S=Math.min(Math.floor(E/m),Math.floor(A/x)),D=Math.floor((E-d*S)/2),j=Math.floor((A-f*S)/2),V=this.createSVGElement(E,A);for(let W=0,K=j;W<f;W++,K+=S)for(let ie=0,se=D;ie<d;ie++,se+=S)if(c.get(ie,W)===1){const ee=this.createSvgRectElement(se,K,S,S);V.appendChild(ee)}return V}createSVGElement(n,i){const o=document.createElementNS(vi.SVG_NS,"svg");return o.setAttributeNS(null,"height",n.toString()),o.setAttributeNS(null,"width",i.toString()),o}createSvgRectElement(n,i,o,u){const c=document.createElementNS(vi.SVG_NS,"rect");return c.setAttributeNS(null,"x",n.toString()),c.setAttributeNS(null,"y",i.toString()),c.setAttributeNS(null,"height",o.toString()),c.setAttributeNS(null,"width",u.toString()),c.setAttributeNS(null,"fill","#000000"),c}}vi.QUIET_ZONE_SIZE=4,vi.SVG_NS="http://www.w3.org/2000/svg";class Yi{encode(n,i,o,u,c){if(n.length===0)throw new v("Found empty contents");if(i!==le.QR_CODE)throw new v("Can only encode QR_CODE, but got "+i);if(o<0||u<0)throw new v(`Requested dimensions are too small: ${o}x${u}`);let d=at.L,f=Yi.QUIET_ZONE_SIZE;c!==null&&(c.get(Lt.ERROR_CORRECTION)!==void 0&&(d=at.fromString(c.get(Lt.ERROR_CORRECTION).toString())),c.get(Lt.MARGIN)!==void 0&&(f=Number.parseInt(c.get(Lt.MARGIN).toString(),10)));const m=ct.encode(n,d,c);return Yi.renderResult(m,o,u,f)}static renderResult(n,i,o,u){const c=n.getMatrix();if(c===null)throw new Me;const d=c.getWidth(),f=c.getHeight(),m=d+u*2,x=f+u*2,E=Math.max(i,m),A=Math.max(o,x),S=Math.min(Math.floor(E/m),Math.floor(A/x)),D=Math.floor((E-d*S)/2),j=Math.floor((A-f*S)/2),V=new Ne(E,A);for(let W=0,K=j;W<f;W++,K+=S)for(let ie=0,se=D;ie<d;ie++,se+=S)c.get(ie,W)===1&&V.setRegion(se,K,S,S);return V}}Yi.QUIET_ZONE_SIZE=4;class s2{encode(n,i,o,u,c){let d;switch(i){case le.QR_CODE:d=new Yi;break;default:throw new v("No encoder available for format "+i)}return d.encode(n,i,o,u,c)}}class hn extends re{constructor(n,i,o,u,c,d,f,m){if(super(d,f),this.yuvData=n,this.dataWidth=i,this.dataHeight=o,this.left=u,this.top=c,u+d>i||c+f>o)throw new v("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(d,f)}getRow(n,i){if(n<0||n>=this.getHeight())throw new v("Requested row is outside the image: "+n);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const u=(n+this.top)*this.dataWidth+this.left;return B.arraycopy(this.yuvData,u,i,0,o),i}getMatrix(){const n=this.getWidth(),i=this.getHeight();if(n===this.dataWidth&&i===this.dataHeight)return this.yuvData;const o=n*i,u=new Uint8ClampedArray(o);let c=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return B.arraycopy(this.yuvData,c,u,0,o),u;for(let d=0;d<i;d++){const f=d*n;B.arraycopy(this.yuvData,c,u,f,n),c+=this.dataWidth}return u}isCropSupported(){return!0}crop(n,i,o,u){return new hn(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+i,o,u,!1)}renderThumbnail(){const n=this.getWidth()/hn.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/hn.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(n*i),u=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let d=0;d<i;d++){const f=d*n;for(let m=0;m<n;m++){const x=u[c+m*hn.THUMBNAIL_SCALE_FACTOR]&255;o[f+m]=4278190080|x*65793}c+=this.dataWidth*hn.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/hn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/hn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,i){const o=this.yuvData;for(let u=0,c=this.top*this.dataWidth+this.left;u<i;u++,c+=this.dataWidth){const d=c+n/2;for(let f=c,m=c+n-1;f<d;f++,m--){const x=o[f];o[f]=o[m],o[m]=x}}}invert(){return new te(this)}}hn.THUMBNAIL_SCALE_FACTOR=2;class wu extends re{constructor(n,i,o,u,c,d,f){if(super(i,o),this.dataWidth=u,this.dataHeight=c,this.left=d,this.top=f,n.BYTES_PER_ELEMENT===4){const m=i*o,x=new Uint8ClampedArray(m);for(let E=0;E<m;E++){const A=n[E],S=A>>16&255,D=A>>7&510,j=A&255;x[E]=(S+D+j)/4&255}this.luminances=x}else this.luminances=n;if(u===void 0&&(this.dataWidth=i),c===void 0&&(this.dataHeight=o),d===void 0&&(this.left=0),f===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+o>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(n,i){if(n<0||n>=this.getHeight())throw new v("Requested row is outside the image: "+n);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const u=(n+this.top)*this.dataWidth+this.left;return B.arraycopy(this.luminances,u,i,0,o),i}getMatrix(){const n=this.getWidth(),i=this.getHeight();if(n===this.dataWidth&&i===this.dataHeight)return this.luminances;const o=n*i,u=new Uint8ClampedArray(o);let c=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return B.arraycopy(this.luminances,c,u,0,o),u;for(let d=0;d<i;d++){const f=d*n;B.arraycopy(this.luminances,c,u,f,n),c+=this.dataWidth}return u}isCropSupported(){return!0}crop(n,i,o,u){return new wu(this.luminances,o,u,this.dataWidth,this.dataHeight,this.left+n,this.top+i)}invert(){return new te(this)}}class Uh extends R{static forName(n){return this.getCharacterSetECIByName(n)}}class xu{}xu.ISO_8859_1=R.ISO8859_1;class Vh{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class zh{static singletonList(n){return[n]}static min(n,i){return n.sort(i)[0]}}class o2{constructor(n){this.previous=n}getPrevious(){return this.previous}}class Zi extends o2{constructor(n,i,o){super(n),this.value=i,this.bitCount=o}appendTo(n,i){n.appendBits(this.value,this.bitCount)}add(n,i){return new Zi(this,n,i)}addBinaryShift(n,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Zi(this,n,i)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+b.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class yu extends Zi{constructor(n,i,o){super(n,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=o}appendTo(n,i){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):o===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(i[this.binaryShiftStart+o],8)}addBinaryShift(n,i){return new yu(this,n,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function a2(C,n,i){return new yu(C,n,i)}function eo(C,n,i){return new Zi(C,n,i)}const l2=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Vn=0,ha=1,Ur=2,Wh=3,fn=4,u2=new Zi(null,0,0),vu=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function c2(C){for(let n of C)I.fill(n,-1);return C[Vn][fn]=0,C[ha][fn]=0,C[ha][Vn]=28,C[Wh][fn]=0,C[Ur][fn]=0,C[Ur][Vn]=15,C}const Hh=c2(I.createInt32Array(6,6));class gn{constructor(n,i,o,u){this.token=n,this.mode=i,this.binaryShiftByteCount=o,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,i){let o=this.bitCount,u=this.token;if(n!==this.mode){let d=vu[this.mode][n];u=eo(u,d&65535,d>>16),o+=d>>16}let c=n===Ur?4:5;return u=eo(u,i,c),new gn(u,n,0,o+c)}shiftAndAppend(n,i){let o=this.token,u=this.mode===Ur?4:5;return o=eo(o,Hh[this.mode][n],u),o=eo(o,i,5),new gn(o,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(n){let i=this.token,o=this.mode,u=this.bitCount;if(this.mode===fn||this.mode===Ur){let f=vu[o][Vn];i=eo(i,f&65535,f>>16),u+=f>>16,o=Vn}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new gn(i,o,this.binaryShiftByteCount+1,u+c);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(n+1)),d}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=a2(i,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new gn(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let i=this.bitCount+(vu[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?i+=gn.calculateBinaryShiftCost(n)-gn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(i+=10),i<=n.bitCount}toBitArray(n){let i=[];for(let u=this.endBinaryShift(n.length).token;u!==null;u=u.getPrevious())i.unshift(u);let o=new P;for(const u of i)u.appendTo(o,n);return o}toString(){return Z.format("%s bits=%d bytes=%d",l2[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}gn.INITIAL_STATE=new gn(u2,Vn,0,0);function d2(C){const n=Z.getCharCode(" "),i=Z.getCharCode("."),o=Z.getCharCode(",");C[Vn][n]=1;const u=Z.getCharCode("Z"),c=Z.getCharCode("A");for(let S=c;S<=u;S++)C[Vn][S]=S-c+2;C[ha][n]=1;const d=Z.getCharCode("z"),f=Z.getCharCode("a");for(let S=f;S<=d;S++)C[ha][S]=S-f+2;C[Ur][n]=1;const m=Z.getCharCode("9"),x=Z.getCharCode("0");for(let S=x;S<=m;S++)C[Ur][S]=S-x+2;C[Ur][o]=12,C[Ur][i]=13;const E=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let S=0;S<E.length;S++)C[Wh][Z.getCharCode(E[S])]=S;const A=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let S=0;S<A.length;S++)Z.getCharCode(A[S])>0&&(C[fn][Z.getCharCode(A[S])]=S);return C}const Eu=d2(I.createInt32Array(5,256));class to{constructor(n){this.text=n}encode(){const n=Z.getCharCode(" "),i=Z.getCharCode(`
`);let o=zh.singletonList(gn.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let d,f=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case Z.getCharCode("\r"):d=f===i?2:0;break;case Z.getCharCode("."):d=f===n?3:0;break;case Z.getCharCode(","):d=f===n?4:0;break;case Z.getCharCode(":"):d=f===n?5:0;break;default:d=0}d>0?(o=to.updateStateListForPair(o,c,d),c++):o=this.updateStateListForChar(o,c)}return zh.min(o,(c,d)=>c.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,i){const o=[];for(let u of n)this.updateStateForChar(u,i,o);return to.simplifyStates(o)}updateStateForChar(n,i,o){let u=this.text[i]&255,c=Eu[n.getMode()][u]>0,d=null;for(let f=0;f<=fn;f++){let m=Eu[f][u];if(m>0){if(d==null&&(d=n.endBinaryShift(i)),!c||f===n.getMode()||f===Ur){const x=d.latchAndAppend(f,m);o.push(x)}if(!c&&Hh[n.getMode()][f]>=0){const x=d.shiftAndAppend(f,m);o.push(x)}}}if(n.getBinaryShiftByteCount()>0||Eu[n.getMode()][u]===0){let f=n.addBinaryShiftChar(i);o.push(f)}}static updateStateListForPair(n,i,o){const u=[];for(let c of n)this.updateStateForPair(c,i,o,u);return this.simplifyStates(u)}static updateStateForPair(n,i,o,u){let c=n.endBinaryShift(i);if(u.push(c.latchAndAppend(fn,o)),n.getMode()!==fn&&u.push(c.shiftAndAppend(fn,o)),o===3||o===4){let d=c.latchAndAppend(Ur,16-o).latchAndAppend(Ur,1);u.push(d)}if(n.getBinaryShiftByteCount()>0){let d=n.addBinaryShiftChar(i).addBinaryShiftChar(i+1);u.push(d)}}static simplifyStates(n){let i=[];for(const o of n){let u=!0;for(const c of i){if(c.isBetterThanOrEqualTo(o)){u=!1;break}o.isBetterThanOrEqualTo(c)&&(i=i.filter(d=>d!==c))}u&&i.push(o)}return i}}class He{constructor(){}static encodeBytes(n){return He.encode(n,He.DEFAULT_EC_PERCENT,He.DEFAULT_AZTEC_LAYERS)}static encode(n,i,o){let u=new to(n).encode(),c=b.truncDivision(u.getSize()*i,100)+11,d=u.getSize()+c,f,m,x,E,A;if(o!==He.DEFAULT_AZTEC_LAYERS){if(f=o<0,m=Math.abs(o),m>(f?He.MAX_NB_BITS_COMPACT:He.MAX_NB_BITS))throw new v(Z.format("Illegal value %s for layers",o));x=He.totalBitsInLayer(m,f),E=He.WORD_SIZE[m];let ee=x-x%E;if(A=He.stuffBits(u,E),A.getSize()+c>ee)throw new v("Data to large for user specified layer");if(f&&A.getSize()>E*64)throw new v("Data to large for user specified layer")}else{E=0,A=null;for(let ee=0;;ee++){if(ee>He.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(f=ee<=3,m=f?ee+1:ee,x=He.totalBitsInLayer(m,f),d>x)continue;(A==null||E!==He.WORD_SIZE[m])&&(E=He.WORD_SIZE[m],A=He.stuffBits(u,E));let Ue=x-x%E;if(!(f&&A.getSize()>E*64)&&A.getSize()+c<=Ue)break}}let S=He.generateCheckWords(A,x,E),D=A.getSize()/E,j=He.generateModeMessage(f,m,D),V=(f?11:14)+m*4,W=new Int32Array(V),K;if(f){K=V;for(let ee=0;ee<W.length;ee++)W[ee]=ee}else{K=V+1+2*b.truncDivision(b.truncDivision(V,2)-1,15);let ee=b.truncDivision(V,2),Ue=b.truncDivision(K,2);for(let Pe=0;Pe<ee;Pe++){let yr=Pe+b.truncDivision(Pe,15);W[ee-Pe-1]=Ue-yr-1,W[ee+Pe]=Ue+yr+1}}let ie=new Ne(K);for(let ee=0,Ue=0;ee<m;ee++){let Pe=(m-ee)*4+(f?9:12);for(let yr=0;yr<Pe;yr++){let Yr=yr*2;for(let vr=0;vr<2;vr++)S.get(Ue+Yr+vr)&&ie.set(W[ee*2+vr],W[ee*2+yr]),S.get(Ue+Pe*2+Yr+vr)&&ie.set(W[ee*2+yr],W[V-1-ee*2-vr]),S.get(Ue+Pe*4+Yr+vr)&&ie.set(W[V-1-ee*2-vr],W[V-1-ee*2-yr]),S.get(Ue+Pe*6+Yr+vr)&&ie.set(W[V-1-ee*2-yr],W[ee*2+vr])}Ue+=Pe*8}if(He.drawModeMessage(ie,f,K,j),f)He.drawBullsEye(ie,b.truncDivision(K,2),5);else{He.drawBullsEye(ie,b.truncDivision(K,2),7);for(let ee=0,Ue=0;ee<b.truncDivision(V,2)-1;ee+=15,Ue+=16)for(let Pe=b.truncDivision(K,2)&1;Pe<K;Pe+=2)ie.set(b.truncDivision(K,2)-Ue,Pe),ie.set(b.truncDivision(K,2)+Ue,Pe),ie.set(Pe,b.truncDivision(K,2)-Ue),ie.set(Pe,b.truncDivision(K,2)+Ue)}let se=new Vh;return se.setCompact(f),se.setSize(K),se.setLayers(m),se.setCodeWords(D),se.setMatrix(ie),se}static drawBullsEye(n,i,o){for(let u=0;u<o;u+=2)for(let c=i-u;c<=i+u;c++)n.set(c,i-u),n.set(c,i+u),n.set(i-u,c),n.set(i+u,c);n.set(i-o,i-o),n.set(i-o+1,i-o),n.set(i-o,i-o+1),n.set(i+o,i-o),n.set(i+o,i-o+1),n.set(i+o,i+o-1)}static generateModeMessage(n,i,o){let u=new P;return n?(u.appendBits(i-1,2),u.appendBits(o-1,6),u=He.generateCheckWords(u,28,4)):(u.appendBits(i-1,5),u.appendBits(o-1,11),u=He.generateCheckWords(u,40,4)),u}static drawModeMessage(n,i,o,u){let c=b.truncDivision(o,2);if(i)for(let d=0;d<7;d++){let f=c-3+d;u.get(d)&&n.set(f,c-5),u.get(d+7)&&n.set(c+5,f),u.get(20-d)&&n.set(f,c+5),u.get(27-d)&&n.set(c-5,f)}else for(let d=0;d<10;d++){let f=c-5+d+b.truncDivision(d,5);u.get(d)&&n.set(f,c-7),u.get(d+10)&&n.set(c+7,f),u.get(29-d)&&n.set(f,c+7),u.get(39-d)&&n.set(c-7,f)}}static generateCheckWords(n,i,o){let u=n.getSize()/o,c=new mu(He.getGF(o)),d=b.truncDivision(i,o),f=He.bitsToWords(n,o,d);c.encode(f,d-u);let m=i%o,x=new P;x.appendBits(0,m);for(const E of Array.from(f))x.appendBits(E,o);return x}static bitsToWords(n,i,o){let u=new Int32Array(o),c,d;for(c=0,d=n.getSize()/i;c<d;c++){let f=0;for(let m=0;m<i;m++)f|=n.get(c*i+m)?1<<i-m-1:0;u[c]=f}return u}static getGF(n){switch(n){case 4:return Ie.AZTEC_PARAM;case 6:return Ie.AZTEC_DATA_6;case 8:return Ie.AZTEC_DATA_8;case 10:return Ie.AZTEC_DATA_10;case 12:return Ie.AZTEC_DATA_12;default:throw new v("Unsupported word size "+n)}}static stuffBits(n,i){let o=new P,u=n.getSize(),c=(1<<i)-2;for(let d=0;d<u;d+=i){let f=0;for(let m=0;m<i;m++)(d+m>=u||n.get(d+m))&&(f|=1<<i-1-m);(f&c)===c?(o.appendBits(f&c,i),d--):f&c?o.appendBits(f,i):(o.appendBits(f|1,i),d--)}return o}static totalBitsInLayer(n,i){return((i?88:112)+16*n)*n}}He.DEFAULT_EC_PERCENT=33,He.DEFAULT_AZTEC_LAYERS=0,He.MAX_NB_BITS=32,He.MAX_NB_BITS_COMPACT=4,He.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class fa{encode(n,i,o,u){return this.encodeWithHints(n,i,o,u,null)}encodeWithHints(n,i,o,u,c){let d=xu.ISO_8859_1,f=He.DEFAULT_EC_PERCENT,m=He.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(Lt.CHARACTER_SET)&&(d=Uh.forName(c.get(Lt.CHARACTER_SET).toString())),c.has(Lt.ERROR_CORRECTION)&&(f=b.parseInt(c.get(Lt.ERROR_CORRECTION).toString())),c.has(Lt.AZTEC_LAYERS)&&(m=b.parseInt(c.get(Lt.AZTEC_LAYERS).toString()))),fa.encodeLayers(n,i,o,u,d,f,m)}static encodeLayers(n,i,o,u,c,d,f){if(i!==le.AZTEC)throw new v("Can only encode AZTEC, but got "+i);let m=He.encode(Z.getBytes(n,c),d,f);return fa.renderResult(m,o,u)}static renderResult(n,i,o){let u=n.getMatrix();if(u==null)throw new Me;let c=u.getWidth(),d=u.getHeight(),f=Math.max(i,c),m=Math.max(o,d),x=Math.min(f/c,m/d),E=(f-c*x)/2,A=(m-d*x)/2,S=new Ne(f,m);for(let D=0,j=A;D<d;D++,j+=x)for(let V=0,W=E;V<c;V++,W+=x)u.get(V,D)&&S.setRegion(W,j,x,x);return S}}r.AbstractExpandedDecoder=ou,r.ArgumentException=y,r.ArithmeticException=Ze,r.AztecCode=Vh,r.AztecCodeReader=Kr,r.AztecCodeWriter=fa,r.AztecDecoder=ve,r.AztecDetector=Xs,r.AztecDetectorResult=Mn,r.AztecEncoder=He,r.AztecHighLevelEncoder=to,r.AztecPoint=Pt,r.BarcodeFormat=le,r.Binarizer=N,r.BinaryBitmap=_,r.BitArray=P,r.BitMatrix=Ne,r.BitSource=cu,r.BrowserAztecCodeReader=Lr,r.BrowserBarcodeReader=zm,r.BrowserCodeReader=he,r.BrowserDatamatrixCodeReader=Hm,r.BrowserMultiFormatReader=t2,r.BrowserPDF417Reader=r2,r.BrowserQRCodeReader=n2,r.BrowserQRCodeSvgWriter=vi,r.CharacterSetECI=R,r.ChecksumException=T,r.Code128Reader=oe,r.Code39Reader=Dt,r.DataMatrixDecodedBitStreamParser=Bn,r.DataMatrixReader=Fn,r.DecodeHintType=G,r.DecoderResult=Fe,r.DefaultGridSampler=$t,r.DetectorResult=lr,r.EAN13Reader=pi,r.EncodeHintType=Lt,r.Exception=p,r.FormatException=U,r.GenericGF=Ie,r.GenericGFPoly=be,r.GlobalHistogramBinarizer=Ve,r.GridSampler=pr,r.GridSamplerInstance=Vt,r.HTMLCanvasElementLuminanceSource=we,r.HybridBinarizer=ae,r.ITFReader=rt,r.IllegalArgumentException=v,r.IllegalStateException=Me,r.InvertedLuminanceSource=te,r.LuminanceSource=re,r.MathUtils=ye,r.MultiFormatOneDReader=Ki,r.MultiFormatReader=jh,r.MultiFormatWriter=s2,r.NotFoundException=q,r.OneDReader=ot,r.PDF417DecodedBitStreamParser=$,r.PDF417DecoderErrorCorrection=Ph,r.PDF417Reader=qt,r.PDF417ResultMetadata=Mh,r.PerspectiveTransform=qe,r.PlanarYUVLuminanceSource=hn,r.QRCodeByteMatrix=da,r.QRCodeDataMask=Fr,r.QRCodeDecodedBitStreamParser=wt,r.QRCodeDecoderErrorCorrectionLevel=at,r.QRCodeDecoderFormatInformation=nr,r.QRCodeEncoder=ct,r.QRCodeEncoderQRCode=yi,r.QRCodeMaskUtil=At,r.QRCodeMatrixUtil=Se,r.QRCodeMode=Ae,r.QRCodeReader=jn,r.QRCodeVersion=Ee,r.QRCodeWriter=Yi,r.RGBLuminanceSource=wu,r.RSS14Reader=Ct,r.RSSExpandedReader=Q,r.ReaderException=ca,r.ReedSolomonDecoder=ke,r.ReedSolomonEncoder=mu,r.ReedSolomonException=Xe,r.Result=Oe,r.ResultMetadataType=Ce,r.ResultPoint=de,r.StringUtils=Z,r.UnsupportedOperationException=z,r.VideoInputDevice=me,r.WhiteRectangleDetector=st,r.WriterException=nt,r.ZXingArrays=I,r.ZXingCharset=Uh,r.ZXingInteger=b,r.ZXingStandardCharsets=xu,r.ZXingStringBuilder=ue,r.ZXingStringEncoding=J,r.ZXingSystem=B,r.createAbstractExpandedDecoder=Oh,Object.defineProperty(r,"__esModule",{value:!0})})})(wd,wd.exports);var ht=wd.exports;const T3=yd(ht),R3=xd({__proto__:null,default:T3},[ht]);var W0=function(){function t(e,r,s){if(this.formatMap=new Map([[ge.QR_CODE,ht.BarcodeFormat.QR_CODE],[ge.AZTEC,ht.BarcodeFormat.AZTEC],[ge.CODABAR,ht.BarcodeFormat.CODABAR],[ge.CODE_39,ht.BarcodeFormat.CODE_39],[ge.CODE_93,ht.BarcodeFormat.CODE_93],[ge.CODE_128,ht.BarcodeFormat.CODE_128],[ge.DATA_MATRIX,ht.BarcodeFormat.DATA_MATRIX],[ge.MAXICODE,ht.BarcodeFormat.MAXICODE],[ge.ITF,ht.BarcodeFormat.ITF],[ge.EAN_13,ht.BarcodeFormat.EAN_13],[ge.EAN_8,ht.BarcodeFormat.EAN_8],[ge.PDF_417,ht.BarcodeFormat.PDF_417],[ge.RSS_14,ht.BarcodeFormat.RSS_14],[ge.RSS_EXPANDED,ht.BarcodeFormat.RSS_EXPANDED],[ge.UPC_A,ht.BarcodeFormat.UPC_A],[ge.UPC_E,ht.BarcodeFormat.UPC_E],[ge.UPC_EAN_EXTENSION,ht.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!R3)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=s;var a=this.createZXingFormats(e),l=new Map;l.set(ht.DecodeHintType.POSSIBLE_FORMATS,a),l.set(ht.DecodeHintType.TRY_HARDER,!1),this.hints=l}return t.prototype.decodeAsync=function(e){var r=this;return new Promise(function(s,a){try{s(r.decode(e))}catch(l){a(l)}})},t.prototype.decode=function(e){var r=new ht.MultiFormatReader(this.verbose,this.hints),s=new ht.HTMLCanvasElementLuminanceSource(e),a=new ht.BinaryBitmap(new ht.HybridBinarizer(s)),l=r.decode(a);return{text:l.text,format:Mm.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,s,a){e.set(r,s)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var r=[],s=0,a=e;s<a.length;s++){var l=a[s];this.formatMap.has(l)?r.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),N3=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function w(y){try{p(s.next(y))}catch(v){h(v)}}function g(y){try{p(s.throw(y))}catch(v){h(v)}}function p(y){y.done?l(y.value):a(y.value).then(w,g)}p((s=s.apply(t,e||[])).next())})},O3=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function w(p){return function(y){return g([p,y])}}function g(p){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){r.label=p[1];break}if(p[0]===6&&r.label<l[1]){r.label=l[1],l=p;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(p);break}l[2]&&r.ops.pop(),r.trys.pop();continue}p=e.call(t,r)}catch(y){p=[6,y],a=0}finally{s=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},H0=function(){function t(e,r,s){if(this.formatMap=new Map([[ge.QR_CODE,"qr_code"],[ge.AZTEC,"aztec"],[ge.CODABAR,"codabar"],[ge.CODE_39,"code_39"],[ge.CODE_93,"code_93"],[ge.CODE_128,"code_128"],[ge.DATA_MATRIX,"data_matrix"],[ge.ITF,"itf"],[ge.EAN_13,"ean_13"],[ge.EAN_8,"ean_8"],[ge.PDF_417,"pdf417"],[ge.UPC_A,"upc_a"],[ge.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=s;var a=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return N3(this,void 0,void 0,function(){var r,s;return O3(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=a.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return s=this.selectLargestBarcode(r),[2,{text:s.rawValue,format:Mm.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var r=null,s=0,a=0,l=e;a<l.length;a++){var h=l[a],w=h.boundingBox.width*h.boundingBox.height;w>s&&(s=w,r=h)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],s=0,a=e;s<a.length;s++){var l=a[s];this.formatMap.has(l)?r.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,s,a){e.set(r,s)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),G0=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function w(y){try{p(s.next(y))}catch(v){h(v)}}function g(y){try{p(s.throw(y))}catch(v){h(v)}}function p(y){y.done?l(y.value):a(y.value).then(w,g)}p((s=s.apply(t,e||[])).next())})},X0=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function w(p){return function(y){return g([p,y])}}function g(p){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){r.label=p[1];break}if(p[0]===6&&r.label<l[1]){r.label=l[1],l=p;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(p);break}l[2]&&r.ops.pop(),r.trys.pop();continue}p=e.call(t,r)}catch(y){p=[6,y],a=0}finally{s=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},k3=function(){function t(e,r,s,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=s,r&&H0.isSupported()?(this.primaryDecoder=new H0(e,s,a),this.secondaryDecoder=new W0(e,s,a)):this.primaryDecoder=new W0(e,s,a)}return t.prototype.decodeAsync=function(e){return G0(this,void 0,void 0,function(){var r;return X0(this,function(s){switch(s.label){case 0:r=performance.now(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,s.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return G0(this,void 0,void 0,function(){var r,s;return X0(this,function(a){switch(a.label){case 0:r=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,a.sent()];case 3:if(s=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw s;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,s=this.executionResults;r<s.length;r++){var a=s[r];e+=a}var l=e/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Ih=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function s(){this.constructor=e}e.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),Dl=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function w(y){try{p(s.next(y))}catch(v){h(v)}}function g(y){try{p(s.throw(y))}catch(v){h(v)}}function p(y){y.done?l(y.value):a(y.value).then(w,g)}p((s=s.apply(t,e||[])).next())})},Ml=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function w(p){return function(y){return g([p,y])}}function g(p){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){r.label=p[1];break}if(p[0]===6&&r.label<l[1]){r.label=l[1],l=p;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(p);break}l[2]&&r.ops.pop(),r.trys.pop();continue}p=e.call(t,r)}catch(y){p=[6,y],a=0}finally{s=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Bm=function(){function t(e,r){this.name=e,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var r={};r[this.name]=e;var s={advanced:[r]};return this.track.applyConstraints(s)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},t}(),P3=function(t){Ih(e,t);function e(r,s){return t.call(this,r,s)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var s={};s[this.name]=r;var a={advanced:[s]};return this.track.applyConstraints(a)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),s=r[this.name];return{min:s.min,max:s.max,step:s.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(Bm),D3=function(t){Ih(e,t);function e(r){return t.call(this,"zoom",r)||this}return e}(P3),M3=function(t){Ih(e,t);function e(r){return t.call(this,"torch",r)||this}return e}(Bm),L3=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new D3(this.track)},t.prototype.torchFeature=function(){return new M3(this.track)},t}(),B3=function(){function t(e,r,s){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=s,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var s=e.surface.clientWidth,a=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(s,a),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,r,s,a){return Dl(this,void 0,void 0,function(){var l,h;return Ml(this,function(w){switch(w.label){case 0:return l=new t(e,r,a),s.aspectRatio?(h={aspectRatio:s.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(h)]):[3,2];case 1:w.sent(),w.label=2;case 2:return l.setupSurface(),[2,l]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var r=this,s=function(){setTimeout(e,200),r.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Dl(this,void 0,void 0,function(){return Ml(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,s){var a=e.mediaStream.getVideoTracks(),l=a.length,h=0;e.mediaStream.getVideoTracks().forEach(function(w){e.mediaStream.removeTrack(w),w.stop(),++h,h>=l&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},t.prototype.getCapabilities=function(){return new L3(this.getFirstTrackOrFail())},t}(),F3=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,r,s){return Dl(this,void 0,void 0,function(){return Ml(this,function(a){return[2,B3.create(e,this.mediaStream,r,s)]})})},t.create=function(e){return Dl(this,void 0,void 0,function(){var r,s;return Ml(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return s=a.sent(),[2,new t(s)]}})})},t}(),$0=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function w(y){try{p(s.next(y))}catch(v){h(v)}}function g(y){try{p(s.throw(y))}catch(v){h(v)}}function p(y){y.done?l(y.value):a(y.value).then(w,g)}p((s=s.apply(t,e||[])).next())})},K0=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function w(p){return function(y){return g([p,y])}}function g(p){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){r.label=p[1];break}if(p[0]===6&&r.label<l[1]){r.label=l[1],l=p;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(p);break}l[2]&&r.ops.pop(),r.trys.pop();continue}p=e.call(t,r)}catch(y){p=[6,y],a=0}finally{s=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},j3=function(){function t(){}return t.failIfNotSupported=function(){return $0(this,void 0,void 0,function(){return K0(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return $0(this,void 0,void 0,function(){return K0(this,function(r){return[2,F3.create(e)]})})},t}(),U3=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function w(y){try{p(s.next(y))}catch(v){h(v)}}function g(y){try{p(s.throw(y))}catch(v){h(v)}}function p(y){y.done?l(y.value):a(y.value).then(w,g)}p((s=s.apply(t,e||[])).next())})},V3=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function w(p){return function(y){return g([p,y])}}function g(p){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){r.label=p[1];break}if(p[0]===6&&r.label<l[1]){r.label=l[1],l=p;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(p);break}l[2]&&r.ops.pop(),r.trys.pop();continue}p=e.call(t,r)}catch(y){p=[6,y],a=0}finally{s=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},z3=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=_s.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=_s.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return U3(this,void 0,void 0,function(){var e,r,s,a,l,h,w;return V3(this,function(g){switch(g.label){case 0:return e=function(p){for(var y=p.getVideoTracks(),v=0,_=y;v<_.length;v++){var T=_[v];T.enabled=!1,T.stop(),p.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=g.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(s=g.sent(),a=[],l=0,h=s;l<h.length;l++)w=h[l],w.kind==="videoinput"&&a.push({id:w.deviceId,label:w.label});return e(r),[2,a]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var s=function(l){for(var h=[],w=0,g=l;w<g.length;w++){var p=g[w];p.kind==="video"&&h.push({id:p.id,label:p.label})}e(h)},a=MediaStreamTrack;a.getSources(s)})},t}(),bt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(bt||(bt={}));var W3=function(){function t(){this.state=bt.NOT_STARTED,this.onGoingTransactionNewState=bt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===bt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=bt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===bt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=bt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==bt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case bt.UNKNOWN:throw"Transition from unknown is not allowed";case bt.NOT_STARTED:this.failIfNewStateIs(e,[bt.PAUSED]);break;case bt.SCANNING:break;case bt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,r){for(var s=0,a=r;s<a.length;s++){var l=a[s];if(e===l)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),H3=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===bt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==bt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===bt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===bt.PAUSED},t}(),G3=function(){function t(){}return t.create=function(){return new H3(new W3)},t}(),X3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function s(){this.constructor=e}e.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),Ir=function(t){X3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(b3),$3=function(){function t(e,r){this.logger=r,this.fps=Ir.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Ir.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Lm.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!_n(this.qrbox)},t.create=function(e,r){return new t(e,r)},t}(),K3=function(){function t(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var s;typeof r=="boolean"?this.verbose=r===!0:r&&(s=r,this.verbose=s.verbose===!0,s.experimentalFeatures),this.logger=new I3(this.verbose),this.qrcode=new k3(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=G3.create()}return t.prototype.start=function(e,r,s,a){var l=this;if(!e)throw"cameraIdOrConfig is required";if(!s||typeof s!="function")throw"qrCodeSuccessCallback is required and should be a function.";var h;a?h=a:h=this.verbose?this.logger.log:function(){};var w=$3.create(r,this.logger);this.clearElement();var g=!1;w.videoConstraints&&(w.isMediaStreamConstraintsValid()?g=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=g,y=document.getElementById(this.elementId);y.clientWidth?y.clientWidth:Ir.DEFAULT_WIDTH,y.style.position="relative",this.shouldScan=!0,this.element=y;var v=this,_=this.stateManagerProxy.startTransition(bt.SCANNING);return new Promise(function(T,N){var B=p?w.videoConstraints:v.createVideoConstraints(e);if(!B){_.cancel(),N("videoConstraints should be defined");return}var F={};(!p||w.aspectRatio)&&(F.aspectRatio=w.aspectRatio);var k={onRenderSurfaceReady:function(I,b){v.setupUi(I,b,w),v.isScanning=!0,v.foreverScan(w,s,h)}};j3.failIfNotSupported().then(function(I){I.create(B).then(function(b){return b.render(l.element,F,k).then(function(P){v.renderedCamera=P,_.execute(),T(null)}).catch(function(P){_.cancel(),N(P)})}).catch(function(b){_.cancel(),N(_s.errorGettingUserMedia(b))})}).catch(function(I){_.cancel(),N(_s.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(bt.PAUSED),this.showPausedState(),(_n(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(bt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(bt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=function(){if(e.element){var l=document.getElementById(Ir.SHADED_REGION_ELEMENT_ID);l&&e.element.removeChild(l)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),s(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),r.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(s){return s.decodedText})},t.prototype.scanFileV2=function(e,r){var s=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(_n(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,l){s.possiblyCloseLastScanImageFile(),s.clearElement(),s.lastScanImageFile=URL.createObjectURL(e);var h=new Image;h.onload=function(){var w=h.width,g=h.height,p=document.getElementById(s.elementId),y=p.clientWidth?p.clientWidth:Ir.DEFAULT_WIDTH,v=Math.max(p.clientHeight?p.clientHeight:g,Ir.FILE_SCAN_MIN_HEIGHT),_=s.computeCanvasDrawConfig(w,g,y,v);if(r){var T=s.createCanvasElement(y,v,"qr-canvas-visible");T.style.display="inline-block",p.appendChild(T);var N=T.getContext("2d");if(!N)throw"Unable to get 2d context from canvas";N.canvas.width=y,N.canvas.height=v,N.drawImage(h,0,0,w,g,_.x,_.y,_.width,_.height)}var B=Ir.FILE_SCAN_HIDDEN_CANVAS_PADDING,F=Math.max(h.width,_.width),k=Math.max(h.height,_.height),I=F+2*B,b=k+2*B,P=s.createCanvasElement(I,b);p.appendChild(P);var X=P.getContext("2d");if(!X)throw"Unable to get 2d context from canvas";X.canvas.width=I,X.canvas.height=b,X.drawImage(h,0,0,w,g,B,B,F,k);try{s.qrcode.decodeRobustlyAsync(P).then(function(G){a(z0.createFromQrcodeResult(G))}).catch(l)}catch(G){l("QR code parse error, error = ".concat(G))}},h.onerror=l,h.onabort=l,h.onstalled=l,h.onsuspend=l,h.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return z3.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!Lm.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var r=[ge.QR_CODE,ge.AZTEC,ge.CODABAR,ge.CODE_39,ge.CODE_93,ge.CODE_128,ge.DATA_MATRIX,ge.MAXICODE,ge.ITF,ge.EAN_13,ge.EAN_8,ge.PDF_417,ge.RSS_14,ge.RSS_EXPANDED,ge.UPC_A,ge.UPC_E,ge.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var s=[],a=0,l=e.formatsToSupport;a<l.length;a++){var h=l[a];A3(h)?s.push(h):this.logger.warn("Invalid format: ".concat(h," passed in config, ignoring."))}if(s.length===0)throw"None of formatsToSupport match supported values.";return s},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(_n(e))return!0;if(!_n(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(_n(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return _n(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,r,s){var a=this,l=s.qrbox;this.validateQrboxConfig(l);var h=this.toQrdimensions(e,r,l),w=function(p){if(p<Ir.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ir.MIN_QR_BOX_SIZE,"px.")},g=function(p){return p>e&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=e),p};w(h.width),w(h.height),h.width=g(h.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,r,s){if(typeof s=="number")return{width:s,height:s};if(typeof s=="function")try{return s(e,r)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return s},t.prototype.setupUi=function(e,r,s){s.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,s);var a=_n(s.qrbox)?{width:e,height:r}:s.qrbox;this.validateQrboxConfig(a);var l=this.toQrdimensions(e,r,a);l.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var h=s.isShadedBoxEnabled()&&l.height<=r,w={x:0,y:0,width:e,height:r},g=h?this.getShadedRegionBounds(e,r,l):w,p=this.createCanvasElement(g.width,g.height),y={willReadFrequently:!0},v=p.getContext("2d",y);v.canvas.width=g.width,v.canvas.height=g.height,this.element.append(p),h&&this.possiblyInsertShadingElement(this.element,e,r,l),this.createScannerPausedUiElement(this.element),this.qrRegion=g,this.context=v,this.canvasElement=p},t.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=_s.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(e,r){var s=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return e(a.text,z0.createFromQrcodeResult(a)),s.possiblyUpdateShaders(!0),!0}).catch(function(a){s.possiblyUpdateShaders(!1);var l=_s.codeParseError(a);return r(l,S3.createFrom(l)),!1})},t.prototype.foreverScan=function(e,r,s){var a=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),h=l.videoWidth/l.clientWidth,w=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var g=this.qrRegion.width*h,p=this.qrRegion.height*w,y=this.qrRegion.x*h,v=this.qrRegion.y*w;this.context.drawImage(l,y,v,g,p,0,0,this.qrRegion.width,this.qrRegion.height);var _=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(e,r,s)},a.getTimeoutFps(e.fps))};this.scanContext(r,s).then(function(T){!T&&e.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(r,s).finally(function(){_()})):_()}).catch(function(T){a.logger.logError("Error happend while scanning context",T),_()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",s="deviceId",a={user:!0,environment:!0},l="exact",h=function(N){if(N in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(N,"'")},w=Object.keys(e);if(w.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(w.length," keys");var g=Object.keys(e)[0];if(g!==r&&g!==s)throw"Only '".concat(r,"' and '").concat(s,"' ")+" are supported for 'cameraIdOrConfig'";if(g===r){var p=e.facingMode;if(typeof p=="string"){if(h(p))return{facingMode:p}}else if(typeof p=="object")if(l in p){if(h(p["".concat(l)]))return{facingMode:{exact:p["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var y=typeof p;throw"Invalid type of 'facingMode' = ".concat(y)}}else{var v=e.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(l in v)return{deviceId:{exact:v["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var _=typeof v;throw"Invalid type of 'deviceId' = ".concat(_)}}}var T=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(T)},t.prototype.computeCanvasDrawConfig=function(e,r,s,a){if(e<=s&&r<=a){var l=(s-e)/2,h=(a-r)/2;return{x:l,y:h,width:e,height:r}}else{var w=e,g=r;return e>s&&(r=s/e*r,e=s),r>a&&(e=a/r*e,r=a),this.logger.log("Image downsampled from "+"".concat(w,"X").concat(g)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,s,a)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?Ir.BORDER_SHADER_MATCH_COLOR:Ir.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,r,s){var a=e,l=r,h=document.createElement("canvas");return h.style.width="".concat(a,"px"),h.style.height="".concat(l,"px"),h.style.display="none",h.id=_n(s)?"qr-canvas":s,h},t.prototype.getShadedRegionBounds=function(e,r,s){if(s.width>e||s.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-s.width)/2,y:(r-s.height)/2,width:s.width,height:s.height}},t.prototype.possiblyInsertShadingElement=function(e,r,s,a){if(!(r-a.width<1||s-a.height<1)){var l=document.createElement("div");l.style.position="absolute";var h=(r-a.width)/2,w=(s-a.height)/2;if(l.style.borderLeft="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(Ir.SHADED_REGION_ELEMENT_ID),r-a.width<11||s-a.height<11)this.hasBorderShaders=!1;else{var g=5,p=40;this.insertShaderBorders(l,p,g,-g,null,0,!0),this.insertShaderBorders(l,p,g,-g,null,0,!1),this.insertShaderBorders(l,p,g,null,-g,0,!0),this.insertShaderBorders(l,p,g,null,-g,0,!1),this.insertShaderBorders(l,g,p+g,-g,null,-g,!0),this.insertShaderBorders(l,g,p+g,null,-g,-g,!0),this.insertShaderBorders(l,g,p+g,-g,null,-g,!1),this.insertShaderBorders(l,g,p+g,null,-g,-g,!1),this.hasBorderShaders=!0}e.append(l)}},t.prototype.insertShaderBorders=function(e,r,s,a,l,h,w){var g=document.createElement("div");g.style.position="absolute",g.style.backgroundColor=Ir.BORDER_SHADER_DEFAULT_COLOR,g.style.width="".concat(r,"px"),g.style.height="".concat(s,"px"),a!==null&&(g.style.top="".concat(a,"px")),l!==null&&(g.style.bottom="".concat(l,"px")),w?g.style.left="".concat(h,"px"):g.style.right="".concat(h,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(g),e.appendChild(g)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),q0;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(q0||(q0={}));function q3(){const[t,e]=Y.useState(null),[r,s]=Y.useState(!1),[a,l]=Y.useState(null),[h,w]=Y.useState([]),[g,p]=Y.useState({total:0,confirmados:0,presentes:0}),[y,v]=Y.useState(""),[_,T]=Y.useState([]),[N,B]=Y.useState("");Y.useEffect(()=>(F(),()=>{t&&t.clear()}),[]),Y.useEffect(()=>{N&&(k(),I())},[N]);const F=async()=>{try{const{data:R,error:z}=await Gt.from("eventos").select("*").order("created_at",{ascending:!1});if(z)throw z;T(R||[]);const J=localStorage.getItem("currentEventId");J&&(R!=null&&R.some(Z=>Z.id===J))?B(J):(R==null?void 0:R.length)>0&&B(R[0].id)}catch(R){console.error("Erro ao carregar eventos:",R),Be.error("Erro ao carregar eventos")}},k=async()=>{if(N)try{const{data:R,error:z}=await Gt.from("convidados").select("confirmado, checkin").eq("evento_id",N);if(z)throw z;const J={total:R.length,confirmados:R.filter(Z=>Z.confirmado).length,presentes:R.filter(Z=>Z.checkin).length};p(J)}catch(R){console.error("Erro ao carregar estatsticas:",R)}},I=async()=>{if(N)try{const{data:R,error:z}=await Gt.from("convidados").select("*").eq("evento_id",N).eq("checkin",!0).order("updated_at",{ascending:!1}).limit(10);if(z)throw z;w(R||[])}catch(R){console.error("Erro ao carregar histrico:",R)}},b=()=>{if(t)return;const R=new K3("qr-reader");R.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},X,G).then(()=>{e(R),s(!0)}).catch(z=>{console.error("Erro ao iniciar a cmara:",z),Be.error("No foi possvel iniciar a cmara")})},P=()=>{t&&t.stop().then(()=>{t.clear(),e(null),s(!1)}).catch(R=>console.error("Erro ao parar scanner:",R))},X=async R=>{try{const z=JSON.parse(R);if(!z.id){Be.error("QR Code invlido");return}await U(z.id)}catch(z){console.error("Erro ao processar QR code:",z),Be.error("QR Code invlido")}},G=R=>{console.log("QR scan failure:",R)},U=async R=>{try{const{data:z,error:J}=await Gt.from("convidados").select("*").eq("id",R).eq("evento_id",N).single();if(J||!z){Be.error("Convidado no encontrado neste evento");return}if(z.checkin){Be.warning(`${z.nome} j fez check-in anteriormente`),l({...z,alreadyCheckedIn:!0});return}const{error:Z}=await Gt.from("convidados").update({checkin:!0,updated_at:new Date().toISOString()}).eq("id",R);if(Z)throw Z;l({...z,alreadyCheckedIn:!1}),Be.success(` Check-in efetuado: ${z.nome}  Mesa ${z.mesa}`),k(),I(),navigator.vibrate&&navigator.vibrate(200)}catch(z){console.error("Erro ao fazer check-in:",z),Be.error("Erro ao processar check-in")}},M=async R=>{if(R.preventDefault(),!!y.trim())try{const{data:z,error:J}=await Gt.from("convidados").select("*").eq("evento_id",N).or(`nome.ilike.%${y}%,email.ilike.%${y}%`).limit(1).single();if(J||!z){Be.error("Convidado no encontrado");return}await U(z.id),v("")}catch(z){console.error("Erro no check-in manual:",z),Be.error("Erro ao processar check-in manual")}};return L.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[L.jsxs("div",{className:"flex items-center justify-between mb-4",children:[L.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Check-in de Convidados"}),_.length>0&&L.jsxs("select",{value:N,onChange:R=>B(R.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[L.jsx("option",{value:"",children:"Selecione um evento"}),_.map(R=>L.jsxs("option",{value:R.id,children:[R.nome," -"," ",new Date(R.data).toLocaleDateString("pt-PT")]},R.id))]})]}),L.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[L.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[L.jsx("p",{className:"text-3xl font-bold text-blue-600",children:g.total}),L.jsx("p",{className:"text-sm text-gray-600",children:"Total Convidados"})]}),L.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 text-center",children:[L.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:g.confirmados}),L.jsx("p",{className:"text-sm text-gray-600",children:"Confirmados"})]}),L.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[L.jsx("p",{className:"text-3xl font-bold text-green-600",children:g.presentes}),L.jsx("p",{className:"text-sm text-gray-600",children:"Presentes"})]})]})]}),N&&L.jsxs(L.Fragment,{children:[L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[L.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Scanner QR Code"}),L.jsx("div",{className:"text-center mb-4",children:r?L.jsx("button",{onClick:P,className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition",children:"Parar Scanner"}):L.jsx("button",{onClick:b,className:"bg-blue-600 text-white px-6 py-3 rounded-lg text-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50 transition",children:" Iniciar Scanner"})}),L.jsx("div",{id:"qr-reader",className:"mx-auto",style:{maxWidth:"500px",width:"100%"}}),a&&L.jsxs("div",{className:`mt-6 p-4 rounded-lg ${a.alreadyCheckedIn?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"} border`,children:[L.jsxs("p",{className:"font-medium text-gray-900 text-lg",children:[a.alreadyCheckedIn?"":""," ",a.nome]}),L.jsxs("p",{className:"text-gray-600",children:["Mesa ",a.mesa]}),a.alreadyCheckedIn&&L.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"J tinha feito check-in anteriormente"})]})]}),L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[L.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Check-in Manual"}),L.jsxs("form",{onSubmit:M,className:"flex gap-2",children:[L.jsx("input",{type:"text",value:y,onChange:R=>v(R.target.value),placeholder:"Nome ou email do convidado",className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),L.jsx("button",{type:"submit",className:"bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition",children:"Check-in"})]})]}),L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[L.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"ltimos Check-ins"}),h.length>0?L.jsx("div",{className:"space-y-2",children:h.map(R=>L.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[L.jsxs("div",{children:[L.jsx("p",{className:"font-medium text-gray-900",children:R.nome}),L.jsxs("p",{className:"text-sm text-gray-600",children:["Mesa ",R.mesa]})]}),L.jsx("span",{className:"text-sm text-gray-500",children:new Date(R.updated_at).toLocaleTimeString("pt-PT",{hour:"2-digit",minute:"2-digit"})})]},R.id))}):L.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhum check-in realizado ainda"})]})]})]})}function Y3(){const[t,e]=Y.useState([]),[r,s]=Y.useState(null),[a,l]=Y.useState([]),[h,w]=Y.useState({total:0,confirmados:0,presentes:0,pendentes:0}),[g,p]=Y.useState(!0),[y,v]=Y.useState("");Y.useEffect(()=>{_()},[]),Y.useEffect(()=>{r&&T()},[r]);const _=async()=>{try{const{data:P,error:X}=await Gt.from("eventos").select("*").order("created_at",{ascending:!1});if(X)throw X;if(e(P||[]),P&&P.length>0){const G=localStorage.getItem("currentEventId"),U=P.find(M=>M.id===G)||P[0];s(U)}}catch(P){console.error("Erro ao carregar eventos:",P),Be.error("Erro ao carregar eventos")}finally{p(!1)}},T=async()=>{if(r)try{const{data:P,error:X}=await Gt.from("convidados").select("*").eq("evento_id",r.id).order("nome");if(X)throw X;l(P||[]);const G={total:P.length,confirmados:P.filter(U=>U.confirmado).length,presentes:P.filter(U=>U.checkin).length,pendentes:P.filter(U=>!U.confirmado).length};w(G),localStorage.setItem("currentEventId",r.id)}catch(P){console.error("Erro ao carregar convidados:",P),Be.error("Erro ao carregar dados do evento")}},N=P=>{const X=t.find(G=>G.id===P);s(X)},B=async(P,X)=>{try{const{error:G}=await Gt.from("convidados").update({confirmado:!X}).eq("id",P);if(G)throw G;Be.success("Status atualizado"),T()}catch(G){console.error("Erro ao atualizar confirmao:",G),Be.error("Erro ao atualizar status")}},F=async(P,X)=>{try{const{error:G}=await Gt.from("convidados").update({checkin:!X}).eq("id",P);if(G)throw G;Be.success("Check-in atualizado"),T()}catch(G){console.error("Erro ao atualizar check-in:",G),Be.error("Erro ao atualizar check-in")}},k=async P=>{if(window.confirm("Tem a certeza que deseja remover este convidado?"))try{const{error:X}=await Gt.from("convidados").delete().eq("id",P);if(X)throw X;Be.success("Convidado removido"),T()}catch(X){console.error("Erro ao remover convidado:",X),Be.error("Erro ao remover convidado")}},I=()=>{if(a.length===0){Be.error("Nenhum convidado para exportar");return}const P=["Nome","Email","Mesa","Confirmado","Check-in"],X=a.map(z=>[z.nome,z.email,z.mesa,z.confirmado?"Sim":"No",z.checkin?"Sim":"No"]),G=[P.join(","),...X.map(z=>z.map(J=>`"${J}"`).join(","))].join(`
`),U=new Blob([G],{type:"text/csv;charset=utf-8;"}),M=document.createElement("a"),R=URL.createObjectURL(U);M.setAttribute("href",R),M.setAttribute("download",`convidados-${r.nome.replace(/\s+/g,"-")}.csv`),M.style.visibility="hidden",document.body.appendChild(M),M.click(),document.body.removeChild(M),Be.success("Ficheiro CSV exportado")},b=a.filter(P=>P.nome.toLowerCase().includes(y.toLowerCase())||P.email.toLowerCase().includes(y.toLowerCase())||P.mesa.toString().includes(y));return g?L.jsx("div",{className:"flex items-center justify-center h-64",children:L.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):L.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[L.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[L.jsxs("div",{className:"flex-1",children:[L.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Dashboard"}),t.length>0&&L.jsxs("select",{value:(r==null?void 0:r.id)||"",onChange:P=>N(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[L.jsx("option",{value:"",children:"Selecione um evento"}),t.map(P=>L.jsxs("option",{value:P.id,children:[P.nome," - ",new Date(P.data).toLocaleDateString("pt-PT")]},P.id))]})]}),r&&L.jsx("button",{onClick:I,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition",children:" Exportar CSV"})]}),r&&L.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[L.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[L.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total"}),L.jsx("p",{className:"text-2xl font-bold text-blue-900",children:h.total})]}),L.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[L.jsx("p",{className:"text-sm text-yellow-600 font-medium",children:"Confirmados"}),L.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:h.confirmados})]}),L.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[L.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Presentes"}),L.jsx("p",{className:"text-2xl font-bold text-green-900",children:h.presentes})]}),L.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[L.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Pendentes"}),L.jsx("p",{className:"text-2xl font-bold text-red-900",children:h.pendentes})]})]})]}),r&&L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[L.jsxs("div",{className:"flex justify-between items-center mb-6",children:[L.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lista de Convidados"}),L.jsx("input",{type:"text",placeholder:"Pesquisar...",value:y,onChange:P=>v(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),b.length>0?L.jsx("div",{className:"overflow-x-auto",children:L.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[L.jsx("thead",{className:"bg-gray-50",children:L.jsxs("tr",{children:[L.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nome"}),L.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),L.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Mesa"}),L.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Confirmado"}),L.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Check-in"}),L.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),L.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(P=>L.jsxs("tr",{className:"hover:bg-gray-50",children:[L.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:P.nome}),L.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:P.email}),L.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:P.mesa}),L.jsx("td",{className:"px-4 py-3 text-center",children:L.jsx("button",{onClick:()=>B(P.id,P.confirmado),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${P.confirmado?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"} hover:opacity-80 transition cursor-pointer`,children:P.confirmado?" Sim":"No"})}),L.jsx("td",{className:"px-4 py-3 text-center",children:L.jsx("button",{onClick:()=>F(P.id,P.checkin),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${P.checkin?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"} hover:opacity-80 transition cursor-pointer`,children:P.checkin?" Sim":"No"})}),L.jsx("td",{className:"px-4 py-3 text-center",children:L.jsxs("div",{className:"flex justify-center space-x-2",children:[L.jsx("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/confirmar?id=${P.id}`).then(()=>Be.success("Link copiado!")),className:"text-blue-600 hover:text-blue-900",title:"Copiar link",children:L.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),L.jsx("button",{onClick:()=>k(P.id),className:"text-red-600 hover:text-red-900",title:"Remover",children:L.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},P.id))})]})}):L.jsx("div",{className:"text-center py-8",children:L.jsx("p",{className:"text-gray-500",children:y?"Nenhum convidado encontrado com este termo de pesquisa":"Nenhum convidado adicionado ainda"})})]}),t.length===0&&L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[L.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),L.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nenhum evento criado"}),L.jsx("p",{className:"text-gray-600 mb-4",children:"Crie o seu primeiro evento para comear a gerir convidados."}),L.jsx("a",{href:"/",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:"Criar Evento"})]})]})}function Z3(){const t=zs(),e=!t.pathname.includes("/confirmar");return L.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e&&L.jsx("nav",{className:"bg-white shadow-sm border-b",children:L.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:L.jsxs("div",{className:"flex justify-between h-16",children:[L.jsxs("div",{className:"flex items-center space-x-8",children:[L.jsx(co,{to:"/",className:"text-xl font-semibold text-gray-900 hover:text-blue-600 transition",children:" Gestor de Eventos"}),L.jsxs("div",{className:"hidden sm:flex space-x-6",children:[L.jsx(co,{to:"/",className:`text-gray-600 hover:text-gray-900 px-3 py-2 text-sm font-medium transition ${t.pathname==="/"?"text-blue-600 border-b-2 border-blue-600":""}`,children:"Criar Evento"}),L.jsx(co,{to:"/upload",className:`text-gray-600 hover:text-gray-900 px-3 py-2 text-sm font-medium transition ${t.pathname==="/upload"?"text-blue-600 border-b-2 border-blue-600":""}`,children:"Upload Convidados"}),L.jsx(co,{to:"/checkin",className:`text-gray-600 hover:text-gray-900 px-3 py-2 text-sm font-medium transition ${t.pathname==="/checkin"?"text-blue-600 border-b-2 border-blue-600":""}`,children:"Check-in"}),L.jsx(co,{to:"/dashboard",className:`text-gray-600 hover:text-gray-900 px-3 py-2 text-sm font-medium transition ${t.pathname==="/dashboard"?"text-blue-600 border-b-2 border-blue-600":""}`,children:"Dashboard"})]})]}),L.jsx("div",{className:"sm:hidden flex items-center",children:L.jsx("button",{className:"text-gray-600 hover:text-gray-900 p-2",children:L.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})})}),L.jsx("main",{className:e?"py-8":"",children:L.jsxs(ky,{children:[L.jsx(as,{path:"/",element:L.jsx(e3,{})}),L.jsx(as,{path:"/upload",element:L.jsx(l3,{})}),L.jsx(as,{path:"/confirmar",element:L.jsx(C3,{})}),L.jsx(as,{path:"/checkin",element:L.jsx(q3,{})}),L.jsx(as,{path:"/dashboard",element:L.jsx(Y3,{})})]})})]})}ic.createRoot(document.getElementById("root")).render(L.jsx(en.StrictMode,{children:L.jsxs(Uy,{children:[L.jsx(Z3,{}),L.jsx(kv,{position:"top-right",toastOptions:{duration:3e3,style:{background:"#363636",color:"#fff"},success:{style:{background:"#10b981"}},error:{style:{background:"#ef4444"}}}})]})}));
//# sourceMappingURL=index-BSa0uFIn.js.map
