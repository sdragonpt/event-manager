function Ad(t,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();var fs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function O2(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var a=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:function(){return t[i]}})}),r}var l1={exports:{}},Vl={},u1={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ia=Symbol.for("react.element"),R2=Symbol.for("react.portal"),k2=Symbol.for("react.fragment"),M2=Symbol.for("react.strict_mode"),D2=Symbol.for("react.profiler"),P2=Symbol.for("react.provider"),L2=Symbol.for("react.context"),B2=Symbol.for("react.forward_ref"),j2=Symbol.for("react.suspense"),F2=Symbol.for("react.memo"),U2=Symbol.for("react.lazy"),Zh=Symbol.iterator;function z2(t){return t===null||typeof t!="object"?null:(t=Zh&&t[Zh]||t["@@iterator"],typeof t=="function"?t:null)}var c1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d1=Object.assign,h1={};function Gs(t,e,r){this.props=t,this.context=e,this.refs=h1,this.updater=r||c1}Gs.prototype.isReactComponent={};Gs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function f1(){}f1.prototype=Gs.prototype;function bd(t,e,r){this.props=t,this.context=e,this.refs=h1,this.updater=r||c1}var Id=bd.prototype=new f1;Id.constructor=bd;d1(Id,Gs.prototype);Id.isPureReactComponent=!0;var Jh=Array.isArray,g1=Object.prototype.hasOwnProperty,Td={current:null},p1={key:!0,ref:!0,__self:!0,__source:!0};function m1(t,e,r){var i,a={},l=null,h=null;if(e!=null)for(i in e.ref!==void 0&&(h=e.ref),e.key!==void 0&&(l=""+e.key),e)g1.call(e,i)&&!p1.hasOwnProperty(i)&&(a[i]=e[i]);var m=arguments.length-2;if(m===1)a.children=r;else if(1<m){for(var p=Array(m),g=0;g<m;g++)p[g]=arguments[g+2];a.children=p}if(t&&t.defaultProps)for(i in m=t.defaultProps,m)a[i]===void 0&&(a[i]=m[i]);return{$$typeof:ia,type:t,key:l,ref:h,props:a,_owner:Td.current}}function V2(t,e){return{$$typeof:ia,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Nd(t){return typeof t=="object"&&t!==null&&t.$$typeof===ia}function H2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var ef=/\/+/g;function Tu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?H2(""+t.key):e.toString(36)}function Ka(t,e,r,i,a){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var h=!1;if(t===null)h=!0;else switch(l){case"string":case"number":h=!0;break;case"object":switch(t.$$typeof){case ia:case R2:h=!0}}if(h)return h=t,a=a(h),t=i===""?"."+Tu(h,0):i,Jh(a)?(r="",t!=null&&(r=t.replace(ef,"$&/")+"/"),Ka(a,e,r,"",function(g){return g})):a!=null&&(Nd(a)&&(a=V2(a,r+(!a.key||h&&h.key===a.key?"":(""+a.key).replace(ef,"$&/")+"/")+t)),e.push(a)),1;if(h=0,i=i===""?".":i+":",Jh(t))for(var m=0;m<t.length;m++){l=t[m];var p=i+Tu(l,m);h+=Ka(l,e,r,p,a)}else if(p=z2(t),typeof p=="function")for(t=p.call(t),m=0;!(l=t.next()).done;)l=l.value,p=i+Tu(l,m++),h+=Ka(l,e,r,p,a);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return h}function Ea(t,e,r){if(t==null)return t;var i=[],a=0;return Ka(t,i,"","",function(l){return e.call(r,l,a++)}),i}function W2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gr={current:null},qa={transition:null},G2={ReactCurrentDispatcher:gr,ReactCurrentBatchConfig:qa,ReactCurrentOwner:Td};function w1(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:Ea,forEach:function(t,e,r){Ea(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Ea(t,function(){e++}),e},toArray:function(t){return Ea(t,function(e){return e})||[]},only:function(t){if(!Nd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Fe.Component=Gs;Fe.Fragment=k2;Fe.Profiler=D2;Fe.PureComponent=bd;Fe.StrictMode=M2;Fe.Suspense=j2;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G2;Fe.act=w1;Fe.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=d1({},t.props),a=t.key,l=t.ref,h=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,h=Td.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var m=t.type.defaultProps;for(p in e)g1.call(e,p)&&!p1.hasOwnProperty(p)&&(i[p]=e[p]===void 0&&m!==void 0?m[p]:e[p])}var p=arguments.length-2;if(p===1)i.children=r;else if(1<p){m=Array(p);for(var g=0;g<p;g++)m[g]=arguments[g+2];i.children=m}return{$$typeof:ia,type:t.type,key:a,ref:l,props:i,_owner:h}};Fe.createContext=function(t){return t={$$typeof:L2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:P2,_context:t},t.Consumer=t};Fe.createElement=m1;Fe.createFactory=function(t){var e=m1.bind(null,t);return e.type=t,e};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(t){return{$$typeof:B2,render:t}};Fe.isValidElement=Nd;Fe.lazy=function(t){return{$$typeof:U2,_payload:{_status:-1,_result:t},_init:W2}};Fe.memo=function(t,e){return{$$typeof:F2,type:t,compare:e===void 0?null:e}};Fe.startTransition=function(t){var e=qa.transition;qa.transition={};try{t()}finally{qa.transition=e}};Fe.unstable_act=w1;Fe.useCallback=function(t,e){return gr.current.useCallback(t,e)};Fe.useContext=function(t){return gr.current.useContext(t)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(t){return gr.current.useDeferredValue(t)};Fe.useEffect=function(t,e){return gr.current.useEffect(t,e)};Fe.useId=function(){return gr.current.useId()};Fe.useImperativeHandle=function(t,e,r){return gr.current.useImperativeHandle(t,e,r)};Fe.useInsertionEffect=function(t,e){return gr.current.useInsertionEffect(t,e)};Fe.useLayoutEffect=function(t,e){return gr.current.useLayoutEffect(t,e)};Fe.useMemo=function(t,e){return gr.current.useMemo(t,e)};Fe.useReducer=function(t,e,r){return gr.current.useReducer(t,e,r)};Fe.useRef=function(t){return gr.current.useRef(t)};Fe.useState=function(t){return gr.current.useState(t)};Fe.useSyncExternalStore=function(t,e,r){return gr.current.useSyncExternalStore(t,e,r)};Fe.useTransition=function(){return gr.current.useTransition()};Fe.version="18.3.1";u1.exports=Fe;var q=u1.exports;const nn=Sd(q),Y2=Ad({__proto__:null,default:nn},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X2=q,$2=Symbol.for("react.element"),K2=Symbol.for("react.fragment"),q2=Object.prototype.hasOwnProperty,Q2=X2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Z2={key:!0,ref:!0,__self:!0,__source:!0};function x1(t,e,r){var i,a={},l=null,h=null;r!==void 0&&(l=""+r),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(h=e.ref);for(i in e)q2.call(e,i)&&!Z2.hasOwnProperty(i)&&(a[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)a[i]===void 0&&(a[i]=e[i]);return{$$typeof:$2,type:t,key:l,ref:h,props:a,_owner:Q2.current}}Vl.Fragment=K2;Vl.jsx=x1;Vl.jsxs=x1;l1.exports=Vl;var B=l1.exports,cc={},y1={exports:{}},Br={},v1={exports:{}},E1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(re,te){var we=re.length;re.push(te);e:for(;0<we;){var me=we-1>>>1,ce=re[me];if(0<a(ce,te))re[me]=te,re[we]=ce,we=me;else break e}}function r(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var te=re[0],we=re.pop();if(we!==te){re[0]=we;e:for(var me=0,ce=re.length,he=ce>>>1;me<he;){var Re=2*(me+1)-1,et=re[Re],le=Re+1,Tt=re[le];if(0>a(et,we))le<ce&&0>a(Tt,et)?(re[me]=Tt,re[le]=we,me=le):(re[me]=et,re[Re]=we,me=Re);else if(le<ce&&0>a(Tt,we))re[me]=Tt,re[le]=we,me=le;else break e}}return te}function a(re,te){var we=re.sortIndex-te.sortIndex;return we!==0?we:re.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var h=Date,m=h.now();t.unstable_now=function(){return h.now()-m}}var p=[],g=[],y=1,v=null,C=3,T=!1,O=!1,L=!1,j=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(re){for(var te=r(g);te!==null;){if(te.callback===null)i(g);else if(te.startTime<=re)i(g),te.sortIndex=te.expirationTime,e(p,te);else break;te=r(g)}}function M(re){if(L=!1,S(re),!O)if(r(p)!==null)O=!0,ze(Y);else{var te=r(g);te!==null&&ae(M,te.startTime-re)}}function Y(re,te){O=!1,L&&(L=!1,R(P),P=-1),T=!0;var we=C;try{for(S(te),v=r(p);v!==null&&(!(v.expirationTime>te)||re&&!J());){var me=v.callback;if(typeof me=="function"){v.callback=null,C=v.priorityLevel;var ce=me(v.expirationTime<=te);te=t.unstable_now(),typeof ce=="function"?v.callback=ce:v===r(p)&&i(p),S(te)}else i(p);v=r(p)}if(v!==null)var he=!0;else{var Re=r(g);Re!==null&&ae(M,Re.startTime-te),he=!1}return he}finally{v=null,C=we,T=!1}}var G=!1,U=null,P=-1,N=5,V=-1;function J(){return!(t.unstable_now()-V<N)}function Q(){if(U!==null){var re=t.unstable_now();V=re;var te=!0;try{te=U(!0,re)}finally{te?ue():(G=!1,U=null)}}else G=!1}var ue;if(typeof b=="function")ue=function(){b(Q)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,K=Oe.port2;Oe.port1.onmessage=Q,ue=function(){K.postMessage(null)}}else ue=function(){j(Q,0)};function ze(re){U=re,G||(G=!0,ue())}function ae(re,te){P=j(function(){re(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(re){re.callback=null},t.unstable_continueExecution=function(){O||T||(O=!0,ze(Y))},t.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<re?Math.floor(1e3/re):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return r(p)},t.unstable_next=function(re){switch(C){case 1:case 2:case 3:var te=3;break;default:te=C}var we=C;C=te;try{return re()}finally{C=we}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(re,te){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var we=C;C=re;try{return te()}finally{C=we}},t.unstable_scheduleCallback=function(re,te,we){var me=t.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?me+we:me):we=me,re){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=we+ce,re={id:y++,callback:te,priorityLevel:re,startTime:we,expirationTime:ce,sortIndex:-1},we>me?(re.sortIndex=we,e(g,re),r(p)===null&&re===r(g)&&(L?(R(P),P=-1):L=!0,ae(M,we-me))):(re.sortIndex=ce,e(p,re),O||T||(O=!0,ze(Y))),re},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(re){var te=C;return function(){var we=C;C=te;try{return re.apply(this,arguments)}finally{C=we}}}})(E1);v1.exports=E1;var J2=v1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew=q,Lr=J2;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C1=new Set,Lo={};function $i(t,e){Bs(t,e),Bs(t+"Capture",e)}function Bs(t,e){for(Lo[t]=e,t=0;t<e.length;t++)C1.add(e[t])}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dc=Object.prototype.hasOwnProperty,tw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tf={},rf={};function rw(t){return dc.call(rf,t)?!0:dc.call(tf,t)?!1:tw.test(t)?rf[t]=!0:(tf[t]=!0,!1)}function nw(t,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iw(t,e,r,i){if(e===null||typeof e>"u"||nw(t,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pr(t,e,r,i,a,l,h){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=h}var rr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rr[t]=new pr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rr[e]=new pr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rr[t]=new pr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rr[t]=new pr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rr[t]=new pr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rr[t]=new pr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rr[t]=new pr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rr[t]=new pr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rr[t]=new pr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Od=/[\-:]([a-z])/g;function Rd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Od,Rd);rr[e]=new pr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Od,Rd);rr[e]=new pr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Od,Rd);rr[e]=new pr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rr[t]=new pr(t,1,!1,t.toLowerCase(),null,!1,!1)});rr.xlinkHref=new pr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rr[t]=new pr(t,1,!1,t.toLowerCase(),null,!0,!0)});function kd(t,e,r,i){var a=rr.hasOwnProperty(e)?rr[e]:null;(a!==null?a.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iw(e,r,a,i)&&(r=null),i||a===null?rw(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,i=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,i?t.setAttributeNS(i,e,r):t.setAttribute(e,r))))}var Fn=ew.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ca=Symbol.for("react.element"),ws=Symbol.for("react.portal"),xs=Symbol.for("react.fragment"),Md=Symbol.for("react.strict_mode"),hc=Symbol.for("react.profiler"),_1=Symbol.for("react.provider"),A1=Symbol.for("react.context"),Dd=Symbol.for("react.forward_ref"),fc=Symbol.for("react.suspense"),gc=Symbol.for("react.suspense_list"),Pd=Symbol.for("react.memo"),qn=Symbol.for("react.lazy"),S1=Symbol.for("react.offscreen"),nf=Symbol.iterator;function uo(t){return t===null||typeof t!="object"?null:(t=nf&&t[nf]||t["@@iterator"],typeof t=="function"?t:null)}var Ct=Object.assign,Nu;function yo(t){if(Nu===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Nu=e&&e[1]||""}return`
`+Nu+t}var Ou=!1;function Ru(t,e){if(!t||Ou)return"";Ou=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(g){var i=g}Reflect.construct(t,[],e)}else{try{e.call()}catch(g){i=g}t.call(e.prototype)}else{try{throw Error()}catch(g){i=g}t()}}catch(g){if(g&&i&&typeof g.stack=="string"){for(var a=g.stack.split(`
`),l=i.stack.split(`
`),h=a.length-1,m=l.length-1;1<=h&&0<=m&&a[h]!==l[m];)m--;for(;1<=h&&0<=m;h--,m--)if(a[h]!==l[m]){if(h!==1||m!==1)do if(h--,m--,0>m||a[h]!==l[m]){var p=`
`+a[h].replace(" at new "," at ");return t.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",t.displayName)),p}while(1<=h&&0<=m);break}}}finally{Ou=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?yo(t):""}function sw(t){switch(t.tag){case 5:return yo(t.type);case 16:return yo("Lazy");case 13:return yo("Suspense");case 19:return yo("SuspenseList");case 0:case 2:case 15:return t=Ru(t.type,!1),t;case 11:return t=Ru(t.type.render,!1),t;case 1:return t=Ru(t.type,!0),t;default:return""}}function pc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xs:return"Fragment";case ws:return"Portal";case hc:return"Profiler";case Md:return"StrictMode";case fc:return"Suspense";case gc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case A1:return(t.displayName||"Context")+".Consumer";case _1:return(t._context.displayName||"Context")+".Provider";case Dd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pd:return e=t.displayName||null,e!==null?e:pc(t.type)||"Memo";case qn:e=t._payload,t=t._init;try{return pc(t(e))}catch{}}return null}function ow(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pc(e);case 8:return e===Md?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function b1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aw(t){var e=b1(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(h){i=""+h,l.call(this,h)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(h){i=""+h},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _a(t){t._valueTracker||(t._valueTracker=aw(t))}function I1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return t&&(i=b1(t)?t.checked?"true":"false":t.value),t=i,t!==r?(e.setValue(t),!0):!1}function ll(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mc(t,e){var r=e.checked;return Ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function sf(t,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=gi(e.value!=null?e.value:r),t._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function T1(t,e){e=e.checked,e!=null&&kd(t,"checked",e,!1)}function wc(t,e){T1(t,e);var r=gi(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xc(t,e.type,r):e.hasOwnProperty("defaultValue")&&xc(t,e.type,gi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function of(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function xc(t,e,r){(e!=="number"||ll(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var vo=Array.isArray;function Os(t,e,r,i){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&i&&(t[r].defaultSelected=!0)}else{for(r=""+gi(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,i&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function yc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function af(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ne(92));if(vo(r)){if(1<r.length)throw Error(ne(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:gi(r)}}function N1(t,e){var r=gi(e.value),i=gi(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),i!=null&&(t.defaultValue=""+i)}function lf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function O1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?O1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Aa,R1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,i,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Aa=Aa||document.createElement("div"),Aa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Aa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bo(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var So={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lw=["Webkit","ms","Moz","O"];Object.keys(So).forEach(function(t){lw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),So[e]=So[t]})});function k1(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||So.hasOwnProperty(t)&&So[t]?(""+e).trim():e+"px"}function M1(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,a=k1(r,e[r],i);r==="float"&&(r="cssFloat"),i?t.setProperty(r,a):t[r]=a}}var uw=Ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ec(t,e){if(e){if(uw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function Cc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _c=null;function Ld(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ac=null,Rs=null,ks=null;function uf(t){if(t=aa(t)){if(typeof Ac!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=Xl(e),Ac(t.stateNode,t.type,e))}}function D1(t){Rs?ks?ks.push(t):ks=[t]:Rs=t}function P1(){if(Rs){var t=Rs,e=ks;if(ks=Rs=null,uf(t),e)for(t=0;t<e.length;t++)uf(e[t])}}function L1(t,e){return t(e)}function B1(){}var ku=!1;function j1(t,e,r){if(ku)return t(e,r);ku=!0;try{return L1(t,e,r)}finally{ku=!1,(Rs!==null||ks!==null)&&(B1(),P1())}}function jo(t,e){var r=t.stateNode;if(r===null)return null;var i=Xl(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ne(231,e,typeof r));return r}var Sc=!1;if(Dn)try{var co={};Object.defineProperty(co,"passive",{get:function(){Sc=!0}}),window.addEventListener("test",co,co),window.removeEventListener("test",co,co)}catch{Sc=!1}function cw(t,e,r,i,a,l,h,m,p){var g=Array.prototype.slice.call(arguments,3);try{e.apply(r,g)}catch(y){this.onError(y)}}var bo=!1,ul=null,cl=!1,bc=null,dw={onError:function(t){bo=!0,ul=t}};function hw(t,e,r,i,a,l,h,m,p){bo=!1,ul=null,cw.apply(dw,arguments)}function fw(t,e,r,i,a,l,h,m,p){if(hw.apply(this,arguments),bo){if(bo){var g=ul;bo=!1,ul=null}else throw Error(ne(198));cl||(cl=!0,bc=g)}}function Ki(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function F1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cf(t){if(Ki(t)!==t)throw Error(ne(188))}function gw(t){var e=t.alternate;if(!e){if(e=Ki(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var r=t,i=e;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(i=a.return,i!==null){r=i;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return cf(a),t;if(l===i)return cf(a),e;l=l.sibling}throw Error(ne(188))}if(r.return!==i.return)r=a,i=l;else{for(var h=!1,m=a.child;m;){if(m===r){h=!0,r=a,i=l;break}if(m===i){h=!0,i=a,r=l;break}m=m.sibling}if(!h){for(m=l.child;m;){if(m===r){h=!0,r=l,i=a;break}if(m===i){h=!0,i=l,r=a;break}m=m.sibling}if(!h)throw Error(ne(189))}}if(r.alternate!==i)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?t:e}function U1(t){return t=gw(t),t!==null?z1(t):null}function z1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=z1(t);if(e!==null)return e;t=t.sibling}return null}var V1=Lr.unstable_scheduleCallback,df=Lr.unstable_cancelCallback,pw=Lr.unstable_shouldYield,mw=Lr.unstable_requestPaint,Ot=Lr.unstable_now,ww=Lr.unstable_getCurrentPriorityLevel,Bd=Lr.unstable_ImmediatePriority,H1=Lr.unstable_UserBlockingPriority,dl=Lr.unstable_NormalPriority,xw=Lr.unstable_LowPriority,W1=Lr.unstable_IdlePriority,Hl=null,An=null;function yw(t){if(An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(Hl,t,void 0,(t.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:Cw,vw=Math.log,Ew=Math.LN2;function Cw(t){return t>>>=0,t===0?32:31-(vw(t)/Ew|0)|0}var Sa=64,ba=4194304;function Eo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hl(t,e){var r=t.pendingLanes;if(r===0)return 0;var i=0,a=t.suspendedLanes,l=t.pingedLanes,h=r&268435455;if(h!==0){var m=h&~a;m!==0?i=Eo(m):(l&=h,l!==0&&(i=Eo(l)))}else h=r&~a,h!==0?i=Eo(h):l!==0&&(i=Eo(l));if(i===0)return 0;if(e!==0&&e!==i&&!(e&a)&&(a=i&-i,l=e&-e,a>=l||a===16&&(l&4194240)!==0))return e;if(i&4&&(i|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)r=31-cn(e),a=1<<r,i|=t[r],e&=~a;return i}function _w(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Aw(t,e){for(var r=t.suspendedLanes,i=t.pingedLanes,a=t.expirationTimes,l=t.pendingLanes;0<l;){var h=31-cn(l),m=1<<h,p=a[h];p===-1?(!(m&r)||m&i)&&(a[h]=_w(m,e)):p<=e&&(t.expiredLanes|=m),l&=~m}}function Ic(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function G1(){var t=Sa;return Sa<<=1,!(Sa&4194240)&&(Sa=64),t}function Mu(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function sa(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cn(e),t[e]=r}function Sw(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-cn(r),l=1<<a;e[a]=0,i[a]=-1,t[a]=-1,r&=~l}}function jd(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var i=31-cn(r),a=1<<i;a&e|t[i]&e&&(t[i]|=e),r&=~a}}var Je=0;function Y1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var X1,Fd,$1,K1,q1,Tc=!1,Ia=[],si=null,oi=null,ai=null,Fo=new Map,Uo=new Map,Zn=[],bw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hf(t,e){switch(t){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":Fo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uo.delete(e.pointerId)}}function ho(t,e,r,i,a,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:l,targetContainers:[a]},e!==null&&(e=aa(e),e!==null&&Fd(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Iw(t,e,r,i,a){switch(e){case"focusin":return si=ho(si,t,e,r,i,a),!0;case"dragenter":return oi=ho(oi,t,e,r,i,a),!0;case"mouseover":return ai=ho(ai,t,e,r,i,a),!0;case"pointerover":var l=a.pointerId;return Fo.set(l,ho(Fo.get(l)||null,t,e,r,i,a)),!0;case"gotpointercapture":return l=a.pointerId,Uo.set(l,ho(Uo.get(l)||null,t,e,r,i,a)),!0}return!1}function Q1(t){var e=Li(t.target);if(e!==null){var r=Ki(e);if(r!==null){if(e=r.tag,e===13){if(e=F1(r),e!==null){t.blockedOn=e,q1(t.priority,function(){$1(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Nc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var i=new r.constructor(r.type,r);_c=i,r.target.dispatchEvent(i),_c=null}else return e=aa(r),e!==null&&Fd(e),t.blockedOn=r,!1;e.shift()}return!0}function ff(t,e,r){Qa(t)&&r.delete(e)}function Tw(){Tc=!1,si!==null&&Qa(si)&&(si=null),oi!==null&&Qa(oi)&&(oi=null),ai!==null&&Qa(ai)&&(ai=null),Fo.forEach(ff),Uo.forEach(ff)}function fo(t,e){t.blockedOn===e&&(t.blockedOn=null,Tc||(Tc=!0,Lr.unstable_scheduleCallback(Lr.unstable_NormalPriority,Tw)))}function zo(t){function e(a){return fo(a,t)}if(0<Ia.length){fo(Ia[0],t);for(var r=1;r<Ia.length;r++){var i=Ia[r];i.blockedOn===t&&(i.blockedOn=null)}}for(si!==null&&fo(si,t),oi!==null&&fo(oi,t),ai!==null&&fo(ai,t),Fo.forEach(e),Uo.forEach(e),r=0;r<Zn.length;r++)i=Zn[r],i.blockedOn===t&&(i.blockedOn=null);for(;0<Zn.length&&(r=Zn[0],r.blockedOn===null);)Q1(r),r.blockedOn===null&&Zn.shift()}var Ms=Fn.ReactCurrentBatchConfig,fl=!0;function Nw(t,e,r,i){var a=Je,l=Ms.transition;Ms.transition=null;try{Je=1,Ud(t,e,r,i)}finally{Je=a,Ms.transition=l}}function Ow(t,e,r,i){var a=Je,l=Ms.transition;Ms.transition=null;try{Je=4,Ud(t,e,r,i)}finally{Je=a,Ms.transition=l}}function Ud(t,e,r,i){if(fl){var a=Nc(t,e,r,i);if(a===null)Hu(t,e,i,gl,r),hf(t,i);else if(Iw(a,t,e,r,i))i.stopPropagation();else if(hf(t,i),e&4&&-1<bw.indexOf(t)){for(;a!==null;){var l=aa(a);if(l!==null&&X1(l),l=Nc(t,e,r,i),l===null&&Hu(t,e,i,gl,r),l===a)break;a=l}a!==null&&i.stopPropagation()}else Hu(t,e,i,null,r)}}var gl=null;function Nc(t,e,r,i){if(gl=null,t=Ld(i),t=Li(t),t!==null)if(e=Ki(t),e===null)t=null;else if(r=e.tag,r===13){if(t=F1(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gl=t,null}function Z1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ww()){case Bd:return 1;case H1:return 4;case dl:case xw:return 16;case W1:return 536870912;default:return 16}default:return 16}}var ri=null,zd=null,Za=null;function J1(){if(Za)return Za;var t,e=zd,r=e.length,i,a="value"in ri?ri.value:ri.textContent,l=a.length;for(t=0;t<r&&e[t]===a[t];t++);var h=r-t;for(i=1;i<=h&&e[r-i]===a[l-i];i++);return Za=a.slice(t,1<i?1-i:void 0)}function Ja(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ta(){return!0}function gf(){return!1}function jr(t){function e(r,i,a,l,h){this._reactName=r,this._targetInst=a,this.type=i,this.nativeEvent=l,this.target=h,this.currentTarget=null;for(var m in t)t.hasOwnProperty(m)&&(r=t[m],this[m]=r?r(l):l[m]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ta:gf,this.isPropagationStopped=gf,this}return Ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ta)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ta)},persist:function(){},isPersistent:Ta}),e}var Ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vd=jr(Ys),oa=Ct({},Ys,{view:0,detail:0}),Rw=jr(oa),Du,Pu,go,Wl=Ct({},oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==go&&(go&&t.type==="mousemove"?(Du=t.screenX-go.screenX,Pu=t.screenY-go.screenY):Pu=Du=0,go=t),Du)},movementY:function(t){return"movementY"in t?t.movementY:Pu}}),pf=jr(Wl),kw=Ct({},Wl,{dataTransfer:0}),Mw=jr(kw),Dw=Ct({},oa,{relatedTarget:0}),Lu=jr(Dw),Pw=Ct({},Ys,{animationName:0,elapsedTime:0,pseudoElement:0}),Lw=jr(Pw),Bw=Ct({},Ys,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jw=jr(Bw),Fw=Ct({},Ys,{data:0}),mf=jr(Fw),Uw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Vw[t])?!!e[t]:!1}function Hd(){return Hw}var Ww=Ct({},oa,{key:function(t){if(t.key){var e=Uw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ja(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hd,charCode:function(t){return t.type==="keypress"?Ja(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ja(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gw=jr(Ww),Yw=Ct({},Wl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wf=jr(Yw),Xw=Ct({},oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hd}),$w=jr(Xw),Kw=Ct({},Ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),qw=jr(Kw),Qw=Ct({},Wl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zw=jr(Qw),Jw=[9,13,27,32],Wd=Dn&&"CompositionEvent"in window,Io=null;Dn&&"documentMode"in document&&(Io=document.documentMode);var ex=Dn&&"TextEvent"in window&&!Io,eg=Dn&&(!Wd||Io&&8<Io&&11>=Io),xf=" ",yf=!1;function tg(t,e){switch(t){case"keyup":return Jw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ys=!1;function tx(t,e){switch(t){case"compositionend":return rg(e);case"keypress":return e.which!==32?null:(yf=!0,xf);case"textInput":return t=e.data,t===xf&&yf?null:t;default:return null}}function rx(t,e){if(ys)return t==="compositionend"||!Wd&&tg(t,e)?(t=J1(),Za=zd=ri=null,ys=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eg&&e.locale!=="ko"?null:e.data;default:return null}}var nx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nx[t.type]:e==="textarea"}function ng(t,e,r,i){D1(i),e=pl(e,"onChange"),0<e.length&&(r=new Vd("onChange","change",null,r,i),t.push({event:r,listeners:e}))}var To=null,Vo=null;function ix(t){gg(t,0)}function Gl(t){var e=Cs(t);if(I1(e))return t}function sx(t,e){if(t==="change")return e}var ig=!1;if(Dn){var Bu;if(Dn){var ju="oninput"in document;if(!ju){var Ef=document.createElement("div");Ef.setAttribute("oninput","return;"),ju=typeof Ef.oninput=="function"}Bu=ju}else Bu=!1;ig=Bu&&(!document.documentMode||9<document.documentMode)}function Cf(){To&&(To.detachEvent("onpropertychange",sg),Vo=To=null)}function sg(t){if(t.propertyName==="value"&&Gl(Vo)){var e=[];ng(e,Vo,t,Ld(t)),j1(ix,e)}}function ox(t,e,r){t==="focusin"?(Cf(),To=e,Vo=r,To.attachEvent("onpropertychange",sg)):t==="focusout"&&Cf()}function ax(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gl(Vo)}function lx(t,e){if(t==="click")return Gl(e)}function ux(t,e){if(t==="input"||t==="change")return Gl(e)}function cx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hn=typeof Object.is=="function"?Object.is:cx;function Ho(t,e){if(hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var a=r[i];if(!dc.call(e,a)||!hn(t[a],e[a]))return!1}return!0}function _f(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Af(t,e){var r=_f(t);t=0;for(var i;r;){if(r.nodeType===3){if(i=t+r.textContent.length,t<=e&&i>=e)return{node:r,offset:e-t};t=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=_f(r)}}function og(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?og(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ag(){for(var t=window,e=ll();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ll(t.document)}return e}function Gd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function dx(t){var e=ag(),r=t.focusedElem,i=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&og(r.ownerDocument.documentElement,r)){if(i!==null&&Gd(r)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,l=Math.min(i.start,a);i=i.end===void 0?l:Math.min(i.end,a),!t.extend&&l>i&&(a=i,i=l,l=a),a=Af(r,l);var h=Af(r,i);a&&h&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==h.node||t.focusOffset!==h.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),l>i?(t.addRange(e),t.extend(h.node,h.offset)):(e.setEnd(h.node,h.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hx=Dn&&"documentMode"in document&&11>=document.documentMode,vs=null,Oc=null,No=null,Rc=!1;function Sf(t,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Rc||vs==null||vs!==ll(i)||(i=vs,"selectionStart"in i&&Gd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),No&&Ho(No,i)||(No=i,i=pl(Oc,"onSelect"),0<i.length&&(e=new Vd("onSelect","select",null,e,r),t.push({event:e,listeners:i}),e.target=vs)))}function Na(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Es={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionend:Na("Transition","TransitionEnd")},Fu={},lg={};Dn&&(lg=document.createElement("div").style,"AnimationEvent"in window||(delete Es.animationend.animation,delete Es.animationiteration.animation,delete Es.animationstart.animation),"TransitionEvent"in window||delete Es.transitionend.transition);function Yl(t){if(Fu[t])return Fu[t];if(!Es[t])return t;var e=Es[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in lg)return Fu[t]=e[r];return t}var ug=Yl("animationend"),cg=Yl("animationiteration"),dg=Yl("animationstart"),hg=Yl("transitionend"),fg=new Map,bf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wi(t,e){fg.set(t,e),$i(e,[t])}for(var Uu=0;Uu<bf.length;Uu++){var zu=bf[Uu],fx=zu.toLowerCase(),gx=zu[0].toUpperCase()+zu.slice(1);wi(fx,"on"+gx)}wi(ug,"onAnimationEnd");wi(cg,"onAnimationIteration");wi(dg,"onAnimationStart");wi("dblclick","onDoubleClick");wi("focusin","onFocus");wi("focusout","onBlur");wi(hg,"onTransitionEnd");Bs("onMouseEnter",["mouseout","mouseover"]);Bs("onMouseLeave",["mouseout","mouseover"]);Bs("onPointerEnter",["pointerout","pointerover"]);Bs("onPointerLeave",["pointerout","pointerover"]);$i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$i("onBeforeInput",["compositionend","keypress","textInput","paste"]);$i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),px=new Set("cancel close invalid load scroll toggle".split(" ").concat(Co));function If(t,e,r){var i=t.type||"unknown-event";t.currentTarget=r,fw(i,e,void 0,t),t.currentTarget=null}function gg(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var i=t[r],a=i.event;i=i.listeners;e:{var l=void 0;if(e)for(var h=i.length-1;0<=h;h--){var m=i[h],p=m.instance,g=m.currentTarget;if(m=m.listener,p!==l&&a.isPropagationStopped())break e;If(a,m,g),l=p}else for(h=0;h<i.length;h++){if(m=i[h],p=m.instance,g=m.currentTarget,m=m.listener,p!==l&&a.isPropagationStopped())break e;If(a,m,g),l=p}}}if(cl)throw t=bc,cl=!1,bc=null,t}function ht(t,e){var r=e[Lc];r===void 0&&(r=e[Lc]=new Set);var i=t+"__bubble";r.has(i)||(pg(e,t,2,!1),r.add(i))}function Vu(t,e,r){var i=0;e&&(i|=4),pg(r,t,i,e)}var Oa="_reactListening"+Math.random().toString(36).slice(2);function Wo(t){if(!t[Oa]){t[Oa]=!0,C1.forEach(function(r){r!=="selectionchange"&&(px.has(r)||Vu(r,!1,t),Vu(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Oa]||(e[Oa]=!0,Vu("selectionchange",!1,e))}}function pg(t,e,r,i){switch(Z1(e)){case 1:var a=Nw;break;case 4:a=Ow;break;default:a=Ud}r=a.bind(null,e,r,t),a=void 0,!Sc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),i?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function Hu(t,e,r,i,a){var l=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var h=i.tag;if(h===3||h===4){var m=i.stateNode.containerInfo;if(m===a||m.nodeType===8&&m.parentNode===a)break;if(h===4)for(h=i.return;h!==null;){var p=h.tag;if((p===3||p===4)&&(p=h.stateNode.containerInfo,p===a||p.nodeType===8&&p.parentNode===a))return;h=h.return}for(;m!==null;){if(h=Li(m),h===null)return;if(p=h.tag,p===5||p===6){i=l=h;continue e}m=m.parentNode}}i=i.return}j1(function(){var g=l,y=Ld(r),v=[];e:{var C=fg.get(t);if(C!==void 0){var T=Vd,O=t;switch(t){case"keypress":if(Ja(r)===0)break e;case"keydown":case"keyup":T=Gw;break;case"focusin":O="focus",T=Lu;break;case"focusout":O="blur",T=Lu;break;case"beforeblur":case"afterblur":T=Lu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=pf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Mw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=$w;break;case ug:case cg:case dg:T=Lw;break;case hg:T=qw;break;case"scroll":T=Rw;break;case"wheel":T=Zw;break;case"copy":case"cut":case"paste":T=jw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=wf}var L=(e&4)!==0,j=!L&&t==="scroll",R=L?C!==null?C+"Capture":null:C;L=[];for(var b=g,S;b!==null;){S=b;var M=S.stateNode;if(S.tag===5&&M!==null&&(S=M,R!==null&&(M=jo(b,R),M!=null&&L.push(Go(b,M,S)))),j)break;b=b.return}0<L.length&&(C=new T(C,O,null,r,y),v.push({event:C,listeners:L}))}}if(!(e&7)){e:{if(C=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",C&&r!==_c&&(O=r.relatedTarget||r.fromElement)&&(Li(O)||O[Pn]))break e;if((T||C)&&(C=y.window===y?y:(C=y.ownerDocument)?C.defaultView||C.parentWindow:window,T?(O=r.relatedTarget||r.toElement,T=g,O=O?Li(O):null,O!==null&&(j=Ki(O),O!==j||O.tag!==5&&O.tag!==6)&&(O=null)):(T=null,O=g),T!==O)){if(L=pf,M="onMouseLeave",R="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(L=wf,M="onPointerLeave",R="onPointerEnter",b="pointer"),j=T==null?C:Cs(T),S=O==null?C:Cs(O),C=new L(M,b+"leave",T,r,y),C.target=j,C.relatedTarget=S,M=null,Li(y)===g&&(L=new L(R,b+"enter",O,r,y),L.target=S,L.relatedTarget=j,M=L),j=M,T&&O)t:{for(L=T,R=O,b=0,S=L;S;S=as(S))b++;for(S=0,M=R;M;M=as(M))S++;for(;0<b-S;)L=as(L),b--;for(;0<S-b;)R=as(R),S--;for(;b--;){if(L===R||R!==null&&L===R.alternate)break t;L=as(L),R=as(R)}L=null}else L=null;T!==null&&Tf(v,C,T,L,!1),O!==null&&j!==null&&Tf(v,j,O,L,!0)}}e:{if(C=g?Cs(g):window,T=C.nodeName&&C.nodeName.toLowerCase(),T==="select"||T==="input"&&C.type==="file")var Y=sx;else if(vf(C))if(ig)Y=ux;else{Y=ax;var G=ox}else(T=C.nodeName)&&T.toLowerCase()==="input"&&(C.type==="checkbox"||C.type==="radio")&&(Y=lx);if(Y&&(Y=Y(t,g))){ng(v,Y,r,y);break e}G&&G(t,C,g),t==="focusout"&&(G=C._wrapperState)&&G.controlled&&C.type==="number"&&xc(C,"number",C.value)}switch(G=g?Cs(g):window,t){case"focusin":(vf(G)||G.contentEditable==="true")&&(vs=G,Oc=g,No=null);break;case"focusout":No=Oc=vs=null;break;case"mousedown":Rc=!0;break;case"contextmenu":case"mouseup":case"dragend":Rc=!1,Sf(v,r,y);break;case"selectionchange":if(hx)break;case"keydown":case"keyup":Sf(v,r,y)}var U;if(Wd)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else ys?tg(t,r)&&(P="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(eg&&r.locale!=="ko"&&(ys||P!=="onCompositionStart"?P==="onCompositionEnd"&&ys&&(U=J1()):(ri=y,zd="value"in ri?ri.value:ri.textContent,ys=!0)),G=pl(g,P),0<G.length&&(P=new mf(P,t,null,r,y),v.push({event:P,listeners:G}),U?P.data=U:(U=rg(r),U!==null&&(P.data=U)))),(U=ex?tx(t,r):rx(t,r))&&(g=pl(g,"onBeforeInput"),0<g.length&&(y=new mf("onBeforeInput","beforeinput",null,r,y),v.push({event:y,listeners:g}),y.data=U))}gg(v,e)})}function Go(t,e,r){return{instance:t,listener:e,currentTarget:r}}function pl(t,e){for(var r=e+"Capture",i=[];t!==null;){var a=t,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=jo(t,r),l!=null&&i.unshift(Go(t,l,a)),l=jo(t,e),l!=null&&i.push(Go(t,l,a))),t=t.return}return i}function as(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tf(t,e,r,i,a){for(var l=e._reactName,h=[];r!==null&&r!==i;){var m=r,p=m.alternate,g=m.stateNode;if(p!==null&&p===i)break;m.tag===5&&g!==null&&(m=g,a?(p=jo(r,l),p!=null&&h.unshift(Go(r,p,m))):a||(p=jo(r,l),p!=null&&h.push(Go(r,p,m)))),r=r.return}h.length!==0&&t.push({event:e,listeners:h})}var mx=/\r\n?/g,wx=/\u0000|\uFFFD/g;function Nf(t){return(typeof t=="string"?t:""+t).replace(mx,`
`).replace(wx,"")}function Ra(t,e,r){if(e=Nf(e),Nf(t)!==e&&r)throw Error(ne(425))}function ml(){}var kc=null,Mc=null;function Dc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pc=typeof setTimeout=="function"?setTimeout:void 0,xx=typeof clearTimeout=="function"?clearTimeout:void 0,Of=typeof Promise=="function"?Promise:void 0,yx=typeof queueMicrotask=="function"?queueMicrotask:typeof Of<"u"?function(t){return Of.resolve(null).then(t).catch(vx)}:Pc;function vx(t){setTimeout(function(){throw t})}function Wu(t,e){var r=e,i=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(i===0){t.removeChild(a),zo(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=a}while(r);zo(e)}function li(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Rf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Xs=Math.random().toString(36).slice(2),Cn="__reactFiber$"+Xs,Yo="__reactProps$"+Xs,Pn="__reactContainer$"+Xs,Lc="__reactEvents$"+Xs,Ex="__reactListeners$"+Xs,Cx="__reactHandles$"+Xs;function Li(t){var e=t[Cn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Pn]||r[Cn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Rf(t);t!==null;){if(r=t[Cn])return r;t=Rf(t)}return e}t=r,r=t.parentNode}return null}function aa(t){return t=t[Cn]||t[Pn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Cs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function Xl(t){return t[Yo]||null}var Bc=[],_s=-1;function xi(t){return{current:t}}function gt(t){0>_s||(t.current=Bc[_s],Bc[_s]=null,_s--)}function ct(t,e){_s++,Bc[_s]=t.current,t.current=e}var pi={},lr=xi(pi),Ar=xi(!1),Vi=pi;function js(t,e){var r=t.type.contextTypes;if(!r)return pi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=e[l];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Sr(t){return t=t.childContextTypes,t!=null}function wl(){gt(Ar),gt(lr)}function kf(t,e,r){if(lr.current!==pi)throw Error(ne(168));ct(lr,e),ct(Ar,r)}function mg(t,e,r){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var a in i)if(!(a in e))throw Error(ne(108,ow(t)||"Unknown",a));return Ct({},r,i)}function xl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pi,Vi=lr.current,ct(lr,t),ct(Ar,Ar.current),!0}function Mf(t,e,r){var i=t.stateNode;if(!i)throw Error(ne(169));r?(t=mg(t,e,Vi),i.__reactInternalMemoizedMergedChildContext=t,gt(Ar),gt(lr),ct(lr,t)):gt(Ar),ct(Ar,r)}var Nn=null,$l=!1,Gu=!1;function wg(t){Nn===null?Nn=[t]:Nn.push(t)}function _x(t){$l=!0,wg(t)}function yi(){if(!Gu&&Nn!==null){Gu=!0;var t=0,e=Je;try{var r=Nn;for(Je=1;t<r.length;t++){var i=r[t];do i=i(!0);while(i!==null)}Nn=null,$l=!1}catch(a){throw Nn!==null&&(Nn=Nn.slice(t+1)),V1(Bd,yi),a}finally{Je=e,Gu=!1}}return null}var As=[],Ss=0,yl=null,vl=0,Gr=[],Yr=0,Hi=null,On=1,Rn="";function Oi(t,e){As[Ss++]=vl,As[Ss++]=yl,yl=t,vl=e}function xg(t,e,r){Gr[Yr++]=On,Gr[Yr++]=Rn,Gr[Yr++]=Hi,Hi=t;var i=On;t=Rn;var a=32-cn(i)-1;i&=~(1<<a),r+=1;var l=32-cn(e)+a;if(30<l){var h=a-a%5;l=(i&(1<<h)-1).toString(32),i>>=h,a-=h,On=1<<32-cn(e)+a|r<<a|i,Rn=l+t}else On=1<<l|r<<a|i,Rn=t}function Yd(t){t.return!==null&&(Oi(t,1),xg(t,1,0))}function Xd(t){for(;t===yl;)yl=As[--Ss],As[Ss]=null,vl=As[--Ss],As[Ss]=null;for(;t===Hi;)Hi=Gr[--Yr],Gr[Yr]=null,Rn=Gr[--Yr],Gr[Yr]=null,On=Gr[--Yr],Gr[Yr]=null}var Pr=null,Dr=null,wt=!1,un=null;function yg(t,e){var r=Xr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Df(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pr=t,Dr=li(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pr=t,Dr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Hi!==null?{id:On,overflow:Rn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Xr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Pr=t,Dr=null,!0):!1;default:return!1}}function jc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fc(t){if(wt){var e=Dr;if(e){var r=e;if(!Df(t,e)){if(jc(t))throw Error(ne(418));e=li(r.nextSibling);var i=Pr;e&&Df(t,e)?yg(i,r):(t.flags=t.flags&-4097|2,wt=!1,Pr=t)}}else{if(jc(t))throw Error(ne(418));t.flags=t.flags&-4097|2,wt=!1,Pr=t}}}function Pf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pr=t}function ka(t){if(t!==Pr)return!1;if(!wt)return Pf(t),wt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dc(t.type,t.memoizedProps)),e&&(e=Dr)){if(jc(t))throw vg(),Error(ne(418));for(;e;)yg(t,e),e=li(e.nextSibling)}if(Pf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Dr=li(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Dr=null}}else Dr=Pr?li(t.stateNode.nextSibling):null;return!0}function vg(){for(var t=Dr;t;)t=li(t.nextSibling)}function Fs(){Dr=Pr=null,wt=!1}function $d(t){un===null?un=[t]:un.push(t)}var Ax=Fn.ReactCurrentBatchConfig;function po(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var i=r.stateNode}if(!i)throw Error(ne(147,t));var a=i,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(h){var m=a.refs;h===null?delete m[l]:m[l]=h},e._stringRef=l,e)}if(typeof t!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,t))}return t}function Ma(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Lf(t){var e=t._init;return e(t._payload)}function Eg(t){function e(R,b){if(t){var S=R.deletions;S===null?(R.deletions=[b],R.flags|=16):S.push(b)}}function r(R,b){if(!t)return null;for(;b!==null;)e(R,b),b=b.sibling;return null}function i(R,b){for(R=new Map;b!==null;)b.key!==null?R.set(b.key,b):R.set(b.index,b),b=b.sibling;return R}function a(R,b){return R=hi(R,b),R.index=0,R.sibling=null,R}function l(R,b,S){return R.index=S,t?(S=R.alternate,S!==null?(S=S.index,S<b?(R.flags|=2,b):S):(R.flags|=2,b)):(R.flags|=1048576,b)}function h(R){return t&&R.alternate===null&&(R.flags|=2),R}function m(R,b,S,M){return b===null||b.tag!==6?(b=Zu(S,R.mode,M),b.return=R,b):(b=a(b,S),b.return=R,b)}function p(R,b,S,M){var Y=S.type;return Y===xs?y(R,b,S.props.children,M,S.key):b!==null&&(b.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===qn&&Lf(Y)===b.type)?(M=a(b,S.props),M.ref=po(R,b,S),M.return=R,M):(M=ol(S.type,S.key,S.props,null,R.mode,M),M.ref=po(R,b,S),M.return=R,M)}function g(R,b,S,M){return b===null||b.tag!==4||b.stateNode.containerInfo!==S.containerInfo||b.stateNode.implementation!==S.implementation?(b=Ju(S,R.mode,M),b.return=R,b):(b=a(b,S.children||[]),b.return=R,b)}function y(R,b,S,M,Y){return b===null||b.tag!==7?(b=zi(S,R.mode,M,Y),b.return=R,b):(b=a(b,S),b.return=R,b)}function v(R,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Zu(""+b,R.mode,S),b.return=R,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ca:return S=ol(b.type,b.key,b.props,null,R.mode,S),S.ref=po(R,null,b),S.return=R,S;case ws:return b=Ju(b,R.mode,S),b.return=R,b;case qn:var M=b._init;return v(R,M(b._payload),S)}if(vo(b)||uo(b))return b=zi(b,R.mode,S,null),b.return=R,b;Ma(R,b)}return null}function C(R,b,S,M){var Y=b!==null?b.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return Y!==null?null:m(R,b,""+S,M);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ca:return S.key===Y?p(R,b,S,M):null;case ws:return S.key===Y?g(R,b,S,M):null;case qn:return Y=S._init,C(R,b,Y(S._payload),M)}if(vo(S)||uo(S))return Y!==null?null:y(R,b,S,M,null);Ma(R,S)}return null}function T(R,b,S,M,Y){if(typeof M=="string"&&M!==""||typeof M=="number")return R=R.get(S)||null,m(b,R,""+M,Y);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Ca:return R=R.get(M.key===null?S:M.key)||null,p(b,R,M,Y);case ws:return R=R.get(M.key===null?S:M.key)||null,g(b,R,M,Y);case qn:var G=M._init;return T(R,b,S,G(M._payload),Y)}if(vo(M)||uo(M))return R=R.get(S)||null,y(b,R,M,Y,null);Ma(b,M)}return null}function O(R,b,S,M){for(var Y=null,G=null,U=b,P=b=0,N=null;U!==null&&P<S.length;P++){U.index>P?(N=U,U=null):N=U.sibling;var V=C(R,U,S[P],M);if(V===null){U===null&&(U=N);break}t&&U&&V.alternate===null&&e(R,U),b=l(V,b,P),G===null?Y=V:G.sibling=V,G=V,U=N}if(P===S.length)return r(R,U),wt&&Oi(R,P),Y;if(U===null){for(;P<S.length;P++)U=v(R,S[P],M),U!==null&&(b=l(U,b,P),G===null?Y=U:G.sibling=U,G=U);return wt&&Oi(R,P),Y}for(U=i(R,U);P<S.length;P++)N=T(U,R,P,S[P],M),N!==null&&(t&&N.alternate!==null&&U.delete(N.key===null?P:N.key),b=l(N,b,P),G===null?Y=N:G.sibling=N,G=N);return t&&U.forEach(function(J){return e(R,J)}),wt&&Oi(R,P),Y}function L(R,b,S,M){var Y=uo(S);if(typeof Y!="function")throw Error(ne(150));if(S=Y.call(S),S==null)throw Error(ne(151));for(var G=Y=null,U=b,P=b=0,N=null,V=S.next();U!==null&&!V.done;P++,V=S.next()){U.index>P?(N=U,U=null):N=U.sibling;var J=C(R,U,V.value,M);if(J===null){U===null&&(U=N);break}t&&U&&J.alternate===null&&e(R,U),b=l(J,b,P),G===null?Y=J:G.sibling=J,G=J,U=N}if(V.done)return r(R,U),wt&&Oi(R,P),Y;if(U===null){for(;!V.done;P++,V=S.next())V=v(R,V.value,M),V!==null&&(b=l(V,b,P),G===null?Y=V:G.sibling=V,G=V);return wt&&Oi(R,P),Y}for(U=i(R,U);!V.done;P++,V=S.next())V=T(U,R,P,V.value,M),V!==null&&(t&&V.alternate!==null&&U.delete(V.key===null?P:V.key),b=l(V,b,P),G===null?Y=V:G.sibling=V,G=V);return t&&U.forEach(function(Q){return e(R,Q)}),wt&&Oi(R,P),Y}function j(R,b,S,M){if(typeof S=="object"&&S!==null&&S.type===xs&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ca:e:{for(var Y=S.key,G=b;G!==null;){if(G.key===Y){if(Y=S.type,Y===xs){if(G.tag===7){r(R,G.sibling),b=a(G,S.props.children),b.return=R,R=b;break e}}else if(G.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===qn&&Lf(Y)===G.type){r(R,G.sibling),b=a(G,S.props),b.ref=po(R,G,S),b.return=R,R=b;break e}r(R,G);break}else e(R,G);G=G.sibling}S.type===xs?(b=zi(S.props.children,R.mode,M,S.key),b.return=R,R=b):(M=ol(S.type,S.key,S.props,null,R.mode,M),M.ref=po(R,b,S),M.return=R,R=M)}return h(R);case ws:e:{for(G=S.key;b!==null;){if(b.key===G)if(b.tag===4&&b.stateNode.containerInfo===S.containerInfo&&b.stateNode.implementation===S.implementation){r(R,b.sibling),b=a(b,S.children||[]),b.return=R,R=b;break e}else{r(R,b);break}else e(R,b);b=b.sibling}b=Ju(S,R.mode,M),b.return=R,R=b}return h(R);case qn:return G=S._init,j(R,b,G(S._payload),M)}if(vo(S))return O(R,b,S,M);if(uo(S))return L(R,b,S,M);Ma(R,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,b!==null&&b.tag===6?(r(R,b.sibling),b=a(b,S),b.return=R,R=b):(r(R,b),b=Zu(S,R.mode,M),b.return=R,R=b),h(R)):r(R,b)}return j}var Us=Eg(!0),Cg=Eg(!1),El=xi(null),Cl=null,bs=null,Kd=null;function qd(){Kd=bs=Cl=null}function Qd(t){var e=El.current;gt(El),t._currentValue=e}function Uc(t,e,r){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===r)break;t=t.return}}function Ds(t,e){Cl=t,Kd=bs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_r=!0),t.firstContext=null)}function Kr(t){var e=t._currentValue;if(Kd!==t)if(t={context:t,memoizedValue:e,next:null},bs===null){if(Cl===null)throw Error(ne(308));bs=t,Cl.dependencies={lanes:0,firstContext:t}}else bs=bs.next=t;return e}var Bi=null;function Zd(t){Bi===null?Bi=[t]:Bi.push(t)}function _g(t,e,r,i){var a=e.interleaved;return a===null?(r.next=r,Zd(e)):(r.next=a.next,a.next=r),e.interleaved=r,Ln(t,i)}function Ln(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Qn=!1;function Jd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ag(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ui(t,e,r){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ge&2){var a=i.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),i.pending=e,Ln(t,r)}return a=i.interleaved,a===null?(e.next=e,Zd(i)):(e.next=a.next,a.next=e),i.interleaved=e,Ln(t,r)}function el(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,jd(t,r)}}function Bf(t,e){var r=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var h={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=h:l=l.next=h,r=r.next}while(r!==null);l===null?a=l=e:l=l.next=e}else a=l=e;r={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:i.shared,effects:i.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function _l(t,e,r,i){var a=t.updateQueue;Qn=!1;var l=a.firstBaseUpdate,h=a.lastBaseUpdate,m=a.shared.pending;if(m!==null){a.shared.pending=null;var p=m,g=p.next;p.next=null,h===null?l=g:h.next=g,h=p;var y=t.alternate;y!==null&&(y=y.updateQueue,m=y.lastBaseUpdate,m!==h&&(m===null?y.firstBaseUpdate=g:m.next=g,y.lastBaseUpdate=p))}if(l!==null){var v=a.baseState;h=0,y=g=p=null,m=l;do{var C=m.lane,T=m.eventTime;if((i&C)===C){y!==null&&(y=y.next={eventTime:T,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var O=t,L=m;switch(C=e,T=r,L.tag){case 1:if(O=L.payload,typeof O=="function"){v=O.call(T,v,C);break e}v=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=L.payload,C=typeof O=="function"?O.call(T,v,C):O,C==null)break e;v=Ct({},v,C);break e;case 2:Qn=!0}}m.callback!==null&&m.lane!==0&&(t.flags|=64,C=a.effects,C===null?a.effects=[m]:C.push(m))}else T={eventTime:T,lane:C,tag:m.tag,payload:m.payload,callback:m.callback,next:null},y===null?(g=y=T,p=v):y=y.next=T,h|=C;if(m=m.next,m===null){if(m=a.shared.pending,m===null)break;C=m,m=C.next,C.next=null,a.lastBaseUpdate=C,a.shared.pending=null}}while(!0);if(y===null&&(p=v),a.baseState=p,a.firstBaseUpdate=g,a.lastBaseUpdate=y,e=a.shared.interleaved,e!==null){a=e;do h|=a.lane,a=a.next;while(a!==e)}else l===null&&(a.shared.lanes=0);Gi|=h,t.lanes=h,t.memoizedState=v}}function jf(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],a=i.callback;if(a!==null){if(i.callback=null,i=r,typeof a!="function")throw Error(ne(191,a));a.call(i)}}}var la={},Sn=xi(la),Xo=xi(la),$o=xi(la);function ji(t){if(t===la)throw Error(ne(174));return t}function eh(t,e){switch(ct($o,e),ct(Xo,t),ct(Sn,la),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vc(e,t)}gt(Sn),ct(Sn,e)}function zs(){gt(Sn),gt(Xo),gt($o)}function Sg(t){ji($o.current);var e=ji(Sn.current),r=vc(e,t.type);e!==r&&(ct(Xo,t),ct(Sn,r))}function th(t){Xo.current===t&&(gt(Sn),gt(Xo))}var vt=xi(0);function Al(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yu=[];function rh(){for(var t=0;t<Yu.length;t++)Yu[t]._workInProgressVersionPrimary=null;Yu.length=0}var tl=Fn.ReactCurrentDispatcher,Xu=Fn.ReactCurrentBatchConfig,Wi=0,Et=null,Ft=null,Gt=null,Sl=!1,Oo=!1,Ko=0,Sx=0;function sr(){throw Error(ne(321))}function nh(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!hn(t[r],e[r]))return!1;return!0}function ih(t,e,r,i,a,l){if(Wi=l,Et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tl.current=t===null||t.memoizedState===null?Nx:Ox,t=r(i,a),Oo){l=0;do{if(Oo=!1,Ko=0,25<=l)throw Error(ne(301));l+=1,Gt=Ft=null,e.updateQueue=null,tl.current=Rx,t=r(i,a)}while(Oo)}if(tl.current=bl,e=Ft!==null&&Ft.next!==null,Wi=0,Gt=Ft=Et=null,Sl=!1,e)throw Error(ne(300));return t}function sh(){var t=Ko!==0;return Ko=0,t}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Et.memoizedState=Gt=t:Gt=Gt.next=t,Gt}function qr(){if(Ft===null){var t=Et.alternate;t=t!==null?t.memoizedState:null}else t=Ft.next;var e=Gt===null?Et.memoizedState:Gt.next;if(e!==null)Gt=e,Ft=t;else{if(t===null)throw Error(ne(310));Ft=t,t={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Gt===null?Et.memoizedState=Gt=t:Gt=Gt.next=t}return Gt}function qo(t,e){return typeof e=="function"?e(t):e}function $u(t){var e=qr(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var i=Ft,a=i.baseQueue,l=r.pending;if(l!==null){if(a!==null){var h=a.next;a.next=l.next,l.next=h}i.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,i=i.baseState;var m=h=null,p=null,g=l;do{var y=g.lane;if((Wi&y)===y)p!==null&&(p=p.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),i=g.hasEagerState?g.eagerState:t(i,g.action);else{var v={lane:y,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};p===null?(m=p=v,h=i):p=p.next=v,Et.lanes|=y,Gi|=y}g=g.next}while(g!==null&&g!==l);p===null?h=i:p.next=m,hn(i,e.memoizedState)||(_r=!0),e.memoizedState=i,e.baseState=h,e.baseQueue=p,r.lastRenderedState=i}if(t=r.interleaved,t!==null){a=t;do l=a.lane,Et.lanes|=l,Gi|=l,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Ku(t){var e=qr(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var i=r.dispatch,a=r.pending,l=e.memoizedState;if(a!==null){r.pending=null;var h=a=a.next;do l=t(l,h.action),h=h.next;while(h!==a);hn(l,e.memoizedState)||(_r=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),r.lastRenderedState=l}return[l,i]}function bg(){}function Ig(t,e){var r=Et,i=qr(),a=e(),l=!hn(i.memoizedState,a);if(l&&(i.memoizedState=a,_r=!0),i=i.queue,oh(Og.bind(null,r,i,t),[t]),i.getSnapshot!==e||l||Gt!==null&&Gt.memoizedState.tag&1){if(r.flags|=2048,Qo(9,Ng.bind(null,r,i,a,e),void 0,null),Xt===null)throw Error(ne(349));Wi&30||Tg(r,e,a)}return a}function Tg(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Ng(t,e,r,i){e.value=r,e.getSnapshot=i,Rg(e)&&kg(t)}function Og(t,e,r){return r(function(){Rg(e)&&kg(t)})}function Rg(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!hn(t,r)}catch{return!0}}function kg(t){var e=Ln(t,1);e!==null&&dn(e,t,1,-1)}function Ff(t){var e=vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:t},e.queue=t,t=t.dispatch=Tx.bind(null,Et,t),[e.memoizedState,t]}function Qo(t,e,r,i){return t={tag:t,create:e,destroy:r,deps:i,next:null},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(i=r.next,r.next=t,t.next=i,e.lastEffect=t)),t}function Mg(){return qr().memoizedState}function rl(t,e,r,i){var a=vn();Et.flags|=t,a.memoizedState=Qo(1|e,r,void 0,i===void 0?null:i)}function Kl(t,e,r,i){var a=qr();i=i===void 0?null:i;var l=void 0;if(Ft!==null){var h=Ft.memoizedState;if(l=h.destroy,i!==null&&nh(i,h.deps)){a.memoizedState=Qo(e,r,l,i);return}}Et.flags|=t,a.memoizedState=Qo(1|e,r,l,i)}function Uf(t,e){return rl(8390656,8,t,e)}function oh(t,e){return Kl(2048,8,t,e)}function Dg(t,e){return Kl(4,2,t,e)}function Pg(t,e){return Kl(4,4,t,e)}function Lg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Bg(t,e,r){return r=r!=null?r.concat([t]):null,Kl(4,4,Lg.bind(null,e,t),r)}function ah(){}function jg(t,e){var r=qr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&nh(e,i[1])?i[0]:(r.memoizedState=[t,e],t)}function Fg(t,e){var r=qr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&nh(e,i[1])?i[0]:(t=t(),r.memoizedState=[t,e],t)}function Ug(t,e,r){return Wi&21?(hn(r,e)||(r=G1(),Et.lanes|=r,Gi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_r=!0),t.memoizedState=r)}function bx(t,e){var r=Je;Je=r!==0&&4>r?r:4,t(!0);var i=Xu.transition;Xu.transition={};try{t(!1),e()}finally{Je=r,Xu.transition=i}}function zg(){return qr().memoizedState}function Ix(t,e,r){var i=di(t);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},Vg(t))Hg(e,r);else if(r=_g(t,e,r,i),r!==null){var a=fr();dn(r,t,i,a),Wg(r,e,i)}}function Tx(t,e,r){var i=di(t),a={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(Vg(t))Hg(e,a);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var h=e.lastRenderedState,m=l(h,r);if(a.hasEagerState=!0,a.eagerState=m,hn(m,h)){var p=e.interleaved;p===null?(a.next=a,Zd(e)):(a.next=p.next,p.next=a),e.interleaved=a;return}}catch{}finally{}r=_g(t,e,a,i),r!==null&&(a=fr(),dn(r,t,i,a),Wg(r,e,i))}}function Vg(t){var e=t.alternate;return t===Et||e!==null&&e===Et}function Hg(t,e){Oo=Sl=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Wg(t,e,r){if(r&4194240){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,jd(t,r)}}var bl={readContext:Kr,useCallback:sr,useContext:sr,useEffect:sr,useImperativeHandle:sr,useInsertionEffect:sr,useLayoutEffect:sr,useMemo:sr,useReducer:sr,useRef:sr,useState:sr,useDebugValue:sr,useDeferredValue:sr,useTransition:sr,useMutableSource:sr,useSyncExternalStore:sr,useId:sr,unstable_isNewReconciler:!1},Nx={readContext:Kr,useCallback:function(t,e){return vn().memoizedState=[t,e===void 0?null:e],t},useContext:Kr,useEffect:Uf,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,rl(4194308,4,Lg.bind(null,e,t),r)},useLayoutEffect:function(t,e){return rl(4194308,4,t,e)},useInsertionEffect:function(t,e){return rl(4,2,t,e)},useMemo:function(t,e){var r=vn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var i=vn();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Ix.bind(null,Et,t),[i.memoizedState,t]},useRef:function(t){var e=vn();return t={current:t},e.memoizedState=t},useState:Ff,useDebugValue:ah,useDeferredValue:function(t){return vn().memoizedState=t},useTransition:function(){var t=Ff(!1),e=t[0];return t=bx.bind(null,t[1]),vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var i=Et,a=vn();if(wt){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=e(),Xt===null)throw Error(ne(349));Wi&30||Tg(i,e,r)}a.memoizedState=r;var l={value:r,getSnapshot:e};return a.queue=l,Uf(Og.bind(null,i,l,t),[t]),i.flags|=2048,Qo(9,Ng.bind(null,i,l,r,e),void 0,null),r},useId:function(){var t=vn(),e=Xt.identifierPrefix;if(wt){var r=Rn,i=On;r=(i&~(1<<32-cn(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ko++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Sx++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ox={readContext:Kr,useCallback:jg,useContext:Kr,useEffect:oh,useImperativeHandle:Bg,useInsertionEffect:Dg,useLayoutEffect:Pg,useMemo:Fg,useReducer:$u,useRef:Mg,useState:function(){return $u(qo)},useDebugValue:ah,useDeferredValue:function(t){var e=qr();return Ug(e,Ft.memoizedState,t)},useTransition:function(){var t=$u(qo)[0],e=qr().memoizedState;return[t,e]},useMutableSource:bg,useSyncExternalStore:Ig,useId:zg,unstable_isNewReconciler:!1},Rx={readContext:Kr,useCallback:jg,useContext:Kr,useEffect:oh,useImperativeHandle:Bg,useInsertionEffect:Dg,useLayoutEffect:Pg,useMemo:Fg,useReducer:Ku,useRef:Mg,useState:function(){return Ku(qo)},useDebugValue:ah,useDeferredValue:function(t){var e=qr();return Ft===null?e.memoizedState=t:Ug(e,Ft.memoizedState,t)},useTransition:function(){var t=Ku(qo)[0],e=qr().memoizedState;return[t,e]},useMutableSource:bg,useSyncExternalStore:Ig,useId:zg,unstable_isNewReconciler:!1};function sn(t,e){if(t&&t.defaultProps){e=Ct({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function zc(t,e,r,i){e=t.memoizedState,r=r(i,e),r=r==null?e:Ct({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ql={isMounted:function(t){return(t=t._reactInternals)?Ki(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var i=fr(),a=di(t),l=Mn(i,a);l.payload=e,r!=null&&(l.callback=r),e=ui(t,l,a),e!==null&&(dn(e,t,a,i),el(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var i=fr(),a=di(t),l=Mn(i,a);l.tag=1,l.payload=e,r!=null&&(l.callback=r),e=ui(t,l,a),e!==null&&(dn(e,t,a,i),el(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=fr(),i=di(t),a=Mn(r,i);a.tag=2,e!=null&&(a.callback=e),e=ui(t,a,i),e!==null&&(dn(e,t,i,r),el(e,t,i))}};function zf(t,e,r,i,a,l,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,l,h):e.prototype&&e.prototype.isPureReactComponent?!Ho(r,i)||!Ho(a,l):!0}function Gg(t,e,r){var i=!1,a=pi,l=e.contextType;return typeof l=="object"&&l!==null?l=Kr(l):(a=Sr(e)?Vi:lr.current,i=e.contextTypes,l=(i=i!=null)?js(t,a):pi),e=new e(r,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ql,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=l),e}function Vf(t,e,r,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==t&&ql.enqueueReplaceState(e,e.state,null)}function Vc(t,e,r,i){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},Jd(t);var l=e.contextType;typeof l=="object"&&l!==null?a.context=Kr(l):(l=Sr(e)?Vi:lr.current,a.context=js(t,l)),a.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(zc(t,e,l,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&ql.enqueueReplaceState(a,a.state,null),_l(t,r,a,i),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Vs(t,e){try{var r="",i=e;do r+=sw(i),i=i.return;while(i);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:a,digest:null}}function qu(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Hc(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var kx=typeof WeakMap=="function"?WeakMap:Map;function Yg(t,e,r){r=Mn(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){Tl||(Tl=!0,Jc=i),Hc(t,e)},r}function Xg(t,e,r){r=Mn(-1,r),r.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var a=e.value;r.payload=function(){return i(a)},r.callback=function(){Hc(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Hc(t,e),typeof i!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var h=e.stack;this.componentDidCatch(e.value,{componentStack:h!==null?h:""})}),r}function Hf(t,e,r){var i=t.pingCache;if(i===null){i=t.pingCache=new kx;var a=new Set;i.set(e,a)}else a=i.get(e),a===void 0&&(a=new Set,i.set(e,a));a.has(r)||(a.add(r),t=Yx.bind(null,t,e,r),e.then(t,t))}function Wf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gf(t,e,r,i,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Mn(-1,1),e.tag=2,ui(r,e,1))),r.lanes|=1),t)}var Mx=Fn.ReactCurrentOwner,_r=!1;function dr(t,e,r,i){e.child=t===null?Cg(e,null,r,i):Us(e,t.child,r,i)}function Yf(t,e,r,i,a){r=r.render;var l=e.ref;return Ds(e,a),i=ih(t,e,r,i,l,a),r=sh(),t!==null&&!_r?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Bn(t,e,a)):(wt&&r&&Yd(e),e.flags|=1,dr(t,e,i,a),e.child)}function Xf(t,e,r,i,a){if(t===null){var l=r.type;return typeof l=="function"&&!ph(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=l,$g(t,e,l,i,a)):(t=ol(r.type,null,i,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&a)){var h=l.memoizedProps;if(r=r.compare,r=r!==null?r:Ho,r(h,i)&&t.ref===e.ref)return Bn(t,e,a)}return e.flags|=1,t=hi(l,i),t.ref=e.ref,t.return=e,e.child=t}function $g(t,e,r,i,a){if(t!==null){var l=t.memoizedProps;if(Ho(l,i)&&t.ref===e.ref)if(_r=!1,e.pendingProps=i=l,(t.lanes&a)!==0)t.flags&131072&&(_r=!0);else return e.lanes=t.lanes,Bn(t,e,a)}return Wc(t,e,r,i,a)}function Kg(t,e,r){var i=e.pendingProps,a=i.children,l=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(Ts,Or),Or|=r;else{if(!(r&1073741824))return t=l!==null?l.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ct(Ts,Or),Or|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:r,ct(Ts,Or),Or|=i}else l!==null?(i=l.baseLanes|r,e.memoizedState=null):i=r,ct(Ts,Or),Or|=i;return dr(t,e,a,r),e.child}function qg(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Wc(t,e,r,i,a){var l=Sr(r)?Vi:lr.current;return l=js(e,l),Ds(e,a),r=ih(t,e,r,i,l,a),i=sh(),t!==null&&!_r?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Bn(t,e,a)):(wt&&i&&Yd(e),e.flags|=1,dr(t,e,r,a),e.child)}function $f(t,e,r,i,a){if(Sr(r)){var l=!0;xl(e)}else l=!1;if(Ds(e,a),e.stateNode===null)nl(t,e),Gg(e,r,i),Vc(e,r,i,a),i=!0;else if(t===null){var h=e.stateNode,m=e.memoizedProps;h.props=m;var p=h.context,g=r.contextType;typeof g=="object"&&g!==null?g=Kr(g):(g=Sr(r)?Vi:lr.current,g=js(e,g));var y=r.getDerivedStateFromProps,v=typeof y=="function"||typeof h.getSnapshotBeforeUpdate=="function";v||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(m!==i||p!==g)&&Vf(e,h,i,g),Qn=!1;var C=e.memoizedState;h.state=C,_l(e,i,h,a),p=e.memoizedState,m!==i||C!==p||Ar.current||Qn?(typeof y=="function"&&(zc(e,r,y,i),p=e.memoizedState),(m=Qn||zf(e,r,m,i,C,p,g))?(v||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(e.flags|=4194308)):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=p),h.props=i,h.state=p,h.context=g,i=m):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{h=e.stateNode,Ag(t,e),m=e.memoizedProps,g=e.type===e.elementType?m:sn(e.type,m),h.props=g,v=e.pendingProps,C=h.context,p=r.contextType,typeof p=="object"&&p!==null?p=Kr(p):(p=Sr(r)?Vi:lr.current,p=js(e,p));var T=r.getDerivedStateFromProps;(y=typeof T=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(m!==v||C!==p)&&Vf(e,h,i,p),Qn=!1,C=e.memoizedState,h.state=C,_l(e,i,h,a);var O=e.memoizedState;m!==v||C!==O||Ar.current||Qn?(typeof T=="function"&&(zc(e,r,T,i),O=e.memoizedState),(g=Qn||zf(e,r,g,i,C,O,p)||!1)?(y||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(i,O,p),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(i,O,p)),typeof h.componentDidUpdate=="function"&&(e.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof h.componentDidUpdate!="function"||m===t.memoizedProps&&C===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&C===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=O),h.props=i,h.state=O,h.context=p,i=g):(typeof h.componentDidUpdate!="function"||m===t.memoizedProps&&C===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&C===t.memoizedState||(e.flags|=1024),i=!1)}return Gc(t,e,r,i,l,a)}function Gc(t,e,r,i,a,l){qg(t,e);var h=(e.flags&128)!==0;if(!i&&!h)return a&&Mf(e,r,!1),Bn(t,e,l);i=e.stateNode,Mx.current=e;var m=h&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&h?(e.child=Us(e,t.child,null,l),e.child=Us(e,null,m,l)):dr(t,e,m,l),e.memoizedState=i.state,a&&Mf(e,r,!0),e.child}function Qg(t){var e=t.stateNode;e.pendingContext?kf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&kf(t,e.context,!1),eh(t,e.containerInfo)}function Kf(t,e,r,i,a){return Fs(),$d(a),e.flags|=256,dr(t,e,r,i),e.child}var Yc={dehydrated:null,treeContext:null,retryLane:0};function Xc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Zg(t,e,r){var i=e.pendingProps,a=vt.current,l=!1,h=(e.flags&128)!==0,m;if((m=h)||(m=t!==null&&t.memoizedState===null?!1:(a&2)!==0),m?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),ct(vt,a&1),t===null)return Fc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(h=i.children,t=i.fallback,l?(i=e.mode,l=e.child,h={mode:"hidden",children:h},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=h):l=Jl(h,i,0,null),t=zi(t,i,r,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=Xc(r),e.memoizedState=Yc,t):lh(e,h));if(a=t.memoizedState,a!==null&&(m=a.dehydrated,m!==null))return Dx(t,e,h,i,m,a,r);if(l){l=i.fallback,h=e.mode,a=t.child,m=a.sibling;var p={mode:"hidden",children:i.children};return!(h&1)&&e.child!==a?(i=e.child,i.childLanes=0,i.pendingProps=p,e.deletions=null):(i=hi(a,p),i.subtreeFlags=a.subtreeFlags&14680064),m!==null?l=hi(m,l):(l=zi(l,h,r,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,i=l,l=e.child,h=t.child.memoizedState,h=h===null?Xc(r):{baseLanes:h.baseLanes|r,cachePool:null,transitions:h.transitions},l.memoizedState=h,l.childLanes=t.childLanes&~r,e.memoizedState=Yc,i}return l=t.child,t=l.sibling,i=hi(l,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=i,e.memoizedState=null,i}function lh(t,e){return e=Jl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Da(t,e,r,i){return i!==null&&$d(i),Us(e,t.child,null,r),t=lh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Dx(t,e,r,i,a,l,h){if(r)return e.flags&256?(e.flags&=-257,i=qu(Error(ne(422))),Da(t,e,h,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=i.fallback,a=e.mode,i=Jl({mode:"visible",children:i.children},a,0,null),l=zi(l,a,h,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,e.mode&1&&Us(e,t.child,null,h),e.child.memoizedState=Xc(h),e.memoizedState=Yc,l);if(!(e.mode&1))return Da(t,e,h,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var m=i.dgst;return i=m,l=Error(ne(419)),i=qu(l,i,void 0),Da(t,e,h,i)}if(m=(h&t.childLanes)!==0,_r||m){if(i=Xt,i!==null){switch(h&-h){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|h)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Ln(t,a),dn(i,t,a,-1))}return gh(),i=qu(Error(ne(421))),Da(t,e,h,i)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Xx.bind(null,t),a._reactRetry=e,null):(t=l.treeContext,Dr=li(a.nextSibling),Pr=e,wt=!0,un=null,t!==null&&(Gr[Yr++]=On,Gr[Yr++]=Rn,Gr[Yr++]=Hi,On=t.id,Rn=t.overflow,Hi=e),e=lh(e,i.children),e.flags|=4096,e)}function qf(t,e,r){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Uc(t.return,e,r)}function Qu(t,e,r,i,a){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:a}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=r,l.tailMode=a)}function Jg(t,e,r){var i=e.pendingProps,a=i.revealOrder,l=i.tail;if(dr(t,e,i.children,r),i=vt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qf(t,r,e);else if(t.tag===19)qf(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ct(vt,i),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&Al(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),Qu(e,!1,a,r,l);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&Al(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}Qu(e,!0,r,null,l);break;case"together":Qu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Gi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,r=hi(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=hi(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Px(t,e,r){switch(e.tag){case 3:Qg(e),Fs();break;case 5:Sg(e);break;case 1:Sr(e.type)&&xl(e);break;case 4:eh(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,a=e.memoizedProps.value;ct(El,i._currentValue),i._currentValue=a;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ct(vt,vt.current&1),e.flags|=128,null):r&e.child.childLanes?Zg(t,e,r):(ct(vt,vt.current&1),t=Bn(t,e,r),t!==null?t.sibling:null);ct(vt,vt.current&1);break;case 19:if(i=(r&e.childLanes)!==0,t.flags&128){if(i)return Jg(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ct(vt,vt.current),i)break;return null;case 22:case 23:return e.lanes=0,Kg(t,e,r)}return Bn(t,e,r)}var ep,$c,tp,rp;ep=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};$c=function(){};tp=function(t,e,r,i){var a=t.memoizedProps;if(a!==i){t=e.stateNode,ji(Sn.current);var l=null;switch(r){case"input":a=mc(t,a),i=mc(t,i),l=[];break;case"select":a=Ct({},a,{value:void 0}),i=Ct({},i,{value:void 0}),l=[];break;case"textarea":a=yc(t,a),i=yc(t,i),l=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=ml)}Ec(r,i);var h;r=null;for(g in a)if(!i.hasOwnProperty(g)&&a.hasOwnProperty(g)&&a[g]!=null)if(g==="style"){var m=a[g];for(h in m)m.hasOwnProperty(h)&&(r||(r={}),r[h]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Lo.hasOwnProperty(g)?l||(l=[]):(l=l||[]).push(g,null));for(g in i){var p=i[g];if(m=a!=null?a[g]:void 0,i.hasOwnProperty(g)&&p!==m&&(p!=null||m!=null))if(g==="style")if(m){for(h in m)!m.hasOwnProperty(h)||p&&p.hasOwnProperty(h)||(r||(r={}),r[h]="");for(h in p)p.hasOwnProperty(h)&&m[h]!==p[h]&&(r||(r={}),r[h]=p[h])}else r||(l||(l=[]),l.push(g,r)),r=p;else g==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,m=m?m.__html:void 0,p!=null&&m!==p&&(l=l||[]).push(g,p)):g==="children"?typeof p!="string"&&typeof p!="number"||(l=l||[]).push(g,""+p):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Lo.hasOwnProperty(g)?(p!=null&&g==="onScroll"&&ht("scroll",t),l||m===p||(l=[])):(l=l||[]).push(g,p))}r&&(l=l||[]).push("style",r);var g=l;(e.updateQueue=g)&&(e.flags|=4)}};rp=function(t,e,r,i){r!==i&&(e.flags|=4)};function mo(t,e){if(!wt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function or(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,i=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=i,t.childLanes=r,e}function Lx(t,e,r){var i=e.pendingProps;switch(Xd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return or(e),null;case 1:return Sr(e.type)&&wl(),or(e),null;case 3:return i=e.stateNode,zs(),gt(Ar),gt(lr),rh(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ka(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,un!==null&&(rd(un),un=null))),$c(t,e),or(e),null;case 5:th(e);var a=ji($o.current);if(r=e.type,t!==null&&e.stateNode!=null)tp(t,e,r,i,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ne(166));return or(e),null}if(t=ji(Sn.current),ka(e)){i=e.stateNode,r=e.type;var l=e.memoizedProps;switch(i[Cn]=e,i[Yo]=l,t=(e.mode&1)!==0,r){case"dialog":ht("cancel",i),ht("close",i);break;case"iframe":case"object":case"embed":ht("load",i);break;case"video":case"audio":for(a=0;a<Co.length;a++)ht(Co[a],i);break;case"source":ht("error",i);break;case"img":case"image":case"link":ht("error",i),ht("load",i);break;case"details":ht("toggle",i);break;case"input":sf(i,l),ht("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},ht("invalid",i);break;case"textarea":af(i,l),ht("invalid",i)}Ec(r,l),a=null;for(var h in l)if(l.hasOwnProperty(h)){var m=l[h];h==="children"?typeof m=="string"?i.textContent!==m&&(l.suppressHydrationWarning!==!0&&Ra(i.textContent,m,t),a=["children",m]):typeof m=="number"&&i.textContent!==""+m&&(l.suppressHydrationWarning!==!0&&Ra(i.textContent,m,t),a=["children",""+m]):Lo.hasOwnProperty(h)&&m!=null&&h==="onScroll"&&ht("scroll",i)}switch(r){case"input":_a(i),of(i,l,!0);break;case"textarea":_a(i),lf(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=ml)}i=a,e.updateQueue=i,i!==null&&(e.flags|=4)}else{h=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=O1(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=h.createElement(r,{is:i.is}):(t=h.createElement(r),r==="select"&&(h=t,i.multiple?h.multiple=!0:i.size&&(h.size=i.size))):t=h.createElementNS(t,r),t[Cn]=e,t[Yo]=i,ep(t,e,!1,!1),e.stateNode=t;e:{switch(h=Cc(r,i),r){case"dialog":ht("cancel",t),ht("close",t),a=i;break;case"iframe":case"object":case"embed":ht("load",t),a=i;break;case"video":case"audio":for(a=0;a<Co.length;a++)ht(Co[a],t);a=i;break;case"source":ht("error",t),a=i;break;case"img":case"image":case"link":ht("error",t),ht("load",t),a=i;break;case"details":ht("toggle",t),a=i;break;case"input":sf(t,i),a=mc(t,i),ht("invalid",t);break;case"option":a=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},a=Ct({},i,{value:void 0}),ht("invalid",t);break;case"textarea":af(t,i),a=yc(t,i),ht("invalid",t);break;default:a=i}Ec(r,a),m=a;for(l in m)if(m.hasOwnProperty(l)){var p=m[l];l==="style"?M1(t,p):l==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&R1(t,p)):l==="children"?typeof p=="string"?(r!=="textarea"||p!=="")&&Bo(t,p):typeof p=="number"&&Bo(t,""+p):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Lo.hasOwnProperty(l)?p!=null&&l==="onScroll"&&ht("scroll",t):p!=null&&kd(t,l,p,h))}switch(r){case"input":_a(t),of(t,i,!1);break;case"textarea":_a(t),lf(t);break;case"option":i.value!=null&&t.setAttribute("value",""+gi(i.value));break;case"select":t.multiple=!!i.multiple,l=i.value,l!=null?Os(t,!!i.multiple,l,!1):i.defaultValue!=null&&Os(t,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=ml)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return or(e),null;case 6:if(t&&e.stateNode!=null)rp(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ne(166));if(r=ji($o.current),ji(Sn.current),ka(e)){if(i=e.stateNode,r=e.memoizedProps,i[Cn]=e,(l=i.nodeValue!==r)&&(t=Pr,t!==null))switch(t.tag){case 3:Ra(i.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ra(i.nodeValue,r,(t.mode&1)!==0)}l&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Cn]=e,e.stateNode=i}return or(e),null;case 13:if(gt(vt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wt&&Dr!==null&&e.mode&1&&!(e.flags&128))vg(),Fs(),e.flags|=98560,l=!1;else if(l=ka(e),i!==null&&i.dehydrated!==null){if(t===null){if(!l)throw Error(ne(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ne(317));l[Cn]=e}else Fs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;or(e),l=!1}else un!==null&&(rd(un),un=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||vt.current&1?zt===0&&(zt=3):gh())),e.updateQueue!==null&&(e.flags|=4),or(e),null);case 4:return zs(),$c(t,e),t===null&&Wo(e.stateNode.containerInfo),or(e),null;case 10:return Qd(e.type._context),or(e),null;case 17:return Sr(e.type)&&wl(),or(e),null;case 19:if(gt(vt),l=e.memoizedState,l===null)return or(e),null;if(i=(e.flags&128)!==0,h=l.rendering,h===null)if(i)mo(l,!1);else{if(zt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(h=Al(t),h!==null){for(e.flags|=128,mo(l,!1),i=h.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)l=r,t=i,l.flags&=14680066,h=l.alternate,h===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,t=h.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ct(vt,vt.current&1|2),e.child}t=t.sibling}l.tail!==null&&Ot()>Hs&&(e.flags|=128,i=!0,mo(l,!1),e.lanes=4194304)}else{if(!i)if(t=Al(h),t!==null){if(e.flags|=128,i=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),mo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!wt)return or(e),null}else 2*Ot()-l.renderingStartTime>Hs&&r!==1073741824&&(e.flags|=128,i=!0,mo(l,!1),e.lanes=4194304);l.isBackwards?(h.sibling=e.child,e.child=h):(r=l.last,r!==null?r.sibling=h:e.child=h,l.last=h)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Ot(),e.sibling=null,r=vt.current,ct(vt,i?r&1|2:r&1),e):(or(e),null);case 22:case 23:return fh(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Or&1073741824&&(or(e),e.subtreeFlags&6&&(e.flags|=8192)):or(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function Bx(t,e){switch(Xd(e),e.tag){case 1:return Sr(e.type)&&wl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zs(),gt(Ar),gt(lr),rh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return th(e),null;case 13:if(gt(vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));Fs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gt(vt),null;case 4:return zs(),null;case 10:return Qd(e.type._context),null;case 22:case 23:return fh(),null;case 24:return null;default:return null}}var Pa=!1,ar=!1,jx=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Is(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){It(t,e,i)}else r.current=null}function Kc(t,e,r){try{r()}catch(i){It(t,e,i)}}var Qf=!1;function Fx(t,e){if(kc=fl,t=ag(),Gd(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var a=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var h=0,m=-1,p=-1,g=0,y=0,v=t,C=null;t:for(;;){for(var T;v!==r||a!==0&&v.nodeType!==3||(m=h+a),v!==l||i!==0&&v.nodeType!==3||(p=h+i),v.nodeType===3&&(h+=v.nodeValue.length),(T=v.firstChild)!==null;)C=v,v=T;for(;;){if(v===t)break t;if(C===r&&++g===a&&(m=h),C===l&&++y===i&&(p=h),(T=v.nextSibling)!==null)break;v=C,C=v.parentNode}v=T}r=m===-1||p===-1?null:{start:m,end:p}}else r=null}r=r||{start:0,end:0}}else r=null;for(Mc={focusedElem:t,selectionRange:r},fl=!1,pe=e;pe!==null;)if(e=pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,pe=t;else for(;pe!==null;){e=pe;try{var O=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var L=O.memoizedProps,j=O.memoizedState,R=e.stateNode,b=R.getSnapshotBeforeUpdate(e.elementType===e.type?L:sn(e.type,L),j);R.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(M){It(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,pe=t;break}pe=e.return}return O=Qf,Qf=!1,O}function Ro(t,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&t)===t){var l=a.destroy;a.destroy=void 0,l!==void 0&&Kc(e,r,l)}a=a.next}while(a!==i)}}function Ql(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function qc(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function np(t){var e=t.alternate;e!==null&&(t.alternate=null,np(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cn],delete e[Yo],delete e[Lc],delete e[Ex],delete e[Cx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ip(t){return t.tag===5||t.tag===3||t.tag===4}function Zf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ip(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qc(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ml));else if(i!==4&&(t=t.child,t!==null))for(Qc(t,e,r),t=t.sibling;t!==null;)Qc(t,e,r),t=t.sibling}function Zc(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Zc(t,e,r),t=t.sibling;t!==null;)Zc(t,e,r),t=t.sibling}var er=null,an=!1;function Xn(t,e,r){for(r=r.child;r!==null;)sp(t,e,r),r=r.sibling}function sp(t,e,r){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(Hl,r)}catch{}switch(r.tag){case 5:ar||Is(r,e);case 6:var i=er,a=an;er=null,Xn(t,e,r),er=i,an=a,er!==null&&(an?(t=er,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):er.removeChild(r.stateNode));break;case 18:er!==null&&(an?(t=er,r=r.stateNode,t.nodeType===8?Wu(t.parentNode,r):t.nodeType===1&&Wu(t,r),zo(t)):Wu(er,r.stateNode));break;case 4:i=er,a=an,er=r.stateNode.containerInfo,an=!0,Xn(t,e,r),er=i,an=a;break;case 0:case 11:case 14:case 15:if(!ar&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var l=a,h=l.destroy;l=l.tag,h!==void 0&&(l&2||l&4)&&Kc(r,e,h),a=a.next}while(a!==i)}Xn(t,e,r);break;case 1:if(!ar&&(Is(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(m){It(r,e,m)}Xn(t,e,r);break;case 21:Xn(t,e,r);break;case 22:r.mode&1?(ar=(i=ar)||r.memoizedState!==null,Xn(t,e,r),ar=i):Xn(t,e,r);break;default:Xn(t,e,r)}}function Jf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new jx),e.forEach(function(i){var a=$x.bind(null,t,i);r.has(i)||(r.add(i),i.then(a,a))})}}function en(t,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var a=r[i];try{var l=t,h=e,m=h;e:for(;m!==null;){switch(m.tag){case 5:er=m.stateNode,an=!1;break e;case 3:er=m.stateNode.containerInfo,an=!0;break e;case 4:er=m.stateNode.containerInfo,an=!0;break e}m=m.return}if(er===null)throw Error(ne(160));sp(l,h,a),er=null,an=!1;var p=a.alternate;p!==null&&(p.return=null),a.return=null}catch(g){It(a,e,g)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)op(e,t),e=e.sibling}function op(t,e){var r=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(en(e,t),yn(t),i&4){try{Ro(3,t,t.return),Ql(3,t)}catch(L){It(t,t.return,L)}try{Ro(5,t,t.return)}catch(L){It(t,t.return,L)}}break;case 1:en(e,t),yn(t),i&512&&r!==null&&Is(r,r.return);break;case 5:if(en(e,t),yn(t),i&512&&r!==null&&Is(r,r.return),t.flags&32){var a=t.stateNode;try{Bo(a,"")}catch(L){It(t,t.return,L)}}if(i&4&&(a=t.stateNode,a!=null)){var l=t.memoizedProps,h=r!==null?r.memoizedProps:l,m=t.type,p=t.updateQueue;if(t.updateQueue=null,p!==null)try{m==="input"&&l.type==="radio"&&l.name!=null&&T1(a,l),Cc(m,h);var g=Cc(m,l);for(h=0;h<p.length;h+=2){var y=p[h],v=p[h+1];y==="style"?M1(a,v):y==="dangerouslySetInnerHTML"?R1(a,v):y==="children"?Bo(a,v):kd(a,y,v,g)}switch(m){case"input":wc(a,l);break;case"textarea":N1(a,l);break;case"select":var C=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var T=l.value;T!=null?Os(a,!!l.multiple,T,!1):C!==!!l.multiple&&(l.defaultValue!=null?Os(a,!!l.multiple,l.defaultValue,!0):Os(a,!!l.multiple,l.multiple?[]:"",!1))}a[Yo]=l}catch(L){It(t,t.return,L)}}break;case 6:if(en(e,t),yn(t),i&4){if(t.stateNode===null)throw Error(ne(162));a=t.stateNode,l=t.memoizedProps;try{a.nodeValue=l}catch(L){It(t,t.return,L)}}break;case 3:if(en(e,t),yn(t),i&4&&r!==null&&r.memoizedState.isDehydrated)try{zo(e.containerInfo)}catch(L){It(t,t.return,L)}break;case 4:en(e,t),yn(t);break;case 13:en(e,t),yn(t),a=t.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(dh=Ot())),i&4&&Jf(t);break;case 22:if(y=r!==null&&r.memoizedState!==null,t.mode&1?(ar=(g=ar)||y,en(e,t),ar=g):en(e,t),yn(t),i&8192){if(g=t.memoizedState!==null,(t.stateNode.isHidden=g)&&!y&&t.mode&1)for(pe=t,y=t.child;y!==null;){for(v=pe=y;pe!==null;){switch(C=pe,T=C.child,C.tag){case 0:case 11:case 14:case 15:Ro(4,C,C.return);break;case 1:Is(C,C.return);var O=C.stateNode;if(typeof O.componentWillUnmount=="function"){i=C,r=C.return;try{e=i,O.props=e.memoizedProps,O.state=e.memoizedState,O.componentWillUnmount()}catch(L){It(i,r,L)}}break;case 5:Is(C,C.return);break;case 22:if(C.memoizedState!==null){t0(v);continue}}T!==null?(T.return=C,pe=T):t0(v)}y=y.sibling}e:for(y=null,v=t;;){if(v.tag===5){if(y===null){y=v;try{a=v.stateNode,g?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(m=v.stateNode,p=v.memoizedProps.style,h=p!=null&&p.hasOwnProperty("display")?p.display:null,m.style.display=k1("display",h))}catch(L){It(t,t.return,L)}}}else if(v.tag===6){if(y===null)try{v.stateNode.nodeValue=g?"":v.memoizedProps}catch(L){It(t,t.return,L)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;y===v&&(y=null),v=v.return}y===v&&(y=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:en(e,t),yn(t),i&4&&Jf(t);break;case 21:break;default:en(e,t),yn(t)}}function yn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(ip(r)){var i=r;break e}r=r.return}throw Error(ne(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(Bo(a,""),i.flags&=-33);var l=Zf(t);Zc(t,l,a);break;case 3:case 4:var h=i.stateNode.containerInfo,m=Zf(t);Qc(t,m,h);break;default:throw Error(ne(161))}}catch(p){It(t,t.return,p)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ux(t,e,r){pe=t,ap(t)}function ap(t,e,r){for(var i=(t.mode&1)!==0;pe!==null;){var a=pe,l=a.child;if(a.tag===22&&i){var h=a.memoizedState!==null||Pa;if(!h){var m=a.alternate,p=m!==null&&m.memoizedState!==null||ar;m=Pa;var g=ar;if(Pa=h,(ar=p)&&!g)for(pe=a;pe!==null;)h=pe,p=h.child,h.tag===22&&h.memoizedState!==null?r0(a):p!==null?(p.return=h,pe=p):r0(a);for(;l!==null;)pe=l,ap(l),l=l.sibling;pe=a,Pa=m,ar=g}e0(t)}else a.subtreeFlags&8772&&l!==null?(l.return=a,pe=l):e0(t)}}function e0(t){for(;pe!==null;){var e=pe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ar||Ql(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ar)if(r===null)i.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:sn(e.type,r.memoizedProps);i.componentDidUpdate(a,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&jf(e,l,i);break;case 3:var h=e.updateQueue;if(h!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}jf(e,h,r)}break;case 5:var m=e.stateNode;if(r===null&&e.flags&4){r=m;var p=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&r.focus();break;case"img":p.src&&(r.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var g=e.alternate;if(g!==null){var y=g.memoizedState;if(y!==null){var v=y.dehydrated;v!==null&&zo(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}ar||e.flags&512&&qc(e)}catch(C){It(e,e.return,C)}}if(e===t){pe=null;break}if(r=e.sibling,r!==null){r.return=e.return,pe=r;break}pe=e.return}}function t0(t){for(;pe!==null;){var e=pe;if(e===t){pe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,pe=r;break}pe=e.return}}function r0(t){for(;pe!==null;){var e=pe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Ql(4,e)}catch(p){It(e,r,p)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var a=e.return;try{i.componentDidMount()}catch(p){It(e,a,p)}}var l=e.return;try{qc(e)}catch(p){It(e,l,p)}break;case 5:var h=e.return;try{qc(e)}catch(p){It(e,h,p)}}}catch(p){It(e,e.return,p)}if(e===t){pe=null;break}var m=e.sibling;if(m!==null){m.return=e.return,pe=m;break}pe=e.return}}var zx=Math.ceil,Il=Fn.ReactCurrentDispatcher,uh=Fn.ReactCurrentOwner,$r=Fn.ReactCurrentBatchConfig,Ge=0,Xt=null,kt=null,tr=0,Or=0,Ts=xi(0),zt=0,Zo=null,Gi=0,Zl=0,ch=0,ko=null,Cr=null,dh=0,Hs=1/0,In=null,Tl=!1,Jc=null,ci=null,La=!1,ni=null,Nl=0,Mo=0,ed=null,il=-1,sl=0;function fr(){return Ge&6?Ot():il!==-1?il:il=Ot()}function di(t){return t.mode&1?Ge&2&&tr!==0?tr&-tr:Ax.transition!==null?(sl===0&&(sl=G1()),sl):(t=Je,t!==0||(t=window.event,t=t===void 0?16:Z1(t.type)),t):1}function dn(t,e,r,i){if(50<Mo)throw Mo=0,ed=null,Error(ne(185));sa(t,r,i),(!(Ge&2)||t!==Xt)&&(t===Xt&&(!(Ge&2)&&(Zl|=r),zt===4&&Jn(t,tr)),br(t,i),r===1&&Ge===0&&!(e.mode&1)&&(Hs=Ot()+500,$l&&yi()))}function br(t,e){var r=t.callbackNode;Aw(t,e);var i=hl(t,t===Xt?tr:0);if(i===0)r!==null&&df(r),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(r!=null&&df(r),e===1)t.tag===0?_x(n0.bind(null,t)):wg(n0.bind(null,t)),yx(function(){!(Ge&6)&&yi()}),r=null;else{switch(Y1(i)){case 1:r=Bd;break;case 4:r=H1;break;case 16:r=dl;break;case 536870912:r=W1;break;default:r=dl}r=pp(r,lp.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function lp(t,e){if(il=-1,sl=0,Ge&6)throw Error(ne(327));var r=t.callbackNode;if(Ps()&&t.callbackNode!==r)return null;var i=hl(t,t===Xt?tr:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ol(t,i);else{e=i;var a=Ge;Ge|=2;var l=cp();(Xt!==t||tr!==e)&&(In=null,Hs=Ot()+500,Ui(t,e));do try{Wx();break}catch(m){up(t,m)}while(!0);qd(),Il.current=l,Ge=a,kt!==null?e=0:(Xt=null,tr=0,e=zt)}if(e!==0){if(e===2&&(a=Ic(t),a!==0&&(i=a,e=td(t,a))),e===1)throw r=Zo,Ui(t,0),Jn(t,i),br(t,Ot()),r;if(e===6)Jn(t,i);else{if(a=t.current.alternate,!(i&30)&&!Vx(a)&&(e=Ol(t,i),e===2&&(l=Ic(t),l!==0&&(i=l,e=td(t,l))),e===1))throw r=Zo,Ui(t,0),Jn(t,i),br(t,Ot()),r;switch(t.finishedWork=a,t.finishedLanes=i,e){case 0:case 1:throw Error(ne(345));case 2:Ri(t,Cr,In);break;case 3:if(Jn(t,i),(i&130023424)===i&&(e=dh+500-Ot(),10<e)){if(hl(t,0)!==0)break;if(a=t.suspendedLanes,(a&i)!==i){fr(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Pc(Ri.bind(null,t,Cr,In),e);break}Ri(t,Cr,In);break;case 4:if(Jn(t,i),(i&4194240)===i)break;for(e=t.eventTimes,a=-1;0<i;){var h=31-cn(i);l=1<<h,h=e[h],h>a&&(a=h),i&=~l}if(i=a,i=Ot()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*zx(i/1960))-i,10<i){t.timeoutHandle=Pc(Ri.bind(null,t,Cr,In),i);break}Ri(t,Cr,In);break;case 5:Ri(t,Cr,In);break;default:throw Error(ne(329))}}}return br(t,Ot()),t.callbackNode===r?lp.bind(null,t):null}function td(t,e){var r=ko;return t.current.memoizedState.isDehydrated&&(Ui(t,e).flags|=256),t=Ol(t,e),t!==2&&(e=Cr,Cr=r,e!==null&&rd(e)),t}function rd(t){Cr===null?Cr=t:Cr.push.apply(Cr,t)}function Vx(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var a=r[i],l=a.getSnapshot;a=a.value;try{if(!hn(l(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jn(t,e){for(e&=~ch,e&=~Zl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-cn(e),i=1<<r;t[r]=-1,e&=~i}}function n0(t){if(Ge&6)throw Error(ne(327));Ps();var e=hl(t,0);if(!(e&1))return br(t,Ot()),null;var r=Ol(t,e);if(t.tag!==0&&r===2){var i=Ic(t);i!==0&&(e=i,r=td(t,i))}if(r===1)throw r=Zo,Ui(t,0),Jn(t,e),br(t,Ot()),r;if(r===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ri(t,Cr,In),br(t,Ot()),null}function hh(t,e){var r=Ge;Ge|=1;try{return t(e)}finally{Ge=r,Ge===0&&(Hs=Ot()+500,$l&&yi())}}function Yi(t){ni!==null&&ni.tag===0&&!(Ge&6)&&Ps();var e=Ge;Ge|=1;var r=$r.transition,i=Je;try{if($r.transition=null,Je=1,t)return t()}finally{Je=i,$r.transition=r,Ge=e,!(Ge&6)&&yi()}}function fh(){Or=Ts.current,gt(Ts)}function Ui(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,xx(r)),kt!==null)for(r=kt.return;r!==null;){var i=r;switch(Xd(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&wl();break;case 3:zs(),gt(Ar),gt(lr),rh();break;case 5:th(i);break;case 4:zs();break;case 13:gt(vt);break;case 19:gt(vt);break;case 10:Qd(i.type._context);break;case 22:case 23:fh()}r=r.return}if(Xt=t,kt=t=hi(t.current,null),tr=Or=e,zt=0,Zo=null,ch=Zl=Gi=0,Cr=ko=null,Bi!==null){for(e=0;e<Bi.length;e++)if(r=Bi[e],i=r.interleaved,i!==null){r.interleaved=null;var a=i.next,l=r.pending;if(l!==null){var h=l.next;l.next=a,i.next=h}r.pending=i}Bi=null}return t}function up(t,e){do{var r=kt;try{if(qd(),tl.current=bl,Sl){for(var i=Et.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Sl=!1}if(Wi=0,Gt=Ft=Et=null,Oo=!1,Ko=0,uh.current=null,r===null||r.return===null){zt=1,Zo=e,kt=null;break}e:{var l=t,h=r.return,m=r,p=e;if(e=tr,m.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var g=p,y=m,v=y.tag;if(!(y.mode&1)&&(v===0||v===11||v===15)){var C=y.alternate;C?(y.updateQueue=C.updateQueue,y.memoizedState=C.memoizedState,y.lanes=C.lanes):(y.updateQueue=null,y.memoizedState=null)}var T=Wf(h);if(T!==null){T.flags&=-257,Gf(T,h,m,l,e),T.mode&1&&Hf(l,g,e),e=T,p=g;var O=e.updateQueue;if(O===null){var L=new Set;L.add(p),e.updateQueue=L}else O.add(p);break e}else{if(!(e&1)){Hf(l,g,e),gh();break e}p=Error(ne(426))}}else if(wt&&m.mode&1){var j=Wf(h);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Gf(j,h,m,l,e),$d(Vs(p,m));break e}}l=p=Vs(p,m),zt!==4&&(zt=2),ko===null?ko=[l]:ko.push(l),l=h;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var R=Yg(l,p,e);Bf(l,R);break e;case 1:m=p;var b=l.type,S=l.stateNode;if(!(l.flags&128)&&(typeof b.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ci===null||!ci.has(S)))){l.flags|=65536,e&=-e,l.lanes|=e;var M=Xg(l,m,e);Bf(l,M);break e}}l=l.return}while(l!==null)}hp(r)}catch(Y){e=Y,kt===r&&r!==null&&(kt=r=r.return);continue}break}while(!0)}function cp(){var t=Il.current;return Il.current=bl,t===null?bl:t}function gh(){(zt===0||zt===3||zt===2)&&(zt=4),Xt===null||!(Gi&268435455)&&!(Zl&268435455)||Jn(Xt,tr)}function Ol(t,e){var r=Ge;Ge|=2;var i=cp();(Xt!==t||tr!==e)&&(In=null,Ui(t,e));do try{Hx();break}catch(a){up(t,a)}while(!0);if(qd(),Ge=r,Il.current=i,kt!==null)throw Error(ne(261));return Xt=null,tr=0,zt}function Hx(){for(;kt!==null;)dp(kt)}function Wx(){for(;kt!==null&&!pw();)dp(kt)}function dp(t){var e=gp(t.alternate,t,Or);t.memoizedProps=t.pendingProps,e===null?hp(t):kt=e,uh.current=null}function hp(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Bx(r,e),r!==null){r.flags&=32767,kt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{zt=6,kt=null;return}}else if(r=Lx(r,e,Or),r!==null){kt=r;return}if(e=e.sibling,e!==null){kt=e;return}kt=e=t}while(e!==null);zt===0&&(zt=5)}function Ri(t,e,r){var i=Je,a=$r.transition;try{$r.transition=null,Je=1,Gx(t,e,r,i)}finally{$r.transition=a,Je=i}return null}function Gx(t,e,r,i){do Ps();while(ni!==null);if(Ge&6)throw Error(ne(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var l=r.lanes|r.childLanes;if(Sw(t,l),t===Xt&&(kt=Xt=null,tr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||La||(La=!0,pp(dl,function(){return Ps(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=$r.transition,$r.transition=null;var h=Je;Je=1;var m=Ge;Ge|=4,uh.current=null,Fx(t,r),op(r,t),dx(Mc),fl=!!kc,Mc=kc=null,t.current=r,Ux(r),mw(),Ge=m,Je=h,$r.transition=l}else t.current=r;if(La&&(La=!1,ni=t,Nl=a),l=t.pendingLanes,l===0&&(ci=null),yw(r.stateNode),br(t,Ot()),e!==null)for(i=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],i(a.value,{componentStack:a.stack,digest:a.digest});if(Tl)throw Tl=!1,t=Jc,Jc=null,t;return Nl&1&&t.tag!==0&&Ps(),l=t.pendingLanes,l&1?t===ed?Mo++:(Mo=0,ed=t):Mo=0,yi(),null}function Ps(){if(ni!==null){var t=Y1(Nl),e=$r.transition,r=Je;try{if($r.transition=null,Je=16>t?16:t,ni===null)var i=!1;else{if(t=ni,ni=null,Nl=0,Ge&6)throw Error(ne(331));var a=Ge;for(Ge|=4,pe=t.current;pe!==null;){var l=pe,h=l.child;if(pe.flags&16){var m=l.deletions;if(m!==null){for(var p=0;p<m.length;p++){var g=m[p];for(pe=g;pe!==null;){var y=pe;switch(y.tag){case 0:case 11:case 15:Ro(8,y,l)}var v=y.child;if(v!==null)v.return=y,pe=v;else for(;pe!==null;){y=pe;var C=y.sibling,T=y.return;if(np(y),y===g){pe=null;break}if(C!==null){C.return=T,pe=C;break}pe=T}}}var O=l.alternate;if(O!==null){var L=O.child;if(L!==null){O.child=null;do{var j=L.sibling;L.sibling=null,L=j}while(L!==null)}}pe=l}}if(l.subtreeFlags&2064&&h!==null)h.return=l,pe=h;else e:for(;pe!==null;){if(l=pe,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ro(9,l,l.return)}var R=l.sibling;if(R!==null){R.return=l.return,pe=R;break e}pe=l.return}}var b=t.current;for(pe=b;pe!==null;){h=pe;var S=h.child;if(h.subtreeFlags&2064&&S!==null)S.return=h,pe=S;else e:for(h=b;pe!==null;){if(m=pe,m.flags&2048)try{switch(m.tag){case 0:case 11:case 15:Ql(9,m)}}catch(Y){It(m,m.return,Y)}if(m===h){pe=null;break e}var M=m.sibling;if(M!==null){M.return=m.return,pe=M;break e}pe=m.return}}if(Ge=a,yi(),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(Hl,t)}catch{}i=!0}return i}finally{Je=r,$r.transition=e}}return!1}function i0(t,e,r){e=Vs(r,e),e=Yg(t,e,1),t=ui(t,e,1),e=fr(),t!==null&&(sa(t,1,e),br(t,e))}function It(t,e,r){if(t.tag===3)i0(t,t,r);else for(;e!==null;){if(e.tag===3){i0(e,t,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ci===null||!ci.has(i))){t=Vs(r,t),t=Xg(e,t,1),e=ui(e,t,1),t=fr(),e!==null&&(sa(e,1,t),br(e,t));break}}e=e.return}}function Yx(t,e,r){var i=t.pingCache;i!==null&&i.delete(e),e=fr(),t.pingedLanes|=t.suspendedLanes&r,Xt===t&&(tr&r)===r&&(zt===4||zt===3&&(tr&130023424)===tr&&500>Ot()-dh?Ui(t,0):ch|=r),br(t,e)}function fp(t,e){e===0&&(t.mode&1?(e=ba,ba<<=1,!(ba&130023424)&&(ba=4194304)):e=1);var r=fr();t=Ln(t,e),t!==null&&(sa(t,e,r),br(t,r))}function Xx(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),fp(t,r)}function $x(t,e){var r=0;switch(t.tag){case 13:var i=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ne(314))}i!==null&&i.delete(e),fp(t,r)}var gp;gp=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ar.current)_r=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return _r=!1,Px(t,e,r);_r=!!(t.flags&131072)}else _r=!1,wt&&e.flags&1048576&&xg(e,vl,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;nl(t,e),t=e.pendingProps;var a=js(e,lr.current);Ds(e,r),a=ih(null,e,i,t,a,r);var l=sh();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sr(i)?(l=!0,xl(e)):l=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Jd(e),a.updater=ql,e.stateNode=a,a._reactInternals=e,Vc(e,i,t,r),e=Gc(null,e,i,!0,l,r)):(e.tag=0,wt&&l&&Yd(e),dr(null,e,a,r),e=e.child),e;case 16:i=e.elementType;e:{switch(nl(t,e),t=e.pendingProps,a=i._init,i=a(i._payload),e.type=i,a=e.tag=qx(i),t=sn(i,t),a){case 0:e=Wc(null,e,i,t,r);break e;case 1:e=$f(null,e,i,t,r);break e;case 11:e=Yf(null,e,i,t,r);break e;case 14:e=Xf(null,e,i,sn(i.type,t),r);break e}throw Error(ne(306,i,""))}return e;case 0:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:sn(i,a),Wc(t,e,i,a,r);case 1:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:sn(i,a),$f(t,e,i,a,r);case 3:e:{if(Qg(e),t===null)throw Error(ne(387));i=e.pendingProps,l=e.memoizedState,a=l.element,Ag(t,e),_l(e,i,null,r);var h=e.memoizedState;if(i=h.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){a=Vs(Error(ne(423)),e),e=Kf(t,e,i,r,a);break e}else if(i!==a){a=Vs(Error(ne(424)),e),e=Kf(t,e,i,r,a);break e}else for(Dr=li(e.stateNode.containerInfo.firstChild),Pr=e,wt=!0,un=null,r=Cg(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Fs(),i===a){e=Bn(t,e,r);break e}dr(t,e,i,r)}e=e.child}return e;case 5:return Sg(e),t===null&&Fc(e),i=e.type,a=e.pendingProps,l=t!==null?t.memoizedProps:null,h=a.children,Dc(i,a)?h=null:l!==null&&Dc(i,l)&&(e.flags|=32),qg(t,e),dr(t,e,h,r),e.child;case 6:return t===null&&Fc(e),null;case 13:return Zg(t,e,r);case 4:return eh(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Us(e,null,i,r):dr(t,e,i,r),e.child;case 11:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:sn(i,a),Yf(t,e,i,a,r);case 7:return dr(t,e,e.pendingProps,r),e.child;case 8:return dr(t,e,e.pendingProps.children,r),e.child;case 12:return dr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,a=e.pendingProps,l=e.memoizedProps,h=a.value,ct(El,i._currentValue),i._currentValue=h,l!==null)if(hn(l.value,h)){if(l.children===a.children&&!Ar.current){e=Bn(t,e,r);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var m=l.dependencies;if(m!==null){h=l.child;for(var p=m.firstContext;p!==null;){if(p.context===i){if(l.tag===1){p=Mn(-1,r&-r),p.tag=2;var g=l.updateQueue;if(g!==null){g=g.shared;var y=g.pending;y===null?p.next=p:(p.next=y.next,y.next=p),g.pending=p}}l.lanes|=r,p=l.alternate,p!==null&&(p.lanes|=r),Uc(l.return,r,e),m.lanes|=r;break}p=p.next}}else if(l.tag===10)h=l.type===e.type?null:l.child;else if(l.tag===18){if(h=l.return,h===null)throw Error(ne(341));h.lanes|=r,m=h.alternate,m!==null&&(m.lanes|=r),Uc(h,r,e),h=l.sibling}else h=l.child;if(h!==null)h.return=l;else for(h=l;h!==null;){if(h===e){h=null;break}if(l=h.sibling,l!==null){l.return=h.return,h=l;break}h=h.return}l=h}dr(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,i=e.pendingProps.children,Ds(e,r),a=Kr(a),i=i(a),e.flags|=1,dr(t,e,i,r),e.child;case 14:return i=e.type,a=sn(i,e.pendingProps),a=sn(i.type,a),Xf(t,e,i,a,r);case 15:return $g(t,e,e.type,e.pendingProps,r);case 17:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:sn(i,a),nl(t,e),e.tag=1,Sr(i)?(t=!0,xl(e)):t=!1,Ds(e,r),Gg(e,i,a),Vc(e,i,a,r),Gc(null,e,i,!0,t,r);case 19:return Jg(t,e,r);case 22:return Kg(t,e,r)}throw Error(ne(156,e.tag))};function pp(t,e){return V1(t,e)}function Kx(t,e,r,i){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xr(t,e,r,i){return new Kx(t,e,r,i)}function ph(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qx(t){if(typeof t=="function")return ph(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dd)return 11;if(t===Pd)return 14}return 2}function hi(t,e){var r=t.alternate;return r===null?(r=Xr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ol(t,e,r,i,a,l){var h=2;if(i=t,typeof t=="function")ph(t)&&(h=1);else if(typeof t=="string")h=5;else e:switch(t){case xs:return zi(r.children,a,l,e);case Md:h=8,a|=8;break;case hc:return t=Xr(12,r,e,a|2),t.elementType=hc,t.lanes=l,t;case fc:return t=Xr(13,r,e,a),t.elementType=fc,t.lanes=l,t;case gc:return t=Xr(19,r,e,a),t.elementType=gc,t.lanes=l,t;case S1:return Jl(r,a,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _1:h=10;break e;case A1:h=9;break e;case Dd:h=11;break e;case Pd:h=14;break e;case qn:h=16,i=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=Xr(h,r,e,a),e.elementType=t,e.type=i,e.lanes=l,e}function zi(t,e,r,i){return t=Xr(7,t,i,e),t.lanes=r,t}function Jl(t,e,r,i){return t=Xr(22,t,i,e),t.elementType=S1,t.lanes=r,t.stateNode={isHidden:!1},t}function Zu(t,e,r){return t=Xr(6,t,null,e),t.lanes=r,t}function Ju(t,e,r){return e=Xr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Qx(t,e,r,i,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mu(0),this.expirationTimes=Mu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mu(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function mh(t,e,r,i,a,l,h,m,p){return t=new Qx(t,e,r,m,p),e===1?(e=1,l===!0&&(e|=8)):e=0,l=Xr(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jd(l),t}function Zx(t,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ws,key:i==null?null:""+i,children:t,containerInfo:e,implementation:r}}function mp(t){if(!t)return pi;t=t._reactInternals;e:{if(Ki(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var r=t.type;if(Sr(r))return mg(t,r,e)}return e}function wp(t,e,r,i,a,l,h,m,p){return t=mh(r,i,!0,t,a,l,h,m,p),t.context=mp(null),r=t.current,i=fr(),a=di(r),l=Mn(i,a),l.callback=e??null,ui(r,l,a),t.current.lanes=a,sa(t,a,i),br(t,i),t}function eu(t,e,r,i){var a=e.current,l=fr(),h=di(a);return r=mp(r),e.context===null?e.context=r:e.pendingContext=r,e=Mn(l,h),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ui(a,e,h),t!==null&&(dn(t,a,h,l),el(t,a,h)),h}function Rl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function s0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function wh(t,e){s0(t,e),(t=t.alternate)&&s0(t,e)}function Jx(){return null}var xp=typeof reportError=="function"?reportError:function(t){console.error(t)};function xh(t){this._internalRoot=t}tu.prototype.render=xh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));eu(t,e,null,null)};tu.prototype.unmount=xh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yi(function(){eu(null,t,null,null)}),e[Pn]=null}};function tu(t){this._internalRoot=t}tu.prototype.unstable_scheduleHydration=function(t){if(t){var e=K1();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Zn.length&&e!==0&&e<Zn[r].priority;r++);Zn.splice(r,0,t),r===0&&Q1(t)}};function yh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ru(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function o0(){}function ey(t,e,r,i,a){if(a){if(typeof i=="function"){var l=i;i=function(){var g=Rl(h);l.call(g)}}var h=wp(e,i,t,0,null,!1,!1,"",o0);return t._reactRootContainer=h,t[Pn]=h.current,Wo(t.nodeType===8?t.parentNode:t),Yi(),h}for(;a=t.lastChild;)t.removeChild(a);if(typeof i=="function"){var m=i;i=function(){var g=Rl(p);m.call(g)}}var p=mh(t,0,!1,null,null,!1,!1,"",o0);return t._reactRootContainer=p,t[Pn]=p.current,Wo(t.nodeType===8?t.parentNode:t),Yi(function(){eu(e,p,r,i)}),p}function nu(t,e,r,i,a){var l=r._reactRootContainer;if(l){var h=l;if(typeof a=="function"){var m=a;a=function(){var p=Rl(h);m.call(p)}}eu(e,h,t,a)}else h=ey(r,e,t,a,i);return Rl(h)}X1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Eo(e.pendingLanes);r!==0&&(jd(e,r|1),br(e,Ot()),!(Ge&6)&&(Hs=Ot()+500,yi()))}break;case 13:Yi(function(){var i=Ln(t,1);if(i!==null){var a=fr();dn(i,t,1,a)}}),wh(t,1)}};Fd=function(t){if(t.tag===13){var e=Ln(t,134217728);if(e!==null){var r=fr();dn(e,t,134217728,r)}wh(t,134217728)}};$1=function(t){if(t.tag===13){var e=di(t),r=Ln(t,e);if(r!==null){var i=fr();dn(r,t,e,i)}wh(t,e)}};K1=function(){return Je};q1=function(t,e){var r=Je;try{return Je=t,e()}finally{Je=r}};Ac=function(t,e,r){switch(e){case"input":if(wc(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==t&&i.form===t.form){var a=Xl(i);if(!a)throw Error(ne(90));I1(i),wc(i,a)}}}break;case"textarea":N1(t,r);break;case"select":e=r.value,e!=null&&Os(t,!!r.multiple,e,!1)}};L1=hh;B1=Yi;var ty={usingClientEntryPoint:!1,Events:[aa,Cs,Xl,D1,P1,hh]},wo={findFiberByHostInstance:Li,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ry={bundleType:wo.bundleType,version:wo.version,rendererPackageName:wo.rendererPackageName,rendererConfig:wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=U1(t),t===null?null:t.stateNode},findFiberByHostInstance:wo.findFiberByHostInstance||Jx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ba.isDisabled&&Ba.supportsFiber)try{Hl=Ba.inject(ry),An=Ba}catch{}}Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ty;Br.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yh(e))throw Error(ne(200));return Zx(t,e,null,r)};Br.createRoot=function(t,e){if(!yh(t))throw Error(ne(299));var r=!1,i="",a=xp;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=mh(t,1,!1,null,null,r,!1,i,a),t[Pn]=e.current,Wo(t.nodeType===8?t.parentNode:t),new xh(e)};Br.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=U1(e),t=t===null?null:t.stateNode,t};Br.flushSync=function(t){return Yi(t)};Br.hydrate=function(t,e,r){if(!ru(e))throw Error(ne(200));return nu(null,t,e,!0,r)};Br.hydrateRoot=function(t,e,r){if(!yh(t))throw Error(ne(405));var i=r!=null&&r.hydratedSources||null,a=!1,l="",h=xp;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),e=wp(e,null,t,1,r??null,a,!1,l,h),t[Pn]=e.current,Wo(t),i)for(t=0;t<i.length;t++)r=i[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new tu(e)};Br.render=function(t,e,r){if(!ru(e))throw Error(ne(200));return nu(null,t,e,!1,r)};Br.unmountComponentAtNode=function(t){if(!ru(t))throw Error(ne(40));return t._reactRootContainer?(Yi(function(){nu(null,null,t,!1,function(){t._reactRootContainer=null,t[Pn]=null})}),!0):!1};Br.unstable_batchedUpdates=hh;Br.unstable_renderSubtreeIntoContainer=function(t,e,r,i){if(!ru(r))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return nu(t,e,r,!1,i)};Br.version="18.3.1-next-f1338f8080-20240426";function yp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yp)}catch(t){console.error(t)}}yp(),y1.exports=Br;var ny=y1.exports,a0=ny;cc.createRoot=a0.createRoot,cc.hydrateRoot=a0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jo(){return Jo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Jo.apply(this,arguments)}var ii;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ii||(ii={}));const l0="popstate";function iy(t){t===void 0&&(t={});function e(i,a){let{pathname:l,search:h,hash:m}=i.location;return nd("",{pathname:l,search:h,hash:m},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(i,a){return typeof a=="string"?a:kl(a)}return oy(e,r,null,t)}function Mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sy(){return Math.random().toString(36).substr(2,8)}function u0(t,e){return{usr:t.state,key:t.key,idx:e}}function nd(t,e,r,i){return r===void 0&&(r=null),Jo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?$s(e):e,{state:r,key:e&&e.key||i||sy()})}function kl(t){let{pathname:e="/",search:r="",hash:i=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function $s(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function oy(t,e,r,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:l=!1}=i,h=a.history,m=ii.Pop,p=null,g=y();g==null&&(g=0,h.replaceState(Jo({},h.state,{idx:g}),""));function y(){return(h.state||{idx:null}).idx}function v(){m=ii.Pop;let j=y(),R=j==null?null:j-g;g=j,p&&p({action:m,location:L.location,delta:R})}function C(j,R){m=ii.Push;let b=nd(L.location,j,R);g=y()+1;let S=u0(b,g),M=L.createHref(b);try{h.pushState(S,"",M)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;a.location.assign(M)}l&&p&&p({action:m,location:L.location,delta:1})}function T(j,R){m=ii.Replace;let b=nd(L.location,j,R);g=y();let S=u0(b,g),M=L.createHref(b);h.replaceState(S,"",M),l&&p&&p({action:m,location:L.location,delta:0})}function O(j){let R=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof j=="string"?j:kl(j);return b=b.replace(/ $/,"%20"),Mt(R,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,R)}let L={get action(){return m},get location(){return t(a,h)},listen(j){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(l0,v),p=j,()=>{a.removeEventListener(l0,v),p=null}},createHref(j){return e(a,j)},createURL:O,encodeLocation(j){let R=O(j);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:C,replace:T,go(j){return h.go(j)}};return L}var c0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(c0||(c0={}));function ay(t,e,r){return r===void 0&&(r="/"),ly(t,e,r)}function ly(t,e,r,i){let a=typeof e=="string"?$s(e):e,l=vh(a.pathname||"/",r);if(l==null)return null;let h=Ep(t);uy(h);let m=null;for(let p=0;m==null&&p<h.length;++p){let g=Ey(l);m=xy(h[p],g)}return m}function Ep(t,e,r,i){e===void 0&&(e=[]),r===void 0&&(r=[]),i===void 0&&(i="");let a=(l,h,m)=>{let p={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(Mt(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let g=fi([i,p.relativePath]),y=r.concat(p);l.children&&l.children.length>0&&(Mt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),Ep(l.children,e,y,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:my(g,l.index),routesMeta:y})};return t.forEach((l,h)=>{var m;if(l.path===""||!((m=l.path)!=null&&m.includes("?")))a(l,h);else for(let p of Cp(l.path))a(l,h,p)}),e}function Cp(t){let e=t.split("/");if(e.length===0)return[];let[r,...i]=e,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let h=Cp(i.join("/")),m=[];return m.push(...h.map(p=>p===""?l:[l,p].join("/"))),a&&m.push(...h),m.map(p=>t.startsWith("/")&&p===""?"/":p)}function uy(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:wy(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const cy=/^:[\w-]+$/,dy=3,hy=2,fy=1,gy=10,py=-2,d0=t=>t==="*";function my(t,e){let r=t.split("/"),i=r.length;return r.some(d0)&&(i+=py),e&&(i+=hy),r.filter(a=>!d0(a)).reduce((a,l)=>a+(cy.test(l)?dy:l===""?fy:gy),i)}function wy(t,e){return t.length===e.length&&t.slice(0,-1).every((i,a)=>i===e[a])?t[t.length-1]-e[e.length-1]:0}function xy(t,e,r){let{routesMeta:i}=t,a={},l="/",h=[];for(let m=0;m<i.length;++m){let p=i[m],g=m===i.length-1,y=l==="/"?e:e.slice(l.length)||"/",v=yy({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},y),C=p.route;if(!v)return null;Object.assign(a,v.params),h.push({params:a,pathname:fi([l,v.pathname]),pathnameBase:Sy(fi([l,v.pathnameBase])),route:C}),v.pathnameBase!=="/"&&(l=fi([l,v.pathnameBase]))}return h}function yy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,i]=vy(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let l=a[0],h=l.replace(/(.)\/+$/,"$1"),m=a.slice(1);return{params:i.reduce((g,y,v)=>{let{paramName:C,isOptional:T}=y;if(C==="*"){let L=m[v]||"";h=l.slice(0,l.length-L.length).replace(/(.)\/+$/,"$1")}const O=m[v];return T&&!O?g[C]=void 0:g[C]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:h,pattern:t}}function vy(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),vp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,p)=>(i.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function Ey(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function vh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=t.charAt(r);return i&&i!=="/"?null:t.slice(r)||"/"}function Cy(t,e){e===void 0&&(e="/");let{pathname:r,search:i="",hash:a=""}=typeof t=="string"?$s(t):t;return{pathname:r?r.startsWith("/")?r:_y(r,e):e,search:by(i),hash:Iy(a)}}function _y(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function ec(t,e,r,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ay(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function _p(t,e){let r=Ay(t);return e?r.map((i,a)=>a===r.length-1?i.pathname:i.pathnameBase):r.map(i=>i.pathnameBase)}function Ap(t,e,r,i){i===void 0&&(i=!1);let a;typeof t=="string"?a=$s(t):(a=Jo({},t),Mt(!a.pathname||!a.pathname.includes("?"),ec("?","pathname","search",a)),Mt(!a.pathname||!a.pathname.includes("#"),ec("#","pathname","hash",a)),Mt(!a.search||!a.search.includes("#"),ec("#","search","hash",a)));let l=t===""||a.pathname==="",h=l?"/":a.pathname,m;if(h==null)m=r;else{let v=e.length-1;if(!i&&h.startsWith("..")){let C=h.split("/");for(;C[0]==="..";)C.shift(),v-=1;a.pathname=C.join("/")}m=v>=0?e[v]:"/"}let p=Cy(a,m),g=h&&h!=="/"&&h.endsWith("/"),y=(l||h===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(g||y)&&(p.pathname+="/"),p}const fi=t=>t.join("/").replace(/\/\/+/g,"/"),Sy=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),by=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Iy=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ty(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Sp=["post","put","patch","delete"];new Set(Sp);const Ny=["get",...Sp];new Set(Ny);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ea(){return ea=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ea.apply(this,arguments)}const Eh=q.createContext(null),Oy=q.createContext(null),qi=q.createContext(null),iu=q.createContext(null),Qi=q.createContext({outlet:null,matches:[],isDataRoute:!1}),bp=q.createContext(null);function Ry(t,e){let{relative:r}=e===void 0?{}:e;ua()||Mt(!1);let{basename:i,navigator:a}=q.useContext(qi),{hash:l,pathname:h,search:m}=Tp(t,{relative:r}),p=h;return i!=="/"&&(p=h==="/"?i:fi([i,h])),a.createHref({pathname:p,search:m,hash:l})}function ua(){return q.useContext(iu)!=null}function Ks(){return ua()||Mt(!1),q.useContext(iu).location}function Ip(t){q.useContext(qi).static||q.useLayoutEffect(t)}function Ch(){let{isDataRoute:t}=q.useContext(Qi);return t?Wy():ky()}function ky(){ua()||Mt(!1);let t=q.useContext(Eh),{basename:e,future:r,navigator:i}=q.useContext(qi),{matches:a}=q.useContext(Qi),{pathname:l}=Ks(),h=JSON.stringify(_p(a,r.v7_relativeSplatPath)),m=q.useRef(!1);return Ip(()=>{m.current=!0}),q.useCallback(function(g,y){if(y===void 0&&(y={}),!m.current)return;if(typeof g=="number"){i.go(g);return}let v=Ap(g,JSON.parse(h),l,y.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:fi([e,v.pathname])),(y.replace?i.replace:i.push)(v,y.state,y)},[e,i,h,l,t])}function Tp(t,e){let{relative:r}=e===void 0?{}:e,{future:i}=q.useContext(qi),{matches:a}=q.useContext(Qi),{pathname:l}=Ks(),h=JSON.stringify(_p(a,i.v7_relativeSplatPath));return q.useMemo(()=>Ap(t,JSON.parse(h),l,r==="path"),[t,h,l,r])}function My(t,e){return Dy(t,e)}function Dy(t,e,r,i){ua()||Mt(!1);let{navigator:a}=q.useContext(qi),{matches:l}=q.useContext(Qi),h=l[l.length-1],m=h?h.params:{};h&&h.pathname;let p=h?h.pathnameBase:"/";h&&h.route;let g=Ks(),y;if(e){var v;let j=typeof e=="string"?$s(e):e;p==="/"||(v=j.pathname)!=null&&v.startsWith(p)||Mt(!1),y=j}else y=g;let C=y.pathname||"/",T=C;if(p!=="/"){let j=p.replace(/^\//,"").split("/");T="/"+C.replace(/^\//,"").split("/").slice(j.length).join("/")}let O=ay(t,{pathname:T}),L=Fy(O&&O.map(j=>Object.assign({},j,{params:Object.assign({},m,j.params),pathname:fi([p,a.encodeLocation?a.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?p:fi([p,a.encodeLocation?a.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),l,r,i);return e&&L?q.createElement(iu.Provider,{value:{location:ea({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:ii.Pop}},L):L}function Py(){let t=Hy(),e=Ty(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),r?q.createElement("pre",{style:a},r):null,null)}const Ly=q.createElement(Py,null);class By extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?q.createElement(Qi.Provider,{value:this.props.routeContext},q.createElement(bp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jy(t){let{routeContext:e,match:r,children:i}=t,a=q.useContext(Eh);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),q.createElement(Qi.Provider,{value:e},i)}function Fy(t,e,r,i){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),i===void 0&&(i=null),t==null){var l;if(!r)return null;if(r.errors)t=r.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let h=t,m=(a=r)==null?void 0:a.errors;if(m!=null){let y=h.findIndex(v=>v.route.id&&(m==null?void 0:m[v.route.id])!==void 0);y>=0||Mt(!1),h=h.slice(0,Math.min(h.length,y+1))}let p=!1,g=-1;if(r&&i&&i.v7_partialHydration)for(let y=0;y<h.length;y++){let v=h[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=y),v.route.id){let{loaderData:C,errors:T}=r,O=v.route.loader&&C[v.route.id]===void 0&&(!T||T[v.route.id]===void 0);if(v.route.lazy||O){p=!0,g>=0?h=h.slice(0,g+1):h=[h[0]];break}}}return h.reduceRight((y,v,C)=>{let T,O=!1,L=null,j=null;r&&(T=m&&v.route.id?m[v.route.id]:void 0,L=v.route.errorElement||Ly,p&&(g<0&&C===0?(Gy("route-fallback"),O=!0,j=null):g===C&&(O=!0,j=v.route.hydrateFallbackElement||null)));let R=e.concat(h.slice(0,C+1)),b=()=>{let S;return T?S=L:O?S=j:v.route.Component?S=q.createElement(v.route.Component,null):v.route.element?S=v.route.element:S=y,q.createElement(jy,{match:v,routeContext:{outlet:y,matches:R,isDataRoute:r!=null},children:S})};return r&&(v.route.ErrorBoundary||v.route.errorElement||C===0)?q.createElement(By,{location:r.location,revalidation:r.revalidation,component:L,error:T,children:b(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):b()},null)}var Np=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Np||{}),Op=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Op||{});function Uy(t){let e=q.useContext(Eh);return e||Mt(!1),e}function zy(t){let e=q.useContext(Oy);return e||Mt(!1),e}function Vy(t){let e=q.useContext(Qi);return e||Mt(!1),e}function Rp(t){let e=Vy(),r=e.matches[e.matches.length-1];return r.route.id||Mt(!1),r.route.id}function Hy(){var t;let e=q.useContext(bp),r=zy(),i=Rp();return e!==void 0?e:(t=r.errors)==null?void 0:t[i]}function Wy(){let{router:t}=Uy(Np.UseNavigateStable),e=Rp(Op.UseNavigateStable),r=q.useRef(!1);return Ip(()=>{r.current=!0}),q.useCallback(function(a,l){l===void 0&&(l={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,ea({fromRouteId:e},l)))},[t,e])}const h0={};function Gy(t,e,r){h0[t]||(h0[t]=!0)}function Yy(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function gs(t){Mt(!1)}function Xy(t){let{basename:e="/",children:r=null,location:i,navigationType:a=ii.Pop,navigator:l,static:h=!1,future:m}=t;ua()&&Mt(!1);let p=e.replace(/^\/*/,"/"),g=q.useMemo(()=>({basename:p,navigator:l,static:h,future:ea({v7_relativeSplatPath:!1},m)}),[p,m,l,h]);typeof i=="string"&&(i=$s(i));let{pathname:y="/",search:v="",hash:C="",state:T=null,key:O="default"}=i,L=q.useMemo(()=>{let j=vh(y,p);return j==null?null:{location:{pathname:j,search:v,hash:C,state:T,key:O},navigationType:a}},[p,y,v,C,T,O,a]);return L==null?null:q.createElement(qi.Provider,{value:g},q.createElement(iu.Provider,{children:r,value:L}))}function $y(t){let{children:e,location:r}=t;return My(id(e),r)}new Promise(()=>{});function id(t,e){e===void 0&&(e=[]);let r=[];return q.Children.forEach(t,(i,a)=>{if(!q.isValidElement(i))return;let l=[...e,a];if(i.type===q.Fragment){r.push.apply(r,id(i.props.children,l));return}i.type!==gs&&Mt(!1),!i.props.index||!i.props.children||Mt(!1);let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=id(i.props.children,l)),r.push(h)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sd(){return sd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},sd.apply(this,arguments)}function Ky(t,e){if(t==null)return{};var r={},i=Object.keys(t),a,l;for(l=0;l<i.length;l++)a=i[l],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function qy(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Qy(t,e){return t.button===0&&(!e||e==="_self")&&!qy(t)}function od(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let i=t[r];return e.concat(Array.isArray(i)?i.map(a=>[r,a]):[[r,i]])},[]))}function Zy(t,e){let r=od(t);return e&&e.forEach((i,a)=>{r.has(a)||e.getAll(a).forEach(l=>{r.append(a,l)})}),r}const Jy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ev="6";try{window.__reactRouterVersion=ev}catch{}const tv="startTransition",f0=Y2[tv];function rv(t){let{basename:e,children:r,future:i,window:a}=t,l=q.useRef();l.current==null&&(l.current=iy({window:a,v5Compat:!0}));let h=l.current,[m,p]=q.useState({action:h.action,location:h.location}),{v7_startTransition:g}=i||{},y=q.useCallback(v=>{g&&f0?f0(()=>p(v)):p(v)},[p,g]);return q.useLayoutEffect(()=>h.listen(y),[h,y]),q.useEffect(()=>Yy(i),[i]),q.createElement(Xy,{basename:e,children:r,location:m.location,navigationType:m.action,navigator:h,future:i})}const nv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xo=q.forwardRef(function(e,r){let{onClick:i,relative:a,reloadDocument:l,replace:h,state:m,target:p,to:g,preventScrollReset:y,viewTransition:v}=e,C=Ky(e,Jy),{basename:T}=q.useContext(qi),O,L=!1;if(typeof g=="string"&&iv.test(g)&&(O=g,nv))try{let S=new URL(window.location.href),M=g.startsWith("//")?new URL(S.protocol+g):new URL(g),Y=vh(M.pathname,T);M.origin===S.origin&&Y!=null?g=Y+M.search+M.hash:L=!0}catch{}let j=Ry(g,{relative:a}),R=sv(g,{replace:h,state:m,target:p,preventScrollReset:y,relative:a,viewTransition:v});function b(S){i&&i(S),S.defaultPrevented||R(S)}return q.createElement("a",sd({},C,{href:O||j,onClick:L||l?i:b,ref:r,target:p}))});var g0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(g0||(g0={}));var p0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(p0||(p0={}));function sv(t,e){let{target:r,replace:i,state:a,preventScrollReset:l,relative:h,viewTransition:m}=e===void 0?{}:e,p=Ch(),g=Ks(),y=Tp(t,{relative:h});return q.useCallback(v=>{if(Qy(v,r)){v.preventDefault();let C=i!==void 0?i:kl(g)===kl(y);p(t,{replace:C,state:a,preventScrollReset:l,relative:h,viewTransition:m})}},[g,p,y,i,a,r,t,l,h,m])}function ov(t){let e=q.useRef(od(t)),r=q.useRef(!1),i=Ks(),a=q.useMemo(()=>Zy(i.search,r.current?null:e.current),[i.search]),l=Ch(),h=q.useCallback((m,p)=>{const g=od(typeof m=="function"?m(a):m);r.current=!0,l("?"+g,p)},[l,a]);return[a,h]}let av={data:""},lv=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||av},uv=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,cv=/\/\*[^]*?\*\/|  +/g,m0=/\n+/g,ei=(t,e)=>{let r="",i="",a="";for(let l in t){let h=t[l];l[0]=="@"?l[1]=="i"?r=l+" "+h+";":i+=l[1]=="f"?ei(h,l):l+"{"+ei(h,l[1]=="k"?"":e)+"}":typeof h=="object"?i+=ei(h,e?e.replace(/([^,])+/g,m=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,p=>/&/.test(p)?p.replace(/&/g,m):m?m+" "+p:p)):l):h!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=ei.p?ei.p(l,h):l+":"+h+";")}return r+(e&&a?e+"{"+a+"}":a)+i},bn={},kp=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+kp(t[r]);return e}return t},dv=(t,e,r,i,a)=>{let l=kp(t),h=bn[l]||(bn[l]=(p=>{let g=0,y=11;for(;g<p.length;)y=101*y+p.charCodeAt(g++)>>>0;return"go"+y})(l));if(!bn[h]){let p=l!==t?t:(g=>{let y,v,C=[{}];for(;y=uv.exec(g.replace(cv,""));)y[4]?C.shift():y[3]?(v=y[3].replace(m0," ").trim(),C.unshift(C[0][v]=C[0][v]||{})):C[0][y[1]]=y[2].replace(m0," ").trim();return C[0]})(t);bn[h]=ei(a?{["@keyframes "+h]:p}:p,r?"":"."+h)}let m=r&&bn.g?bn.g:null;return r&&(bn.g=bn[h]),((p,g,y,v)=>{v?g.data=g.data.replace(v,p):g.data.indexOf(p)===-1&&(g.data=y?p+g.data:g.data+p)})(bn[h],e,i,m),h},hv=(t,e,r)=>t.reduce((i,a,l)=>{let h=e[l];if(h&&h.call){let m=h(r),p=m&&m.props&&m.props.className||/^go/.test(m)&&m;h=p?"."+p:m&&typeof m=="object"?m.props?"":ei(m,""):m===!1?"":m}return i+a+(h??"")},"");function su(t){let e=this||{},r=t.call?t(e.p):t;return dv(r.unshift?r.raw?hv(r,[].slice.call(arguments,1),e.p):r.reduce((i,a)=>Object.assign(i,a&&a.call?a(e.p):a),{}):r,lv(e.target),e.g,e.o,e.k)}let Mp,ad,ld;su.bind({g:1});let jn=su.bind({k:1});function fv(t,e,r,i){ei.p=e,Mp=t,ad=r,ld=i}function vi(t,e){let r=this||{};return function(){let i=arguments;function a(l,h){let m=Object.assign({},l),p=m.className||a.className;r.p=Object.assign({theme:ad&&ad()},m),r.o=/ *go\d+/.test(p),m.className=su.apply(r,i)+(p?" "+p:"");let g=t;return t[0]&&(g=m.as||t,delete m.as),ld&&g[0]&&ld(m),Mp(g,m)}return a}}var gv=t=>typeof t=="function",Ml=(t,e)=>gv(t)?t(e):t,pv=(()=>{let t=0;return()=>(++t).toString()})(),Dp=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),mv=20,_h="default",Pp=(t,e)=>{let{toastLimit:r}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,r)};case 1:return{...t,toasts:t.toasts.map(h=>h.id===e.toast.id?{...h,...e.toast}:h)};case 2:let{toast:i}=e;return Pp(t,{type:t.toasts.find(h=>h.id===i.id)?1:0,toast:i});case 3:let{toastId:a}=e;return{...t,toasts:t.toasts.map(h=>h.id===a||a===void 0?{...h,dismissed:!0,visible:!1}:h)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(h=>h.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let l=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(h=>({...h,pauseDuration:h.pauseDuration+l}))}}},al=[],Lp={toasts:[],pausedAt:void 0,settings:{toastLimit:mv}},_n={},Bp=(t,e=_h)=>{_n[e]=Pp(_n[e]||Lp,t),al.forEach(([r,i])=>{r===e&&i(_n[e])})},jp=t=>Object.keys(_n).forEach(e=>Bp(t,e)),wv=t=>Object.keys(_n).find(e=>_n[e].toasts.some(r=>r.id===t)),ou=(t=_h)=>e=>{Bp(e,t)},xv={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},yv=(t={},e=_h)=>{let[r,i]=q.useState(_n[e]||Lp),a=q.useRef(_n[e]);q.useEffect(()=>(a.current!==_n[e]&&i(_n[e]),al.push([e,i]),()=>{let h=al.findIndex(([m])=>m===e);h>-1&&al.splice(h,1)}),[e]);let l=r.toasts.map(h=>{var m,p,g;return{...t,...t[h.type],...h,removeDelay:h.removeDelay||((m=t[h.type])==null?void 0:m.removeDelay)||(t==null?void 0:t.removeDelay),duration:h.duration||((p=t[h.type])==null?void 0:p.duration)||(t==null?void 0:t.duration)||xv[h.type],style:{...t.style,...(g=t[h.type])==null?void 0:g.style,...h.style}}});return{...r,toasts:l}},vv=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||pv()}),ca=t=>(e,r)=>{let i=vv(e,t,r);return ou(i.toasterId||wv(i.id))({type:2,toast:i}),i.id},Ut=(t,e)=>ca("blank")(t,e);Ut.error=ca("error");Ut.success=ca("success");Ut.loading=ca("loading");Ut.custom=ca("custom");Ut.dismiss=(t,e)=>{let r={type:3,toastId:t};e?ou(e)(r):jp(r)};Ut.dismissAll=t=>Ut.dismiss(void 0,t);Ut.remove=(t,e)=>{let r={type:4,toastId:t};e?ou(e)(r):jp(r)};Ut.removeAll=t=>Ut.remove(void 0,t);Ut.promise=(t,e,r)=>{let i=Ut.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(a=>{let l=e.success?Ml(e.success,a):void 0;return l?Ut.success(l,{id:i,...r,...r==null?void 0:r.success}):Ut.dismiss(i),a}).catch(a=>{let l=e.error?Ml(e.error,a):void 0;l?Ut.error(l,{id:i,...r,...r==null?void 0:r.error}):Ut.dismiss(i)}),t};var Ev=1e3,Cv=(t,e="default")=>{let{toasts:r,pausedAt:i}=yv(t,e),a=q.useRef(new Map).current,l=q.useCallback((v,C=Ev)=>{if(a.has(v))return;let T=setTimeout(()=>{a.delete(v),h({type:4,toastId:v})},C);a.set(v,T)},[]);q.useEffect(()=>{if(i)return;let v=Date.now(),C=r.map(T=>{if(T.duration===1/0)return;let O=(T.duration||0)+T.pauseDuration-(v-T.createdAt);if(O<0){T.visible&&Ut.dismiss(T.id);return}return setTimeout(()=>Ut.dismiss(T.id,e),O)});return()=>{C.forEach(T=>T&&clearTimeout(T))}},[r,i,e]);let h=q.useCallback(ou(e),[e]),m=q.useCallback(()=>{h({type:5,time:Date.now()})},[h]),p=q.useCallback((v,C)=>{h({type:1,toast:{id:v,height:C}})},[h]),g=q.useCallback(()=>{i&&h({type:6,time:Date.now()})},[i,h]),y=q.useCallback((v,C)=>{let{reverseOrder:T=!1,gutter:O=8,defaultPosition:L}=C||{},j=r.filter(S=>(S.position||L)===(v.position||L)&&S.height),R=j.findIndex(S=>S.id===v.id),b=j.filter((S,M)=>M<R&&S.visible).length;return j.filter(S=>S.visible).slice(...T?[b+1]:[0,b]).reduce((S,M)=>S+(M.height||0)+O,0)},[r]);return q.useEffect(()=>{r.forEach(v=>{if(v.dismissed)l(v.id,v.removeDelay);else{let C=a.get(v.id);C&&(clearTimeout(C),a.delete(v.id))}})},[r,l]),{toasts:r,handlers:{updateHeight:p,startPause:m,endPause:g,calculateOffset:y}}},_v=jn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Av=jn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Sv=jn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,bv=vi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_v} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Av} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Sv} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Iv=jn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Tv=vi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Iv} 1s linear infinite;
`,Nv=jn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Ov=jn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Rv=vi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Nv} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Ov} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,kv=vi("div")`
  position: absolute;
`,Mv=vi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Dv=jn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Pv=vi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Dv} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Lv=({toast:t})=>{let{icon:e,type:r,iconTheme:i}=t;return e!==void 0?typeof e=="string"?q.createElement(Pv,null,e):e:r==="blank"?null:q.createElement(Mv,null,q.createElement(Tv,{...i}),r!=="loading"&&q.createElement(kv,null,r==="error"?q.createElement(bv,{...i}):q.createElement(Rv,{...i})))},Bv=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,jv=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Fv="0%{opacity:0;} 100%{opacity:1;}",Uv="0%{opacity:1;} 100%{opacity:0;}",zv=vi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Vv=vi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Hv=(t,e)=>{let r=t.includes("top")?1:-1,[i,a]=Dp()?[Fv,Uv]:[Bv(r),jv(r)];return{animation:e?`${jn(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${jn(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Wv=q.memo(({toast:t,position:e,style:r,children:i})=>{let a=t.height?Hv(t.position||e||"top-center",t.visible):{opacity:0},l=q.createElement(Lv,{toast:t}),h=q.createElement(Vv,{...t.ariaProps},Ml(t.message,t));return q.createElement(zv,{className:t.className,style:{...a,...r,...t.style}},typeof i=="function"?i({icon:l,message:h}):q.createElement(q.Fragment,null,l,h))});fv(q.createElement);var Gv=({id:t,className:e,style:r,onHeightUpdate:i,children:a})=>{let l=q.useCallback(h=>{if(h){let m=()=>{let p=h.getBoundingClientRect().height;i(t,p)};m(),new MutationObserver(m).observe(h,{subtree:!0,childList:!0,characterData:!0})}},[t,i]);return q.createElement("div",{ref:l,className:e,style:r},a)},Yv=(t,e)=>{let r=t.includes("top"),i=r?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Dp()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...i,...a}},Xv=su`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ja=16,$v=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:i,children:a,toasterId:l,containerStyle:h,containerClassName:m})=>{let{toasts:p,handlers:g}=Cv(r,l);return q.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:ja,left:ja,right:ja,bottom:ja,pointerEvents:"none",...h},className:m,onMouseEnter:g.startPause,onMouseLeave:g.endPause},p.map(y=>{let v=y.position||e,C=g.calculateOffset(y,{reverseOrder:t,gutter:i,defaultPosition:e}),T=Yv(v,C);return q.createElement(Gv,{id:y.id,key:y.id,onHeightUpdate:g.updateHeight,className:y.visible?Xv:"",style:T},y.type==="custom"?Ml(y.message,y):a?a(y):q.createElement(Wv,{toast:y,position:v}))}))},Be=Ut,ud=function(t,e){return ud=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},ud(t,e)};function Fp(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ud(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Dl=function(){return Dl=Object.assign||function(e){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},Dl.apply(this,arguments)};function qs(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(r[i[a]]=t[i[a]]);return r}function Up(t,e,r,i){var a=arguments.length,l=a<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,r,i);else for(var m=t.length-1;m>=0;m--)(h=t[m])&&(l=(a<3?h(l):a>3?h(e,r,l):h(e,r))||l);return a>3&&l&&Object.defineProperty(e,r,l),l}function zp(t,e){return function(r,i){e(r,i,t)}}function Vp(t,e,r,i,a,l){function h(R){if(R!==void 0&&typeof R!="function")throw new TypeError("Function expected");return R}for(var m=i.kind,p=m==="getter"?"get":m==="setter"?"set":"value",g=!e&&t?i.static?t:t.prototype:null,y=e||(g?Object.getOwnPropertyDescriptor(g,i.name):{}),v,C=!1,T=r.length-1;T>=0;T--){var O={};for(var L in i)O[L]=L==="access"?{}:i[L];for(var L in i.access)O.access[L]=i.access[L];O.addInitializer=function(R){if(C)throw new TypeError("Cannot add initializers after decoration has completed");l.push(h(R||null))};var j=(0,r[T])(m==="accessor"?{get:y.get,set:y.set}:y[p],O);if(m==="accessor"){if(j===void 0)continue;if(j===null||typeof j!="object")throw new TypeError("Object expected");(v=h(j.get))&&(y.get=v),(v=h(j.set))&&(y.set=v),(v=h(j.init))&&a.unshift(v)}else(v=h(j))&&(m==="field"?a.unshift(v):y[p]=v)}g&&Object.defineProperty(g,i.name,y),C=!0}function Hp(t,e,r){for(var i=arguments.length>2,a=0;a<e.length;a++)r=i?e[a].call(t,r):e[a].call(t);return i?r:void 0}function Wp(t){return typeof t=="symbol"?t:"".concat(t)}function Gp(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Yp(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function xe(t,e,r,i){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function m(y){try{g(i.next(y))}catch(v){h(v)}}function p(y){try{g(i.throw(y))}catch(v){h(v)}}function g(y){y.done?l(y.value):a(y.value).then(m,p)}g((i=i.apply(t,e||[])).next())})}function Xp(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=m(0),h.throw=m(1),h.return=m(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(g){return function(y){return p([g,y])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(i=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(y){g=[6,y],a=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var au=Object.create?function(t,e,r,i){i===void 0&&(i=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,a)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]};function $p(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&au(e,t,r)}function Pl(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ah(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),a,l=[],h;try{for(;(e===void 0||e-- >0)&&!(a=i.next()).done;)l.push(a.value)}catch(m){h={error:m}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(h)throw h.error}}return l}function Kp(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ah(arguments[e]));return t}function qp(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),a=0,e=0;e<r;e++)for(var l=arguments[e],h=0,m=l.length;h<m;h++,a++)i[a]=l[h];return i}function Qp(t,e,r){if(r||arguments.length===2)for(var i=0,a=e.length,l;i<a;i++)(l||!(i in e))&&(l||(l=Array.prototype.slice.call(e,0,i)),l[i]=e[i]);return t.concat(l||Array.prototype.slice.call(e))}function Ws(t){return this instanceof Ws?(this.v=t,this):new Ws(t)}function Zp(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",h),a[Symbol.asyncIterator]=function(){return this},a;function h(T){return function(O){return Promise.resolve(O).then(T,v)}}function m(T,O){i[T]&&(a[T]=function(L){return new Promise(function(j,R){l.push([T,L,j,R])>1||p(T,L)})},O&&(a[T]=O(a[T])))}function p(T,O){try{g(i[T](O))}catch(L){C(l[0][3],L)}}function g(T){T.value instanceof Ws?Promise.resolve(T.value.v).then(y,v):C(l[0][2],T)}function y(T){p("next",T)}function v(T){p("throw",T)}function C(T,O){T(O),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Jp(t){var e,r;return e={},i("next"),i("throw",function(a){throw a}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(a,l){e[a]=t[a]?function(h){return(r=!r)?{value:Ws(t[a](h)),done:!1}:l?l(h):h}:l}}function em(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Pl=="function"?Pl(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(l){r[l]=t[l]&&function(h){return new Promise(function(m,p){h=t[l](h),a(m,p,h.done,h.value)})}}function a(l,h,m,p){Promise.resolve(p).then(function(g){l({value:g,done:m})},h)}}function tm(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Kv=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},cd=function(t){return cd=Object.getOwnPropertyNames||function(e){var r=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[r.length]=i);return r},cd(t)};function rm(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=cd(t),i=0;i<r.length;i++)r[i]!=="default"&&au(e,t,r[i]);return Kv(e,t),e}function nm(t){return t&&t.__esModule?t:{default:t}}function im(t,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:e.get(t)}function sm(t,e,r,i,a){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?a.call(t,r):a?a.value=r:e.set(t,r),r}function om(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function am(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var i,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=e[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=e[Symbol.dispose],r&&(a=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");a&&(i=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:e,dispose:i,async:r})}else r&&t.stack.push({async:!0});return e}var qv=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var i=new Error(r);return i.name="SuppressedError",i.error=t,i.suppressed=e,i};function lm(t){function e(l){t.error=t.hasError?new qv(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var r,i=0;function a(){for(;r=t.stack.pop();)try{if(!r.async&&i===1)return i=0,t.stack.push(r),Promise.resolve().then(a);if(r.dispose){var l=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(l).then(a,function(h){return e(h),a()})}else i|=1}catch(h){e(h)}if(i===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function um(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,i,a,l,h){return i?e?".jsx":".js":a&&(!l||!h)?r:a+l+"."+h.toLowerCase()+"js"}):t}const Qv={__extends:Fp,__assign:Dl,__rest:qs,__decorate:Up,__param:zp,__esDecorate:Vp,__runInitializers:Hp,__propKey:Wp,__setFunctionName:Gp,__metadata:Yp,__awaiter:xe,__generator:Xp,__createBinding:au,__exportStar:$p,__values:Pl,__read:Ah,__spread:Kp,__spreadArrays:qp,__spreadArray:Qp,__await:Ws,__asyncGenerator:Zp,__asyncDelegator:Jp,__asyncValues:em,__makeTemplateObject:tm,__importStar:rm,__importDefault:nm,__classPrivateFieldGet:im,__classPrivateFieldSet:sm,__classPrivateFieldIn:om,__addDisposableResource:am,__disposeResources:lm,__rewriteRelativeImportExtension:um},Zv=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:am,get __assign(){return Dl},__asyncDelegator:Jp,__asyncGenerator:Zp,__asyncValues:em,__await:Ws,__awaiter:xe,__classPrivateFieldGet:im,__classPrivateFieldIn:om,__classPrivateFieldSet:sm,__createBinding:au,__decorate:Up,__disposeResources:lm,__esDecorate:Vp,__exportStar:$p,__extends:Fp,__generator:Xp,__importDefault:nm,__importStar:rm,__makeTemplateObject:tm,__metadata:Yp,__param:zp,__propKey:Wp,__read:Ah,__rest:qs,__rewriteRelativeImportExtension:um,__runInitializers:Hp,__setFunctionName:Gp,__spread:Kp,__spreadArray:Qp,__spreadArrays:qp,__values:Pl,default:Qv},Symbol.toStringTag,{value:"Module"})),Jv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Sh extends Error{constructor(e,r="FunctionsError",i){super(e),this.name=r,this.context=i}}class eE extends Sh{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class w0 extends Sh{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class x0 extends Sh{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var dd;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(dd||(dd={}));class tE{constructor(e,{headers:r={},customFetch:i,region:a=dd.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=Jv(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return xe(this,arguments,void 0,function*(r,i={}){var a;let l,h;try{const{headers:m,method:p,body:g,signal:y,timeout:v}=i;let C={},{region:T}=i;T||(T=this.region);const O=new URL(`${this.url}/${r}`);T&&T!=="any"&&(C["x-region"]=T,O.searchParams.set("forceFunctionRegion",T));let L;g&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(C["Content-Type"]="application/octet-stream",L=g):typeof g=="string"?(C["Content-Type"]="text/plain",L=g):typeof FormData<"u"&&g instanceof FormData?L=g:(C["Content-Type"]="application/json",L=JSON.stringify(g)):L=g;let j=y;v&&(h=new AbortController,l=setTimeout(()=>h.abort(),v),y?(j=h.signal,y.addEventListener("abort",()=>h.abort())):j=h.signal);const R=yield this.fetch(O.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},C),this.headers),m),body:L,signal:j}).catch(Y=>{throw new eE(Y)}),b=R.headers.get("x-relay-error");if(b&&b==="true")throw new w0(R);if(!R.ok)throw new x0(R);let S=((a=R.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),M;return S==="application/json"?M=yield R.json():S==="application/octet-stream"||S==="application/pdf"?M=yield R.blob():S==="text/event-stream"?M=R:S==="multipart/form-data"?M=yield R.formData():M=yield R.text(),{data:M,error:null,response:R}}catch(m){return{data:null,error:m,response:m instanceof x0||m instanceof w0?m.context:void 0}}finally{l&&clearTimeout(l)}})}}var hr={};const Qs=O2(Zv);var Fa={},Ua={},za={},Va={},Ha={},Wa={},y0;function cm(){if(y0)return Wa;y0=1,Object.defineProperty(Wa,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Wa.default=t,Wa}var v0;function dm(){if(v0)return Ha;v0=1,Object.defineProperty(Ha,"__esModule",{value:!0});const e=Qs.__importDefault(cm());class r{constructor(a){var l,h;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(h=a.isMaybeSingle)!==null&&h!==void 0?h:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let m=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var g,y,v,C;let T=null,O=null,L=null,j=p.status,R=p.statusText;if(p.ok){if(this.method!=="HEAD"){const Y=await p.text();Y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?O=Y:O=JSON.parse(Y))}const S=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),M=(v=p.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");S&&M&&M.length>1&&(L=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(O)&&(O.length>1?(T={code:"PGRST116",details:`Results contain ${O.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},O=null,L=null,j=406,R="Not Acceptable"):O.length===1?O=O[0]:O=null)}else{const S=await p.text();try{T=JSON.parse(S),Array.isArray(T)&&p.status===404&&(O=[],T=null,j=200,R="OK")}catch{p.status===404&&S===""?(j=204,R="No Content"):T={message:S}}if(T&&this.isMaybeSingle&&(!((C=T==null?void 0:T.details)===null||C===void 0)&&C.includes("0 rows"))&&(T=null,j=200,R="OK"),T&&this.shouldThrowOnError)throw new e.default(T)}return{error:T,data:O,count:L,status:j,statusText:R}});return this.shouldThrowOnError||(m=m.catch(p=>{var g,y,v;return{error:{message:`${(g=p==null?void 0:p.name)!==null&&g!==void 0?g:"FetchError"}: ${p==null?void 0:p.message}`,details:`${(y=p==null?void 0:p.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(v=p==null?void 0:p.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),m.then(a,l)}returns(){return this}overrideTypes(){return this}}return Ha.default=r,Ha}var E0;function hm(){if(E0)return Va;E0=1,Object.defineProperty(Va,"__esModule",{value:!0});const e=Qs.__importDefault(dm());class r extends e.default{select(a){let l=!1;const h=(a??"*").split("").map(m=>/\s/.test(m)&&!l?"":(m==='"'&&(l=!l),m)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:h,foreignTable:m,referencedTable:p=m}={}){const g=p?`${p}.order`:"order",y=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${y?`${y},`:""}${a}.${l?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:h=l}={}){const m=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(m,`${a}`),this}range(a,l,{foreignTable:h,referencedTable:m=h}={}){const p=typeof m>"u"?"offset":`${m}.offset`,g=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(p,`${a}`),this.url.searchParams.set(g,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:h=!1,buffers:m=!1,wal:p=!1,format:g="text"}={}){var y;const v=[a?"analyze":null,l?"verbose":null,h?"settings":null,m?"buffers":null,p?"wal":null].filter(Boolean).join("|"),C=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${C}"; options=${v};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Va.default=r,Va}var C0;function bh(){if(C0)return za;C0=1,Object.defineProperty(za,"__esModule",{value:!0});const e=Qs.__importDefault(hm()),r=new RegExp("[,()]");class i extends e.default{eq(l,h){return this.url.searchParams.append(l,`eq.${h}`),this}neq(l,h){return this.url.searchParams.append(l,`neq.${h}`),this}gt(l,h){return this.url.searchParams.append(l,`gt.${h}`),this}gte(l,h){return this.url.searchParams.append(l,`gte.${h}`),this}lt(l,h){return this.url.searchParams.append(l,`lt.${h}`),this}lte(l,h){return this.url.searchParams.append(l,`lte.${h}`),this}like(l,h){return this.url.searchParams.append(l,`like.${h}`),this}likeAllOf(l,h){return this.url.searchParams.append(l,`like(all).{${h.join(",")}}`),this}likeAnyOf(l,h){return this.url.searchParams.append(l,`like(any).{${h.join(",")}}`),this}ilike(l,h){return this.url.searchParams.append(l,`ilike.${h}`),this}ilikeAllOf(l,h){return this.url.searchParams.append(l,`ilike(all).{${h.join(",")}}`),this}ilikeAnyOf(l,h){return this.url.searchParams.append(l,`ilike(any).{${h.join(",")}}`),this}is(l,h){return this.url.searchParams.append(l,`is.${h}`),this}in(l,h){const m=Array.from(new Set(h)).map(p=>typeof p=="string"&&r.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(l,`in.(${m})`),this}contains(l,h){return typeof h=="string"?this.url.searchParams.append(l,`cs.${h}`):Array.isArray(h)?this.url.searchParams.append(l,`cs.{${h.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(h)}`),this}containedBy(l,h){return typeof h=="string"?this.url.searchParams.append(l,`cd.${h}`):Array.isArray(h)?this.url.searchParams.append(l,`cd.{${h.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(h)}`),this}rangeGt(l,h){return this.url.searchParams.append(l,`sr.${h}`),this}rangeGte(l,h){return this.url.searchParams.append(l,`nxl.${h}`),this}rangeLt(l,h){return this.url.searchParams.append(l,`sl.${h}`),this}rangeLte(l,h){return this.url.searchParams.append(l,`nxr.${h}`),this}rangeAdjacent(l,h){return this.url.searchParams.append(l,`adj.${h}`),this}overlaps(l,h){return typeof h=="string"?this.url.searchParams.append(l,`ov.${h}`):this.url.searchParams.append(l,`ov.{${h.join(",")}}`),this}textSearch(l,h,{config:m,type:p}={}){let g="";p==="plain"?g="pl":p==="phrase"?g="ph":p==="websearch"&&(g="w");const y=m===void 0?"":`(${m})`;return this.url.searchParams.append(l,`${g}fts${y}.${h}`),this}match(l){return Object.entries(l).forEach(([h,m])=>{this.url.searchParams.append(h,`eq.${m}`)}),this}not(l,h,m){return this.url.searchParams.append(l,`not.${h}.${m}`),this}or(l,{foreignTable:h,referencedTable:m=h}={}){const p=m?`${m}.or`:"or";return this.url.searchParams.append(p,`(${l})`),this}filter(l,h,m){return this.url.searchParams.append(l,`${h}.${m}`),this}}return za.default=i,za}var _0;function fm(){if(_0)return Ua;_0=1,Object.defineProperty(Ua,"__esModule",{value:!0});const e=Qs.__importDefault(bh());class r{constructor(a,{headers:l={},schema:h,fetch:m}){this.url=a,this.headers=new Headers(l),this.schema=h,this.fetch=m}select(a,l){const{head:h=!1,count:m}=l??{},p=h?"HEAD":"GET";let g=!1;const y=(a??"*").split("").map(v=>/\s/.test(v)&&!g?"":(v==='"'&&(g=!g),v)).join("");return this.url.searchParams.set("select",y),m&&this.headers.append("Prefer",`count=${m}`),new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:h=!0}={}){var m;const p="POST";if(l&&this.headers.append("Prefer",`count=${l}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const g=a.reduce((y,v)=>y.concat(Object.keys(v)),[]);if(g.length>0){const y=[...new Set(g)].map(v=>`"${v}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:h=!1,count:m,defaultToNull:p=!0}={}){var g;const y="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),m&&this.headers.append("Prefer",`count=${m}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const v=a.reduce((C,T)=>C.concat(Object.keys(T)),[]);if(v.length>0){const C=[...new Set(v)].map(T=>`"${T}"`);this.url.searchParams.set("columns",C.join(","))}}return new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(a,{count:l}={}){var h;const m="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:a}={}){var l;const h="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return Ua.default=r,Ua}var A0;function rE(){if(A0)return Fa;A0=1,Object.defineProperty(Fa,"__esModule",{value:!0});const t=Qs,e=t.__importDefault(fm()),r=t.__importDefault(bh());class i{constructor(l,{headers:h={},schema:m,fetch:p}={}){this.url=l,this.headers=new Headers(h),this.schemaName=m,this.fetch=p}from(l){const h=new URL(`${this.url}/${l}`);return new e.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new i(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,h={},{head:m=!1,get:p=!1,count:g}={}){var y;let v;const C=new URL(`${this.url}/rpc/${l}`);let T;m||p?(v=m?"HEAD":"GET",Object.entries(h).filter(([L,j])=>j!==void 0).map(([L,j])=>[L,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([L,j])=>{C.searchParams.append(L,j)})):(v="POST",T=h);const O=new Headers(this.headers);return g&&O.set("Prefer",`count=${g}`),new r.default({method:v,url:C,headers:O,schema:this.schemaName,body:T,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return Fa.default=i,Fa}Object.defineProperty(hr,"__esModule",{value:!0});var gm=hr.PostgrestError=Am=hr.PostgrestBuilder=Cm=hr.PostgrestTransformBuilder=vm=hr.PostgrestFilterBuilder=xm=hr.PostgrestQueryBuilder=mm=hr.PostgrestClient=void 0;const Zs=Qs,pm=Zs.__importDefault(rE());var mm=hr.PostgrestClient=pm.default;const wm=Zs.__importDefault(fm());var xm=hr.PostgrestQueryBuilder=wm.default;const ym=Zs.__importDefault(bh());var vm=hr.PostgrestFilterBuilder=ym.default;const Em=Zs.__importDefault(hm());var Cm=hr.PostgrestTransformBuilder=Em.default;const _m=Zs.__importDefault(dm());var Am=hr.PostgrestBuilder=_m.default;const Sm=Zs.__importDefault(cm());gm=hr.PostgrestError=Sm.default;var bm=hr.default={PostgrestClient:pm.default,PostgrestQueryBuilder:wm.default,PostgrestFilterBuilder:ym.default,PostgrestTransformBuilder:Em.default,PostgrestBuilder:_m.default,PostgrestError:Sm.default};const nE=Ad({__proto__:null,get PostgrestBuilder(){return Am},get PostgrestClient(){return mm},get PostgrestError(){return gm},get PostgrestFilterBuilder(){return vm},get PostgrestQueryBuilder(){return xm},get PostgrestTransformBuilder(){return Cm},default:bm},[hr]),{PostgrestClient:iE,PostgrestQueryBuilder:I3,PostgrestFilterBuilder:T3,PostgrestTransformBuilder:N3,PostgrestBuilder:O3,PostgrestError:R3}=bm||nE;class sE{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const i=r.node,a=parseInt(i.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const i=this.getWebSocketConstructor();return new i(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const oE="2.81.1",aE=`realtime-js/${oE}`,Im="1.0.0",lE="2.0.0",S0=Im,hd=1e4,uE=1e3,cE=100;var Mi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Mi||(Mi={}));var jt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(jt||(jt={}));var Wr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Wr||(Wr={}));var fd;(function(t){t.websocket="websocket"})(fd||(fd={}));var Di;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Di||(Di={}));class dE{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,r){if(this._isArrayBuffer(e.payload))return r(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(i))}_binaryEncodePush(e){const{join_ref:r,ref:i,event:a,topic:l,payload:h}=e,m=this.META_LENGTH+r.length+i.length+l.length+a.length,p=new ArrayBuffer(this.HEADER_LENGTH+m);let g=new DataView(p),y=0;g.setUint8(y++,this.KINDS.push),g.setUint8(y++,r.length),g.setUint8(y++,i.length),g.setUint8(y++,l.length),g.setUint8(y++,a.length),Array.from(r,C=>g.setUint8(y++,C.charCodeAt(0))),Array.from(i,C=>g.setUint8(y++,C.charCodeAt(0))),Array.from(l,C=>g.setUint8(y++,C.charCodeAt(0))),Array.from(a,C=>g.setUint8(y++,C.charCodeAt(0)));var v=new Uint8Array(p.byteLength+h.byteLength);return v.set(new Uint8Array(p),0),v.set(new Uint8Array(h),p.byteLength),v.buffer}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,i;const{join_ref:a,ref:l,topic:h}=e,m=e.payload.event,p=(i=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:new ArrayBuffer(0),g=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+l.length+h.length+m.length,y=new ArrayBuffer(this.HEADER_LENGTH+g);let v=new DataView(y),C=0;v.setUint8(C++,this.KINDS.userBroadcastPush),v.setUint8(C++,a.length),v.setUint8(C++,l.length),v.setUint8(C++,h.length),v.setUint8(C++,m.length),v.setUint8(C++,this.BINARY_ENCODING),Array.from(a,O=>v.setUint8(C++,O.charCodeAt(0))),Array.from(l,O=>v.setUint8(C++,O.charCodeAt(0))),Array.from(h,O=>v.setUint8(C++,O.charCodeAt(0))),Array.from(m,O=>v.setUint8(C++,O.charCodeAt(0)));var T=new Uint8Array(y.byteLength+p.byteLength);return T.set(new Uint8Array(y),0),T.set(new Uint8Array(p),y.byteLength),T.buffer}_encodeJsonUserBroadcastPush(e){var r,i;const{join_ref:a,ref:l,topic:h}=e,m=e.payload.event,p=(i=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:{},y=new TextEncoder().encode(JSON.stringify(p)).buffer,v=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+l.length+h.length+m.length,C=new ArrayBuffer(this.HEADER_LENGTH+v);let T=new DataView(C),O=0;T.setUint8(O++,this.KINDS.userBroadcastPush),T.setUint8(O++,a.length),T.setUint8(O++,l.length),T.setUint8(O++,h.length),T.setUint8(O++,m.length),T.setUint8(O++,this.JSON_ENCODING),Array.from(a,j=>T.setUint8(O++,j.charCodeAt(0))),Array.from(l,j=>T.setUint8(O++,j.charCodeAt(0))),Array.from(h,j=>T.setUint8(O++,j.charCodeAt(0))),Array.from(m,j=>T.setUint8(O++,j.charCodeAt(0)));var L=new Uint8Array(C.byteLength+y.byteLength);return L.set(new Uint8Array(C),0),L.set(new Uint8Array(y),C.byteLength),L.buffer}decode(e,r){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return r(i)}if(typeof e=="string"){const i=JSON.parse(e),[a,l,h,m,p]=i;return r({join_ref:a,ref:l,topic:h,event:m,payload:p})}return r({})}_binaryDecode(e){const r=new DataView(e),i=r.getUint8(0),a=new TextDecoder;switch(i){case this.KINDS.push:return this._decodePush(e,r,a);case this.KINDS.reply:return this._decodeReply(e,r,a);case this.KINDS.broadcast:return this._decodeBroadcast(e,r,a);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,a)}}_decodePush(e,r,i){const a=r.getUint8(1),l=r.getUint8(2),h=r.getUint8(3);let m=this.HEADER_LENGTH+this.META_LENGTH-1;const p=i.decode(e.slice(m,m+a));m=m+a;const g=i.decode(e.slice(m,m+l));m=m+l;const y=i.decode(e.slice(m,m+h));m=m+h;const v=JSON.parse(i.decode(e.slice(m,e.byteLength)));return{join_ref:p,ref:null,topic:g,event:y,payload:v}}_decodeReply(e,r,i){const a=r.getUint8(1),l=r.getUint8(2),h=r.getUint8(3),m=r.getUint8(4);let p=this.HEADER_LENGTH+this.META_LENGTH;const g=i.decode(e.slice(p,p+a));p=p+a;const y=i.decode(e.slice(p,p+l));p=p+l;const v=i.decode(e.slice(p,p+h));p=p+h;const C=i.decode(e.slice(p,p+m));p=p+m;const T=JSON.parse(i.decode(e.slice(p,e.byteLength))),O={status:C,response:T};return{join_ref:g,ref:y,topic:v,event:Wr.reply,payload:O}}_decodeBroadcast(e,r,i){const a=r.getUint8(1),l=r.getUint8(2);let h=this.HEADER_LENGTH+2;const m=i.decode(e.slice(h,h+a));h=h+a;const p=i.decode(e.slice(h,h+l));h=h+l;const g=JSON.parse(i.decode(e.slice(h,e.byteLength)));return{join_ref:null,ref:null,topic:m,event:p,payload:g}}_decodeUserBroadcast(e,r,i){const a=r.getUint8(1),l=r.getUint8(2),h=r.getUint8(3),m=r.getUint8(4);let p=this.HEADER_LENGTH+4;const g=i.decode(e.slice(p,p+a));p=p+a;const y=i.decode(e.slice(p,p+l));p=p+l;const v=i.decode(e.slice(p,p+h));p=p+h;const C=e.slice(p,e.byteLength),T=m===this.JSON_ENCODING?JSON.parse(i.decode(C)):C,O={type:this.BROADCAST,event:y,payload:T};return h>0&&(O.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST,payload:O}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class Tm{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ut;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ut||(ut={}));const b0=(t,e,r={})=>{var i;const a=(i=r.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((l,h)=>(l[h]=hE(h,t,e,a),l),{}):{}},hE=(t,e,r,i)=>{const a=e.find(m=>m.name===t),l=a==null?void 0:a.type,h=r[t];return l&&!i.includes(l)?Nm(l,h):gd(h)},Nm=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return mE(e,r)}switch(t){case ut.bool:return fE(e);case ut.float4:case ut.float8:case ut.int2:case ut.int4:case ut.int8:case ut.numeric:case ut.oid:return gE(e);case ut.json:case ut.jsonb:return pE(e);case ut.timestamp:return wE(e);case ut.abstime:case ut.date:case ut.daterange:case ut.int4range:case ut.int8range:case ut.money:case ut.reltime:case ut.text:case ut.time:case ut.timestamptz:case ut.timetz:case ut.tsrange:case ut.tstzrange:return gd(e);default:return gd(e)}},gd=t=>t,fE=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},gE=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},pE=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},mE=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,i=t[r];if(t[0]==="{"&&i==="}"){let l;const h=t.slice(1,r);try{l=JSON.parse("["+h+"]")}catch{l=h?h.split(","):[]}return l.map(m=>Nm(e,m))}return t},wE=t=>typeof t=="string"?t.replace(" ","T"):t,Om=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class tc{constructor(e,r,i={},a=hd){this.channel=e,this.event=r,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var i;return this._hasReceived(e)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var I0;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(I0||(I0={}));class Do{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:l,onLeave:h,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Do.syncState(this.state,a,l,h),this.pendingDiffs.forEach(p=>{this.state=Do.syncDiff(this.state,p,l,h)}),this.pendingDiffs=[],m()}),this.channel._on(i.diff,{},a=>{const{onJoin:l,onLeave:h,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Do.syncDiff(this.state,a,l,h),m())}),this.onJoin((a,l,h)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:h})}),this.onLeave((a,l,h)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,i,a){const l=this.cloneDeep(e),h=this.transformState(r),m={},p={};return this.map(l,(g,y)=>{h[g]||(p[g]=y)}),this.map(h,(g,y)=>{const v=l[g];if(v){const C=y.map(j=>j.presence_ref),T=v.map(j=>j.presence_ref),O=y.filter(j=>T.indexOf(j.presence_ref)<0),L=v.filter(j=>C.indexOf(j.presence_ref)<0);O.length>0&&(m[g]=O),L.length>0&&(p[g]=L)}else m[g]=y}),this.syncDiff(l,{joins:m,leaves:p},i,a)}static syncDiff(e,r,i,a){const{joins:l,leaves:h}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(l,(m,p)=>{var g;const y=(g=e[m])!==null&&g!==void 0?g:[];if(e[m]=this.cloneDeep(p),y.length>0){const v=e[m].map(T=>T.presence_ref),C=y.filter(T=>v.indexOf(T.presence_ref)<0);e[m].unshift(...C)}i(m,y,p)}),this.map(h,(m,p)=>{let g=e[m];if(!g)return;const y=p.map(v=>v.presence_ref);g=g.filter(v=>y.indexOf(v.presence_ref)<0),e[m]=g,a(m,g,p),g.length===0&&delete e[m]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(i=>r(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,i)=>{const a=e[i];return"metas"in a?r[i]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[i]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var T0;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(T0||(T0={}));var Po;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Po||(Po={}));var Tn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Tn||(Tn={}));class Ih{constructor(e,r={config:{}},i){var a,l;if(this.topic=e,this.params=r,this.socket=i,this.bindings={},this.state=jt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new tc(this,Wr.join,this.params,this.timeout),this.rejoinTimer=new Tm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jt.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Wr.reply,{},(h,m)=>{this._trigger(this._replyEventName(m),h)}),this.presence=new Do(this),this.broadcastEndpointURL=Om(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var i,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==jt.closed){const{config:{broadcast:h,presence:m,private:p}}=this.params,g=(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(T=>T.filter))!==null&&a!==void 0?a:[],y=!!this.bindings[Po.PRESENCE]&&this.bindings[Po.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,v={},C={broadcast:h,presence:Object.assign(Object.assign({},m),{enabled:y}),postgres_changes:g,private:p};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(T=>e==null?void 0:e(Tn.CHANNEL_ERROR,T)),this._onClose(()=>e==null?void 0:e(Tn.CLOSED)),this.updateJoinPayload(Object.assign({config:C},v)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:T})=>{var O;if(this.socket.setAuth(),T===void 0){e==null||e(Tn.SUBSCRIBED);return}else{const L=this.bindings.postgres_changes,j=(O=L==null?void 0:L.length)!==null&&O!==void 0?O:0,R=[];for(let b=0;b<j;b++){const S=L[b],{filter:{event:M,schema:Y,table:G,filter:U}}=S,P=T&&T[b];if(P&&P.event===M&&P.schema===Y&&P.table===G&&P.filter===U)R.push(Object.assign(Object.assign({},S),{id:P.id}));else{this.unsubscribe(),this.state=jt.errored,e==null||e(Tn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,e&&e(Tn.SUBSCRIBED);return}}).receive("error",T=>{this.state=jt.errored,e==null||e(Tn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Tn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,i){return this.state===jt.joined&&e===Po.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,i)}async httpSend(e,r,i={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const h={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(a=i.timeout)!==null&&a!==void 0?a:this.timeout);if(m.status===202)return{success:!0};let p=m.statusText;try{const g=await m.json();p=g.error||g.message||p}catch{}return Promise.reject(new Error(p))}async send(e,r={}){var i,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:h}=e,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=g.body)===null||a===void 0?void 0:a.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var h,m,p;const g=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(m=(h=this.params)===null||h===void 0?void 0:h.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&l("ok"),g.receive("ok",()=>l("ok")),g.receive("error",()=>l("error")),g.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=jt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Wr.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new tc(this,Wr.leave,{},e),i.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=jt.closed,this.bindings={}}async _fetchWithTimeout(e,r,i){const a=new AbortController,l=setTimeout(()=>a.abort(),i),h=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(l),h}_push(e,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new tc(this,e,r,i);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>cE){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,i){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,i){var a,l;const h=e.toLocaleLowerCase(),{close:m,error:p,leave:g,join:y}=Wr;if(i&&[m,p,g,y].indexOf(h)>=0&&i!==this._joinRef())return;let C=this._onMessage(h,r,i);if(r&&!C)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(T=>{var O,L,j;return((O=T.filter)===null||O===void 0?void 0:O.event)==="*"||((j=(L=T.filter)===null||L===void 0?void 0:L.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===h}).map(T=>T.callback(C,i)):(l=this.bindings[h])===null||l===void 0||l.filter(T=>{var O,L,j,R,b,S;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in T){const M=T.id,Y=(O=T.filter)===null||O===void 0?void 0:O.event;return M&&((L=r.ids)===null||L===void 0?void 0:L.includes(M))&&(Y==="*"||(Y==null?void 0:Y.toLocaleLowerCase())===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const M=(b=(R=T==null?void 0:T.filter)===null||R===void 0?void 0:R.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return M==="*"||M===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===h}).map(T=>{if(typeof C=="object"&&"ids"in C){const O=C.data,{schema:L,table:j,commit_timestamp:R,type:b,errors:S}=O;C=Object.assign(Object.assign({},{schema:L,table:j,commit_timestamp:R,eventType:b,new:{},old:{},errors:S}),this._getPayloadRecords(O))}T.callback(C,i)})}_isClosed(){return this.state===jt.closed}_isJoined(){return this.state===jt.joined}_isJoining(){return this.state===jt.joining}_isLeaving(){return this.state===jt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,i){const a=e.toLocaleLowerCase(),l={type:a,filter:r,callback:i};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,r){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&Ih.isEqual(a.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const i in e)if(e[i]!==r[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Wr.close,{},e)}_onError(e){this._on(Wr.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=b0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=b0(e.columns,e.old_record)),r}}const rc=()=>{},Ga={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},xE=[1e3,2e3,5e3,1e4],yE=1e4,vE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class EE{constructor(e,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hd,this.transport=null,this.heartbeatIntervalMs=Ga.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=rc,this.ref=0,this.reconnectTimer=null,this.vsn=S0,this.logger=rc,this.conn=null,this.sendBuffer=[],this.serializer=new dE,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((i=r==null?void 0:r.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${fd.websocket}`,this.httpEndpoint=Om(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=sE.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,i){this.logger(e,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Mi.connecting:return Di.Connecting;case Mi.open:return Di.Open;case Mi.closing:return Di.Closing;default:return Di.Closed}}isConnected(){return this.connectionState()===Di.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const i=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===i);if(a)return a;{const l=new Ih(`realtime:${e}`,r,this);return this.channels.push(l),l}}push(e){const{topic:r,event:i,payload:a,ref:l}=e,h=()=>{this.encode(e,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${r} ${i} (${l})`,a),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(uE,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ga.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:a,payload:l,ref:h}=r,m=h?`(${h})`:"",p=l.status||"";this.log("receive",`${p} ${i} ${a} ${m}`.trim(),l),this.channels.filter(g=>g._isMember(i)).forEach(g=>g._trigger(a,l,h)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Mi.open||this.conn.readyState===Mi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Wr.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const i=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${i}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const i=new Blob([vE],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const a={access_token:r,version:aE};r&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(Wr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(r)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Tm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ga.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,i,a,l,h,m,p,g,y,v,C,T;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:hd,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Ga.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(h=e==null?void 0:e.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(m=e==null?void 0:e.heartbeatCallback)!==null&&m!==void 0?m:rc,this.vsn=(p=e==null?void 0:e.vsn)!==null&&p!==void 0?p:S0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e==null?void 0:e.reconnectAfterMs)!==null&&g!==void 0?g:O=>xE[O-1]||yE,this.vsn){case Im:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:(O,L)=>L(JSON.stringify(O)),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:(O,L)=>L(JSON.parse(O));break;case lE:this.encode=(C=e==null?void 0:e.encode)!==null&&C!==void 0?C:this.serializer.encode.bind(this.serializer),this.decode=(T=e==null?void 0:e.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Th extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function yt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class CE extends Th{constructor(e,r,i){super(e),this.name="StorageApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class pd extends Th{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Nh=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),_E=()=>Response,md=t=>{if(Array.isArray(t))return t.map(r=>md(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,i])=>{const a=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=md(i)}),e},AE=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},nc=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},SE=(t,e,r)=>xe(void 0,void 0,void 0,function*(){const i=yield _E();t instanceof i&&!(r!=null&&r.noResolveJson)?t.json().then(a=>{const l=t.status||500,h=(a==null?void 0:a.statusCode)||l+"";e(new CE(nc(a),l,h))}).catch(a=>{e(new pd(nc(a),a))}):e(new pd(nc(t),t))}),bE=(t,e,r,i)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!i?a:(AE(i)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(i)):a.body=i,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),r))};function da(t,e,r,i,a,l){return xe(this,void 0,void 0,function*(){return new Promise((h,m)=>{t(r,bE(e,i,a,l)).then(p=>{if(!p.ok)throw p;return i!=null&&i.noResolveJson?p:p.json()}).then(p=>h(p)).catch(p=>SE(p,m,i))})})}function ta(t,e,r,i){return xe(this,void 0,void 0,function*(){return da(t,"GET",e,r,i)})}function on(t,e,r,i,a){return xe(this,void 0,void 0,function*(){return da(t,"POST",e,i,a,r)})}function wd(t,e,r,i,a){return xe(this,void 0,void 0,function*(){return da(t,"PUT",e,i,a,r)})}function IE(t,e,r,i){return xe(this,void 0,void 0,function*(){return da(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),i)})}function Oh(t,e,r,i,a){return xe(this,void 0,void 0,function*(){return da(t,"DELETE",e,i,a,r)})}class TE{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return xe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yt(e))return{data:null,error:e};throw e}})}}var Rm;class NE{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[Rm]="BlobDownloadBuilder",this.promise=null}asStream(){return new TE(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return xe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yt(e))return{data:null,error:e};throw e}})}}Rm=Symbol.toStringTag;const OE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},N0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class RE{constructor(e,r={},i,a){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=i,this.fetch=Nh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,i,a){return xe(this,void 0,void 0,function*(){try{let l;const h=Object.assign(Object.assign({},N0),a);let m=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(h.upsert)});const p=h.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",h.cacheControl),p&&l.append("metadata",this.encodeMetadata(p)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.has("cacheControl")||l.append("cacheControl",h.cacheControl),p&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(p))):(l=i,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType,p&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(p))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!h.duplex&&(h.duplex="half")),a!=null&&a.headers&&(m=Object.assign(Object.assign({},m),a.headers));const g=this._removeEmptyFolders(r),y=this._getFinalPath(g),v=yield(e=="PUT"?wd:on)(this.fetch,`${this.url}/object/${y}`,l,Object.assign({headers:m},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{data:{path:g,id:v.Id,fullPath:v.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(yt(l))return{data:null,error:l};throw l}})}upload(e,r,i){return xe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,i)})}uploadToSignedUrl(e,r,i,a){return xe(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),h=this._getFinalPath(l),m=new URL(this.url+`/object/upload/sign/${h}`);m.searchParams.set("token",r);try{let p;const g=Object.assign({upsert:N0.upsert},a),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&i instanceof Blob?(p=new FormData,p.append("cacheControl",g.cacheControl),p.append("",i)):typeof FormData<"u"&&i instanceof FormData?(p=i,p.append("cacheControl",g.cacheControl)):(p=i,y["cache-control"]=`max-age=${g.cacheControl}`,y["content-type"]=g.contentType);const v=yield wd(this.fetch,m.toString(),p,{headers:y});return{data:{path:l,fullPath:v.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(yt(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(e,r){return xe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const l=yield on(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:a}),h=new URL(this.url+l.url),m=h.searchParams.get("token");if(!m)throw new Th("No token returned by API");return{data:{signedUrl:h.toString(),path:e,token:m},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(yt(i))return{data:null,error:i};throw i}})}update(e,r,i){return xe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,i)})}move(e,r,i){return xe(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}copy(e,r,i){return xe(this,void 0,void 0,function*(){try{return{data:{path:(yield on(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,i){return xe(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield on(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const h=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${h}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,i){return xe(this,void 0,void 0,function*(){try{const a=yield on(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}download(e,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),h=l?`?${l}`:"",m=this._getFinalPath(e),p=()=>ta(this.fetch,`${this.url}/${a}/${m}${h}`,{headers:this.headers,noResolveJson:!0});return new NE(p,this.shouldThrowOnError)}info(e){return xe(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const i=yield ta(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:md(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(yt(i))return{data:null,error:i};throw i}})}exists(e){return xe(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield IE(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(yt(i)&&i instanceof pd){const a=i.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,r){const i=this._getFinalPath(e),a=[],l=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";l!==""&&a.push(l);const m=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",p=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});p!==""&&a.push(p);let g=a.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${i}${g}`)}}}remove(e){return xe(this,void 0,void 0,function*(){try{return{data:yield Oh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}list(e,r,i){return xe(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},OE),r),{prefix:e||""});return{data:yield on(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},i),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}listV2(e,r){return xe(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield on(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(yt(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const km="2.81.1",Mm={"X-Client-Info":`storage-js/${km}`};class kE{constructor(e,r={},i,a){this.shouldThrowOnError=!1;const l=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mm),r),this.fetch=Nh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return xe(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield ta(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}getBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield ta(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}createBucket(e){return xe(this,arguments,void 0,function*(r,i={public:!1}){try{return{data:yield on(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}updateBucket(e,r){return xe(this,void 0,void 0,function*(){try{return{data:yield wd(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(yt(i))return{data:null,error:i};throw i}})}emptyBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield Oh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class ME{constructor(e,r={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mm),r),this.fetch=Nh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}listBuckets(e){return xe(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const i=r.toString(),a=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield ta(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield Oh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}}const Rh={"X-Client-Info":`storage-js/${km}`,"Content-Type":"application/json"};class Dm extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Rr(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class ic extends Dm{constructor(e,r,i){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class DE extends Dm{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var O0;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(O0||(O0={}));const kh=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),PE=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},R0=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),LE=(t,e,r)=>xe(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const a=t.status||500,l=t;if(typeof l.json=="function")l.json().then(h=>{const m=(h==null?void 0:h.statusCode)||(h==null?void 0:h.code)||a+"";e(new ic(R0(h),a,m))}).catch(()=>{const h=a+"",m=l.statusText||`HTTP ${a} error`;e(new ic(m,a,h))});else{const h=a+"",m=l.statusText||`HTTP ${a} error`;e(new ic(m,a,h))}}else e(new DE(R0(t),t))}),BE=(t,e,r,i)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return i?(PE(i)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(i)):a.body=i,Object.assign(Object.assign({},a),r)):a};function jE(t,e,r,i,a,l){return xe(this,void 0,void 0,function*(){return new Promise((h,m)=>{t(r,BE(e,i,a,l)).then(p=>{if(!p.ok)throw p;if(i!=null&&i.noResolveJson)return p;const g=p.headers.get("content-type");return!g||!g.includes("application/json")?{}:p.json()}).then(p=>h(p)).catch(p=>LE(p,m,i))})})}function kr(t,e,r,i,a){return xe(this,void 0,void 0,function*(){return jE(t,"POST",e,i,a,r)})}class FE{constructor(e,r={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rh),r),this.fetch=kh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return xe(this,void 0,void 0,function*(){try{return{data:(yield kr(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}getIndex(e,r){return xe(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}})}listIndexes(e){return xe(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return xe(this,void 0,void 0,function*(){try{return{data:(yield kr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}})}}class UE{constructor(e,r={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rh),r),this.fetch=kh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return xe(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield kr(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}getVectors(e){return xe(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}listVectors(e){return xe(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield kr(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}queryVectors(e){return xe(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}deleteVectors(e){return xe(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield kr(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}}class zE{constructor(e,r={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rh),r),this.fetch=kh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:(yield kr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}getBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}listBuckets(){return xe(this,arguments,void 0,function*(e={}){try{return{data:yield kr(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:(yield kr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}})}}class VE extends zE{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new HE(this.url,this.headers,e,this.fetch)}}class HE extends FE{constructor(e,r,i,a){super(e,r,a),this.vectorBucketName=i}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return xe(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return xe(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return xe(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return xe(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new WE(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class WE extends UE{constructor(e,r,i,a,l){super(e,r,l),this.vectorBucketName=i,this.indexName=a}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return xe(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return xe(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return xe(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return xe(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return xe(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class GE extends kE{constructor(e,r={},i,a){super(e,r,i,a)}from(e){return new RE(this.url,this.headers,e,this.fetch)}get vectors(){return new VE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ME(this.url+"/iceberg",this.headers,this.fetch)}}const YE="2.81.1";let _o="";typeof Deno<"u"?_o="deno":typeof document<"u"?_o="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_o="react-native":_o="node";const XE={"X-Client-Info":`supabase-js-${_o}/${YE}`},$E={headers:XE},KE={schema:"public"},qE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},QE={},ZE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),JE=()=>Headers,eC=(t,e,r)=>{const i=ZE(r),a=JE();return async(l,h)=>{var m;const p=(m=await e())!==null&&m!==void 0?m:t;let g=new a(h==null?void 0:h.headers);return g.has("apikey")||g.set("apikey",t),g.has("Authorization")||g.set("Authorization",`Bearer ${p}`),i(l,Object.assign(Object.assign({},h),{headers:g}))}};function tC(t){return t.endsWith("/")?t:t+"/"}function rC(t,e){var r,i;const{db:a,auth:l,realtime:h,global:m}=t,{db:p,auth:g,realtime:y,global:v}=e,C={db:Object.assign(Object.assign({},p),a),auth:Object.assign(Object.assign({},g),l),realtime:Object.assign(Object.assign({},y),h),storage:{},global:Object.assign(Object.assign(Object.assign({},v),m),{headers:Object.assign(Object.assign({},(r=v==null?void 0:v.headers)!==null&&r!==void 0?r:{}),(i=m==null?void 0:m.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return t.accessToken?C.accessToken=t.accessToken:delete C.accessToken,C}function nC(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(tC(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Pm="2.81.1",ps=30*1e3,xd=3,sc=xd*ps,iC="http://localhost:9999",sC="supabase.auth.token",oC={"X-Client-Info":`gotrue-js/${Pm}`},yd="X-Supabase-Api-Version",Lm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},aC=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,lC=10*60*1e3;class ra extends Error{constructor(e,r,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function Ce(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class uC extends ra{constructor(e,r,i){super(e,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function cC(t){return Ce(t)&&t.name==="AuthApiError"}class Pi extends ra{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Ei extends ra{constructor(e,r,i,a){super(e,i,a),this.name=r,this.status=i}}class tn extends Ei{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function dC(t){return Ce(t)&&t.name==="AuthSessionMissingError"}class ls extends Ei{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ya extends Ei{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Xa extends Ei{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hC(t){return Ce(t)&&t.name==="AuthImplicitGrantRedirectError"}class k0 extends Ei{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vd extends Ei{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function oc(t){return Ce(t)&&t.name==="AuthRetryableFetchError"}class M0 extends Ei{constructor(e,r,i){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class Ed extends Ei{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ll="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),D0=` 	
\r=`.split(""),fC=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<D0.length;e+=1)t[D0[e].charCodeAt(0)]=-2;for(let e=0;e<Ll.length;e+=1)t[Ll[e].charCodeAt(0)]=e;return t})();function P0(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;r(Ll[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;r(Ll[i]),e.queuedBits-=6}}function Bm(t,e,r){const i=fC[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function L0(t){const e=[],r=h=>{e.push(String.fromCodePoint(h))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=h=>{mC(h,i,r)};for(let h=0;h<t.length;h+=1)Bm(t.charCodeAt(h),a,l);return e.join("")}function gC(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function pC(t,e){for(let r=0;r<t.length;r+=1){let i=t.charCodeAt(r);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}gC(i,e)}}function mC(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let i=1;i<6;i+=1)if(!(t>>7-i&1)){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Ls(t){const e=[],r={queue:0,queuedBits:0},i=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)Bm(t.charCodeAt(a),r,i);return new Uint8Array(e)}function wC(t){const e=[];return pC(t,r=>e.push(r)),new Uint8Array(e)}function Fi(t){const e=[],r={queue:0,queuedBits:0},i=a=>{e.push(a)};return t.forEach(a=>P0(a,r,i)),P0(null,r,i),e.join("")}function xC(t){return Math.round(Date.now()/1e3)+t}function yC(){return Symbol("auth-callback")}const Jt=()=>typeof window<"u"&&typeof document<"u",Ti={tested:!1,writable:!1},jm=()=>{if(!Jt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ti.tested)return Ti.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ti.tested=!0,Ti.writable=!0}catch{Ti.tested=!0,Ti.writable=!1}return Ti.writable};function vC(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return r.searchParams.forEach((i,a)=>{e[a]=i}),e}const Fm=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),EC=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ms=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Ni=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},$n=async(t,e)=>{await t.removeItem(e)};class lu{constructor(){this.promise=new lu.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}lu.promiseConstructor=Promise;function ac(t){const e=t.split(".");if(e.length!==3)throw new Ed("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!aC.test(e[i]))throw new Ed("JWT not in base64url format");return{header:JSON.parse(L0(e[0])),payload:JSON.parse(L0(e[1])),signature:Ls(e[2]),raw:{header:e[0],payload:e[1]}}}async function CC(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function _C(t,e){return new Promise((i,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const h=await t(l);if(!e(l,null,h)){i(h);return}}catch(h){if(!e(l,h)){a(h);return}}})()})}function AC(t){return("0"+t.toString(16)).substr(-2)}function SC(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let a="";for(let l=0;l<56;l++)a+=r.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(e),Array.from(e,AC).join("")}async function bC(t){const r=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(i);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function IC(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await bC(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function us(t,e,r=!1){const i=SC();let a=i;r&&(a+="/PASSWORD_RECOVERY"),await ms(t,`${e}-code-verifier`,a);const l=await IC(i);return[l,i===l?"plain":"s256"]}const TC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function NC(t){const e=t.headers.get(yd);if(!e||!e.match(TC))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function OC(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function RC(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const kC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function cs(t){if(!kC.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function lc(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function MC(t,e){return new Proxy(t,{get:(r,i,a)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const l=i.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,i,a)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,i,a)}})}function B0(t){return JSON.parse(JSON.stringify(t))}const ki=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),DC=[502,503,504];async function j0(t){var e;if(!EC(t))throw new vd(ki(t),0);if(DC.includes(t.status))throw new vd(ki(t),t.status);let r;try{r=await t.json()}catch(l){throw new Pi(ki(l),l)}let i;const a=NC(t);if(a&&a.getTime()>=Lm["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new M0(ki(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new tn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,h)=>l&&typeof h=="string",!0))throw new M0(ki(r),t.status,r.weak_password.reasons);throw new uC(ki(r),t.status||500,i)}const PC=(t,e,r,i)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),r))};async function Ne(t,e,r,i){var a;const l=Object.assign({},i==null?void 0:i.headers);l[yd]||(l[yd]=Lm["2024-01-01"].name),i!=null&&i.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const h=(a=i==null?void 0:i.query)!==null&&a!==void 0?a:{};i!=null&&i.redirectTo&&(h.redirect_to=i.redirectTo);const m=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",p=await LC(t,e,r+m,{headers:l,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(p):{data:Object.assign({},p),error:null}}async function LC(t,e,r,i,a,l){const h=PC(e,i,a,l);let m;try{m=await t(r,Object.assign({},h))}catch(p){throw console.error(p),new vd(ki(p),0)}if(m.ok||await j0(m),i!=null&&i.noResolveJson)return m;try{return await m.json()}catch(p){await j0(p)}}function rn(t){var e;let r=null;FC(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=xC(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:i},error:null}}function F0(t){const e=rn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ti(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function BC(t){return{data:t,error:null}}function jC(t){const{action_link:e,email_otp:r,hashed_token:i,redirect_to:a,verification_type:l}=t,h=qs(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:e,email_otp:r,hashed_token:i,redirect_to:a,verification_type:l},p=Object.assign({},h);return{data:{properties:m,user:p},error:null}}function U0(t){return t}function FC(t){return t.access_token&&t.refresh_token&&t.expires_in}const uc=["global","local","others"];class UC{constructor({url:e="",headers:r={},fetch:i}){this.url=e,this.headers=r,this.fetch=Fm(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=uc[0]){if(uc.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${uc.join(", ")}`);try{return await Ne(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,r={}){try{return await Ne(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ti})}catch(i){if(Ce(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:r}=e,i=qs(e,["options"]),a=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(a.new_email=i==null?void 0:i.newEmail,delete a.newEmail),await Ne(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:jC,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ce(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Ne(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ti})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,i,a,l,h,m,p;try{const g={nextPage:null,lastPage:0,total:0},y=await Ne(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:U0});if(y.error)throw y.error;const v=await y.json(),C=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,T=(p=(m=y.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return T.length>0&&(T.forEach(O=>{const L=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(O.split(";")[1].split("=")[1]);g[`${j}Page`]=L}),g.total=parseInt(C)),{data:Object.assign(Object.assign({},v),g),error:null}}catch(g){if(Ce(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){cs(e);try{return await Ne(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ti})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){cs(e);try{return await Ne(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:ti})}catch(i){if(Ce(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,r=!1){cs(e);try{return await Ne(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:ti})}catch(i){if(Ce(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){cs(e.userId);try{const{data:r,error:i}=await Ne(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:i}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _deleteFactor(e){cs(e.userId),cs(e.id);try{return{data:await Ne(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,i,a,l,h,m,p;try{const g={nextPage:null,lastPage:0,total:0},y=await Ne(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:U0});if(y.error)throw y.error;const v=await y.json(),C=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,T=(p=(m=y.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return T.length>0&&(T.forEach(O=>{const L=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(O.split(";")[1].split("=")[1]);g[`${j}Page`]=L}),g.total=parseInt(C)),{data:Object.assign(Object.assign({},v),g),error:null}}catch(g){if(Ce(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(e){try{return await Ne(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await Ne(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await Ne(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await Ne(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await Ne(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}}function z0(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const ds={debug:!!(globalThis&&jm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Um extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class zC extends Um{}async function VC(t,e,r){ds.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),ds.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){ds.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{ds.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw ds.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new zC(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ds.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function HC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function zm(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function WC(t){return parseInt(t,16)}function GC(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function YC(t){var e;const{chainId:r,domain:i,expirationTime:a,issuedAt:l=new Date,nonce:h,notBefore:m,requestId:p,resources:g,scheme:y,uri:v,version:C}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(C!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${C}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const T=zm(t.address),O=y?`${y}://${i}`:i,L=t.statement?`${t.statement}
`:"",j=`${O} wants you to sign in with your Ethereum account:
${T}

${L}`;let R=`URI: ${v}
Version: ${C}
Chain ID: ${r}${h?`
Nonce: ${h}`:""}
Issued At: ${l.toISOString()}`;if(a&&(R+=`
Expiration Time: ${a.toISOString()}`),m&&(R+=`
Not Before: ${m.toISOString()}`),p&&(R+=`
Request ID: ${p}`),g){let b=`
Resources:`;for(const S of g){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);b+=`
- ${S}`}R+=b}return`${j}
${R}`}class Rt extends Error{constructor({message:e,code:r,cause:i,name:a}){var l;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(l=a??(i instanceof Error?i.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=r}}class Bl extends Rt{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function XC({error:t,options:e}){var r,i,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Rt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=l.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Rt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((i=l.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Rt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Rt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Rt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Rt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new Rt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Rt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const h=window.location.hostname;if(Vm(h)){if(l.rp.id!==h)return new Rt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Rt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Rt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function $C({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Rt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Rt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(Vm(i)){if(r.rpId!==i)return new Rt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Rt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class KC{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const qC=new KC;function QC(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:i}=t,a=qs(t,["challenge","user","excludeCredentials"]),l=Ls(e).buffer,h=Object.assign(Object.assign({},r),{id:Ls(r.id).buffer}),m=Object.assign(Object.assign({},a),{challenge:l,user:h});if(i&&i.length>0){m.excludeCredentials=new Array(i.length);for(let p=0;p<i.length;p++){const g=i[p];m.excludeCredentials[p]=Object.assign(Object.assign({},g),{id:Ls(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return m}function ZC(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,i=qs(t,["challenge","allowCredentials"]),a=Ls(e).buffer,l=Object.assign(Object.assign({},i),{challenge:a});if(r&&r.length>0){l.allowCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const m=r[h];l.allowCredentials[h]=Object.assign(Object.assign({},m),{id:Ls(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return l}function JC(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Fi(new Uint8Array(t.response.attestationObject)),clientDataJSON:Fi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function e_(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,i=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Fi(new Uint8Array(a.authenticatorData)),clientDataJSON:Fi(new Uint8Array(a.clientDataJSON)),signature:Fi(new Uint8Array(a.signature)),userHandle:a.userHandle?Fi(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Vm(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function V0(){var t,e;return!!(Jt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function t_(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Bl("Browser returned unexpected credential type",e)}:{data:null,error:new Bl("Empty credential response",e)}}catch(e){return{data:null,error:XC({error:e,options:t})}}}async function r_(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Bl("Browser returned unexpected credential type",e)}:{data:null,error:new Bl("Empty credential response",e)}}catch(e){return{data:null,error:$C({error:e,options:t})}}}const n_={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},i_={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function jl(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),i={};for(const a of t)if(a)for(const l in a){const h=a[l];if(h!==void 0)if(Array.isArray(h))i[l]=h;else if(r(h))i[l]=h;else if(e(h)){const m=i[l];e(m)?i[l]=jl(m,h):i[l]=jl(h)}else i[l]=h}return i}function s_(t,e){return jl(n_,t,e||{})}function o_(t,e){return jl(i_,t,e||{})}class a_{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:i,signal:a},l){try{const{data:h,error:m}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!h)return{data:null,error:m};const p=a??qC.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:g}=h.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${i}`),g.displayName||(g.displayName=g.name)}switch(h.webauthn.type){case"create":{const g=s_(h.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:y,error:v}=await t_({publicKey:g,signal:p});return y?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}case"request":{const g=o_(h.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:y,error:v}=await r_(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:g,signal:p}));return y?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}}}catch(h){return Ce(h)?{data:null,error:h}:{data:null,error:new Pi("Unexpected error in challenge",h)}}}async _verify({challengeId:e,factorId:r,webauthn:i}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!r)return{data:null,error:new ra("rpId is required for WebAuthn authentication")};try{if(!V0())return{data:null,error:new Pi("Browser does not support WebAuthn",null)};const{data:h,error:m}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:i},signal:a},{request:l});if(!h)return{data:null,error:m};const{webauthn:p}=h;return this._verify({factorId:e,challengeId:h.challengeId,webauthn:{type:p.type,rpId:r,rpOrigins:i,credential_response:p.credential_response}})}catch(h){return Ce(h)?{data:null,error:h}:{data:null,error:new Pi("Unexpected error in authenticate",h)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!r)return{data:null,error:new ra("rpId is required for WebAuthn registration")};try{if(!V0())return{data:null,error:new Pi("Browser does not support WebAuthn",null)};const{data:h,error:m}=await this._enroll({friendlyName:e});if(!h)return await this.client.mfa.listFactors().then(y=>{var v;return(v=y.data)===null||v===void 0?void 0:v.all.find(C=>C.factor_type==="webauthn"&&C.friendly_name===e&&C.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:m};const{data:p,error:g}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:r,rpOrigins:i},signal:a},{create:l});return p?this._verify({factorId:h.id,challengeId:p.challengeId,webauthn:{rpId:r,rpOrigins:i,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:g}}catch(h){return Ce(h)?{data:null,error:h}:{data:null,error:new Pi("Unexpected error in register",h)}}}}HC();const l_={url:iC,storageKey:sC,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:oC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function H0(t,e,r){return await r()}const hs={};class na{get jwks(){var e,r;return(r=(e=hs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){hs[this.storageKey]=Object.assign(Object.assign({},hs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=hs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){hs[this.storageKey]=Object.assign(Object.assign({},hs[this.storageKey]),{cachedAt:e})}constructor(e){var r,i,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},l_),e);if(this.storageKey=l.storageKey,this.instanceID=(r=na.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,na.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Jt()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new UC({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Fm(l.fetch),this.lock=l.lock||H0,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:Jt()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=VC:this.lock=H0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new a_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:jm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=z0(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=z0(this.memoryStorage)),Jt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Pm}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},i="none";if(Jt()&&(r=vC(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),Jt()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:l}=await this._getSessionFromURL(r,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),hC(l)){const p=(e=l.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:h,redirectType:m}=a;return this._debug("#_initialize()","detected session in URL",h,"redirect type",m),await this._saveSession(h),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ce(r)?this._returnResult({error:r}):this._returnResult({error:new Pi("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,i,a;try{const l=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:rn}),{data:h,error:m}=l;if(m||!h)return this._returnResult({data:{user:null,session:null},error:m});const p=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(l){if(Ce(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var r,i,a;try{let l;if("email"in e){const{email:y,password:v,options:C}=e;let T=null,O=null;this.flowType==="pkce"&&([T,O]=await us(this.storage,this.storageKey)),l=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:C==null?void 0:C.emailRedirectTo,body:{email:y,password:v,data:(r=C==null?void 0:C.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:C==null?void 0:C.captchaToken},code_challenge:T,code_challenge_method:O},xform:rn})}else if("phone"in e){const{phone:y,password:v,options:C}=e;l=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:v,data:(i=C==null?void 0:C.data)!==null&&i!==void 0?i:{},channel:(a=C==null?void 0:C.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:C==null?void 0:C.captchaToken}},xform:rn})}else throw new Ya("You must provide either an email or phone number and a password");const{data:h,error:m}=l;if(m||!h)return this._returnResult({data:{user:null,session:null},error:m});const p=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(l){if(Ce(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let r;if("email"in e){const{email:l,password:h,options:m}=e;r=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:h,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:F0})}else if("phone"in e){const{phone:l,password:h,options:m}=e;r=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:h,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:F0})}else throw new Ya("You must provide either an email or phone number and a password");const{data:i,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!i||!i.session||!i.user){const l=new ls;return this._returnResult({data:{user:null,session:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,i,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,i,a,l,h,m,p,g,y,v,C;let T,O;if("message"in e)T=e.message,O=e.signature;else{const{chain:L,wallet:j,statement:R,options:b}=e;let S;if(Jt())if(typeof j=="object")S=j;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")S=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=j}const M=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href),Y=await S.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Y||Y.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const G=zm(Y[0]);let U=(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!U){const N=await S.request({method:"eth_chainId"});U=WC(N)}const P={domain:M.host,address:G,statement:R,uri:M.href,version:"1",chainId:U,nonce:(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(h=(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(m=b==null?void 0:b.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(p=b==null?void 0:b.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(g=b==null?void 0:b.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(y=b==null?void 0:b.signInWithEthereum)===null||y===void 0?void 0:y.resources};T=YC(P),O=await S.request({method:"personal_sign",params:[GC(T),G]})}try{const{data:L,error:j}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:O},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(C=e.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:rn});if(j)throw j;if(!L||!L.session||!L.user){const R=new ls;return this._returnResult({data:{user:null,session:null},error:R})}return L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),this._returnResult({data:Object.assign({},L),error:j})}catch(L){if(Ce(L))return this._returnResult({data:{user:null,session:null},error:L});throw L}}async signInWithSolana(e){var r,i,a,l,h,m,p,g,y,v,C,T;let O,L;if("message"in e)O=e.message,L=e.signature;else{const{chain:j,wallet:R,statement:b,options:S}=e;let M;if(Jt())if(typeof R=="object")M=R;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))M=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=R}const Y=new URL((r=S==null?void 0:S.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in M&&M.signIn){const G=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:Y.host,uri:Y.href}),b?{statement:b}:null));let U;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")U=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)U=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)O=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),L=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");O=[`${Y.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${Y.href}`,`Issued At: ${(a=(i=S==null?void 0:S.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=S==null?void 0:S.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((h=S==null?void 0:S.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((m=S==null?void 0:S.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((p=S==null?void 0:S.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((g=S==null?void 0:S.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((v=(y=S==null?void 0:S.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||v===void 0)&&v.length?["Resources",...S.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const G=await M.signMessage(new TextEncoder().encode(O),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");L=G}}try{const{data:j,error:R}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:O,signature:Fi(L)},!((C=e.options)===null||C===void 0)&&C.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:rn});if(R)throw R;if(!j||!j.session||!j.user){const b=new ls;return this._returnResult({data:{user:null,session:null},error:b})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:R})}catch(j){if(Ce(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async _exchangeCodeForSession(e){const r=await Ni(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(r??"").split("/");try{const{data:l,error:h}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:rn});if(await $n(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!l||!l.session||!l.user){const m=new ls;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:h})}catch(l){if(Ce(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:r,provider:i,token:a,access_token:l,nonce:h}=e,m=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:l,nonce:h,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:rn}),{data:p,error:g}=m;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p||!p.session||!p.user){const y=new ls;return this._returnResult({data:{user:null,session:null},error:y})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:g})}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,i,a,l,h;try{if("email"in e){const{email:m,options:p}=e;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await us(this.storage,this.storageKey));const{error:v}=await Ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},create_user:(i=p==null?void 0:p.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:g,code_challenge_method:y},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in e){const{phone:m,options:p}=e,{data:g,error:y}=await Ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(a=p==null?void 0:p.data)!==null&&a!==void 0?a:{},create_user:(l=p==null?void 0:p.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(h=p==null?void 0:p.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:y})}throw new Ya("You must provide either an email or phone number.")}catch(m){if(Ce(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(e){var r,i;try{let a,l;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,l=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:h,error:m}=await Ne(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:rn});if(m)throw m;if(!h)throw new Error("An error occurred on token verification.");const p=h.session,g=h.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(a){if(Ce(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var r,i,a,l,h;try{let m=null,p=null;this.flowType==="pkce"&&([m,p]=await us(this.storage,this.storageKey));const g=await Ne(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:p}),headers:this.headers,xform:BC});return!((l=g.data)===null||l===void 0)&&l.url&&Jt()&&!(!((h=e.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(m){if(Ce(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new tn;const{error:a}=await Ne(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(Ce(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:i,type:a,options:l}=e,{error:h}=await Ne(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in e){const{phone:i,type:a,options:l}=e,{data:h,error:m}=await Ne(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:m})}throw new Ya("You must provide either an email or phone number and a type")}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Ni(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<sc:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const h=await Ni(this.userStorage,this.storageKey+"-user");h!=null&&h.user?e.user=h.user:e.user=lc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};e.user=MC(e.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ti}):await this._useSession(async r=>{var i,a,l;const{data:h,error:m}=r;if(m)throw m;return!(!((i=h.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new tn}:await Ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=h.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:ti})})}catch(r){if(Ce(r))return dC(r)&&(await this._removeSession(),await $n(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async i=>{const{data:a,error:l}=i;if(l)throw l;if(!a.session)throw new tn;const h=a.session;let m=null,p=null;this.flowType==="pkce"&&e.email!=null&&([m,p]=await us(this.storage,this.storageKey));const{data:g,error:y}=await Ne(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:m,code_challenge_method:p}),jwt:h.access_token,xform:ti});if(y)throw y;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(i){if(Ce(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new tn;const r=Date.now()/1e3;let i=r,a=!0,l=null;const{payload:h}=ac(e.access_token);if(h.exp&&(i=h.exp,a=i<=r),a){const{data:m,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m)return{data:{user:null,session:null},error:null};l=m}else{const{data:m,error:p}=await this._getUser(e.access_token);if(p)throw p;l={access_token:e.access_token,refresh_token:e.refresh_token,user:m.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(r){if(Ce(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var i;if(!e){const{data:h,error:m}=r;if(m)throw m;e=(i=h.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new tn;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Jt())throw new Xa("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Xa(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new k0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xa("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new k0("No code detected.");const{data:b,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:l,refresh_token:h,expires_in:m,expires_at:p,token_type:g}=e;if(!l||!m||!h||!g)throw new Xa("No session defined in URL");const y=Math.round(Date.now()/1e3),v=parseInt(m);let C=y+v;p&&(C=parseInt(p));const T=C-y;T*1e3<=ps&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${v}s`);const O=C-v;y-O>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",O,C,y):y-O<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",O,C,y);const{data:L,error:j}=await this._getUser(l);if(j)throw j;const R={provider_token:i,provider_refresh_token:a,access_token:l,expires_in:v,expires_at:C,refresh_token:h,token_type:g,user:L.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:R,redirectType:e.type},error:null})}catch(i){if(Ce(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Ni(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:a,error:l}=r;if(l)return this._returnResult({error:l});const h=(i=a.session)===null||i===void 0?void 0:i.access_token;if(h){const{error:m}=await this.admin.signOut(h,e);if(m&&!(cC(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return e!=="others"&&(await this._removeSession(),await $n(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=yC(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async r=>{var i,a;try{const{data:{session:l},error:h}=r;if(h)throw h;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,r={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await us(this.storage,this.storageKey,!0));try{return await Ne(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(Ce(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:i,error:a}=await this._useSession(async l=>{var h,m,p,g,y;const{data:v,error:C}=l;if(C)throw C;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(h=e.options)===null||h===void 0?void 0:h.redirectTo,scopes:(m=e.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await Ne(this.fetch,"GET",T,{headers:this.headers,jwt:(y=(g=v.session)===null||g===void 0?void 0:g.access_token)!==null&&y!==void 0?y:void 0})});if(a)throw a;return Jt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:e.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(Ce(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var i;try{const{error:a,data:{session:l}}=r;if(a)throw a;const{options:h,provider:m,token:p,access_token:g,nonce:y}=e,v=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=l==null?void 0:l.access_token)!==null&&i!==void 0?i:void 0,body:{provider:m,id_token:p,access_token:g,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:rn}),{data:C,error:T}=v;return T?this._returnResult({data:{user:null,session:null},error:T}):!C||!C.session||!C.user?this._returnResult({data:{user:null,session:null},error:new ls}):(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("USER_UPDATED",C.session)),this._returnResult({data:C,error:T}))}catch(a){if(Ce(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var i,a;const{data:l,error:h}=r;if(h)throw h;return await Ne(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await _C(async a=>(a>0&&await CC(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Ne(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:rn})),(a,l)=>{const h=200*Math.pow(2,a);return l&&oc(l)&&Date.now()+h-i<ps})}catch(i){if(this._debug(r,"error",i),Ce(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),Jt()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const a=await Ni(this.storage,this.storageKey);if(a&&this.userStorage){let h=await Ni(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:a.user},await ms(this.userStorage,this.storageKey+"-user",h)),a.user=(e=h==null?void 0:h.user)!==null&&e!==void 0?e:lc()}else if(a&&!a.user&&!a.user){const h=await Ni(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(a.user=h.user,await $n(this.storage,this.storageKey+"-user"),await ms(this.storage,this.storageKey,a)):a.user=lc()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&await this._removeSession();return}const l=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<sc;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${sc}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:h}=await this._callRefreshToken(a.refresh_token);h&&(console.error(h),oc(h)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:m}=await this._getUser(a.access_token);!m&&(h!=null&&h.user)?(a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(i,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var r,i;if(!e)throw new tn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new lu;const{data:l,error:h}=await this._refreshAccessToken(e);if(h)throw h;if(!l.session)throw new tn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const m={data:l.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(l){if(this._debug(a,"error",l),Ce(l)){const h={data:null,error:l};return oc(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(h),h}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,i=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});const l=[],h=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(e,r)}catch(p){l.push(p)}});if(await Promise.all(h),l.length>0){for(let m=0;m<l.length;m+=1)console.error(l[m]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await ms(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const l=B0(a);await ms(this.storage,this.storageKey,l)}else{const a=B0(r);await ms(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await $n(this.storage,this.storageKey),await $n(this.storage,this.storageKey+"-code-verifier"),await $n(this.storage,this.storageKey+"-user"),this.userStorage&&await $n(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Jt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ps);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-e)/ps);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${ps}ms, refresh threshold is ${xd} ticks`),a<=xd&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Um)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Jt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,i){const a=[`provider=${encodeURIComponent(r)}`];if(i!=null&&i.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,h]=await us(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(h)}`});a.push(m.toString())}if(i!=null&&i.queryParams){const l=new URLSearchParams(i.queryParams);a.push(l.toString())}return i!=null&&i.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var i;const{data:a,error:l}=r;return l?this._returnResult({data:null,error:l}):await Ne(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var i,a;const{data:l,error:h}=r;if(h)return this._returnResult({data:null,error:h});const m=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:p,error:g}=await Ne(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token});return g?this._returnResult({data:null,error:g}):(e.factorType==="totp"&&p.type==="totp"&&(!((a=p==null?void 0:p.totp)===null||a===void 0)&&a.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:a,error:l}=r;if(l)return this._returnResult({data:null,error:l});const h=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?JC(e.webauthn.credential_response):e_(e.webauthn.credential_response)})}:{code:e.code}),{data:m,error:p}=await Ne(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:h,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:p}))})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:a,error:l}=r;if(l)return this._returnResult({data:null,error:l});const h=await Ne(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});if(h.error)return h;const{data:m}=h;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:QC(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:ZC(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:i},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=ac(i.access_token);let h=null;l.aal&&(h=l.aal);let m=h;((r=(e=i.user.factors)===null||e===void 0?void 0:e.filter(y=>y.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(m="aal2");const g=l.amr||[];return{data:{currentLevel:h,nextLevel:m,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;return a?this._returnResult({data:null,error:a}):i?await Ne(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new tn})})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async i=>{const{data:{session:a},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new tn});const h=await Ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return h.data&&h.data.redirect_url&&Jt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(i){if(Ce(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,r){try{return await this._useSession(async i=>{const{data:{session:a},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new tn});const h=await Ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return h.data&&h.data.redirect_url&&Jt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(i){if(Ce(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(e,r={keys:[]}){let i=r.keys.find(m=>m.kid===e);if(i)return i;const a=Date.now();if(i=this.jwks.keys.find(m=>m.kid===e),i&&this.jwks_cached_at+lC>a)return i;const{data:l,error:h}=await Ne(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,i=l.keys.find(m=>m.kid===e),!i)?null:i}async getClaims(e,r={}){try{let i=e;if(!i){const{data:T,error:O}=await this.getSession();if(O||!T.session)return this._returnResult({data:null,error:O});i=T.session.access_token}const{header:a,payload:l,signature:h,raw:{header:m,payload:p}}=ac(i);r!=null&&r.allowExpired||OC(l.exp);const g=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!g){const{error:T}=await this.getUser(i);if(T)throw T;return{data:{claims:l,header:a,signature:h},error:null}}const y=RC(a.alg),v=await crypto.subtle.importKey("jwk",g,y,!0,["verify"]);if(!await crypto.subtle.verify(y,v,h,wC(`${m}.${p}`)))throw new Ed("Invalid JWT signature");return{data:{claims:l,header:a,signature:h},error:null}}catch(i){if(Ce(i))return this._returnResult({data:null,error:i});throw i}}}na.nextInstanceID={};const u_=na;class c_ extends u_{constructor(e){super(e)}}class d_{constructor(e,r,i){var a,l,h;this.supabaseUrl=e,this.supabaseKey=r;const m=nC(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const p=`sb-${m.hostname.split(".")[0]}-auth-token`,g={db:KE,realtime:QE,auth:Object.assign(Object.assign({},qE),{storageKey:p}),global:$E},y=rC(i??{},g);this.storageKey=(a=y.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=y.global.headers)!==null&&l!==void 0?l:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(v,C)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(C)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=y.auth)!==null&&h!==void 0?h:{},this.headers,y.global.fetch),this.fetch=eC(r,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new iE(new URL("rest/v1",m).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new GE(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new tE(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,i)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(r=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:i,storage:a,userStorage:l,storageKey:h,flowType:m,lock:p,debug:g,throwOnError:y},v,C){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new c_({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),v),storageKey:h,autoRefreshToken:e,persistSession:r,detectSessionInUrl:i,storage:a,userStorage:l,flowType:m,lock:p,debug:g,throwOnError:y,fetch:C,hasCustomAuthorizationHeader:Object.keys(this.headers).some(O=>O.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new EE(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,i)=>{this._handleTokenChanged(r,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,r,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const h_=(t,e,r)=>new d_(t,e,r);function f_(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}f_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const g_="https://hricrwfhshdmchbpfpqh.supabase.co",p_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhyaWNyd2Zoc2hkbWNoYnBmcHFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwMzkzMzcsImV4cCI6MjA3ODYxNTMzN30.kCdMMdoXayK3HwoGPMHkj1qLUWTu-21U5n2vVpPnAfo",Yt=h_(g_,p_);function m_(){const t=Ch(),[e,r]=q.useState(!1),[i,a]=q.useState({nome:"",data:"",hora:"",local:""}),l=m=>{a({...i,[m.target.name]:m.target.value})},h=async m=>{if(m.preventDefault(),!i.nome||!i.data||!i.hora||!i.local){Be.error("Por favor, preencha todos os campos");return}r(!0);try{const{data:p,error:g}=await Yt.from("eventos").insert([i]).select().single();if(g)throw g;localStorage.setItem("currentEventId",p.id),Be.success("Evento criado com sucesso!"),t("/upload")}catch(p){console.error("Erro ao criar evento:",p),Be.error("Erro ao criar evento: "+p.message)}finally{r(!1)}};return B.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[B.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[B.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Criar Novo Evento"}),B.jsxs("form",{onSubmit:h,className:"space-y-4",children:[B.jsxs("div",{children:[B.jsx("label",{htmlFor:"nome",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Evento"}),B.jsx("input",{type:"text",id:"nome",name:"nome",value:i.nome,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Casamento Joo e Maria",required:!0})]}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[B.jsxs("div",{children:[B.jsx("label",{htmlFor:"data",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data"}),B.jsx("input",{type:"date",id:"data",name:"data",value:i.data,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),B.jsxs("div",{children:[B.jsx("label",{htmlFor:"hora",className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora"}),B.jsx("input",{type:"time",id:"hora",name:"hora",value:i.hora,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),B.jsxs("div",{children:[B.jsx("label",{htmlFor:"local",className:"block text-sm font-medium text-gray-700 mb-1",children:"Local"}),B.jsx("input",{type:"text",id:"local",name:"local",value:i.local,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Quinta do Palcio, Lisboa",required:!0})]}),B.jsx("button",{type:"submit",disabled:e,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition",children:e?"A criar evento...":"Criar Evento"})]})]}),B.jsx("div",{className:"mt-6 bg-blue-50 border-l-4 border-blue-400 p-4",children:B.jsxs("div",{className:"flex",children:[B.jsx("div",{className:"flex-shrink-0",children:B.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:B.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),B.jsx("div",{className:"ml-3",children:B.jsx("p",{className:"text-sm text-blue-700",children:"Aps criar o evento, ser redirecionado para fazer upload da lista de convidados."})})]})})]})}var Hm={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((r,i)=>{t.exports=i()})(fs,function r(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},a,l=!i.document&&!!i.postMessage,h=i.IS_PAPA_WORKER||!1,m={},p=0,g={};function y(P){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(N){var V=Y(N);V.chunkSize=parseInt(V.chunkSize),N.step||N.chunk||(V.chunkSize=null),this._handle=new L(V),(this._handle.streamer=this)._config=V}).call(this,P),this.parseChunk=function(N,V){var J=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<J){let ue=this._config.newline;ue||(Q=this._config.quoteChar||'"',ue=this._handle.guessLineEndings(N,Q)),N=[...N.split(ue).slice(J)].join(ue)}this.isFirstChunk&&U(this._config.beforeFirstChunk)&&(Q=this._config.beforeFirstChunk(N))!==void 0&&(N=Q),this.isFirstChunk=!1,this._halted=!1;var J=this._partialLine+N,Q=(this._partialLine="",this._handle.parse(J,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(N=Q.meta.cursor,J=(this._finished||(this._partialLine=J.substring(N-this._baseIndex),this._baseIndex=N),Q&&Q.data&&(this._rowCount+=Q.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),h)i.postMessage({results:Q,workerId:g.WORKER_ID,finished:J});else if(U(this._config.chunk)&&!V){if(this._config.chunk(Q,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=Q=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(Q.data),this._completeResults.errors=this._completeResults.errors.concat(Q.errors),this._completeResults.meta=Q.meta),this._completed||!J||!U(this._config.complete)||Q&&Q.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),J||Q&&Q.meta.paused||this._nextChunk(),Q}this._halted=!0},this._sendError=function(N){U(this._config.error)?this._config.error(N):h&&this._config.error&&i.postMessage({workerId:g.WORKER_ID,error:N,finished:!1})}}function v(P){var N;(P=P||{}).chunkSize||(P.chunkSize=g.RemoteChunkSize),y.call(this,P),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(V){this._input=V,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(N=new XMLHttpRequest,this._config.withCredentials&&(N.withCredentials=this._config.withCredentials),l||(N.onload=G(this._chunkLoaded,this),N.onerror=G(this._chunkError,this)),N.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var V,J=this._config.downloadRequestHeaders;for(V in J)N.setRequestHeader(V,J[V])}var Q;this._config.chunkSize&&(Q=this._start+this._config.chunkSize-1,N.setRequestHeader("Range","bytes="+this._start+"-"+Q));try{N.send(this._config.downloadRequestBody)}catch(ue){this._chunkError(ue.message)}l&&N.status===0&&this._chunkError()}},this._chunkLoaded=function(){N.readyState===4&&(N.status<200||400<=N.status?this._chunkError():(this._start+=this._config.chunkSize||N.responseText.length,this._finished=!this._config.chunkSize||this._start>=(V=>(V=V.getResponseHeader("Content-Range"))!==null?parseInt(V.substring(V.lastIndexOf("/")+1)):-1)(N),this.parseChunk(N.responseText)))},this._chunkError=function(V){V=N.statusText||V,this._sendError(new Error(V))}}function C(P){(P=P||{}).chunkSize||(P.chunkSize=g.LocalChunkSize),y.call(this,P);var N,V,J=typeof FileReader<"u";this.stream=function(Q){this._input=Q,V=Q.slice||Q.webkitSlice||Q.mozSlice,J?((N=new FileReader).onload=G(this._chunkLoaded,this),N.onerror=G(this._chunkError,this)):N=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var Q=this._input,ue=(this._config.chunkSize&&(ue=Math.min(this._start+this._config.chunkSize,this._input.size),Q=V.call(Q,this._start,ue)),N.readAsText(Q,this._config.encoding));J||this._chunkLoaded({target:{result:ue}})},this._chunkLoaded=function(Q){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(Q.target.result)},this._chunkError=function(){this._sendError(N.error)}}function T(P){var N;y.call(this,P=P||{}),this.stream=function(V){return N=V,this._nextChunk()},this._nextChunk=function(){var V,J;if(!this._finished)return V=this._config.chunkSize,N=V?(J=N.substring(0,V),N.substring(V)):(J=N,""),this._finished=!N,this.parseChunk(J)}}function O(P){y.call(this,P=P||{});var N=[],V=!0,J=!1;this.pause=function(){y.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){y.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(Q){this._input=Q,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){J&&N.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),N.length?this.parseChunk(N.shift()):V=!0},this._streamData=G(function(Q){try{N.push(typeof Q=="string"?Q:Q.toString(this._config.encoding)),V&&(V=!1,this._checkIsFinished(),this.parseChunk(N.shift()))}catch(ue){this._streamError(ue)}},this),this._streamError=G(function(Q){this._streamCleanUp(),this._sendError(Q)},this),this._streamEnd=G(function(){this._streamCleanUp(),J=!0,this._streamData("")},this),this._streamCleanUp=G(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function L(P){var N,V,J,Q,ue=Math.pow(2,53),Oe=-ue,K=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ze=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ae=this,re=0,te=0,we=!1,me=!1,ce=[],he={data:[],errors:[],meta:{}};function Re(_e){return P.skipEmptyLines==="greedy"?_e.join("").trim()==="":_e.length===1&&_e[0].length===0}function et(){if(he&&J&&(Tt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+g.DefaultDelimiter+"'"),J=!1),P.skipEmptyLines&&(he.data=he.data.filter(function(Qe){return!Re(Qe)})),le()){let Qe=function(Ie,Ye){U(P.transformHeader)&&(Ie=P.transformHeader(Ie,Ye)),ce.push(Ie)};var Se=Qe;if(he)if(Array.isArray(he.data[0])){for(var _e=0;le()&&_e<he.data.length;_e++)he.data[_e].forEach(Qe);he.data.splice(0,1)}else he.data.forEach(Qe)}function je(Qe,Ie){for(var Ye=P.header?{}:[],Pe=0;Pe<Qe.length;Pe++){var ke=Pe,He=Qe[Pe],He=((ve,ye)=>(pt=>(P.dynamicTypingFunction&&P.dynamicTyping[pt]===void 0&&(P.dynamicTyping[pt]=P.dynamicTypingFunction(pt)),(P.dynamicTyping[pt]||P.dynamicTyping)===!0))(ve)?ye==="true"||ye==="TRUE"||ye!=="false"&&ye!=="FALSE"&&((pt=>{if(K.test(pt)&&(pt=parseFloat(pt),Oe<pt&&pt<ue))return 1})(ye)?parseFloat(ye):ze.test(ye)?new Date(ye):ye===""?null:ye):ye)(ke=P.header?Pe>=ce.length?"__parsed_extra":ce[Pe]:ke,He=P.transform?P.transform(He,ke):He);ke==="__parsed_extra"?(Ye[ke]=Ye[ke]||[],Ye[ke].push(He)):Ye[ke]=He}return P.header&&(Pe>ce.length?Tt("FieldMismatch","TooManyFields","Too many fields: expected "+ce.length+" fields but parsed "+Pe,te+Ie):Pe<ce.length&&Tt("FieldMismatch","TooFewFields","Too few fields: expected "+ce.length+" fields but parsed "+Pe,te+Ie)),Ye}var tt;he&&(P.header||P.dynamicTyping||P.transform)&&(tt=1,!he.data.length||Array.isArray(he.data[0])?(he.data=he.data.map(je),tt=he.data.length):he.data=je(he.data,0),P.header&&he.meta&&(he.meta.fields=ce),te+=tt)}function le(){return P.header&&ce.length===0}function Tt(_e,je,tt,Se){_e={type:_e,code:je,message:tt},Se!==void 0&&(_e.row=Se),he.errors.push(_e)}U(P.step)&&(Q=P.step,P.step=function(_e){he=_e,le()?et():(et(),he.data.length!==0&&(re+=_e.data.length,P.preview&&re>P.preview?V.abort():(he.data=he.data[0],Q(he,ae))))}),this.parse=function(_e,je,tt){var Se=P.quoteChar||'"',Se=(P.newline||(P.newline=this.guessLineEndings(_e,Se)),J=!1,P.delimiter?U(P.delimiter)&&(P.delimiter=P.delimiter(_e),he.meta.delimiter=P.delimiter):((Se=((Qe,Ie,Ye,Pe,ke)=>{var He,ve,ye,pt;ke=ke||[",","	","|",";",g.RECORD_SEP,g.UNIT_SEP];for(var de=0;de<ke.length;de++){for(var ur,Un=ke[de],ot=0,mr=0,Ke=0,$t=(ye=void 0,new R({comments:Pe,delimiter:Un,newline:Ie,preview:10}).parse(Qe)),Vt=0;Vt<$t.data.length;Vt++)Ye&&Re($t.data[Vt])?Ke++:(ur=$t.data[Vt].length,mr+=ur,ye===void 0?ye=ur:0<ur&&(ot+=Math.abs(ur-ye),ye=ur));0<$t.data.length&&(mr/=$t.data.length-Ke),(ve===void 0||ot<=ve)&&(pt===void 0||pt<mr)&&1.99<mr&&(ve=ot,He=Un,pt=mr)}return{successful:!!(P.delimiter=He),bestDelimiter:He}})(_e,P.newline,P.skipEmptyLines,P.comments,P.delimitersToGuess)).successful?P.delimiter=Se.bestDelimiter:(J=!0,P.delimiter=g.DefaultDelimiter),he.meta.delimiter=P.delimiter),Y(P));return P.preview&&P.header&&Se.preview++,N=_e,V=new R(Se),he=V.parse(N,je,tt),et(),we?{meta:{paused:!0}}:he||{meta:{paused:!1}}},this.paused=function(){return we},this.pause=function(){we=!0,V.abort(),N=U(P.chunk)?"":N.substring(V.getCharIndex())},this.resume=function(){ae.streamer._halted?(we=!1,ae.streamer.parseChunk(N,!0)):setTimeout(ae.resume,3)},this.aborted=function(){return me},this.abort=function(){me=!0,V.abort(),he.meta.aborted=!0,U(P.complete)&&P.complete(he),N=""},this.guessLineEndings=function(Qe,Se){Qe=Qe.substring(0,1048576);var Se=new RegExp(j(Se)+"([^]*?)"+j(Se),"gm"),tt=(Qe=Qe.replace(Se,"")).split("\r"),Se=Qe.split(`
`),Qe=1<Se.length&&Se[0].length<tt[0].length;if(tt.length===1||Qe)return`
`;for(var Ie=0,Ye=0;Ye<tt.length;Ye++)tt[Ye][0]===`
`&&Ie++;return Ie>=tt.length/2?`\r
`:"\r"}}function j(P){return P.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function R(P){var N=(P=P||{}).delimiter,V=P.newline,J=P.comments,Q=P.step,ue=P.preview,Oe=P.fastMode,K=null,ze=!1,ae=P.quoteChar==null?'"':P.quoteChar,re=ae;if(P.escapeChar!==void 0&&(re=P.escapeChar),(typeof N!="string"||-1<g.BAD_DELIMITERS.indexOf(N))&&(N=","),J===N)throw new Error("Comment character same as delimiter");J===!0?J="#":(typeof J!="string"||-1<g.BAD_DELIMITERS.indexOf(J))&&(J=!1),V!==`
`&&V!=="\r"&&V!==`\r
`&&(V=`
`);var te=0,we=!1;this.parse=function(me,ce,he){if(typeof me!="string")throw new Error("Input must be a string");var Re=me.length,et=N.length,le=V.length,Tt=J.length,_e=U(Q),je=[],tt=[],Se=[],Qe=te=0;if(!me)return ot();if(Oe||Oe!==!1&&me.indexOf(ae)===-1){for(var Ie=me.split(V),Ye=0;Ye<Ie.length;Ye++){if(Se=Ie[Ye],te+=Se.length,Ye!==Ie.length-1)te+=V.length;else if(he)return ot();if(!J||Se.substring(0,Tt)!==J){if(_e){if(je=[],pt(Se.split(N)),mr(),we)return ot()}else pt(Se.split(N));if(ue&&ue<=Ye)return je=je.slice(0,ue),ot(!0)}}return ot()}for(var Pe=me.indexOf(N,te),ke=me.indexOf(V,te),He=new RegExp(j(re)+j(ae),"g"),ve=me.indexOf(ae,te);;)if(me[te]===ae)for(ve=te,te++;;){if((ve=me.indexOf(ae,ve+1))===-1)return he||tt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:je.length,index:te}),ur();if(ve===Re-1)return ur(me.substring(te,ve).replace(He,ae));if(ae===re&&me[ve+1]===re)ve++;else if(ae===re||ve===0||me[ve-1]!==re){Pe!==-1&&Pe<ve+1&&(Pe=me.indexOf(N,ve+1));var ye=de((ke=ke!==-1&&ke<ve+1?me.indexOf(V,ve+1):ke)===-1?Pe:Math.min(Pe,ke));if(me.substr(ve+1+ye,et)===N){Se.push(me.substring(te,ve).replace(He,ae)),me[te=ve+1+ye+et]!==ae&&(ve=me.indexOf(ae,te)),Pe=me.indexOf(N,te),ke=me.indexOf(V,te);break}if(ye=de(ke),me.substring(ve+1+ye,ve+1+ye+le)===V){if(Se.push(me.substring(te,ve).replace(He,ae)),Un(ve+1+ye+le),Pe=me.indexOf(N,te),ve=me.indexOf(ae,te),_e&&(mr(),we))return ot();if(ue&&je.length>=ue)return ot(!0);break}tt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:je.length,index:te}),ve++}}else if(J&&Se.length===0&&me.substring(te,te+Tt)===J){if(ke===-1)return ot();te=ke+le,ke=me.indexOf(V,te),Pe=me.indexOf(N,te)}else if(Pe!==-1&&(Pe<ke||ke===-1))Se.push(me.substring(te,Pe)),te=Pe+et,Pe=me.indexOf(N,te);else{if(ke===-1)break;if(Se.push(me.substring(te,ke)),Un(ke+le),_e&&(mr(),we))return ot();if(ue&&je.length>=ue)return ot(!0)}return ur();function pt(Ke){je.push(Ke),Qe=te}function de(Ke){var $t=0;return $t=Ke!==-1&&(Ke=me.substring(ve+1,Ke))&&Ke.trim()===""?Ke.length:$t}function ur(Ke){return he||(Ke===void 0&&(Ke=me.substring(te)),Se.push(Ke),te=Re,pt(Se),_e&&mr()),ot()}function Un(Ke){te=Ke,pt(Se),Se=[],ke=me.indexOf(V,te)}function ot(Ke){if(P.header&&!ce&&je.length&&!ze){var $t=je[0],Vt=Object.create(null),Dt=new Set($t);let Js=!1;for(let Qr=0;Qr<$t.length;Qr++){let Fr=$t[Qr];if(Vt[Fr=U(P.transformHeader)?P.transformHeader(Fr,Qr):Fr]){let at,oe=Vt[Fr];for(;at=Fr+"_"+oe,oe++,Dt.has(at););Dt.add(at),$t[Qr]=at,Vt[Fr]++,Js=!0,(K=K===null?{}:K)[at]=Fr}else Vt[Fr]=1,$t[Qr]=Fr;Dt.add(Fr)}Js&&console.warn("Duplicate headers found and renamed."),ze=!0}return{data:je,errors:tt,meta:{delimiter:N,linebreak:V,aborted:we,truncated:!!Ke,cursor:Qe+(ce||0),renamedHeaders:K}}}function mr(){Q(ot()),je=[],tt=[]}},this.abort=function(){we=!0},this.getCharIndex=function(){return te}}function b(P){var N=P.data,V=m[N.workerId],J=!1;if(N.error)V.userError(N.error,N.file);else if(N.results&&N.results.data){var Q={abort:function(){J=!0,S(N.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:M,resume:M};if(U(V.userStep)){for(var ue=0;ue<N.results.data.length&&(V.userStep({data:N.results.data[ue],errors:N.results.errors,meta:N.results.meta},Q),!J);ue++);delete N.results}else U(V.userChunk)&&(V.userChunk(N.results,Q,N.file),delete N.results)}N.finished&&!J&&S(N.workerId,N.results)}function S(P,N){var V=m[P];U(V.userComplete)&&V.userComplete(N),V.terminate(),delete m[P]}function M(){throw new Error("Not implemented.")}function Y(P){if(typeof P!="object"||P===null)return P;var N,V=Array.isArray(P)?[]:{};for(N in P)V[N]=Y(P[N]);return V}function G(P,N){return function(){P.apply(N,arguments)}}function U(P){return typeof P=="function"}return g.parse=function(P,N){var V=(N=N||{}).dynamicTyping||!1;if(U(V)&&(N.dynamicTypingFunction=V,V={}),N.dynamicTyping=V,N.transform=!!U(N.transform)&&N.transform,!N.worker||!g.WORKERS_SUPPORTED)return V=null,g.NODE_STREAM_INPUT,typeof P=="string"?(P=(J=>J.charCodeAt(0)!==65279?J:J.slice(1))(P),V=new(N.download?v:T)(N)):P.readable===!0&&U(P.read)&&U(P.on)?V=new O(N):(i.File&&P instanceof File||P instanceof Object)&&(V=new C(N)),V.stream(P);(V=(()=>{var J;return!!g.WORKERS_SUPPORTED&&(J=(()=>{var Q=i.URL||i.webkitURL||null,ue=r.toString();return g.BLOB_URL||(g.BLOB_URL=Q.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",ue,")();"],{type:"text/javascript"})))})(),(J=new i.Worker(J)).onmessage=b,J.id=p++,m[J.id]=J)})()).userStep=N.step,V.userChunk=N.chunk,V.userComplete=N.complete,V.userError=N.error,N.step=U(N.step),N.chunk=U(N.chunk),N.complete=U(N.complete),N.error=U(N.error),delete N.worker,V.postMessage({input:P,config:N,workerId:V.id})},g.unparse=function(P,N){var V=!1,J=!0,Q=",",ue=`\r
`,Oe='"',K=Oe+Oe,ze=!1,ae=null,re=!1,te=((()=>{if(typeof N=="object"){if(typeof N.delimiter!="string"||g.BAD_DELIMITERS.filter(function(ce){return N.delimiter.indexOf(ce)!==-1}).length||(Q=N.delimiter),typeof N.quotes!="boolean"&&typeof N.quotes!="function"&&!Array.isArray(N.quotes)||(V=N.quotes),typeof N.skipEmptyLines!="boolean"&&typeof N.skipEmptyLines!="string"||(ze=N.skipEmptyLines),typeof N.newline=="string"&&(ue=N.newline),typeof N.quoteChar=="string"&&(Oe=N.quoteChar),typeof N.header=="boolean"&&(J=N.header),Array.isArray(N.columns)){if(N.columns.length===0)throw new Error("Option columns is empty");ae=N.columns}N.escapeChar!==void 0&&(K=N.escapeChar+Oe),N.escapeFormulae instanceof RegExp?re=N.escapeFormulae:typeof N.escapeFormulae=="boolean"&&N.escapeFormulae&&(re=/^[=+\-@\t\r].*$/)}})(),new RegExp(j(Oe),"g"));if(typeof P=="string"&&(P=JSON.parse(P)),Array.isArray(P)){if(!P.length||Array.isArray(P[0]))return we(null,P,ze);if(typeof P[0]=="object")return we(ae||Object.keys(P[0]),P,ze)}else if(typeof P=="object")return typeof P.data=="string"&&(P.data=JSON.parse(P.data)),Array.isArray(P.data)&&(P.fields||(P.fields=P.meta&&P.meta.fields||ae),P.fields||(P.fields=Array.isArray(P.data[0])?P.fields:typeof P.data[0]=="object"?Object.keys(P.data[0]):[]),Array.isArray(P.data[0])||typeof P.data[0]=="object"||(P.data=[P.data])),we(P.fields||[],P.data||[],ze);throw new Error("Unable to serialize unrecognized input");function we(ce,he,Re){var et="",le=(typeof ce=="string"&&(ce=JSON.parse(ce)),typeof he=="string"&&(he=JSON.parse(he)),Array.isArray(ce)&&0<ce.length),Tt=!Array.isArray(he[0]);if(le&&J){for(var _e=0;_e<ce.length;_e++)0<_e&&(et+=Q),et+=me(ce[_e],_e);0<he.length&&(et+=ue)}for(var je=0;je<he.length;je++){var tt=(le?ce:he[je]).length,Se=!1,Qe=le?Object.keys(he[je]).length===0:he[je].length===0;if(Re&&!le&&(Se=Re==="greedy"?he[je].join("").trim()==="":he[je].length===1&&he[je][0].length===0),Re==="greedy"&&le){for(var Ie=[],Ye=0;Ye<tt;Ye++){var Pe=Tt?ce[Ye]:Ye;Ie.push(he[je][Pe])}Se=Ie.join("").trim()===""}if(!Se){for(var ke=0;ke<tt;ke++){0<ke&&!Qe&&(et+=Q);var He=le&&Tt?ce[ke]:ke;et+=me(he[je][He],ke)}je<he.length-1&&(!Re||0<tt&&!Qe)&&(et+=ue)}}return et}function me(ce,he){var Re,et;return ce==null?"":ce.constructor===Date?JSON.stringify(ce).slice(1,25):(et=!1,re&&typeof ce=="string"&&re.test(ce)&&(ce="'"+ce,et=!0),Re=ce.toString().replace(te,K),(et=et||V===!0||typeof V=="function"&&V(ce,he)||Array.isArray(V)&&V[he]||((le,Tt)=>{for(var _e=0;_e<Tt.length;_e++)if(-1<le.indexOf(Tt[_e]))return!0;return!1})(Re,g.BAD_DELIMITERS)||-1<Re.indexOf(Q)||Re.charAt(0)===" "||Re.charAt(Re.length-1)===" ")?Oe+Re+Oe:Re)}},g.RECORD_SEP="",g.UNIT_SEP="",g.BYTE_ORDER_MARK="\uFEFF",g.BAD_DELIMITERS=["\r",`
`,'"',g.BYTE_ORDER_MARK],g.WORKERS_SUPPORTED=!l&&!!i.Worker,g.NODE_STREAM_INPUT=1,g.LocalChunkSize=10485760,g.RemoteChunkSize=5242880,g.DefaultDelimiter=",",g.Parser=R,g.ParserHandle=L,g.NetworkStreamer=v,g.FileStreamer=C,g.StringStreamer=T,g.ReadableStreamStreamer=O,i.jQuery&&((a=i.jQuery).fn.parse=function(P){var N=P.config||{},V=[];return this.each(function(ue){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var Oe=0;Oe<this.files.length;Oe++)V.push({file:this.files[Oe],inputElem:this,instanceConfig:a.extend({},N)})}),J(),this;function J(){if(V.length===0)U(P.complete)&&P.complete();else{var ue,Oe,K,ze,ae=V[0];if(U(P.before)){var re=P.before(ae.file,ae.inputElem);if(typeof re=="object"){if(re.action==="abort")return ue="AbortError",Oe=ae.file,K=ae.inputElem,ze=re.reason,void(U(P.error)&&P.error({name:ue},Oe,K,ze));if(re.action==="skip")return void Q();typeof re.config=="object"&&(ae.instanceConfig=a.extend(ae.instanceConfig,re.config))}else if(re==="skip")return void Q()}var te=ae.instanceConfig.complete;ae.instanceConfig.complete=function(we){U(te)&&te(we,ae.file,ae.inputElem),Q()},g.parse(ae.file,ae.instanceConfig)}}function Q(){V.splice(0,1),J()}}),h&&(i.onmessage=function(P){P=P.data,g.WORKER_ID===void 0&&P&&(g.WORKER_ID=P.workerId),typeof P.input=="string"?i.postMessage({workerId:g.WORKER_ID,results:g.parse(P.input,P.config),finished:!0}):(i.File&&P.input instanceof File||P.input instanceof Object)&&(P=g.parse(P.input,P.config))&&i.postMessage({workerId:g.WORKER_ID,results:P,finished:!0})}),(v.prototype=Object.create(y.prototype)).constructor=v,(C.prototype=Object.create(y.prototype)).constructor=C,(T.prototype=Object.create(T.prototype)).constructor=T,(O.prototype=Object.create(y.prototype)).constructor=O,g})})(Hm);var w_=Hm.exports;const x_=Sd(w_);let $a;const y_=new Uint8Array(16);function v_(){if(!$a&&($a=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!$a))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $a(y_)}const Zt=[];for(let t=0;t<256;++t)Zt.push((t+256).toString(16).slice(1));function E_(t,e=0){return Zt[t[e+0]]+Zt[t[e+1]]+Zt[t[e+2]]+Zt[t[e+3]]+"-"+Zt[t[e+4]]+Zt[t[e+5]]+"-"+Zt[t[e+6]]+Zt[t[e+7]]+"-"+Zt[t[e+8]]+Zt[t[e+9]]+"-"+Zt[t[e+10]]+Zt[t[e+11]]+Zt[t[e+12]]+Zt[t[e+13]]+Zt[t[e+14]]+Zt[t[e+15]]}const C_=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),W0={randomUUID:C_};function __(t,e,r){if(W0.randomUUID&&!t)return W0.randomUUID();t=t||{};const i=t.random||(t.rng||v_)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,E_(i)}function A_(){const[t,e]=q.useState(!1),[r,i]=q.useState(null),[a,l]=q.useState([]),[h,m]=q.useState([]),[p,g]=q.useState(null),[y,v]=q.useState({});q.useEffect(()=>{C()},[]);const C=async()=>{const b=localStorage.getItem("currentEventId");if(!b){Be.error("Nenhum evento selecionado. Por favor, crie um evento primeiro.");return}try{const{data:S,error:M}=await Yt.from("eventos").select("*").eq("id",b).single();if(M)throw M;g(S)}catch(S){console.error("Erro ao carregar evento:",S),Be.error("Erro ao carregar evento")}},T=b=>{const S=b.target.files[0];S&&(i(S),O(S))},O=b=>{x_.parse(b,{header:!0,complete:S=>{const M=S.data.filter(Y=>Y.nome&&Y.email&&Y.mesa);l(M),M.length===0?Be.error("O ficheiro CSV no contm dados vlidos. Certifique-se de incluir colunas: nome, email, mesa"):Be.success(`${M.length} convidados carregados do CSV`)},error:S=>{Be.error("Erro ao processar o ficheiro CSV: "+S.message)}})},L=async()=>{if(!p){Be.error("Por favor, crie um evento primeiro");return}if(a.length===0){Be.error("Nenhum convidado para fazer upload");return}e(!0);try{const b=a.map(G=>({id:__(),evento_id:p.id,nome:G.nome,email:G.email,mesa:G.mesa,confirmado:!1,checkin:!1})),{data:S,error:M}=await Yt.from("convidados").insert(b).select();if(M)throw M;const Y=S.map(G=>({...G,link:`${window.location.origin}/confirmar?id=${G.id}`}));m(Y),Be.success(`${S.length} convidados adicionados com sucesso!`)}catch(b){console.error("Erro ao fazer upload dos convidados:",b),Be.error("Erro ao fazer upload: "+b.message)}finally{e(!1)}},j=(b,S)=>{navigator.clipboard.writeText(S),v({...y,[b]:!0}),Be.success("Link copiado!"),setTimeout(()=>{v({...y,[b]:!1})},2e3)},R=(b,S)=>{const M=encodeURIComponent(`Confirmao de Presena - ${(p==null?void 0:p.nome)||"Evento"}`),Y=encodeURIComponent(`Ol,

Por favor confirme a sua presena no evento clicando no link abaixo:

${S}

Obrigado!`);window.open(`mailto:${b}?subject=${M}&body=${Y}`)};return B.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[B.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[B.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Upload de Convidados"}),p&&B.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[B.jsx("p",{className:"text-sm text-gray-600",children:"Evento atual:"}),B.jsx("p",{className:"font-semibold text-gray-900",children:p.nome}),B.jsxs("p",{className:"text-sm text-gray-600",children:[p.data," s ",p.hora," - ",p.local]})]}),B.jsxs("div",{className:"space-y-4",children:[B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ficheiro CSV (colunas: nome, email, mesa)"}),B.jsx("input",{type:"file",accept:".csv",onChange:T,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),a.length>0&&B.jsxs("div",{className:"mt-4",children:[B.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["Pr-visualizao (",a.length," convidados)"]}),B.jsxs("div",{className:"max-h-60 overflow-y-auto border rounded-lg",children:[B.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[B.jsx("thead",{className:"bg-gray-50",children:B.jsxs("tr",{children:[B.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Nome"}),B.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),B.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Mesa"})]})}),B.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.slice(0,10).map((b,S)=>B.jsxs("tr",{children:[B.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:b.nome}),B.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:b.email}),B.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:b.mesa})]},S))})]}),a.length>10&&B.jsxs("p",{className:"text-sm text-gray-500 p-2 text-center",children:["... e mais ",a.length-10," convidados"]})]})]}),B.jsx("button",{onClick:L,disabled:t||a.length===0,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition",children:t?"A fazer upload...":`Fazer Upload de ${a.length} Convidados`})]})]}),h.length>0&&B.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[B.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Links de Confirmao"}),B.jsx("div",{className:"overflow-x-auto",children:B.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[B.jsx("thead",{className:"bg-gray-50",children:B.jsxs("tr",{children:[B.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nome"}),B.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),B.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mesa"}),B.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),B.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(b=>B.jsxs("tr",{children:[B.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:b.nome}),B.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:b.email}),B.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:b.mesa}),B.jsx("td",{className:"px-4 py-3 text-sm",children:B.jsxs("div",{className:"flex space-x-2",children:[B.jsx("button",{onClick:()=>j(b.id,b.link),className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:y[b.id]?" Copiado":" Copiar Link"}),B.jsx("button",{onClick:()=>R(b.email,b.link),className:"inline-flex items-center px-3 py-1 border border-blue-300 text-sm font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:" Email"})]})})]},b.id))})]})})]}),B.jsx("div",{className:"mt-6 bg-blue-50 border-l-4 border-blue-400 p-4",children:B.jsx("div",{className:"flex",children:B.jsxs("div",{className:"ml-3",children:[B.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Formato do ficheiro CSV:"}),B.jsx("pre",{className:"text-xs text-blue-700 bg-white p-2 rounded",children:`nome,email,mesa
Joo Silva,joao@email.com,1
Maria Santos,maria@email.com,2
Pedro Costa,pedro@email.com,1`})]})})})]})}var S_=Object.defineProperty,Fl=Object.getOwnPropertySymbols,Wm=Object.prototype.hasOwnProperty,Gm=Object.prototype.propertyIsEnumerable,G0=(t,e,r)=>e in t?S_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Y0=(t,e)=>{for(var r in e||(e={}))Wm.call(e,r)&&G0(t,r,e[r]);if(Fl)for(var r of Fl(e))Gm.call(e,r)&&G0(t,r,e[r]);return t},b_=(t,e)=>{var r={};for(var i in t)Wm.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&Fl)for(var i of Fl(t))e.indexOf(i)<0&&Gm.call(t,i)&&(r[i]=t[i]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Xi;(t=>{const e=class{constructor(p,g,y,v){if(this.version=p,this.errorCorrectionLevel=g,this.modules=[],this.isFunction=[],p<e.MIN_VERSION||p>e.MAX_VERSION)throw new RangeError("Version value out of range");if(v<-1||v>7)throw new RangeError("Mask value out of range");this.size=p*4+17;let C=[];for(let O=0;O<this.size;O++)C.push(!1);for(let O=0;O<this.size;O++)this.modules.push(C.slice()),this.isFunction.push(C.slice());this.drawFunctionPatterns();const T=this.addEccAndInterleave(y);if(this.drawCodewords(T),v==-1){let O=1e9;for(let L=0;L<8;L++){this.applyMask(L),this.drawFormatBits(L);const j=this.getPenaltyScore();j<O&&(v=L,O=j),this.applyMask(L)}}l(0<=v&&v<=7),this.mask=v,this.applyMask(v),this.drawFormatBits(v),this.isFunction=[]}static encodeText(p,g){const y=t.QrSegment.makeSegments(p);return e.encodeSegments(y,g)}static encodeBinary(p,g){const y=t.QrSegment.makeBytes(p);return e.encodeSegments([y],g)}static encodeSegments(p,g,y=1,v=40,C=-1,T=!0){if(!(e.MIN_VERSION<=y&&y<=v&&v<=e.MAX_VERSION)||C<-1||C>7)throw new RangeError("Invalid value");let O,L;for(O=y;;O++){const S=e.getNumDataCodewords(O,g)*8,M=m.getTotalBits(p,O);if(M<=S){L=M;break}if(O>=v)throw new RangeError("Data too long")}for(const S of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])T&&L<=e.getNumDataCodewords(O,S)*8&&(g=S);let j=[];for(const S of p){i(S.mode.modeBits,4,j),i(S.numChars,S.mode.numCharCountBits(O),j);for(const M of S.getData())j.push(M)}l(j.length==L);const R=e.getNumDataCodewords(O,g)*8;l(j.length<=R),i(0,Math.min(4,R-j.length),j),i(0,(8-j.length%8)%8,j),l(j.length%8==0);for(let S=236;j.length<R;S^=253)i(S,8,j);let b=[];for(;b.length*8<j.length;)b.push(0);return j.forEach((S,M)=>b[M>>>3]|=S<<7-(M&7)),new e(O,g,b,C)}getModule(p,g){return 0<=p&&p<this.size&&0<=g&&g<this.size&&this.modules[g][p]}getModules(){return this.modules}drawFunctionPatterns(){for(let y=0;y<this.size;y++)this.setFunctionModule(6,y,y%2==0),this.setFunctionModule(y,6,y%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const p=this.getAlignmentPatternPositions(),g=p.length;for(let y=0;y<g;y++)for(let v=0;v<g;v++)y==0&&v==0||y==0&&v==g-1||y==g-1&&v==0||this.drawAlignmentPattern(p[y],p[v]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(p){const g=this.errorCorrectionLevel.formatBits<<3|p;let y=g;for(let C=0;C<10;C++)y=y<<1^(y>>>9)*1335;const v=(g<<10|y)^21522;l(v>>>15==0);for(let C=0;C<=5;C++)this.setFunctionModule(8,C,a(v,C));this.setFunctionModule(8,7,a(v,6)),this.setFunctionModule(8,8,a(v,7)),this.setFunctionModule(7,8,a(v,8));for(let C=9;C<15;C++)this.setFunctionModule(14-C,8,a(v,C));for(let C=0;C<8;C++)this.setFunctionModule(this.size-1-C,8,a(v,C));for(let C=8;C<15;C++)this.setFunctionModule(8,this.size-15+C,a(v,C));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let p=this.version;for(let y=0;y<12;y++)p=p<<1^(p>>>11)*7973;const g=this.version<<12|p;l(g>>>18==0);for(let y=0;y<18;y++){const v=a(g,y),C=this.size-11+y%3,T=Math.floor(y/3);this.setFunctionModule(C,T,v),this.setFunctionModule(T,C,v)}}drawFinderPattern(p,g){for(let y=-4;y<=4;y++)for(let v=-4;v<=4;v++){const C=Math.max(Math.abs(v),Math.abs(y)),T=p+v,O=g+y;0<=T&&T<this.size&&0<=O&&O<this.size&&this.setFunctionModule(T,O,C!=2&&C!=4)}}drawAlignmentPattern(p,g){for(let y=-2;y<=2;y++)for(let v=-2;v<=2;v++)this.setFunctionModule(p+v,g+y,Math.max(Math.abs(v),Math.abs(y))!=1)}setFunctionModule(p,g,y){this.modules[g][p]=y,this.isFunction[g][p]=!0}addEccAndInterleave(p){const g=this.version,y=this.errorCorrectionLevel;if(p.length!=e.getNumDataCodewords(g,y))throw new RangeError("Invalid argument");const v=e.NUM_ERROR_CORRECTION_BLOCKS[y.ordinal][g],C=e.ECC_CODEWORDS_PER_BLOCK[y.ordinal][g],T=Math.floor(e.getNumRawDataModules(g)/8),O=v-T%v,L=Math.floor(T/v);let j=[];const R=e.reedSolomonComputeDivisor(C);for(let S=0,M=0;S<v;S++){let Y=p.slice(M,M+L-C+(S<O?0:1));M+=Y.length;const G=e.reedSolomonComputeRemainder(Y,R);S<O&&Y.push(0),j.push(Y.concat(G))}let b=[];for(let S=0;S<j[0].length;S++)j.forEach((M,Y)=>{(S!=L-C||Y>=O)&&b.push(M[S])});return l(b.length==T),b}drawCodewords(p){if(p.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let g=0;for(let y=this.size-1;y>=1;y-=2){y==6&&(y=5);for(let v=0;v<this.size;v++)for(let C=0;C<2;C++){const T=y-C,L=(y+1&2)==0?this.size-1-v:v;!this.isFunction[L][T]&&g<p.length*8&&(this.modules[L][T]=a(p[g>>>3],7-(g&7)),g++)}}l(g==p.length*8)}applyMask(p){if(p<0||p>7)throw new RangeError("Mask value out of range");for(let g=0;g<this.size;g++)for(let y=0;y<this.size;y++){let v;switch(p){case 0:v=(y+g)%2==0;break;case 1:v=g%2==0;break;case 2:v=y%3==0;break;case 3:v=(y+g)%3==0;break;case 4:v=(Math.floor(y/3)+Math.floor(g/2))%2==0;break;case 5:v=y*g%2+y*g%3==0;break;case 6:v=(y*g%2+y*g%3)%2==0;break;case 7:v=((y+g)%2+y*g%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[g][y]&&v&&(this.modules[g][y]=!this.modules[g][y])}}getPenaltyScore(){let p=0;for(let C=0;C<this.size;C++){let T=!1,O=0,L=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[C][j]==T?(O++,O==5?p+=e.PENALTY_N1:O>5&&p++):(this.finderPenaltyAddHistory(O,L),T||(p+=this.finderPenaltyCountPatterns(L)*e.PENALTY_N3),T=this.modules[C][j],O=1);p+=this.finderPenaltyTerminateAndCount(T,O,L)*e.PENALTY_N3}for(let C=0;C<this.size;C++){let T=!1,O=0,L=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[j][C]==T?(O++,O==5?p+=e.PENALTY_N1:O>5&&p++):(this.finderPenaltyAddHistory(O,L),T||(p+=this.finderPenaltyCountPatterns(L)*e.PENALTY_N3),T=this.modules[j][C],O=1);p+=this.finderPenaltyTerminateAndCount(T,O,L)*e.PENALTY_N3}for(let C=0;C<this.size-1;C++)for(let T=0;T<this.size-1;T++){const O=this.modules[C][T];O==this.modules[C][T+1]&&O==this.modules[C+1][T]&&O==this.modules[C+1][T+1]&&(p+=e.PENALTY_N2)}let g=0;for(const C of this.modules)g=C.reduce((T,O)=>T+(O?1:0),g);const y=this.size*this.size,v=Math.ceil(Math.abs(g*20-y*10)/y)-1;return l(0<=v&&v<=9),p+=v*e.PENALTY_N4,l(0<=p&&p<=2568888),p}getAlignmentPatternPositions(){if(this.version==1)return[];{const p=Math.floor(this.version/7)+2,g=this.version==32?26:Math.ceil((this.version*4+4)/(p*2-2))*2;let y=[6];for(let v=this.size-7;y.length<p;v-=g)y.splice(1,0,v);return y}}static getNumRawDataModules(p){if(p<e.MIN_VERSION||p>e.MAX_VERSION)throw new RangeError("Version number out of range");let g=(16*p+128)*p+64;if(p>=2){const y=Math.floor(p/7)+2;g-=(25*y-10)*y-55,p>=7&&(g-=36)}return l(208<=g&&g<=29648),g}static getNumDataCodewords(p,g){return Math.floor(e.getNumRawDataModules(p)/8)-e.ECC_CODEWORDS_PER_BLOCK[g.ordinal][p]*e.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][p]}static reedSolomonComputeDivisor(p){if(p<1||p>255)throw new RangeError("Degree out of range");let g=[];for(let v=0;v<p-1;v++)g.push(0);g.push(1);let y=1;for(let v=0;v<p;v++){for(let C=0;C<g.length;C++)g[C]=e.reedSolomonMultiply(g[C],y),C+1<g.length&&(g[C]^=g[C+1]);y=e.reedSolomonMultiply(y,2)}return g}static reedSolomonComputeRemainder(p,g){let y=g.map(v=>0);for(const v of p){const C=v^y.shift();y.push(0),g.forEach((T,O)=>y[O]^=e.reedSolomonMultiply(T,C))}return y}static reedSolomonMultiply(p,g){if(p>>>8||g>>>8)throw new RangeError("Byte out of range");let y=0;for(let v=7;v>=0;v--)y=y<<1^(y>>>7)*285,y^=(g>>>v&1)*p;return l(y>>>8==0),y}finderPenaltyCountPatterns(p){const g=p[1];l(g<=this.size*3);const y=g>0&&p[2]==g&&p[3]==g*3&&p[4]==g&&p[5]==g;return(y&&p[0]>=g*4&&p[6]>=g?1:0)+(y&&p[6]>=g*4&&p[0]>=g?1:0)}finderPenaltyTerminateAndCount(p,g,y){return p&&(this.finderPenaltyAddHistory(g,y),g=0),g+=this.size,this.finderPenaltyAddHistory(g,y),this.finderPenaltyCountPatterns(y)}finderPenaltyAddHistory(p,g){g[0]==0&&(p+=this.size),g.pop(),g.unshift(p)}};let r=e;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function i(p,g,y){if(g<0||g>31||p>>>g)throw new RangeError("Value out of range");for(let v=g-1;v>=0;v--)y.push(p>>>v&1)}function a(p,g){return(p>>>g&1)!=0}function l(p){if(!p)throw new Error("Assertion error")}const h=class{constructor(p,g,y){if(this.mode=p,this.numChars=g,this.bitData=y,g<0)throw new RangeError("Invalid argument");this.bitData=y.slice()}static makeBytes(p){let g=[];for(const y of p)i(y,8,g);return new h(h.Mode.BYTE,p.length,g)}static makeNumeric(p){if(!h.isNumeric(p))throw new RangeError("String contains non-numeric characters");let g=[];for(let y=0;y<p.length;){const v=Math.min(p.length-y,3);i(parseInt(p.substr(y,v),10),v*3+1,g),y+=v}return new h(h.Mode.NUMERIC,p.length,g)}static makeAlphanumeric(p){if(!h.isAlphanumeric(p))throw new RangeError("String contains unencodable characters in alphanumeric mode");let g=[],y;for(y=0;y+2<=p.length;y+=2){let v=h.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y))*45;v+=h.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y+1)),i(v,11,g)}return y<p.length&&i(h.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y)),6,g),new h(h.Mode.ALPHANUMERIC,p.length,g)}static makeSegments(p){return p==""?[]:h.isNumeric(p)?[h.makeNumeric(p)]:h.isAlphanumeric(p)?[h.makeAlphanumeric(p)]:[h.makeBytes(h.toUtf8ByteArray(p))]}static makeEci(p){let g=[];if(p<0)throw new RangeError("ECI assignment value out of range");if(p<128)i(p,8,g);else if(p<16384)i(2,2,g),i(p,14,g);else if(p<1e6)i(6,3,g),i(p,21,g);else throw new RangeError("ECI assignment value out of range");return new h(h.Mode.ECI,0,g)}static isNumeric(p){return h.NUMERIC_REGEX.test(p)}static isAlphanumeric(p){return h.ALPHANUMERIC_REGEX.test(p)}getData(){return this.bitData.slice()}static getTotalBits(p,g){let y=0;for(const v of p){const C=v.mode.numCharCountBits(g);if(v.numChars>=1<<C)return 1/0;y+=4+C+v.bitData.length}return y}static toUtf8ByteArray(p){p=encodeURI(p);let g=[];for(let y=0;y<p.length;y++)p.charAt(y)!="%"?g.push(p.charCodeAt(y)):(g.push(parseInt(p.substr(y+1,2),16)),y+=2);return g}};let m=h;m.NUMERIC_REGEX=/^[0-9]*$/,m.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,m.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=m})(Xi||(Xi={}));(t=>{(e=>{const r=class{constructor(a,l){this.ordinal=a,this.formatBits=l}};let i=r;i.LOW=new r(0,1),i.MEDIUM=new r(1,0),i.QUARTILE=new r(2,3),i.HIGH=new r(3,2),e.Ecc=i})(t.QrCode||(t.QrCode={}))})(Xi||(Xi={}));(t=>{(e=>{const r=class{constructor(a,l){this.modeBits=a,this.numBitsCharCount=l}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};let i=r;i.NUMERIC=new r(1,[10,12,14]),i.ALPHANUMERIC=new r(2,[9,11,13]),i.BYTE=new r(4,[8,16,16]),i.KANJI=new r(8,[8,10,12]),i.ECI=new r(7,[0,0,0]),e.Mode=i})(t.QrSegment||(t.QrSegment={}))})(Xi||(Xi={}));var Ao=Xi;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var I_={L:Ao.QrCode.Ecc.LOW,M:Ao.QrCode.Ecc.MEDIUM,Q:Ao.QrCode.Ecc.QUARTILE,H:Ao.QrCode.Ecc.HIGH},T_=128,N_="L",O_="#FFFFFF",R_="#000000",k_=!1,Ym=4,M_=.1;function D_(t,e=0){const r=[];return t.forEach(function(i,a){let l=null;i.forEach(function(h,m){if(!h&&l!==null){r.push(`M${l+e} ${a+e}h${m-l}v1H${l+e}z`),l=null;return}if(m===i.length-1){if(!h)return;l===null?r.push(`M${m+e},${a+e} h1v1H${m+e}z`):r.push(`M${l+e},${a+e} h${m+1-l}v1H${l+e}z`);return}h&&l===null&&(l=m)})}),r.join("")}function P_(t,e){return t.slice().map((r,i)=>i<e.y||i>=e.y+e.h?r:r.map((a,l)=>l<e.x||l>=e.x+e.w?a:!1))}function L_(t,e,r,i){if(i==null)return null;const a=r?Ym:0,l=t.length+a*2,h=Math.floor(e*M_),m=l/e,p=(i.width||h)*m,g=(i.height||h)*m,y=i.x==null?t.length/2-p/2:i.x*m,v=i.y==null?t.length/2-g/2:i.y*m;let C=null;if(i.excavate){let T=Math.floor(y),O=Math.floor(v),L=Math.ceil(p+y-T),j=Math.ceil(g+v-O);C={x:T,y:O,w:L,h:j}}return{x:y,y:v,h:g,w:p,excavation:C}}var B_=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function j_(t){const e=t,{value:r,size:i=T_,level:a=N_,bgColor:l=O_,fgColor:h=R_,includeMargin:m=k_,style:p,imageSettings:g}=e,y=b_(e,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),v=g==null?void 0:g.src,C=nn.useRef(null),T=nn.useRef(null),[O,L]=nn.useState(!1);nn.useEffect(()=>{if(C.current!=null){const b=C.current,S=b.getContext("2d");if(!S)return;let M=Ao.QrCode.encodeText(r,I_[a]).getModules();const Y=m?Ym:0,G=M.length+Y*2,U=L_(M,i,m,g),P=T.current,N=U!=null&&P!==null&&P.complete&&P.naturalHeight!==0&&P.naturalWidth!==0;N&&U.excavation!=null&&(M=P_(M,U.excavation));const V=window.devicePixelRatio||1;b.height=b.width=i*V;const J=i/G*V;S.scale(J,J),S.fillStyle=l,S.fillRect(0,0,G,G),S.fillStyle=h,B_?S.fill(new Path2D(D_(M,Y))):M.forEach(function(Q,ue){Q.forEach(function(Oe,K){Oe&&S.fillRect(K+Y,ue+Y,1,1)})}),N&&S.drawImage(P,U.x+Y,U.y+Y,U.w,U.h)}}),nn.useEffect(()=>{L(!1)},[v]);const j=Y0({height:i,width:i},p);let R=null;return v!=null&&(R=nn.createElement("img",{src:v,key:v,style:{display:"none"},onLoad:()=>{L(!0)},ref:T})),nn.createElement(nn.Fragment,null,nn.createElement("canvas",Y0({style:j,height:i,width:i,ref:C},y)),R)}function F_(){const[t]=ov(),[e,r]=q.useState(!0),[i,a]=q.useState(null),[l,h]=q.useState(null),[m,p]=q.useState(!1),[g,y]=q.useState(""),v=q.useRef(null);q.useEffect(()=>{C()},[]);const C=async()=>{const j=t.get("id");if(!j){Be.error("Link invlido - ID do convidado no encontrado"),r(!1);return}try{const{data:R,error:b}=await Yt.from("convidados").select("*").eq("id",j).single();if(b)throw b;a(R),p(R.confirmado);const{data:S,error:M}=await Yt.from("eventos").select("*").eq("id",R.evento_id).single();if(M)throw M;h(S);const Y=JSON.stringify({id:R.id,nome:R.nome,mesa:R.mesa});y(Y)}catch(R){console.error("Erro ao carregar dados:",R),Be.error("Erro ao carregar dados do convidado")}finally{r(!1)}},T=async()=>{if(i){r(!0);try{const{error:j}=await Yt.from("convidados").update({confirmado:!0}).eq("id",i.id);if(j)throw j;await O(),p(!0),Be.success("Presena confirmada com sucesso!")}catch(j){console.error("Erro ao confirmar presena:",j),Be.error("Erro ao confirmar presena")}finally{r(!1)}}},O=async()=>{if(v.current)try{const j=v.current.querySelector("canvas"),R=await new Promise(M=>j.toBlob(M)),b=`qrcodes/${i.id}.png`,{error:S}=await Yt.storage.from("qrcodes").upload(b,R,{contentType:"image/png",upsert:!0});if(S)throw S}catch(j){console.error("Erro ao salvar QR code:",j)}},L=()=>{const R=v.current.querySelector("canvas").toDataURL("image/png"),b=document.createElement("a");b.href=R,b.download=`qrcode-${i.nome.replace(/\s+/g,"-")}.png`,document.body.appendChild(b),b.click(),document.body.removeChild(b),Be.success("QR Code descarregado!")};return e?B.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:B.jsxs("div",{className:"text-center",children:[B.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),B.jsx("p",{className:"mt-4 text-gray-600",children:"A carregar..."})]})}):!i||!l?B.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:B.jsxs("div",{className:"text-center",children:[B.jsx("div",{className:"text-red-600 text-6xl mb-4",children:""}),B.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Link Invlido"}),B.jsx("p",{className:"text-gray-600",children:"O link de confirmao no  vlido ou expirou."})]})}):B.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4",children:B.jsx("div",{className:"max-w-2xl mx-auto",children:B.jsxs("div",{className:"bg-white rounded-xl shadow-xl overflow-hidden",children:[B.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6",children:[B.jsx("h1",{className:"text-3xl font-bold mb-2",children:l.nome}),B.jsxs("div",{className:"flex items-center space-x-4 text-blue-100",children:[B.jsxs("span",{className:"flex items-center",children:[" ",new Date(l.data).toLocaleDateString("pt-PT")]}),B.jsxs("span",{className:"flex items-center",children:[" ",l.hora]})]}),B.jsxs("p",{className:"mt-2 flex items-center text-blue-100",children:[" ",l.local]})]}),B.jsxs("div",{className:"p-6",children:[B.jsxs("div",{className:"text-center mb-6",children:[B.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-blue-100 rounded-full mb-4",children:B.jsx("span",{className:"text-3xl",children:""})}),B.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:i.nome}),B.jsxs("p",{className:"text-lg text-gray-600 mt-2",children:["Mesa ",i.mesa]})]}),m?B.jsxs("div",{className:"text-center",children:[B.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:B.jsxs("p",{className:"text-green-800 font-medium flex items-center justify-center",children:[B.jsx("span",{className:"text-2xl mr-2",children:""}),"Presena Confirmada!"]})}),B.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[B.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Seu QR Code para Check-in"}),B.jsx("div",{ref:v,className:"flex justify-center mb-4",children:B.jsx("div",{className:"p-4 bg-white rounded-lg shadow-md",children:B.jsx(j_,{value:g,size:200,level:"H",includeMargin:!0})})}),B.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Apresente este QR Code na entrada do evento"}),B.jsxs("button",{onClick:L,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[B.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:B.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Descarregar QR Code"]})]}),B.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[B.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Informaes importantes:"}),B.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[B.jsx("li",{children:" Guarde este QR Code no seu telemvel"}),B.jsx("li",{children:" Apresente-o na entrada do evento"}),B.jsx("li",{children:" Cada QR Code  nico e intransmissvel"})]})]})]}):B.jsxs("div",{className:"text-center",children:[B.jsx("p",{className:"text-gray-600 mb-6",children:"Por favor, confirme a sua presena no evento clicando no boto abaixo."}),B.jsx("button",{onClick:T,disabled:e,className:"bg-green-600 text-white px-8 py-3 rounded-lg text-lg font-medium hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-green-500 focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed transition",children:e?"A confirmar...":" Confirmar Presena"})]})]})]})})})}var ge;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ge||(ge={}));var X0=new Map([[ge.QR_CODE,"QR_CODE"],[ge.AZTEC,"AZTEC"],[ge.CODABAR,"CODABAR"],[ge.CODE_39,"CODE_39"],[ge.CODE_93,"CODE_93"],[ge.CODE_128,"CODE_128"],[ge.DATA_MATRIX,"DATA_MATRIX"],[ge.MAXICODE,"MAXICODE"],[ge.ITF,"ITF"],[ge.EAN_13,"EAN_13"],[ge.EAN_8,"EAN_8"],[ge.PDF_417,"PDF_417"],[ge.RSS_14,"RSS_14"],[ge.RSS_EXPANDED,"RSS_EXPANDED"],[ge.UPC_A,"UPC_A"],[ge.UPC_E,"UPC_E"],[ge.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),$0;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})($0||($0={}));function U_(t){return Object.values(ge).includes(t)}var mi;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(mi||(mi={}));var ln=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[mi.SCAN_TYPE_CAMERA,mi.SCAN_TYPE_FILE],t}(),Xm=function(){function t(e,r){this.format=e,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!X0.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,X0.get(e))},t}(),K0=function(){function t(){}return t.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Cd;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Cd||(Cd={}));var $m=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Cd.UNKWOWN_ERROR}},t}(),Km=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function En(t){return typeof t>"u"||t===null}function z_(t,e,r){return t>r?r:t<e?e:t}var Ns=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),Ze=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),q0=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),qm=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var i=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(a),h=Object.keys(e),m=0,p=h;m<p.length;m++){var g=p[m];if(l.has(g))return r.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},t}(),_d={exports:{}};(function(t,e){(function(r,i){i(e)})(fs,function(r){function i(_){return _==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,n){_.__proto__=n}||function(_,n){for(var s in n)n.hasOwnProperty(s)&&(_[s]=n[s])};function l(_,n){a(_,n);function s(){this.constructor=_}_.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}function h(_,n){var s=Object.setPrototypeOf;s?s(_,n):_.__proto__=n}function m(_,n){n===void 0&&(n=_.constructor);var s=Error.captureStackTrace;s&&s(_,n)}var p=function(_){l(n,_);function n(s){var o=this.constructor,u=_.call(this,s)||this;return Object.defineProperty(u,"name",{value:o.name,enumerable:!1}),h(u,o.prototype),m(u),u}return n}(Error);class g extends p{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}g.kind="Exception";class y extends g{}y.kind="ArgumentException";class v extends g{}v.kind="IllegalArgumentException";class C{constructor(n){if(this.binarizer=n,n===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,s){return this.binarizer.getBlackRow(n,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,s,o,u){const c=this.binarizer.getLuminanceSource().crop(n,s,o,u);return new C(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new C(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new C(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class T extends g{static getChecksumInstance(){return new T}}T.kind="ChecksumException";class O{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class L{static arraycopy(n,s,o,u,c){for(;c--;)o[u++]=n[s++]}static currentTimeMillis(){return Date.now()}}class j extends g{}j.kind="IndexOutOfBoundsException";class R extends j{constructor(n=void 0,s=void 0){super(s),this.index=n,this.message=s}}R.kind="ArrayIndexOutOfBoundsException";class b{static fill(n,s){for(let o=0,u=n.length;o<u;o++)n[o]=s}static fillWithin(n,s,o,u){b.rangeCheck(n.length,s,o);for(let c=s;c<o;c++)n[c]=u}static rangeCheck(n,s,o){if(s>o)throw new v("fromIndex("+s+") > toIndex("+o+")");if(s<0)throw new R(s);if(o>n)throw new R(o)}static asList(...n){return n}static create(n,s,o){return Array.from({length:n}).map(c=>Array.from({length:s}).fill(o))}static createInt32Array(n,s,o){return Array.from({length:n}).map(c=>Int32Array.from({length:s}).fill(o))}static equals(n,s){if(!n||!s||!n.length||!s.length||n.length!==s.length)return!1;for(let o=0,u=n.length;o<u;o++)if(n[o]!==s[o])return!1;return!0}static hashCode(n){if(n===null)return 0;let s=1;for(const o of n)s=31*s+o;return s}static fillUint8Array(n,s){for(let o=0;o!==n.length;o++)n[o]=s}static copyOf(n,s){return n.slice(0,s)}static copyOfUint8Array(n,s){if(n.length<=s){const o=new Uint8Array(s);return o.set(n),o}return n.slice(0,s)}static copyOfRange(n,s,o){const u=o-s,c=new Int32Array(u);return L.arraycopy(n,s,c,0,u),c}static binarySearch(n,s,o){o===void 0&&(o=b.numberComparator);let u=0,c=n.length-1;for(;u<=c;){const d=c+u>>1,f=o(s,n[d]);if(f>0)u=d+1;else if(f<0)c=d-1;else return d}return-u-1}static numberComparator(n,s){return n-s}}class S{static numberOfTrailingZeros(n){let s;if(n===0)return 32;let o=31;return s=n<<16,s!==0&&(o-=16,n=s),s=n<<8,s!==0&&(o-=8,n=s),s=n<<4,s!==0&&(o-=4,n=s),s=n<<2,s!==0&&(o-=2,n=s),o-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let s=1;return n>>>16||(s+=16,n<<=16),n>>>24||(s+=8,n<<=8),n>>>28||(s+=4,n<<=4),n>>>30||(s+=2,n<<=2),s-=n>>>31,s}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,s){return Math.trunc(n/s)}static parseInt(n,s=void 0){return parseInt(n,s)}}S.MIN_VALUE_32_BITS=-2147483648,S.MAX_VALUE=Number.MAX_SAFE_INTEGER;class M{constructor(n,s){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,s==null?this.bits=M.makeArray(n):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const s=M.makeArray(n);L.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const s=this.size;if(n>=s)return s;const o=this.bits;let u=Math.floor(n/32),c=o[u];c&=~((1<<(n&31))-1);const d=o.length;for(;c===0;){if(++u===d)return s;c=o[u]}const f=u*32+S.numberOfTrailingZeros(c);return f>s?s:f}getNextUnset(n){const s=this.size;if(n>=s)return s;const o=this.bits;let u=Math.floor(n/32),c=~o[u];c&=~((1<<(n&31))-1);const d=o.length;for(;c===0;){if(++u===d)return s;c=~o[u]}const f=u*32+S.numberOfTrailingZeros(c);return f>s?s:f}setBulk(n,s){this.bits[Math.floor(n/32)]=s}setRange(n,s){if(s<n||n<0||s>this.size)throw new v;if(s===n)return;s--;const o=Math.floor(n/32),u=Math.floor(s/32),c=this.bits;for(let d=o;d<=u;d++){const f=d>o?0:n&31,x=(2<<(d<u?31:s&31))-(1<<f);c[d]|=x}}clear(){const n=this.bits.length,s=this.bits;for(let o=0;o<n;o++)s[o]=0}isRange(n,s,o){if(s<n||n<0||s>this.size)throw new v;if(s===n)return!0;s--;const u=Math.floor(n/32),c=Math.floor(s/32),d=this.bits;for(let f=u;f<=c;f++){const w=f>u?0:n&31,E=(2<<(f<c?31:s&31))-(1<<w)&4294967295;if((d[f]&E)!==(o?E:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,s){if(s<0||s>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let o=s;o>0;o--)this.appendBit((n>>o-1&1)===1)}appendBitArray(n){const s=n.size;this.ensureCapacity(this.size+s);for(let o=0;o<s;o++)this.appendBit(n.get(o))}xor(n){if(this.size!==n.size)throw new v("Sizes don't match");const s=this.bits;for(let o=0,u=s.length;o<u;o++)s[o]^=n.bits[o]}toBytes(n,s,o,u){for(let c=0;c<u;c++){let d=0;for(let f=0;f<8;f++)this.get(n)&&(d|=1<<7-f),n++;s[o+c]=d}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),o=s+1,u=this.bits;for(let c=0;c<o;c++){let d=u[c];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,n[s-c]=d}if(this.size!==o*32){const c=o*32-this.size;let d=n[0]>>>c;for(let f=1;f<o;f++){const w=n[f];d|=w<<32-c,n[f-1]=d,d=w>>>c}n[o-1]=d}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof M))return!1;const s=n;return this.size===s.size&&b.equals(this.bits,s.bits)}hashCode(){return 31*this.size+b.hashCode(this.bits)}toString(){let n="";for(let s=0,o=this.size;s<o;s++)s&7||(n+=" "),n+=this.get(s)?"X":".";return n}clone(){return new M(this.size,this.bits.slice())}}var Y;(function(_){_[_.OTHER=0]="OTHER",_[_.PURE_BARCODE=1]="PURE_BARCODE",_[_.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",_[_.TRY_HARDER=3]="TRY_HARDER",_[_.CHARACTER_SET=4]="CHARACTER_SET",_[_.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",_[_.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",_[_.ASSUME_GS1=7]="ASSUME_GS1",_[_.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",_[_.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",_[_.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Y||(Y={}));var G=Y;class U extends g{static getFormatInstance(){return new U}}U.kind="FormatException";var P;(function(_){_[_.Cp437=0]="Cp437",_[_.ISO8859_1=1]="ISO8859_1",_[_.ISO8859_2=2]="ISO8859_2",_[_.ISO8859_3=3]="ISO8859_3",_[_.ISO8859_4=4]="ISO8859_4",_[_.ISO8859_5=5]="ISO8859_5",_[_.ISO8859_6=6]="ISO8859_6",_[_.ISO8859_7=7]="ISO8859_7",_[_.ISO8859_8=8]="ISO8859_8",_[_.ISO8859_9=9]="ISO8859_9",_[_.ISO8859_10=10]="ISO8859_10",_[_.ISO8859_11=11]="ISO8859_11",_[_.ISO8859_13=12]="ISO8859_13",_[_.ISO8859_14=13]="ISO8859_14",_[_.ISO8859_15=14]="ISO8859_15",_[_.ISO8859_16=15]="ISO8859_16",_[_.SJIS=16]="SJIS",_[_.Cp1250=17]="Cp1250",_[_.Cp1251=18]="Cp1251",_[_.Cp1252=19]="Cp1252",_[_.Cp1256=20]="Cp1256",_[_.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",_[_.UTF8=22]="UTF8",_[_.ASCII=23]="ASCII",_[_.Big5=24]="Big5",_[_.GB18030=25]="GB18030",_[_.EUC_KR=26]="EUC_KR"})(P||(P={}));class N{constructor(n,s,o,...u){this.valueIdentifier=n,this.name=o,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=u,N.VALUE_IDENTIFIER_TO_ECI.set(n,this),N.NAME_TO_ECI.set(o,this);const c=this.values;for(let d=0,f=c.length;d!==f;d++){const w=c[d];N.VALUES_TO_ECI.set(w,this)}for(const d of u)N.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new U("incorect value");const s=N.VALUES_TO_ECI.get(n);if(s===void 0)throw new U("incorect value");return s}static getCharacterSetECIByName(n){const s=N.NAME_TO_ECI.get(n);if(s===void 0)throw new U("incorect value");return s}equals(n){if(!(n instanceof N))return!1;const s=n;return this.getName()===s.getName()}}N.VALUE_IDENTIFIER_TO_ECI=new Map,N.VALUES_TO_ECI=new Map,N.NAME_TO_ECI=new Map,N.Cp437=new N(P.Cp437,Int32Array.from([0,2]),"Cp437"),N.ISO8859_1=new N(P.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),N.ISO8859_2=new N(P.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),N.ISO8859_3=new N(P.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),N.ISO8859_4=new N(P.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),N.ISO8859_5=new N(P.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),N.ISO8859_6=new N(P.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),N.ISO8859_7=new N(P.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),N.ISO8859_8=new N(P.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),N.ISO8859_9=new N(P.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),N.ISO8859_10=new N(P.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),N.ISO8859_11=new N(P.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),N.ISO8859_13=new N(P.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),N.ISO8859_14=new N(P.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),N.ISO8859_15=new N(P.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),N.ISO8859_16=new N(P.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),N.SJIS=new N(P.SJIS,20,"SJIS","Shift_JIS"),N.Cp1250=new N(P.Cp1250,21,"Cp1250","windows-1250"),N.Cp1251=new N(P.Cp1251,22,"Cp1251","windows-1251"),N.Cp1252=new N(P.Cp1252,23,"Cp1252","windows-1252"),N.Cp1256=new N(P.Cp1256,24,"Cp1256","windows-1256"),N.UnicodeBigUnmarked=new N(P.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),N.UTF8=new N(P.UTF8,26,"UTF8","UTF-8"),N.ASCII=new N(P.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),N.Big5=new N(P.Big5,28,"Big5"),N.GB18030=new N(P.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),N.EUC_KR=new N(P.EUC_KR,30,"EUC_KR","EUC-KR");class V extends g{}V.kind="UnsupportedOperationException";class J{static decode(n,s){const o=this.encodingName(s);return this.customDecoder?this.customDecoder(n,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(n,o):new TextDecoder(o).decode(n)}static shouldDecodeOnFallback(n){return!J.isBrowser()&&n==="ISO-8859-1"}static encode(n,s){const o=this.encodingName(s);return this.customEncoder?this.customEncoder(n,o):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof N?n:N.getCharacterSetECIByName(n)}static decodeFallback(n,s){const o=this.encodingCharacterSet(s);if(J.isDecodeFallbackSupported(o)){let u="";for(let c=0,d=n.length;c<d;c++){let f=n[c].toString(16);f.length<2&&(f="0"+f),u+="%"+f}return decodeURIComponent(u)}if(o.equals(N.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new V(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(N.UTF8)||n.equals(N.ISO8859_1)||n.equals(N.ASCII)}static encodeFallback(n){const o=btoa(unescape(encodeURIComponent(n))).split(""),u=[];for(let c=0;c<o.length;c++)u.push(o[c].charCodeAt(0));return new Uint8Array(u)}}class Q{static castAsNonUtf8Char(n,s=null){const o=s?s.getName():this.ISO88591;return J.decode(new Uint8Array([n]),o)}static guessEncoding(n,s){if(s!=null&&s.get(G.CHARACTER_SET)!==void 0)return s.get(G.CHARACTER_SET).toString();const o=n.length;let u=!0,c=!0,d=!0,f=0,w=0,x=0,E=0,A=0,I=0,D=0,F=0,z=0,H=0,$=0;const ie=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let se=0;se<o&&(u||c||d);se++){const ee=n[se]&255;d&&(f>0?ee&128?f--:d=!1:ee&128&&(ee&64?(f++,ee&32?(f++,ee&16?(f++,ee&8?d=!1:E++):x++):w++):d=!1)),u&&(ee>127&&ee<160?u=!1:ee>159&&(ee<192||ee===215||ee===247)&&$++),c&&(A>0?ee<64||ee===127||ee>252?c=!1:A--:ee===128||ee===160||ee>239?c=!1:ee>160&&ee<224?(I++,F=0,D++,D>z&&(z=D)):ee>127?(A++,D=0,F++,F>H&&(H=F)):(D=0,F=0))}return d&&f>0&&(d=!1),c&&A>0&&(c=!1),d&&(ie||w+x+E>0)?Q.UTF8:c&&(Q.ASSUME_SHIFT_JIS||z>=3||H>=3)?Q.SHIFT_JIS:u&&c?z===2&&I===2||$*10>=o?Q.SHIFT_JIS:Q.ISO88591:u?Q.ISO88591:c?Q.SHIFT_JIS:d?Q.UTF8:Q.PLATFORM_DEFAULT_ENCODING}static format(n,...s){let o=-1;function u(d,f,w,x,E,A){if(d==="%%")return"%";if(s[++o]===void 0)return;d=x?parseInt(x.substr(1)):void 0;let I=E?parseInt(E.substr(1)):void 0,D;switch(A){case"s":D=s[o];break;case"c":D=s[o][0];break;case"f":D=parseFloat(s[o]).toFixed(d);break;case"p":D=parseFloat(s[o]).toPrecision(d);break;case"e":D=parseFloat(s[o]).toExponential(d);break;case"x":D=parseInt(s[o]).toString(I||16);break;case"d":D=parseFloat(parseInt(s[o],I||10).toPrecision(d)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(I);let F=parseInt(w),z=w&&w[0]+""=="0"?"0":" ";for(;D.length<F;)D=f!==void 0?D+z:z+D;return D}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(c,u)}static getBytes(n,s){return J.encode(n,s)}static getCharCode(n,s=0){return n.charCodeAt(s)}static getCharAt(n){return String.fromCharCode(n)}}Q.SHIFT_JIS=N.SJIS.getName(),Q.GB2312="GB2312",Q.ISO88591=N.ISO8859_1.getName(),Q.EUC_JP="EUC_JP",Q.UTF8=N.UTF8.getName(),Q.PLATFORM_DEFAULT_ENCODING=Q.UTF8,Q.ASSUME_SHIFT_JIS=!1;class ue{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=Q.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,s,o){for(let u=s;s<s+o;u++)this.append(n[u]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,s){this.value=this.value.substr(0,n)+s+this.value.substr(n+1)}substring(n,s){return this.value.substring(n,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,s){this.value=this.value.substr(0,n)+s+this.value.substr(n+s.length)}}class Oe{constructor(n,s,o,u){if(this.width=n,this.height=s,this.rowSize=o,this.bits=u,s==null&&(s=n),this.height=s,n<1||s<1)throw new v("Both dimensions must be greater than 0");o==null&&(o=Math.floor((n+31)/32)),this.rowSize=o,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const s=n.length,o=n[0].length,u=new Oe(o,s);for(let c=0;c<s;c++){const d=n[c];for(let f=0;f<o;f++)d[f]&&u.set(f,c)}return u}static parseFromString(n,s,o){if(n===null)throw new v("stringRepresentation cannot be null");const u=new Array(n.length);let c=0,d=0,f=-1,w=0,x=0;for(;x<n.length;)if(n.charAt(x)===`
`||n.charAt(x)==="\r"){if(c>d){if(f===-1)f=c-d;else if(c-d!==f)throw new v("row lengths do not match");d=c,w++}x++}else if(n.substring(x,x+s.length)===s)x+=s.length,u[c]=!0,c++;else if(n.substring(x,x+o.length)===o)x+=o.length,u[c]=!1,c++;else throw new v("illegal character encountered: "+n.substring(x));if(c>d){if(f===-1)f=c-d;else if(c-d!==f)throw new v("row lengths do not match");w++}const E=new Oe(f,w);for(let A=0;A<c;A++)u[A]&&E.set(Math.floor(A%f),Math.floor(A/f));return E}get(n,s){const o=s*this.rowSize+Math.floor(n/32);return(this.bits[o]>>>(n&31)&1)!==0}set(n,s){const o=s*this.rowSize+Math.floor(n/32);this.bits[o]|=1<<(n&31)&4294967295}unset(n,s){const o=s*this.rowSize+Math.floor(n/32);this.bits[o]&=~(1<<(n&31)&4294967295)}flip(n,s){const o=s*this.rowSize+Math.floor(n/32);this.bits[o]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new v("input matrix dimensions do not match");const s=new M(Math.floor(this.width/32)+1),o=this.rowSize,u=this.bits;for(let c=0,d=this.height;c<d;c++){const f=c*o,w=n.getRow(c,s).getBitArray();for(let x=0;x<o;x++)u[f+x]^=w[x]}}clear(){const n=this.bits,s=n.length;for(let o=0;o<s;o++)n[o]=0}setRegion(n,s,o,u){if(s<0||n<0)throw new v("Left and top must be nonnegative");if(u<1||o<1)throw new v("Height and width must be at least 1");const c=n+o,d=s+u;if(d>this.height||c>this.width)throw new v("The region must fit inside the matrix");const f=this.rowSize,w=this.bits;for(let x=s;x<d;x++){const E=x*f;for(let A=n;A<c;A++)w[E+Math.floor(A/32)]|=1<<(A&31)&4294967295}}getRow(n,s){s==null||s.getSize()<this.width?s=new M(this.width):s.clear();const o=this.rowSize,u=this.bits,c=n*o;for(let d=0;d<o;d++)s.setBulk(d*32,u[c+d]);return s}setRow(n,s){L.arraycopy(s.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),s=this.getHeight();let o=new M(n),u=new M(n);for(let c=0,d=Math.floor((s+1)/2);c<d;c++)o=this.getRow(c,o),u=this.getRow(s-1-c,u),o.reverse(),u.reverse(),this.setRow(c,u),this.setRow(s-1-c,o)}getEnclosingRectangle(){const n=this.width,s=this.height,o=this.rowSize,u=this.bits;let c=n,d=s,f=-1,w=-1;for(let x=0;x<s;x++)for(let E=0;E<o;E++){const A=u[x*o+E];if(A!==0){if(x<d&&(d=x),x>w&&(w=x),E*32<c){let I=0;for(;!(A<<31-I&4294967295);)I++;E*32+I<c&&(c=E*32+I)}if(E*32+31>f){let I=31;for(;!(A>>>I);)I--;E*32+I>f&&(f=E*32+I)}}}return f<c||w<d?null:Int32Array.from([c,d,f-c+1,w-d+1])}getTopLeftOnBit(){const n=this.rowSize,s=this.bits;let o=0;for(;o<s.length&&s[o]===0;)o++;if(o===s.length)return null;const u=o/n;let c=o%n*32;const d=s[o];let f=0;for(;!(d<<31-f&4294967295);)f++;return c+=f,Int32Array.from([c,u])}getBottomRightOnBit(){const n=this.rowSize,s=this.bits;let o=s.length-1;for(;o>=0&&s[o]===0;)o--;if(o<0)return null;const u=Math.floor(o/n);let c=Math.floor(o%n)*32;const d=s[o];let f=31;for(;!(d>>>f);)f--;return c+=f,Int32Array.from([c,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof Oe))return!1;const s=n;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&b.equals(this.bits,s.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+b.hashCode(this.bits),n}toString(n="X ",s="  ",o=`
`){return this.buildToString(n,s,o)}buildToString(n,s,o){let u=new ue;for(let c=0,d=this.height;c<d;c++){for(let f=0,w=this.width;f<w;f++)u.append(this.get(f,c)?n:s);u.append(o)}return u.toString()}clone(){return new Oe(this.width,this.height,this.rowSize,this.bits.slice())}}class K extends g{static getNotFoundInstance(){return new K}}K.kind="NotFoundException";class ze extends O{constructor(n){super(n),this.luminances=ze.EMPTY,this.buckets=new Int32Array(ze.LUMINANCE_BUCKETS)}getBlackRow(n,s){const o=this.getLuminanceSource(),u=o.getWidth();s==null||s.getSize()<u?s=new M(u):s.clear(),this.initArrays(u);const c=o.getRow(n,this.luminances),d=this.buckets;for(let w=0;w<u;w++)d[(c[w]&255)>>ze.LUMINANCE_SHIFT]++;const f=ze.estimateBlackPoint(d);if(u<3)for(let w=0;w<u;w++)(c[w]&255)<f&&s.set(w);else{let w=c[0]&255,x=c[1]&255;for(let E=1;E<u-1;E++){const A=c[E+1]&255;(x*4-w-A)/2<f&&s.set(E),w=x,x=A}}return s}getBlackMatrix(){const n=this.getLuminanceSource(),s=n.getWidth(),o=n.getHeight(),u=new Oe(s,o);this.initArrays(s);const c=this.buckets;for(let w=1;w<5;w++){const x=Math.floor(o*w/5),E=n.getRow(x,this.luminances),A=Math.floor(s*4/5);for(let I=Math.floor(s/5);I<A;I++){const D=E[I]&255;c[D>>ze.LUMINANCE_SHIFT]++}}const d=ze.estimateBlackPoint(c),f=n.getMatrix();for(let w=0;w<o;w++){const x=w*s;for(let E=0;E<s;E++)(f[x+E]&255)<d&&u.set(E,w)}return u}createBinarizer(n){return new ze(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const s=this.buckets;for(let o=0;o<ze.LUMINANCE_BUCKETS;o++)s[o]=0}static estimateBlackPoint(n){const s=n.length;let o=0,u=0,c=0;for(let E=0;E<s;E++)n[E]>c&&(u=E,c=n[E]),n[E]>o&&(o=n[E]);let d=0,f=0;for(let E=0;E<s;E++){const A=E-u,I=n[E]*A*A;I>f&&(d=E,f=I)}if(u>d){const E=u;u=d,d=E}if(d-u<=s/16)throw new K;let w=d-1,x=-1;for(let E=d-1;E>u;E--){const A=E-u,I=A*A*(d-E)*(o-n[E]);I>x&&(w=E,x=I)}return w<<ze.LUMINANCE_SHIFT}}ze.LUMINANCE_BITS=5,ze.LUMINANCE_SHIFT=8-ze.LUMINANCE_BITS,ze.LUMINANCE_BUCKETS=1<<ze.LUMINANCE_BITS,ze.EMPTY=Uint8ClampedArray.from([0]);class ae extends ze{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),s=n.getWidth(),o=n.getHeight();if(s>=ae.MINIMUM_DIMENSION&&o>=ae.MINIMUM_DIMENSION){const u=n.getMatrix();let c=s>>ae.BLOCK_SIZE_POWER;s&ae.BLOCK_SIZE_MASK&&c++;let d=o>>ae.BLOCK_SIZE_POWER;o&ae.BLOCK_SIZE_MASK&&d++;const f=ae.calculateBlackPoints(u,c,d,s,o),w=new Oe(s,o);ae.calculateThresholdForBlock(u,c,d,s,o,f,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new ae(n)}static calculateThresholdForBlock(n,s,o,u,c,d,f){const w=c-ae.BLOCK_SIZE,x=u-ae.BLOCK_SIZE;for(let E=0;E<o;E++){let A=E<<ae.BLOCK_SIZE_POWER;A>w&&(A=w);const I=ae.cap(E,2,o-3);for(let D=0;D<s;D++){let F=D<<ae.BLOCK_SIZE_POWER;F>x&&(F=x);const z=ae.cap(D,2,s-3);let H=0;for(let ie=-2;ie<=2;ie++){const se=d[I+ie];H+=se[z-2]+se[z-1]+se[z]+se[z+1]+se[z+2]}const $=H/25;ae.thresholdBlock(n,F,A,$,u,f)}}}static cap(n,s,o){return n<s?s:n>o?o:n}static thresholdBlock(n,s,o,u,c,d){for(let f=0,w=o*c+s;f<ae.BLOCK_SIZE;f++,w+=c)for(let x=0;x<ae.BLOCK_SIZE;x++)(n[w+x]&255)<=u&&d.set(s+x,o+f)}static calculateBlackPoints(n,s,o,u,c){const d=c-ae.BLOCK_SIZE,f=u-ae.BLOCK_SIZE,w=new Array(o);for(let x=0;x<o;x++){w[x]=new Int32Array(s);let E=x<<ae.BLOCK_SIZE_POWER;E>d&&(E=d);for(let A=0;A<s;A++){let I=A<<ae.BLOCK_SIZE_POWER;I>f&&(I=f);let D=0,F=255,z=0;for(let $=0,ie=E*u+I;$<ae.BLOCK_SIZE;$++,ie+=u){for(let se=0;se<ae.BLOCK_SIZE;se++){const ee=n[ie+se]&255;D+=ee,ee<F&&(F=ee),ee>z&&(z=ee)}if(z-F>ae.MIN_DYNAMIC_RANGE)for($++,ie+=u;$<ae.BLOCK_SIZE;$++,ie+=u)for(let se=0;se<ae.BLOCK_SIZE;se++)D+=n[ie+se]&255}let H=D>>ae.BLOCK_SIZE_POWER*2;if(z-F<=ae.MIN_DYNAMIC_RANGE&&(H=F/2,x>0&&A>0)){const $=(w[x-1][A]+2*w[x][A-1]+w[x-1][A-1])/4;F<$&&(H=$)}w[x][A]=H}}return w}}ae.BLOCK_SIZE_POWER=3,ae.BLOCK_SIZE=1<<ae.BLOCK_SIZE_POWER,ae.BLOCK_SIZE_MASK=ae.BLOCK_SIZE-1,ae.MINIMUM_DIMENSION=ae.BLOCK_SIZE*5,ae.MIN_DYNAMIC_RANGE=24;class re{constructor(n,s){this.width=n,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,s,o,u){throw new V("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new V("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new V("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let s=new ue;for(let o=0;o<this.height;o++){const u=this.getRow(o,n);for(let c=0;c<this.width;c++){const d=u[c]&255;let f;d<64?f="#":d<128?f="+":d<192?f=".":f=" ",s.append(f)}s.append(`
`)}return s.toString()}}class te extends re{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,s){const o=this.delegate.getRow(n,s),u=this.getWidth();for(let c=0;c<u;c++)o[c]=255-(o[c]&255);return o}getMatrix(){const n=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(s);for(let u=0;u<s;u++)o[u]=255-(n[u]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(n,s,o,u){return new te(this.delegate.crop(n,s,o,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new te(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new te(this.delegate.rotateCounterClockwise45())}}class we extends re{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=we.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const s=n.getContext("2d").getImageData(0,0,n.width,n.height);return we.toGrayscaleBuffer(s.data,n.width,n.height)}static toGrayscaleBuffer(n,s,o){const u=new Uint8ClampedArray(s*o);for(let c=0,d=0,f=n.length;c<f;c+=4,d++){let w;if(n[c+3]===0)w=255;else{const E=n[c],A=n[c+1],I=n[c+2];w=306*E+601*A+117*I+512>>10}u[d]=w}return u}getRow(n,s){if(n<0||n>=this.getHeight())throw new v("Requested row is outside the image: "+n);const o=this.getWidth(),u=n*o;return s===null?s=this.buffer.slice(u,u+o):(s.length<o&&(s=new Uint8ClampedArray(o)),s.set(this.buffer.slice(u,u+o))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,s,o,u){return super.crop(n,s,o,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const s=this.getTempCanvasElement(),o=s.getContext("2d"),u=n*we.DEGREE_TO_RADIANS,c=this.canvas.width,d=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(u))*c+Math.abs(Math.sin(u))*d),w=Math.ceil(Math.abs(Math.sin(u))*c+Math.abs(Math.cos(u))*d);return s.width=f,s.height=w,o.translate(f/2,w/2),o.rotate(u),o.drawImage(this.canvas,c/-2,d/-2),this.buffer=we.makeBufferFromCanvasImageData(s),this}invert(){return new te(this)}}we.DEGREE_TO_RADIANS=Math.PI/180;class me{constructor(n,s,o){this.deviceId=n,this.label=s,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ce=(globalThis||fs||self||window||void 0)&&(globalThis||fs||self||window||void 0).__awaiter||function(_,n,s,o){function u(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function f(E){try{x(o.next(E))}catch(A){d(A)}}function w(E){try{x(o.throw(E))}catch(A){d(A)}}function x(E){E.done?c(E.value):u(E.value).then(f,w)}x((o=o.apply(_,n||[])).next())})};class he{constructor(n,s=500,o){this.reader=n,this.timeBetweenScansMillis=s,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return ce(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const o of n){const u=o.kind==="video"?"videoinput":o.kind;if(u!=="videoinput")continue;const c=o.deviceId||o.id,d=o.label||`Video device ${s.length+1}`,f=o.groupId,w={deviceId:c,label:d,kind:u,groupId:f};s.push(w)}return s})}getVideoInputDevices(){return ce(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new me(s.deviceId,s.label))})}findDeviceById(n){return ce(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(o=>o.deviceId===n):null})}decodeFromInputVideoDevice(n,s){return ce(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,s)})}decodeOnceFromVideoDevice(n,s){return ce(this,void 0,void 0,function*(){this.reset();let o;n?o={deviceId:{exact:n}}:o={facingMode:"environment"};const u={video:o};return yield this.decodeOnceFromConstraints(u,s)})}decodeOnceFromConstraints(n,s){return ce(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(o,s)})}decodeOnceFromStream(n,s){return ce(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(n,s);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(n,s,o){return ce(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,s,o)})}decodeFromVideoDevice(n,s,o){return ce(this,void 0,void 0,function*(){let u;n?u={deviceId:{exact:n}}:u={facingMode:"environment"};const c={video:u};return yield this.decodeFromConstraints(c,s,o)})}decodeFromConstraints(n,s,o){return ce(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(u,s,o)})}decodeFromStream(n,s,o){return ce(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(n,s);return yield this.decodeContinuously(u,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,s){return ce(this,void 0,void 0,function*(){const o=this.prepareVideoElement(s);return this.addVideoSource(o,n),this.videoElement=o,this.stream=n,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(n){return new Promise((s,o)=>this.playVideoOnLoad(n,()=>s()))}playVideoOnLoad(n,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",s),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return ce(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,s){const o=document.getElementById(n);if(!o)throw new y(`element with id '${n}' not found`);if(o.nodeName.toLowerCase()!==s.toLowerCase())throw new y(`element with id '${n}' must be an ${s} element`);return o}decodeFromImage(n,s){if(!n&&!s)throw new y("either imageElement with a src set or an url must be provided");return s&&!n?this.decodeFromImageUrl(s):this.decodeFromImageElement(n)}decodeFromVideo(n,s){if(!n&&!s)throw new y("Either an element with a src set or an URL must be provided");return s&&!n?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,s,o){if(n===void 0&&s===void 0)throw new y("Either an element with a src set or an URL must be provided");return s&&!n?this.decodeFromVideoUrlContinuously(s,o):this.decodeFromVideoElementContinuously(n,o)}decodeFromImageElement(n){if(!n)throw new y("An image element must be provided.");this.reset();const s=this.prepareImageElement(n);this.imageElement=s;let o;return this.isImageLoaded(s)?o=this.decodeOnce(s,!1,!0):o=this._decodeOnLoadImage(s),o}decodeFromVideoElement(n){const s=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(n,s){const o=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(o,s)}_decodeFromVideoElementSetup(n){if(!n)throw new y("A video element must be provided.");this.reset();const s=this.prepareVideoElement(n);return this.videoElement=s,s}decodeFromImageUrl(n){if(!n)throw new y("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const o=this._decodeOnLoadImage(s);return s.src=n,o}decodeFromVideoUrl(n){if(!n)throw new y("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),o=this.decodeFromVideoElement(s);return s.src=n,o}decodeFromVideoUrlContinuously(n,s){if(!n)throw new y("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(o,s);return o.src=n,u}_decodeOnLoadImage(n){return new Promise((s,o)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(s,o),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return ce(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,s){return ce(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,s)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let s;return typeof n>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof n=="string"&&(s=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(s=n),s}prepareVideoElement(n){let s;return!n&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof n=="string"&&(s=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(s=n),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(n,s=!0,o=!0){this._stopAsyncDecode=!1;const u=(c,d)=>{if(this._stopAsyncDecode){d(new K("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const f=this.decode(n);c(f)}catch(f){const w=s&&f instanceof K,E=(f instanceof T||f instanceof U)&&o;if(w||E)return setTimeout(u,this._timeBetweenDecodingAttempts,c,d);d(f)}};return new Promise((c,d)=>u(c,d))}decodeContinuously(n,s){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(n);s(u,null),setTimeout(o,this.timeBetweenScansMillis)}catch(u){s(null,u);const c=u instanceof T||u instanceof U,d=u instanceof K;(c||d)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(n){const s=this.createBinaryBitmap(n);return this.decodeBitmap(s)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,s,o){s||(s={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(n,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(n,s,o=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(n,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const s=this.getCaptureCanvas(n),o=new we(s),u=new ae(o);return new C(u)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const s=this.createCaptureCanvas(n);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let o,u;return typeof n<"u"&&(n instanceof HTMLVideoElement?(o=n.videoWidth,u=n.videoHeight):n instanceof HTMLImageElement&&(o=n.naturalWidth||n.width,u=n.naturalHeight||n.height)),s.style.width=o+"px",s.style.height=u+"px",s.width=o,s.height=u,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,s){try{n.srcObject=s}catch{n.src=URL.createObjectURL(s)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class Re{constructor(n,s,o=s==null?0:8*s.length,u,c,d=L.currentTimeMillis()){this.text=n,this.rawBytes=s,this.numBits=o,this.resultPoints=u,this.format=c,this.timestamp=d,this.text=n,this.rawBytes=s,o==null?this.numBits=s==null?0:8*s.length:this.numBits=o,this.resultPoints=u,this.format=c,this.resultMetadata=null,d==null?this.timestamp=L.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,s)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const s=this.resultPoints;if(s===null)this.resultPoints=n;else if(n!==null&&n.length>0){const o=new Array(s.length+n.length);L.arraycopy(s,0,o,0,s.length),L.arraycopy(n,0,o,s.length,n.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var et;(function(_){_[_.AZTEC=0]="AZTEC",_[_.CODABAR=1]="CODABAR",_[_.CODE_39=2]="CODE_39",_[_.CODE_93=3]="CODE_93",_[_.CODE_128=4]="CODE_128",_[_.DATA_MATRIX=5]="DATA_MATRIX",_[_.EAN_8=6]="EAN_8",_[_.EAN_13=7]="EAN_13",_[_.ITF=8]="ITF",_[_.MAXICODE=9]="MAXICODE",_[_.PDF_417=10]="PDF_417",_[_.QR_CODE=11]="QR_CODE",_[_.RSS_14=12]="RSS_14",_[_.RSS_EXPANDED=13]="RSS_EXPANDED",_[_.UPC_A=14]="UPC_A",_[_.UPC_E=15]="UPC_E",_[_.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(et||(et={}));var le=et,Tt;(function(_){_[_.OTHER=0]="OTHER",_[_.ORIENTATION=1]="ORIENTATION",_[_.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",_[_.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",_[_.ISSUE_NUMBER=4]="ISSUE_NUMBER",_[_.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",_[_.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",_[_.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",_[_.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",_[_.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",_[_.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Tt||(Tt={}));var _e=Tt;class je{constructor(n,s,o,u,c=-1,d=-1){this.rawBytes=n,this.text=s,this.byteSegments=o,this.ecLevel=u,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=d,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class tt{exp(n){return this.expTable[n]}log(n){if(n===0)throw new v;return this.logTable[n]}static addOrSubtract(n,s){return n^s}}class Se{constructor(n,s){if(s.length===0)throw new v;this.field=n;const o=s.length;if(o>1&&s[0]===0){let u=1;for(;u<o&&s[u]===0;)u++;u===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-u),L.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const s=this.coefficients;let o;if(n===1){o=0;for(let d=0,f=s.length;d!==f;d++){const w=s[d];o=tt.addOrSubtract(o,w)}return o}o=s[0];const u=s.length,c=this.field;for(let d=1;d<u;d++)o=tt.addOrSubtract(c.multiply(n,o),s[d]);return o}addOrSubtract(n){if(!this.field.equals(n.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let s=this.coefficients,o=n.coefficients;if(s.length>o.length){const d=s;s=o,o=d}let u=new Int32Array(o.length);const c=o.length-s.length;L.arraycopy(o,0,u,0,c);for(let d=c;d<o.length;d++)u[d]=tt.addOrSubtract(s[d-c],o[d]);return new Se(this.field,u)}multiply(n){if(!this.field.equals(n.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const s=this.coefficients,o=s.length,u=n.coefficients,c=u.length,d=new Int32Array(o+c-1),f=this.field;for(let w=0;w<o;w++){const x=s[w];for(let E=0;E<c;E++)d[w+E]=tt.addOrSubtract(d[w+E],f.multiply(x,u[E]))}return new Se(f,d)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const s=this.coefficients.length,o=this.field,u=new Int32Array(s),c=this.coefficients;for(let d=0;d<s;d++)u[d]=o.multiply(c[d],n);return new Se(o,u)}multiplyByMonomial(n,s){if(n<0)throw new v;if(s===0)return this.field.getZero();const o=this.coefficients,u=o.length,c=new Int32Array(u+n),d=this.field;for(let f=0;f<u;f++)c[f]=d.multiply(o[f],s);return new Se(d,c)}divide(n){if(!this.field.equals(n.field))throw new v("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new v("Divide by 0");const s=this.field;let o=s.getZero(),u=this;const c=n.getCoefficient(n.getDegree()),d=s.inverse(c);for(;u.getDegree()>=n.getDegree()&&!u.isZero();){const f=u.getDegree()-n.getDegree(),w=s.multiply(u.getCoefficient(u.getDegree()),d),x=n.multiplyByMonomial(f,w),E=s.buildMonomial(f,w);o=o.addOrSubtract(E),u=u.addOrSubtract(x)}return[o,u]}toString(){let n="";for(let s=this.getDegree();s>=0;s--){let o=this.getCoefficient(s);if(o!==0){if(o<0?(n+=" - ",o=-o):n.length>0&&(n+=" + "),s===0||o!==1){const u=this.field.log(o);u===0?n+="1":u===1?n+="a":(n+="a^",n+=u)}s!==0&&(s===1?n+="x":(n+="x^",n+=s))}}return n}}class Qe extends g{}Qe.kind="ArithmeticException";class Ie extends tt{constructor(n,s,o){super(),this.primitive=n,this.size=s,this.generatorBase=o;const u=new Int32Array(s);let c=1;for(let f=0;f<s;f++)u[f]=c,c*=2,c>=s&&(c^=n,c&=s-1);this.expTable=u;const d=new Int32Array(s);for(let f=0;f<s-1;f++)d[u[f]]=f;this.logTable=d,this.zero=new Se(this,Int32Array.from([0])),this.one=new Se(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,s){if(n<0)throw new v;if(s===0)return this.zero;const o=new Int32Array(n+1);return o[0]=s,new Se(this,o)}inverse(n){if(n===0)throw new Qe;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,s){return n===0||s===0?0:this.expTable[(this.logTable[n]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+S.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}Ie.AZTEC_DATA_12=new Ie(4201,4096,1),Ie.AZTEC_DATA_10=new Ie(1033,1024,1),Ie.AZTEC_DATA_6=new Ie(67,64,1),Ie.AZTEC_PARAM=new Ie(19,16,1),Ie.QR_CODE_FIELD_256=new Ie(285,256,0),Ie.DATA_MATRIX_FIELD_256=new Ie(301,256,1),Ie.AZTEC_DATA_8=Ie.DATA_MATRIX_FIELD_256,Ie.MAXICODE_FIELD_64=Ie.AZTEC_DATA_6;class Ye extends g{}Ye.kind="ReedSolomonException";class Pe extends g{}Pe.kind="IllegalStateException";class ke{constructor(n){this.field=n}decode(n,s){const o=this.field,u=new Se(o,n),c=new Int32Array(s);let d=!0;for(let D=0;D<s;D++){const F=u.evaluateAt(o.exp(D+o.getGeneratorBase()));c[c.length-1-D]=F,F!==0&&(d=!1)}if(d)return;const f=new Se(o,c),w=this.runEuclideanAlgorithm(o.buildMonomial(s,1),f,s),x=w[0],E=w[1],A=this.findErrorLocations(x),I=this.findErrorMagnitudes(E,A);for(let D=0;D<A.length;D++){const F=n.length-1-o.log(A[D]);if(F<0)throw new Ye("Bad error location");n[F]=Ie.addOrSubtract(n[F],I[D])}}runEuclideanAlgorithm(n,s,o){if(n.getDegree()<s.getDegree()){const D=n;n=s,s=D}const u=this.field;let c=n,d=s,f=u.getZero(),w=u.getOne();for(;d.getDegree()>=(o/2|0);){let D=c,F=f;if(c=d,f=w,c.isZero())throw new Ye("r_{i-1} was zero");d=D;let z=u.getZero();const H=c.getCoefficient(c.getDegree()),$=u.inverse(H);for(;d.getDegree()>=c.getDegree()&&!d.isZero();){const ie=d.getDegree()-c.getDegree(),se=u.multiply(d.getCoefficient(d.getDegree()),$);z=z.addOrSubtract(u.buildMonomial(ie,se)),d=d.addOrSubtract(c.multiplyByMonomial(ie,se))}if(w=z.multiply(f).addOrSubtract(F),d.getDegree()>=c.getDegree())throw new Pe("Division algorithm failed to reduce polynomial?")}const x=w.getCoefficient(0);if(x===0)throw new Ye("sigmaTilde(0) was zero");const E=u.inverse(x),A=w.multiplyScalar(E),I=d.multiplyScalar(E);return[A,I]}findErrorLocations(n){const s=n.getDegree();if(s===1)return Int32Array.from([n.getCoefficient(1)]);const o=new Int32Array(s);let u=0;const c=this.field;for(let d=1;d<c.getSize()&&u<s;d++)n.evaluateAt(d)===0&&(o[u]=c.inverse(d),u++);if(u!==s)throw new Ye("Error locator degree does not match number of roots");return o}findErrorMagnitudes(n,s){const o=s.length,u=new Int32Array(o),c=this.field;for(let d=0;d<o;d++){const f=c.inverse(s[d]);let w=1;for(let x=0;x<o;x++)if(d!==x){const E=c.multiply(s[x],f),A=E&1?E&-2:E|1;w=c.multiply(w,A)}u[d]=c.multiply(n.evaluateAt(f),c.inverse(w)),c.getGeneratorBase()!==0&&(u[d]=c.multiply(u[d],f))}return u}}var He;(function(_){_[_.UPPER=0]="UPPER",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.DIGIT=3]="DIGIT",_[_.PUNCT=4]="PUNCT",_[_.BINARY=5]="BINARY"})(He||(He={}));class ve{decode(n){this.ddata=n;let s=n.getBits(),o=this.extractBits(s),u=this.correctBits(o),c=ve.convertBoolArrayToByteArray(u),d=ve.getEncodedData(u),f=new je(c,d,null,null);return f.setNumBits(u.length),f}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let s=n.length,o=He.UPPER,u=He.UPPER,c="",d=0;for(;d<s;)if(u===He.BINARY){if(s-d<5)break;let f=ve.readCode(n,d,5);if(d+=5,f===0){if(s-d<11)break;f=ve.readCode(n,d,11)+31,d+=11}for(let w=0;w<f;w++){if(s-d<8){d=s;break}const x=ve.readCode(n,d,8);c+=Q.castAsNonUtf8Char(x),d+=8}u=o}else{let f=u===He.DIGIT?4:5;if(s-d<f)break;let w=ve.readCode(n,d,f);d+=f;let x=ve.getCharacter(u,w);x.startsWith("CTRL_")?(o=u,u=ve.getTable(x.charAt(5)),x.charAt(6)==="L"&&(o=u)):(c+=x,u=o)}return c}static getTable(n){switch(n){case"L":return He.LOWER;case"P":return He.PUNCT;case"M":return He.MIXED;case"D":return He.DIGIT;case"B":return He.BINARY;case"U":default:return He.UPPER}}static getCharacter(n,s){switch(n){case He.UPPER:return ve.UPPER_TABLE[s];case He.LOWER:return ve.LOWER_TABLE[s];case He.MIXED:return ve.MIXED_TABLE[s];case He.PUNCT:return ve.PUNCT_TABLE[s];case He.DIGIT:return ve.DIGIT_TABLE[s];default:throw new Pe("Bad table")}}correctBits(n){let s,o;this.ddata.getNbLayers()<=2?(o=6,s=Ie.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,s=Ie.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,s=Ie.AZTEC_DATA_10):(o=12,s=Ie.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),c=n.length/o;if(c<u)throw new U;let d=n.length%o,f=new Int32Array(c);for(let I=0;I<c;I++,d+=o)f[I]=ve.readCode(n,d,o);try{new ke(s).decode(f,c-u)}catch(I){throw new U(I)}let w=(1<<o)-1,x=0;for(let I=0;I<u;I++){let D=f[I];if(D===0||D===w)throw new U;(D===1||D===w-1)&&x++}let E=new Array(u*o-x),A=0;for(let I=0;I<u;I++){let D=f[I];if(D===1||D===w-1)E.fill(D>1,A,A+o-1),A+=o-1;else for(let F=o-1;F>=0;--F)E[A++]=(D&1<<F)!==0}return E}extractBits(n){let s=this.ddata.isCompact(),o=this.ddata.getNbLayers(),u=(s?11:14)+o*4,c=new Int32Array(u),d=new Array(this.totalBitsInLayer(o,s));if(s)for(let f=0;f<c.length;f++)c[f]=f;else{let f=u+1+2*S.truncDivision(S.truncDivision(u,2)-1,15),w=u/2,x=S.truncDivision(f,2);for(let E=0;E<w;E++){let A=E+S.truncDivision(E,15);c[w-E-1]=x-A-1,c[w+E]=x+A+1}}for(let f=0,w=0;f<o;f++){let x=(o-f)*4+(s?9:12),E=f*2,A=u-1-E;for(let I=0;I<x;I++){let D=I*2;for(let F=0;F<2;F++)d[w+D+F]=n.get(c[E+F],c[E+I]),d[w+2*x+D+F]=n.get(c[E+I],c[A-F]),d[w+4*x+D+F]=n.get(c[A-F],c[A-I]),d[w+6*x+D+F]=n.get(c[A-I],c[E+F])}w+=x*8}return d}static readCode(n,s,o){let u=0;for(let c=s;c<s+o;c++)u<<=1,n[c]&&(u|=1);return u}static readByte(n,s){let o=n.length-s;return o>=8?ve.readCode(n,s,8):ve.readCode(n,s,o)<<8-o}static convertBoolArrayToByteArray(n){let s=new Uint8Array((n.length+7)/8);for(let o=0;o<s.length;o++)s[o]=ve.readByte(n,8*o);return s}totalBitsInLayer(n,s){return((s?88:112)+16*n)*n}}ve.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ve.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ve.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ve.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ve.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ye{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,s,o,u){const c=n-o,d=s-u;return Math.sqrt(c*c+d*d)}static sum(n){let s=0;for(let o=0,u=n.length;o!==u;o++){const c=n[o];s+=c}return s}}class pt{static floatToIntBits(n){return n}}pt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class de{constructor(n,s){this.x=n,this.y=s}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof de){const s=n;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*pt.floatToIntBits(this.x)+pt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const s=this.distance(n[0],n[1]),o=this.distance(n[1],n[2]),u=this.distance(n[0],n[2]);let c,d,f;if(o>=s&&o>=u?(d=n[0],c=n[1],f=n[2]):u>=o&&u>=s?(d=n[1],c=n[0],f=n[2]):(d=n[2],c=n[0],f=n[1]),this.crossProductZ(c,d,f)<0){const w=c;c=f,f=w}n[0]=c,n[1]=d,n[2]=f}static distance(n,s){return ye.distance(n.x,n.y,s.x,s.y)}static crossProductZ(n,s,o){const u=s.x,c=s.y;return(o.x-u)*(n.y-c)-(o.y-c)*(n.x-u)}}class ur{constructor(n,s){this.bits=n,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Un extends ur{constructor(n,s,o,u,c){super(n,s),this.compact=o,this.nbDatablocks=u,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ot{constructor(n,s,o,u){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),s==null&&(s=ot.INIT_SIZE),o==null&&(o=n.getWidth()/2|0),u==null&&(u=n.getHeight()/2|0);const c=s/2|0;if(this.leftInit=o-c,this.rightInit=o+c,this.upInit=u-c,this.downInit=u+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new K}detect(){let n=this.leftInit,s=this.rightInit,o=this.upInit,u=this.downInit,c=!1,d=!0,f=!1,w=!1,x=!1,E=!1,A=!1;const I=this.width,D=this.height;for(;d;){d=!1;let F=!0;for(;(F||!w)&&s<I;)F=this.containsBlackPoint(o,u,s,!1),F?(s++,d=!0,w=!0):w||s++;if(s>=I){c=!0;break}let z=!0;for(;(z||!x)&&u<D;)z=this.containsBlackPoint(n,s,u,!0),z?(u++,d=!0,x=!0):x||u++;if(u>=D){c=!0;break}let H=!0;for(;(H||!E)&&n>=0;)H=this.containsBlackPoint(o,u,n,!1),H?(n--,d=!0,E=!0):E||n--;if(n<0){c=!0;break}let $=!0;for(;($||!A)&&o>=0;)$=this.containsBlackPoint(n,s,o,!0),$?(o--,d=!0,A=!0):A||o--;if(o<0){c=!0;break}d&&(f=!0)}if(!c&&f){const F=s-n;let z=null;for(let se=1;z===null&&se<F;se++)z=this.getBlackPointOnSegment(n,u-se,n+se,u);if(z==null)throw new K;let H=null;for(let se=1;H===null&&se<F;se++)H=this.getBlackPointOnSegment(n,o+se,n+se,o);if(H==null)throw new K;let $=null;for(let se=1;$===null&&se<F;se++)$=this.getBlackPointOnSegment(s,o+se,s-se,o);if($==null)throw new K;let ie=null;for(let se=1;ie===null&&se<F;se++)ie=this.getBlackPointOnSegment(s,u-se,s-se,u);if(ie==null)throw new K;return this.centerEdges(ie,z,$,H)}else throw new K}getBlackPointOnSegment(n,s,o,u){const c=ye.round(ye.distance(n,s,o,u)),d=(o-n)/c,f=(u-s)/c,w=this.image;for(let x=0;x<c;x++){const E=ye.round(n+x*d),A=ye.round(s+x*f);if(w.get(E,A))return new de(E,A)}return null}centerEdges(n,s,o,u){const c=n.getX(),d=n.getY(),f=s.getX(),w=s.getY(),x=o.getX(),E=o.getY(),A=u.getX(),I=u.getY(),D=ot.CORR;return c<this.width/2?[new de(A-D,I+D),new de(f+D,w+D),new de(x-D,E-D),new de(c+D,d-D)]:[new de(A+D,I+D),new de(f+D,w-D),new de(x-D,E+D),new de(c-D,d-D)]}containsBlackPoint(n,s,o,u){const c=this.image;if(u){for(let d=n;d<=s;d++)if(c.get(d,o))return!0}else for(let d=n;d<=s;d++)if(c.get(o,d))return!0;return!1}}ot.INIT_SIZE=10,ot.CORR=1;class mr{static checkAndNudgePoints(n,s){const o=n.getWidth(),u=n.getHeight();let c=!0;for(let d=0;d<s.length&&c;d+=2){const f=Math.floor(s[d]),w=Math.floor(s[d+1]);if(f<-1||f>o||w<-1||w>u)throw new K;c=!1,f===-1?(s[d]=0,c=!0):f===o&&(s[d]=o-1,c=!0),w===-1?(s[d+1]=0,c=!0):w===u&&(s[d+1]=u-1,c=!0)}c=!0;for(let d=s.length-2;d>=0&&c;d-=2){const f=Math.floor(s[d]),w=Math.floor(s[d+1]);if(f<-1||f>o||w<-1||w>u)throw new K;c=!1,f===-1?(s[d]=0,c=!0):f===o&&(s[d]=o-1,c=!0),w===-1?(s[d+1]=0,c=!0):w===u&&(s[d+1]=u-1,c=!0)}}}class Ke{constructor(n,s,o,u,c,d,f,w,x){this.a11=n,this.a21=s,this.a31=o,this.a12=u,this.a22=c,this.a32=d,this.a13=f,this.a23=w,this.a33=x}static quadrilateralToQuadrilateral(n,s,o,u,c,d,f,w,x,E,A,I,D,F,z,H){const $=Ke.quadrilateralToSquare(n,s,o,u,c,d,f,w);return Ke.squareToQuadrilateral(x,E,A,I,D,F,z,H).times($)}transformPoints(n){const s=n.length,o=this.a11,u=this.a12,c=this.a13,d=this.a21,f=this.a22,w=this.a23,x=this.a31,E=this.a32,A=this.a33;for(let I=0;I<s;I+=2){const D=n[I],F=n[I+1],z=c*D+w*F+A;n[I]=(o*D+d*F+x)/z,n[I+1]=(u*D+f*F+E)/z}}transformPointsWithValues(n,s){const o=this.a11,u=this.a12,c=this.a13,d=this.a21,f=this.a22,w=this.a23,x=this.a31,E=this.a32,A=this.a33,I=n.length;for(let D=0;D<I;D++){const F=n[D],z=s[D],H=c*F+w*z+A;n[D]=(o*F+d*z+x)/H,s[D]=(u*F+f*z+E)/H}}static squareToQuadrilateral(n,s,o,u,c,d,f,w){const x=n-o+c-f,E=s-u+d-w;if(x===0&&E===0)return new Ke(o-n,c-o,n,u-s,d-u,s,0,0,1);{const A=o-c,I=f-c,D=u-d,F=w-d,z=A*F-I*D,H=(x*F-I*E)/z,$=(A*E-x*D)/z;return new Ke(o-n+H*o,f-n+$*f,n,u-s+H*u,w-s+$*w,s,H,$,1)}}static quadrilateralToSquare(n,s,o,u,c,d,f,w){return Ke.squareToQuadrilateral(n,s,o,u,c,d,f,w).buildAdjoint()}buildAdjoint(){return new Ke(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new Ke(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class $t extends mr{sampleGrid(n,s,o,u,c,d,f,w,x,E,A,I,D,F,z,H,$,ie,se){const ee=Ke.quadrilateralToQuadrilateral(u,c,d,f,w,x,E,A,I,D,F,z,H,$,ie,se);return this.sampleGridWithTransform(n,s,o,ee)}sampleGridWithTransform(n,s,o,u){if(s<=0||o<=0)throw new K;const c=new Oe(s,o),d=new Float32Array(2*s);for(let f=0;f<o;f++){const w=d.length,x=f+.5;for(let E=0;E<w;E+=2)d[E]=E/2+.5,d[E+1]=x;u.transformPoints(d),mr.checkAndNudgePoints(n,d);try{for(let E=0;E<w;E+=2)n.get(Math.floor(d[E]),Math.floor(d[E+1]))&&c.set(E/2,f)}catch{throw new K}}return c}}class Vt{static setGridSampler(n){Vt.gridSampler=n}static getInstance(){return Vt.gridSampler}}Vt.gridSampler=new $t;class Dt{constructor(n,s){this.x=n,this.y=s}toResultPoint(){return new de(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Js{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let s=this.getMatrixCenter(),o=this.getBullsEyeCorners(s);if(n){let d=o[0];o[0]=o[2],o[2]=d}this.extractParameters(o);let u=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),c=this.getMatrixCornerPoints(o);return new Un(u,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new K;let s=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(n[0],n[1],s),this.sampleLine(n[1],n[2],s),this.sampleLine(n[2],n[3],s),this.sampleLine(n[3],n[0],s)]);this.shift=this.getRotation(o,s);let u=0;for(let d=0;d<4;d++){let f=o[(this.shift+d)%4];this.compact?(u<<=7,u+=f>>1&127):(u<<=10,u+=(f>>2&992)+(f>>1&31))}let c=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(n,s){let o=0;n.forEach((u,c,d)=>{let f=(u>>s-2<<1)+(u&1);o=(o<<3)+f}),o=((o&1)<<11)+(o>>1);for(let u=0;u<4;u++)if(S.bitCount(o^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new K}getCorrectedParameterData(n,s){let o,u;s?(o=7,u=2):(o=10,u=4);let c=o-u,d=new Int32Array(o);for(let w=o-1;w>=0;--w)d[w]=n&15,n>>=4;try{new ke(Ie.AZTEC_PARAM).decode(d,c)}catch{throw new K}let f=0;for(let w=0;w<u;w++)f=(f<<4)+d[w];return f}getBullsEyeCorners(n){let s=n,o=n,u=n,c=n,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let A=this.getFirstDifferent(s,d,1,-1),I=this.getFirstDifferent(o,d,1,1),D=this.getFirstDifferent(u,d,-1,1),F=this.getFirstDifferent(c,d,-1,-1);if(this.nbCenterLayers>2){let z=this.distancePoint(F,A)*this.nbCenterLayers/(this.distancePoint(c,s)*(this.nbCenterLayers+2));if(z<.75||z>1.25||!this.isWhiteOrBlackRectangle(A,I,D,F))break}s=A,o=I,u=D,c=F,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new K;this.compact=this.nbCenterLayers===5;let f=new de(s.getX()+.5,s.getY()-.5),w=new de(o.getX()+.5,o.getY()+.5),x=new de(u.getX()-.5,u.getY()+.5),E=new de(c.getX()-.5,c.getY()-.5);return this.expandSquare([f,w,x,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,s,o,u;try{let f=new ot(this.image).detect();n=f[0],s=f[1],o=f[2],u=f[3]}catch{let w=this.image.getWidth()/2,x=this.image.getHeight()/2;n=this.getFirstDifferent(new Dt(w+7,x-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Dt(w+7,x+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Dt(w-7,x+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Dt(w-7,x-7),!1,-1,-1).toResultPoint()}let c=ye.round((n.getX()+u.getX()+s.getX()+o.getX())/4),d=ye.round((n.getY()+u.getY()+s.getY()+o.getY())/4);try{let f=new ot(this.image,15,c,d).detect();n=f[0],s=f[1],o=f[2],u=f[3]}catch{n=this.getFirstDifferent(new Dt(c+7,d-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Dt(c+7,d+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Dt(c-7,d+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Dt(c-7,d-7),!1,-1,-1).toResultPoint()}return c=ye.round((n.getX()+u.getX()+s.getX()+o.getX())/4),d=ye.round((n.getY()+u.getY()+s.getY()+o.getY())/4),new Dt(c,d)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,s,o,u,c){let d=Vt.getInstance(),f=this.getDimension(),w=f/2-this.nbCenterLayers,x=f/2+this.nbCenterLayers;return d.sampleGrid(n,f,f,w,w,x,w,x,x,w,x,s.getX(),s.getY(),o.getX(),o.getY(),u.getX(),u.getY(),c.getX(),c.getY())}sampleLine(n,s,o){let u=0,c=this.distanceResultPoint(n,s),d=c/o,f=n.getX(),w=n.getY(),x=d*(s.getX()-n.getX())/c,E=d*(s.getY()-n.getY())/c;for(let A=0;A<o;A++)this.image.get(ye.round(f+A*x),ye.round(w+A*E))&&(u|=1<<o-A-1);return u}isWhiteOrBlackRectangle(n,s,o,u){let c=3;n=new Dt(n.getX()-c,n.getY()+c),s=new Dt(s.getX()-c,s.getY()-c),o=new Dt(o.getX()+c,o.getY()-c),u=new Dt(u.getX()+c,u.getY()+c);let d=this.getColor(u,n);if(d===0)return!1;let f=this.getColor(n,s);return f!==d||(f=this.getColor(s,o),f!==d)?!1:(f=this.getColor(o,u),f===d)}getColor(n,s){let o=this.distancePoint(n,s),u=(s.getX()-n.getX())/o,c=(s.getY()-n.getY())/o,d=0,f=n.getX(),w=n.getY(),x=this.image.get(n.getX(),n.getY()),E=Math.ceil(o);for(let I=0;I<E;I++)f+=u,w+=c,this.image.get(ye.round(f),ye.round(w))!==x&&d++;let A=d/o;return A>.1&&A<.9?0:A<=.1===x?1:-1}getFirstDifferent(n,s,o,u){let c=n.getX()+o,d=n.getY()+u;for(;this.isValid(c,d)&&this.image.get(c,d)===s;)c+=o,d+=u;for(c-=o,d-=u;this.isValid(c,d)&&this.image.get(c,d)===s;)c+=o;for(c-=o;this.isValid(c,d)&&this.image.get(c,d)===s;)d+=u;return d-=u,new Dt(c,d)}expandSquare(n,s,o){let u=o/(2*s),c=n[0].getX()-n[2].getX(),d=n[0].getY()-n[2].getY(),f=(n[0].getX()+n[2].getX())/2,w=(n[0].getY()+n[2].getY())/2,x=new de(f+u*c,w+u*d),E=new de(f-u*c,w-u*d);c=n[1].getX()-n[3].getX(),d=n[1].getY()-n[3].getY(),f=(n[1].getX()+n[3].getX())/2,w=(n[1].getY()+n[3].getY())/2;let A=new de(f+u*c,w+u*d),I=new de(f-u*c,w-u*d);return[x,A,E,I]}isValid(n,s){return n>=0&&n<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(n){let s=ye.round(n.getX()),o=ye.round(n.getY());return this.isValid(s,o)}distancePoint(n,s){return ye.distance(n.getX(),n.getY(),s.getX(),s.getY())}distanceResultPoint(n,s){return ye.distance(n.getX(),n.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(S.truncDivision(this.nbLayers-4,8)+1)+15}}class Qr{decode(n,s=null){let o=null,u=new Js(n.getBlackMatrix()),c=null,d=null;try{let E=u.detectMirror(!1);c=E.getPoints(),this.reportFoundResultPoints(s,c),d=new ve().decode(E)}catch(E){o=E}if(d==null)try{let E=u.detectMirror(!0);c=E.getPoints(),this.reportFoundResultPoints(s,c),d=new ve().decode(E)}catch(E){throw o??E}let f=new Re(d.getText(),d.getRawBytes(),d.getNumBits(),c,le.AZTEC,L.currentTimeMillis()),w=d.getByteSegments();w!=null&&f.putMetadata(_e.BYTE_SEGMENTS,w);let x=d.getECLevel();return x!=null&&f.putMetadata(_e.ERROR_CORRECTION_LEVEL,x),f}reportFoundResultPoints(n,s){if(n!=null){let o=n.get(G.NEED_RESULT_POINT_CALLBACK);o!=null&&s.forEach((u,c,d)=>{o.foundPossibleResultPoint(u)})}}reset(){}}class Fr extends he{constructor(n=500){super(new Qr,n)}}class at{decode(n,s){try{return this.doDecode(n,s)}catch{if(s&&s.get(G.TRY_HARDER)===!0&&n.isRotateSupported()){const c=n.rotateCounterClockwise(),d=this.doDecode(c,s),f=d.getResultMetadata();let w=270;f!==null&&f.get(_e.ORIENTATION)===!0&&(w=w+f.get(_e.ORIENTATION)%360),d.putMetadata(_e.ORIENTATION,w);const x=d.getResultPoints();if(x!==null){const E=c.getHeight();for(let A=0;A<x.length;A++)x[A]=new de(E-x[A].getY()-1,x[A].getX())}return d}else throw new K}}reset(){}doDecode(n,s){const o=n.getWidth(),u=n.getHeight();let c=new M(o);const d=s&&s.get(G.TRY_HARDER)===!0,f=Math.max(1,u>>(d?8:5));let w;d?w=u:w=15;const x=Math.trunc(u/2);for(let E=0;E<w;E++){const A=Math.trunc((E+1)/2),I=(E&1)===0,D=x+f*(I?A:-A);if(D<0||D>=u)break;try{c=n.getBlackRow(D,c)}catch{continue}for(let F=0;F<2;F++){if(F===1&&(c.reverse(),s&&s.get(G.NEED_RESULT_POINT_CALLBACK)===!0)){const z=new Map;s.forEach((H,$)=>z.set($,H)),z.delete(G.NEED_RESULT_POINT_CALLBACK),s=z}try{const z=this.decodeRow(D,c,s);if(F===1){z.putMetadata(_e.ORIENTATION,180);const H=z.getResultPoints();H!==null&&(H[0]=new de(o-H[0].getX()-1,H[0].getY()),H[1]=new de(o-H[1].getX()-1,H[1].getY()))}return z}catch{}}}throw new K}static recordPattern(n,s,o){const u=o.length;for(let x=0;x<u;x++)o[x]=0;const c=n.getSize();if(s>=c)throw new K;let d=!n.get(s),f=0,w=s;for(;w<c;){if(n.get(w)!==d)o[f]++;else{if(++f===u)break;o[f]=1,d=!d}w++}if(!(f===u||f===u-1&&w===c))throw new K}static recordPatternInReverse(n,s,o){let u=o.length,c=n.get(s);for(;s>0&&u>=0;)n.get(--s)!==c&&(u--,c=!c);if(u>=0)throw new K;at.recordPattern(n,s+1,o)}static patternMatchVariance(n,s,o){const u=n.length;let c=0,d=0;for(let x=0;x<u;x++)c+=n[x],d+=s[x];if(c<d)return Number.POSITIVE_INFINITY;const f=c/d;o*=f;let w=0;for(let x=0;x<u;x++){const E=n[x],A=s[x]*f,I=E>A?E-A:A-E;if(I>o)return Number.POSITIVE_INFINITY;w+=I}return w/c}}class oe extends at{static findStartPattern(n){const s=n.getSize(),o=n.getNextSet(0);let u=0,c=Int32Array.from([0,0,0,0,0,0]),d=o,f=!1;const w=6;for(let x=o;x<s;x++)if(n.get(x)!==f)c[u]++;else{if(u===w-1){let E=oe.MAX_AVG_VARIANCE,A=-1;for(let I=oe.CODE_START_A;I<=oe.CODE_START_C;I++){const D=at.patternMatchVariance(c,oe.CODE_PATTERNS[I],oe.MAX_INDIVIDUAL_VARIANCE);D<E&&(E=D,A=I)}if(A>=0&&n.isRange(Math.max(0,d-(x-d)/2),d,!1))return Int32Array.from([d,x,A]);d+=c[0]+c[1],c=c.slice(2,c.length-1),c[u-1]=0,c[u]=0,u--}else u++;c[u]=1,f=!f}throw new K}static decodeCode(n,s,o){at.recordPattern(n,o,s);let u=oe.MAX_AVG_VARIANCE,c=-1;for(let d=0;d<oe.CODE_PATTERNS.length;d++){const f=oe.CODE_PATTERNS[d],w=this.patternMatchVariance(s,f,oe.MAX_INDIVIDUAL_VARIANCE);w<u&&(u=w,c=d)}if(c>=0)return c;throw new K}decodeRow(n,s,o){const u=o&&o.get(G.ASSUME_GS1)===!0,c=oe.findStartPattern(s),d=c[2];let f=0;const w=new Uint8Array(20);w[f++]=d;let x;switch(d){case oe.CODE_START_A:x=oe.CODE_CODE_A;break;case oe.CODE_START_B:x=oe.CODE_CODE_B;break;case oe.CODE_START_C:x=oe.CODE_CODE_C;break;default:throw new U}let E=!1,A=!1,I="",D=c[0],F=c[1];const z=Int32Array.from([0,0,0,0,0,0]);let H=0,$=0,ie=d,se=0,ee=!0,Ue=!1,Me=!1;for(;!E;){const os=A;switch(A=!1,H=$,$=oe.decodeCode(s,z,F),w[f++]=$,$!==oe.CODE_STOP&&(ee=!0),$!==oe.CODE_STOP&&(se++,ie+=se*$),D=F,F+=z.reduce((T2,N2)=>T2+N2,0),$){case oe.CODE_START_A:case oe.CODE_START_B:case oe.CODE_START_C:throw new U}switch(x){case oe.CODE_CODE_A:if($<64)Me===Ue?I+=String.fromCharCode(32+$):I+=String.fromCharCode(32+$+128),Me=!1;else if($<96)Me===Ue?I+=String.fromCharCode($-64):I+=String.fromCharCode($+64),Me=!1;else switch($!==oe.CODE_STOP&&(ee=!1),$){case oe.CODE_FNC_1:u&&(I.length===0?I+="]C1":I+="");break;case oe.CODE_FNC_2:case oe.CODE_FNC_3:break;case oe.CODE_FNC_4_A:!Ue&&Me?(Ue=!0,Me=!1):Ue&&Me?(Ue=!1,Me=!1):Me=!0;break;case oe.CODE_SHIFT:A=!0,x=oe.CODE_CODE_B;break;case oe.CODE_CODE_B:x=oe.CODE_CODE_B;break;case oe.CODE_CODE_C:x=oe.CODE_CODE_C;break;case oe.CODE_STOP:E=!0;break}break;case oe.CODE_CODE_B:if($<96)Me===Ue?I+=String.fromCharCode(32+$):I+=String.fromCharCode(32+$+128),Me=!1;else switch($!==oe.CODE_STOP&&(ee=!1),$){case oe.CODE_FNC_1:u&&(I.length===0?I+="]C1":I+="");break;case oe.CODE_FNC_2:case oe.CODE_FNC_3:break;case oe.CODE_FNC_4_B:!Ue&&Me?(Ue=!0,Me=!1):Ue&&Me?(Ue=!1,Me=!1):Me=!0;break;case oe.CODE_SHIFT:A=!0,x=oe.CODE_CODE_A;break;case oe.CODE_CODE_A:x=oe.CODE_CODE_A;break;case oe.CODE_CODE_C:x=oe.CODE_CODE_C;break;case oe.CODE_STOP:E=!0;break}break;case oe.CODE_CODE_C:if($<100)$<10&&(I+="0"),I+=$;else switch($!==oe.CODE_STOP&&(ee=!1),$){case oe.CODE_FNC_1:u&&(I.length===0?I+="]C1":I+="");break;case oe.CODE_CODE_A:x=oe.CODE_CODE_A;break;case oe.CODE_CODE_B:x=oe.CODE_CODE_B;break;case oe.CODE_STOP:E=!0;break}break}os&&(x=x===oe.CODE_CODE_A?oe.CODE_CODE_B:oe.CODE_CODE_A)}const vr=F-D;if(F=s.getNextUnset(F),!s.isRange(F,Math.min(s.getSize(),F+(F-D)/2),!1))throw new K;if(ie-=se*H,ie%103!==H)throw new T;const Jr=I.length;if(Jr===0)throw new K;Jr>0&&ee&&(x===oe.CODE_CODE_C?I=I.substring(0,Jr-2):I=I.substring(0,Jr-1));const Er=(c[1]+c[0])/2,st=D+vr/2,Qt=w.length,Ir=new Uint8Array(Qt);for(let os=0;os<Qt;os++)Ir[os]=w[os];const ss=[new de(Er,n),new de(st,n)];return new Re(I,Ir,0,ss,le.CODE_128,new Date().getTime())}}oe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],oe.MAX_AVG_VARIANCE=.25,oe.MAX_INDIVIDUAL_VARIANCE=.7,oe.CODE_SHIFT=98,oe.CODE_CODE_C=99,oe.CODE_CODE_B=100,oe.CODE_CODE_A=101,oe.CODE_FNC_1=102,oe.CODE_FNC_2=97,oe.CODE_FNC_3=96,oe.CODE_FNC_4_A=101,oe.CODE_FNC_4_B=100,oe.CODE_START_A=103,oe.CODE_START_B=104,oe.CODE_START_C=105,oe.CODE_STOP=106;class Pt extends at{constructor(n=!1,s=!1){super(),this.usingCheckDigit=n,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,s,o){let u=this.counters;u.fill(0),this.decodeRowResult="";let c=Pt.findAsteriskPattern(s,u),d=s.getNextSet(c[1]),f=s.getSize(),w,x;do{Pt.recordPattern(s,d,u);let z=Pt.toNarrowWidePattern(u);if(z<0)throw new K;w=Pt.patternToChar(z),this.decodeRowResult+=w,x=d;for(let H of u)d+=H;d=s.getNextSet(d)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let E=0;for(let z of u)E+=z;let A=d-x-E;if(d!==f&&A*2<E)throw new K;if(this.usingCheckDigit){let z=this.decodeRowResult.length-1,H=0;for(let $=0;$<z;$++)H+=Pt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt($));if(this.decodeRowResult.charAt(z)!==Pt.ALPHABET_STRING.charAt(H%43))throw new T;this.decodeRowResult=this.decodeRowResult.substring(0,z)}if(this.decodeRowResult.length===0)throw new K;let I;this.extendedMode?I=Pt.decodeExtended(this.decodeRowResult):I=this.decodeRowResult;let D=(c[1]+c[0])/2,F=x+E/2;return new Re(I,null,0,[new de(D,n),new de(F,n)],le.CODE_39,new Date().getTime())}static findAsteriskPattern(n,s){let o=n.getSize(),u=n.getNextSet(0),c=0,d=u,f=!1,w=s.length;for(let x=u;x<o;x++)if(n.get(x)!==f)s[c]++;else{if(c===w-1){if(this.toNarrowWidePattern(s)===Pt.ASTERISK_ENCODING&&n.isRange(Math.max(0,d-Math.floor((x-d)/2)),d,!1))return[d,x];d+=s[0]+s[1],s.copyWithin(0,2,2+c-1),s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,f=!f}throw new K}static toNarrowWidePattern(n){let s=n.length,o=0,u;do{let c=2147483647;for(let w of n)w<c&&w>o&&(c=w);o=c,u=0;let d=0,f=0;for(let w=0;w<s;w++){let x=n[w];x>o&&(f|=1<<s-1-w,u++,d+=x)}if(u===3){for(let w=0;w<s&&u>0;w++){let x=n[w];if(x>o&&(u--,x*2>=d))return-1}return f}}while(u>3);return-1}static patternToChar(n){for(let s=0;s<Pt.CHARACTER_ENCODINGS.length;s++)if(Pt.CHARACTER_ENCODINGS[s]===n)return Pt.ALPHABET_STRING.charAt(s);if(n===Pt.ASTERISK_ENCODING)return"*";throw new K}static decodeExtended(n){let s=n.length,o="";for(let u=0;u<s;u++){let c=n.charAt(u);if(c==="+"||c==="$"||c==="%"||c==="/"){let d=n.charAt(u+1),f="\0";switch(c){case"+":if(d>="A"&&d<="Z")f=String.fromCharCode(d.charCodeAt(0)+32);else throw new U;break;case"$":if(d>="A"&&d<="Z")f=String.fromCharCode(d.charCodeAt(0)-64);else throw new U;break;case"%":if(d>="A"&&d<="E")f=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")f=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")f=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")f=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")f="\0";else if(d==="V")f="@";else if(d==="W")f="`";else if(d==="X"||d==="Y"||d==="Z")f="";else throw new U;break;case"/":if(d>="A"&&d<="O")f=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")f=":";else throw new U;break}o+=f,u++}else o+=c}return o}}Pt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Pt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Pt.ASTERISK_ENCODING=148;class nt extends at{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,s,o){let u=this.decodeStart(s),c=this.decodeEnd(s),d=new ue;nt.decodeMiddle(s,u[1],c[0],d);let f=d.toString(),w=null;o!=null&&(w=o.get(G.ALLOWED_LENGTHS)),w==null&&(w=nt.DEFAULT_ALLOWED_LENGTHS);let x=f.length,E=!1,A=0;for(let F of w){if(x===F){E=!0;break}F>A&&(A=F)}if(!E&&x>A&&(E=!0),!E)throw new U;const I=[new de(u[1],n),new de(c[0],n)];return new Re(f,null,0,I,le.ITF,new Date().getTime())}static decodeMiddle(n,s,o,u){let c=new Int32Array(10),d=new Int32Array(5),f=new Int32Array(5);for(c.fill(0),d.fill(0),f.fill(0);s<o;){at.recordPattern(n,s,c);for(let x=0;x<5;x++){let E=2*x;d[x]=c[E],f[x]=c[E+1]}let w=nt.decodeDigit(d);u.append(w.toString()),w=this.decodeDigit(f),u.append(w.toString()),c.forEach(function(x){s+=x})}}decodeStart(n){let s=nt.skipWhiteSpace(n),o=nt.findGuardPattern(n,s,nt.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(n,o[0]),o}validateQuietZone(n,s){let o=this.narrowLineWidth*10;o=o<s?o:s;for(let u=s-1;o>0&&u>=0&&!n.get(u);u--)o--;if(o!==0)throw new K}static skipWhiteSpace(n){const s=n.getSize(),o=n.getNextSet(0);if(o===s)throw new K;return o}decodeEnd(n){n.reverse();try{let s=nt.skipWhiteSpace(n),o;try{o=nt.findGuardPattern(n,s,nt.END_PATTERN_REVERSED[0])}catch(c){c instanceof K&&(o=nt.findGuardPattern(n,s,nt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,o[0]);let u=o[0];return o[0]=n.getSize()-o[1],o[1]=n.getSize()-u,o}finally{n.reverse()}}static findGuardPattern(n,s,o){let u=o.length,c=new Int32Array(u),d=n.getSize(),f=!1,w=0,x=s;c.fill(0);for(let E=s;E<d;E++)if(n.get(E)!==f)c[w]++;else{if(w===u-1){if(at.patternMatchVariance(c,o,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return[x,E];x+=c[0]+c[1],L.arraycopy(c,2,c,0,w-1),c[w-1]=0,c[w]=0,w--}else w++;c[w]=1,f=!f}throw new K}static decodeDigit(n){let s=nt.MAX_AVG_VARIANCE,o=-1,u=nt.PATTERNS.length;for(let c=0;c<u;c++){let d=nt.PATTERNS[c],f=at.patternMatchVariance(n,d,nt.MAX_INDIVIDUAL_VARIANCE);f<s?(s=f,o=c):f===s&&(o=-1)}if(o>=0)return o%10;throw new K}}nt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],nt.MAX_AVG_VARIANCE=.38,nt.MAX_INDIVIDUAL_VARIANCE=.5,nt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],nt.START_PATTERN=Int32Array.from([1,1,1,1]),nt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class _t extends at{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let s=!1,o,u=0,c=Int32Array.from([0,0,0]);for(;!s;){c=Int32Array.from([0,0,0]),o=_t.findGuardPattern(n,u,!1,this.START_END_PATTERN,c);let d=o[0];u=o[1];let f=d-(u-d);f>=0&&(s=n.isRange(f,d,!1))}return o}static checkChecksum(n){return _t.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let s=n.length;if(s===0)return!1;let o=parseInt(n.charAt(s-1),10);return _t.getStandardUPCEANChecksum(n.substring(0,s-1))===o}static getStandardUPCEANChecksum(n){let s=n.length,o=0;for(let u=s-1;u>=0;u-=2){let c=n.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new U;o+=c}o*=3;for(let u=s-2;u>=0;u-=2){let c=n.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new U;o+=c}return(1e3-o)%10}static decodeEnd(n,s){return _t.findGuardPattern(n,s,!1,_t.START_END_PATTERN,new Int32Array(_t.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,s,o,u){return this.findGuardPattern(n,s,o,u,new Int32Array(u.length))}static findGuardPattern(n,s,o,u,c){let d=n.getSize();s=o?n.getNextUnset(s):n.getNextSet(s);let f=0,w=s,x=u.length,E=o;for(let A=s;A<d;A++)if(n.get(A)!==E)c[f]++;else{if(f===x-1){if(at.patternMatchVariance(c,u,_t.MAX_INDIVIDUAL_VARIANCE)<_t.MAX_AVG_VARIANCE)return Int32Array.from([w,A]);w+=c[0]+c[1];let I=c.slice(2,c.length-1);for(let D=0;D<f-1;D++)c[D]=I[D];c[f-1]=0,c[f]=0,f--}else f++;c[f]=1,E=!E}throw new K}static decodeDigit(n,s,o,u){this.recordPattern(n,o,s);let c=this.MAX_AVG_VARIANCE,d=-1,f=u.length;for(let w=0;w<f;w++){let x=u[w],E=at.patternMatchVariance(s,x,_t.MAX_INDIVIDUAL_VARIANCE);E<c&&(c=E,d=w)}if(d>=0)return d;throw new K}}_t.MAX_AVG_VARIANCE=.48,_t.MAX_INDIVIDUAL_VARIANCE=.7,_t.START_END_PATTERN=Int32Array.from([1,1,1]),_t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),_t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),_t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class eo{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,s,o){let u=this.decodeRowStringBuffer,c=this.decodeMiddle(s,o,u),d=u.toString(),f=eo.parseExtensionString(d),w=[new de((o[0]+o[1])/2,n),new de(c,n)],x=new Re(d,null,0,w,le.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&x.putAllMetadata(f),x}decodeMiddle(n,s,o){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=n.getSize(),d=s[1],f=0;for(let x=0;x<5&&d<c;x++){let E=_t.decodeDigit(n,u,d,_t.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let A of u)d+=A;E>=10&&(f|=1<<4-x),x!==4&&(d=n.getNextSet(d),d=n.getNextUnset(d))}if(o.length!==5)throw new K;let w=this.determineCheckDigit(f);if(eo.extensionChecksum(o.toString())!==w)throw new K;return d}static extensionChecksum(n){let s=n.length,o=0;for(let u=s-2;u>=0;u-=2)o+=n.charAt(u).charCodeAt(0)-48;o*=3;for(let u=s-1;u>=0;u-=2)o+=n.charAt(u).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(n){for(let s=0;s<10;s++)if(n===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new K}static parseExtensionString(n){if(n.length!==5)return null;let s=eo.parseExtension5String(n);return s==null?null:new Map([[_e.SUGGESTED_PRICE,s]])}static parseExtension5String(n){let s;switch(n.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let o=parseInt(n.substring(1)),u=(o/100).toString(),c=o%100,d=c<10?"0"+c:c.toString();return s+u+"."+d}}class uu{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,s,o){let u=this.decodeRowStringBuffer,c=this.decodeMiddle(s,o,u),d=u.toString(),f=uu.parseExtensionString(d),w=[new de((o[0]+o[1])/2,n),new de(c,n)],x=new Re(d,null,0,w,le.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&x.putAllMetadata(f),x}decodeMiddle(n,s,o){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=n.getSize(),d=s[1],f=0;for(let w=0;w<2&&d<c;w++){let x=_t.decodeDigit(n,u,d,_t.L_AND_G_PATTERNS);o+=String.fromCharCode(48+x%10);for(let E of u)d+=E;x>=10&&(f|=1<<1-w),w!==1&&(d=n.getNextSet(d),d=n.getNextUnset(d))}if(o.length!==2)throw new K;if(parseInt(o.toString())%4!==f)throw new K;return d}static parseExtensionString(n){return n.length!==2?null:new Map([[_e.ISSUE_NUMBER,parseInt(n)]])}}class Ph{static decodeRow(n,s,o){let u=_t.findGuardPattern(s,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new eo().decodeRow(n,s,u)}catch{return new uu().decodeRow(n,s,u)}}}Ph.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Xe extends _t{constructor(){super(),this.decodeRowStringBuffer="",Xe.L_AND_G_PATTERNS=Xe.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let s=Xe.L_PATTERNS[n-10],o=new Int32Array(s.length);for(let u=0;u<s.length;u++)o[u]=s[s.length-u-1];Xe.L_AND_G_PATTERNS[n]=o}}decodeRow(n,s,o){let u=Xe.findStartGuardPattern(s),c=o==null?null:o.get(G.NEED_RESULT_POINT_CALLBACK);if(c!=null){const ee=new de((u[0]+u[1])/2,n);c.foundPossibleResultPoint(ee)}let d=this.decodeMiddle(s,u,this.decodeRowStringBuffer),f=d.rowOffset,w=d.resultString;if(c!=null){const ee=new de(f,n);c.foundPossibleResultPoint(ee)}let x=this.decodeEnd(s,f);if(c!=null){const ee=new de((x[0]+x[1])/2,n);c.foundPossibleResultPoint(ee)}let E=x[1],A=E+(E-x[0]);if(A>=s.getSize()||!s.isRange(E,A,!1))throw new K;let I=w.toString();if(I.length<8)throw new U;if(!Xe.checkChecksum(I))throw new T;let D=(u[1]+u[0])/2,F=(x[1]+x[0])/2,z=this.getBarcodeFormat(),H=[new de(D,n),new de(F,n)],$=new Re(I,null,0,H,z,new Date().getTime()),ie=0;try{let ee=Ph.decodeRow(n,s,x[1]);$.putMetadata(_e.UPC_EAN_EXTENSION,ee.getText()),$.putAllMetadata(ee.getResultMetadata()),$.addResultPoints(ee.getResultPoints()),ie=ee.getText().length}catch{}let se=o==null?null:o.get(G.ALLOWED_EAN_EXTENSIONS);if(se!=null){let ee=!1;for(let Ue in se)if(ie.toString()===Ue){ee=!0;break}if(!ee)throw new K}return $}decodeEnd(n,s){return Xe.findGuardPattern(n,s,!1,Xe.START_END_PATTERN,new Int32Array(Xe.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return Xe.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let s=n.length;if(s===0)return!1;let o=parseInt(n.charAt(s-1),10);return Xe.getStandardUPCEANChecksum(n.substring(0,s-1))===o}static getStandardUPCEANChecksum(n){let s=n.length,o=0;for(let u=s-1;u>=0;u-=2){let c=n.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new U;o+=c}o*=3;for(let u=s-2;u>=0;u-=2){let c=n.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new U;o+=c}return(1e3-o)%10}}class Ci extends Xe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,s,o){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=n.getSize(),d=s[1],f=0;for(let x=0;x<6&&d<c;x++){let E=Xe.decodeDigit(n,u,d,Xe.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let A of u)d+=A;E>=10&&(f|=1<<5-x)}o=Ci.determineFirstDigit(o,f),d=Xe.findGuardPattern(n,d,!0,Xe.MIDDLE_PATTERN,new Int32Array(Xe.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<6&&d<c;x++){let E=Xe.decodeDigit(n,u,d,Xe.L_PATTERNS);o+=String.fromCharCode(48+E);for(let A of u)d+=A}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return le.EAN_13}static determineFirstDigit(n,s){for(let o=0;o<10;o++)if(s===this.FIRST_DIGIT_ENCODINGS[o])return n=String.fromCharCode(48+o)+n,n;throw new K}}Ci.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Lh extends Xe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,s,o){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=n.getSize(),d=s[1];for(let w=0;w<4&&d<c;w++){let x=Xe.decodeDigit(n,u,d,Xe.L_PATTERNS);o+=String.fromCharCode(48+x);for(let E of u)d+=E}d=Xe.findGuardPattern(n,d,!0,Xe.MIDDLE_PATTERN,new Int32Array(Xe.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&d<c;w++){let x=Xe.decodeDigit(n,u,d,Xe.L_PATTERNS);o+=String.fromCharCode(48+x);for(let E of u)d+=E}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return le.EAN_8}}class Bh extends Xe{constructor(){super(...arguments),this.ean13Reader=new Ci}getBarcodeFormat(){return le.UPC_A}decode(n,s){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,s,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,s,o))}decodeMiddle(n,s,o){return this.ean13Reader.decodeMiddle(n,s,o)}maybeReturnResult(n){let s=n.getText();if(s.charAt(0)==="0"){let o=new Re(s.substring(1),null,null,n.getResultPoints(),le.UPC_A);return n.getResultMetadata()!=null&&o.putAllMetadata(n.getResultMetadata()),o}else throw new K}reset(){this.ean13Reader.reset()}}class Zr extends Xe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,s,o){const u=this.decodeMiddleCounters.map(x=>x);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const c=n.getSize();let d=s[1],f=0;for(let x=0;x<6&&d<c;x++){const E=Zr.decodeDigit(n,u,d,Zr.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let A of u)d+=A;E>=10&&(f|=1<<5-x)}let w=Zr.determineNumSysAndCheckDigit(o,f);return{rowOffset:d,resultString:w}}decodeEnd(n,s){return Zr.findGuardPatternWithoutCounters(n,s,!0,Zr.MIDDLE_END_PATTERN)}checkChecksum(n){return Xe.checkChecksum(Zr.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,s){for(let o=0;o<=1;o++)for(let u=0;u<10;u++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][u]){let c=String.fromCharCode(48+o),d=String.fromCharCode(48+u);return c+n+d}throw K.getNotFoundInstance()}getBarcodeFormat(){return le.UPC_E}static convertUPCEtoUPCA(n){const s=n.slice(1,7).split("").map(c=>c.charCodeAt(0)),o=new ue;o.append(n.charAt(0));let u=s[5];switch(u){case 0:case 1:case 2:o.appendChars(s,0,2),o.append(u),o.append("0000"),o.appendChars(s,2,3);break;case 3:o.appendChars(s,0,3),o.append("00000"),o.appendChars(s,3,2);break;case 4:o.appendChars(s,0,4),o.append("00000"),o.append(s[4]);break;default:o.appendChars(s,0,5),o.append("0000"),o.append(u);break}return n.length>=8&&o.append(n.charAt(7)),o.toString()}}Zr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Zr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class cu extends at{constructor(n){super();let s=n==null?null:n.get(G.POSSIBLE_FORMATS),o=[];i(s)?(o.push(new Ci),o.push(new Bh),o.push(new Lh),o.push(new Zr)):(s.indexOf(le.EAN_13)>-1&&o.push(new Ci),s.indexOf(le.UPC_A)>-1&&o.push(new Bh),s.indexOf(le.EAN_8)>-1&&o.push(new Lh),s.indexOf(le.UPC_E)>-1&&o.push(new Zr)),this.readers=o}decodeRow(n,s,o){for(let u of this.readers)try{const c=u.decodeRow(n,s,o),d=c.getBarcodeFormat()===le.EAN_13&&c.getText().charAt(0)==="0",f=o==null?null:o.get(G.POSSIBLE_FORMATS),w=f==null||f.includes(le.UPC_A);if(d&&w){const x=c.getRawBytes(),E=new Re(c.getText().substring(1),x,x?x.length:null,c.getResultPoints(),le.UPC_A);return E.putAllMetadata(c.getResultMetadata()),E}return c}catch{}throw new K}reset(){for(let n of this.readers)n.reset()}}class nr extends at{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,s){for(let o=0;o<s.length;o++)if(at.patternMatchVariance(n,s[o],nr.MAX_INDIVIDUAL_VARIANCE)<nr.MAX_AVG_VARIANCE)return o;throw new K}static count(n){return ye.sum(new Int32Array(n))}static increment(n,s){let o=0,u=s[0];for(let c=1;c<n.length;c++)s[c]>u&&(u=s[c],o=c);n[o]++}static decrement(n,s){let o=0,u=s[0];for(let c=1;c<n.length;c++)s[c]<u&&(u=s[c],o=c);n[o]--}static isFinderPattern(n){let s=n[0]+n[1],o=s+n[2]+n[3],u=s/o;if(u>=nr.MIN_FINDER_PATTERN_RATIO&&u<=nr.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let f of n)f>d&&(d=f),f<c&&(c=f);return d<10*c}return!1}}nr.MAX_AVG_VARIANCE=.2,nr.MAX_INDIVIDUAL_VARIANCE=.45,nr.MIN_FINDER_PATTERN_RATIO=9.5/12,nr.MAX_FINDER_PATTERN_RATIO=12.5/14;class Zi{constructor(n,s){this.value=n,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof Zi))return!1;const s=n;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ha{constructor(n,s,o,u,c){this.value=n,this.startEnd=s,this.value=n,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new de(o,c)),this.resultPoints.push(new de(u,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof ha))return!1;const s=n;return this.value===s.value}hashCode(){return this.value}}class fn{constructor(){}static getRSSvalue(n,s,o){let u=0;for(let w of n)u+=w;let c=0,d=0,f=n.length;for(let w=0;w<f-1;w++){let x;for(x=1,d|=1<<w;x<n[w];x++,d&=~(1<<w)){let E=fn.combins(u-x-1,f-w-2);if(o&&d===0&&u-x-(f-w-1)>=f-w-1&&(E-=fn.combins(u-x-(f-w),f-w-2)),f-w-1>1){let A=0;for(let I=u-x-(f-w-2);I>s;I--)A+=fn.combins(u-x-I-1,f-w-3);E-=A*(f-1-w)}else u-x>s&&E--;c+=E}u-=x}return c}static combins(n,s){let o,u;n-s>s?(u=s,o=n-s):(u=n-s,o=s);let c=1,d=1;for(let f=n;f>o;f--)c*=f,d<=u&&(c/=d,d++);for(;d<=u;)c/=d,d++;return c}}class e2{static buildBitArray(n){let s=n.length*2-1;n[n.length-1].getRightChar()==null&&(s-=1);let o=12*s,u=new M(o),c=0,f=n[0].getRightChar().getValue();for(let w=11;w>=0;--w)f&1<<w&&u.set(c),c++;for(let w=1;w<n.length;++w){let x=n[w],E=x.getLeftChar().getValue();for(let A=11;A>=0;--A)E&1<<A&&u.set(c),c++;if(x.getRightChar()!=null){let A=x.getRightChar().getValue();for(let I=11;I>=0;--I)A&1<<I&&u.set(c),c++}}return u}}class _i{constructor(n,s){s?this.decodedInformation=null:(this.finished=n,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class du{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class wr extends du{constructor(n,s){super(n),this.value=s}getValue(){return this.value}isFNC1(){return this.value===wr.FNC1}}wr.FNC1="$";class Ai extends du{constructor(n,s,o){super(n),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ur extends du{constructor(n,s,o){if(super(n),s<0||s>10||o<0||o>10)throw new U;this.firstDigit=s,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ur.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ur.FNC1}isAnyFNC1(){return this.firstDigit===Ur.FNC1||this.secondDigit===Ur.FNC1}}Ur.FNC1=10;class fe{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new K;let s=n.substring(0,2);for(let c of fe.TWO_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(2,c[2],n):fe.processFixedAI(2,c[1],n);if(n.length<3)throw new K;let o=n.substring(0,3);for(let c of fe.THREE_DIGIT_DATA_LENGTH)if(c[0]===o)return c[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(3,c[2],n):fe.processFixedAI(3,c[1],n);for(let c of fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===o)return c[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(4,c[2],n):fe.processFixedAI(4,c[1],n);if(n.length<4)throw new K;let u=n.substring(0,4);for(let c of fe.FOUR_DIGIT_DATA_LENGTH)if(c[0]===u)return c[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(4,c[2],n):fe.processFixedAI(4,c[1],n);throw new K}static processFixedAI(n,s,o){if(o.length<n)throw new K;let u=o.substring(0,n);if(o.length<n+s)throw new K;let c=o.substring(n,n+s),d=o.substring(n+s),f="("+u+")"+c,w=fe.parseFieldsInGeneralPurpose(d);return w==null?f:f+w}static processVariableAI(n,s,o){let u=o.substring(0,n),c;o.length<n+s?c=o.length:c=n+s;let d=o.substring(n,c),f=o.substring(c),w="("+u+")"+d,x=fe.parseFieldsInGeneralPurpose(f);return x==null?w:w+x}}fe.VARIABLE_LENGTH=[],fe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",fe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",fe.VARIABLE_LENGTH,20],["22",fe.VARIABLE_LENGTH,29],["30",fe.VARIABLE_LENGTH,8],["37",fe.VARIABLE_LENGTH,8],["90",fe.VARIABLE_LENGTH,30],["91",fe.VARIABLE_LENGTH,30],["92",fe.VARIABLE_LENGTH,30],["93",fe.VARIABLE_LENGTH,30],["94",fe.VARIABLE_LENGTH,30],["95",fe.VARIABLE_LENGTH,30],["96",fe.VARIABLE_LENGTH,30],["97",fe.VARIABLE_LENGTH,3],["98",fe.VARIABLE_LENGTH,30],["99",fe.VARIABLE_LENGTH,30]],fe.THREE_DIGIT_DATA_LENGTH=[["240",fe.VARIABLE_LENGTH,30],["241",fe.VARIABLE_LENGTH,30],["242",fe.VARIABLE_LENGTH,6],["250",fe.VARIABLE_LENGTH,30],["251",fe.VARIABLE_LENGTH,30],["253",fe.VARIABLE_LENGTH,17],["254",fe.VARIABLE_LENGTH,20],["400",fe.VARIABLE_LENGTH,30],["401",fe.VARIABLE_LENGTH,30],["402",17],["403",fe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",fe.VARIABLE_LENGTH,20],["421",fe.VARIABLE_LENGTH,15],["422",3],["423",fe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",fe.VARIABLE_LENGTH,15],["391",fe.VARIABLE_LENGTH,18],["392",fe.VARIABLE_LENGTH,15],["393",fe.VARIABLE_LENGTH,18],["703",fe.VARIABLE_LENGTH,30]],fe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",fe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",fe.VARIABLE_LENGTH,20],["8003",fe.VARIABLE_LENGTH,30],["8004",fe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",fe.VARIABLE_LENGTH,30],["8008",fe.VARIABLE_LENGTH,12],["8018",18],["8020",fe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",fe.VARIABLE_LENGTH,70],["8200",fe.VARIABLE_LENGTH,70]];class Ji{constructor(n){this.buffer=new ue,this.information=n}decodeAllCodes(n,s){let o=s,u=null;do{let c=this.decodeGeneralPurposeField(o,u),d=fe.parseFieldsInGeneralPurpose(c.getNewString());if(d!=null&&n.append(d),c.isRemaining()?u=""+c.getRemainingValue():u=null,o===c.getNewPosition())break;o=c.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let s=n;s<n+3;++s)if(this.information.get(s))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(n,4);return c===0?new Ur(this.information.getSize(),Ur.FNC1,Ur.FNC1):new Ur(this.information.getSize(),c-1,Ur.FNC1)}let s=this.extractNumericValueFromBitArray(n,7),o=(s-8)/11,u=(s-8)%11;return new Ur(n+7,o,u)}extractNumericValueFromBitArray(n,s){return Ji.extractNumericValueFromBitArray(this.information,n,s)}static extractNumericValueFromBitArray(n,s,o){let u=0;for(let c=0;c<o;++c)n.get(s+c)&&(u|=1<<o-c-1);return u}decodeGeneralPurposeField(n,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(n);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new Ai(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new Ai(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,s;do{let o=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),n=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),n=s.isFinished()):(s=this.parseNumericBlock(),n=s.isFinished()),!(o!==this.current.getPosition())&&!n)break}while(!n);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let s;return n.isSecondDigitFNC1()?s=new Ai(this.current.getPosition(),this.buffer.toString()):s=new Ai(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new _i(!0,s)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let s=new Ai(this.current.getPosition(),this.buffer.toString());return new _i(!0,s)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new _i(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let s=new Ai(this.current.getPosition(),this.buffer.toString());return new _i(!0,s)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new _i(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let s=new Ai(this.current.getPosition(),this.buffer.toString());return new _i(!0,s)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new _i(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(n,5);if(s>=5&&s<16)return!0;if(n+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(n,7);if(o>=64&&o<116)return!0;if(n+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(n,8);return u>=232&&u<253}decodeIsoIec646(n){let s=this.extractNumericValueFromBitArray(n,5);if(s===15)return new wr(n+5,wr.FNC1);if(s>=5&&s<15)return new wr(n+5,"0"+(s-5));let o=this.extractNumericValueFromBitArray(n,7);if(o>=64&&o<90)return new wr(n+7,""+(o+1));if(o>=90&&o<116)return new wr(n+7,""+(o+7));let u=this.extractNumericValueFromBitArray(n,8),c;switch(u){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new U}return new wr(n+8,c)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(n,5);if(s>=5&&s<16)return!0;if(n+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(n,6);return o>=16&&o<63}decodeAlphanumeric(n){let s=this.extractNumericValueFromBitArray(n,5);if(s===15)return new wr(n+5,wr.FNC1);if(s>=5&&s<15)return new wr(n+5,"0"+(s-5));let o=this.extractNumericValueFromBitArray(n,6);if(o>=32&&o<58)return new wr(n+6,""+(o+33));let u;switch(o){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new Pe("Decoding invalid alphanumeric value: "+o)}return new wr(n+6,u)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let s=0;s<5&&s+n<this.information.getSize();++s)if(s===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+s))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let s=n;s<n+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let s=0;s<4&&s+n<this.information.getSize();++s)if(this.information.get(n+s))return!1;return!0}}class hu{constructor(n){this.information=n,this.generalDecoder=new Ji(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class xr extends hu{constructor(n){super(n)}encodeCompressedGtin(n,s){n.append("(01)");let o=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,s,o)}encodeCompressedGtinWithoutAI(n,s,o){for(let u=0;u<4;++u){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*u,10);c/100===0&&n.append("0"),c/10===0&&n.append("0"),n.append(c)}xr.appendCheckDigit(n,o)}static appendCheckDigit(n,s){let o=0;for(let u=0;u<13;u++){let c=n.charAt(u+s).charCodeAt(0)-48;o+=u&1?c:3*c}o=10-o%10,o===10&&(o=0),n.append(o)}}xr.GTIN_SIZE=40;class es extends xr{constructor(n){super(n)}parseInformation(){let n=new ue;n.append("(01)");let s=n.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(es.HEADER_SIZE,4);return n.append(o),this.encodeCompressedGtinWithoutAI(n,es.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(n,es.HEADER_SIZE+44)}}es.HEADER_SIZE=4;class fa extends hu{constructor(n){super(n)}parseInformation(){let n=new ue;return this.getGeneralDecoder().decodeAllCodes(n,fa.HEADER_SIZE)}}fa.HEADER_SIZE=5;class ga extends xr{constructor(n){super(n)}encodeCompressedWeight(n,s,o){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s,o);this.addWeightCode(n,u);let c=this.checkWeight(u),d=1e5;for(let f=0;f<5;++f)c/d===0&&n.append("0"),d/=10;n.append(c)}}class gn extends ga{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=gn.HEADER_SIZE+ga.GTIN_SIZE+gn.WEIGHT_SIZE)throw new K;let n=new ue;return this.encodeCompressedGtin(n,gn.HEADER_SIZE),this.encodeCompressedWeight(n,gn.HEADER_SIZE+ga.GTIN_SIZE,gn.WEIGHT_SIZE),n.toString()}}gn.HEADER_SIZE=5,gn.WEIGHT_SIZE=15;class t2 extends gn{constructor(n){super(n)}addWeightCode(n,s){n.append("(3103)")}checkWeight(n){return n}}class r2 extends gn{constructor(n){super(n)}addWeightCode(n,s){s<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class pn extends xr{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<pn.HEADER_SIZE+xr.GTIN_SIZE)throw new K;let n=new ue;this.encodeCompressedGtin(n,pn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(pn.HEADER_SIZE+xr.GTIN_SIZE,pn.LAST_DIGIT_SIZE);n.append("(392"),n.append(s),n.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(pn.HEADER_SIZE+xr.GTIN_SIZE+pn.LAST_DIGIT_SIZE,null);return n.append(o.getNewString()),n.toString()}}pn.HEADER_SIZE=8,pn.LAST_DIGIT_SIZE=2;class cr extends xr{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<cr.HEADER_SIZE+xr.GTIN_SIZE)throw new K;let n=new ue;this.encodeCompressedGtin(n,cr.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(cr.HEADER_SIZE+xr.GTIN_SIZE,cr.LAST_DIGIT_SIZE);n.append("(393"),n.append(s),n.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(cr.HEADER_SIZE+xr.GTIN_SIZE+cr.LAST_DIGIT_SIZE,cr.FIRST_THREE_DIGITS_SIZE);o/100==0&&n.append("0"),o/10==0&&n.append("0"),n.append(o);let u=this.getGeneralDecoder().decodeGeneralPurposeField(cr.HEADER_SIZE+xr.GTIN_SIZE+cr.LAST_DIGIT_SIZE+cr.FIRST_THREE_DIGITS_SIZE,null);return n.append(u.getNewString()),n.toString()}}cr.HEADER_SIZE=8,cr.LAST_DIGIT_SIZE=2,cr.FIRST_THREE_DIGITS_SIZE=10;class mt extends ga{constructor(n,s,o){super(n),this.dateCode=o,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=mt.HEADER_SIZE+mt.GTIN_SIZE+mt.WEIGHT_SIZE+mt.DATE_SIZE)throw new K;let n=new ue;return this.encodeCompressedGtin(n,mt.HEADER_SIZE),this.encodeCompressedWeight(n,mt.HEADER_SIZE+mt.GTIN_SIZE,mt.WEIGHT_SIZE),this.encodeCompressedDate(n,mt.HEADER_SIZE+mt.GTIN_SIZE+mt.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,s){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(s,mt.DATE_SIZE);if(o==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let u=o%32;o/=32;let c=o%12+1;o/=12;let d=o;d/10==0&&n.append("0"),n.append(d),c/10==0&&n.append("0"),n.append(c),u/10==0&&n.append("0"),n.append(u)}addWeightCode(n,s){n.append("("),n.append(this.firstAIdigits),n.append(s/1e5),n.append(")")}checkWeight(n){return n%1e5}}mt.HEADER_SIZE=8,mt.WEIGHT_SIZE=20,mt.DATE_SIZE=16;function jh(_){try{if(_.get(1))return new es(_);if(!_.get(2))return new fa(_);switch(Ji.extractNumericValueFromBitArray(_,1,4)){case 4:return new t2(_);case 5:return new r2(_)}switch(Ji.extractNumericValueFromBitArray(_,1,5)){case 12:return new pn(_);case 13:return new cr(_)}switch(Ji.extractNumericValueFromBitArray(_,1,7)){case 56:return new mt(_,"310","11");case 57:return new mt(_,"320","11");case 58:return new mt(_,"310","13");case 59:return new mt(_,"320","13");case 60:return new mt(_,"310","15");case 61:return new mt(_,"320","15");case 62:return new mt(_,"310","17");case 63:return new mt(_,"320","17")}}catch(n){throw console.log(n),new Pe("unknown decoder: "+_)}}class zn{constructor(n,s,o,u){this.leftchar=n,this.rightchar=s,this.finderpattern=o,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,s){return n instanceof zn?zn.equalsOrNull(n.leftchar,s.leftchar)&&zn.equalsOrNull(n.rightchar,s.rightchar)&&zn.equalsOrNull(n.finderpattern,s.finderpattern):!1}static equalsOrNull(n,s){return n===null?s===null:zn.equals(n,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class fu{constructor(n,s,o){this.pairs=n,this.rowNumber=s,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,s){return n instanceof fu?this.checkEqualitity(n,s)&&n.wasReversed===s.wasReversed:!1}checkEqualitity(n,s){if(!n||!s)return;let o;return n.forEach((u,c)=>{s.forEach(d=>{u.getLeftChar().getValue()===d.getLeftChar().getValue()&&u.getRightChar().getValue()===d.getRightChar().getValue()&&u.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(o=!0)})}),o}}class Z extends nr{constructor(n){super(...arguments),this.pairs=new Array(Z.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,s,o){this.pairs.length=0,this.startFromEven=!1;try{return Z.constructResult(this.decodeRow2pairs(n,s))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,Z.constructResult(this.decodeRow2pairs(n,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,s){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,n))}catch(c){if(c instanceof K){if(!this.pairs.length)throw new K;o=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(n,!1),u){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new K}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return n&&(this.rows=this.rows.reverse()),s}checkRows(n,s){for(let o=s;o<this.rows.length;o++){let u=this.rows[o];this.pairs.length=0;for(let d of n)this.pairs.push(d.getPairs());if(this.pairs.push(u.getPairs()),!Z.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(n);c.push(u);try{return this.checkRows(c,o+1)}catch(d){this.verbose&&console.log(d)}}throw new K}static isValidSequence(n){for(let s of Z.FINDER_PATTERN_SEQUENCES){if(n.length>s.length)continue;let o=!0;for(let u=0;u<n.length;u++)if(n[u].getFinderPattern().getValue()!=s[u]){o=!1;break}if(o)return!0}return!1}storeRow(n,s){let o=0,u=!1,c=!1;for(;o<this.rows.length;){let d=this.rows[o];if(d.getRowNumber()>n){c=d.isEquivalent(this.pairs);break}u=d.isEquivalent(this.pairs),o++}c||u||Z.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new fu(this.pairs,n,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,s){for(let o of s)if(o.getPairs().length!==n.length){for(let u of o.getPairs())for(let c of n)if(zn.equals(u,c))break}}static isPartialRow(n,s){for(let o of s){let u=!0;for(let c of n){let d=!1;for(let f of o.getPairs())if(c.equals(f)){d=!0;break}if(!d){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(n){let s=e2.buildBitArray(n),u=jh(s).parseInformation(),c=n[0].getFinderPattern().getResultPoints(),d=n[n.length-1].getFinderPattern().getResultPoints(),f=[c[0],c[1],d[0],d[1]];return new Re(u,null,null,f,le.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),s=n.getLeftChar(),o=n.getRightChar();if(o==null)return!1;let u=o.getChecksumPortion(),c=2;for(let f=1;f<this.pairs.size();++f){let w=this.pairs.get(f);u+=w.getLeftChar().getChecksumPortion(),c++;let x=w.getRightChar();x!=null&&(u+=x.getChecksumPortion(),c++)}return u%=211,211*(c-4)+u==s.getValue()}static getNextSecondBar(n,s){let o;return n.get(s)?(o=n.getNextUnset(s),o=n.getNextSet(o)):(o=n.getNextSet(s),o=n.getNextUnset(o)),o}retrieveNextPair(n,s,o){let u=s.length%2==0;this.startFromEven&&(u=!u);let c,d=!0,f=-1;do this.findNextPair(n,s,f),c=this.parseFoundFinderPattern(n,o,u),c==null?f=Z.getNextSecondBar(n,this.startEnd[0]):d=!1;while(d);let w=this.decodeDataCharacter(n,c,u,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new K;let x;try{x=this.decodeDataCharacter(n,c,u,!1)}catch(E){x=null,this.verbose&&console.log(E)}return new zn(w,x,c,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,s,o){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=n.getSize(),d;o>=0?d=o:this.isEmptyPair(s)?d=0:d=s[s.length-1].getFinderPattern().getStartEnd()[1];let f=s.length%2!=0;this.startFromEven&&(f=!f);let w=!1;for(;d<c&&(w=!n.get(d),!!w);)d++;let x=0,E=d;for(let A=d;A<c;A++)if(n.get(A)!=w)u[x]++;else{if(x==3){if(f&&Z.reverseCounters(u),Z.isFinderPattern(u)){this.startEnd[0]=E,this.startEnd[1]=A;return}f&&Z.reverseCounters(u),E+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,x--}else x++;u[x]=1,w=!w}throw new K}static reverseCounters(n){let s=n.length;for(let o=0;o<s/2;++o){let u=n[o];n[o]=n[s-o-1],n[s-o-1]=u}}parseFoundFinderPattern(n,s,o){let u,c,d;if(o){let x=this.startEnd[0]-1;for(;x>=0&&!n.get(x);)x--;x++,u=this.startEnd[0]-x,c=x,d=this.startEnd[1]}else c=this.startEnd[0],d=n.getNextUnset(this.startEnd[1]+1),u=d-this.startEnd[1];let f=this.getDecodeFinderCounters();L.arraycopy(f,0,f,1,f.length-1),f[0]=u;let w;try{w=this.parseFinderValue(f,Z.FINDER_PATTERNS)}catch{return null}return new ha(w,[c,d],c,d,s)}decodeDataCharacter(n,s,o,u){let c=this.getDataCharacterCounters();for(let st=0;st<c.length;st++)c[st]=0;if(u)Z.recordPatternInReverse(n,s.getStartEnd()[0],c);else{Z.recordPattern(n,s.getStartEnd()[1],c);for(let st=0,Qt=c.length-1;st<Qt;st++,Qt--){let Ir=c[st];c[st]=c[Qt],c[Qt]=Ir}}let d=17,f=ye.sum(new Int32Array(c))/d,w=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(f-w)/w>.3)throw new K;let x=this.getOddCounts(),E=this.getEvenCounts(),A=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let st=0;st<c.length;st++){let Qt=1*c[st]/f,Ir=Qt+.5;if(Ir<1){if(Qt<.3)throw new K;Ir=1}else if(Ir>8){if(Qt>8.7)throw new K;Ir=8}let ss=st/2;st&1?(E[ss]=Ir,I[ss]=Qt-Ir):(x[ss]=Ir,A[ss]=Qt-Ir)}this.adjustOddEvenCounts(d);let D=4*s.getValue()+(o?0:2)+(u?0:1)-1,F=0,z=0;for(let st=x.length-1;st>=0;st--){if(Z.isNotA1left(s,o,u)){let Qt=Z.WEIGHTS[D][2*st];z+=x[st]*Qt}F+=x[st]}let H=0;for(let st=E.length-1;st>=0;st--)if(Z.isNotA1left(s,o,u)){let Qt=Z.WEIGHTS[D][2*st+1];H+=E[st]*Qt}let $=z+H;if(F&1||F>13||F<4)throw new K;let ie=(13-F)/2,se=Z.SYMBOL_WIDEST[ie],ee=9-se,Ue=fn.getRSSvalue(x,se,!0),Me=fn.getRSSvalue(E,ee,!1),vr=Z.EVEN_TOTAL_SUBSET[ie],Jr=Z.GSUM[ie],Er=Ue*vr+Me+Jr;return new Zi(Er,$)}static isNotA1left(n,s,o){return!(n.getValue()==0&&s&&o)}adjustOddEvenCounts(n){let s=ye.sum(new Int32Array(this.getOddCounts())),o=ye.sum(new Int32Array(this.getEvenCounts())),u=!1,c=!1;s>13?c=!0:s<4&&(u=!0);let d=!1,f=!1;o>13?f=!0:o<4&&(d=!0);let w=s+o-n,x=(s&1)==1,E=(o&1)==0;if(w==1)if(x){if(E)throw new K;c=!0}else{if(!E)throw new K;f=!0}else if(w==-1)if(x){if(E)throw new K;u=!0}else{if(!E)throw new K;d=!0}else if(w==0){if(x){if(!E)throw new K;s<o?(u=!0,f=!0):(c=!0,d=!0)}else if(E)throw new K}else throw new K;if(u){if(c)throw new K;Z.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&Z.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(f)throw new K;Z.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&Z.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Z.SYMBOL_WIDEST=[7,5,4,3,1],Z.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Z.GSUM=[0,348,1388,2948,3988],Z.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Z.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Z.FINDER_PAT_A=0,Z.FINDER_PAT_B=1,Z.FINDER_PAT_C=2,Z.FINDER_PAT_D=3,Z.FINDER_PAT_E=4,Z.FINDER_PAT_F=5,Z.FINDER_PATTERN_SEQUENCES=[[Z.FINDER_PAT_A,Z.FINDER_PAT_A],[Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B],[Z.FINDER_PAT_A,Z.FINDER_PAT_C,Z.FINDER_PAT_B,Z.FINDER_PAT_D],[Z.FINDER_PAT_A,Z.FINDER_PAT_E,Z.FINDER_PAT_B,Z.FINDER_PAT_D,Z.FINDER_PAT_C],[Z.FINDER_PAT_A,Z.FINDER_PAT_E,Z.FINDER_PAT_B,Z.FINDER_PAT_D,Z.FINDER_PAT_D,Z.FINDER_PAT_F],[Z.FINDER_PAT_A,Z.FINDER_PAT_E,Z.FINDER_PAT_B,Z.FINDER_PAT_D,Z.FINDER_PAT_E,Z.FINDER_PAT_F,Z.FINDER_PAT_F],[Z.FINDER_PAT_A,Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B,Z.FINDER_PAT_C,Z.FINDER_PAT_C,Z.FINDER_PAT_D,Z.FINDER_PAT_D],[Z.FINDER_PAT_A,Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B,Z.FINDER_PAT_C,Z.FINDER_PAT_C,Z.FINDER_PAT_D,Z.FINDER_PAT_E,Z.FINDER_PAT_E],[Z.FINDER_PAT_A,Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B,Z.FINDER_PAT_C,Z.FINDER_PAT_C,Z.FINDER_PAT_D,Z.FINDER_PAT_E,Z.FINDER_PAT_F,Z.FINDER_PAT_F],[Z.FINDER_PAT_A,Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B,Z.FINDER_PAT_C,Z.FINDER_PAT_D,Z.FINDER_PAT_D,Z.FINDER_PAT_E,Z.FINDER_PAT_E,Z.FINDER_PAT_F,Z.FINDER_PAT_F]],Z.MAX_PAIRS=11;class n2 extends Zi{constructor(n,s,o){super(n,s),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class At extends nr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,s,o){const u=this.decodePair(s,!1,n,o);At.addOrTally(this.possibleLeftPairs,u),s.reverse();let c=this.decodePair(s,!0,n,o);At.addOrTally(this.possibleRightPairs,c),s.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let f of this.possibleRightPairs)if(f.getCount()>1&&At.checkChecksum(d,f))return At.constructResult(d,f)}throw new K}static addOrTally(n,s){if(s==null)return;let o=!1;for(let u of n)if(u.getValue()===s.getValue()){u.incrementCount(),o=!0;break}o||n.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,s){let o=4537077*n.getValue()+s.getValue(),u=new String(o).toString(),c=new ue;for(let x=13-u.length;x>0;x--)c.append("0");c.append(u);let d=0;for(let x=0;x<13;x++){let E=c.charAt(x).charCodeAt(0)-48;d+=x&1?E:3*E}d=10-d%10,d===10&&(d=0),c.append(d.toString());let f=n.getFinderPattern().getResultPoints(),w=s.getFinderPattern().getResultPoints();return new Re(c.toString(),null,0,[f[0],f[1],w[0],w[1]],le.RSS_14,new Date().getTime())}static checkChecksum(n,s){let o=(n.getChecksumPortion()+16*s.getChecksumPortion())%79,u=9*n.getFinderPattern().getValue()+s.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,o===u}decodePair(n,s,o,u){try{let c=this.findFinderPattern(n,s),d=this.parseFoundFinderPattern(n,o,s,c),f=u==null?null:u.get(G.NEED_RESULT_POINT_CALLBACK);if(f!=null){let E=(c[0]+c[1])/2;s&&(E=n.getSize()-1-E),f.foundPossibleResultPoint(new de(E,o))}let w=this.decodeDataCharacter(n,d,!0),x=this.decodeDataCharacter(n,d,!1);return new n2(1597*w.getValue()+x.getValue(),w.getChecksumPortion()+4*x.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(n,s,o){let u=this.getDataCharacterCounters();for(let H=0;H<u.length;H++)u[H]=0;if(o)at.recordPatternInReverse(n,s.getStartEnd()[0],u);else{at.recordPattern(n,s.getStartEnd()[1]+1,u);for(let H=0,$=u.length-1;H<$;H++,$--){let ie=u[H];u[H]=u[$],u[$]=ie}}let c=o?16:15,d=ye.sum(new Int32Array(u))/c,f=this.getOddCounts(),w=this.getEvenCounts(),x=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let H=0;H<u.length;H++){let $=u[H]/d,ie=Math.floor($+.5);ie<1?ie=1:ie>8&&(ie=8);let se=Math.floor(H/2);H&1?(w[se]=ie,E[se]=$-ie):(f[se]=ie,x[se]=$-ie)}this.adjustOddEvenCounts(o,c);let A=0,I=0;for(let H=f.length-1;H>=0;H--)I*=9,I+=f[H],A+=f[H];let D=0,F=0;for(let H=w.length-1;H>=0;H--)D*=9,D+=w[H],F+=w[H];let z=I+3*D;if(o){if(A&1||A>12||A<4)throw new K;let H=(12-A)/2,$=At.OUTSIDE_ODD_WIDEST[H],ie=9-$,se=fn.getRSSvalue(f,$,!1),ee=fn.getRSSvalue(w,ie,!0),Ue=At.OUTSIDE_EVEN_TOTAL_SUBSET[H],Me=At.OUTSIDE_GSUM[H];return new Zi(se*Ue+ee+Me,z)}else{if(F&1||F>10||F<4)throw new K;let H=(10-F)/2,$=At.INSIDE_ODD_WIDEST[H],ie=9-$,se=fn.getRSSvalue(f,$,!0),ee=fn.getRSSvalue(w,ie,!1),Ue=At.INSIDE_ODD_TOTAL_SUBSET[H],Me=At.INSIDE_GSUM[H];return new Zi(ee*Ue+se+Me,z)}}findFinderPattern(n,s){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=n.getSize(),c=!1,d=0;for(;d<u&&(c=!n.get(d),s!==c);)d++;let f=0,w=d;for(let x=d;x<u;x++)if(n.get(x)!==c)o[f]++;else{if(f===3){if(nr.isFinderPattern(o))return[w,x];w+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,f--}else f++;o[f]=1,c=!c}throw new K}parseFoundFinderPattern(n,s,o,u){let c=n.get(u[0]),d=u[0]-1;for(;d>=0&&c!==n.get(d);)d--;d++;const f=u[0]-d,w=this.getDecodeFinderCounters(),x=new Int32Array(w.length);L.arraycopy(w,0,x,1,w.length-1),x[0]=f;const E=this.parseFinderValue(x,At.FINDER_PATTERNS);let A=d,I=u[1];return o&&(A=n.getSize()-1-A,I=n.getSize()-1-I),new ha(E,[d,u[1]],A,I,s)}adjustOddEvenCounts(n,s){let o=ye.sum(new Int32Array(this.getOddCounts())),u=ye.sum(new Int32Array(this.getEvenCounts())),c=!1,d=!1,f=!1,w=!1;n?(o>12?d=!0:o<4&&(c=!0),u>12?w=!0:u<4&&(f=!0)):(o>11?d=!0:o<5&&(c=!0),u>10?w=!0:u<4&&(f=!0));let x=o+u-s,E=(o&1)===(n?1:0),A=(u&1)===1;if(x===1)if(E){if(A)throw new K;d=!0}else{if(!A)throw new K;w=!0}else if(x===-1)if(E){if(A)throw new K;c=!0}else{if(!A)throw new K;f=!0}else if(x===0){if(E){if(!A)throw new K;o<u?(c=!0,w=!0):(d=!0,f=!0)}else if(A)throw new K}else throw new K;if(c){if(d)throw new K;nr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&nr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(w)throw new K;nr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&nr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}At.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],At.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],At.OUTSIDE_GSUM=[0,161,961,2015,2715],At.INSIDE_GSUM=[0,336,1036,1516],At.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],At.INSIDE_ODD_WIDEST=[2,4,6,8],At.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ts extends at{constructor(n,s){super(),this.readers=[],this.verbose=s===!0;const o=n?n.get(G.POSSIBLE_FORMATS):null,u=n&&n.get(G.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(le.EAN_13)||o.includes(le.UPC_A)||o.includes(le.EAN_8)||o.includes(le.UPC_E))&&this.readers.push(new cu(n)),o.includes(le.CODE_39)&&this.readers.push(new Pt(u)),o.includes(le.CODE_128)&&this.readers.push(new oe),o.includes(le.ITF)&&this.readers.push(new nt),o.includes(le.RSS_14)&&this.readers.push(new At),o.includes(le.RSS_EXPANDED)&&this.readers.push(new Z(this.verbose))):(this.readers.push(new cu(n)),this.readers.push(new Pt),this.readers.push(new cu(n)),this.readers.push(new oe),this.readers.push(new nt),this.readers.push(new At),this.readers.push(new Z(this.verbose)))}decodeRow(n,s,o){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(n,s,o)}catch{}throw new K}reset(){this.readers.forEach(n=>n.reset())}}class i2 extends he{constructor(n=500,s){super(new ts(s),n,s)}}class qe{constructor(n,s,o){this.ecCodewords=n,this.ecBlocks=[s],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class $e{constructor(n,s){this.count=n,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ve{constructor(n,s,o,u,c,d){this.versionNumber=n,this.symbolSizeRows=s,this.symbolSizeColumns=o,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=c,this.ecBlocks=d;let f=0;const w=d.getECCodewords(),x=d.getECBlocks();for(let E of x)f+=E.getCount()*(E.getDataCodewords()+w);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,s){if(n&1||s&1)throw new U;for(let o of Ve.VERSIONS)if(o.symbolSizeRows===n&&o.symbolSizeColumns===s)return o;throw new U}toString(){return""+this.versionNumber}static buildVersions(){return[new Ve(1,10,10,8,8,new qe(5,new $e(1,3))),new Ve(2,12,12,10,10,new qe(7,new $e(1,5))),new Ve(3,14,14,12,12,new qe(10,new $e(1,8))),new Ve(4,16,16,14,14,new qe(12,new $e(1,12))),new Ve(5,18,18,16,16,new qe(14,new $e(1,18))),new Ve(6,20,20,18,18,new qe(18,new $e(1,22))),new Ve(7,22,22,20,20,new qe(20,new $e(1,30))),new Ve(8,24,24,22,22,new qe(24,new $e(1,36))),new Ve(9,26,26,24,24,new qe(28,new $e(1,44))),new Ve(10,32,32,14,14,new qe(36,new $e(1,62))),new Ve(11,36,36,16,16,new qe(42,new $e(1,86))),new Ve(12,40,40,18,18,new qe(48,new $e(1,114))),new Ve(13,44,44,20,20,new qe(56,new $e(1,144))),new Ve(14,48,48,22,22,new qe(68,new $e(1,174))),new Ve(15,52,52,24,24,new qe(42,new $e(2,102))),new Ve(16,64,64,14,14,new qe(56,new $e(2,140))),new Ve(17,72,72,16,16,new qe(36,new $e(4,92))),new Ve(18,80,80,18,18,new qe(48,new $e(4,114))),new Ve(19,88,88,20,20,new qe(56,new $e(4,144))),new Ve(20,96,96,22,22,new qe(68,new $e(4,174))),new Ve(21,104,104,24,24,new qe(56,new $e(6,136))),new Ve(22,120,120,18,18,new qe(68,new $e(6,175))),new Ve(23,132,132,20,20,new qe(62,new $e(8,163))),new Ve(24,144,144,22,22,new qe(62,new $e(8,156),new $e(2,155))),new Ve(25,8,18,6,16,new qe(7,new $e(1,5))),new Ve(26,8,32,6,14,new qe(11,new $e(1,10))),new Ve(27,12,26,10,24,new qe(14,new $e(1,16))),new Ve(28,12,36,10,16,new qe(18,new $e(1,22))),new Ve(29,16,36,14,16,new qe(24,new $e(1,32))),new Ve(30,16,48,14,22,new qe(28,new $e(1,49)))]}}Ve.VERSIONS=Ve.buildVersions();class gu{constructor(n){const s=n.getHeight();if(s<8||s>144||s&1)throw new U;this.version=gu.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new Oe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const s=n.getHeight(),o=n.getWidth();return Ve.getVersionForDimensions(s,o)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let s=0,o=4,u=0;const c=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let f=!1,w=!1,x=!1,E=!1;do if(o===c&&u===0&&!f)n[s++]=this.readCorner1(c,d)&255,o-=2,u+=2,f=!0;else if(o===c-2&&u===0&&d&3&&!w)n[s++]=this.readCorner2(c,d)&255,o-=2,u+=2,w=!0;else if(o===c+4&&u===2&&!(d&7)&&!x)n[s++]=this.readCorner3(c,d)&255,o-=2,u+=2,x=!0;else if(o===c-2&&u===0&&(d&7)===4&&!E)n[s++]=this.readCorner4(c,d)&255,o-=2,u+=2,E=!0;else{do o<c&&u>=0&&!this.readMappingMatrix.get(u,o)&&(n[s++]=this.readUtah(o,u,c,d)&255),o-=2,u+=2;while(o>=0&&u<d);o+=1,u+=3;do o>=0&&u<d&&!this.readMappingMatrix.get(u,o)&&(n[s++]=this.readUtah(o,u,c,d)&255),o+=2,u-=2;while(o<c&&u>=0);o+=3,u+=1}while(o<c||u<d);if(s!==this.version.getTotalCodewords())throw new U;return n}readModule(n,s,o,u){return n<0&&(n+=o,s+=4-(o+4&7)),s<0&&(s+=u,n+=4-(u+4&7)),this.readMappingMatrix.set(s,n),this.mappingBitMatrix.get(s,n)}readUtah(n,s,o,u){let c=0;return this.readModule(n-2,s-2,o,u)&&(c|=1),c<<=1,this.readModule(n-2,s-1,o,u)&&(c|=1),c<<=1,this.readModule(n-1,s-2,o,u)&&(c|=1),c<<=1,this.readModule(n-1,s-1,o,u)&&(c|=1),c<<=1,this.readModule(n-1,s,o,u)&&(c|=1),c<<=1,this.readModule(n,s-2,o,u)&&(c|=1),c<<=1,this.readModule(n,s-1,o,u)&&(c|=1),c<<=1,this.readModule(n,s,o,u)&&(c|=1),c}readCorner1(n,s){let o=0;return this.readModule(n-1,0,n,s)&&(o|=1),o<<=1,this.readModule(n-1,1,n,s)&&(o|=1),o<<=1,this.readModule(n-1,2,n,s)&&(o|=1),o<<=1,this.readModule(0,s-2,n,s)&&(o|=1),o<<=1,this.readModule(0,s-1,n,s)&&(o|=1),o<<=1,this.readModule(1,s-1,n,s)&&(o|=1),o<<=1,this.readModule(2,s-1,n,s)&&(o|=1),o<<=1,this.readModule(3,s-1,n,s)&&(o|=1),o}readCorner2(n,s){let o=0;return this.readModule(n-3,0,n,s)&&(o|=1),o<<=1,this.readModule(n-2,0,n,s)&&(o|=1),o<<=1,this.readModule(n-1,0,n,s)&&(o|=1),o<<=1,this.readModule(0,s-4,n,s)&&(o|=1),o<<=1,this.readModule(0,s-3,n,s)&&(o|=1),o<<=1,this.readModule(0,s-2,n,s)&&(o|=1),o<<=1,this.readModule(0,s-1,n,s)&&(o|=1),o<<=1,this.readModule(1,s-1,n,s)&&(o|=1),o}readCorner3(n,s){let o=0;return this.readModule(n-1,0,n,s)&&(o|=1),o<<=1,this.readModule(n-1,s-1,n,s)&&(o|=1),o<<=1,this.readModule(0,s-3,n,s)&&(o|=1),o<<=1,this.readModule(0,s-2,n,s)&&(o|=1),o<<=1,this.readModule(0,s-1,n,s)&&(o|=1),o<<=1,this.readModule(1,s-3,n,s)&&(o|=1),o<<=1,this.readModule(1,s-2,n,s)&&(o|=1),o<<=1,this.readModule(1,s-1,n,s)&&(o|=1),o}readCorner4(n,s){let o=0;return this.readModule(n-3,0,n,s)&&(o|=1),o<<=1,this.readModule(n-2,0,n,s)&&(o|=1),o<<=1,this.readModule(n-1,0,n,s)&&(o|=1),o<<=1,this.readModule(0,s-2,n,s)&&(o|=1),o<<=1,this.readModule(0,s-1,n,s)&&(o|=1),o<<=1,this.readModule(1,s-1,n,s)&&(o|=1),o<<=1,this.readModule(2,s-1,n,s)&&(o|=1),o<<=1,this.readModule(3,s-1,n,s)&&(o|=1),o}extractDataRegion(n){const s=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(n.getHeight()!==s)throw new v("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),d=s/u|0,f=o/c|0,w=d*u,x=f*c,E=new Oe(x,w);for(let A=0;A<d;++A){const I=A*u;for(let D=0;D<f;++D){const F=D*c;for(let z=0;z<u;++z){const H=A*(u+2)+1+z,$=I+z;for(let ie=0;ie<c;++ie){const se=D*(c+2)+1+ie;if(n.get(se,H)){const ee=F+ie;E.set(ee,$)}}}}}return E}}class pu{constructor(n,s){this.numDataCodewords=n,this.codewords=s}static getDataBlocks(n,s){const o=s.getECBlocks();let u=0;const c=o.getECBlocks();for(let z of c)u+=z.getCount();const d=new Array(u);let f=0;for(let z of c)for(let H=0;H<z.getCount();H++){const $=z.getDataCodewords(),ie=o.getECCodewords()+$;d[f++]=new pu($,new Uint8Array(ie))}const x=d[0].codewords.length-o.getECCodewords(),E=x-1;let A=0;for(let z=0;z<E;z++)for(let H=0;H<f;H++)d[H].codewords[z]=n[A++];const I=s.getVersionNumber()===24,D=I?8:f;for(let z=0;z<D;z++)d[z].codewords[x-1]=n[A++];const F=d[0].codewords.length;for(let z=x;z<F;z++)for(let H=0;H<f;H++){const $=I?(H+8)%f:H,ie=I&&$>7?z-1:z;d[$].codewords[ie]=n[A++]}if(A!==n.length)throw new v;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class mu{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new v(""+n);let s=0,o=this.bitOffset,u=this.byteOffset;const c=this.bytes;if(o>0){const d=8-o,f=n<d?n:d,w=d-f,x=255>>8-f<<w;s=(c[u]&x)>>w,n-=f,o+=f,o===8&&(o=0,u++)}if(n>0){for(;n>=8;)s=s<<8|c[u]&255,u++,n-=8;if(n>0){const d=8-n,f=255>>d<<d;s=s<<n|(c[u]&f)>>d,o+=n}}return this.bitOffset=o,this.byteOffset=u,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Lt;(function(_){_[_.PAD_ENCODE=0]="PAD_ENCODE",_[_.ASCII_ENCODE=1]="ASCII_ENCODE",_[_.C40_ENCODE=2]="C40_ENCODE",_[_.TEXT_ENCODE=3]="TEXT_ENCODE",_[_.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",_[_.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",_[_.BASE256_ENCODE=6]="BASE256_ENCODE"})(Lt||(Lt={}));class Vn{static decode(n){const s=new mu(n),o=new ue,u=new ue,c=new Array;let d=Lt.ASCII_ENCODE;do if(d===Lt.ASCII_ENCODE)d=this.decodeAsciiSegment(s,o,u);else{switch(d){case Lt.C40_ENCODE:this.decodeC40Segment(s,o);break;case Lt.TEXT_ENCODE:this.decodeTextSegment(s,o);break;case Lt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,o);break;case Lt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,o);break;case Lt.BASE256_ENCODE:this.decodeBase256Segment(s,o,c);break;default:throw new U}d=Lt.ASCII_ENCODE}while(d!==Lt.PAD_ENCODE&&s.available()>0);return u.length()>0&&o.append(u.toString()),new je(n,o.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(n,s,o){let u=!1;do{let c=n.readBits(8);if(c===0)throw new U;if(c<=128)return u&&(c+=128),s.append(String.fromCharCode(c-1)),Lt.ASCII_ENCODE;if(c===129)return Lt.PAD_ENCODE;if(c<=229){const d=c-130;d<10&&s.append("0"),s.append(""+d)}else switch(c){case 230:return Lt.C40_ENCODE;case 231:return Lt.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:s.append("[)>05"),o.insert(0,"");break;case 237:s.append("[)>06"),o.insert(0,"");break;case 238:return Lt.ANSIX12_ENCODE;case 239:return Lt.TEXT_ENCODE;case 240:return Lt.EDIFACT_ENCODE;case 241:break;default:if(c!==254||n.available()!==0)throw new U;break}}while(n.available()>0);return Lt.ASCII_ENCODE}static decodeC40Segment(n,s){let o=!1;const u=[];let c=0;do{if(n.available()===8)return;const d=n.readBits(8);if(d===254)return;this.parseTwoBytes(d,n.readBits(8),u);for(let f=0;f<3;f++){const w=u[f];switch(c){case 0:if(w<3)c=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const x=this.C40_BASIC_SET_CHARS[w];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x)}else throw new U;break;case 1:o?(s.append(String.fromCharCode(w+128)),o=!1):s.append(String.fromCharCode(w)),c=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const x=this.C40_SHIFT2_SET_CHARS[w];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x)}else switch(w){case 27:s.append("");break;case 30:o=!0;break;default:throw new U}c=0;break;case 3:o?(s.append(String.fromCharCode(w+224)),o=!1):s.append(String.fromCharCode(w+96)),c=0;break;default:throw new U}}}while(n.available()>0)}static decodeTextSegment(n,s){let o=!1,u=[],c=0;do{if(n.available()===8)return;const d=n.readBits(8);if(d===254)return;this.parseTwoBytes(d,n.readBits(8),u);for(let f=0;f<3;f++){const w=u[f];switch(c){case 0:if(w<3)c=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const x=this.TEXT_BASIC_SET_CHARS[w];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x)}else throw new U;break;case 1:o?(s.append(String.fromCharCode(w+128)),o=!1):s.append(String.fromCharCode(w)),c=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const x=this.TEXT_SHIFT2_SET_CHARS[w];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x)}else switch(w){case 27:s.append("");break;case 30:o=!0;break;default:throw new U}c=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const x=this.TEXT_SHIFT3_SET_CHARS[w];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x),c=0}else throw new U;break;default:throw new U}}}while(n.available()>0)}static decodeAnsiX12Segment(n,s){const o=[];do{if(n.available()===8)return;const u=n.readBits(8);if(u===254)return;this.parseTwoBytes(u,n.readBits(8),o);for(let c=0;c<3;c++){const d=o[c];switch(d){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(d<14)s.append(String.fromCharCode(d+44));else if(d<40)s.append(String.fromCharCode(d+51));else throw new U;break}}}while(n.available()>0)}static parseTwoBytes(n,s,o){let u=(n<<8)+s-1,c=Math.floor(u/1600);o[0]=c,u-=c*1600,c=Math.floor(u/40),o[1]=c,o[2]=u-c*40}static decodeEdifactSegment(n,s){do{if(n.available()<=16)return;for(let o=0;o<4;o++){let u=n.readBits(6);if(u===31){const c=8-n.getBitOffset();c!==8&&n.readBits(c);return}u&32||(u|=64),s.append(String.fromCharCode(u))}}while(n.available()>0)}static decodeBase256Segment(n,s,o){let u=1+n.getByteOffset();const c=this.unrandomize255State(n.readBits(8),u++);let d;if(c===0?d=n.available()/8|0:c<250?d=c:d=250*(c-249)+this.unrandomize255State(n.readBits(8),u++),d<0)throw new U;const f=new Uint8Array(d);for(let w=0;w<d;w++){if(n.available()<8)throw new U;f[w]=this.unrandomize255State(n.readBits(8),u++)}o.push(f);try{s.append(J.decode(f,Q.ISO88591))}catch(w){throw new Pe("Platform does not support required encoding: "+w.message)}}static unrandomize255State(n,s){const o=149*s%255+1,u=n-o;return u>=0?u:u+256}}Vn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Vn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Vn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Vn.TEXT_SHIFT2_SET_CHARS=Vn.C40_SHIFT2_SET_CHARS,Vn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class s2{constructor(){this.rsDecoder=new ke(Ie.DATA_MATRIX_FIELD_256)}decode(n){const s=new gu(n),o=s.getVersion(),u=s.readCodewords(),c=pu.getDataBlocks(u,o);let d=0;for(let x of c)d+=x.getNumDataCodewords();const f=new Uint8Array(d),w=c.length;for(let x=0;x<w;x++){const E=c[x],A=E.getCodewords(),I=E.getNumDataCodewords();this.correctErrors(A,I);for(let D=0;D<I;D++)f[D*w+x]=A[D]}return Vn.decode(f)}correctErrors(n,s){const o=new Int32Array(n);try{this.rsDecoder.decode(o,n.length-s)}catch{throw new T}for(let u=0;u<s;u++)n[u]=o[u]}}class Nt{constructor(n){this.image=n,this.rectangleDetector=new ot(this.image)}detect(){const n=this.rectangleDetector.detect();let s=this.detectSolid1(n);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new K;s=this.shiftToModuleCenter(s);const o=s[0],u=s[1],c=s[2],d=s[3];let f=this.transitionsBetween(o,d)+1,w=this.transitionsBetween(c,d)+1;(f&1)===1&&(f+=1),(w&1)===1&&(w+=1),4*f<7*w&&4*w<7*f&&(f=w=Math.max(f,w));let x=Nt.sampleGrid(this.image,o,u,c,d,f,w);return new ur(x,[o,u,c,d])}static shiftPoint(n,s,o){let u=(s.getX()-n.getX())/(o+1),c=(s.getY()-n.getY())/(o+1);return new de(n.getX()+u,n.getY()+c)}static moveAway(n,s,o){let u=n.getX(),c=n.getY();return u<s?u-=1:u+=1,c<o?c-=1:c+=1,new de(u,c)}detectSolid1(n){let s=n[0],o=n[1],u=n[3],c=n[2],d=this.transitionsBetween(s,o),f=this.transitionsBetween(o,u),w=this.transitionsBetween(u,c),x=this.transitionsBetween(c,s),E=d,A=[c,s,o,u];return E>f&&(E=f,A[0]=s,A[1]=o,A[2]=u,A[3]=c),E>w&&(E=w,A[0]=o,A[1]=u,A[2]=c,A[3]=s),E>x&&(A[0]=u,A[1]=c,A[2]=s,A[3]=o),A}detectSolid2(n){let s=n[0],o=n[1],u=n[2],c=n[3],d=this.transitionsBetween(s,c),f=Nt.shiftPoint(o,u,(d+1)*4),w=Nt.shiftPoint(u,o,(d+1)*4),x=this.transitionsBetween(f,s),E=this.transitionsBetween(w,c);return x<E?(n[0]=s,n[1]=o,n[2]=u,n[3]=c):(n[0]=o,n[1]=u,n[2]=c,n[3]=s),n}correctTopRight(n){let s=n[0],o=n[1],u=n[2],c=n[3],d=this.transitionsBetween(s,c),f=this.transitionsBetween(o,c),w=Nt.shiftPoint(s,o,(f+1)*4),x=Nt.shiftPoint(u,o,(d+1)*4);d=this.transitionsBetween(w,c),f=this.transitionsBetween(x,c);let E=new de(c.getX()+(u.getX()-o.getX())/(d+1),c.getY()+(u.getY()-o.getY())/(d+1)),A=new de(c.getX()+(s.getX()-o.getX())/(f+1),c.getY()+(s.getY()-o.getY())/(f+1));if(!this.isValid(E))return this.isValid(A)?A:null;if(!this.isValid(A))return E;let I=this.transitionsBetween(w,E)+this.transitionsBetween(x,E),D=this.transitionsBetween(w,A)+this.transitionsBetween(x,A);return I>D?E:A}shiftToModuleCenter(n){let s=n[0],o=n[1],u=n[2],c=n[3],d=this.transitionsBetween(s,c)+1,f=this.transitionsBetween(u,c)+1,w=Nt.shiftPoint(s,o,f*4),x=Nt.shiftPoint(u,o,d*4);d=this.transitionsBetween(w,c)+1,f=this.transitionsBetween(x,c)+1,(d&1)===1&&(d+=1),(f&1)===1&&(f+=1);let E=(s.getX()+o.getX()+u.getX()+c.getX())/4,A=(s.getY()+o.getY()+u.getY()+c.getY())/4;s=Nt.moveAway(s,E,A),o=Nt.moveAway(o,E,A),u=Nt.moveAway(u,E,A),c=Nt.moveAway(c,E,A);let I,D;return w=Nt.shiftPoint(s,o,f*4),w=Nt.shiftPoint(w,c,d*4),I=Nt.shiftPoint(o,s,f*4),I=Nt.shiftPoint(I,u,d*4),x=Nt.shiftPoint(u,c,f*4),x=Nt.shiftPoint(x,o,d*4),D=Nt.shiftPoint(c,u,f*4),D=Nt.shiftPoint(D,s,d*4),[w,I,x,D]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,s,o,u,c,d,f){return Vt.getInstance().sampleGrid(n,d,f,.5,.5,d-.5,.5,d-.5,f-.5,.5,f-.5,s.getX(),s.getY(),c.getX(),c.getY(),u.getX(),u.getY(),o.getX(),o.getY())}transitionsBetween(n,s){let o=Math.trunc(n.getX()),u=Math.trunc(n.getY()),c=Math.trunc(s.getX()),d=Math.trunc(s.getY()),f=Math.abs(d-u)>Math.abs(c-o);if(f){let z=o;o=u,u=z,z=c,c=d,d=z}let w=Math.abs(c-o),x=Math.abs(d-u),E=-w/2,A=u<d?1:-1,I=o<c?1:-1,D=0,F=this.image.get(f?u:o,f?o:u);for(let z=o,H=u;z!==c;z+=I){let $=this.image.get(f?H:z,f?z:H);if($!==F&&(D++,F=$),E+=x,E>0){if(H===d)break;H+=A,E-=w}}return D}}class Hn{constructor(){this.decoder=new s2}decode(n,s=null){let o,u;if(s!=null&&s.has(G.PURE_BARCODE)){const x=Hn.extractPureBits(n.getBlackMatrix());o=this.decoder.decode(x),u=Hn.NO_POINTS}else{const x=new Nt(n.getBlackMatrix()).detect();o=this.decoder.decode(x.getBits()),u=x.getPoints()}const c=o.getRawBytes(),d=new Re(o.getText(),c,8*c.length,u,le.DATA_MATRIX,L.currentTimeMillis()),f=o.getByteSegments();f!=null&&d.putMetadata(_e.BYTE_SEGMENTS,f);const w=o.getECLevel();return w!=null&&d.putMetadata(_e.ERROR_CORRECTION_LEVEL,w),d}reset(){}static extractPureBits(n){const s=n.getTopLeftOnBit(),o=n.getBottomRightOnBit();if(s==null||o==null)throw new K;const u=this.moduleSize(s,n);let c=s[1];const d=o[1];let f=s[0];const x=(o[0]-f+1)/u,E=(d-c+1)/u;if(x<=0||E<=0)throw new K;const A=u/2;c+=A,f+=A;const I=new Oe(x,E);for(let D=0;D<E;D++){const F=c+D*u;for(let z=0;z<x;z++)n.get(f+z*u,F)&&I.set(z,D)}return I}static moduleSize(n,s){const o=s.getWidth();let u=n[0];const c=n[1];for(;u<o&&s.get(u,c);)u++;if(u===o)throw new K;const d=u-n[0];if(d===0)throw new K;return d}}Hn.NO_POINTS=[];class o2 extends he{constructor(n=500){super(new Hn,n)}}var rs;(function(_){_[_.L=0]="L",_[_.M=1]="M",_[_.Q=2]="Q",_[_.H=3]="H"})(rs||(rs={}));class lt{constructor(n,s,o){this.value=n,this.stringValue=s,this.bits=o,lt.FOR_BITS.set(o,this),lt.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return lt.L;case"M":return lt.M;case"Q":return lt.Q;case"H":return lt.H;default:throw new y(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof lt))return!1;const s=n;return this.value===s.value}static forBits(n){if(n<0||n>=lt.FOR_BITS.size)throw new v;return lt.FOR_BITS.get(n)}}lt.FOR_BITS=new Map,lt.FOR_VALUE=new Map,lt.L=new lt(rs.L,"L",1),lt.M=new lt(rs.M,"M",0),lt.Q=new lt(rs.Q,"Q",3),lt.H=new lt(rs.H,"H",2);class ir{constructor(n){this.errorCorrectionLevel=lt.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,s){return S.bitCount(n^s)}static decodeFormatInformation(n,s){const o=ir.doDecodeFormatInformation(n,s);return o!==null?o:ir.doDecodeFormatInformation(n^ir.FORMAT_INFO_MASK_QR,s^ir.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,s){let o=Number.MAX_SAFE_INTEGER,u=0;for(const c of ir.FORMAT_INFO_DECODE_LOOKUP){const d=c[0];if(d===n||d===s)return new ir(c[1]);let f=ir.numBitsDiffering(n,d);f<o&&(u=c[1],o=f),n!==s&&(f=ir.numBitsDiffering(s,d),f<o&&(u=c[1],o=f))}return o<=3?new ir(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof ir))return!1;const s=n;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}ir.FORMAT_INFO_MASK_QR=21522,ir.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class W{constructor(n,...s){this.ecCodewordsPerBlock=n,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const s=this.ecBlocks;for(const o of s)n+=o.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class k{constructor(n,s){this.count=n,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ee{constructor(n,s,...o){this.versionNumber=n,this.alignmentPatternCenters=s,this.ecBlocks=o;let u=0;const c=o[0].getECCodewordsPerBlock(),d=o[0].getECBlocks();for(const f of d)u+=f.getCount()*(f.getDataCodewords()+c);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new U;try{return this.getVersionForNumber((n-17)/4)}catch{throw new U}}static getVersionForNumber(n){if(n<1||n>40)throw new v;return Ee.VERSIONS[n-1]}static decodeVersionInformation(n){let s=Number.MAX_SAFE_INTEGER,o=0;for(let u=0;u<Ee.VERSION_DECODE_INFO.length;u++){const c=Ee.VERSION_DECODE_INFO[u];if(c===n)return Ee.getVersionForNumber(u+7);const d=ir.numBitsDiffering(n,c);d<s&&(o=u+7,s=d)}return s<=3?Ee.getVersionForNumber(o):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),s=new Oe(n);s.setRegion(0,0,9,9),s.setRegion(n-8,0,8,9),s.setRegion(0,n-8,9,8);const o=this.alignmentPatternCenters.length;for(let u=0;u<o;u++){const c=this.alignmentPatternCenters[u]-2;for(let d=0;d<o;d++)u===0&&(d===0||d===o-1)||u===o-1&&d===0||s.setRegion(this.alignmentPatternCenters[d]-2,c,5,5)}return s.setRegion(6,9,1,n-17),s.setRegion(9,6,n-17,1),this.versionNumber>6&&(s.setRegion(n-11,0,3,6),s.setRegion(0,n-11,6,3)),s}toString(){return""+this.versionNumber}}Ee.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ee.VERSIONS=[new Ee(1,new Int32Array(0),new W(7,new k(1,19)),new W(10,new k(1,16)),new W(13,new k(1,13)),new W(17,new k(1,9))),new Ee(2,Int32Array.from([6,18]),new W(10,new k(1,34)),new W(16,new k(1,28)),new W(22,new k(1,22)),new W(28,new k(1,16))),new Ee(3,Int32Array.from([6,22]),new W(15,new k(1,55)),new W(26,new k(1,44)),new W(18,new k(2,17)),new W(22,new k(2,13))),new Ee(4,Int32Array.from([6,26]),new W(20,new k(1,80)),new W(18,new k(2,32)),new W(26,new k(2,24)),new W(16,new k(4,9))),new Ee(5,Int32Array.from([6,30]),new W(26,new k(1,108)),new W(24,new k(2,43)),new W(18,new k(2,15),new k(2,16)),new W(22,new k(2,11),new k(2,12))),new Ee(6,Int32Array.from([6,34]),new W(18,new k(2,68)),new W(16,new k(4,27)),new W(24,new k(4,19)),new W(28,new k(4,15))),new Ee(7,Int32Array.from([6,22,38]),new W(20,new k(2,78)),new W(18,new k(4,31)),new W(18,new k(2,14),new k(4,15)),new W(26,new k(4,13),new k(1,14))),new Ee(8,Int32Array.from([6,24,42]),new W(24,new k(2,97)),new W(22,new k(2,38),new k(2,39)),new W(22,new k(4,18),new k(2,19)),new W(26,new k(4,14),new k(2,15))),new Ee(9,Int32Array.from([6,26,46]),new W(30,new k(2,116)),new W(22,new k(3,36),new k(2,37)),new W(20,new k(4,16),new k(4,17)),new W(24,new k(4,12),new k(4,13))),new Ee(10,Int32Array.from([6,28,50]),new W(18,new k(2,68),new k(2,69)),new W(26,new k(4,43),new k(1,44)),new W(24,new k(6,19),new k(2,20)),new W(28,new k(6,15),new k(2,16))),new Ee(11,Int32Array.from([6,30,54]),new W(20,new k(4,81)),new W(30,new k(1,50),new k(4,51)),new W(28,new k(4,22),new k(4,23)),new W(24,new k(3,12),new k(8,13))),new Ee(12,Int32Array.from([6,32,58]),new W(24,new k(2,92),new k(2,93)),new W(22,new k(6,36),new k(2,37)),new W(26,new k(4,20),new k(6,21)),new W(28,new k(7,14),new k(4,15))),new Ee(13,Int32Array.from([6,34,62]),new W(26,new k(4,107)),new W(22,new k(8,37),new k(1,38)),new W(24,new k(8,20),new k(4,21)),new W(22,new k(12,11),new k(4,12))),new Ee(14,Int32Array.from([6,26,46,66]),new W(30,new k(3,115),new k(1,116)),new W(24,new k(4,40),new k(5,41)),new W(20,new k(11,16),new k(5,17)),new W(24,new k(11,12),new k(5,13))),new Ee(15,Int32Array.from([6,26,48,70]),new W(22,new k(5,87),new k(1,88)),new W(24,new k(5,41),new k(5,42)),new W(30,new k(5,24),new k(7,25)),new W(24,new k(11,12),new k(7,13))),new Ee(16,Int32Array.from([6,26,50,74]),new W(24,new k(5,98),new k(1,99)),new W(28,new k(7,45),new k(3,46)),new W(24,new k(15,19),new k(2,20)),new W(30,new k(3,15),new k(13,16))),new Ee(17,Int32Array.from([6,30,54,78]),new W(28,new k(1,107),new k(5,108)),new W(28,new k(10,46),new k(1,47)),new W(28,new k(1,22),new k(15,23)),new W(28,new k(2,14),new k(17,15))),new Ee(18,Int32Array.from([6,30,56,82]),new W(30,new k(5,120),new k(1,121)),new W(26,new k(9,43),new k(4,44)),new W(28,new k(17,22),new k(1,23)),new W(28,new k(2,14),new k(19,15))),new Ee(19,Int32Array.from([6,30,58,86]),new W(28,new k(3,113),new k(4,114)),new W(26,new k(3,44),new k(11,45)),new W(26,new k(17,21),new k(4,22)),new W(26,new k(9,13),new k(16,14))),new Ee(20,Int32Array.from([6,34,62,90]),new W(28,new k(3,107),new k(5,108)),new W(26,new k(3,41),new k(13,42)),new W(30,new k(15,24),new k(5,25)),new W(28,new k(15,15),new k(10,16))),new Ee(21,Int32Array.from([6,28,50,72,94]),new W(28,new k(4,116),new k(4,117)),new W(26,new k(17,42)),new W(28,new k(17,22),new k(6,23)),new W(30,new k(19,16),new k(6,17))),new Ee(22,Int32Array.from([6,26,50,74,98]),new W(28,new k(2,111),new k(7,112)),new W(28,new k(17,46)),new W(30,new k(7,24),new k(16,25)),new W(24,new k(34,13))),new Ee(23,Int32Array.from([6,30,54,78,102]),new W(30,new k(4,121),new k(5,122)),new W(28,new k(4,47),new k(14,48)),new W(30,new k(11,24),new k(14,25)),new W(30,new k(16,15),new k(14,16))),new Ee(24,Int32Array.from([6,28,54,80,106]),new W(30,new k(6,117),new k(4,118)),new W(28,new k(6,45),new k(14,46)),new W(30,new k(11,24),new k(16,25)),new W(30,new k(30,16),new k(2,17))),new Ee(25,Int32Array.from([6,32,58,84,110]),new W(26,new k(8,106),new k(4,107)),new W(28,new k(8,47),new k(13,48)),new W(30,new k(7,24),new k(22,25)),new W(30,new k(22,15),new k(13,16))),new Ee(26,Int32Array.from([6,30,58,86,114]),new W(28,new k(10,114),new k(2,115)),new W(28,new k(19,46),new k(4,47)),new W(28,new k(28,22),new k(6,23)),new W(30,new k(33,16),new k(4,17))),new Ee(27,Int32Array.from([6,34,62,90,118]),new W(30,new k(8,122),new k(4,123)),new W(28,new k(22,45),new k(3,46)),new W(30,new k(8,23),new k(26,24)),new W(30,new k(12,15),new k(28,16))),new Ee(28,Int32Array.from([6,26,50,74,98,122]),new W(30,new k(3,117),new k(10,118)),new W(28,new k(3,45),new k(23,46)),new W(30,new k(4,24),new k(31,25)),new W(30,new k(11,15),new k(31,16))),new Ee(29,Int32Array.from([6,30,54,78,102,126]),new W(30,new k(7,116),new k(7,117)),new W(28,new k(21,45),new k(7,46)),new W(30,new k(1,23),new k(37,24)),new W(30,new k(19,15),new k(26,16))),new Ee(30,Int32Array.from([6,26,52,78,104,130]),new W(30,new k(5,115),new k(10,116)),new W(28,new k(19,47),new k(10,48)),new W(30,new k(15,24),new k(25,25)),new W(30,new k(23,15),new k(25,16))),new Ee(31,Int32Array.from([6,30,56,82,108,134]),new W(30,new k(13,115),new k(3,116)),new W(28,new k(2,46),new k(29,47)),new W(30,new k(42,24),new k(1,25)),new W(30,new k(23,15),new k(28,16))),new Ee(32,Int32Array.from([6,34,60,86,112,138]),new W(30,new k(17,115)),new W(28,new k(10,46),new k(23,47)),new W(30,new k(10,24),new k(35,25)),new W(30,new k(19,15),new k(35,16))),new Ee(33,Int32Array.from([6,30,58,86,114,142]),new W(30,new k(17,115),new k(1,116)),new W(28,new k(14,46),new k(21,47)),new W(30,new k(29,24),new k(19,25)),new W(30,new k(11,15),new k(46,16))),new Ee(34,Int32Array.from([6,34,62,90,118,146]),new W(30,new k(13,115),new k(6,116)),new W(28,new k(14,46),new k(23,47)),new W(30,new k(44,24),new k(7,25)),new W(30,new k(59,16),new k(1,17))),new Ee(35,Int32Array.from([6,30,54,78,102,126,150]),new W(30,new k(12,121),new k(7,122)),new W(28,new k(12,47),new k(26,48)),new W(30,new k(39,24),new k(14,25)),new W(30,new k(22,15),new k(41,16))),new Ee(36,Int32Array.from([6,24,50,76,102,128,154]),new W(30,new k(6,121),new k(14,122)),new W(28,new k(6,47),new k(34,48)),new W(30,new k(46,24),new k(10,25)),new W(30,new k(2,15),new k(64,16))),new Ee(37,Int32Array.from([6,28,54,80,106,132,158]),new W(30,new k(17,122),new k(4,123)),new W(28,new k(29,46),new k(14,47)),new W(30,new k(49,24),new k(10,25)),new W(30,new k(24,15),new k(46,16))),new Ee(38,Int32Array.from([6,32,58,84,110,136,162]),new W(30,new k(4,122),new k(18,123)),new W(28,new k(13,46),new k(32,47)),new W(30,new k(48,24),new k(14,25)),new W(30,new k(42,15),new k(32,16))),new Ee(39,Int32Array.from([6,26,54,82,110,138,166]),new W(30,new k(20,117),new k(4,118)),new W(28,new k(40,47),new k(7,48)),new W(30,new k(43,24),new k(22,25)),new W(30,new k(10,15),new k(67,16))),new Ee(40,Int32Array.from([6,30,58,86,114,142,170]),new W(30,new k(19,118),new k(6,119)),new W(28,new k(18,47),new k(31,48)),new W(30,new k(34,24),new k(34,25)),new W(30,new k(20,15),new k(61,16)))];var Ht;(function(_){_[_.DATA_MASK_000=0]="DATA_MASK_000",_[_.DATA_MASK_001=1]="DATA_MASK_001",_[_.DATA_MASK_010=2]="DATA_MASK_010",_[_.DATA_MASK_011=3]="DATA_MASK_011",_[_.DATA_MASK_100=4]="DATA_MASK_100",_[_.DATA_MASK_101=5]="DATA_MASK_101",_[_.DATA_MASK_110=6]="DATA_MASK_110",_[_.DATA_MASK_111=7]="DATA_MASK_111"})(Ht||(Ht={}));class zr{constructor(n,s){this.value=n,this.isMasked=s}unmaskBitMatrix(n,s){for(let o=0;o<s;o++)for(let u=0;u<s;u++)this.isMasked(o,u)&&n.flip(u,o)}}zr.values=new Map([[Ht.DATA_MASK_000,new zr(Ht.DATA_MASK_000,(_,n)=>(_+n&1)===0)],[Ht.DATA_MASK_001,new zr(Ht.DATA_MASK_001,(_,n)=>(_&1)===0)],[Ht.DATA_MASK_010,new zr(Ht.DATA_MASK_010,(_,n)=>n%3===0)],[Ht.DATA_MASK_011,new zr(Ht.DATA_MASK_011,(_,n)=>(_+n)%3===0)],[Ht.DATA_MASK_100,new zr(Ht.DATA_MASK_100,(_,n)=>(Math.floor(_/2)+Math.floor(n/3)&1)===0)],[Ht.DATA_MASK_101,new zr(Ht.DATA_MASK_101,(_,n)=>_*n%6===0)],[Ht.DATA_MASK_110,new zr(Ht.DATA_MASK_110,(_,n)=>_*n%6<3)],[Ht.DATA_MASK_111,new zr(Ht.DATA_MASK_111,(_,n)=>(_+n+_*n%3&1)===0)]]);class a2{constructor(n){const s=n.getHeight();if(s<21||(s&3)!==1)throw new U;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let c=0;c<6;c++)n=this.copyBit(c,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let c=5;c>=0;c--)n=this.copyBit(8,c,n);const s=this.bitMatrix.getHeight();let o=0;const u=s-7;for(let c=s-1;c>=u;c--)o=this.copyBit(8,c,o);for(let c=s-8;c<s;c++)o=this.copyBit(c,8,o);if(this.parsedFormatInfo=ir.decodeFormatInformation(n,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new U}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),s=Math.floor((n-17)/4);if(s<=6)return Ee.getVersionForNumber(s);let o=0;const u=n-11;for(let d=5;d>=0;d--)for(let f=n-9;f>=u;f--)o=this.copyBit(f,d,o);let c=Ee.decodeVersionInformation(o);if(c!==null&&c.getDimensionForVersion()===n)return this.parsedVersion=c,c;o=0;for(let d=5;d>=0;d--)for(let f=n-9;f>=u;f--)o=this.copyBit(d,f,o);if(c=Ee.decodeVersionInformation(o),c!==null&&c.getDimensionForVersion()===n)return this.parsedVersion=c,c;throw new U}copyBit(n,s,o){return(this.isMirror?this.bitMatrix.get(s,n):this.bitMatrix.get(n,s))?o<<1|1:o<<1}readCodewords(){const n=this.readFormatInformation(),s=this.readVersion(),o=zr.values.get(n.getDataMask()),u=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,u);const c=s.buildFunctionPattern();let d=!0;const f=new Uint8Array(s.getTotalCodewords());let w=0,x=0,E=0;for(let A=u-1;A>0;A-=2){A===6&&A--;for(let I=0;I<u;I++){const D=d?u-1-I:I;for(let F=0;F<2;F++)c.get(A-F,D)||(E++,x<<=1,this.bitMatrix.get(A-F,D)&&(x|=1),E===8&&(f[w++]=x,E=0,x=0))}d=!d}if(w!==s.getTotalCodewords())throw new U;return f}remask(){if(this.parsedFormatInfo===null)return;const n=zr.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,s)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let s=0,o=n.getWidth();s<o;s++)for(let u=s+1,c=n.getHeight();u<c;u++)n.get(s,u)!==n.get(u,s)&&(n.flip(u,s),n.flip(s,u))}}class wu{constructor(n,s){this.numDataCodewords=n,this.codewords=s}static getDataBlocks(n,s,o){if(n.length!==s.getTotalCodewords())throw new v;const u=s.getECBlocksForLevel(o);let c=0;const d=u.getECBlocks();for(const F of d)c+=F.getCount();const f=new Array(c);let w=0;for(const F of d)for(let z=0;z<F.getCount();z++){const H=F.getDataCodewords(),$=u.getECCodewordsPerBlock()+H;f[w++]=new wu(H,new Uint8Array($))}const x=f[0].codewords.length;let E=f.length-1;for(;E>=0&&f[E].codewords.length!==x;)E--;E++;const A=x-u.getECCodewordsPerBlock();let I=0;for(let F=0;F<A;F++)for(let z=0;z<w;z++)f[z].codewords[F]=n[I++];for(let F=E;F<w;F++)f[F].codewords[A]=n[I++];const D=f[0].codewords.length;for(let F=A;F<D;F++)for(let z=0;z<w;z++){const H=z<E?F:F+1;f[z].codewords[H]=n[I++]}return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Vr;(function(_){_[_.TERMINATOR=0]="TERMINATOR",_[_.NUMERIC=1]="NUMERIC",_[_.ALPHANUMERIC=2]="ALPHANUMERIC",_[_.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",_[_.BYTE=4]="BYTE",_[_.ECI=5]="ECI",_[_.KANJI=6]="KANJI",_[_.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",_[_.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",_[_.HANZI=9]="HANZI"})(Vr||(Vr={}));class Ae{constructor(n,s,o,u){this.value=n,this.stringValue=s,this.characterCountBitsForVersions=o,this.bits=u,Ae.FOR_BITS.set(u,this),Ae.FOR_VALUE.set(n,this)}static forBits(n){const s=Ae.FOR_BITS.get(n);if(s===void 0)throw new v;return s}getCharacterCountBits(n){const s=n.getVersionNumber();let o;return s<=9?o=0:s<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof Ae))return!1;const s=n;return this.value===s.value}toString(){return this.stringValue}}Ae.FOR_BITS=new Map,Ae.FOR_VALUE=new Map,Ae.TERMINATOR=new Ae(Vr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ae.NUMERIC=new Ae(Vr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ae.ALPHANUMERIC=new Ae(Vr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ae.STRUCTURED_APPEND=new Ae(Vr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ae.BYTE=new Ae(Vr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ae.ECI=new Ae(Vr.ECI,"ECI",Int32Array.from([0,0,0]),7),Ae.KANJI=new Ae(Vr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ae.FNC1_FIRST_POSITION=new Ae(Vr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ae.FNC1_SECOND_POSITION=new Ae(Vr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ae.HANZI=new Ae(Vr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class xt{static decode(n,s,o,u){const c=new mu(n);let d=new ue;const f=new Array;let w=-1,x=-1;try{let E=null,A=!1,I;do{if(c.available()<4)I=Ae.TERMINATOR;else{const D=c.readBits(4);I=Ae.forBits(D)}switch(I){case Ae.TERMINATOR:break;case Ae.FNC1_FIRST_POSITION:case Ae.FNC1_SECOND_POSITION:A=!0;break;case Ae.STRUCTURED_APPEND:if(c.available()<16)throw new U;w=c.readBits(8),x=c.readBits(8);break;case Ae.ECI:const D=xt.parseECIValue(c);if(E=N.getCharacterSetECIByValue(D),E===null)throw new U;break;case Ae.HANZI:const F=c.readBits(4),z=c.readBits(I.getCharacterCountBits(s));F===xt.GB2312_SUBSET&&xt.decodeHanziSegment(c,d,z);break;default:const H=c.readBits(I.getCharacterCountBits(s));switch(I){case Ae.NUMERIC:xt.decodeNumericSegment(c,d,H);break;case Ae.ALPHANUMERIC:xt.decodeAlphanumericSegment(c,d,H,A);break;case Ae.BYTE:xt.decodeByteSegment(c,d,H,E,f,u);break;case Ae.KANJI:xt.decodeKanjiSegment(c,d,H);break;default:throw new U}break}}while(I!==Ae.TERMINATOR)}catch{throw new U}return new je(n,d.toString(),f.length===0?null:f,o===null?null:o.toString(),w,x)}static decodeHanziSegment(n,s,o){if(o*13>n.available())throw new U;const u=new Uint8Array(2*o);let c=0;for(;o>0;){const d=n.readBits(13);let f=d/96<<8&4294967295|d%96;f<959?f+=41377:f+=42657,u[c]=f>>8&255,u[c+1]=f&255,c+=2,o--}try{s.append(J.decode(u,Q.GB2312))}catch(d){throw new U(d)}}static decodeKanjiSegment(n,s,o){if(o*13>n.available())throw new U;const u=new Uint8Array(2*o);let c=0;for(;o>0;){const d=n.readBits(13);let f=d/192<<8&4294967295|d%192;f<7936?f+=33088:f+=49472,u[c]=f>>8,u[c+1]=f,c+=2,o--}try{s.append(J.decode(u,Q.SHIFT_JIS))}catch(d){throw new U(d)}}static decodeByteSegment(n,s,o,u,c,d){if(8*o>n.available())throw new U;const f=new Uint8Array(o);for(let x=0;x<o;x++)f[x]=n.readBits(8);let w;u===null?w=Q.guessEncoding(f,d):w=u.getName();try{s.append(J.decode(f,w))}catch(x){throw new U(x)}c.push(f)}static toAlphaNumericChar(n){if(n>=xt.ALPHANUMERIC_CHARS.length)throw new U;return xt.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,s,o,u){const c=s.length();for(;o>1;){if(n.available()<11)throw new U;const d=n.readBits(11);s.append(xt.toAlphaNumericChar(Math.floor(d/45))),s.append(xt.toAlphaNumericChar(d%45)),o-=2}if(o===1){if(n.available()<6)throw new U;s.append(xt.toAlphaNumericChar(n.readBits(6)))}if(u)for(let d=c;d<s.length();d++)s.charAt(d)==="%"&&(d<s.length()-1&&s.charAt(d+1)==="%"?s.deleteCharAt(d+1):s.setCharAt(d,""))}static decodeNumericSegment(n,s,o){for(;o>=3;){if(n.available()<10)throw new U;const u=n.readBits(10);if(u>=1e3)throw new U;s.append(xt.toAlphaNumericChar(Math.floor(u/100))),s.append(xt.toAlphaNumericChar(Math.floor(u/10)%10)),s.append(xt.toAlphaNumericChar(u%10)),o-=3}if(o===2){if(n.available()<7)throw new U;const u=n.readBits(7);if(u>=100)throw new U;s.append(xt.toAlphaNumericChar(Math.floor(u/10))),s.append(xt.toAlphaNumericChar(u%10))}else if(o===1){if(n.available()<4)throw new U;const u=n.readBits(4);if(u>=10)throw new U;s.append(xt.toAlphaNumericChar(u))}}static parseECIValue(n){const s=n.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const o=n.readBits(8);return(s&63)<<8&4294967295|o}if((s&224)===192){const o=n.readBits(16);return(s&31)<<16&4294967295|o}throw new U}}xt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",xt.GB2312_SUBSET=1;class Fh{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const s=n[0];n[0]=n[2],n[2]=s}}class l2{constructor(){this.rsDecoder=new ke(Ie.QR_CODE_FIELD_256)}decodeBooleanArray(n,s){return this.decodeBitMatrix(Oe.parseFromBooleanArray(n),s)}decodeBitMatrix(n,s){const o=new a2(n);let u=null;try{return this.decodeBitMatrixParser(o,s)}catch(c){u=c}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const c=this.decodeBitMatrixParser(o,s);return c.setOther(new Fh(!0)),c}catch(c){throw u!==null?u:c}}decodeBitMatrixParser(n,s){const o=n.readVersion(),u=n.readFormatInformation().getErrorCorrectionLevel(),c=n.readCodewords(),d=wu.getDataBlocks(c,o,u);let f=0;for(const E of d)f+=E.getNumDataCodewords();const w=new Uint8Array(f);let x=0;for(const E of d){const A=E.getCodewords(),I=E.getNumDataCodewords();this.correctErrors(A,I);for(let D=0;D<I;D++)w[x++]=A[D]}return xt.decode(w,o,u,s)}correctErrors(n,s){const o=new Int32Array(n);try{this.rsDecoder.decode(o,n.length-s)}catch{throw new T}for(let u=0;u<s;u++)n[u]=o[u]}}class xu extends de{constructor(n,s,o){super(n,s),this.estimatedModuleSize=o}aboutEquals(n,s,o){if(Math.abs(s-this.getY())<=n&&Math.abs(o-this.getX())<=n){const u=Math.abs(n-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(n,s,o){const u=(this.getX()+s)/2,c=(this.getY()+n)/2,d=(this.estimatedModuleSize+o)/2;return new xu(u,c,d)}}class pa{constructor(n,s,o,u,c,d,f){this.image=n,this.startX=s,this.startY=o,this.width=u,this.height=c,this.moduleSize=d,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,s=this.height,o=this.width,u=n+o,c=this.startY+s/2,d=new Int32Array(3),f=this.image;for(let w=0;w<s;w++){const x=c+(w&1?-Math.floor((w+1)/2):Math.floor((w+1)/2));d[0]=0,d[1]=0,d[2]=0;let E=n;for(;E<u&&!f.get(E,x);)E++;let A=0;for(;E<u;){if(f.get(E,x))if(A===1)d[1]++;else if(A===2){if(this.foundPatternCross(d)){const I=this.handlePossibleCenter(d,x,E);if(I!==null)return I}d[0]=d[2],d[1]=1,d[2]=0,A=1}else d[++A]++;else A===1&&A++,d[A]++;E++}if(this.foundPatternCross(d)){const I=this.handlePossibleCenter(d,x,u);if(I!==null)return I}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new K}static centerFromEnd(n,s){return s-n[2]-n[1]/2}foundPatternCross(n){const s=this.moduleSize,o=s/2;for(let u=0;u<3;u++)if(Math.abs(s-n[u])>=o)return!1;return!0}crossCheckVertical(n,s,o,u){const c=this.image,d=c.getHeight(),f=this.crossCheckStateCount;f[0]=0,f[1]=0,f[2]=0;let w=n;for(;w>=0&&c.get(s,w)&&f[1]<=o;)f[1]++,w--;if(w<0||f[1]>o)return NaN;for(;w>=0&&!c.get(s,w)&&f[0]<=o;)f[0]++,w--;if(f[0]>o)return NaN;for(w=n+1;w<d&&c.get(s,w)&&f[1]<=o;)f[1]++,w++;if(w===d||f[1]>o)return NaN;for(;w<d&&!c.get(s,w)&&f[2]<=o;)f[2]++,w++;if(f[2]>o)return NaN;const x=f[0]+f[1]+f[2];return 5*Math.abs(x-u)>=2*u?NaN:this.foundPatternCross(f)?pa.centerFromEnd(f,w):NaN}handlePossibleCenter(n,s,o){const u=n[0]+n[1]+n[2],c=pa.centerFromEnd(n,o),d=this.crossCheckVertical(s,c,2*n[1],u);if(!isNaN(d)){const f=(n[0]+n[1]+n[2])/3;for(const x of this.possibleCenters)if(x.aboutEquals(f,d,c))return x.combineEstimate(d,c,f);const w=new xu(c,d,f);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class yu extends de{constructor(n,s,o,u){super(n,s),this.estimatedModuleSize=o,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,s,o){if(Math.abs(s-this.getY())<=n&&Math.abs(o-this.getX())<=n){const u=Math.abs(n-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(n,s,o){const u=this.count+1,c=(this.count*this.getX()+s)/u,d=(this.count*this.getY()+n)/u,f=(this.count*this.estimatedModuleSize+o)/u;return new yu(c,d,f,u)}}class u2{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Wt{constructor(n,s){this.image=n,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const s=n!=null&&n.get(G.TRY_HARDER)!==void 0,o=n!=null&&n.get(G.PURE_BARCODE)!==void 0,u=this.image,c=u.getHeight(),d=u.getWidth();let f=Math.floor(3*c/(4*Wt.MAX_MODULES));(f<Wt.MIN_SKIP||s)&&(f=Wt.MIN_SKIP);let w=!1;const x=new Int32Array(5);for(let A=f-1;A<c&&!w;A+=f){x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0;let I=0;for(let D=0;D<d;D++)if(u.get(D,A))(I&1)===1&&I++,x[I]++;else if(I&1)x[I]++;else if(I===4)if(Wt.foundPatternCross(x)){if(this.handlePossibleCenter(x,A,D,o)===!0)if(f=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const z=this.findRowSkip();z>x[2]&&(A+=z-x[2]-f,D=d-1)}else{x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,I=3;continue}I=0,x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0}else x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,I=3;else x[++I]++;Wt.foundPatternCross(x)&&this.handlePossibleCenter(x,A,d,o)===!0&&(f=x[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const E=this.selectBestPatterns();return de.orderBestPatterns(E),new u2(E)}static centerFromEnd(n,s){return s-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let s=0;for(let c=0;c<5;c++){const d=n[c];if(d===0)return!1;s+=d}if(s<7)return!1;const o=s/7,u=o/2;return Math.abs(o-n[0])<u&&Math.abs(o-n[1])<u&&Math.abs(3*o-n[2])<3*u&&Math.abs(o-n[3])<u&&Math.abs(o-n[4])<u}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,s,o,u){const c=this.getCrossCheckStateCount();let d=0;const f=this.image;for(;n>=d&&s>=d&&f.get(s-d,n-d);)c[2]++,d++;if(n<d||s<d)return!1;for(;n>=d&&s>=d&&!f.get(s-d,n-d)&&c[1]<=o;)c[1]++,d++;if(n<d||s<d||c[1]>o)return!1;for(;n>=d&&s>=d&&f.get(s-d,n-d)&&c[0]<=o;)c[0]++,d++;if(c[0]>o)return!1;const w=f.getHeight(),x=f.getWidth();for(d=1;n+d<w&&s+d<x&&f.get(s+d,n+d);)c[2]++,d++;if(n+d>=w||s+d>=x)return!1;for(;n+d<w&&s+d<x&&!f.get(s+d,n+d)&&c[3]<o;)c[3]++,d++;if(n+d>=w||s+d>=x||c[3]>=o)return!1;for(;n+d<w&&s+d<x&&f.get(s+d,n+d)&&c[4]<o;)c[4]++,d++;if(c[4]>=o)return!1;const E=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(E-u)<2*u&&Wt.foundPatternCross(c)}crossCheckVertical(n,s,o,u){const c=this.image,d=c.getHeight(),f=this.getCrossCheckStateCount();let w=n;for(;w>=0&&c.get(s,w);)f[2]++,w--;if(w<0)return NaN;for(;w>=0&&!c.get(s,w)&&f[1]<=o;)f[1]++,w--;if(w<0||f[1]>o)return NaN;for(;w>=0&&c.get(s,w)&&f[0]<=o;)f[0]++,w--;if(f[0]>o)return NaN;for(w=n+1;w<d&&c.get(s,w);)f[2]++,w++;if(w===d)return NaN;for(;w<d&&!c.get(s,w)&&f[3]<o;)f[3]++,w++;if(w===d||f[3]>=o)return NaN;for(;w<d&&c.get(s,w)&&f[4]<o;)f[4]++,w++;if(f[4]>=o)return NaN;const x=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(x-u)>=2*u?NaN:Wt.foundPatternCross(f)?Wt.centerFromEnd(f,w):NaN}crossCheckHorizontal(n,s,o,u){const c=this.image,d=c.getWidth(),f=this.getCrossCheckStateCount();let w=n;for(;w>=0&&c.get(w,s);)f[2]++,w--;if(w<0)return NaN;for(;w>=0&&!c.get(w,s)&&f[1]<=o;)f[1]++,w--;if(w<0||f[1]>o)return NaN;for(;w>=0&&c.get(w,s)&&f[0]<=o;)f[0]++,w--;if(f[0]>o)return NaN;for(w=n+1;w<d&&c.get(w,s);)f[2]++,w++;if(w===d)return NaN;for(;w<d&&!c.get(w,s)&&f[3]<o;)f[3]++,w++;if(w===d||f[3]>=o)return NaN;for(;w<d&&c.get(w,s)&&f[4]<o;)f[4]++,w++;if(f[4]>=o)return NaN;const x=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(x-u)>=u?NaN:Wt.foundPatternCross(f)?Wt.centerFromEnd(f,w):NaN}handlePossibleCenter(n,s,o,u){const c=n[0]+n[1]+n[2]+n[3]+n[4];let d=Wt.centerFromEnd(n,o),f=this.crossCheckVertical(s,Math.floor(d),n[2],c);if(!isNaN(f)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(f),n[2],c),!isNaN(d)&&(!u||this.crossCheckDiagonal(Math.floor(f),Math.floor(d),n[2],c)))){const w=c/7;let x=!1;const E=this.possibleCenters;for(let A=0,I=E.length;A<I;A++){const D=E[A];if(D.aboutEquals(w,f,d)){E[A]=D.combineEstimate(f,d,w),x=!0;break}}if(!x){const A=new yu(d,f,w);E.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const o of this.possibleCenters)if(o.getCount()>=Wt.CENTER_QUORUM)if(s==null)s=o;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-o.getX())-Math.abs(s.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,s=0;const o=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Wt.CENTER_QUORUM&&(n++,s+=d.getEstimatedModuleSize());if(n<3)return!1;const u=s/o;let c=0;for(const d of this.possibleCenters)c+=Math.abs(d.getEstimatedModuleSize()-u);return c<=.05*s}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new K;const s=this.possibleCenters;let o;if(n>3){let u=0,c=0;for(const w of this.possibleCenters){const x=w.getEstimatedModuleSize();u+=x,c+=x*x}o=u/n;let d=Math.sqrt(c/n-o*o);s.sort((w,x)=>{const E=Math.abs(x.getEstimatedModuleSize()-o),A=Math.abs(w.getEstimatedModuleSize()-o);return E<A?-1:E>A?1:0});const f=Math.max(.2*o,d);for(let w=0;w<s.length&&s.length>3;w++){const x=s[w];Math.abs(x.getEstimatedModuleSize()-o)>f&&(s.splice(w,1),w--)}}if(s.length>3){let u=0;for(const c of s)u+=c.getEstimatedModuleSize();o=u/s.length,s.sort((c,d)=>{if(d.getCount()===c.getCount()){const f=Math.abs(d.getEstimatedModuleSize()-o),w=Math.abs(c.getEstimatedModuleSize()-o);return f<w?1:f>w?-1:0}else return d.getCount()-c.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}Wt.CENTER_QUORUM=2,Wt.MIN_SKIP=3,Wt.MAX_MODULES=57;class to{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(G.NEED_RESULT_POINT_CALLBACK);const o=new Wt(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(o)}processFinderPatternInfo(n){const s=n.getTopLeft(),o=n.getTopRight(),u=n.getBottomLeft(),c=this.calculateModuleSize(s,o,u);if(c<1)throw new K("No pattern found in proccess finder.");const d=to.computeDimension(s,o,u,c),f=Ee.getProvisionalVersionForDimension(d),w=f.getDimensionForVersion()-7;let x=null;if(f.getAlignmentPatternCenters().length>0){const D=o.getX()-s.getX()+u.getX(),F=o.getY()-s.getY()+u.getY(),z=1-3/w,H=Math.floor(s.getX()+z*(D-s.getX())),$=Math.floor(s.getY()+z*(F-s.getY()));for(let ie=4;ie<=16;ie<<=1)try{x=this.findAlignmentInRegion(c,H,$,ie);break}catch(se){if(!(se instanceof K))throw se}}const E=to.createTransform(s,o,u,x,d),A=to.sampleGrid(this.image,E,d);let I;return x===null?I=[u,s,o]:I=[u,s,o,x],new ur(A,I)}static createTransform(n,s,o,u,c){const d=c-3.5;let f,w,x,E;return u!==null?(f=u.getX(),w=u.getY(),x=d-3,E=x):(f=s.getX()-n.getX()+o.getX(),w=s.getY()-n.getY()+o.getY(),x=d,E=d),Ke.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,x,E,3.5,d,n.getX(),n.getY(),s.getX(),s.getY(),f,w,o.getX(),o.getY())}static sampleGrid(n,s,o){return Vt.getInstance().sampleGridWithTransform(n,o,o,s)}static computeDimension(n,s,o,u){const c=ye.round(de.distance(n,s)/u),d=ye.round(de.distance(n,o)/u);let f=Math.floor((c+d)/2)+7;switch(f&3){case 0:f++;break;case 2:f--;break;case 3:throw new K("Dimensions could be not found.")}return f}calculateModuleSize(n,s,o){return(this.calculateModuleSizeOneWay(n,s)+this.calculateModuleSizeOneWay(n,o))/2}calculateModuleSizeOneWay(n,s){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(s.getX()),Math.floor(s.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(o)?u/7:isNaN(u)?o/7:(o+u)/14}sizeOfBlackWhiteBlackRunBothWays(n,s,o,u){let c=this.sizeOfBlackWhiteBlackRun(n,s,o,u),d=1,f=n-(o-n);f<0?(d=n/(n-f),f=0):f>=this.image.getWidth()&&(d=(this.image.getWidth()-1-n)/(f-n),f=this.image.getWidth()-1);let w=Math.floor(s-(u-s)*d);return d=1,w<0?(d=s/(s-w),w=0):w>=this.image.getHeight()&&(d=(this.image.getHeight()-1-s)/(w-s),w=this.image.getHeight()-1),f=Math.floor(n+(f-n)*d),c+=this.sizeOfBlackWhiteBlackRun(n,s,f,w),c-1}sizeOfBlackWhiteBlackRun(n,s,o,u){const c=Math.abs(u-s)>Math.abs(o-n);if(c){let D=n;n=s,s=D,D=o,o=u,u=D}const d=Math.abs(o-n),f=Math.abs(u-s);let w=-d/2;const x=n<o?1:-1,E=s<u?1:-1;let A=0;const I=o+x;for(let D=n,F=s;D!==I;D+=x){const z=c?F:D,H=c?D:F;if(A===1===this.image.get(z,H)){if(A===2)return ye.distance(D,F,n,s);A++}if(w+=f,w>0){if(F===u)break;F+=E,w-=d}}return A===2?ye.distance(o+x,u,n,s):NaN}findAlignmentInRegion(n,s,o,u){const c=Math.floor(u*n),d=Math.max(0,s-c),f=Math.min(this.image.getWidth()-1,s+c);if(f-d<n*3)throw new K("Alignment top exceeds estimated module size.");const w=Math.max(0,o-c),x=Math.min(this.image.getHeight()-1,o+c);if(x-w<n*3)throw new K("Alignment bottom exceeds estimated module size.");return new pa(this.image,d,w,f-d,x-w,n,this.resultPointCallback).find()}}class Wn{constructor(){this.decoder=new l2}getDecoder(){return this.decoder}decode(n,s){let o,u;if(s!=null&&s.get(G.PURE_BARCODE)!==void 0){const w=Wn.extractPureBits(n.getBlackMatrix());o=this.decoder.decodeBitMatrix(w,s),u=Wn.NO_POINTS}else{const w=new to(n.getBlackMatrix()).detect(s);o=this.decoder.decodeBitMatrix(w.getBits(),s),u=w.getPoints()}o.getOther()instanceof Fh&&o.getOther().applyMirroredCorrection(u);const c=new Re(o.getText(),o.getRawBytes(),void 0,u,le.QR_CODE,void 0),d=o.getByteSegments();d!==null&&c.putMetadata(_e.BYTE_SEGMENTS,d);const f=o.getECLevel();return f!==null&&c.putMetadata(_e.ERROR_CORRECTION_LEVEL,f),o.hasStructuredAppend()&&(c.putMetadata(_e.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),c.putMetadata(_e.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),c}reset(){}static extractPureBits(n){const s=n.getTopLeftOnBit(),o=n.getBottomRightOnBit();if(s===null||o===null)throw new K;const u=this.moduleSize(s,n);let c=s[1],d=o[1],f=s[0],w=o[0];if(f>=w||c>=d)throw new K;if(d-c!==w-f&&(w=f+(d-c),w>=n.getWidth()))throw new K;const x=Math.round((w-f+1)/u),E=Math.round((d-c+1)/u);if(x<=0||E<=0)throw new K;if(E!==x)throw new K;const A=Math.floor(u/2);c+=A,f+=A;const I=f+Math.floor((x-1)*u)-w;if(I>0){if(I>A)throw new K;f-=I}const D=c+Math.floor((E-1)*u)-d;if(D>0){if(D>A)throw new K;c-=D}const F=new Oe(x,E);for(let z=0;z<E;z++){const H=c+Math.floor(z*u);for(let $=0;$<x;$++)n.get(f+Math.floor($*u),H)&&F.set($,z)}return F}static moduleSize(n,s){const o=s.getHeight(),u=s.getWidth();let c=n[0],d=n[1],f=!0,w=0;for(;c<u&&d<o;){if(f!==s.get(c,d)){if(++w===5)break;f=!f}c++,d++}if(c===u||d===o)throw new K;return(c-n[0])/7}}Wn.NO_POINTS=new Array;class Te{PDF417Common(){}static getBitCountSum(n){return ye.sum(n)}static toIntArray(n){if(n==null||!n.length)return Te.EMPTY_INT_ARRAY;const s=new Int32Array(n.length);let o=0;for(const u of n)s[o++]=u;return s}static getCodeword(n){const s=b.binarySearch(Te.SYMBOL_TABLE,n&262143);return s<0?-1:(Te.CODEWORD_TABLE[s]-1)%Te.NUMBER_OF_CODEWORDS}}Te.NUMBER_OF_CODEWORDS=929,Te.MAX_CODEWORDS_IN_BARCODE=Te.NUMBER_OF_CODEWORDS-1,Te.MIN_ROWS_IN_BARCODE=3,Te.MAX_ROWS_IN_BARCODE=90,Te.MODULES_IN_CODEWORD=17,Te.MODULES_IN_STOP_PATTERN=18,Te.BARS_IN_MODULE=8,Te.EMPTY_INT_ARRAY=new Int32Array([]),Te.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Te.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class c2{constructor(n,s){this.bits=n,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class De{static detectMultiple(n,s,o){let u=n.getBlackMatrix(),c=De.detect(o,u);return c.length||(u=u.clone(),u.rotate180(),c=De.detect(o,u)),new c2(u,c)}static detect(n,s){const o=new Array;let u=0,c=0,d=!1;for(;u<s.getHeight();){const f=De.findVertices(s,u,c);if(f[0]==null&&f[3]==null){if(!d)break;d=!1,c=0;for(const w of o)w[1]!=null&&(u=Math.trunc(Math.max(u,w[1].getY()))),w[3]!=null&&(u=Math.max(u,Math.trunc(w[3].getY())));u+=De.ROW_STEP;continue}if(d=!0,o.push(f),!n)break;f[2]!=null?(c=Math.trunc(f[2].getX()),u=Math.trunc(f[2].getY())):(c=Math.trunc(f[4].getX()),u=Math.trunc(f[4].getY()))}return o}static findVertices(n,s,o){const u=n.getHeight(),c=n.getWidth(),d=new Array(8);return De.copyToResult(d,De.findRowsWithPattern(n,u,c,s,o,De.START_PATTERN),De.INDEXES_START_PATTERN),d[4]!=null&&(o=Math.trunc(d[4].getX()),s=Math.trunc(d[4].getY())),De.copyToResult(d,De.findRowsWithPattern(n,u,c,s,o,De.STOP_PATTERN),De.INDEXES_STOP_PATTERN),d}static copyToResult(n,s,o){for(let u=0;u<o.length;u++)n[o[u]]=s[u]}static findRowsWithPattern(n,s,o,u,c,d){const f=new Array(4);let w=!1;const x=new Int32Array(d.length);for(;u<s;u+=De.ROW_STEP){let A=De.findGuardPattern(n,c,u,o,!1,d,x);if(A!=null){for(;u>0;){const I=De.findGuardPattern(n,c,--u,o,!1,d,x);if(I!=null)A=I;else{u++;break}}f[0]=new de(A[0],u),f[1]=new de(A[1],u),w=!0;break}}let E=u+1;if(w){let A=0,I=Int32Array.from([Math.trunc(f[0].getX()),Math.trunc(f[1].getX())]);for(;E<s;E++){const D=De.findGuardPattern(n,I[0],E,o,!1,d,x);if(D!=null&&Math.abs(I[0]-D[0])<De.MAX_PATTERN_DRIFT&&Math.abs(I[1]-D[1])<De.MAX_PATTERN_DRIFT)I=D,A=0;else{if(A>De.SKIPPED_ROW_COUNT_MAX)break;A++}}E-=A+1,f[2]=new de(I[0],E),f[3]=new de(I[1],E)}return E-u<De.BARCODE_MIN_HEIGHT&&b.fill(f,null),f}static findGuardPattern(n,s,o,u,c,d,f){b.fillWithin(f,0,f.length,0);let w=s,x=0;for(;n.get(w,o)&&w>0&&x++<De.MAX_PIXEL_DRIFT;)w--;let E=w,A=0,I=d.length;for(let D=c;E<u;E++)if(n.get(E,o)!==D)f[A]++;else{if(A===I-1){if(De.patternMatchVariance(f,d,De.MAX_INDIVIDUAL_VARIANCE)<De.MAX_AVG_VARIANCE)return new Int32Array([w,E]);w+=f[0]+f[1],L.arraycopy(f,2,f,0,A-1),f[A-1]=0,f[A]=0,A--}else A++;f[A]=1,D=!D}return A===I-1&&De.patternMatchVariance(f,d,De.MAX_INDIVIDUAL_VARIANCE)<De.MAX_AVG_VARIANCE?new Int32Array([w,E-1]):null}static patternMatchVariance(n,s,o){let u=n.length,c=0,d=0;for(let x=0;x<u;x++)c+=n[x],d+=s[x];if(c<d)return 1/0;let f=c/d;o*=f;let w=0;for(let x=0;x<u;x++){let E=n[x],A=s[x]*f,I=E>A?E-A:A-E;if(I>o)return 1/0;w+=I}return w/c}}De.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),De.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),De.MAX_AVG_VARIANCE=.42,De.MAX_INDIVIDUAL_VARIANCE=.8,De.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),De.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),De.MAX_PIXEL_DRIFT=3,De.MAX_PATTERN_DRIFT=5,De.SKIPPED_ROW_COUNT_MAX=25,De.ROW_STEP=5,De.BARCODE_MIN_HEIGHT=10;class Kt{constructor(n,s){if(s.length===0)throw new v;this.field=n;let o=s.length;if(o>1&&s[0]===0){let u=1;for(;u<o&&s[u]===0;)u++;u===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-u),L.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let u=0;for(let c of this.coefficients)u=this.field.add(u,c);return u}let s=this.coefficients[0],o=this.coefficients.length;for(let u=1;u<o;u++)s=this.field.add(this.field.multiply(n,s),this.coefficients[u]);return s}add(n){if(!this.field.equals(n.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let s=this.coefficients,o=n.coefficients;if(s.length>o.length){let d=s;s=o,o=d}let u=new Int32Array(o.length),c=o.length-s.length;L.arraycopy(o,0,u,0,c);for(let d=c;d<o.length;d++)u[d]=this.field.add(s[d-c],o[d]);return new Kt(this.field,u)}subtract(n){if(!this.field.equals(n.field))throw new v("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof Kt?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new Kt(this.field,new Int32Array([0]));let s=this.coefficients,o=s.length,u=n.coefficients,c=u.length,d=new Int32Array(o+c-1);for(let f=0;f<o;f++){let w=s[f];for(let x=0;x<c;x++)d[f+x]=this.field.add(d[f+x],this.field.multiply(w,u[x]))}return new Kt(this.field,d)}negative(){let n=this.coefficients.length,s=new Int32Array(n);for(let o=0;o<n;o++)s[o]=this.field.subtract(0,this.coefficients[o]);return new Kt(this.field,s)}multiplyScalar(n){if(n===0)return new Kt(this.field,new Int32Array([0]));if(n===1)return this;let s=this.coefficients.length,o=new Int32Array(s);for(let u=0;u<s;u++)o[u]=this.field.multiply(this.coefficients[u],n);return new Kt(this.field,o)}multiplyByMonomial(n,s){if(n<0)throw new v;if(s===0)return new Kt(this.field,new Int32Array([0]));let o=this.coefficients.length,u=new Int32Array(o+n);for(let c=0;c<o;c++)u[c]=this.field.multiply(this.coefficients[c],s);return new Kt(this.field,u)}toString(){let n=new ue;for(let s=this.getDegree();s>=0;s--){let o=this.getCoefficient(s);o!==0&&(o<0?(n.append(" - "),o=-o):n.length()>0&&n.append(" + "),(s===0||o!==1)&&n.append(o),s!==0&&(s===1?n.append("x"):(n.append("x^"),n.append(s))))}return n.toString()}}class d2{add(n,s){return(n+s)%this.modulus}subtract(n,s){return(this.modulus+n-s)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new v;return this.logTable[n]}inverse(n){if(n===0)throw new Qe;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,s){return n===0||s===0?0:this.expTable[(this.logTable[n]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class vu extends d2{constructor(n,s){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let o=1;for(let u=0;u<n;u++)this.expTable[u]=o,o=o*s%n;for(let u=0;u<n-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new Kt(this,new Int32Array([0])),this.one=new Kt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,s){if(n<0)throw new v;if(s===0)return this.zero;let o=new Int32Array(n+1);return o[0]=s,new Kt(this,o)}}vu.PDF417_GF=new vu(Te.NUMBER_OF_CODEWORDS,3);class Uh{constructor(){this.field=vu.PDF417_GF}decode(n,s,o){let u=new Kt(this.field,n),c=new Int32Array(s),d=!1;for(let F=s;F>0;F--){let z=u.evaluateAt(this.field.exp(F));c[s-F]=z,z!==0&&(d=!0)}if(!d)return 0;let f=this.field.getOne();if(o!=null)for(const F of o){let z=this.field.exp(n.length-1-F),H=new Kt(this.field,new Int32Array([this.field.subtract(0,z),1]));f=f.multiply(H)}let w=new Kt(this.field,c),x=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),w,s),E=x[0],A=x[1],I=this.findErrorLocations(E),D=this.findErrorMagnitudes(A,E,I);for(let F=0;F<I.length;F++){let z=n.length-1-this.field.log(I[F]);if(z<0)throw T.getChecksumInstance();n[z]=this.field.subtract(n[z],D[F])}return I.length}runEuclideanAlgorithm(n,s,o){if(n.getDegree()<s.getDegree()){let I=n;n=s,s=I}let u=n,c=s,d=this.field.getZero(),f=this.field.getOne();for(;c.getDegree()>=Math.round(o/2);){let I=u,D=d;if(u=c,d=f,u.isZero())throw T.getChecksumInstance();c=I;let F=this.field.getZero(),z=u.getCoefficient(u.getDegree()),H=this.field.inverse(z);for(;c.getDegree()>=u.getDegree()&&!c.isZero();){let $=c.getDegree()-u.getDegree(),ie=this.field.multiply(c.getCoefficient(c.getDegree()),H);F=F.add(this.field.buildMonomial($,ie)),c=c.subtract(u.multiplyByMonomial($,ie))}f=F.multiply(d).subtract(D).negative()}let w=f.getCoefficient(0);if(w===0)throw T.getChecksumInstance();let x=this.field.inverse(w),E=f.multiply(x),A=c.multiply(x);return[E,A]}findErrorLocations(n){let s=n.getDegree(),o=new Int32Array(s),u=0;for(let c=1;c<this.field.getSize()&&u<s;c++)n.evaluateAt(c)===0&&(o[u]=this.field.inverse(c),u++);if(u!==s)throw T.getChecksumInstance();return o}findErrorMagnitudes(n,s,o){let u=s.getDegree(),c=new Int32Array(u);for(let x=1;x<=u;x++)c[u-x]=this.field.multiply(x,s.getCoefficient(x));let d=new Kt(this.field,c),f=o.length,w=new Int32Array(f);for(let x=0;x<f;x++){let E=this.field.inverse(o[x]),A=this.field.subtract(0,n.evaluateAt(E)),I=this.field.inverse(d.evaluateAt(E));w[x]=this.field.multiply(A,I)}return w}}class Si{constructor(n,s,o,u,c){n instanceof Si?this.constructor_2(n):this.constructor_1(n,s,o,u,c)}constructor_1(n,s,o,u,c){const d=s==null||o==null,f=u==null||c==null;if(d&&f)throw new K;d?(s=new de(0,u.getY()),o=new de(0,c.getY())):f&&(u=new de(n.getWidth()-1,s.getY()),c=new de(n.getWidth()-1,o.getY())),this.image=n,this.topLeft=s,this.bottomLeft=o,this.topRight=u,this.bottomRight=c,this.minX=Math.trunc(Math.min(s.getX(),o.getX())),this.maxX=Math.trunc(Math.max(u.getX(),c.getX())),this.minY=Math.trunc(Math.min(s.getY(),u.getY())),this.maxY=Math.trunc(Math.max(o.getY(),c.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,s){return n==null?s:s==null?n:new Si(n.image,n.topLeft,n.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(n,s,o){let u=this.topLeft,c=this.bottomLeft,d=this.topRight,f=this.bottomRight;if(n>0){let w=o?this.topLeft:this.topRight,x=Math.trunc(w.getY()-n);x<0&&(x=0);let E=new de(w.getX(),x);o?u=E:d=E}if(s>0){let w=o?this.bottomLeft:this.bottomRight,x=Math.trunc(w.getY()+s);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);let E=new de(w.getX(),x);o?c=E:f=E}return new Si(this.image,u,c,d,f)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class h2{constructor(n,s,o,u){this.columnCount=n,this.errorCorrectionLevel=u,this.rowCountUpperPart=s,this.rowCountLowerPart=o,this.rowCount=s+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ro{constructor(){this.buffer=""}static form(n,s){let o=-1;function u(d,f,w,x,E,A){if(d==="%%")return"%";if(s[++o]===void 0)return;d=x?parseInt(x.substr(1)):void 0;let I=E?parseInt(E.substr(1)):void 0,D;switch(A){case"s":D=s[o];break;case"c":D=s[o][0];break;case"f":D=parseFloat(s[o]).toFixed(d);break;case"p":D=parseFloat(s[o]).toPrecision(d);break;case"e":D=parseFloat(s[o]).toExponential(d);break;case"x":D=parseInt(s[o]).toString(I||16);break;case"d":D=parseFloat(parseInt(s[o],I||10).toPrecision(d)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(I);let F=parseInt(w),z=w&&w[0]+""=="0"?"0":" ";for(;D.length<F;)D=f!==void 0?D+z:z+D;return D}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(c,u)}format(n,...s){this.buffer+=ro.form(n,s)}toString(){return this.buffer}}class no{constructor(n){this.boundingBox=new Si(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let s=this.getCodeword(n);if(s!=null)return s;for(let o=1;o<no.MAX_NEARBY_DISTANCE;o++){let u=this.imageRowToCodewordIndex(n)-o;if(u>=0&&(s=this.codewords[u],s!=null)||(u=this.imageRowToCodewordIndex(n)+o,u<this.codewords.length&&(s=this.codewords[u],s!=null)))return s}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,s){this.codewords[this.imageRowToCodewordIndex(n)]=s}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new ro;let s=0;for(const o of this.codewords){if(o==null){n.format("%3d:    |   %n",s++);continue}n.format("%3d: %3d|%3d%n",s++,o.getRowNumber(),o.getValue())}return n.toString()}}no.MAX_NEARBY_DISTANCE=5;class io{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let s=this.values.get(n);s==null&&(s=0),s++,this.values.set(n,s)}getValue(){let n=-1,s=new Array;for(const[o,u]of this.values.entries()){const c={getKey:()=>o,getValue:()=>u};c.getValue()>n?(n=c.getValue(),s=[],s.push(c.getKey())):c.getValue()===n&&s.push(c.getKey())}return Te.toIntArray(s)}getConfidence(n){return this.values.get(n)}}class zh extends no{constructor(n,s){super(n),this._isLeft=s}setRowNumbers(){for(let n of this.getCodewords())n!=null&&n.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,n);let o=this.getBoundingBox(),u=this._isLeft?o.getTopLeft():o.getTopRight(),c=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(u.getY())),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),w=-1,x=1,E=0;for(let A=d;A<f;A++){if(s[A]==null)continue;let I=s[A],D=I.getRowNumber()-w;if(D===0)E++;else if(D===1)x=Math.max(x,E),E=1,w=I.getRowNumber();else if(D<0||I.getRowNumber()>=n.getRowCount()||D>A)s[A]=null;else{let F;x>2?F=(x-2)*D:F=D;let z=F>=A;for(let H=1;H<=F&&!z;H++)z=s[A-H]!=null;z?s[A]=null:(w=I.getRowNumber(),E=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let s=new Int32Array(n.getRowCount());for(let o of this.getCodewords())if(o!=null){let u=o.getRowNumber();if(u>=s.length)continue;s[u]++}return s}adjustIncompleteIndicatorColumnRowNumbers(n){let s=this.getBoundingBox(),o=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),d=this.imageRowToCodewordIndex(Math.trunc(u.getY())),f=this.getCodewords(),w=-1;for(let x=c;x<d;x++){if(f[x]==null)continue;let E=f[x];E.setRowNumberAsRowIndicatorColumn();let A=E.getRowNumber()-w;A===0||(A===1?w=E.getRowNumber():E.getRowNumber()>=n.getRowCount()?f[x]=null:w=E.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),s=new io,o=new io,u=new io,c=new io;for(let f of n){if(f==null)continue;f.setRowNumberAsRowIndicatorColumn();let w=f.getValue()%30,x=f.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:o.setValue(w*3+1);break;case 1:c.setValue(w/3),u.setValue(w%3);break;case 2:s.setValue(w+1);break}}if(s.getValue().length===0||o.getValue().length===0||u.getValue().length===0||c.getValue().length===0||s.getValue()[0]<1||o.getValue()[0]+u.getValue()[0]<Te.MIN_ROWS_IN_BARCODE||o.getValue()[0]+u.getValue()[0]>Te.MAX_ROWS_IN_BARCODE)return null;let d=new h2(s.getValue()[0],o.getValue()[0],u.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(n,d),d}removeIncorrectCodewords(n,s){for(let o=0;o<n.length;o++){let u=n[o];if(n[o]==null)continue;let c=u.getValue()%30,d=u.getRowNumber();if(d>s.getRowCount()){n[o]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:c*3+1!==s.getRowCountUpperPart()&&(n[o]=null);break;case 1:(Math.trunc(c/3)!==s.getErrorCorrectionLevel()||c%3!==s.getRowCountLowerPart())&&(n[o]=null);break;case 2:c+1!==s.getColumnCount()&&(n[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class so{constructor(n,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=Te.MAX_CODEWORDS_IN_BARCODE,s;do s=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n!=null&&n.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let o=this.detectionResultColumns[s].getCodewords();for(let u=0;u<o.length;u++)o[u]!=null&&(o[u].hasValidRowNumber()||this.adjustRowNumbers(s,u,o))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<n.length;o++)if(n[o]!=null&&s[o]!=null&&n[o].getRowNumber()===s[o].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let c=this.detectionResultColumns[u].getCodewords()[o];c!=null&&(c.setRowNumber(n[o].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<s.length;o++){if(s[o]==null)continue;let u=s[o].getRowNumber(),c=0;for(let d=this.barcodeColumnCount+1;d>0&&c<this.ADJUST_ROW_NUMBER_SKIP;d--){let f=this.detectionResultColumns[d].getCodewords()[o];f!=null&&(c=so.adjustRowNumberIfValid(u,c,f),f.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,s=this.detectionResultColumns[0].getCodewords();for(let o=0;o<s.length;o++){if(s[o]==null)continue;let u=s[o].getRowNumber(),c=0;for(let d=1;d<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;d++){let f=this.detectionResultColumns[d].getCodewords()[o];f!=null&&(c=so.adjustRowNumberIfValid(u,c,f),f.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,s,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(n)?(o.setRowNumber(n),s=0):++s),s}adjustRowNumbers(n,s,o){if(!this.detectionResultColumns[n-1])return;let u=o[s],c=this.detectionResultColumns[n-1].getCodewords(),d=c;this.detectionResultColumns[n+1]!=null&&(d=this.detectionResultColumns[n+1].getCodewords());let f=new Array(14);f[2]=c[s],f[3]=d[s],s>0&&(f[0]=o[s-1],f[4]=c[s-1],f[5]=d[s-1]),s>1&&(f[8]=o[s-2],f[10]=c[s-2],f[11]=d[s-2]),s<o.length-1&&(f[1]=o[s+1],f[6]=c[s+1],f[7]=d[s+1]),s<o.length-2&&(f[9]=o[s+2],f[12]=c[s+2],f[13]=d[s+2]);for(let w of f)if(so.adjustRowNumber(u,w))return}static adjustRowNumber(n,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===n.getBucket()?(n.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,s){this.detectionResultColumns[n]=s}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new ro;for(let o=0;o<n.getCodewords().length;o++){s.format("CW %3d:",o);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){s.format("    |   ");continue}let c=this.detectionResultColumns[u].getCodewords()[o];if(c==null){s.format("    |   ");continue}s.format(" %3d|%3d",c.getRowNumber(),c.getValue())}s.format("%n")}return s.toString()}}class oo{constructor(n,s,o,u){this.rowNumber=oo.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(s),this.bucket=Math.trunc(o),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==oo.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}oo.BARCODE_ROW_UNKNOWN=-1;class yr{static initialize(){for(let n=0;n<Te.SYMBOL_TABLE.length;n++){let s=Te.SYMBOL_TABLE[n],o=s&1;for(let u=0;u<Te.BARS_IN_MODULE;u++){let c=0;for(;(s&1)===o;)c+=1,s>>=1;o=s&1,yr.RATIOS_TABLE[n]||(yr.RATIOS_TABLE[n]=new Array(Te.BARS_IN_MODULE)),yr.RATIOS_TABLE[n][Te.BARS_IN_MODULE-u-1]=Math.fround(c/Te.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let s=yr.getDecodedCodewordValue(yr.sampleBitCounts(n));return s!==-1?s:yr.getClosestDecodedValue(n)}static sampleBitCounts(n){let s=ye.sum(n),o=new Int32Array(Te.BARS_IN_MODULE),u=0,c=0;for(let d=0;d<Te.MODULES_IN_CODEWORD;d++){let f=s/(2*Te.MODULES_IN_CODEWORD)+d*s/Te.MODULES_IN_CODEWORD;c+n[u]<=f&&(c+=n[u],u++),o[u]++}return o}static getDecodedCodewordValue(n){let s=yr.getBitValue(n);return Te.getCodeword(s)===-1?-1:s}static getBitValue(n){let s=0;for(let o=0;o<n.length;o++)for(let u=0;u<n[o];u++)s=s<<1|(o%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(n){let s=ye.sum(n),o=new Array(Te.BARS_IN_MODULE);if(s>1)for(let d=0;d<o.length;d++)o[d]=Math.fround(n[d]/s);let u=pt.MAX_VALUE,c=-1;this.bSymbolTableReady||yr.initialize();for(let d=0;d<yr.RATIOS_TABLE.length;d++){let f=0,w=yr.RATIOS_TABLE[d];for(let x=0;x<Te.BARS_IN_MODULE;x++){let E=Math.fround(w[x]-o[x]);if(f+=Math.fround(E*E),f>=u)break}f<u&&(u=f,c=Te.SYMBOL_TABLE[d])}return c}}yr.bSymbolTableReady=!1,yr.RATIOS_TABLE=new Array(Te.SYMBOL_TABLE.length).map(_=>new Array(Te.BARS_IN_MODULE));class Vh{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class Hh{static parseLong(n,s=void 0){return parseInt(n,s)}}class Wh extends g{}Wh.kind="NullPointerException";class f2{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,s,o){if(n==null)throw new Wh;if(s<0||s>n.length||o<0||s+o>n.length||s+o<0)throw new j;if(o===0)return;for(let u=0;u<o;u++)this.write(n[s+u])}flush(){}close(){}}class g2 extends g{}class p2 extends f2{constructor(n=32){if(super(),this.count=0,n<0)throw new v("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let o=this.buf.length<<1;if(o-n<0&&(o=n),o<0){if(n<0)throw new g2;o=S.MAX_VALUE}this.buf=b.copyOfUint8Array(this.buf,o)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,s,o){if(s<0||s>n.length||o<0||s+o-n.length>0)throw new j;this.ensureCapacity(this.count+o),L.arraycopy(n,s,this.buf,this.count,o),this.count+=o}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return b.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var rt;(function(_){_[_.ALPHA=0]="ALPHA",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.PUNCT=3]="PUNCT",_[_.ALPHA_SHIFT=4]="ALPHA_SHIFT",_[_.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(rt||(rt={}));function Gh(){if(typeof window<"u")return window.BigInt||null;if(typeof fs<"u")return fs.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ma;function Gn(_){if(typeof ma>"u"&&(ma=Gh()),ma===null)throw new Error("BigInt is not supported!");return ma(_)}function m2(){let _=[];_[0]=Gn(1);let n=Gn(900);_[1]=n;for(let s=2;s<16;s++)_[s]=_[s-1]*n;return _}class X{static decode(n,s){let o=new ue(""),u=N.ISO8859_1;o.enableDecoding(u);let c=1,d=n[c++],f=new Vh;for(;c<n[0];){switch(d){case X.TEXT_COMPACTION_MODE_LATCH:c=X.textCompaction(n,c,o);break;case X.BYTE_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:c=X.byteCompaction(d,n,u,c,o);break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[c++]);break;case X.NUMERIC_COMPACTION_MODE_LATCH:c=X.numericCompaction(n,c,o);break;case X.ECI_CHARSET:N.getCharacterSetECIByValue(n[c++]);break;case X.ECI_GENERAL_PURPOSE:c+=2;break;case X.ECI_USER_DEFINED:c++;break;case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=X.decodeMacroBlock(n,c,f);break;case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:throw new U;default:c--,c=X.textCompaction(n,c,o);break}if(c<n.length)d=n[c++];else throw U.getFormatInstance()}if(o.length()===0)throw U.getFormatInstance();let w=new je(null,o.toString(),null,s);return w.setOther(f),w}static decodeMacroBlock(n,s,o){if(s+X.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw U.getFormatInstance();let u=new Int32Array(X.NUMBER_OF_SEQUENCE_CODEWORDS);for(let f=0;f<X.NUMBER_OF_SEQUENCE_CODEWORDS;f++,s++)u[f]=n[s];o.setSegmentIndex(S.parseInt(X.decodeBase900toBase10(u,X.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new ue;s=X.textCompaction(n,s,c),o.setFileId(c.toString());let d=-1;for(n[s]===X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=s+1);s<n[0];)switch(n[s]){case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,n[s]){case X.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let f=new ue;s=X.textCompaction(n,s+1,f),o.setFileName(f.toString());break;case X.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new ue;s=X.textCompaction(n,s+1,w),o.setSender(w.toString());break;case X.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let x=new ue;s=X.textCompaction(n,s+1,x),o.setAddressee(x.toString());break;case X.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let E=new ue;s=X.numericCompaction(n,s+1,E),o.setSegmentCount(S.parseInt(E.toString()));break;case X.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let A=new ue;s=X.numericCompaction(n,s+1,A),o.setTimestamp(Hh.parseLong(A.toString()));break;case X.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let I=new ue;s=X.numericCompaction(n,s+1,I),o.setChecksum(S.parseInt(I.toString()));break;case X.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let D=new ue;s=X.numericCompaction(n,s+1,D),o.setFileSize(Hh.parseLong(D.toString()));break;default:throw U.getFormatInstance()}break;case X.MACRO_PDF417_TERMINATOR:s++,o.setLastSegment(!0);break;default:throw U.getFormatInstance()}if(d!==-1){let f=s-d;o.isLastSegment()&&f--,o.setOptionalData(b.copyOfRange(n,d,d+f))}return s}static textCompaction(n,s,o){let u=new Int32Array((n[0]-s)*2),c=new Int32Array((n[0]-s)*2),d=0,f=!1;for(;s<n[0]&&!f;){let w=n[s++];if(w<X.TEXT_COMPACTION_MODE_LATCH)u[d]=w/30,u[d+1]=w%30,d+=2;else switch(w){case X.TEXT_COMPACTION_MODE_LATCH:u[d++]=X.TEXT_COMPACTION_MODE_LATCH;break;case X.BYTE_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:case X.NUMERIC_COMPACTION_MODE_LATCH:case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:s--,f=!0;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[d]=X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=n[s++],c[d]=w,d++;break}}return X.decodeTextCompaction(u,c,d,o),s}static decodeTextCompaction(n,s,o,u){let c=rt.ALPHA,d=rt.ALPHA,f=0;for(;f<o;){let w=n[f],x="";switch(c){case rt.ALPHA:if(w<26)x=String.fromCharCode(65+w);else switch(w){case 26:x=" ";break;case X.LL:c=rt.LOWER;break;case X.ML:c=rt.MIXED;break;case X.PS:d=c,c=rt.PUNCT_SHIFT;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[f]);break;case X.TEXT_COMPACTION_MODE_LATCH:c=rt.ALPHA;break}break;case rt.LOWER:if(w<26)x=String.fromCharCode(97+w);else switch(w){case 26:x=" ";break;case X.AS:d=c,c=rt.ALPHA_SHIFT;break;case X.ML:c=rt.MIXED;break;case X.PS:d=c,c=rt.PUNCT_SHIFT;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[f]);break;case X.TEXT_COMPACTION_MODE_LATCH:c=rt.ALPHA;break}break;case rt.MIXED:if(w<X.PL)x=X.MIXED_CHARS[w];else switch(w){case X.PL:c=rt.PUNCT;break;case 26:x=" ";break;case X.LL:c=rt.LOWER;break;case X.AL:c=rt.ALPHA;break;case X.PS:d=c,c=rt.PUNCT_SHIFT;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[f]);break;case X.TEXT_COMPACTION_MODE_LATCH:c=rt.ALPHA;break}break;case rt.PUNCT:if(w<X.PAL)x=X.PUNCT_CHARS[w];else switch(w){case X.PAL:c=rt.ALPHA;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[f]);break;case X.TEXT_COMPACTION_MODE_LATCH:c=rt.ALPHA;break}break;case rt.ALPHA_SHIFT:if(c=d,w<26)x=String.fromCharCode(65+w);else switch(w){case 26:x=" ";break;case X.TEXT_COMPACTION_MODE_LATCH:c=rt.ALPHA;break}break;case rt.PUNCT_SHIFT:if(c=d,w<X.PAL)x=X.PUNCT_CHARS[w];else switch(w){case X.PAL:c=rt.ALPHA;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[f]);break;case X.TEXT_COMPACTION_MODE_LATCH:c=rt.ALPHA;break}break}x!==""&&u.append(x),f++}}static byteCompaction(n,s,o,u,c){let d=new p2,f=0,w=0,x=!1;switch(n){case X.BYTE_COMPACTION_MODE_LATCH:let E=new Int32Array(6),A=s[u++];for(;u<s[0]&&!x;)switch(E[f++]=A,w=900*w+A,A=s[u++],A){case X.TEXT_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH:case X.NUMERIC_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:u--,x=!0;break;default:if(f%5===0&&f>0){for(let I=0;I<6;++I)d.write(Number(Gn(w)>>Gn(8*(5-I))));w=0,f=0}break}u===s[0]&&A<X.TEXT_COMPACTION_MODE_LATCH&&(E[f++]=A);for(let I=0;I<f;I++)d.write(E[I]);break;case X.BYTE_COMPACTION_MODE_LATCH_6:for(;u<s[0]&&!x;){let I=s[u++];if(I<X.TEXT_COMPACTION_MODE_LATCH)f++,w=900*w+I;else switch(I){case X.TEXT_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH:case X.NUMERIC_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:u--,x=!0;break}if(f%5===0&&f>0){for(let D=0;D<6;++D)d.write(Number(Gn(w)>>Gn(8*(5-D))));w=0,f=0}}break}return c.append(J.decode(d.toByteArray(),o)),u}static numericCompaction(n,s,o){let u=0,c=!1,d=new Int32Array(X.MAX_NUMERIC_CODEWORDS);for(;s<n[0]&&!c;){let f=n[s++];if(s===n[0]&&(c=!0),f<X.TEXT_COMPACTION_MODE_LATCH)d[u]=f,u++;else switch(f){case X.TEXT_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:s--,c=!0;break}(u%X.MAX_NUMERIC_CODEWORDS===0||f===X.NUMERIC_COMPACTION_MODE_LATCH||c)&&u>0&&(o.append(X.decodeBase900toBase10(d,u)),u=0)}return s}static decodeBase900toBase10(n,s){let o=Gn(0);for(let c=0;c<s;c++)o+=X.EXP900[s-c-1]*Gn(n[c]);let u=o.toString();if(u.charAt(0)!=="1")throw new U;return u.substring(1)}}X.TEXT_COMPACTION_MODE_LATCH=900,X.BYTE_COMPACTION_MODE_LATCH=901,X.NUMERIC_COMPACTION_MODE_LATCH=902,X.BYTE_COMPACTION_MODE_LATCH_6=924,X.ECI_USER_DEFINED=925,X.ECI_GENERAL_PURPOSE=926,X.ECI_CHARSET=927,X.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,X.MACRO_PDF417_TERMINATOR=922,X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,X.MAX_NUMERIC_CODEWORDS=15,X.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,X.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,X.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,X.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,X.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,X.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,X.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,X.PL=25,X.LL=27,X.AS=27,X.ML=28,X.AL=28,X.PS=29,X.PAL=29,X.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,X.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",X.EXP900=Gh()?m2():[],X.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Le{constructor(){}static decode(n,s,o,u,c,d,f){let w=new Si(n,s,o,u,c),x=null,E=null,A;for(let F=!0;;F=!1){if(s!=null&&(x=Le.getRowIndicatorColumn(n,w,s,!0,d,f)),u!=null&&(E=Le.getRowIndicatorColumn(n,w,u,!1,d,f)),A=Le.merge(x,E),A==null)throw K.getNotFoundInstance();let z=A.getBoundingBox();if(F&&z!=null&&(z.getMinY()<w.getMinY()||z.getMaxY()>w.getMaxY()))w=z;else break}A.setBoundingBox(w);let I=A.getBarcodeColumnCount()+1;A.setDetectionResultColumn(0,x),A.setDetectionResultColumn(I,E);let D=x!=null;for(let F=1;F<=I;F++){let z=D?F:I-F;if(A.getDetectionResultColumn(z)!==void 0)continue;let H;z===0||z===I?H=new zh(w,z===0):H=new no(w),A.setDetectionResultColumn(z,H);let $=-1,ie=$;for(let se=w.getMinY();se<=w.getMaxY();se++){if($=Le.getStartColumn(A,z,se,D),$<0||$>w.getMaxX()){if(ie===-1)continue;$=ie}let ee=Le.detectCodeword(n,w.getMinX(),w.getMaxX(),D,$,se,d,f);ee!=null&&(H.setCodeword(se,ee),ie=$,d=Math.min(d,ee.getWidth()),f=Math.max(f,ee.getWidth()))}}return Le.createDecoderResult(A)}static merge(n,s){if(n==null&&s==null)return null;let o=Le.getBarcodeMetadata(n,s);if(o==null)return null;let u=Si.merge(Le.adjustBoundingBox(n),Le.adjustBoundingBox(s));return new so(o,u)}static adjustBoundingBox(n){if(n==null)return null;let s=n.getRowHeights();if(s==null)return null;let o=Le.getMax(s),u=0;for(let f of s)if(u+=o-f,f>0)break;let c=n.getCodewords();for(let f=0;u>0&&c[f]==null;f++)u--;let d=0;for(let f=s.length-1;f>=0&&(d+=o-s[f],!(s[f]>0));f--);for(let f=c.length-1;d>0&&c[f]==null;f--)d--;return n.getBoundingBox().addMissingRows(u,d,n.isLeft())}static getMax(n){let s=-1;for(let o of n)s=Math.max(s,o);return s}static getBarcodeMetadata(n,s){let o;if(n==null||(o=n.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let u;return s==null||(u=s.getBarcodeMetadata())==null?o:o.getColumnCount()!==u.getColumnCount()&&o.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&o.getRowCount()!==u.getRowCount()?null:o}static getRowIndicatorColumn(n,s,o,u,c,d){let f=new zh(s,u);for(let w=0;w<2;w++){let x=w===0?1:-1,E=Math.trunc(Math.trunc(o.getX()));for(let A=Math.trunc(Math.trunc(o.getY()));A<=s.getMaxY()&&A>=s.getMinY();A+=x){let I=Le.detectCodeword(n,0,n.getWidth(),u,E,A,c,d);I!=null&&(f.setCodeword(A,I),u?E=I.getStartX():E=I.getEndX())}}return f}static adjustCodewordCount(n,s){let o=s[0][1],u=o.getValue(),c=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-Le.getNumberOfECCodeWords(n.getBarcodeECLevel());if(u.length===0){if(c<1||c>Te.MAX_CODEWORDS_IN_BARCODE)throw K.getNotFoundInstance();o.setValue(c)}else u[0]!==c&&o.setValue(c)}static createDecoderResult(n){let s=Le.createBarcodeMatrix(n);Le.adjustCodewordCount(n,s);let o=new Array,u=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),c=[],d=new Array;for(let w=0;w<n.getBarcodeRowCount();w++)for(let x=0;x<n.getBarcodeColumnCount();x++){let E=s[w][x+1].getValue(),A=w*n.getBarcodeColumnCount()+x;E.length===0?o.push(A):E.length===1?u[A]=E[0]:(d.push(A),c.push(E))}let f=new Array(c.length);for(let w=0;w<f.length;w++)f[w]=c[w];return Le.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),u,Te.toIntArray(o),Te.toIntArray(d),f)}static createDecoderResultFromAmbiguousValues(n,s,o,u,c){let d=new Int32Array(u.length),f=100;for(;f-- >0;){for(let w=0;w<d.length;w++)s[u[w]]=c[w][d[w]];try{return Le.decodeCodewords(s,n,o)}catch(w){if(!(w instanceof T))throw w}if(d.length===0)throw T.getChecksumInstance();for(let w=0;w<d.length;w++)if(d[w]<c[w].length-1){d[w]++;break}else if(d[w]=0,w===d.length-1)throw T.getChecksumInstance()}throw T.getChecksumInstance()}static createBarcodeMatrix(n){let s=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let u=0;u<s.length;u++)for(let c=0;c<s[u].length;c++)s[u][c]=new io;let o=0;for(let u of n.getDetectionResultColumns()){if(u!=null){for(let c of u.getCodewords())if(c!=null){let d=c.getRowNumber();if(d>=0){if(d>=s.length)continue;s[d][o].setValue(c.getValue())}}}o++}return s}static isValidBarcodeColumn(n,s){return s>=0&&s<=n.getBarcodeColumnCount()+1}static getStartColumn(n,s,o,u){let c=u?1:-1,d=null;if(Le.isValidBarcodeColumn(n,s-c)&&(d=n.getDetectionResultColumn(s-c).getCodeword(o)),d!=null)return u?d.getEndX():d.getStartX();if(d=n.getDetectionResultColumn(s).getCodewordNearby(o),d!=null)return u?d.getStartX():d.getEndX();if(Le.isValidBarcodeColumn(n,s-c)&&(d=n.getDetectionResultColumn(s-c).getCodewordNearby(o)),d!=null)return u?d.getEndX():d.getStartX();let f=0;for(;Le.isValidBarcodeColumn(n,s-c);){s-=c;for(let w of n.getDetectionResultColumn(s).getCodewords())if(w!=null)return(u?w.getEndX():w.getStartX())+c*f*(w.getEndX()-w.getStartX());f++}return u?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,s,o,u,c,d,f,w){c=Le.adjustCodewordStartColumn(n,s,o,u,c,d);let x=Le.getModuleBitCount(n,s,o,u,c,d);if(x==null)return null;let E,A=ye.sum(x);if(u)E=c+A;else{for(let F=0;F<x.length/2;F++){let z=x[F];x[F]=x[x.length-1-F],x[x.length-1-F]=z}E=c,c=E-A}if(!Le.checkCodewordSkew(A,f,w))return null;let I=yr.getDecodedValue(x),D=Te.getCodeword(I);return D===-1?null:new oo(c,E,Le.getCodewordBucketNumber(I),D)}static getModuleBitCount(n,s,o,u,c,d){let f=c,w=new Int32Array(8),x=0,E=u?1:-1,A=u;for(;(u?f<o:f>=s)&&x<w.length;)n.get(f,d)===A?(w[x]++,f+=E):(x++,A=!A);return x===w.length||f===(u?o:s)&&x===w.length-1?w:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,s,o,u,c,d){let f=c,w=u?-1:1;for(let x=0;x<2;x++){for(;(u?f>=s:f<o)&&u===n.get(f,d);){if(Math.abs(c-f)>Le.CODEWORD_SKEW_SIZE)return c;f+=w}w=-w,u=!u}return f}static checkCodewordSkew(n,s,o){return s-Le.CODEWORD_SKEW_SIZE<=n&&n<=o+Le.CODEWORD_SKEW_SIZE}static decodeCodewords(n,s,o){if(n.length===0)throw U.getFormatInstance();let u=1<<s+1,c=Le.correctErrors(n,o,u);Le.verifyCodewordCount(n,u);let d=X.decode(n,""+s);return d.setErrorsCorrected(c),d.setErasures(o.length),d}static correctErrors(n,s,o){if(s!=null&&s.length>o/2+Le.MAX_ERRORS||o<0||o>Le.MAX_EC_CODEWORDS)throw T.getChecksumInstance();return Le.errorCorrection.decode(n,o,s)}static verifyCodewordCount(n,s){if(n.length<4)throw U.getFormatInstance();let o=n[0];if(o>n.length)throw U.getFormatInstance();if(o===0)if(s<n.length)n[0]=n.length-s;else throw U.getFormatInstance()}static getBitCountForCodeword(n){let s=new Int32Array(8),o=0,u=s.length-1;for(;!((n&1)!==o&&(o=n&1,u--,u<0));)s[u]++,n>>=1;return s}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return Le.getCodewordBucketNumber(Le.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let s=new ro;for(let o=0;o<n.length;o++){s.format("Row %2d: ",o);for(let u=0;u<n[o].length;u++){let c=n[o][u];c.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}s.format("%n")}return s.toString()}}Le.CODEWORD_SKEW_SIZE=2,Le.MAX_ERRORS=3,Le.MAX_EC_CODEWORDS=512,Le.errorCorrection=new Uh;class qt{decode(n,s=null){let o=qt.decode(n,s,!1);if(o==null||o.length===0||o[0]==null)throw K.getNotFoundInstance();return o[0]}decodeMultiple(n,s=null){try{return qt.decode(n,s,!0)}catch(o){throw o instanceof U||o instanceof T?K.getNotFoundInstance():o}}static decode(n,s,o){const u=new Array,c=De.detectMultiple(n,s,o);for(const d of c.getPoints()){const f=Le.decode(c.getBits(),d[4],d[5],d[6],d[7],qt.getMinCodewordWidth(d),qt.getMaxCodewordWidth(d)),w=new Re(f.getText(),f.getRawBytes(),void 0,d,le.PDF_417);w.putMetadata(_e.ERROR_CORRECTION_LEVEL,f.getECLevel());const x=f.getOther();x!=null&&w.putMetadata(_e.PDF417_EXTRA_METADATA,x),u.push(w)}return u.map(d=>d)}static getMaxWidth(n,s){return n==null||s==null?0:Math.trunc(Math.abs(n.getX()-s.getX()))}static getMinWidth(n,s){return n==null||s==null?S.MAX_VALUE:Math.trunc(Math.abs(n.getX()-s.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(qt.getMaxWidth(n[0],n[4]),qt.getMaxWidth(n[6],n[2])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN),Math.max(qt.getMaxWidth(n[1],n[5]),qt.getMaxWidth(n[7],n[3])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(qt.getMinWidth(n[0],n[4]),qt.getMinWidth(n[6],n[2])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN),Math.min(qt.getMinWidth(n[1],n[5]),qt.getMinWidth(n[7],n[3])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN)))}reset(){}}class wa extends g{}wa.kind="ReaderException";class Yh{constructor(n,s){this.verbose=n===!0,s&&this.setHints(s)}decode(n,s){return s&&this.setHints(s),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const s=!i(n)&&n.get(G.TRY_HARDER)===!0,o=i(n)?null:n.get(G.POSSIBLE_FORMATS),u=new Array;if(!i(o)){const c=o.some(d=>d===le.UPC_A||d===le.UPC_E||d===le.EAN_13||d===le.EAN_8||d===le.CODABAR||d===le.CODE_39||d===le.CODE_93||d===le.CODE_128||d===le.ITF||d===le.RSS_14||d===le.RSS_EXPANDED);c&&!s&&u.push(new ts(n,this.verbose)),o.includes(le.QR_CODE)&&u.push(new Wn),o.includes(le.DATA_MATRIX)&&u.push(new Hn),o.includes(le.AZTEC)&&u.push(new Qr),o.includes(le.PDF_417)&&u.push(new qt),c&&s&&u.push(new ts(n,this.verbose))}u.length===0&&(s||u.push(new ts(n,this.verbose)),u.push(new Wn),u.push(new Hn),u.push(new Qr),u.push(new qt),s&&u.push(new ts(n,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new wa("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(n,this.hints)}catch(o){if(o instanceof wa)continue}throw new K("No MultiFormat Readers were able to detect the code.")}}class w2 extends he{constructor(n=null,s=500){const o=new Yh;o.setHints(n),super(o,s)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class x2 extends he{constructor(n=500){super(new qt,n)}}class y2 extends he{constructor(n=500){super(new Wn,n)}}var Eu;(function(_){_[_.ERROR_CORRECTION=0]="ERROR_CORRECTION",_[_.CHARACTER_SET=1]="CHARACTER_SET",_[_.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",_[_.MIN_SIZE=3]="MIN_SIZE",_[_.MAX_SIZE=4]="MAX_SIZE",_[_.MARGIN=5]="MARGIN",_[_.PDF417_COMPACT=6]="PDF417_COMPACT",_[_.PDF417_COMPACTION=7]="PDF417_COMPACTION",_[_.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",_[_.AZTEC_LAYERS=9]="AZTEC_LAYERS",_[_.QR_VERSION=10]="QR_VERSION"})(Eu||(Eu={}));var Bt=Eu;class Cu{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new Se(n,Int32Array.from([1])))}buildGenerator(n){const s=this.cachedGenerators;if(n>=s.length){let o=s[s.length-1];const u=this.field;for(let c=s.length;c<=n;c++){const d=o.multiply(new Se(u,Int32Array.from([1,u.exp(c-1+u.getGeneratorBase())])));s.push(d),o=d}}return s[n]}encode(n,s){if(s===0)throw new v("No error correction bytes");const o=n.length-s;if(o<=0)throw new v("No data bytes provided");const u=this.buildGenerator(s),c=new Int32Array(o);L.arraycopy(n,0,c,0,o);let d=new Se(this.field,c);d=d.multiplyByMonomial(s,1);const w=d.divide(u)[1].getCoefficients(),x=s-w.length;for(let E=0;E<x;E++)n[o+E]=0;L.arraycopy(w,0,n,o+x,w.length)}}class St{constructor(){}static applyMaskPenaltyRule1(n){return St.applyMaskPenaltyRule1Internal(n,!0)+St.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let s=0;const o=n.getArray(),u=n.getWidth(),c=n.getHeight();for(let d=0;d<c-1;d++){const f=o[d];for(let w=0;w<u-1;w++){const x=f[w];x===f[w+1]&&x===o[d+1][w]&&x===o[d+1][w+1]&&s++}}return St.N2*s}static applyMaskPenaltyRule3(n){let s=0;const o=n.getArray(),u=n.getWidth(),c=n.getHeight();for(let d=0;d<c;d++)for(let f=0;f<u;f++){const w=o[d];f+6<u&&w[f]===1&&w[f+1]===0&&w[f+2]===1&&w[f+3]===1&&w[f+4]===1&&w[f+5]===0&&w[f+6]===1&&(St.isWhiteHorizontal(w,f-4,f)||St.isWhiteHorizontal(w,f+7,f+11))&&s++,d+6<c&&o[d][f]===1&&o[d+1][f]===0&&o[d+2][f]===1&&o[d+3][f]===1&&o[d+4][f]===1&&o[d+5][f]===0&&o[d+6][f]===1&&(St.isWhiteVertical(o,f,d-4,d)||St.isWhiteVertical(o,f,d+7,d+11))&&s++}return s*St.N3}static isWhiteHorizontal(n,s,o){s=Math.max(s,0),o=Math.min(o,n.length);for(let u=s;u<o;u++)if(n[u]===1)return!1;return!0}static isWhiteVertical(n,s,o,u){o=Math.max(o,0),u=Math.min(u,n.length);for(let c=o;c<u;c++)if(n[c][s]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let s=0;const o=n.getArray(),u=n.getWidth(),c=n.getHeight();for(let w=0;w<c;w++){const x=o[w];for(let E=0;E<u;E++)x[E]===1&&s++}const d=n.getHeight()*n.getWidth();return Math.floor(Math.abs(s*2-d)*10/d)*St.N4}static getDataMaskBit(n,s,o){let u,c;switch(n){case 0:u=o+s&1;break;case 1:u=o&1;break;case 2:u=s%3;break;case 3:u=(o+s)%3;break;case 4:u=Math.floor(o/2)+Math.floor(s/3)&1;break;case 5:c=o*s,u=(c&1)+c%3;break;case 6:c=o*s,u=(c&1)+c%3&1;break;case 7:c=o*s,u=c%3+(o+s&1)&1;break;default:throw new v("Invalid mask pattern: "+n)}return u===0}static applyMaskPenaltyRule1Internal(n,s){let o=0;const u=s?n.getHeight():n.getWidth(),c=s?n.getWidth():n.getHeight(),d=n.getArray();for(let f=0;f<u;f++){let w=0,x=-1;for(let E=0;E<c;E++){const A=s?d[f][E]:d[E][f];A===x?w++:(w>=5&&(o+=St.N1+(w-5)),w=1,x=A)}w>=5&&(o+=St.N1+(w-5))}return o}}St.N1=3,St.N2=3,St.N3=40,St.N4=10;class xa{constructor(n,s){this.width=n,this.height=s;const o=new Array(s);for(let u=0;u!==s;u++)o[u]=new Uint8Array(n);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(n,s){return this.bytes[s][n]}getArray(){return this.bytes}setNumber(n,s,o){this.bytes[s][n]=o}setBoolean(n,s,o){this.bytes[s][n]=o?1:0}clear(n){for(const s of this.bytes)b.fill(s,n)}equals(n){if(!(n instanceof xa))return!1;const s=n;if(this.width!==s.width||this.height!==s.height)return!1;for(let o=0,u=this.height;o<u;++o){const c=this.bytes[o],d=s.bytes[o];for(let f=0,w=this.width;f<w;++f)if(c[f]!==d[f])return!1}return!0}toString(){const n=new ue;for(let s=0,o=this.height;s<o;++s){const u=this.bytes[s];for(let c=0,d=this.width;c<d;++c)switch(u[c]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class bi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new ue;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<bi.NUM_MASK_PATTERNS}}bi.NUM_MASK_PATTERNS=8;class it extends g{}it.kind="WriterException";class be{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,s,o,u,c){be.clearMatrix(c),be.embedBasicPatterns(o,c),be.embedTypeInfo(s,u,c),be.maybeEmbedVersionInfo(o,c),be.embedDataBits(n,u,c)}static embedBasicPatterns(n,s){be.embedPositionDetectionPatternsAndSeparators(s),be.embedDarkDotAtLeftBottomCorner(s),be.maybeEmbedPositionAdjustmentPatterns(n,s),be.embedTimingPatterns(s)}static embedTypeInfo(n,s,o){const u=new M;be.makeTypeInfoBits(n,s,u);for(let c=0,d=u.getSize();c<d;++c){const f=u.get(u.getSize()-1-c),w=be.TYPE_INFO_COORDINATES[c],x=w[0],E=w[1];if(o.setBoolean(x,E,f),c<8){const A=o.getWidth()-c-1;o.setBoolean(A,8,f)}else{const I=o.getHeight()-7+(c-8);o.setBoolean(8,I,f)}}}static maybeEmbedVersionInfo(n,s){if(n.getVersionNumber()<7)return;const o=new M;be.makeVersionInfoBits(n,o);let u=6*3-1;for(let c=0;c<6;++c)for(let d=0;d<3;++d){const f=o.get(u);u--,s.setBoolean(c,s.getHeight()-11+d,f),s.setBoolean(s.getHeight()-11+d,c,f)}}static embedDataBits(n,s,o){let u=0,c=-1,d=o.getWidth()-1,f=o.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);f>=0&&f<o.getHeight();){for(let w=0;w<2;++w){const x=d-w;if(!be.isEmpty(o.get(x,f)))continue;let E;u<n.getSize()?(E=n.get(u),++u):E=!1,s!==255&&St.getDataMaskBit(s,x,f)&&(E=!E),o.setBoolean(x,f,E)}f+=c}c=-c,f+=c,d-=2}if(u!==n.getSize())throw new it("Not all bits consumed: "+u+"/"+n.getSize())}static findMSBSet(n){return 32-S.numberOfLeadingZeros(n)}static calculateBCHCode(n,s){if(s===0)throw new v("0 polynomial");const o=be.findMSBSet(s);for(n<<=o-1;be.findMSBSet(n)>=o;)n^=s<<be.findMSBSet(n)-o;return n}static makeTypeInfoBits(n,s,o){if(!bi.isValidMaskPattern(s))throw new it("Invalid mask pattern");const u=n.getBits()<<3|s;o.appendBits(u,5);const c=be.calculateBCHCode(u,be.TYPE_INFO_POLY);o.appendBits(c,10);const d=new M;if(d.appendBits(be.TYPE_INFO_MASK_PATTERN,15),o.xor(d),o.getSize()!==15)throw new it("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(n,s){s.appendBits(n.getVersionNumber(),6);const o=be.calculateBCHCode(n.getVersionNumber(),be.VERSION_INFO_POLY);if(s.appendBits(o,12),s.getSize()!==18)throw new it("should not happen but we got: "+s.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let s=8;s<n.getWidth()-8;++s){const o=(s+1)%2;be.isEmpty(n.get(s,6))&&n.setNumber(s,6,o),be.isEmpty(n.get(6,s))&&n.setNumber(6,s,o)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new it;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,s,o){for(let u=0;u<8;++u){if(!be.isEmpty(o.get(n+u,s)))throw new it;o.setNumber(n+u,s,0)}}static embedVerticalSeparationPattern(n,s,o){for(let u=0;u<7;++u){if(!be.isEmpty(o.get(n,s+u)))throw new it;o.setNumber(n,s+u,0)}}static embedPositionAdjustmentPattern(n,s,o){for(let u=0;u<5;++u){const c=be.POSITION_ADJUSTMENT_PATTERN[u];for(let d=0;d<5;++d)o.setNumber(n+d,s+u,c[d])}}static embedPositionDetectionPattern(n,s,o){for(let u=0;u<7;++u){const c=be.POSITION_DETECTION_PATTERN[u];for(let d=0;d<7;++d)o.setNumber(n+d,s+u,c[d])}}static embedPositionDetectionPatternsAndSeparators(n){const s=be.POSITION_DETECTION_PATTERN[0].length;be.embedPositionDetectionPattern(0,0,n),be.embedPositionDetectionPattern(n.getWidth()-s,0,n),be.embedPositionDetectionPattern(0,n.getWidth()-s,n);const o=8;be.embedHorizontalSeparationPattern(0,o-1,n),be.embedHorizontalSeparationPattern(n.getWidth()-o,o-1,n),be.embedHorizontalSeparationPattern(0,n.getWidth()-o,n);const u=7;be.embedVerticalSeparationPattern(u,0,n),be.embedVerticalSeparationPattern(n.getHeight()-u-1,0,n),be.embedVerticalSeparationPattern(u,n.getHeight()-u,n)}static maybeEmbedPositionAdjustmentPatterns(n,s){if(n.getVersionNumber()<2)return;const o=n.getVersionNumber()-1,u=be.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let c=0,d=u.length;c!==d;c++){const f=u[c];if(f>=0)for(let w=0;w!==d;w++){const x=u[w];x>=0&&be.isEmpty(s.get(x,f))&&be.embedPositionAdjustmentPattern(x-2,f-2,s)}}}}be.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),be.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),be.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),be.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),be.VERSION_INFO_POLY=7973,be.TYPE_INFO_POLY=1335,be.TYPE_INFO_MASK_PATTERN=21522;class v2{constructor(n,s){this.dataBytes=n,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class dt{constructor(){}static calculateMaskPenalty(n){return St.applyMaskPenaltyRule1(n)+St.applyMaskPenaltyRule2(n)+St.applyMaskPenaltyRule3(n)+St.applyMaskPenaltyRule4(n)}static encode(n,s,o=null){let u=dt.DEFAULT_BYTE_MODE_ENCODING;const c=o!==null&&o.get(Bt.CHARACTER_SET)!==void 0;c&&(u=o.get(Bt.CHARACTER_SET).toString());const d=this.chooseMode(n,u),f=new M;if(d===Ae.BYTE&&(c||dt.DEFAULT_BYTE_MODE_ENCODING!==u)){const se=N.getCharacterSetECIByName(u);se!==void 0&&this.appendECI(se,f)}this.appendModeInfo(d,f);const w=new M;this.appendBytes(n,d,w,u);let x;if(o!==null&&o.get(Bt.QR_VERSION)!==void 0){const se=Number.parseInt(o.get(Bt.QR_VERSION).toString(),10);x=Ee.getVersionForNumber(se);const ee=this.calculateBitsNeeded(d,f,w,x);if(!this.willFit(ee,x,s))throw new it("Data too big for requested version")}else x=this.recommendVersion(s,d,f,w);const E=new M;E.appendBitArray(f);const A=d===Ae.BYTE?w.getSizeInBytes():n.length;this.appendLengthInfo(A,x,d,E),E.appendBitArray(w);const I=x.getECBlocksForLevel(s),D=x.getTotalCodewords()-I.getTotalECCodewords();this.terminateBits(D,E);const F=this.interleaveWithECBytes(E,x.getTotalCodewords(),D,I.getNumBlocks()),z=new bi;z.setECLevel(s),z.setMode(d),z.setVersion(x);const H=x.getDimensionForVersion(),$=new xa(H,H),ie=this.chooseMaskPattern(F,s,x,$);return z.setMaskPattern(ie),be.buildMatrix(F,s,x,ie,$),z.setMatrix($),z}static recommendVersion(n,s,o,u){const c=this.calculateBitsNeeded(s,o,u,Ee.getVersionForNumber(1)),d=this.chooseVersion(c,n),f=this.calculateBitsNeeded(s,o,u,d);return this.chooseVersion(f,n)}static calculateBitsNeeded(n,s,o,u){return s.getSize()+n.getCharacterCountBits(u)+o.getSize()}static getAlphanumericCode(n){return n<dt.ALPHANUMERIC_TABLE.length?dt.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,s=null){if(N.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(n))return Ae.KANJI;let o=!1,u=!1;for(let c=0,d=n.length;c<d;++c){const f=n.charAt(c);if(dt.isDigit(f))o=!0;else if(this.getAlphanumericCode(f.charCodeAt(0))!==-1)u=!0;else return Ae.BYTE}return u?Ae.ALPHANUMERIC:o?Ae.NUMERIC:Ae.BYTE}static isOnlyDoubleByteKanji(n){let s;try{s=J.encode(n,N.SJIS)}catch{return!1}const o=s.length;if(o%2!==0)return!1;for(let u=0;u<o;u+=2){const c=s[u]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(n,s,o,u){let c=Number.MAX_SAFE_INTEGER,d=-1;for(let f=0;f<bi.NUM_MASK_PATTERNS;f++){be.buildMatrix(n,s,o,f,u);let w=this.calculateMaskPenalty(u);w<c&&(c=w,d=f)}return d}static chooseVersion(n,s){for(let o=1;o<=40;o++){const u=Ee.getVersionForNumber(o);if(dt.willFit(n,u,s))return u}throw new it("Data too big")}static willFit(n,s,o){const u=s.getTotalCodewords(),d=s.getECBlocksForLevel(o).getTotalECCodewords(),f=u-d,w=(n+7)/8;return f>=w}static terminateBits(n,s){const o=n*8;if(s.getSize()>o)throw new it("data bits cannot fit in the QR Code"+s.getSize()+" > "+o);for(let d=0;d<4&&s.getSize()<o;++d)s.appendBit(!1);const u=s.getSize()&7;if(u>0)for(let d=u;d<8;d++)s.appendBit(!1);const c=n-s.getSizeInBytes();for(let d=0;d<c;++d)s.appendBits(d&1?17:236,8);if(s.getSize()!==o)throw new it("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,s,o,u,c,d){if(u>=o)throw new it("Block ID too large");const f=n%o,w=o-f,x=Math.floor(n/o),E=x+1,A=Math.floor(s/o),I=A+1,D=x-A,F=E-I;if(D!==F)throw new it("EC bytes mismatch");if(o!==w+f)throw new it("RS blocks mismatch");if(n!==(A+D)*w+(I+F)*f)throw new it("Total bytes mismatch");u<w?(c[0]=A,d[0]=D):(c[0]=I,d[0]=F)}static interleaveWithECBytes(n,s,o,u){if(n.getSizeInBytes()!==o)throw new it("Number of bits and data bytes does not match");let c=0,d=0,f=0;const w=new Array;for(let E=0;E<u;++E){const A=new Int32Array(1),I=new Int32Array(1);dt.getNumDataBytesAndNumECBytesForBlockID(s,o,u,E,A,I);const D=A[0],F=new Uint8Array(D);n.toBytes(8*c,F,0,D);const z=dt.generateECBytes(F,I[0]);w.push(new v2(F,z)),d=Math.max(d,D),f=Math.max(f,z.length),c+=A[0]}if(o!==c)throw new it("Data bytes does not match offset");const x=new M;for(let E=0;E<d;++E)for(const A of w){const I=A.getDataBytes();E<I.length&&x.appendBits(I[E],8)}for(let E=0;E<f;++E)for(const A of w){const I=A.getErrorCorrectionBytes();E<I.length&&x.appendBits(I[E],8)}if(s!==x.getSizeInBytes())throw new it("Interleaving error: "+s+" and "+x.getSizeInBytes()+" differ.");return x}static generateECBytes(n,s){const o=n.length,u=new Int32Array(o+s);for(let d=0;d<o;d++)u[d]=n[d]&255;new Cu(Ie.QR_CODE_FIELD_256).encode(u,s);const c=new Uint8Array(s);for(let d=0;d<s;d++)c[d]=u[o+d];return c}static appendModeInfo(n,s){s.appendBits(n.getBits(),4)}static appendLengthInfo(n,s,o,u){const c=o.getCharacterCountBits(s);if(n>=1<<c)throw new it(n+" is bigger than "+((1<<c)-1));u.appendBits(n,c)}static appendBytes(n,s,o,u){switch(s){case Ae.NUMERIC:dt.appendNumericBytes(n,o);break;case Ae.ALPHANUMERIC:dt.appendAlphanumericBytes(n,o);break;case Ae.BYTE:dt.append8BitBytes(n,o,u);break;case Ae.KANJI:dt.appendKanjiBytes(n,o);break;default:throw new it("Invalid mode: "+s)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const s=dt.getDigit(n);return s>=0&&s<=9}static appendNumericBytes(n,s){const o=n.length;let u=0;for(;u<o;){const c=dt.getDigit(n.charAt(u));if(u+2<o){const d=dt.getDigit(n.charAt(u+1)),f=dt.getDigit(n.charAt(u+2));s.appendBits(c*100+d*10+f,10),u+=3}else if(u+1<o){const d=dt.getDigit(n.charAt(u+1));s.appendBits(c*10+d,7),u+=2}else s.appendBits(c,4),u++}}static appendAlphanumericBytes(n,s){const o=n.length;let u=0;for(;u<o;){const c=dt.getAlphanumericCode(n.charCodeAt(u));if(c===-1)throw new it;if(u+1<o){const d=dt.getAlphanumericCode(n.charCodeAt(u+1));if(d===-1)throw new it;s.appendBits(c*45+d,11),u+=2}else s.appendBits(c,6),u++}}static append8BitBytes(n,s,o){let u;try{u=J.encode(n,o)}catch(c){throw new it(c)}for(let c=0,d=u.length;c!==d;c++){const f=u[c];s.appendBits(f,8)}}static appendKanjiBytes(n,s){let o;try{o=J.encode(n,N.SJIS)}catch(c){throw new it(c)}const u=o.length;for(let c=0;c<u;c+=2){const d=o[c]&255,f=o[c+1]&255,w=d<<8&4294967295|f;let x=-1;if(w>=33088&&w<=40956?x=w-33088:w>=57408&&w<=60351&&(x=w-49472),x===-1)throw new it("Invalid byte sequence");const E=(x>>8)*192+(x&255);s.appendBits(E,13)}}static appendECI(n,s){s.appendBits(Ae.ECI.getBits(),4),s.appendBits(n.getValue(),8)}}dt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),dt.DEFAULT_BYTE_MODE_ENCODING=N.UTF8.getName();class Ii{write(n,s,o,u=null){if(n.length===0)throw new v("Found empty contents");if(s<0||o<0)throw new v("Requested dimensions are too small: "+s+"x"+o);let c=lt.L,d=Ii.QUIET_ZONE_SIZE;u!==null&&(u.get(Bt.ERROR_CORRECTION)!==void 0&&(c=lt.fromString(u.get(Bt.ERROR_CORRECTION).toString())),u.get(Bt.MARGIN)!==void 0&&(d=Number.parseInt(u.get(Bt.MARGIN).toString(),10)));const f=dt.encode(n,c,u);return this.renderResult(f,s,o,d)}writeToDom(n,s,o,u,c=null){typeof n=="string"&&(n=document.querySelector(n));const d=this.write(s,o,u,c);n&&n.appendChild(d)}renderResult(n,s,o,u){const c=n.getMatrix();if(c===null)throw new Pe;const d=c.getWidth(),f=c.getHeight(),w=d+u*2,x=f+u*2,E=Math.max(s,w),A=Math.max(o,x),I=Math.min(Math.floor(E/w),Math.floor(A/x)),D=Math.floor((E-d*I)/2),F=Math.floor((A-f*I)/2),z=this.createSVGElement(E,A);for(let H=0,$=F;H<f;H++,$+=I)for(let ie=0,se=D;ie<d;ie++,se+=I)if(c.get(ie,H)===1){const ee=this.createSvgRectElement(se,$,I,I);z.appendChild(ee)}return z}createSVGElement(n,s){const o=document.createElementNS(Ii.SVG_NS,"svg");return o.setAttributeNS(null,"height",n.toString()),o.setAttributeNS(null,"width",s.toString()),o}createSvgRectElement(n,s,o,u){const c=document.createElementNS(Ii.SVG_NS,"rect");return c.setAttributeNS(null,"x",n.toString()),c.setAttributeNS(null,"y",s.toString()),c.setAttributeNS(null,"height",o.toString()),c.setAttributeNS(null,"width",u.toString()),c.setAttributeNS(null,"fill","#000000"),c}}Ii.QUIET_ZONE_SIZE=4,Ii.SVG_NS="http://www.w3.org/2000/svg";class ns{encode(n,s,o,u,c){if(n.length===0)throw new v("Found empty contents");if(s!==le.QR_CODE)throw new v("Can only encode QR_CODE, but got "+s);if(o<0||u<0)throw new v(`Requested dimensions are too small: ${o}x${u}`);let d=lt.L,f=ns.QUIET_ZONE_SIZE;c!==null&&(c.get(Bt.ERROR_CORRECTION)!==void 0&&(d=lt.fromString(c.get(Bt.ERROR_CORRECTION).toString())),c.get(Bt.MARGIN)!==void 0&&(f=Number.parseInt(c.get(Bt.MARGIN).toString(),10)));const w=dt.encode(n,d,c);return ns.renderResult(w,o,u,f)}static renderResult(n,s,o,u){const c=n.getMatrix();if(c===null)throw new Pe;const d=c.getWidth(),f=c.getHeight(),w=d+u*2,x=f+u*2,E=Math.max(s,w),A=Math.max(o,x),I=Math.min(Math.floor(E/w),Math.floor(A/x)),D=Math.floor((E-d*I)/2),F=Math.floor((A-f*I)/2),z=new Oe(E,A);for(let H=0,$=F;H<f;H++,$+=I)for(let ie=0,se=D;ie<d;ie++,se+=I)c.get(ie,H)===1&&z.setRegion(se,$,I,I);return z}}ns.QUIET_ZONE_SIZE=4;class E2{encode(n,s,o,u,c){let d;switch(s){case le.QR_CODE:d=new ns;break;default:throw new v("No encoder available for format "+s)}return d.encode(n,s,o,u,c)}}class mn extends re{constructor(n,s,o,u,c,d,f,w){if(super(d,f),this.yuvData=n,this.dataWidth=s,this.dataHeight=o,this.left=u,this.top=c,u+d>s||c+f>o)throw new v("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(d,f)}getRow(n,s){if(n<0||n>=this.getHeight())throw new v("Requested row is outside the image: "+n);const o=this.getWidth();(s==null||s.length<o)&&(s=new Uint8ClampedArray(o));const u=(n+this.top)*this.dataWidth+this.left;return L.arraycopy(this.yuvData,u,s,0,o),s}getMatrix(){const n=this.getWidth(),s=this.getHeight();if(n===this.dataWidth&&s===this.dataHeight)return this.yuvData;const o=n*s,u=new Uint8ClampedArray(o);let c=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return L.arraycopy(this.yuvData,c,u,0,o),u;for(let d=0;d<s;d++){const f=d*n;L.arraycopy(this.yuvData,c,u,f,n),c+=this.dataWidth}return u}isCropSupported(){return!0}crop(n,s,o,u){return new mn(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+s,o,u,!1)}renderThumbnail(){const n=this.getWidth()/mn.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/mn.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(n*s),u=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let d=0;d<s;d++){const f=d*n;for(let w=0;w<n;w++){const x=u[c+w*mn.THUMBNAIL_SCALE_FACTOR]&255;o[f+w]=4278190080|x*65793}c+=this.dataWidth*mn.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/mn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/mn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,s){const o=this.yuvData;for(let u=0,c=this.top*this.dataWidth+this.left;u<s;u++,c+=this.dataWidth){const d=c+n/2;for(let f=c,w=c+n-1;f<d;f++,w--){const x=o[f];o[f]=o[w],o[w]=x}}}invert(){return new te(this)}}mn.THUMBNAIL_SCALE_FACTOR=2;class _u extends re{constructor(n,s,o,u,c,d,f){if(super(s,o),this.dataWidth=u,this.dataHeight=c,this.left=d,this.top=f,n.BYTES_PER_ELEMENT===4){const w=s*o,x=new Uint8ClampedArray(w);for(let E=0;E<w;E++){const A=n[E],I=A>>16&255,D=A>>7&510,F=A&255;x[E]=(I+D+F)/4&255}this.luminances=x}else this.luminances=n;if(u===void 0&&(this.dataWidth=s),c===void 0&&(this.dataHeight=o),d===void 0&&(this.left=0),f===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+o>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(n,s){if(n<0||n>=this.getHeight())throw new v("Requested row is outside the image: "+n);const o=this.getWidth();(s==null||s.length<o)&&(s=new Uint8ClampedArray(o));const u=(n+this.top)*this.dataWidth+this.left;return L.arraycopy(this.luminances,u,s,0,o),s}getMatrix(){const n=this.getWidth(),s=this.getHeight();if(n===this.dataWidth&&s===this.dataHeight)return this.luminances;const o=n*s,u=new Uint8ClampedArray(o);let c=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return L.arraycopy(this.luminances,c,u,0,o),u;for(let d=0;d<s;d++){const f=d*n;L.arraycopy(this.luminances,c,u,f,n),c+=this.dataWidth}return u}isCropSupported(){return!0}crop(n,s,o,u){return new _u(this.luminances,o,u,this.dataWidth,this.dataHeight,this.left+n,this.top+s)}invert(){return new te(this)}}class Xh extends N{static forName(n){return this.getCharacterSetECIByName(n)}}class Au{}Au.ISO_8859_1=N.ISO8859_1;class $h{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class Kh{static singletonList(n){return[n]}static min(n,s){return n.sort(s)[0]}}class C2{constructor(n){this.previous=n}getPrevious(){return this.previous}}class is extends C2{constructor(n,s,o){super(n),this.value=s,this.bitCount=o}appendTo(n,s){n.appendBits(this.value,this.bitCount)}add(n,s){return new is(this,n,s)}addBinaryShift(n,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new is(this,n,s)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+S.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class Su extends is{constructor(n,s,o){super(n,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=o}appendTo(n,s){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):o===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(s[this.binaryShiftStart+o],8)}addBinaryShift(n,s){return new Su(this,n,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function _2(_,n,s){return new Su(_,n,s)}function ao(_,n,s){return new is(_,n,s)}const A2=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Yn=0,ya=1,Hr=2,qh=3,wn=4,S2=new is(null,0,0),bu=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function b2(_){for(let n of _)b.fill(n,-1);return _[Yn][wn]=0,_[ya][wn]=0,_[ya][Yn]=28,_[qh][wn]=0,_[Hr][wn]=0,_[Hr][Yn]=15,_}const Qh=b2(b.createInt32Array(6,6));class xn{constructor(n,s,o,u){this.token=n,this.mode=s,this.binaryShiftByteCount=o,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,s){let o=this.bitCount,u=this.token;if(n!==this.mode){let d=bu[this.mode][n];u=ao(u,d&65535,d>>16),o+=d>>16}let c=n===Hr?4:5;return u=ao(u,s,c),new xn(u,n,0,o+c)}shiftAndAppend(n,s){let o=this.token,u=this.mode===Hr?4:5;return o=ao(o,Qh[this.mode][n],u),o=ao(o,s,5),new xn(o,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(n){let s=this.token,o=this.mode,u=this.bitCount;if(this.mode===wn||this.mode===Hr){let f=bu[o][Yn];s=ao(s,f&65535,f>>16),u+=f>>16,o=Yn}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new xn(s,o,this.binaryShiftByteCount+1,u+c);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(n+1)),d}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=_2(s,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new xn(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let s=this.bitCount+(bu[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?s+=xn.calculateBinaryShiftCost(n)-xn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(s+=10),s<=n.bitCount}toBitArray(n){let s=[];for(let u=this.endBinaryShift(n.length).token;u!==null;u=u.getPrevious())s.unshift(u);let o=new M;for(const u of s)u.appendTo(o,n);return o}toString(){return Q.format("%s bits=%d bytes=%d",A2[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}xn.INITIAL_STATE=new xn(S2,Yn,0,0);function I2(_){const n=Q.getCharCode(" "),s=Q.getCharCode("."),o=Q.getCharCode(",");_[Yn][n]=1;const u=Q.getCharCode("Z"),c=Q.getCharCode("A");for(let I=c;I<=u;I++)_[Yn][I]=I-c+2;_[ya][n]=1;const d=Q.getCharCode("z"),f=Q.getCharCode("a");for(let I=f;I<=d;I++)_[ya][I]=I-f+2;_[Hr][n]=1;const w=Q.getCharCode("9"),x=Q.getCharCode("0");for(let I=x;I<=w;I++)_[Hr][I]=I-x+2;_[Hr][o]=12,_[Hr][s]=13;const E=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let I=0;I<E.length;I++)_[qh][Q.getCharCode(E[I])]=I;const A=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let I=0;I<A.length;I++)Q.getCharCode(A[I])>0&&(_[wn][Q.getCharCode(A[I])]=I);return _}const Iu=I2(b.createInt32Array(5,256));class lo{constructor(n){this.text=n}encode(){const n=Q.getCharCode(" "),s=Q.getCharCode(`
`);let o=Kh.singletonList(xn.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let d,f=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case Q.getCharCode("\r"):d=f===s?2:0;break;case Q.getCharCode("."):d=f===n?3:0;break;case Q.getCharCode(","):d=f===n?4:0;break;case Q.getCharCode(":"):d=f===n?5:0;break;default:d=0}d>0?(o=lo.updateStateListForPair(o,c,d),c++):o=this.updateStateListForChar(o,c)}return Kh.min(o,(c,d)=>c.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,s){const o=[];for(let u of n)this.updateStateForChar(u,s,o);return lo.simplifyStates(o)}updateStateForChar(n,s,o){let u=this.text[s]&255,c=Iu[n.getMode()][u]>0,d=null;for(let f=0;f<=wn;f++){let w=Iu[f][u];if(w>0){if(d==null&&(d=n.endBinaryShift(s)),!c||f===n.getMode()||f===Hr){const x=d.latchAndAppend(f,w);o.push(x)}if(!c&&Qh[n.getMode()][f]>=0){const x=d.shiftAndAppend(f,w);o.push(x)}}}if(n.getBinaryShiftByteCount()>0||Iu[n.getMode()][u]===0){let f=n.addBinaryShiftChar(s);o.push(f)}}static updateStateListForPair(n,s,o){const u=[];for(let c of n)this.updateStateForPair(c,s,o,u);return this.simplifyStates(u)}static updateStateForPair(n,s,o,u){let c=n.endBinaryShift(s);if(u.push(c.latchAndAppend(wn,o)),n.getMode()!==wn&&u.push(c.shiftAndAppend(wn,o)),o===3||o===4){let d=c.latchAndAppend(Hr,16-o).latchAndAppend(Hr,1);u.push(d)}if(n.getBinaryShiftByteCount()>0){let d=n.addBinaryShiftChar(s).addBinaryShiftChar(s+1);u.push(d)}}static simplifyStates(n){let s=[];for(const o of n){let u=!0;for(const c of s){if(c.isBetterThanOrEqualTo(o)){u=!1;break}o.isBetterThanOrEqualTo(c)&&(s=s.filter(d=>d!==c))}u&&s.push(o)}return s}}class We{constructor(){}static encodeBytes(n){return We.encode(n,We.DEFAULT_EC_PERCENT,We.DEFAULT_AZTEC_LAYERS)}static encode(n,s,o){let u=new lo(n).encode(),c=S.truncDivision(u.getSize()*s,100)+11,d=u.getSize()+c,f,w,x,E,A;if(o!==We.DEFAULT_AZTEC_LAYERS){if(f=o<0,w=Math.abs(o),w>(f?We.MAX_NB_BITS_COMPACT:We.MAX_NB_BITS))throw new v(Q.format("Illegal value %s for layers",o));x=We.totalBitsInLayer(w,f),E=We.WORD_SIZE[w];let ee=x-x%E;if(A=We.stuffBits(u,E),A.getSize()+c>ee)throw new v("Data to large for user specified layer");if(f&&A.getSize()>E*64)throw new v("Data to large for user specified layer")}else{E=0,A=null;for(let ee=0;;ee++){if(ee>We.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(f=ee<=3,w=f?ee+1:ee,x=We.totalBitsInLayer(w,f),d>x)continue;(A==null||E!==We.WORD_SIZE[w])&&(E=We.WORD_SIZE[w],A=We.stuffBits(u,E));let Ue=x-x%E;if(!(f&&A.getSize()>E*64)&&A.getSize()+c<=Ue)break}}let I=We.generateCheckWords(A,x,E),D=A.getSize()/E,F=We.generateModeMessage(f,w,D),z=(f?11:14)+w*4,H=new Int32Array(z),$;if(f){$=z;for(let ee=0;ee<H.length;ee++)H[ee]=ee}else{$=z+1+2*S.truncDivision(S.truncDivision(z,2)-1,15);let ee=S.truncDivision(z,2),Ue=S.truncDivision($,2);for(let Me=0;Me<ee;Me++){let vr=Me+S.truncDivision(Me,15);H[ee-Me-1]=Ue-vr-1,H[ee+Me]=Ue+vr+1}}let ie=new Oe($);for(let ee=0,Ue=0;ee<w;ee++){let Me=(w-ee)*4+(f?9:12);for(let vr=0;vr<Me;vr++){let Jr=vr*2;for(let Er=0;Er<2;Er++)I.get(Ue+Jr+Er)&&ie.set(H[ee*2+Er],H[ee*2+vr]),I.get(Ue+Me*2+Jr+Er)&&ie.set(H[ee*2+vr],H[z-1-ee*2-Er]),I.get(Ue+Me*4+Jr+Er)&&ie.set(H[z-1-ee*2-Er],H[z-1-ee*2-vr]),I.get(Ue+Me*6+Jr+Er)&&ie.set(H[z-1-ee*2-vr],H[ee*2+Er])}Ue+=Me*8}if(We.drawModeMessage(ie,f,$,F),f)We.drawBullsEye(ie,S.truncDivision($,2),5);else{We.drawBullsEye(ie,S.truncDivision($,2),7);for(let ee=0,Ue=0;ee<S.truncDivision(z,2)-1;ee+=15,Ue+=16)for(let Me=S.truncDivision($,2)&1;Me<$;Me+=2)ie.set(S.truncDivision($,2)-Ue,Me),ie.set(S.truncDivision($,2)+Ue,Me),ie.set(Me,S.truncDivision($,2)-Ue),ie.set(Me,S.truncDivision($,2)+Ue)}let se=new $h;return se.setCompact(f),se.setSize($),se.setLayers(w),se.setCodeWords(D),se.setMatrix(ie),se}static drawBullsEye(n,s,o){for(let u=0;u<o;u+=2)for(let c=s-u;c<=s+u;c++)n.set(c,s-u),n.set(c,s+u),n.set(s-u,c),n.set(s+u,c);n.set(s-o,s-o),n.set(s-o+1,s-o),n.set(s-o,s-o+1),n.set(s+o,s-o),n.set(s+o,s-o+1),n.set(s+o,s+o-1)}static generateModeMessage(n,s,o){let u=new M;return n?(u.appendBits(s-1,2),u.appendBits(o-1,6),u=We.generateCheckWords(u,28,4)):(u.appendBits(s-1,5),u.appendBits(o-1,11),u=We.generateCheckWords(u,40,4)),u}static drawModeMessage(n,s,o,u){let c=S.truncDivision(o,2);if(s)for(let d=0;d<7;d++){let f=c-3+d;u.get(d)&&n.set(f,c-5),u.get(d+7)&&n.set(c+5,f),u.get(20-d)&&n.set(f,c+5),u.get(27-d)&&n.set(c-5,f)}else for(let d=0;d<10;d++){let f=c-5+d+S.truncDivision(d,5);u.get(d)&&n.set(f,c-7),u.get(d+10)&&n.set(c+7,f),u.get(29-d)&&n.set(f,c+7),u.get(39-d)&&n.set(c-7,f)}}static generateCheckWords(n,s,o){let u=n.getSize()/o,c=new Cu(We.getGF(o)),d=S.truncDivision(s,o),f=We.bitsToWords(n,o,d);c.encode(f,d-u);let w=s%o,x=new M;x.appendBits(0,w);for(const E of Array.from(f))x.appendBits(E,o);return x}static bitsToWords(n,s,o){let u=new Int32Array(o),c,d;for(c=0,d=n.getSize()/s;c<d;c++){let f=0;for(let w=0;w<s;w++)f|=n.get(c*s+w)?1<<s-w-1:0;u[c]=f}return u}static getGF(n){switch(n){case 4:return Ie.AZTEC_PARAM;case 6:return Ie.AZTEC_DATA_6;case 8:return Ie.AZTEC_DATA_8;case 10:return Ie.AZTEC_DATA_10;case 12:return Ie.AZTEC_DATA_12;default:throw new v("Unsupported word size "+n)}}static stuffBits(n,s){let o=new M,u=n.getSize(),c=(1<<s)-2;for(let d=0;d<u;d+=s){let f=0;for(let w=0;w<s;w++)(d+w>=u||n.get(d+w))&&(f|=1<<s-1-w);(f&c)===c?(o.appendBits(f&c,s),d--):f&c?o.appendBits(f,s):(o.appendBits(f|1,s),d--)}return o}static totalBitsInLayer(n,s){return((s?88:112)+16*n)*n}}We.DEFAULT_EC_PERCENT=33,We.DEFAULT_AZTEC_LAYERS=0,We.MAX_NB_BITS=32,We.MAX_NB_BITS_COMPACT=4,We.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class va{encode(n,s,o,u){return this.encodeWithHints(n,s,o,u,null)}encodeWithHints(n,s,o,u,c){let d=Au.ISO_8859_1,f=We.DEFAULT_EC_PERCENT,w=We.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(Bt.CHARACTER_SET)&&(d=Xh.forName(c.get(Bt.CHARACTER_SET).toString())),c.has(Bt.ERROR_CORRECTION)&&(f=S.parseInt(c.get(Bt.ERROR_CORRECTION).toString())),c.has(Bt.AZTEC_LAYERS)&&(w=S.parseInt(c.get(Bt.AZTEC_LAYERS).toString()))),va.encodeLayers(n,s,o,u,d,f,w)}static encodeLayers(n,s,o,u,c,d,f){if(s!==le.AZTEC)throw new v("Can only encode AZTEC, but got "+s);let w=We.encode(Q.getBytes(n,c),d,f);return va.renderResult(w,o,u)}static renderResult(n,s,o){let u=n.getMatrix();if(u==null)throw new Pe;let c=u.getWidth(),d=u.getHeight(),f=Math.max(s,c),w=Math.max(o,d),x=Math.min(f/c,w/d),E=(f-c*x)/2,A=(w-d*x)/2,I=new Oe(f,w);for(let D=0,F=A;D<d;D++,F+=x)for(let z=0,H=E;z<c;z++,H+=x)u.get(z,D)&&I.setRegion(H,F,x,x);return I}}r.AbstractExpandedDecoder=hu,r.ArgumentException=y,r.ArithmeticException=Qe,r.AztecCode=$h,r.AztecCodeReader=Qr,r.AztecCodeWriter=va,r.AztecDecoder=ve,r.AztecDetector=Js,r.AztecDetectorResult=Un,r.AztecEncoder=We,r.AztecHighLevelEncoder=lo,r.AztecPoint=Dt,r.BarcodeFormat=le,r.Binarizer=O,r.BinaryBitmap=C,r.BitArray=M,r.BitMatrix=Oe,r.BitSource=mu,r.BrowserAztecCodeReader=Fr,r.BrowserBarcodeReader=i2,r.BrowserCodeReader=he,r.BrowserDatamatrixCodeReader=o2,r.BrowserMultiFormatReader=w2,r.BrowserPDF417Reader=x2,r.BrowserQRCodeReader=y2,r.BrowserQRCodeSvgWriter=Ii,r.CharacterSetECI=N,r.ChecksumException=T,r.Code128Reader=oe,r.Code39Reader=Pt,r.DataMatrixDecodedBitStreamParser=Vn,r.DataMatrixReader=Hn,r.DecodeHintType=G,r.DecoderResult=je,r.DefaultGridSampler=$t,r.DetectorResult=ur,r.EAN13Reader=Ci,r.EncodeHintType=Bt,r.Exception=g,r.FormatException=U,r.GenericGF=Ie,r.GenericGFPoly=Se,r.GlobalHistogramBinarizer=ze,r.GridSampler=mr,r.GridSamplerInstance=Vt,r.HTMLCanvasElementLuminanceSource=we,r.HybridBinarizer=ae,r.ITFReader=nt,r.IllegalArgumentException=v,r.IllegalStateException=Pe,r.InvertedLuminanceSource=te,r.LuminanceSource=re,r.MathUtils=ye,r.MultiFormatOneDReader=ts,r.MultiFormatReader=Yh,r.MultiFormatWriter=E2,r.NotFoundException=K,r.OneDReader=at,r.PDF417DecodedBitStreamParser=X,r.PDF417DecoderErrorCorrection=Uh,r.PDF417Reader=qt,r.PDF417ResultMetadata=Vh,r.PerspectiveTransform=Ke,r.PlanarYUVLuminanceSource=mn,r.QRCodeByteMatrix=xa,r.QRCodeDataMask=zr,r.QRCodeDecodedBitStreamParser=xt,r.QRCodeDecoderErrorCorrectionLevel=lt,r.QRCodeDecoderFormatInformation=ir,r.QRCodeEncoder=dt,r.QRCodeEncoderQRCode=bi,r.QRCodeMaskUtil=St,r.QRCodeMatrixUtil=be,r.QRCodeMode=Ae,r.QRCodeReader=Wn,r.QRCodeVersion=Ee,r.QRCodeWriter=ns,r.RGBLuminanceSource=_u,r.RSS14Reader=At,r.RSSExpandedReader=Z,r.ReaderException=wa,r.ReedSolomonDecoder=ke,r.ReedSolomonEncoder=Cu,r.ReedSolomonException=Ye,r.Result=Re,r.ResultMetadataType=_e,r.ResultPoint=de,r.StringUtils=Q,r.UnsupportedOperationException=V,r.VideoInputDevice=me,r.WhiteRectangleDetector=ot,r.WriterException=it,r.ZXingArrays=b,r.ZXingCharset=Xh,r.ZXingInteger=S,r.ZXingStandardCharsets=Au,r.ZXingStringBuilder=ue,r.ZXingStringEncoding=J,r.ZXingSystem=L,r.createAbstractExpandedDecoder=jh,Object.defineProperty(r,"__esModule",{value:!0})})})(_d,_d.exports);var ft=_d.exports;const V_=Sd(ft),H_=Ad({__proto__:null,default:V_},[ft]);var Q0=function(){function t(e,r,i){if(this.formatMap=new Map([[ge.QR_CODE,ft.BarcodeFormat.QR_CODE],[ge.AZTEC,ft.BarcodeFormat.AZTEC],[ge.CODABAR,ft.BarcodeFormat.CODABAR],[ge.CODE_39,ft.BarcodeFormat.CODE_39],[ge.CODE_93,ft.BarcodeFormat.CODE_93],[ge.CODE_128,ft.BarcodeFormat.CODE_128],[ge.DATA_MATRIX,ft.BarcodeFormat.DATA_MATRIX],[ge.MAXICODE,ft.BarcodeFormat.MAXICODE],[ge.ITF,ft.BarcodeFormat.ITF],[ge.EAN_13,ft.BarcodeFormat.EAN_13],[ge.EAN_8,ft.BarcodeFormat.EAN_8],[ge.PDF_417,ft.BarcodeFormat.PDF_417],[ge.RSS_14,ft.BarcodeFormat.RSS_14],[ge.RSS_EXPANDED,ft.BarcodeFormat.RSS_EXPANDED],[ge.UPC_A,ft.BarcodeFormat.UPC_A],[ge.UPC_E,ft.BarcodeFormat.UPC_E],[ge.UPC_EAN_EXTENSION,ft.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!H_)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=i;var a=this.createZXingFormats(e),l=new Map;l.set(ft.DecodeHintType.POSSIBLE_FORMATS,a),l.set(ft.DecodeHintType.TRY_HARDER,!1),this.hints=l}return t.prototype.decodeAsync=function(e){var r=this;return new Promise(function(i,a){try{i(r.decode(e))}catch(l){a(l)}})},t.prototype.decode=function(e){var r=new ft.MultiFormatReader(this.verbose,this.hints),i=new ft.HTMLCanvasElementLuminanceSource(e),a=new ft.BinaryBitmap(new ft.HybridBinarizer(i)),l=r.decode(a);return{text:l.text,format:Xm.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,i,a){e.set(r,i)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var r=[],i=0,a=e;i<a.length;i++){var l=a[i];this.formatMap.has(l)?r.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),W_=function(t,e,r,i){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function m(y){try{g(i.next(y))}catch(v){h(v)}}function p(y){try{g(i.throw(y))}catch(v){h(v)}}function g(y){y.done?l(y.value):a(y.value).then(m,p)}g((i=i.apply(t,e||[])).next())})},G_=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(g){return function(y){return p([g,y])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(i=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(y){g=[6,y],a=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Z0=function(){function t(e,r,i){if(this.formatMap=new Map([[ge.QR_CODE,"qr_code"],[ge.AZTEC,"aztec"],[ge.CODABAR,"codabar"],[ge.CODE_39,"code_39"],[ge.CODE_93,"code_93"],[ge.CODE_128,"code_128"],[ge.DATA_MATRIX,"data_matrix"],[ge.ITF,"itf"],[ge.EAN_13,"ean_13"],[ge.EAN_8,"ean_8"],[ge.PDF_417,"pdf417"],[ge.UPC_A,"upc_a"],[ge.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=i;var a=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return W_(this,void 0,void 0,function(){var r,i;return G_(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=a.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(r),[2,{text:i.rawValue,format:Xm.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var r=null,i=0,a=0,l=e;a<l.length;a++){var h=l[a],m=h.boundingBox.width*h.boundingBox.height;m>i&&(i=m,r=h)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],i=0,a=e;i<a.length;i++){var l=a[i];this.formatMap.has(l)?r.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,i,a){e.set(r,i)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),J0=function(t,e,r,i){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function m(y){try{g(i.next(y))}catch(v){h(v)}}function p(y){try{g(i.throw(y))}catch(v){h(v)}}function g(y){y.done?l(y.value):a(y.value).then(m,p)}g((i=i.apply(t,e||[])).next())})},e1=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(g){return function(y){return p([g,y])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(i=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(y){g=[6,y],a=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Y_=function(){function t(e,r,i,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,r&&Z0.isSupported()?(this.primaryDecoder=new Z0(e,i,a),this.secondaryDecoder=new Q0(e,i,a)):this.primaryDecoder=new Q0(e,i,a)}return t.prototype.decodeAsync=function(e){return J0(this,void 0,void 0,function(){var r;return e1(this,function(i){switch(i.label){case 0:r=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return J0(this,void 0,void 0,function(){var r,i;return e1(this,function(a){switch(a.label){case 0:r=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,a.sent()];case 3:if(i=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw i;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,i=this.executionResults;r<i.length;r++){var a=i[r];e+=a}var l=e/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Mh=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),Ul=function(t,e,r,i){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function m(y){try{g(i.next(y))}catch(v){h(v)}}function p(y){try{g(i.throw(y))}catch(v){h(v)}}function g(y){y.done?l(y.value):a(y.value).then(m,p)}g((i=i.apply(t,e||[])).next())})},zl=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(g){return function(y){return p([g,y])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(i=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(y){g=[6,y],a=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Qm=function(){function t(e,r){this.name=e,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var r={};r[this.name]=e;var i={advanced:[r]};return this.track.applyConstraints(i)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},t}(),X_=function(t){Mh(e,t);function e(r,i){return t.call(this,r,i)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var i={};i[this.name]=r;var a={advanced:[i]};return this.track.applyConstraints(a)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),i=r[this.name];return{min:i.min,max:i.max,step:i.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(Qm),$_=function(t){Mh(e,t);function e(r){return t.call(this,"zoom",r)||this}return e}(X_),K_=function(t){Mh(e,t);function e(r){return t.call(this,"torch",r)||this}return e}(Qm),q_=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new $_(this.track)},t.prototype.torchFeature=function(){return new K_(this.track)},t}(),Q_=function(){function t(e,r,i){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var i=e.surface.clientWidth,a=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(i,a),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,r,i,a){return Ul(this,void 0,void 0,function(){var l,h;return zl(this,function(m){switch(m.label){case 0:return l=new t(e,r,a),i.aspectRatio?(h={aspectRatio:i.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(h)]):[3,2];case 1:m.sent(),m.label=2;case 2:return l.setupSurface(),[2,l]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var r=this,i=function(){setTimeout(e,200),r.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Ul(this,void 0,void 0,function(){return zl(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,i){var a=e.mediaStream.getVideoTracks(),l=a.length,h=0;e.mediaStream.getVideoTracks().forEach(function(m){e.mediaStream.removeTrack(m),m.stop(),++h,h>=l&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},t.prototype.getCapabilities=function(){return new q_(this.getFirstTrackOrFail())},t}(),Z_=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,r,i){return Ul(this,void 0,void 0,function(){return zl(this,function(a){return[2,Q_.create(e,this.mediaStream,r,i)]})})},t.create=function(e){return Ul(this,void 0,void 0,function(){var r,i;return zl(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return i=a.sent(),[2,new t(i)]}})})},t}(),t1=function(t,e,r,i){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function m(y){try{g(i.next(y))}catch(v){h(v)}}function p(y){try{g(i.throw(y))}catch(v){h(v)}}function g(y){y.done?l(y.value):a(y.value).then(m,p)}g((i=i.apply(t,e||[])).next())})},r1=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(g){return function(y){return p([g,y])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(i=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(y){g=[6,y],a=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},J_=function(){function t(){}return t.failIfNotSupported=function(){return t1(this,void 0,void 0,function(){return r1(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return t1(this,void 0,void 0,function(){return r1(this,function(r){return[2,Z_.create(e)]})})},t}(),e3=function(t,e,r,i){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function m(y){try{g(i.next(y))}catch(v){h(v)}}function p(y){try{g(i.throw(y))}catch(v){h(v)}}function g(y){y.done?l(y.value):a(y.value).then(m,p)}g((i=i.apply(t,e||[])).next())})},t3=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(g){return function(y){return p([g,y])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(i=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(y){g=[6,y],a=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},r3=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Ns.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Ns.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return e3(this,void 0,void 0,function(){var e,r,i,a,l,h,m;return t3(this,function(p){switch(p.label){case 0:return e=function(g){for(var y=g.getVideoTracks(),v=0,C=y;v<C.length;v++){var T=C[v];T.enabled=!1,T.stop(),g.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=p.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=p.sent(),a=[],l=0,h=i;l<h.length;l++)m=h[l],m.kind==="videoinput"&&a.push({id:m.deviceId,label:m.label});return e(r),[2,a]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var i=function(l){for(var h=[],m=0,p=l;m<p.length;m++){var g=p[m];g.kind==="video"&&h.push({id:g.id,label:g.label})}e(h)},a=MediaStreamTrack;a.getSources(i)})},t}(),bt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(bt||(bt={}));var n3=function(){function t(){this.state=bt.NOT_STARTED,this.onGoingTransactionNewState=bt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===bt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=bt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===bt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=bt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==bt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case bt.UNKNOWN:throw"Transition from unknown is not allowed";case bt.NOT_STARTED:this.failIfNewStateIs(e,[bt.PAUSED]);break;case bt.SCANNING:break;case bt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,r){for(var i=0,a=r;i<a.length;i++){var l=a[i];if(e===l)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),i3=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===bt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==bt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===bt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===bt.PAUSED},t}(),s3=function(){function t(){}return t.create=function(){return new i3(new n3)},t}(),o3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),Tr=function(t){o3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(ln),a3=function(){function t(e,r){this.logger=r,this.fps=Tr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Tr.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?qm.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!En(this.qrbox)},t.create=function(e,r){return new t(e,r)},t}(),n1=function(){function t(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var i;typeof r=="boolean"?this.verbose=r===!0:r&&(i=r,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new Km(this.verbose),this.qrcode=new Y_(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=s3.create()}return t.prototype.start=function(e,r,i,a){var l=this;if(!e)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var h;a?h=a:h=this.verbose?this.logger.log:function(){};var m=a3.create(r,this.logger);this.clearElement();var p=!1;m.videoConstraints&&(m.isMediaStreamConstraintsValid()?p=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var g=p,y=document.getElementById(this.elementId);y.clientWidth?y.clientWidth:Tr.DEFAULT_WIDTH,y.style.position="relative",this.shouldScan=!0,this.element=y;var v=this,C=this.stateManagerProxy.startTransition(bt.SCANNING);return new Promise(function(T,O){var L=g?m.videoConstraints:v.createVideoConstraints(e);if(!L){C.cancel(),O("videoConstraints should be defined");return}var j={};(!g||m.aspectRatio)&&(j.aspectRatio=m.aspectRatio);var R={onRenderSurfaceReady:function(b,S){v.setupUi(b,S,m),v.isScanning=!0,v.foreverScan(m,i,h)}};J_.failIfNotSupported().then(function(b){b.create(L).then(function(S){return S.render(l.element,j,R).then(function(M){v.renderedCamera=M,C.execute(),T(null)}).catch(function(M){C.cancel(),O(M)})}).catch(function(S){C.cancel(),O(Ns.errorGettingUserMedia(S))})}).catch(function(b){C.cancel(),O(Ns.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(bt.PAUSED),this.showPausedState(),(En(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(bt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(bt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(e.element){var l=document.getElementById(Tr.SHADED_REGION_ELEMENT_ID);l&&e.element.removeChild(l)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),i(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),r.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(e,r){var i=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(En(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,l){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(e);var h=new Image;h.onload=function(){var m=h.width,p=h.height,g=document.getElementById(i.elementId),y=g.clientWidth?g.clientWidth:Tr.DEFAULT_WIDTH,v=Math.max(g.clientHeight?g.clientHeight:p,Tr.FILE_SCAN_MIN_HEIGHT),C=i.computeCanvasDrawConfig(m,p,y,v);if(r){var T=i.createCanvasElement(y,v,"qr-canvas-visible");T.style.display="inline-block",g.appendChild(T);var O=T.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=y,O.canvas.height=v,O.drawImage(h,0,0,m,p,C.x,C.y,C.width,C.height)}var L=Tr.FILE_SCAN_HIDDEN_CANVAS_PADDING,j=Math.max(h.width,C.width),R=Math.max(h.height,C.height),b=j+2*L,S=R+2*L,M=i.createCanvasElement(b,S);g.appendChild(M);var Y=M.getContext("2d");if(!Y)throw"Unable to get 2d context from canvas";Y.canvas.width=b,Y.canvas.height=S,Y.drawImage(h,0,0,m,p,L,L,j,R);try{i.qrcode.decodeRobustlyAsync(M).then(function(G){a(K0.createFromQrcodeResult(G))}).catch(l)}catch(G){l("QR code parse error, error = ".concat(G))}},h.onerror=l,h.onabort=l,h.onstalled=l,h.onsuspend=l,h.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return r3.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!qm.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var r=[ge.QR_CODE,ge.AZTEC,ge.CODABAR,ge.CODE_39,ge.CODE_93,ge.CODE_128,ge.DATA_MATRIX,ge.MAXICODE,ge.ITF,ge.EAN_13,ge.EAN_8,ge.PDF_417,ge.RSS_14,ge.RSS_EXPANDED,ge.UPC_A,ge.UPC_E,ge.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],a=0,l=e.formatsToSupport;a<l.length;a++){var h=l[a];U_(h)?i.push(h):this.logger.warn("Invalid format: ".concat(h," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(En(e))return!0;if(!En(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(En(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return En(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,r,i){var a=this,l=i.qrbox;this.validateQrboxConfig(l);var h=this.toQrdimensions(e,r,l),m=function(g){if(g<Tr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Tr.MIN_QR_BOX_SIZE,"px.")},p=function(g){return g>e&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),g=e),g};m(h.width),m(h.height),h.width=p(h.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,r,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(e,r)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return i},t.prototype.setupUi=function(e,r,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,i);var a=En(i.qrbox)?{width:e,height:r}:i.qrbox;this.validateQrboxConfig(a);var l=this.toQrdimensions(e,r,a);l.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var h=i.isShadedBoxEnabled()&&l.height<=r,m={x:0,y:0,width:e,height:r},p=h?this.getShadedRegionBounds(e,r,l):m,g=this.createCanvasElement(p.width,p.height),y={willReadFrequently:!0},v=g.getContext("2d",y);v.canvas.width=p.width,v.canvas.height=p.height,this.element.append(g),h&&this.possiblyInsertShadingElement(this.element,e,r,l),this.createScannerPausedUiElement(this.element),this.qrRegion=p,this.context=v,this.canvasElement=g},t.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=Ns.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(e,r){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return e(a.text,K0.createFromQrcodeResult(a)),i.possiblyUpdateShaders(!0),!0}).catch(function(a){i.possiblyUpdateShaders(!1);var l=Ns.codeParseError(a);return r(l,$m.createFrom(l)),!1})},t.prototype.foreverScan=function(e,r,i){var a=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),h=l.videoWidth/l.clientWidth,m=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var p=this.qrRegion.width*h,g=this.qrRegion.height*m,y=this.qrRegion.x*h,v=this.qrRegion.y*m;this.context.drawImage(l,y,v,p,g,0,0,this.qrRegion.width,this.qrRegion.height);var C=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(e,r,i)},a.getTimeoutFps(e.fps))};this.scanContext(r,i).then(function(T){!T&&e.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(r,i).finally(function(){C()})):C()}).catch(function(T){a.logger.logError("Error happend while scanning context",T),C()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",i="deviceId",a={user:!0,environment:!0},l="exact",h=function(O){if(O in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(O,"'")},m=Object.keys(e);if(m.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(m.length," keys");var p=Object.keys(e)[0];if(p!==r&&p!==i)throw"Only '".concat(r,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(p===r){var g=e.facingMode;if(typeof g=="string"){if(h(g))return{facingMode:g}}else if(typeof g=="object")if(l in g){if(h(g["".concat(l)]))return{facingMode:{exact:g["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var y=typeof g;throw"Invalid type of 'facingMode' = ".concat(y)}}else{var v=e.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(l in v)return{deviceId:{exact:v["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var C=typeof v;throw"Invalid type of 'deviceId' = ".concat(C)}}}var T=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(T)},t.prototype.computeCanvasDrawConfig=function(e,r,i,a){if(e<=i&&r<=a){var l=(i-e)/2,h=(a-r)/2;return{x:l,y:h,width:e,height:r}}else{var m=e,p=r;return e>i&&(r=i/e*r,e=i),r>a&&(e=a/r*e,r=a),this.logger.log("Image downsampled from "+"".concat(m,"X").concat(p)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,i,a)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?Tr.BORDER_SHADER_MATCH_COLOR:Tr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,r,i){var a=e,l=r,h=document.createElement("canvas");return h.style.width="".concat(a,"px"),h.style.height="".concat(l,"px"),h.style.display="none",h.id=En(i)?"qr-canvas":i,h},t.prototype.getShadedRegionBounds=function(e,r,i){if(i.width>e||i.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-i.width)/2,y:(r-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(e,r,i,a){if(!(r-a.width<1||i-a.height<1)){var l=document.createElement("div");l.style.position="absolute";var h=(r-a.width)/2,m=(i-a.height)/2;if(l.style.borderLeft="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(Tr.SHADED_REGION_ELEMENT_ID),r-a.width<11||i-a.height<11)this.hasBorderShaders=!1;else{var p=5,g=40;this.insertShaderBorders(l,g,p,-p,null,0,!0),this.insertShaderBorders(l,g,p,-p,null,0,!1),this.insertShaderBorders(l,g,p,null,-p,0,!0),this.insertShaderBorders(l,g,p,null,-p,0,!1),this.insertShaderBorders(l,p,g+p,-p,null,-p,!0),this.insertShaderBorders(l,p,g+p,null,-p,-p,!0),this.insertShaderBorders(l,p,g+p,-p,null,-p,!1),this.insertShaderBorders(l,p,g+p,null,-p,-p,!1),this.hasBorderShaders=!0}e.append(l)}},t.prototype.insertShaderBorders=function(e,r,i,a,l,h,m){var p=document.createElement("div");p.style.position="absolute",p.style.backgroundColor=Tr.BORDER_SHADER_DEFAULT_COLOR,p.style.width="".concat(r,"px"),p.style.height="".concat(i,"px"),a!==null&&(p.style.top="".concat(a,"px")),l!==null&&(p.style.bottom="".concat(l,"px")),m?p.style.left="".concat(h,"px"):p.style.right="".concat(h,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(p),e.appendChild(p)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Dh="data:image/svg+xml;base64,",l3=Dh+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",u3=Dh+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",i1=Dh+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",c3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",s1=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),d3=function(){function t(){this.data=s1.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=s1.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),h3=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=q0.poweredBy();var r=document.createElement("a");r.innerText="ScanApp",r.href="https://scanapp.org",r.target="new",r.style.color="white",this.infoDiv.appendChild(r);var i=document.createElement("br"),a=document.createElement("br");this.infoDiv.appendChild(i),this.infoDiv.appendChild(a);var l=document.createElement("a");l.innerText=q0.reportIssues(),l.href="https://github.com/mebjas/html5-qrcode/issues",l.target="new",l.style.color="white",this.infoDiv.appendChild(l),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),f3=function(){function t(e,r){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=r,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var r=this;this.infoIcon.alt="Info icon",this.infoIcon.src=i1,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(i){return r.onHoverIn()},this.infoIcon.onmouseout=function(i){return r.onHoverOut()},this.infoIcon.onclick=function(i){return r.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=c3,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=i1,this.infoIcon.style.opacity="0.6")},t}(),g3=function(){function t(){var e=this;this.infoDiv=new h3,this.infoIcon=new f3(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t}(),p3=function(t,e,r,i){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function m(y){try{g(i.next(y))}catch(v){h(v)}}function p(y){try{g(i.throw(y))}catch(v){h(v)}}function g(y){y.done?l(y.value):a(y.value).then(m,p)}g((i=i.apply(t,e||[])).next())})},m3=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(g){return function(y){return p([g,y])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(i=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(y){g=[6,y],a=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},o1=function(){function t(){}return t.hasPermissions=function(){return p3(this,void 0,void 0,function(){var e,r,i,a;return m3(this,function(l){switch(l.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=l.sent(),r=0,i=e;r<i.length;r++)if(a=i[r],a.kind==="videoinput"&&a.label)return[2,!0];return[2,!1]}})})},t}(),Kn=function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,r=this.supportedScanTypes;e<r.length;e++){var i=r[e];if(t.isCameraScanType(i))return!0}return!1},t.isCameraScanType=function(e){return e===mi.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===mi.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return ln.DEFAULT_SUPPORTED_SCAN_TYPE;var r=ln.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>r)throw"Max ".concat(r," values expected for ")+"supportedScanTypes";for(var i=0,a=e;i<a.length;i++){var l=a[i];if(!ln.DEFAULT_SUPPORTED_SCAN_TYPE.includes(l))throw"Unsupported scan type ".concat(l)}return e},t}(),Mr=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),kn=function(){function t(){}return t.createElement=function(e,r){var i=document.createElement(e);return i.id=r,i.classList.add(Mr.ALL_ELEMENT_CLASS),e==="button"&&i.setAttribute("type","button"),i},t}(),Zm=function(t,e,r,i){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function m(y){try{g(i.next(y))}catch(v){h(v)}}function p(y){try{g(i.throw(y))}catch(v){h(v)}}function g(y){y.done?l(y.value):a(y.value).then(m,p)}g((i=i.apply(t,e||[])).next())})},Jm=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(g){return function(y){return p([g,y])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(i=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(y){g=[6,y],a=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},a1=function(){function t(e,r,i){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=r,this.onTorchActionFailureCallback=i}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return Zm(this,void 0,void 0,function(){var e,r;return Jm(this,function(i){switch(i.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return i.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return r=i.sent(),this.propagateFailure(e,r),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,r){e===r?(this.buttonController.setText(r?Ze.torchOffButton():Ze.torchOnButton()),this.isTorchOn=r):this.propagateFailure(r),this.buttonController.enable()},t.prototype.propagateFailure=function(e,r){var i=e?Ze.torchOnFailedMessage():Ze.torchOffFailedMessage();r&&(i+="; Error = "+r),this.onTorchActionFailureCallback(i)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),w3=function(){function t(e,r){this.onTorchActionFailureCallback=r,this.torchButton=kn.createElement("button",Mr.TORCH_BUTTON_ID),this.torchController=new a1(e,this,r)}return t.prototype.render=function(e,r){var i=this;this.torchButton.innerText=Ze.torchOnButton(),this.torchButton.style.display=r.display,this.torchButton.style.marginLeft=r.marginLeft;var a=this;this.torchButton.addEventListener("click",function(l){return Zm(i,void 0,void 0,function(){return Jm(this,function(h){switch(h.label){case 0:return[4,a.torchController.flipState()];case 1:return h.sent(),a.torchController.isTorchEnabled()?(a.torchButton.classList.remove(Mr.TORCH_BUTTON_CLASS_TORCH_OFF),a.torchButton.classList.add(Mr.TORCH_BUTTON_CLASS_TORCH_ON)):(a.torchButton.classList.remove(Mr.TORCH_BUTTON_CLASS_TORCH_ON),a.torchButton.classList.add(Mr.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new a1(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=Ze.torchOnButton(),this.torchController.reset()},t.create=function(e,r,i,a){var l=new t(r,a);return l.render(e,i),l},t}(),x3=function(){function t(e,r,i){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=r?"block":"none",e.appendChild(this.fileBasedScanRegion);var a=document.createElement("label");a.setAttribute("for",this.getFileScanInputId()),a.style.display="inline-block",this.fileBasedScanRegion.appendChild(a),this.fileSelectionButton=kn.createElement("button",Mr.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(m){a.click()}),a.append(this.fileSelectionButton),this.fileScanInput=kn.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",a.appendChild(this.fileScanInput);var l=this;this.fileScanInput.addEventListener("change",function(m){if(!(m==null||m.target==null)){var p=m.target;if(!(p.files&&p.files.length===0)){var g=p.files,y=g[0],v=y.name;l.setImageNameToButton(v),i(y)}}});var h=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(h),this.fileBasedScanRegion.addEventListener("dragenter",function(m){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(m){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(m){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(m){m.stopPropagation(),m.preventDefault(),l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder();var p=m.dataTransfer;if(p){var g=p.files;if(!g||g.length===0)return;for(var y=!1,v=0;v<g.length;++v){var C=g.item(v);if(C){var T=/image.*/;if(C.type.match(T)){y=!0;var O=C.name;l.setImageNameToButton(O),i(C),h.innerText=Ze.dragAndDropMessage();break}}}y||(h.innerText=Ze.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=Ze.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var r=20;if(e.length>r){var i=e.substring(0,8),a=e.length,l=e.substring(a-8,a);e="".concat(i,"....").concat(l)}var h=Ze.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=h},t.prototype.setInitialValueToButton=function(){var e=Ze.fileSelectionChooseImage()+" - "+Ze.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,r,i){var a=new t(e,r,i);return a},t}(),y3=function(){function t(e){this.selectElement=kn.createElement("select",Mr.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var r=document.createElement("span");r.style.marginRight="10px";var i=this.cameras.length;if(i===0)throw new Error("No cameras found");if(i===1)r.style.display="none";else{var a=Ze.selectCamera();r.innerText="".concat(a," (").concat(this.cameras.length,")  ")}for(var l=1,h=0,m=this.cameras;h<m.length;h++){var p=m[h],g=p.id,y=p.label==null?g:p.label;(!y||y==="")&&(y=[Ze.anonymousCameraPrefix(),l++].join(" "));var v=document.createElement("option");v.value=g,v.innerText=y,this.options.push(v),this.selectElement.appendChild(v)}r.appendChild(this.selectElement),e.appendChild(r)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var r=0,i=this.options;r<i.length;r++){var a=i[r];if(a.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,r){var i=new t(r);return i.render(e),i},t}(),v3=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=kn.createElement("input",Mr.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,r){this.zoomElementContainer.style.display=r?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var i=Ze.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(i),this.rangeText.style.marginRight="10px";var a=this;this.rangeInput.addEventListener("input",function(){return a.onValueChange()}),this.rangeInput.addEventListener("change",function(){return a.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=Ze.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,r,i,a){this.rangeInput.min=e.toString(),this.rangeInput.max=r.toString(),this.rangeInput.step=a.toString(),this.rangeInput.value=i.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,r){var i=new t;return i.render(e,r),i},t}(),Nr;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Nr||(Nr={}));function E3(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function C3(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var _3=function(){function t(e,r,i){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(r),this.verbose=i===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Kn(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Km(this.verbose),this.persistedDataManager=new d3,r.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,r){var i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(l,h){if(e)e(l,h);else{if(i.lastMatchFound===l)return;i.lastMatchFound=l,i.setHeaderMessage(Ze.lastMatch(l),Nr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(l,h){r&&r(l,h)};var a=document.getElementById(this.elementId);if(!a)throw"HTML Element with id=".concat(this.elementId," not found");a.innerHTML="",this.createBasicLayout(a),this.html5Qrcode=new n1(this.getScanRegionId(),C3(this.config,this.verbose))},t.prototype.pause=function(e){(En(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,r=function(){var i=document.getElementById(e.elementId);i&&(i.innerHTML="",e.resetBasicLayout(i))};return this.html5Qrcode?new Promise(function(i,a){if(!e.html5Qrcode){i();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(l){if(!e.html5Qrcode){i();return}e.html5Qrcode.clear(),r(),i()}).catch(function(l){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",l),a(l)}):(e.html5Qrcode.clear(),r(),i())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=ln.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!ln.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=ln.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=ln.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:ln.SCAN_DEFAULT_FPS,rememberLastUsedCamera:ln.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:ln.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var r=document.createElement("div"),i=this.getScanRegionId();r.id=i,r.style.width="100%",r.style.minHeight="100px",r.style.textAlign="center",e.appendChild(r),Kn.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var a=document.createElement("div"),l=this.getDashboardId();a.id=l,a.style.width="100%",e.appendChild(a),this.setupInitialDashboard(a)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var r=document.createElement("div");r.style.textAlign="left",r.style.margin="0px",e.appendChild(r);var i=new g3;i.renderInto(r);var a=document.createElement("div");a.id=this.getHeaderMessageContainerId(),a.style.display="none",a.style.textAlign="center",a.style.fontSize="14px",a.style.padding="2px 10px",a.style.margin="4px",a.style.borderTop="1px solid #f6f6f6",r.appendChild(a)},t.prototype.createSection=function(e){var r=document.createElement("div");r.id=this.getDashboardSectionId(),r.style.width="100%",r.style.padding="10px 0px 10px 0px",r.style.textAlign="left",e.appendChild(r)},t.prototype.createCameraListUi=function(e,r,i){var a=this;a.showHideScanTypeSwapLink(!1),a.setHeaderMessage(Ze.cameraPermissionRequesting());var l=function(){i||a.createPermissionButton(e,r)};n1.getCameras().then(function(h){a.persistedDataManager.setHasPermission(!0),a.showHideScanTypeSwapLink(!0),a.resetHeaderMessage(),h&&h.length>0?(e.removeChild(r),a.renderCameraSelection(h)):(a.setHeaderMessage(Ze.noCameraFound(),Nr.STATUS_WARNING),l())}).catch(function(h){a.persistedDataManager.setHasPermission(!1),i?i.disabled=!1:l(),a.setHeaderMessage(h,Nr.STATUS_WARNING),a.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,r){var i=this,a=kn.createElement("button",this.getCameraPermissionButtonId());a.innerText=Ze.cameraPermissionTitle(),a.addEventListener("click",function(){a.disabled=!0,i.createCameraListUi(e,r,a)}),r.appendChild(a)},t.prototype.createPermissionsUi=function(e,r){var i=this;if(Kn.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){o1.hasPermissions().then(function(a){a?i.createCameraListUi(e,r):(i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(e,r))}).catch(function(a){i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(e,r)});return}this.createPermissionButton(e,r)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),r=document.createElement("div");e.appendChild(r);var i=document.createElement("div");i.id=this.getDashboardSectionCameraScanRegionId(),i.style.display=Kn.isCameraScanType(this.currentScanType)?"block":"none",r.appendChild(i);var a=document.createElement("div");a.style.textAlign="center",i.appendChild(a),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(i,a),this.renderFileScanUi(r)},t.prototype.renderFileScanUi=function(e){var r=Kn.isFileScanType(this.currentScanType),i=this,a=function(l){if(!i.html5Qrcode)throw"html5Qrcode not defined";Kn.isFileScanType(i.currentScanType)&&(i.setHeaderMessage(Ze.loadingImage()),i.html5Qrcode.scanFileV2(l,!0).then(function(h){i.resetHeaderMessage(),i.qrCodeSuccessCallback(h.decodedText,h)}).catch(function(h){i.setHeaderMessage(h,Nr.STATUS_WARNING),i.qrCodeErrorCallback(h,$m.createFrom(h))}))};this.fileSelectionUi=x3.create(e,r,a)},t.prototype.renderCameraSelection=function(e){var r=this,i=this,a=document.getElementById(this.getDashboardSectionCameraScanRegionId());a.style.textAlign="center";var l=v3.create(a,!1),h=function(L){var j=L.zoomFeature();if(j.isSupported()){l.setOnCameraZoomValueChangeCallback(function(b){j.apply(b)});var R=1;r.config.defaultZoomValueIfSupported&&(R=r.config.defaultZoomValueIfSupported),R=z_(R,j.min(),j.max()),l.setValues(j.min(),j.max(),R,j.step()),l.show()}},m=y3.create(a,e),p=document.createElement("span"),g=kn.createElement("button",Mr.CAMERA_START_BUTTON_ID);g.innerText=Ze.scanButtonStartScanningText(),p.appendChild(g);var y=kn.createElement("button",Mr.CAMERA_STOP_BUTTON_ID);y.innerText=Ze.scanButtonStopScanningText(),y.style.display="none",y.disabled=!0,p.appendChild(y);var v,C=function(L){if(!L.torchFeature().isSupported()){v&&v.hide();return}v?v.updateTorchCapability(L.torchFeature()):v=w3.create(p,L.torchFeature(),{display:"none",marginLeft:"5px"},function(j){i.setHeaderMessage(j,Nr.STATUS_WARNING)}),v.show()};a.appendChild(p);var T=function(L){L||(g.style.display="none"),g.innerText=Ze.scanButtonStartScanningText(),g.style.opacity="1",g.disabled=!1,L&&(g.style.display="inline-block")};if(g.addEventListener("click",function(L){g.innerText=Ze.scanButtonScanningStarting(),m.disable(),g.disabled=!0,g.style.opacity="0.5",r.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!1),i.resetHeaderMessage();var j=m.getValue();i.persistedDataManager.setLastUsedCameraId(j),i.html5Qrcode.start(j,E3(i.config),i.qrCodeSuccessCallback,i.qrCodeErrorCallback).then(function(R){y.disabled=!1,y.style.display="inline-block",T(!1);var b=i.html5Qrcode.getRunningTrackCameraCapabilities();r.config.showTorchButtonIfSupported===!0&&C(b),r.config.showZoomSliderIfSupported===!0&&h(b)}).catch(function(R){i.showHideScanTypeSwapLink(!0),m.enable(),T(!0),i.setHeaderMessage(R,Nr.STATUS_WARNING)})}),m.hasSingleItem()&&g.click(),y.addEventListener("click",function(L){if(!i.html5Qrcode)throw"html5Qrcode not defined";y.disabled=!0,i.html5Qrcode.stop().then(function(j){r.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!0),m.enable(),g.disabled=!1,y.style.display="none",g.style.display="inline-block",v&&(v.reset(),v.hide()),l.removeOnCameraZoomValueChangeCallback(),l.hide(),i.insertCameraScanImageToScanRegion()}).catch(function(j){y.disabled=!1,i.setHeaderMessage(j,Nr.STATUS_WARNING)})}),i.persistedDataManager.getLastUsedCameraId()){var O=i.persistedDataManager.getLastUsedCameraId();m.hasValue(O)?(m.setValue(O),g.click()):i.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,r=Ze.textIfCameraScanSelected(),i=Ze.textIfFileScanSelected(),a=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");l.style.textAlign="center";var h=kn.createElement("span",this.getDashboardSectionSwapLinkId());h.style.textDecoration="underline",h.style.cursor="pointer",h.innerText=Kn.isCameraScanType(this.currentScanType)?r:i,h.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Kn.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),h.innerText=i,e.currentScanType=mi.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),h.innerText=r,e.currentScanType=mi.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),l.appendChild(h),a.appendChild(l)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,r=this;if(this.persistedDataManager.hasCameraPermissions()){o1.hasPermissions().then(function(i){if(i){var a=document.getElementById(r.getCameraPermissionButtonId());if(!a)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";a.click()}else r.persistedDataManager.setHasPermission(!1)}).catch(function(i){r.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,r){r||(r=Nr.STATUS_DEFAULT);var i=this.getHeaderMessageDiv();switch(i.innerText=e,i.style.display="block",r){case Nr.STATUS_SUCCESS:i.style.background="rgba(106, 175, 80, 0.26)",i.style.color="#477735";break;case Nr.STATUS_WARNING:i.style.background="rgba(203, 36, 49, 0.14)",i.style.color="#cb2431";break;case Nr.STATUS_DEFAULT:default:i.style.background="rgba(0, 0, 0, 0)",i.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,r=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){r.innerHTML="<br>",r.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(i){r.innerHTML="<br>",r.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=l3,this.cameraScanImage.alt=Ze.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,r=document.getElementById(this.getScanRegionId());if(this.fileScanImage){r.innerHTML="<br>",r.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(i){r.innerHTML="<br>",r.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=u3,this.fileScanImage.alt=Ze.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return Mr.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return Mr.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();function A3(){const[t,e]=q.useState(null),[r,i]=q.useState(!1),[a,l]=q.useState(null),[h,m]=q.useState([]),[p,g]=q.useState({total:0,confirmados:0,presentes:0}),[y,v]=q.useState(""),[C,T]=q.useState([]),[O,L]=q.useState("");q.useEffect(()=>(j(),()=>{t&&t.clear()}),[]),q.useEffect(()=>{O&&(R(),b())},[O]);const j=async()=>{try{const{data:N,error:V}=await Yt.from("eventos").select("*").order("created_at",{ascending:!1});if(V)throw V;T(N||[]);const J=localStorage.getItem("currentEventId");J&&(N!=null&&N.some(Q=>Q.id===J))?L(J):(N==null?void 0:N.length)>0&&L(N[0].id)}catch(N){console.error("Erro ao carregar eventos:",N),Be.error("Erro ao carregar eventos")}},R=async()=>{if(O)try{const{data:N,error:V}=await Yt.from("convidados").select("confirmado, checkin").eq("evento_id",O);if(V)throw V;const J={total:N.length,confirmados:N.filter(Q=>Q.confirmado).length,presentes:N.filter(Q=>Q.checkin).length};g(J)}catch(N){console.error("Erro ao carregar estatsticas:",N)}},b=async()=>{if(O)try{const{data:N,error:V}=await Yt.from("convidados").select("*").eq("evento_id",O).eq("checkin",!0).order("updated_at",{ascending:!1}).limit(10);if(V)throw V;m(N||[])}catch(N){console.error("Erro ao carregar histrico:",N)}},S=()=>{const N=new _3("qr-reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1,showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0,defaultZoomValueIfSupported:1.5});N.render(Y,G),e(N),i(!0)},M=()=>{t&&(t.clear(),e(null),i(!1))},Y=async N=>{try{const V=JSON.parse(N);if(!V.id){Be.error("QR Code invlido");return}await U(V.id)}catch(V){console.error("Erro ao processar QR code:",V),Be.error("QR Code invlido")}},G=N=>{console.log("QR scan failure:",N)},U=async N=>{try{const{data:V,error:J}=await Yt.from("convidados").select("*").eq("id",N).eq("evento_id",O).single();if(J||!V){Be.error("Convidado no encontrado neste evento");return}if(V.checkin){Be.warning(`${V.nome} j fez check-in anteriormente`),l({...V,alreadyCheckedIn:!0});return}const{error:Q}=await Yt.from("convidados").update({checkin:!0,updated_at:new Date().toISOString()}).eq("id",N);if(Q)throw Q;l({...V,alreadyCheckedIn:!1}),Be.success(` Check-in efetuado: ${V.nome}  Mesa ${V.mesa}`),R(),b(),navigator.vibrate&&navigator.vibrate(200)}catch(V){console.error("Erro ao fazer check-in:",V),Be.error("Erro ao processar check-in")}},P=async N=>{if(N.preventDefault(),!!y.trim())try{const{data:V,error:J}=await Yt.from("convidados").select("*").eq("evento_id",O).or(`nome.ilike.%${y}%,email.ilike.%${y}%`).limit(1).single();if(J||!V){Be.error("Convidado no encontrado");return}await U(V.id),v("")}catch(V){console.error("Erro no check-in manual:",V),Be.error("Erro ao processar check-in manual")}};return B.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[B.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[B.jsxs("div",{className:"flex items-center justify-between mb-4",children:[B.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Check-in de Convidados"}),C.length>0&&B.jsxs("select",{value:O,onChange:N=>L(N.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[B.jsx("option",{value:"",children:"Selecione um evento"}),C.map(N=>B.jsxs("option",{value:N.id,children:[N.nome," - ",new Date(N.data).toLocaleDateString("pt-PT")]},N.id))]})]}),B.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[B.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[B.jsx("p",{className:"text-3xl font-bold text-blue-600",children:p.total}),B.jsx("p",{className:"text-sm text-gray-600",children:"Total Convidados"})]}),B.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 text-center",children:[B.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:p.confirmados}),B.jsx("p",{className:"text-sm text-gray-600",children:"Confirmados"})]}),B.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[B.jsx("p",{className:"text-3xl font-bold text-green-600",children:p.presentes}),B.jsx("p",{className:"text-sm text-gray-600",children:"Presentes"})]})]})]}),O&&B.jsxs(B.Fragment,{children:[B.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[B.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Scanner QR Code"}),r?B.jsxs("div",{children:[B.jsx("div",{className:"text-center mb-4",children:B.jsx("button",{onClick:M,className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition",children:"Parar Scanner"})}),B.jsx("div",{id:"qr-reader",className:"mx-auto",style:{maxWidth:"500px"}})]}):B.jsx("div",{className:"text-center",children:B.jsx("button",{onClick:S,className:"bg-blue-600 text-white px-6 py-3 rounded-lg text-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50 transition",children:" Iniciar Scanner"})}),a&&B.jsxs("div",{className:`mt-6 p-4 rounded-lg ${a.alreadyCheckedIn?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"} border`,children:[B.jsxs("p",{className:"font-medium text-gray-900 text-lg",children:[a.alreadyCheckedIn?"":""," ",a.nome]}),B.jsxs("p",{className:"text-gray-600",children:["Mesa ",a.mesa]}),a.alreadyCheckedIn&&B.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"J tinha feito check-in anteriormente"})]})]}),B.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[B.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Check-in Manual"}),B.jsxs("form",{onSubmit:P,className:"flex gap-2",children:[B.jsx("input",{type:"text",value:y,onChange:N=>v(N.target.value),placeholder:"Nome ou email do convidado",className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),B.jsx("button",{type:"submit",className:"bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition",children:"Check-in"})]})]}),B.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[B.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"ltimos Check-ins"}),h.length>0?B.jsx("div",{className:"space-y-2",children:h.map(N=>B.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[B.jsxs("div",{children:[B.jsx("p",{className:"font-medium text-gray-900",children:N.nome}),B.jsxs("p",{className:"text-sm text-gray-600",children:["Mesa ",N.mesa]})]}),B.jsx("span",{className:"text-sm text-gray-500",children:new Date(N.updated_at).toLocaleTimeString("pt-PT",{hour:"2-digit",minute:"2-digit"})})]},N.id))}):B.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhum check-in realizado ainda"})]})]})]})}function S3(){const[t,e]=q.useState([]),[r,i]=q.useState(null),[a,l]=q.useState([]),[h,m]=q.useState({total:0,confirmados:0,presentes:0,pendentes:0}),[p,g]=q.useState(!0),[y,v]=q.useState("");q.useEffect(()=>{C()},[]),q.useEffect(()=>{r&&T()},[r]);const C=async()=>{try{const{data:M,error:Y}=await Yt.from("eventos").select("*").order("created_at",{ascending:!1});if(Y)throw Y;if(e(M||[]),M&&M.length>0){const G=localStorage.getItem("currentEventId"),U=M.find(P=>P.id===G)||M[0];i(U)}}catch(M){console.error("Erro ao carregar eventos:",M),Be.error("Erro ao carregar eventos")}finally{g(!1)}},T=async()=>{if(r)try{const{data:M,error:Y}=await Yt.from("convidados").select("*").eq("evento_id",r.id).order("nome");if(Y)throw Y;l(M||[]);const G={total:M.length,confirmados:M.filter(U=>U.confirmado).length,presentes:M.filter(U=>U.checkin).length,pendentes:M.filter(U=>!U.confirmado).length};m(G),localStorage.setItem("currentEventId",r.id)}catch(M){console.error("Erro ao carregar convidados:",M),Be.error("Erro ao carregar dados do evento")}},O=M=>{const Y=t.find(G=>G.id===M);i(Y)},L=async(M,Y)=>{try{const{error:G}=await Yt.from("convidados").update({confirmado:!Y}).eq("id",M);if(G)throw G;Be.success("Status atualizado"),T()}catch(G){console.error("Erro ao atualizar confirmao:",G),Be.error("Erro ao atualizar status")}},j=async(M,Y)=>{try{const{error:G}=await Yt.from("convidados").update({checkin:!Y}).eq("id",M);if(G)throw G;Be.success("Check-in atualizado"),T()}catch(G){console.error("Erro ao atualizar check-in:",G),Be.error("Erro ao atualizar check-in")}},R=async M=>{if(window.confirm("Tem a certeza que deseja remover este convidado?"))try{const{error:Y}=await Yt.from("convidados").delete().eq("id",M);if(Y)throw Y;Be.success("Convidado removido"),T()}catch(Y){console.error("Erro ao remover convidado:",Y),Be.error("Erro ao remover convidado")}},b=()=>{if(a.length===0){Be.error("Nenhum convidado para exportar");return}const M=["Nome","Email","Mesa","Confirmado","Check-in"],Y=a.map(V=>[V.nome,V.email,V.mesa,V.confirmado?"Sim":"No",V.checkin?"Sim":"No"]),G=[M.join(","),...Y.map(V=>V.map(J=>`"${J}"`).join(","))].join(`
`),U=new Blob([G],{type:"text/csv;charset=utf-8;"}),P=document.createElement("a"),N=URL.createObjectURL(U);P.setAttribute("href",N),P.setAttribute("download",`convidados-${r.nome.replace(/\s+/g,"-")}.csv`),P.style.visibility="hidden",document.body.appendChild(P),P.click(),document.body.removeChild(P),Be.success("Ficheiro CSV exportado")},S=a.filter(M=>M.nome.toLowerCase().includes(y.toLowerCase())||M.email.toLowerCase().includes(y.toLowerCase())||M.mesa.toString().includes(y));return p?B.jsx("div",{className:"flex items-center justify-center h-64",children:B.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):B.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[B.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[B.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[B.jsxs("div",{className:"flex-1",children:[B.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Dashboard"}),t.length>0&&B.jsxs("select",{value:(r==null?void 0:r.id)||"",onChange:M=>O(M.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[B.jsx("option",{value:"",children:"Selecione um evento"}),t.map(M=>B.jsxs("option",{value:M.id,children:[M.nome," - ",new Date(M.data).toLocaleDateString("pt-PT")]},M.id))]})]}),r&&B.jsx("button",{onClick:b,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition",children:" Exportar CSV"})]}),r&&B.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[B.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[B.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total"}),B.jsx("p",{className:"text-2xl font-bold text-blue-900",children:h.total})]}),B.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[B.jsx("p",{className:"text-sm text-yellow-600 font-medium",children:"Confirmados"}),B.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:h.confirmados})]}),B.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[B.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Presentes"}),B.jsx("p",{className:"text-2xl font-bold text-green-900",children:h.presentes})]}),B.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[B.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Pendentes"}),B.jsx("p",{className:"text-2xl font-bold text-red-900",children:h.pendentes})]})]})]}),r&&B.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[B.jsxs("div",{className:"flex justify-between items-center mb-6",children:[B.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lista de Convidados"}),B.jsx("input",{type:"text",placeholder:"Pesquisar...",value:y,onChange:M=>v(M.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),S.length>0?B.jsx("div",{className:"overflow-x-auto",children:B.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[B.jsx("thead",{className:"bg-gray-50",children:B.jsxs("tr",{children:[B.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nome"}),B.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),B.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Mesa"}),B.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Confirmado"}),B.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Check-in"}),B.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),B.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(M=>B.jsxs("tr",{className:"hover:bg-gray-50",children:[B.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:M.nome}),B.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:M.email}),B.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:M.mesa}),B.jsx("td",{className:"px-4 py-3 text-center",children:B.jsx("button",{onClick:()=>L(M.id,M.confirmado),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${M.confirmado?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"} hover:opacity-80 transition cursor-pointer`,children:M.confirmado?" Sim":"No"})}),B.jsx("td",{className:"px-4 py-3 text-center",children:B.jsx("button",{onClick:()=>j(M.id,M.checkin),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${M.checkin?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"} hover:opacity-80 transition cursor-pointer`,children:M.checkin?" Sim":"No"})}),B.jsx("td",{className:"px-4 py-3 text-center",children:B.jsxs("div",{className:"flex justify-center space-x-2",children:[B.jsx("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/confirmar?id=${M.id}`).then(()=>Be.success("Link copiado!")),className:"text-blue-600 hover:text-blue-900",title:"Copiar link",children:B.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:B.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),B.jsx("button",{onClick:()=>R(M.id),className:"text-red-600 hover:text-red-900",title:"Remover",children:B.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:B.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},M.id))})]})}):B.jsx("div",{className:"text-center py-8",children:B.jsx("p",{className:"text-gray-500",children:y?"Nenhum convidado encontrado com este termo de pesquisa":"Nenhum convidado adicionado ainda"})})]}),t.length===0&&B.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[B.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),B.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nenhum evento criado"}),B.jsx("p",{className:"text-gray-600 mb-4",children:"Crie o seu primeiro evento para comear a gerir convidados."}),B.jsx("a",{href:"/",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:"Criar Evento"})]})]})}function b3(){const t=Ks(),e=!t.pathname.includes("/confirmar");return B.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e&&B.jsx("nav",{className:"bg-white shadow-sm border-b",children:B.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:B.jsxs("div",{className:"flex justify-between h-16",children:[B.jsxs("div",{className:"flex items-center space-x-8",children:[B.jsx(xo,{to:"/",className:"text-xl font-semibold text-gray-900 hover:text-blue-600 transition",children:" Gestor de Eventos"}),B.jsxs("div",{className:"hidden sm:flex space-x-6",children:[B.jsx(xo,{to:"/",className:`text-gray-600 hover:text-gray-900 px-3 py-2 text-sm font-medium transition ${t.pathname==="/"?"text-blue-600 border-b-2 border-blue-600":""}`,children:"Criar Evento"}),B.jsx(xo,{to:"/upload",className:`text-gray-600 hover:text-gray-900 px-3 py-2 text-sm font-medium transition ${t.pathname==="/upload"?"text-blue-600 border-b-2 border-blue-600":""}`,children:"Upload Convidados"}),B.jsx(xo,{to:"/checkin",className:`text-gray-600 hover:text-gray-900 px-3 py-2 text-sm font-medium transition ${t.pathname==="/checkin"?"text-blue-600 border-b-2 border-blue-600":""}`,children:"Check-in"}),B.jsx(xo,{to:"/dashboard",className:`text-gray-600 hover:text-gray-900 px-3 py-2 text-sm font-medium transition ${t.pathname==="/dashboard"?"text-blue-600 border-b-2 border-blue-600":""}`,children:"Dashboard"})]})]}),B.jsx("div",{className:"sm:hidden flex items-center",children:B.jsx("button",{className:"text-gray-600 hover:text-gray-900 p-2",children:B.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:B.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})})}),B.jsx("main",{className:e?"py-8":"",children:B.jsxs($y,{children:[B.jsx(gs,{path:"/",element:B.jsx(m_,{})}),B.jsx(gs,{path:"/upload",element:B.jsx(A_,{})}),B.jsx(gs,{path:"/confirmar",element:B.jsx(F_,{})}),B.jsx(gs,{path:"/checkin",element:B.jsx(A3,{})}),B.jsx(gs,{path:"/dashboard",element:B.jsx(S3,{})})]})})]})}cc.createRoot(document.getElementById("root")).render(B.jsx(nn.StrictMode,{children:B.jsxs(rv,{children:[B.jsx(b3,{}),B.jsx($v,{position:"top-right",toastOptions:{duration:3e3,style:{background:"#363636",color:"#fff"},success:{style:{background:"#10b981"}},error:{style:{background:"#ef4444"}}}})]})}));
//# sourceMappingURL=index-Cq01YOOO.js.map
