function yd(t,e){for(var r=0;r<e.length;r++){const s=e[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();var cs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function mx(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return t[s]}})}),r}var J0={exports:{}},jl={},e1={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jo=Symbol.for("react.element"),px=Symbol.for("react.portal"),xx=Symbol.for("react.fragment"),wx=Symbol.for("react.strict_mode"),yx=Symbol.for("react.profiler"),vx=Symbol.for("react.provider"),Ex=Symbol.for("react.context"),bx=Symbol.for("react.forward_ref"),_x=Symbol.for("react.suspense"),Cx=Symbol.for("react.memo"),Ax=Symbol.for("react.lazy"),Xh=Symbol.iterator;function Sx(t){return t===null||typeof t!="object"?null:(t=Xh&&t[Xh]||t["@@iterator"],typeof t=="function"?t:null)}var t1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r1=Object.assign,n1={};function Us(t,e,r){this.props=t,this.context=e,this.refs=n1,this.updater=r||t1}Us.prototype.isReactComponent={};Us.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Us.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function i1(){}i1.prototype=Us.prototype;function Ed(t,e,r){this.props=t,this.context=e,this.refs=n1,this.updater=r||t1}var bd=Ed.prototype=new i1;bd.constructor=Ed;r1(bd,Us.prototype);bd.isPureReactComponent=!0;var qh=Array.isArray,s1=Object.prototype.hasOwnProperty,_d={current:null},o1={key:!0,ref:!0,__self:!0,__source:!0};function a1(t,e,r){var s,a={},l=null,h=null;if(e!=null)for(s in e.ref!==void 0&&(h=e.ref),e.key!==void 0&&(l=""+e.key),e)s1.call(e,s)&&!o1.hasOwnProperty(s)&&(a[s]=e[s]);var p=arguments.length-2;if(p===1)a.children=r;else if(1<p){for(var m=Array(p),g=0;g<p;g++)m[g]=arguments[g+2];a.children=m}if(t&&t.defaultProps)for(s in p=t.defaultProps,p)a[s]===void 0&&(a[s]=p[s]);return{$$typeof:Jo,type:t,key:l,ref:h,props:a,_owner:_d.current}}function Ix(t,e){return{$$typeof:Jo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jo}function Nx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Kh=/\/+/g;function _c(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Nx(""+t.key):e.toString(36)}function Wa(t,e,r,s,a){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var h=!1;if(t===null)h=!0;else switch(l){case"string":case"number":h=!0;break;case"object":switch(t.$$typeof){case Jo:case px:h=!0}}if(h)return h=t,a=a(h),t=s===""?"."+_c(h,0):s,qh(a)?(r="",t!=null&&(r=t.replace(Kh,"$&/")+"/"),Wa(a,e,r,"",function(g){return g})):a!=null&&(Cd(a)&&(a=Ix(a,r+(!a.key||h&&h.key===a.key?"":(""+a.key).replace(Kh,"$&/")+"/")+t)),e.push(a)),1;if(h=0,s=s===""?".":s+":",qh(t))for(var p=0;p<t.length;p++){l=t[p];var m=s+_c(l,p);h+=Wa(l,e,r,m,a)}else if(m=Sx(t),typeof m=="function")for(t=m.call(t),p=0;!(l=t.next()).done;)l=l.value,m=s+_c(l,p++),h+=Wa(l,e,r,m,a);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return h}function ma(t,e,r){if(t==null)return t;var s=[],a=0;return Wa(t,s,"","",function(l){return e.call(r,l,a++)}),s}function Tx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fr={current:null},Ha={transition:null},Rx={ReactCurrentDispatcher:fr,ReactCurrentBatchConfig:Ha,ReactCurrentOwner:_d};function l1(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:ma,forEach:function(t,e,r){ma(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ma(t,function(){e++}),e},toArray:function(t){return ma(t,function(e){return e})||[]},only:function(t){if(!Cd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=Us;ze.Fragment=xx;ze.Profiler=yx;ze.PureComponent=Ed;ze.StrictMode=wx;ze.Suspense=_x;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rx;ze.act=l1;ze.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=r1({},t.props),a=t.key,l=t.ref,h=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,h=_d.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var p=t.type.defaultProps;for(m in e)s1.call(e,m)&&!o1.hasOwnProperty(m)&&(s[m]=e[m]===void 0&&p!==void 0?p[m]:e[m])}var m=arguments.length-2;if(m===1)s.children=r;else if(1<m){p=Array(m);for(var g=0;g<m;g++)p[g]=arguments[g+2];s.children=p}return{$$typeof:Jo,type:t.type,key:a,ref:l,props:s,_owner:h}};ze.createContext=function(t){return t={$$typeof:Ex,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vx,_context:t},t.Consumer=t};ze.createElement=a1;ze.createFactory=function(t){var e=a1.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:bx,render:t}};ze.isValidElement=Cd;ze.lazy=function(t){return{$$typeof:Ax,_payload:{_status:-1,_result:t},_init:Tx}};ze.memo=function(t,e){return{$$typeof:Cx,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=Ha.transition;Ha.transition={};try{t()}finally{Ha.transition=e}};ze.unstable_act=l1;ze.useCallback=function(t,e){return fr.current.useCallback(t,e)};ze.useContext=function(t){return fr.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return fr.current.useDeferredValue(t)};ze.useEffect=function(t,e){return fr.current.useEffect(t,e)};ze.useId=function(){return fr.current.useId()};ze.useImperativeHandle=function(t,e,r){return fr.current.useImperativeHandle(t,e,r)};ze.useInsertionEffect=function(t,e){return fr.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return fr.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return fr.current.useMemo(t,e)};ze.useReducer=function(t,e,r){return fr.current.useReducer(t,e,r)};ze.useRef=function(t){return fr.current.useRef(t)};ze.useState=function(t){return fr.current.useState(t)};ze.useSyncExternalStore=function(t,e,r){return fr.current.useSyncExternalStore(t,e,r)};ze.useTransition=function(){return fr.current.useTransition()};ze.version="18.3.1";e1.exports=ze;var H=e1.exports;const tn=vd(H),Ox=yd({__proto__:null,default:tn},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kx=H,Px=Symbol.for("react.element"),Dx=Symbol.for("react.fragment"),Mx=Object.prototype.hasOwnProperty,Lx=kx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jx={key:!0,ref:!0,__self:!0,__source:!0};function c1(t,e,r){var s,a={},l=null,h=null;r!==void 0&&(l=""+r),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(h=e.ref);for(s in e)Mx.call(e,s)&&!jx.hasOwnProperty(s)&&(a[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)a[s]===void 0&&(a[s]=e[s]);return{$$typeof:Px,type:t,key:l,ref:h,props:a,_owner:Lx.current}}jl.Fragment=Dx;jl.jsx=c1;jl.jsxs=c1;J0.exports=jl;var y=J0.exports,su={},u1={exports:{}},Dr={},d1={exports:{}},h1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ee,re){var he=ee.length;ee.push(re);e:for(;0<he;){var fe=he-1>>>1,ue=ee[fe];if(0<a(ue,re))ee[fe]=re,ee[he]=ue,he=fe;else break e}}function r(ee){return ee.length===0?null:ee[0]}function s(ee){if(ee.length===0)return null;var re=ee[0],he=ee.pop();if(he!==re){ee[0]=he;e:for(var fe=0,ue=ee.length,me=ue>>>1;fe<me;){var Pe=2*(fe+1)-1,et=ee[Pe],de=Pe+1,Nt=ee[de];if(0>a(et,he))de<ue&&0>a(Nt,et)?(ee[fe]=Nt,ee[de]=he,fe=de):(ee[fe]=et,ee[Pe]=he,fe=Pe);else if(de<ue&&0>a(Nt,he))ee[fe]=Nt,ee[de]=he,fe=de;else break e}}return re}function a(ee,re){var he=ee.sortIndex-re.sortIndex;return he!==0?he:ee.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var h=Date,p=h.now();t.unstable_now=function(){return h.now()-p}}var m=[],g=[],v=1,E=null,_=3,T=!1,O=!1,j=!1,B=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(ee){for(var re=r(g);re!==null;){if(re.callback===null)s(g);else if(re.startTime<=ee)s(g),re.sortIndex=re.expirationTime,e(m,re);else break;re=r(g)}}function L(ee){if(j=!1,I(ee),!O)if(r(m)!==null)O=!0,Q(W);else{var re=r(g);re!==null&&te(L,re.startTime-ee)}}function W(ee,re){O=!1,j&&(j=!1,P(k),k=-1),T=!0;var he=_;try{for(I(re),E=r(m);E!==null&&(!(E.expirationTime>re)||ee&&!J());){var fe=E.callback;if(typeof fe=="function"){E.callback=null,_=E.priorityLevel;var ue=fe(E.expirationTime<=re);re=t.unstable_now(),typeof ue=="function"?E.callback=ue:E===r(m)&&s(m),I(re)}else s(m);E=r(m)}if(E!==null)var me=!0;else{var Pe=r(g);Pe!==null&&te(L,Pe.startTime-re),me=!1}return me}finally{E=null,_=he,T=!1}}var G=!1,U=null,k=-1,A=5,F=-1;function J(){return!(t.unstable_now()-F<A)}function X(){if(U!==null){var ee=t.unstable_now();F=ee;var re=!0;try{re=U(!0,ee)}finally{re?se():(G=!1,U=null)}}else G=!1}var se;if(typeof N=="function")se=function(){N(X)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,K=xe.port2;xe.port1.onmessage=X,se=function(){K.postMessage(null)}}else se=function(){B(X,0)};function Q(ee){U=ee,G||(G=!0,se())}function te(ee,re){k=B(function(){ee(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_continueExecution=function(){O||T||(O=!0,Q(W))},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return r(m)},t.unstable_next=function(ee){switch(_){case 1:case 2:case 3:var re=3;break;default:re=_}var he=_;_=re;try{return ee()}finally{_=he}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ee,re){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var he=_;_=ee;try{return re()}finally{_=he}},t.unstable_scheduleCallback=function(ee,re,he){var fe=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?fe+he:fe):he=fe,ee){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=he+ue,ee={id:v++,callback:re,priorityLevel:ee,startTime:he,expirationTime:ue,sortIndex:-1},he>fe?(ee.sortIndex=he,e(g,ee),r(m)===null&&ee===r(g)&&(j?(P(k),k=-1):j=!0,te(L,he-fe))):(ee.sortIndex=ue,e(m,ee),O||T||(O=!0,Q(W))),ee},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(ee){var re=_;return function(){var he=_;_=re;try{return ee.apply(this,arguments)}finally{_=he}}}})(h1);d1.exports=h1;var Bx=d1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fx=H,Pr=Bx;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f1=new Set,Oo={};function Gi(t,e){ks(t,e),ks(t+"Capture",e)}function ks(t,e){for(Oo[t]=e,t=0;t<e.length;t++)f1.add(e[t])}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ou=Object.prototype.hasOwnProperty,Ux=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yh={},Zh={};function zx(t){return ou.call(Zh,t)?!0:ou.call(Yh,t)?!1:Ux.test(t)?Zh[t]=!0:(Yh[t]=!0,!1)}function Vx(t,e,r,s){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Wx(t,e,r,s){if(e===null||typeof e>"u"||Vx(t,e,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gr(t,e,r,s,a,l,h){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=h}var tr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tr[t]=new gr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tr[e]=new gr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tr[t]=new gr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tr[t]=new gr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tr[t]=new gr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tr[t]=new gr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tr[t]=new gr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tr[t]=new gr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tr[t]=new gr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ad=/[\-:]([a-z])/g;function Sd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ad,Sd);tr[e]=new gr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ad,Sd);tr[e]=new gr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ad,Sd);tr[e]=new gr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tr[t]=new gr(t,1,!1,t.toLowerCase(),null,!1,!1)});tr.xlinkHref=new gr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tr[t]=new gr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Id(t,e,r,s){var a=tr.hasOwnProperty(e)?tr[e]:null;(a!==null?a.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Wx(e,r,a,s)&&(r=null),s||a===null?zx(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,s=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?t.setAttributeNS(s,e,r):t.setAttribute(e,r))))}var Ln=Fx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pa=Symbol.for("react.element"),hs=Symbol.for("react.portal"),fs=Symbol.for("react.fragment"),Nd=Symbol.for("react.strict_mode"),au=Symbol.for("react.profiler"),g1=Symbol.for("react.provider"),m1=Symbol.for("react.context"),Td=Symbol.for("react.forward_ref"),lu=Symbol.for("react.suspense"),cu=Symbol.for("react.suspense_list"),Rd=Symbol.for("react.memo"),Xn=Symbol.for("react.lazy"),p1=Symbol.for("react.offscreen"),Qh=Symbol.iterator;function so(t){return t===null||typeof t!="object"?null:(t=Qh&&t[Qh]||t["@@iterator"],typeof t=="function"?t:null)}var bt=Object.assign,Cc;function go(t){if(Cc===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Cc=e&&e[1]||""}return`
`+Cc+t}var Ac=!1;function Sc(t,e){if(!t||Ac)return"";Ac=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(g){var s=g}Reflect.construct(t,[],e)}else{try{e.call()}catch(g){s=g}t.call(e.prototype)}else{try{throw Error()}catch(g){s=g}t()}}catch(g){if(g&&s&&typeof g.stack=="string"){for(var a=g.stack.split(`
`),l=s.stack.split(`
`),h=a.length-1,p=l.length-1;1<=h&&0<=p&&a[h]!==l[p];)p--;for(;1<=h&&0<=p;h--,p--)if(a[h]!==l[p]){if(h!==1||p!==1)do if(h--,p--,0>p||a[h]!==l[p]){var m=`
`+a[h].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=h&&0<=p);break}}}finally{Ac=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?go(t):""}function Hx(t){switch(t.tag){case 5:return go(t.type);case 16:return go("Lazy");case 13:return go("Suspense");case 19:return go("SuspenseList");case 0:case 2:case 15:return t=Sc(t.type,!1),t;case 11:return t=Sc(t.type.render,!1),t;case 1:return t=Sc(t.type,!0),t;default:return""}}function uu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fs:return"Fragment";case hs:return"Portal";case au:return"Profiler";case Nd:return"StrictMode";case lu:return"Suspense";case cu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case m1:return(t.displayName||"Context")+".Consumer";case g1:return(t._context.displayName||"Context")+".Provider";case Td:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rd:return e=t.displayName||null,e!==null?e:uu(t.type)||"Memo";case Xn:e=t._payload,t=t._init;try{return uu(t(e))}catch{}}return null}function Gx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uu(e);case 8:return e===Nd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function di(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function x1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $x(t){var e=x1(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(h){s=""+h,l.call(this,h)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(h){s=""+h},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xa(t){t._valueTracker||(t._valueTracker=$x(t))}function w1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),s="";return t&&(s=x1(t)?t.checked?"true":"false":t.value),t=s,t!==r?(e.setValue(t),!0):!1}function rl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function du(t,e){var r=e.checked;return bt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Jh(t,e){var r=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;r=di(e.value!=null?e.value:r),t._wrapperState={initialChecked:s,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function y1(t,e){e=e.checked,e!=null&&Id(t,"checked",e,!1)}function hu(t,e){y1(t,e);var r=di(e.value),s=e.type;if(r!=null)s==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fu(t,e.type,r):e.hasOwnProperty("defaultValue")&&fu(t,e.type,di(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ef(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function fu(t,e,r){(e!=="number"||rl(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var mo=Array.isArray;function As(t,e,r,s){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&s&&(t[r].defaultSelected=!0)}else{for(r=""+di(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,s&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function gu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return bt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tf(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(oe(92));if(mo(r)){if(1<r.length)throw Error(oe(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:di(r)}}function v1(t,e){var r=di(e.value),s=di(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),s!=null&&(t.defaultValue=""+s)}function rf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function E1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?E1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wa,b1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,s,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,s,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wa=wa||document.createElement("div"),wa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ko(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var vo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xx=["Webkit","ms","Moz","O"];Object.keys(vo).forEach(function(t){Xx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vo[e]=vo[t]})});function _1(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||vo.hasOwnProperty(t)&&vo[t]?(""+e).trim():e+"px"}function C1(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=_1(r,e[r],s);r==="float"&&(r="cssFloat"),s?t.setProperty(r,a):t[r]=a}}var qx=bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pu(t,e){if(e){if(qx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function xu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wu=null;function Od(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yu=null,Ss=null,Is=null;function nf(t){if(t=ra(t)){if(typeof yu!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=Vl(e),yu(t.stateNode,t.type,e))}}function A1(t){Ss?Is?Is.push(t):Is=[t]:Ss=t}function S1(){if(Ss){var t=Ss,e=Is;if(Is=Ss=null,nf(t),e)for(t=0;t<e.length;t++)nf(e[t])}}function I1(t,e){return t(e)}function N1(){}var Ic=!1;function T1(t,e,r){if(Ic)return t(e,r);Ic=!0;try{return I1(t,e,r)}finally{Ic=!1,(Ss!==null||Is!==null)&&(N1(),S1())}}function Po(t,e){var r=t.stateNode;if(r===null)return null;var s=Vl(r);if(s===null)return null;r=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(oe(231,e,typeof r));return r}var vu=!1;if(On)try{var oo={};Object.defineProperty(oo,"passive",{get:function(){vu=!0}}),window.addEventListener("test",oo,oo),window.removeEventListener("test",oo,oo)}catch{vu=!1}function Kx(t,e,r,s,a,l,h,p,m){var g=Array.prototype.slice.call(arguments,3);try{e.apply(r,g)}catch(v){this.onError(v)}}var Eo=!1,nl=null,il=!1,Eu=null,Yx={onError:function(t){Eo=!0,nl=t}};function Zx(t,e,r,s,a,l,h,p,m){Eo=!1,nl=null,Kx.apply(Yx,arguments)}function Qx(t,e,r,s,a,l,h,p,m){if(Zx.apply(this,arguments),Eo){if(Eo){var g=nl;Eo=!1,nl=null}else throw Error(oe(198));il||(il=!0,Eu=g)}}function $i(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function R1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sf(t){if($i(t)!==t)throw Error(oe(188))}function Jx(t){var e=t.alternate;if(!e){if(e=$i(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var r=t,s=e;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return sf(a),t;if(l===s)return sf(a),e;l=l.sibling}throw Error(oe(188))}if(r.return!==s.return)r=a,s=l;else{for(var h=!1,p=a.child;p;){if(p===r){h=!0,r=a,s=l;break}if(p===s){h=!0,s=a,r=l;break}p=p.sibling}if(!h){for(p=l.child;p;){if(p===r){h=!0,r=l,s=a;break}if(p===s){h=!0,s=l,r=a;break}p=p.sibling}if(!h)throw Error(oe(189))}}if(r.alternate!==s)throw Error(oe(190))}if(r.tag!==3)throw Error(oe(188));return r.stateNode.current===r?t:e}function O1(t){return t=Jx(t),t!==null?k1(t):null}function k1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=k1(t);if(e!==null)return e;t=t.sibling}return null}var P1=Pr.unstable_scheduleCallback,of=Pr.unstable_cancelCallback,e2=Pr.unstable_shouldYield,t2=Pr.unstable_requestPaint,Rt=Pr.unstable_now,r2=Pr.unstable_getCurrentPriorityLevel,kd=Pr.unstable_ImmediatePriority,D1=Pr.unstable_UserBlockingPriority,sl=Pr.unstable_NormalPriority,n2=Pr.unstable_LowPriority,M1=Pr.unstable_IdlePriority,Bl=null,En=null;function i2(t){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(Bl,t,void 0,(t.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:a2,s2=Math.log,o2=Math.LN2;function a2(t){return t>>>=0,t===0?32:31-(s2(t)/o2|0)|0}var ya=64,va=4194304;function po(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ol(t,e){var r=t.pendingLanes;if(r===0)return 0;var s=0,a=t.suspendedLanes,l=t.pingedLanes,h=r&268435455;if(h!==0){var p=h&~a;p!==0?s=po(p):(l&=h,l!==0&&(s=po(l)))}else h=r&~a,h!==0?s=po(h):l!==0&&(s=po(l));if(s===0)return 0;if(e!==0&&e!==s&&!(e&a)&&(a=s&-s,l=e&-e,a>=l||a===16&&(l&4194240)!==0))return e;if(s&4&&(s|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)r=31-an(e),a=1<<r,s|=t[r],e&=~a;return s}function l2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function c2(t,e){for(var r=t.suspendedLanes,s=t.pingedLanes,a=t.expirationTimes,l=t.pendingLanes;0<l;){var h=31-an(l),p=1<<h,m=a[h];m===-1?(!(p&r)||p&s)&&(a[h]=l2(p,e)):m<=e&&(t.expiredLanes|=p),l&=~p}}function bu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function L1(){var t=ya;return ya<<=1,!(ya&4194240)&&(ya=64),t}function Nc(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ea(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-an(e),t[e]=r}function u2(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-an(r),l=1<<a;e[a]=0,s[a]=-1,t[a]=-1,r&=~l}}function Pd(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var s=31-an(r),a=1<<s;a&e|t[s]&e&&(t[s]|=e),r&=~a}}var Je=0;function j1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var B1,Dd,F1,U1,z1,_u=!1,Ea=[],ri=null,ni=null,ii=null,Do=new Map,Mo=new Map,Kn=[],d2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function af(t,e){switch(t){case"focusin":case"focusout":ri=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":Do.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mo.delete(e.pointerId)}}function ao(t,e,r,s,a,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:r,eventSystemFlags:s,nativeEvent:l,targetContainers:[a]},e!==null&&(e=ra(e),e!==null&&Dd(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function h2(t,e,r,s,a){switch(e){case"focusin":return ri=ao(ri,t,e,r,s,a),!0;case"dragenter":return ni=ao(ni,t,e,r,s,a),!0;case"mouseover":return ii=ao(ii,t,e,r,s,a),!0;case"pointerover":var l=a.pointerId;return Do.set(l,ao(Do.get(l)||null,t,e,r,s,a)),!0;case"gotpointercapture":return l=a.pointerId,Mo.set(l,ao(Mo.get(l)||null,t,e,r,s,a)),!0}return!1}function V1(t){var e=Pi(t.target);if(e!==null){var r=$i(e);if(r!==null){if(e=r.tag,e===13){if(e=R1(r),e!==null){t.blockedOn=e,z1(t.priority,function(){F1(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ga(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Cu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var s=new r.constructor(r.type,r);wu=s,r.target.dispatchEvent(s),wu=null}else return e=ra(r),e!==null&&Dd(e),t.blockedOn=r,!1;e.shift()}return!0}function lf(t,e,r){Ga(t)&&r.delete(e)}function f2(){_u=!1,ri!==null&&Ga(ri)&&(ri=null),ni!==null&&Ga(ni)&&(ni=null),ii!==null&&Ga(ii)&&(ii=null),Do.forEach(lf),Mo.forEach(lf)}function lo(t,e){t.blockedOn===e&&(t.blockedOn=null,_u||(_u=!0,Pr.unstable_scheduleCallback(Pr.unstable_NormalPriority,f2)))}function Lo(t){function e(a){return lo(a,t)}if(0<Ea.length){lo(Ea[0],t);for(var r=1;r<Ea.length;r++){var s=Ea[r];s.blockedOn===t&&(s.blockedOn=null)}}for(ri!==null&&lo(ri,t),ni!==null&&lo(ni,t),ii!==null&&lo(ii,t),Do.forEach(e),Mo.forEach(e),r=0;r<Kn.length;r++)s=Kn[r],s.blockedOn===t&&(s.blockedOn=null);for(;0<Kn.length&&(r=Kn[0],r.blockedOn===null);)V1(r),r.blockedOn===null&&Kn.shift()}var Ns=Ln.ReactCurrentBatchConfig,al=!0;function g2(t,e,r,s){var a=Je,l=Ns.transition;Ns.transition=null;try{Je=1,Md(t,e,r,s)}finally{Je=a,Ns.transition=l}}function m2(t,e,r,s){var a=Je,l=Ns.transition;Ns.transition=null;try{Je=4,Md(t,e,r,s)}finally{Je=a,Ns.transition=l}}function Md(t,e,r,s){if(al){var a=Cu(t,e,r,s);if(a===null)Bc(t,e,s,ll,r),af(t,s);else if(h2(a,t,e,r,s))s.stopPropagation();else if(af(t,s),e&4&&-1<d2.indexOf(t)){for(;a!==null;){var l=ra(a);if(l!==null&&B1(l),l=Cu(t,e,r,s),l===null&&Bc(t,e,s,ll,r),l===a)break;a=l}a!==null&&s.stopPropagation()}else Bc(t,e,s,null,r)}}var ll=null;function Cu(t,e,r,s){if(ll=null,t=Od(s),t=Pi(t),t!==null)if(e=$i(t),e===null)t=null;else if(r=e.tag,r===13){if(t=R1(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ll=t,null}function W1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(r2()){case kd:return 1;case D1:return 4;case sl:case n2:return 16;case M1:return 536870912;default:return 16}default:return 16}}var Jn=null,Ld=null,$a=null;function H1(){if($a)return $a;var t,e=Ld,r=e.length,s,a="value"in Jn?Jn.value:Jn.textContent,l=a.length;for(t=0;t<r&&e[t]===a[t];t++);var h=r-t;for(s=1;s<=h&&e[r-s]===a[l-s];s++);return $a=a.slice(t,1<s?1-s:void 0)}function Xa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ba(){return!0}function cf(){return!1}function Mr(t){function e(r,s,a,l,h){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=l,this.target=h,this.currentTarget=null;for(var p in t)t.hasOwnProperty(p)&&(r=t[p],this[p]=r?r(l):l[p]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ba:cf,this.isPropagationStopped=cf,this}return bt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ba)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ba)},persist:function(){},isPersistent:ba}),e}var zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jd=Mr(zs),ta=bt({},zs,{view:0,detail:0}),p2=Mr(ta),Tc,Rc,co,Fl=bt({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==co&&(co&&t.type==="mousemove"?(Tc=t.screenX-co.screenX,Rc=t.screenY-co.screenY):Rc=Tc=0,co=t),Tc)},movementY:function(t){return"movementY"in t?t.movementY:Rc}}),uf=Mr(Fl),x2=bt({},Fl,{dataTransfer:0}),w2=Mr(x2),y2=bt({},ta,{relatedTarget:0}),Oc=Mr(y2),v2=bt({},zs,{animationName:0,elapsedTime:0,pseudoElement:0}),E2=Mr(v2),b2=bt({},zs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_2=Mr(b2),C2=bt({},zs,{data:0}),df=Mr(C2),A2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function N2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=I2[t])?!!e[t]:!1}function Bd(){return N2}var T2=bt({},ta,{key:function(t){if(t.key){var e=A2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?S2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bd,charCode:function(t){return t.type==="keypress"?Xa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),R2=Mr(T2),O2=bt({},Fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hf=Mr(O2),k2=bt({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bd}),P2=Mr(k2),D2=bt({},zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),M2=Mr(D2),L2=bt({},Fl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),j2=Mr(L2),B2=[9,13,27,32],Fd=On&&"CompositionEvent"in window,bo=null;On&&"documentMode"in document&&(bo=document.documentMode);var F2=On&&"TextEvent"in window&&!bo,G1=On&&(!Fd||bo&&8<bo&&11>=bo),ff=" ",gf=!1;function $1(t,e){switch(t){case"keyup":return B2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gs=!1;function U2(t,e){switch(t){case"compositionend":return X1(e);case"keypress":return e.which!==32?null:(gf=!0,ff);case"textInput":return t=e.data,t===ff&&gf?null:t;default:return null}}function z2(t,e){if(gs)return t==="compositionend"||!Fd&&$1(t,e)?(t=H1(),$a=Ld=Jn=null,gs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return G1&&e.locale!=="ko"?null:e.data;default:return null}}var V2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!V2[t.type]:e==="textarea"}function q1(t,e,r,s){A1(s),e=cl(e,"onChange"),0<e.length&&(r=new jd("onChange","change",null,r,s),t.push({event:r,listeners:e}))}var _o=null,jo=null;function W2(t){sg(t,0)}function Ul(t){var e=xs(t);if(w1(e))return t}function H2(t,e){if(t==="change")return e}var K1=!1;if(On){var kc;if(On){var Pc="oninput"in document;if(!Pc){var pf=document.createElement("div");pf.setAttribute("oninput","return;"),Pc=typeof pf.oninput=="function"}kc=Pc}else kc=!1;K1=kc&&(!document.documentMode||9<document.documentMode)}function xf(){_o&&(_o.detachEvent("onpropertychange",Y1),jo=_o=null)}function Y1(t){if(t.propertyName==="value"&&Ul(jo)){var e=[];q1(e,jo,t,Od(t)),T1(W2,e)}}function G2(t,e,r){t==="focusin"?(xf(),_o=e,jo=r,_o.attachEvent("onpropertychange",Y1)):t==="focusout"&&xf()}function $2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ul(jo)}function X2(t,e){if(t==="click")return Ul(e)}function q2(t,e){if(t==="input"||t==="change")return Ul(e)}function K2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cn=typeof Object.is=="function"?Object.is:K2;function Bo(t,e){if(cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!ou.call(e,a)||!cn(t[a],e[a]))return!1}return!0}function wf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yf(t,e){var r=wf(t);t=0;for(var s;r;){if(r.nodeType===3){if(s=t+r.textContent.length,t<=e&&s>=e)return{node:r,offset:e-t};t=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=wf(r)}}function Z1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Z1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Q1(){for(var t=window,e=rl();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=rl(t.document)}return e}function Ud(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Y2(t){var e=Q1(),r=t.focusedElem,s=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Z1(r.ownerDocument.documentElement,r)){if(s!==null&&Ud(r)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,l=Math.min(s.start,a);s=s.end===void 0?l:Math.min(s.end,a),!t.extend&&l>s&&(a=s,s=l,l=a),a=yf(r,l);var h=yf(r,s);a&&h&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==h.node||t.focusOffset!==h.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),l>s?(t.addRange(e),t.extend(h.node,h.offset)):(e.setEnd(h.node,h.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Z2=On&&"documentMode"in document&&11>=document.documentMode,ms=null,Au=null,Co=null,Su=!1;function vf(t,e,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Su||ms==null||ms!==rl(s)||(s=ms,"selectionStart"in s&&Ud(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Co&&Bo(Co,s)||(Co=s,s=cl(Au,"onSelect"),0<s.length&&(e=new jd("onSelect","select",null,e,r),t.push({event:e,listeners:s}),e.target=ms)))}function _a(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ps={animationend:_a("Animation","AnimationEnd"),animationiteration:_a("Animation","AnimationIteration"),animationstart:_a("Animation","AnimationStart"),transitionend:_a("Transition","TransitionEnd")},Dc={},J1={};On&&(J1=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function zl(t){if(Dc[t])return Dc[t];if(!ps[t])return t;var e=ps[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in J1)return Dc[t]=e[r];return t}var eg=zl("animationend"),tg=zl("animationiteration"),rg=zl("animationstart"),ng=zl("transitionend"),ig=new Map,Ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fi(t,e){ig.set(t,e),Gi(e,[t])}for(var Mc=0;Mc<Ef.length;Mc++){var Lc=Ef[Mc],Q2=Lc.toLowerCase(),J2=Lc[0].toUpperCase()+Lc.slice(1);fi(Q2,"on"+J2)}fi(eg,"onAnimationEnd");fi(tg,"onAnimationIteration");fi(rg,"onAnimationStart");fi("dblclick","onDoubleClick");fi("focusin","onFocus");fi("focusout","onBlur");fi(ng,"onTransitionEnd");ks("onMouseEnter",["mouseout","mouseover"]);ks("onMouseLeave",["mouseout","mouseover"]);ks("onPointerEnter",["pointerout","pointerover"]);ks("onPointerLeave",["pointerout","pointerover"]);Gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ew=new Set("cancel close invalid load scroll toggle".split(" ").concat(xo));function bf(t,e,r){var s=t.type||"unknown-event";t.currentTarget=r,Qx(s,e,void 0,t),t.currentTarget=null}function sg(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var s=t[r],a=s.event;s=s.listeners;e:{var l=void 0;if(e)for(var h=s.length-1;0<=h;h--){var p=s[h],m=p.instance,g=p.currentTarget;if(p=p.listener,m!==l&&a.isPropagationStopped())break e;bf(a,p,g),l=m}else for(h=0;h<s.length;h++){if(p=s[h],m=p.instance,g=p.currentTarget,p=p.listener,m!==l&&a.isPropagationStopped())break e;bf(a,p,g),l=m}}}if(il)throw t=Eu,il=!1,Eu=null,t}function ht(t,e){var r=e[Ou];r===void 0&&(r=e[Ou]=new Set);var s=t+"__bubble";r.has(s)||(og(e,t,2,!1),r.add(s))}function jc(t,e,r){var s=0;e&&(s|=4),og(r,t,s,e)}var Ca="_reactListening"+Math.random().toString(36).slice(2);function Fo(t){if(!t[Ca]){t[Ca]=!0,f1.forEach(function(r){r!=="selectionchange"&&(ew.has(r)||jc(r,!1,t),jc(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ca]||(e[Ca]=!0,jc("selectionchange",!1,e))}}function og(t,e,r,s){switch(W1(e)){case 1:var a=g2;break;case 4:a=m2;break;default:a=Md}r=a.bind(null,e,r,t),a=void 0,!vu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),s?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function Bc(t,e,r,s,a){var l=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var h=s.tag;if(h===3||h===4){var p=s.stateNode.containerInfo;if(p===a||p.nodeType===8&&p.parentNode===a)break;if(h===4)for(h=s.return;h!==null;){var m=h.tag;if((m===3||m===4)&&(m=h.stateNode.containerInfo,m===a||m.nodeType===8&&m.parentNode===a))return;h=h.return}for(;p!==null;){if(h=Pi(p),h===null)return;if(m=h.tag,m===5||m===6){s=l=h;continue e}p=p.parentNode}}s=s.return}T1(function(){var g=l,v=Od(r),E=[];e:{var _=ig.get(t);if(_!==void 0){var T=jd,O=t;switch(t){case"keypress":if(Xa(r)===0)break e;case"keydown":case"keyup":T=R2;break;case"focusin":O="focus",T=Oc;break;case"focusout":O="blur",T=Oc;break;case"beforeblur":case"afterblur":T=Oc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=uf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=w2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=P2;break;case eg:case tg:case rg:T=E2;break;case ng:T=M2;break;case"scroll":T=p2;break;case"wheel":T=j2;break;case"copy":case"cut":case"paste":T=_2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=hf}var j=(e&4)!==0,B=!j&&t==="scroll",P=j?_!==null?_+"Capture":null:_;j=[];for(var N=g,I;N!==null;){I=N;var L=I.stateNode;if(I.tag===5&&L!==null&&(I=L,P!==null&&(L=Po(N,P),L!=null&&j.push(Uo(N,L,I)))),B)break;N=N.return}0<j.length&&(_=new T(_,O,null,r,v),E.push({event:_,listeners:j}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",_&&r!==wu&&(O=r.relatedTarget||r.fromElement)&&(Pi(O)||O[kn]))break e;if((T||_)&&(_=v.window===v?v:(_=v.ownerDocument)?_.defaultView||_.parentWindow:window,T?(O=r.relatedTarget||r.toElement,T=g,O=O?Pi(O):null,O!==null&&(B=$i(O),O!==B||O.tag!==5&&O.tag!==6)&&(O=null)):(T=null,O=g),T!==O)){if(j=uf,L="onMouseLeave",P="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(j=hf,L="onPointerLeave",P="onPointerEnter",N="pointer"),B=T==null?_:xs(T),I=O==null?_:xs(O),_=new j(L,N+"leave",T,r,v),_.target=B,_.relatedTarget=I,L=null,Pi(v)===g&&(j=new j(P,N+"enter",O,r,v),j.target=I,j.relatedTarget=B,L=j),B=L,T&&O)t:{for(j=T,P=O,N=0,I=j;I;I=ns(I))N++;for(I=0,L=P;L;L=ns(L))I++;for(;0<N-I;)j=ns(j),N--;for(;0<I-N;)P=ns(P),I--;for(;N--;){if(j===P||P!==null&&j===P.alternate)break t;j=ns(j),P=ns(P)}j=null}else j=null;T!==null&&_f(E,_,T,j,!1),O!==null&&B!==null&&_f(E,B,O,j,!0)}}e:{if(_=g?xs(g):window,T=_.nodeName&&_.nodeName.toLowerCase(),T==="select"||T==="input"&&_.type==="file")var W=H2;else if(mf(_))if(K1)W=q2;else{W=$2;var G=G2}else(T=_.nodeName)&&T.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(W=X2);if(W&&(W=W(t,g))){q1(E,W,r,v);break e}G&&G(t,_,g),t==="focusout"&&(G=_._wrapperState)&&G.controlled&&_.type==="number"&&fu(_,"number",_.value)}switch(G=g?xs(g):window,t){case"focusin":(mf(G)||G.contentEditable==="true")&&(ms=G,Au=g,Co=null);break;case"focusout":Co=Au=ms=null;break;case"mousedown":Su=!0;break;case"contextmenu":case"mouseup":case"dragend":Su=!1,vf(E,r,v);break;case"selectionchange":if(Z2)break;case"keydown":case"keyup":vf(E,r,v)}var U;if(Fd)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else gs?$1(t,r)&&(k="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(G1&&r.locale!=="ko"&&(gs||k!=="onCompositionStart"?k==="onCompositionEnd"&&gs&&(U=H1()):(Jn=v,Ld="value"in Jn?Jn.value:Jn.textContent,gs=!0)),G=cl(g,k),0<G.length&&(k=new df(k,t,null,r,v),E.push({event:k,listeners:G}),U?k.data=U:(U=X1(r),U!==null&&(k.data=U)))),(U=F2?U2(t,r):z2(t,r))&&(g=cl(g,"onBeforeInput"),0<g.length&&(v=new df("onBeforeInput","beforeinput",null,r,v),E.push({event:v,listeners:g}),v.data=U))}sg(E,e)})}function Uo(t,e,r){return{instance:t,listener:e,currentTarget:r}}function cl(t,e){for(var r=e+"Capture",s=[];t!==null;){var a=t,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Po(t,r),l!=null&&s.unshift(Uo(t,l,a)),l=Po(t,e),l!=null&&s.push(Uo(t,l,a))),t=t.return}return s}function ns(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _f(t,e,r,s,a){for(var l=e._reactName,h=[];r!==null&&r!==s;){var p=r,m=p.alternate,g=p.stateNode;if(m!==null&&m===s)break;p.tag===5&&g!==null&&(p=g,a?(m=Po(r,l),m!=null&&h.unshift(Uo(r,m,p))):a||(m=Po(r,l),m!=null&&h.push(Uo(r,m,p)))),r=r.return}h.length!==0&&t.push({event:e,listeners:h})}var tw=/\r\n?/g,rw=/\u0000|\uFFFD/g;function Cf(t){return(typeof t=="string"?t:""+t).replace(tw,`
`).replace(rw,"")}function Aa(t,e,r){if(e=Cf(e),Cf(t)!==e&&r)throw Error(oe(425))}function ul(){}var Iu=null,Nu=null;function Tu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ru=typeof setTimeout=="function"?setTimeout:void 0,nw=typeof clearTimeout=="function"?clearTimeout:void 0,Af=typeof Promise=="function"?Promise:void 0,iw=typeof queueMicrotask=="function"?queueMicrotask:typeof Af<"u"?function(t){return Af.resolve(null).then(t).catch(sw)}:Ru;function sw(t){setTimeout(function(){throw t})}function Fc(t,e){var r=e,s=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){t.removeChild(a),Lo(e);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);Lo(e)}function si(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Vs=Math.random().toString(36).slice(2),yn="__reactFiber$"+Vs,zo="__reactProps$"+Vs,kn="__reactContainer$"+Vs,Ou="__reactEvents$"+Vs,ow="__reactListeners$"+Vs,aw="__reactHandles$"+Vs;function Pi(t){var e=t[yn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[kn]||r[yn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Sf(t);t!==null;){if(r=t[yn])return r;t=Sf(t)}return e}t=r,r=t.parentNode}return null}function ra(t){return t=t[yn]||t[kn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function Vl(t){return t[zo]||null}var ku=[],ws=-1;function gi(t){return{current:t}}function gt(t){0>ws||(t.current=ku[ws],ku[ws]=null,ws--)}function ut(t,e){ws++,ku[ws]=t.current,t.current=e}var hi={},ar=gi(hi),_r=gi(!1),Fi=hi;function Ps(t,e){var r=t.type.contextTypes;if(!r)return hi;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=e[l];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Cr(t){return t=t.childContextTypes,t!=null}function dl(){gt(_r),gt(ar)}function If(t,e,r){if(ar.current!==hi)throw Error(oe(168));ut(ar,e),ut(_r,r)}function ag(t,e,r){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in e))throw Error(oe(108,Gx(t)||"Unknown",a));return bt({},r,s)}function hl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hi,Fi=ar.current,ut(ar,t),ut(_r,_r.current),!0}function Nf(t,e,r){var s=t.stateNode;if(!s)throw Error(oe(169));r?(t=ag(t,e,Fi),s.__reactInternalMemoizedMergedChildContext=t,gt(_r),gt(ar),ut(ar,t)):gt(_r),ut(_r,r)}var In=null,Wl=!1,Uc=!1;function lg(t){In===null?In=[t]:In.push(t)}function lw(t){Wl=!0,lg(t)}function mi(){if(!Uc&&In!==null){Uc=!0;var t=0,e=Je;try{var r=In;for(Je=1;t<r.length;t++){var s=r[t];do s=s(!0);while(s!==null)}In=null,Wl=!1}catch(a){throw In!==null&&(In=In.slice(t+1)),P1(kd,mi),a}finally{Je=e,Uc=!1}}return null}var ys=[],vs=0,fl=null,gl=0,Vr=[],Wr=0,Ui=null,Nn=1,Tn="";function Ii(t,e){ys[vs++]=gl,ys[vs++]=fl,fl=t,gl=e}function cg(t,e,r){Vr[Wr++]=Nn,Vr[Wr++]=Tn,Vr[Wr++]=Ui,Ui=t;var s=Nn;t=Tn;var a=32-an(s)-1;s&=~(1<<a),r+=1;var l=32-an(e)+a;if(30<l){var h=a-a%5;l=(s&(1<<h)-1).toString(32),s>>=h,a-=h,Nn=1<<32-an(e)+a|r<<a|s,Tn=l+t}else Nn=1<<l|r<<a|s,Tn=t}function zd(t){t.return!==null&&(Ii(t,1),cg(t,1,0))}function Vd(t){for(;t===fl;)fl=ys[--vs],ys[vs]=null,gl=ys[--vs],ys[vs]=null;for(;t===Ui;)Ui=Vr[--Wr],Vr[Wr]=null,Tn=Vr[--Wr],Vr[Wr]=null,Nn=Vr[--Wr],Vr[Wr]=null}var kr=null,Or=null,xt=!1,on=null;function ug(t,e){var r=Hr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Tf(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kr=t,Or=si(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kr=t,Or=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ui!==null?{id:Nn,overflow:Tn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Hr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,kr=t,Or=null,!0):!1;default:return!1}}function Pu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Du(t){if(xt){var e=Or;if(e){var r=e;if(!Tf(t,e)){if(Pu(t))throw Error(oe(418));e=si(r.nextSibling);var s=kr;e&&Tf(t,e)?ug(s,r):(t.flags=t.flags&-4097|2,xt=!1,kr=t)}}else{if(Pu(t))throw Error(oe(418));t.flags=t.flags&-4097|2,xt=!1,kr=t}}}function Rf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kr=t}function Sa(t){if(t!==kr)return!1;if(!xt)return Rf(t),xt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tu(t.type,t.memoizedProps)),e&&(e=Or)){if(Pu(t))throw dg(),Error(oe(418));for(;e;)ug(t,e),e=si(e.nextSibling)}if(Rf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Or=si(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Or=null}}else Or=kr?si(t.stateNode.nextSibling):null;return!0}function dg(){for(var t=Or;t;)t=si(t.nextSibling)}function Ds(){Or=kr=null,xt=!1}function Wd(t){on===null?on=[t]:on.push(t)}var cw=Ln.ReactCurrentBatchConfig;function uo(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(oe(309));var s=r.stateNode}if(!s)throw Error(oe(147,t));var a=s,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(h){var p=a.refs;h===null?delete p[l]:p[l]=h},e._stringRef=l,e)}if(typeof t!="string")throw Error(oe(284));if(!r._owner)throw Error(oe(290,t))}return t}function Ia(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Of(t){var e=t._init;return e(t._payload)}function hg(t){function e(P,N){if(t){var I=P.deletions;I===null?(P.deletions=[N],P.flags|=16):I.push(N)}}function r(P,N){if(!t)return null;for(;N!==null;)e(P,N),N=N.sibling;return null}function s(P,N){for(P=new Map;N!==null;)N.key!==null?P.set(N.key,N):P.set(N.index,N),N=N.sibling;return P}function a(P,N){return P=ci(P,N),P.index=0,P.sibling=null,P}function l(P,N,I){return P.index=I,t?(I=P.alternate,I!==null?(I=I.index,I<N?(P.flags|=2,N):I):(P.flags|=2,N)):(P.flags|=1048576,N)}function h(P){return t&&P.alternate===null&&(P.flags|=2),P}function p(P,N,I,L){return N===null||N.tag!==6?(N=Xc(I,P.mode,L),N.return=P,N):(N=a(N,I),N.return=P,N)}function m(P,N,I,L){var W=I.type;return W===fs?v(P,N,I.props.children,L,I.key):N!==null&&(N.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Xn&&Of(W)===N.type)?(L=a(N,I.props),L.ref=uo(P,N,I),L.return=P,L):(L=el(I.type,I.key,I.props,null,P.mode,L),L.ref=uo(P,N,I),L.return=P,L)}function g(P,N,I,L){return N===null||N.tag!==4||N.stateNode.containerInfo!==I.containerInfo||N.stateNode.implementation!==I.implementation?(N=qc(I,P.mode,L),N.return=P,N):(N=a(N,I.children||[]),N.return=P,N)}function v(P,N,I,L,W){return N===null||N.tag!==7?(N=Bi(I,P.mode,L,W),N.return=P,N):(N=a(N,I),N.return=P,N)}function E(P,N,I){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Xc(""+N,P.mode,I),N.return=P,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case pa:return I=el(N.type,N.key,N.props,null,P.mode,I),I.ref=uo(P,null,N),I.return=P,I;case hs:return N=qc(N,P.mode,I),N.return=P,N;case Xn:var L=N._init;return E(P,L(N._payload),I)}if(mo(N)||so(N))return N=Bi(N,P.mode,I,null),N.return=P,N;Ia(P,N)}return null}function _(P,N,I,L){var W=N!==null?N.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return W!==null?null:p(P,N,""+I,L);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case pa:return I.key===W?m(P,N,I,L):null;case hs:return I.key===W?g(P,N,I,L):null;case Xn:return W=I._init,_(P,N,W(I._payload),L)}if(mo(I)||so(I))return W!==null?null:v(P,N,I,L,null);Ia(P,I)}return null}function T(P,N,I,L,W){if(typeof L=="string"&&L!==""||typeof L=="number")return P=P.get(I)||null,p(N,P,""+L,W);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case pa:return P=P.get(L.key===null?I:L.key)||null,m(N,P,L,W);case hs:return P=P.get(L.key===null?I:L.key)||null,g(N,P,L,W);case Xn:var G=L._init;return T(P,N,I,G(L._payload),W)}if(mo(L)||so(L))return P=P.get(I)||null,v(N,P,L,W,null);Ia(N,L)}return null}function O(P,N,I,L){for(var W=null,G=null,U=N,k=N=0,A=null;U!==null&&k<I.length;k++){U.index>k?(A=U,U=null):A=U.sibling;var F=_(P,U,I[k],L);if(F===null){U===null&&(U=A);break}t&&U&&F.alternate===null&&e(P,U),N=l(F,N,k),G===null?W=F:G.sibling=F,G=F,U=A}if(k===I.length)return r(P,U),xt&&Ii(P,k),W;if(U===null){for(;k<I.length;k++)U=E(P,I[k],L),U!==null&&(N=l(U,N,k),G===null?W=U:G.sibling=U,G=U);return xt&&Ii(P,k),W}for(U=s(P,U);k<I.length;k++)A=T(U,P,k,I[k],L),A!==null&&(t&&A.alternate!==null&&U.delete(A.key===null?k:A.key),N=l(A,N,k),G===null?W=A:G.sibling=A,G=A);return t&&U.forEach(function(J){return e(P,J)}),xt&&Ii(P,k),W}function j(P,N,I,L){var W=so(I);if(typeof W!="function")throw Error(oe(150));if(I=W.call(I),I==null)throw Error(oe(151));for(var G=W=null,U=N,k=N=0,A=null,F=I.next();U!==null&&!F.done;k++,F=I.next()){U.index>k?(A=U,U=null):A=U.sibling;var J=_(P,U,F.value,L);if(J===null){U===null&&(U=A);break}t&&U&&J.alternate===null&&e(P,U),N=l(J,N,k),G===null?W=J:G.sibling=J,G=J,U=A}if(F.done)return r(P,U),xt&&Ii(P,k),W;if(U===null){for(;!F.done;k++,F=I.next())F=E(P,F.value,L),F!==null&&(N=l(F,N,k),G===null?W=F:G.sibling=F,G=F);return xt&&Ii(P,k),W}for(U=s(P,U);!F.done;k++,F=I.next())F=T(U,P,k,F.value,L),F!==null&&(t&&F.alternate!==null&&U.delete(F.key===null?k:F.key),N=l(F,N,k),G===null?W=F:G.sibling=F,G=F);return t&&U.forEach(function(X){return e(P,X)}),xt&&Ii(P,k),W}function B(P,N,I,L){if(typeof I=="object"&&I!==null&&I.type===fs&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case pa:e:{for(var W=I.key,G=N;G!==null;){if(G.key===W){if(W=I.type,W===fs){if(G.tag===7){r(P,G.sibling),N=a(G,I.props.children),N.return=P,P=N;break e}}else if(G.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Xn&&Of(W)===G.type){r(P,G.sibling),N=a(G,I.props),N.ref=uo(P,G,I),N.return=P,P=N;break e}r(P,G);break}else e(P,G);G=G.sibling}I.type===fs?(N=Bi(I.props.children,P.mode,L,I.key),N.return=P,P=N):(L=el(I.type,I.key,I.props,null,P.mode,L),L.ref=uo(P,N,I),L.return=P,P=L)}return h(P);case hs:e:{for(G=I.key;N!==null;){if(N.key===G)if(N.tag===4&&N.stateNode.containerInfo===I.containerInfo&&N.stateNode.implementation===I.implementation){r(P,N.sibling),N=a(N,I.children||[]),N.return=P,P=N;break e}else{r(P,N);break}else e(P,N);N=N.sibling}N=qc(I,P.mode,L),N.return=P,P=N}return h(P);case Xn:return G=I._init,B(P,N,G(I._payload),L)}if(mo(I))return O(P,N,I,L);if(so(I))return j(P,N,I,L);Ia(P,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,N!==null&&N.tag===6?(r(P,N.sibling),N=a(N,I),N.return=P,P=N):(r(P,N),N=Xc(I,P.mode,L),N.return=P,P=N),h(P)):r(P,N)}return B}var Ms=hg(!0),fg=hg(!1),ml=gi(null),pl=null,Es=null,Hd=null;function Gd(){Hd=Es=pl=null}function $d(t){var e=ml.current;gt(ml),t._currentValue=e}function Mu(t,e,r){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===r)break;t=t.return}}function Ts(t,e){pl=t,Hd=Es=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(br=!0),t.firstContext=null)}function $r(t){var e=t._currentValue;if(Hd!==t)if(t={context:t,memoizedValue:e,next:null},Es===null){if(pl===null)throw Error(oe(308));Es=t,pl.dependencies={lanes:0,firstContext:t}}else Es=Es.next=t;return e}var Di=null;function Xd(t){Di===null?Di=[t]:Di.push(t)}function gg(t,e,r,s){var a=e.interleaved;return a===null?(r.next=r,Xd(e)):(r.next=a.next,a.next=r),e.interleaved=r,Pn(t,s)}function Pn(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var qn=!1;function qd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function oi(t,e,r){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,$e&2){var a=s.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),s.pending=e,Pn(t,r)}return a=s.interleaved,a===null?(e.next=e,Xd(s)):(e.next=a.next,a.next=e),s.interleaved=e,Pn(t,r)}function qa(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,Pd(t,r)}}function kf(t,e){var r=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var h={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=h:l=l.next=h,r=r.next}while(r!==null);l===null?a=l=e:l=l.next=e}else a=l=e;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:s.shared,effects:s.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function xl(t,e,r,s){var a=t.updateQueue;qn=!1;var l=a.firstBaseUpdate,h=a.lastBaseUpdate,p=a.shared.pending;if(p!==null){a.shared.pending=null;var m=p,g=m.next;m.next=null,h===null?l=g:h.next=g,h=m;var v=t.alternate;v!==null&&(v=v.updateQueue,p=v.lastBaseUpdate,p!==h&&(p===null?v.firstBaseUpdate=g:p.next=g,v.lastBaseUpdate=m))}if(l!==null){var E=a.baseState;h=0,v=g=m=null,p=l;do{var _=p.lane,T=p.eventTime;if((s&_)===_){v!==null&&(v=v.next={eventTime:T,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var O=t,j=p;switch(_=e,T=r,j.tag){case 1:if(O=j.payload,typeof O=="function"){E=O.call(T,E,_);break e}E=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=j.payload,_=typeof O=="function"?O.call(T,E,_):O,_==null)break e;E=bt({},E,_);break e;case 2:qn=!0}}p.callback!==null&&p.lane!==0&&(t.flags|=64,_=a.effects,_===null?a.effects=[p]:_.push(p))}else T={eventTime:T,lane:_,tag:p.tag,payload:p.payload,callback:p.callback,next:null},v===null?(g=v=T,m=E):v=v.next=T,h|=_;if(p=p.next,p===null){if(p=a.shared.pending,p===null)break;_=p,p=_.next,_.next=null,a.lastBaseUpdate=_,a.shared.pending=null}}while(!0);if(v===null&&(m=E),a.baseState=m,a.firstBaseUpdate=g,a.lastBaseUpdate=v,e=a.shared.interleaved,e!==null){a=e;do h|=a.lane,a=a.next;while(a!==e)}else l===null&&(a.shared.lanes=0);Vi|=h,t.lanes=h,t.memoizedState=E}}function Pf(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(oe(191,a));a.call(s)}}}var na={},bn=gi(na),Vo=gi(na),Wo=gi(na);function Mi(t){if(t===na)throw Error(oe(174));return t}function Kd(t,e){switch(ut(Wo,e),ut(Vo,t),ut(bn,na),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mu(e,t)}gt(bn),ut(bn,e)}function Ls(){gt(bn),gt(Vo),gt(Wo)}function pg(t){Mi(Wo.current);var e=Mi(bn.current),r=mu(e,t.type);e!==r&&(ut(Vo,t),ut(bn,r))}function Yd(t){Vo.current===t&&(gt(bn),gt(Vo))}var vt=gi(0);function wl(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zc=[];function Zd(){for(var t=0;t<zc.length;t++)zc[t]._workInProgressVersionPrimary=null;zc.length=0}var Ka=Ln.ReactCurrentDispatcher,Vc=Ln.ReactCurrentBatchConfig,zi=0,Et=null,Ft=null,Gt=null,yl=!1,Ao=!1,Ho=0,uw=0;function ir(){throw Error(oe(321))}function Qd(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!cn(t[r],e[r]))return!1;return!0}function Jd(t,e,r,s,a,l){if(zi=l,Et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ka.current=t===null||t.memoizedState===null?gw:mw,t=r(s,a),Ao){l=0;do{if(Ao=!1,Ho=0,25<=l)throw Error(oe(301));l+=1,Gt=Ft=null,e.updateQueue=null,Ka.current=pw,t=r(s,a)}while(Ao)}if(Ka.current=vl,e=Ft!==null&&Ft.next!==null,zi=0,Gt=Ft=Et=null,yl=!1,e)throw Error(oe(300));return t}function eh(){var t=Ho!==0;return Ho=0,t}function wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Et.memoizedState=Gt=t:Gt=Gt.next=t,Gt}function Xr(){if(Ft===null){var t=Et.alternate;t=t!==null?t.memoizedState:null}else t=Ft.next;var e=Gt===null?Et.memoizedState:Gt.next;if(e!==null)Gt=e,Ft=t;else{if(t===null)throw Error(oe(310));Ft=t,t={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Gt===null?Et.memoizedState=Gt=t:Gt=Gt.next=t}return Gt}function Go(t,e){return typeof e=="function"?e(t):e}function Wc(t){var e=Xr(),r=e.queue;if(r===null)throw Error(oe(311));r.lastRenderedReducer=t;var s=Ft,a=s.baseQueue,l=r.pending;if(l!==null){if(a!==null){var h=a.next;a.next=l.next,l.next=h}s.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,s=s.baseState;var p=h=null,m=null,g=l;do{var v=g.lane;if((zi&v)===v)m!==null&&(m=m.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),s=g.hasEagerState?g.eagerState:t(s,g.action);else{var E={lane:v,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};m===null?(p=m=E,h=s):m=m.next=E,Et.lanes|=v,Vi|=v}g=g.next}while(g!==null&&g!==l);m===null?h=s:m.next=p,cn(s,e.memoizedState)||(br=!0),e.memoizedState=s,e.baseState=h,e.baseQueue=m,r.lastRenderedState=s}if(t=r.interleaved,t!==null){a=t;do l=a.lane,Et.lanes|=l,Vi|=l,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Hc(t){var e=Xr(),r=e.queue;if(r===null)throw Error(oe(311));r.lastRenderedReducer=t;var s=r.dispatch,a=r.pending,l=e.memoizedState;if(a!==null){r.pending=null;var h=a=a.next;do l=t(l,h.action),h=h.next;while(h!==a);cn(l,e.memoizedState)||(br=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),r.lastRenderedState=l}return[l,s]}function xg(){}function wg(t,e){var r=Et,s=Xr(),a=e(),l=!cn(s.memoizedState,a);if(l&&(s.memoizedState=a,br=!0),s=s.queue,th(Eg.bind(null,r,s,t),[t]),s.getSnapshot!==e||l||Gt!==null&&Gt.memoizedState.tag&1){if(r.flags|=2048,$o(9,vg.bind(null,r,s,a,e),void 0,null),$t===null)throw Error(oe(349));zi&30||yg(r,e,a)}return a}function yg(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function vg(t,e,r,s){e.value=r,e.getSnapshot=s,bg(e)&&_g(t)}function Eg(t,e,r){return r(function(){bg(e)&&_g(t)})}function bg(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!cn(t,r)}catch{return!0}}function _g(t){var e=Pn(t,1);e!==null&&ln(e,t,1,-1)}function Df(t){var e=wn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:t},e.queue=t,t=t.dispatch=fw.bind(null,Et,t),[e.memoizedState,t]}function $o(t,e,r,s){return t={tag:t,create:e,destroy:r,deps:s,next:null},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(s=r.next,r.next=t,t.next=s,e.lastEffect=t)),t}function Cg(){return Xr().memoizedState}function Ya(t,e,r,s){var a=wn();Et.flags|=t,a.memoizedState=$o(1|e,r,void 0,s===void 0?null:s)}function Hl(t,e,r,s){var a=Xr();s=s===void 0?null:s;var l=void 0;if(Ft!==null){var h=Ft.memoizedState;if(l=h.destroy,s!==null&&Qd(s,h.deps)){a.memoizedState=$o(e,r,l,s);return}}Et.flags|=t,a.memoizedState=$o(1|e,r,l,s)}function Mf(t,e){return Ya(8390656,8,t,e)}function th(t,e){return Hl(2048,8,t,e)}function Ag(t,e){return Hl(4,2,t,e)}function Sg(t,e){return Hl(4,4,t,e)}function Ig(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ng(t,e,r){return r=r!=null?r.concat([t]):null,Hl(4,4,Ig.bind(null,e,t),r)}function rh(){}function Tg(t,e){var r=Xr();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Qd(e,s[1])?s[0]:(r.memoizedState=[t,e],t)}function Rg(t,e){var r=Xr();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Qd(e,s[1])?s[0]:(t=t(),r.memoizedState=[t,e],t)}function Og(t,e,r){return zi&21?(cn(r,e)||(r=L1(),Et.lanes|=r,Vi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,br=!0),t.memoizedState=r)}function dw(t,e){var r=Je;Je=r!==0&&4>r?r:4,t(!0);var s=Vc.transition;Vc.transition={};try{t(!1),e()}finally{Je=r,Vc.transition=s}}function kg(){return Xr().memoizedState}function hw(t,e,r){var s=li(t);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Pg(t))Dg(e,r);else if(r=gg(t,e,r,s),r!==null){var a=hr();ln(r,t,s,a),Mg(r,e,s)}}function fw(t,e,r){var s=li(t),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Pg(t))Dg(e,a);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var h=e.lastRenderedState,p=l(h,r);if(a.hasEagerState=!0,a.eagerState=p,cn(p,h)){var m=e.interleaved;m===null?(a.next=a,Xd(e)):(a.next=m.next,m.next=a),e.interleaved=a;return}}catch{}finally{}r=gg(t,e,a,s),r!==null&&(a=hr(),ln(r,t,s,a),Mg(r,e,s))}}function Pg(t){var e=t.alternate;return t===Et||e!==null&&e===Et}function Dg(t,e){Ao=yl=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Mg(t,e,r){if(r&4194240){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,Pd(t,r)}}var vl={readContext:$r,useCallback:ir,useContext:ir,useEffect:ir,useImperativeHandle:ir,useInsertionEffect:ir,useLayoutEffect:ir,useMemo:ir,useReducer:ir,useRef:ir,useState:ir,useDebugValue:ir,useDeferredValue:ir,useTransition:ir,useMutableSource:ir,useSyncExternalStore:ir,useId:ir,unstable_isNewReconciler:!1},gw={readContext:$r,useCallback:function(t,e){return wn().memoizedState=[t,e===void 0?null:e],t},useContext:$r,useEffect:Mf,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ya(4194308,4,Ig.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ya(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ya(4,2,t,e)},useMemo:function(t,e){var r=wn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var s=wn();return e=r!==void 0?r(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=hw.bind(null,Et,t),[s.memoizedState,t]},useRef:function(t){var e=wn();return t={current:t},e.memoizedState=t},useState:Df,useDebugValue:rh,useDeferredValue:function(t){return wn().memoizedState=t},useTransition:function(){var t=Df(!1),e=t[0];return t=dw.bind(null,t[1]),wn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var s=Et,a=wn();if(xt){if(r===void 0)throw Error(oe(407));r=r()}else{if(r=e(),$t===null)throw Error(oe(349));zi&30||yg(s,e,r)}a.memoizedState=r;var l={value:r,getSnapshot:e};return a.queue=l,Mf(Eg.bind(null,s,l,t),[t]),s.flags|=2048,$o(9,vg.bind(null,s,l,r,e),void 0,null),r},useId:function(){var t=wn(),e=$t.identifierPrefix;if(xt){var r=Tn,s=Nn;r=(s&~(1<<32-an(s)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ho++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=uw++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mw={readContext:$r,useCallback:Tg,useContext:$r,useEffect:th,useImperativeHandle:Ng,useInsertionEffect:Ag,useLayoutEffect:Sg,useMemo:Rg,useReducer:Wc,useRef:Cg,useState:function(){return Wc(Go)},useDebugValue:rh,useDeferredValue:function(t){var e=Xr();return Og(e,Ft.memoizedState,t)},useTransition:function(){var t=Wc(Go)[0],e=Xr().memoizedState;return[t,e]},useMutableSource:xg,useSyncExternalStore:wg,useId:kg,unstable_isNewReconciler:!1},pw={readContext:$r,useCallback:Tg,useContext:$r,useEffect:th,useImperativeHandle:Ng,useInsertionEffect:Ag,useLayoutEffect:Sg,useMemo:Rg,useReducer:Hc,useRef:Cg,useState:function(){return Hc(Go)},useDebugValue:rh,useDeferredValue:function(t){var e=Xr();return Ft===null?e.memoizedState=t:Og(e,Ft.memoizedState,t)},useTransition:function(){var t=Hc(Go)[0],e=Xr().memoizedState;return[t,e]},useMutableSource:xg,useSyncExternalStore:wg,useId:kg,unstable_isNewReconciler:!1};function rn(t,e){if(t&&t.defaultProps){e=bt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Lu(t,e,r,s){e=t.memoizedState,r=r(s,e),r=r==null?e:bt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Gl={isMounted:function(t){return(t=t._reactInternals)?$i(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var s=hr(),a=li(t),l=Rn(s,a);l.payload=e,r!=null&&(l.callback=r),e=oi(t,l,a),e!==null&&(ln(e,t,a,s),qa(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var s=hr(),a=li(t),l=Rn(s,a);l.tag=1,l.payload=e,r!=null&&(l.callback=r),e=oi(t,l,a),e!==null&&(ln(e,t,a,s),qa(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=hr(),s=li(t),a=Rn(r,s);a.tag=2,e!=null&&(a.callback=e),e=oi(t,a,s),e!==null&&(ln(e,t,s,r),qa(e,t,s))}};function Lf(t,e,r,s,a,l,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,l,h):e.prototype&&e.prototype.isPureReactComponent?!Bo(r,s)||!Bo(a,l):!0}function Lg(t,e,r){var s=!1,a=hi,l=e.contextType;return typeof l=="object"&&l!==null?l=$r(l):(a=Cr(e)?Fi:ar.current,s=e.contextTypes,l=(s=s!=null)?Ps(t,a):hi),e=new e(r,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gl,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=l),e}function jf(t,e,r,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,s),e.state!==t&&Gl.enqueueReplaceState(e,e.state,null)}function ju(t,e,r,s){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},qd(t);var l=e.contextType;typeof l=="object"&&l!==null?a.context=$r(l):(l=Cr(e)?Fi:ar.current,a.context=Ps(t,l)),a.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(Lu(t,e,l,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Gl.enqueueReplaceState(a,a.state,null),xl(t,r,a,s),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function js(t,e){try{var r="",s=e;do r+=Hx(s),s=s.return;while(s);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:a,digest:null}}function Gc(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Bu(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var xw=typeof WeakMap=="function"?WeakMap:Map;function jg(t,e,r){r=Rn(-1,r),r.tag=3,r.payload={element:null};var s=e.value;return r.callback=function(){bl||(bl=!0,qu=s),Bu(t,e)},r}function Bg(t,e,r){r=Rn(-1,r),r.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var a=e.value;r.payload=function(){return s(a)},r.callback=function(){Bu(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Bu(t,e),typeof s!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var h=e.stack;this.componentDidCatch(e.value,{componentStack:h!==null?h:""})}),r}function Bf(t,e,r){var s=t.pingCache;if(s===null){s=t.pingCache=new xw;var a=new Set;s.set(e,a)}else a=s.get(e),a===void 0&&(a=new Set,s.set(e,a));a.has(r)||(a.add(r),t=Ow.bind(null,t,e,r),e.then(t,t))}function Ff(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Uf(t,e,r,s,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Rn(-1,1),e.tag=2,oi(r,e,1))),r.lanes|=1),t)}var ww=Ln.ReactCurrentOwner,br=!1;function ur(t,e,r,s){e.child=t===null?fg(e,null,r,s):Ms(e,t.child,r,s)}function zf(t,e,r,s,a){r=r.render;var l=e.ref;return Ts(e,a),s=Jd(t,e,r,s,l,a),r=eh(),t!==null&&!br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Dn(t,e,a)):(xt&&r&&zd(e),e.flags|=1,ur(t,e,s,a),e.child)}function Vf(t,e,r,s,a){if(t===null){var l=r.type;return typeof l=="function"&&!uh(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=l,Fg(t,e,l,s,a)):(t=el(r.type,null,s,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&a)){var h=l.memoizedProps;if(r=r.compare,r=r!==null?r:Bo,r(h,s)&&t.ref===e.ref)return Dn(t,e,a)}return e.flags|=1,t=ci(l,s),t.ref=e.ref,t.return=e,e.child=t}function Fg(t,e,r,s,a){if(t!==null){var l=t.memoizedProps;if(Bo(l,s)&&t.ref===e.ref)if(br=!1,e.pendingProps=s=l,(t.lanes&a)!==0)t.flags&131072&&(br=!0);else return e.lanes=t.lanes,Dn(t,e,a)}return Fu(t,e,r,s,a)}function Ug(t,e,r){var s=e.pendingProps,a=s.children,l=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(_s,Nr),Nr|=r;else{if(!(r&1073741824))return t=l!==null?l.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ut(_s,Nr),Nr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=l!==null?l.baseLanes:r,ut(_s,Nr),Nr|=s}else l!==null?(s=l.baseLanes|r,e.memoizedState=null):s=r,ut(_s,Nr),Nr|=s;return ur(t,e,a,r),e.child}function zg(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Fu(t,e,r,s,a){var l=Cr(r)?Fi:ar.current;return l=Ps(e,l),Ts(e,a),r=Jd(t,e,r,s,l,a),s=eh(),t!==null&&!br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Dn(t,e,a)):(xt&&s&&zd(e),e.flags|=1,ur(t,e,r,a),e.child)}function Wf(t,e,r,s,a){if(Cr(r)){var l=!0;hl(e)}else l=!1;if(Ts(e,a),e.stateNode===null)Za(t,e),Lg(e,r,s),ju(e,r,s,a),s=!0;else if(t===null){var h=e.stateNode,p=e.memoizedProps;h.props=p;var m=h.context,g=r.contextType;typeof g=="object"&&g!==null?g=$r(g):(g=Cr(r)?Fi:ar.current,g=Ps(e,g));var v=r.getDerivedStateFromProps,E=typeof v=="function"||typeof h.getSnapshotBeforeUpdate=="function";E||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(p!==s||m!==g)&&jf(e,h,s,g),qn=!1;var _=e.memoizedState;h.state=_,xl(e,s,h,a),m=e.memoizedState,p!==s||_!==m||_r.current||qn?(typeof v=="function"&&(Lu(e,r,v,s),m=e.memoizedState),(p=qn||Lf(e,r,p,s,_,m,g))?(E||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(e.flags|=4194308)):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=m),h.props=s,h.state=m,h.context=g,s=p):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{h=e.stateNode,mg(t,e),p=e.memoizedProps,g=e.type===e.elementType?p:rn(e.type,p),h.props=g,E=e.pendingProps,_=h.context,m=r.contextType,typeof m=="object"&&m!==null?m=$r(m):(m=Cr(r)?Fi:ar.current,m=Ps(e,m));var T=r.getDerivedStateFromProps;(v=typeof T=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(p!==E||_!==m)&&jf(e,h,s,m),qn=!1,_=e.memoizedState,h.state=_,xl(e,s,h,a);var O=e.memoizedState;p!==E||_!==O||_r.current||qn?(typeof T=="function"&&(Lu(e,r,T,s),O=e.memoizedState),(g=qn||Lf(e,r,g,s,_,O,m)||!1)?(v||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(s,O,m),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(s,O,m)),typeof h.componentDidUpdate=="function"&&(e.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof h.componentDidUpdate!="function"||p===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=O),h.props=s,h.state=O,h.context=m,s=g):(typeof h.componentDidUpdate!="function"||p===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),s=!1)}return Uu(t,e,r,s,l,a)}function Uu(t,e,r,s,a,l){zg(t,e);var h=(e.flags&128)!==0;if(!s&&!h)return a&&Nf(e,r,!1),Dn(t,e,l);s=e.stateNode,ww.current=e;var p=h&&typeof r.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&h?(e.child=Ms(e,t.child,null,l),e.child=Ms(e,null,p,l)):ur(t,e,p,l),e.memoizedState=s.state,a&&Nf(e,r,!0),e.child}function Vg(t){var e=t.stateNode;e.pendingContext?If(t,e.pendingContext,e.pendingContext!==e.context):e.context&&If(t,e.context,!1),Kd(t,e.containerInfo)}function Hf(t,e,r,s,a){return Ds(),Wd(a),e.flags|=256,ur(t,e,r,s),e.child}var zu={dehydrated:null,treeContext:null,retryLane:0};function Vu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wg(t,e,r){var s=e.pendingProps,a=vt.current,l=!1,h=(e.flags&128)!==0,p;if((p=h)||(p=t!==null&&t.memoizedState===null?!1:(a&2)!==0),p?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),ut(vt,a&1),t===null)return Du(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(h=s.children,t=s.fallback,l?(s=e.mode,l=e.child,h={mode:"hidden",children:h},!(s&1)&&l!==null?(l.childLanes=0,l.pendingProps=h):l=ql(h,s,0,null),t=Bi(t,s,r,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=Vu(r),e.memoizedState=zu,t):nh(e,h));if(a=t.memoizedState,a!==null&&(p=a.dehydrated,p!==null))return yw(t,e,h,s,p,a,r);if(l){l=s.fallback,h=e.mode,a=t.child,p=a.sibling;var m={mode:"hidden",children:s.children};return!(h&1)&&e.child!==a?(s=e.child,s.childLanes=0,s.pendingProps=m,e.deletions=null):(s=ci(a,m),s.subtreeFlags=a.subtreeFlags&14680064),p!==null?l=ci(p,l):(l=Bi(l,h,r,null),l.flags|=2),l.return=e,s.return=e,s.sibling=l,e.child=s,s=l,l=e.child,h=t.child.memoizedState,h=h===null?Vu(r):{baseLanes:h.baseLanes|r,cachePool:null,transitions:h.transitions},l.memoizedState=h,l.childLanes=t.childLanes&~r,e.memoizedState=zu,s}return l=t.child,t=l.sibling,s=ci(l,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=r),s.return=e,s.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=s,e.memoizedState=null,s}function nh(t,e){return e=ql({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Na(t,e,r,s){return s!==null&&Wd(s),Ms(e,t.child,null,r),t=nh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yw(t,e,r,s,a,l,h){if(r)return e.flags&256?(e.flags&=-257,s=Gc(Error(oe(422))),Na(t,e,h,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=s.fallback,a=e.mode,s=ql({mode:"visible",children:s.children},a,0,null),l=Bi(l,a,h,null),l.flags|=2,s.return=e,l.return=e,s.sibling=l,e.child=s,e.mode&1&&Ms(e,t.child,null,h),e.child.memoizedState=Vu(h),e.memoizedState=zu,l);if(!(e.mode&1))return Na(t,e,h,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var p=s.dgst;return s=p,l=Error(oe(419)),s=Gc(l,s,void 0),Na(t,e,h,s)}if(p=(h&t.childLanes)!==0,br||p){if(s=$t,s!==null){switch(h&-h){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|h)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Pn(t,a),ln(s,t,a,-1))}return ch(),s=Gc(Error(oe(421))),Na(t,e,h,s)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=kw.bind(null,t),a._reactRetry=e,null):(t=l.treeContext,Or=si(a.nextSibling),kr=e,xt=!0,on=null,t!==null&&(Vr[Wr++]=Nn,Vr[Wr++]=Tn,Vr[Wr++]=Ui,Nn=t.id,Tn=t.overflow,Ui=e),e=nh(e,s.children),e.flags|=4096,e)}function Gf(t,e,r){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Mu(t.return,e,r)}function $c(t,e,r,s,a){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=s,l.tail=r,l.tailMode=a)}function Hg(t,e,r){var s=e.pendingProps,a=s.revealOrder,l=s.tail;if(ur(t,e,s.children,r),s=vt.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gf(t,r,e);else if(t.tag===19)Gf(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(ut(vt,s),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&wl(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),$c(e,!1,a,r,l);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&wl(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}$c(e,!0,r,null,l);break;case"together":$c(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Za(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Vi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,r=ci(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ci(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function vw(t,e,r){switch(e.tag){case 3:Vg(e),Ds();break;case 5:pg(e);break;case 1:Cr(e.type)&&hl(e);break;case 4:Kd(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,a=e.memoizedProps.value;ut(ml,s._currentValue),s._currentValue=a;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(ut(vt,vt.current&1),e.flags|=128,null):r&e.child.childLanes?Wg(t,e,r):(ut(vt,vt.current&1),t=Dn(t,e,r),t!==null?t.sibling:null);ut(vt,vt.current&1);break;case 19:if(s=(r&e.childLanes)!==0,t.flags&128){if(s)return Hg(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ut(vt,vt.current),s)break;return null;case 22:case 23:return e.lanes=0,Ug(t,e,r)}return Dn(t,e,r)}var Gg,Wu,$g,Xg;Gg=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Wu=function(){};$g=function(t,e,r,s){var a=t.memoizedProps;if(a!==s){t=e.stateNode,Mi(bn.current);var l=null;switch(r){case"input":a=du(t,a),s=du(t,s),l=[];break;case"select":a=bt({},a,{value:void 0}),s=bt({},s,{value:void 0}),l=[];break;case"textarea":a=gu(t,a),s=gu(t,s),l=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=ul)}pu(r,s);var h;r=null;for(g in a)if(!s.hasOwnProperty(g)&&a.hasOwnProperty(g)&&a[g]!=null)if(g==="style"){var p=a[g];for(h in p)p.hasOwnProperty(h)&&(r||(r={}),r[h]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Oo.hasOwnProperty(g)?l||(l=[]):(l=l||[]).push(g,null));for(g in s){var m=s[g];if(p=a!=null?a[g]:void 0,s.hasOwnProperty(g)&&m!==p&&(m!=null||p!=null))if(g==="style")if(p){for(h in p)!p.hasOwnProperty(h)||m&&m.hasOwnProperty(h)||(r||(r={}),r[h]="");for(h in m)m.hasOwnProperty(h)&&p[h]!==m[h]&&(r||(r={}),r[h]=m[h])}else r||(l||(l=[]),l.push(g,r)),r=m;else g==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,p=p?p.__html:void 0,m!=null&&p!==m&&(l=l||[]).push(g,m)):g==="children"?typeof m!="string"&&typeof m!="number"||(l=l||[]).push(g,""+m):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Oo.hasOwnProperty(g)?(m!=null&&g==="onScroll"&&ht("scroll",t),l||p===m||(l=[])):(l=l||[]).push(g,m))}r&&(l=l||[]).push("style",r);var g=l;(e.updateQueue=g)&&(e.flags|=4)}};Xg=function(t,e,r,s){r!==s&&(e.flags|=4)};function ho(t,e){if(!xt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function sr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,s=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=s,t.childLanes=r,e}function Ew(t,e,r){var s=e.pendingProps;switch(Vd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sr(e),null;case 1:return Cr(e.type)&&dl(),sr(e),null;case 3:return s=e.stateNode,Ls(),gt(_r),gt(ar),Zd(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Sa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,on!==null&&(Zu(on),on=null))),Wu(t,e),sr(e),null;case 5:Yd(e);var a=Mi(Wo.current);if(r=e.type,t!==null&&e.stateNode!=null)$g(t,e,r,s,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(oe(166));return sr(e),null}if(t=Mi(bn.current),Sa(e)){s=e.stateNode,r=e.type;var l=e.memoizedProps;switch(s[yn]=e,s[zo]=l,t=(e.mode&1)!==0,r){case"dialog":ht("cancel",s),ht("close",s);break;case"iframe":case"object":case"embed":ht("load",s);break;case"video":case"audio":for(a=0;a<xo.length;a++)ht(xo[a],s);break;case"source":ht("error",s);break;case"img":case"image":case"link":ht("error",s),ht("load",s);break;case"details":ht("toggle",s);break;case"input":Jh(s,l),ht("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!l.multiple},ht("invalid",s);break;case"textarea":tf(s,l),ht("invalid",s)}pu(r,l),a=null;for(var h in l)if(l.hasOwnProperty(h)){var p=l[h];h==="children"?typeof p=="string"?s.textContent!==p&&(l.suppressHydrationWarning!==!0&&Aa(s.textContent,p,t),a=["children",p]):typeof p=="number"&&s.textContent!==""+p&&(l.suppressHydrationWarning!==!0&&Aa(s.textContent,p,t),a=["children",""+p]):Oo.hasOwnProperty(h)&&p!=null&&h==="onScroll"&&ht("scroll",s)}switch(r){case"input":xa(s),ef(s,l,!0);break;case"textarea":xa(s),rf(s);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(s.onclick=ul)}s=a,e.updateQueue=s,s!==null&&(e.flags|=4)}else{h=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=E1(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=h.createElement(r,{is:s.is}):(t=h.createElement(r),r==="select"&&(h=t,s.multiple?h.multiple=!0:s.size&&(h.size=s.size))):t=h.createElementNS(t,r),t[yn]=e,t[zo]=s,Gg(t,e,!1,!1),e.stateNode=t;e:{switch(h=xu(r,s),r){case"dialog":ht("cancel",t),ht("close",t),a=s;break;case"iframe":case"object":case"embed":ht("load",t),a=s;break;case"video":case"audio":for(a=0;a<xo.length;a++)ht(xo[a],t);a=s;break;case"source":ht("error",t),a=s;break;case"img":case"image":case"link":ht("error",t),ht("load",t),a=s;break;case"details":ht("toggle",t),a=s;break;case"input":Jh(t,s),a=du(t,s),ht("invalid",t);break;case"option":a=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},a=bt({},s,{value:void 0}),ht("invalid",t);break;case"textarea":tf(t,s),a=gu(t,s),ht("invalid",t);break;default:a=s}pu(r,a),p=a;for(l in p)if(p.hasOwnProperty(l)){var m=p[l];l==="style"?C1(t,m):l==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&b1(t,m)):l==="children"?typeof m=="string"?(r!=="textarea"||m!=="")&&ko(t,m):typeof m=="number"&&ko(t,""+m):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Oo.hasOwnProperty(l)?m!=null&&l==="onScroll"&&ht("scroll",t):m!=null&&Id(t,l,m,h))}switch(r){case"input":xa(t),ef(t,s,!1);break;case"textarea":xa(t),rf(t);break;case"option":s.value!=null&&t.setAttribute("value",""+di(s.value));break;case"select":t.multiple=!!s.multiple,l=s.value,l!=null?As(t,!!s.multiple,l,!1):s.defaultValue!=null&&As(t,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=ul)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return sr(e),null;case 6:if(t&&e.stateNode!=null)Xg(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(oe(166));if(r=Mi(Wo.current),Mi(bn.current),Sa(e)){if(s=e.stateNode,r=e.memoizedProps,s[yn]=e,(l=s.nodeValue!==r)&&(t=kr,t!==null))switch(t.tag){case 3:Aa(s.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Aa(s.nodeValue,r,(t.mode&1)!==0)}l&&(e.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[yn]=e,e.stateNode=s}return sr(e),null;case 13:if(gt(vt),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xt&&Or!==null&&e.mode&1&&!(e.flags&128))dg(),Ds(),e.flags|=98560,l=!1;else if(l=Sa(e),s!==null&&s.dehydrated!==null){if(t===null){if(!l)throw Error(oe(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(oe(317));l[yn]=e}else Ds(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;sr(e),l=!1}else on!==null&&(Zu(on),on=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||vt.current&1?zt===0&&(zt=3):ch())),e.updateQueue!==null&&(e.flags|=4),sr(e),null);case 4:return Ls(),Wu(t,e),t===null&&Fo(e.stateNode.containerInfo),sr(e),null;case 10:return $d(e.type._context),sr(e),null;case 17:return Cr(e.type)&&dl(),sr(e),null;case 19:if(gt(vt),l=e.memoizedState,l===null)return sr(e),null;if(s=(e.flags&128)!==0,h=l.rendering,h===null)if(s)ho(l,!1);else{if(zt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(h=wl(t),h!==null){for(e.flags|=128,ho(l,!1),s=h.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=r,r=e.child;r!==null;)l=r,t=s,l.flags&=14680066,h=l.alternate,h===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,t=h.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ut(vt,vt.current&1|2),e.child}t=t.sibling}l.tail!==null&&Rt()>Bs&&(e.flags|=128,s=!0,ho(l,!1),e.lanes=4194304)}else{if(!s)if(t=wl(h),t!==null){if(e.flags|=128,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ho(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!xt)return sr(e),null}else 2*Rt()-l.renderingStartTime>Bs&&r!==1073741824&&(e.flags|=128,s=!0,ho(l,!1),e.lanes=4194304);l.isBackwards?(h.sibling=e.child,e.child=h):(r=l.last,r!==null?r.sibling=h:e.child=h,l.last=h)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Rt(),e.sibling=null,r=vt.current,ut(vt,s?r&1|2:r&1),e):(sr(e),null);case 22:case 23:return lh(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Nr&1073741824&&(sr(e),e.subtreeFlags&6&&(e.flags|=8192)):sr(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function bw(t,e){switch(Vd(e),e.tag){case 1:return Cr(e.type)&&dl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ls(),gt(_r),gt(ar),Zd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yd(e),null;case 13:if(gt(vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));Ds()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gt(vt),null;case 4:return Ls(),null;case 10:return $d(e.type._context),null;case 22:case 23:return lh(),null;case 24:return null;default:return null}}var Ta=!1,or=!1,_w=typeof WeakSet=="function"?WeakSet:Set,ve=null;function bs(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){It(t,e,s)}else r.current=null}function Hu(t,e,r){try{r()}catch(s){It(t,e,s)}}var $f=!1;function Cw(t,e){if(Iu=al,t=Q1(),Ud(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var h=0,p=-1,m=-1,g=0,v=0,E=t,_=null;t:for(;;){for(var T;E!==r||a!==0&&E.nodeType!==3||(p=h+a),E!==l||s!==0&&E.nodeType!==3||(m=h+s),E.nodeType===3&&(h+=E.nodeValue.length),(T=E.firstChild)!==null;)_=E,E=T;for(;;){if(E===t)break t;if(_===r&&++g===a&&(p=h),_===l&&++v===s&&(m=h),(T=E.nextSibling)!==null)break;E=_,_=E.parentNode}E=T}r=p===-1||m===-1?null:{start:p,end:m}}else r=null}r=r||{start:0,end:0}}else r=null;for(Nu={focusedElem:t,selectionRange:r},al=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){e=ve;try{var O=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var j=O.memoizedProps,B=O.memoizedState,P=e.stateNode,N=P.getSnapshotBeforeUpdate(e.elementType===e.type?j:rn(e.type,j),B);P.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(L){It(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}return O=$f,$f=!1,O}function So(t,e,r){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&t)===t){var l=a.destroy;a.destroy=void 0,l!==void 0&&Hu(e,r,l)}a=a.next}while(a!==s)}}function $l(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var s=r.create;r.destroy=s()}r=r.next}while(r!==e)}}function Gu(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function qg(t){var e=t.alternate;e!==null&&(t.alternate=null,qg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yn],delete e[zo],delete e[Ou],delete e[ow],delete e[aw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Kg(t){return t.tag===5||t.tag===3||t.tag===4}function Xf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Kg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $u(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ul));else if(s!==4&&(t=t.child,t!==null))for($u(t,e,r),t=t.sibling;t!==null;)$u(t,e,r),t=t.sibling}function Xu(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Xu(t,e,r),t=t.sibling;t!==null;)Xu(t,e,r),t=t.sibling}var Jt=null,sn=!1;function Gn(t,e,r){for(r=r.child;r!==null;)Yg(t,e,r),r=r.sibling}function Yg(t,e,r){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(Bl,r)}catch{}switch(r.tag){case 5:or||bs(r,e);case 6:var s=Jt,a=sn;Jt=null,Gn(t,e,r),Jt=s,sn=a,Jt!==null&&(sn?(t=Jt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Jt.removeChild(r.stateNode));break;case 18:Jt!==null&&(sn?(t=Jt,r=r.stateNode,t.nodeType===8?Fc(t.parentNode,r):t.nodeType===1&&Fc(t,r),Lo(t)):Fc(Jt,r.stateNode));break;case 4:s=Jt,a=sn,Jt=r.stateNode.containerInfo,sn=!0,Gn(t,e,r),Jt=s,sn=a;break;case 0:case 11:case 14:case 15:if(!or&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var l=a,h=l.destroy;l=l.tag,h!==void 0&&(l&2||l&4)&&Hu(r,e,h),a=a.next}while(a!==s)}Gn(t,e,r);break;case 1:if(!or&&(bs(r,e),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(p){It(r,e,p)}Gn(t,e,r);break;case 21:Gn(t,e,r);break;case 22:r.mode&1?(or=(s=or)||r.memoizedState!==null,Gn(t,e,r),or=s):Gn(t,e,r);break;default:Gn(t,e,r)}}function qf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new _w),e.forEach(function(s){var a=Pw.bind(null,t,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Zr(t,e){var r=e.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var l=t,h=e,p=h;e:for(;p!==null;){switch(p.tag){case 5:Jt=p.stateNode,sn=!1;break e;case 3:Jt=p.stateNode.containerInfo,sn=!0;break e;case 4:Jt=p.stateNode.containerInfo,sn=!0;break e}p=p.return}if(Jt===null)throw Error(oe(160));Yg(l,h,a),Jt=null,sn=!1;var m=a.alternate;m!==null&&(m.return=null),a.return=null}catch(g){It(a,e,g)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Zg(e,t),e=e.sibling}function Zg(t,e){var r=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zr(e,t),pn(t),s&4){try{So(3,t,t.return),$l(3,t)}catch(j){It(t,t.return,j)}try{So(5,t,t.return)}catch(j){It(t,t.return,j)}}break;case 1:Zr(e,t),pn(t),s&512&&r!==null&&bs(r,r.return);break;case 5:if(Zr(e,t),pn(t),s&512&&r!==null&&bs(r,r.return),t.flags&32){var a=t.stateNode;try{ko(a,"")}catch(j){It(t,t.return,j)}}if(s&4&&(a=t.stateNode,a!=null)){var l=t.memoizedProps,h=r!==null?r.memoizedProps:l,p=t.type,m=t.updateQueue;if(t.updateQueue=null,m!==null)try{p==="input"&&l.type==="radio"&&l.name!=null&&y1(a,l),xu(p,h);var g=xu(p,l);for(h=0;h<m.length;h+=2){var v=m[h],E=m[h+1];v==="style"?C1(a,E):v==="dangerouslySetInnerHTML"?b1(a,E):v==="children"?ko(a,E):Id(a,v,E,g)}switch(p){case"input":hu(a,l);break;case"textarea":v1(a,l);break;case"select":var _=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var T=l.value;T!=null?As(a,!!l.multiple,T,!1):_!==!!l.multiple&&(l.defaultValue!=null?As(a,!!l.multiple,l.defaultValue,!0):As(a,!!l.multiple,l.multiple?[]:"",!1))}a[zo]=l}catch(j){It(t,t.return,j)}}break;case 6:if(Zr(e,t),pn(t),s&4){if(t.stateNode===null)throw Error(oe(162));a=t.stateNode,l=t.memoizedProps;try{a.nodeValue=l}catch(j){It(t,t.return,j)}}break;case 3:if(Zr(e,t),pn(t),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Lo(e.containerInfo)}catch(j){It(t,t.return,j)}break;case 4:Zr(e,t),pn(t);break;case 13:Zr(e,t),pn(t),a=t.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(oh=Rt())),s&4&&qf(t);break;case 22:if(v=r!==null&&r.memoizedState!==null,t.mode&1?(or=(g=or)||v,Zr(e,t),or=g):Zr(e,t),pn(t),s&8192){if(g=t.memoizedState!==null,(t.stateNode.isHidden=g)&&!v&&t.mode&1)for(ve=t,v=t.child;v!==null;){for(E=ve=v;ve!==null;){switch(_=ve,T=_.child,_.tag){case 0:case 11:case 14:case 15:So(4,_,_.return);break;case 1:bs(_,_.return);var O=_.stateNode;if(typeof O.componentWillUnmount=="function"){s=_,r=_.return;try{e=s,O.props=e.memoizedProps,O.state=e.memoizedState,O.componentWillUnmount()}catch(j){It(s,r,j)}}break;case 5:bs(_,_.return);break;case 22:if(_.memoizedState!==null){Yf(E);continue}}T!==null?(T.return=_,ve=T):Yf(E)}v=v.sibling}e:for(v=null,E=t;;){if(E.tag===5){if(v===null){v=E;try{a=E.stateNode,g?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(p=E.stateNode,m=E.memoizedProps.style,h=m!=null&&m.hasOwnProperty("display")?m.display:null,p.style.display=_1("display",h))}catch(j){It(t,t.return,j)}}}else if(E.tag===6){if(v===null)try{E.stateNode.nodeValue=g?"":E.memoizedProps}catch(j){It(t,t.return,j)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===t)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===t)break e;for(;E.sibling===null;){if(E.return===null||E.return===t)break e;v===E&&(v=null),E=E.return}v===E&&(v=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:Zr(e,t),pn(t),s&4&&qf(t);break;case 21:break;default:Zr(e,t),pn(t)}}function pn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Kg(r)){var s=r;break e}r=r.return}throw Error(oe(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(ko(a,""),s.flags&=-33);var l=Xf(t);Xu(t,l,a);break;case 3:case 4:var h=s.stateNode.containerInfo,p=Xf(t);$u(t,p,h);break;default:throw Error(oe(161))}}catch(m){It(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Aw(t,e,r){ve=t,Qg(t)}function Qg(t,e,r){for(var s=(t.mode&1)!==0;ve!==null;){var a=ve,l=a.child;if(a.tag===22&&s){var h=a.memoizedState!==null||Ta;if(!h){var p=a.alternate,m=p!==null&&p.memoizedState!==null||or;p=Ta;var g=or;if(Ta=h,(or=m)&&!g)for(ve=a;ve!==null;)h=ve,m=h.child,h.tag===22&&h.memoizedState!==null?Zf(a):m!==null?(m.return=h,ve=m):Zf(a);for(;l!==null;)ve=l,Qg(l),l=l.sibling;ve=a,Ta=p,or=g}Kf(t)}else a.subtreeFlags&8772&&l!==null?(l.return=a,ve=l):Kf(t)}}function Kf(t){for(;ve!==null;){var e=ve;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:or||$l(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!or)if(r===null)s.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:rn(e.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&Pf(e,l,s);break;case 3:var h=e.updateQueue;if(h!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Pf(e,h,r)}break;case 5:var p=e.stateNode;if(r===null&&e.flags&4){r=p;var m=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&r.focus();break;case"img":m.src&&(r.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var g=e.alternate;if(g!==null){var v=g.memoizedState;if(v!==null){var E=v.dehydrated;E!==null&&Lo(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}or||e.flags&512&&Gu(e)}catch(_){It(e,e.return,_)}}if(e===t){ve=null;break}if(r=e.sibling,r!==null){r.return=e.return,ve=r;break}ve=e.return}}function Yf(t){for(;ve!==null;){var e=ve;if(e===t){ve=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ve=r;break}ve=e.return}}function Zf(t){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{$l(4,e)}catch(m){It(e,r,m)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var a=e.return;try{s.componentDidMount()}catch(m){It(e,a,m)}}var l=e.return;try{Gu(e)}catch(m){It(e,l,m)}break;case 5:var h=e.return;try{Gu(e)}catch(m){It(e,h,m)}}}catch(m){It(e,e.return,m)}if(e===t){ve=null;break}var p=e.sibling;if(p!==null){p.return=e.return,ve=p;break}ve=e.return}}var Sw=Math.ceil,El=Ln.ReactCurrentDispatcher,ih=Ln.ReactCurrentOwner,Gr=Ln.ReactCurrentBatchConfig,$e=0,$t=null,Pt=null,er=0,Nr=0,_s=gi(0),zt=0,Xo=null,Vi=0,Xl=0,sh=0,Io=null,Er=null,oh=0,Bs=1/0,An=null,bl=!1,qu=null,ai=null,Ra=!1,ei=null,_l=0,No=0,Ku=null,Qa=-1,Ja=0;function hr(){return $e&6?Rt():Qa!==-1?Qa:Qa=Rt()}function li(t){return t.mode&1?$e&2&&er!==0?er&-er:cw.transition!==null?(Ja===0&&(Ja=L1()),Ja):(t=Je,t!==0||(t=window.event,t=t===void 0?16:W1(t.type)),t):1}function ln(t,e,r,s){if(50<No)throw No=0,Ku=null,Error(oe(185));ea(t,r,s),(!($e&2)||t!==$t)&&(t===$t&&(!($e&2)&&(Xl|=r),zt===4&&Yn(t,er)),Ar(t,s),r===1&&$e===0&&!(e.mode&1)&&(Bs=Rt()+500,Wl&&mi()))}function Ar(t,e){var r=t.callbackNode;c2(t,e);var s=ol(t,t===$t?er:0);if(s===0)r!==null&&of(r),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(r!=null&&of(r),e===1)t.tag===0?lw(Qf.bind(null,t)):lg(Qf.bind(null,t)),iw(function(){!($e&6)&&mi()}),r=null;else{switch(j1(s)){case 1:r=kd;break;case 4:r=D1;break;case 16:r=sl;break;case 536870912:r=M1;break;default:r=sl}r=om(r,Jg.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Jg(t,e){if(Qa=-1,Ja=0,$e&6)throw Error(oe(327));var r=t.callbackNode;if(Rs()&&t.callbackNode!==r)return null;var s=ol(t,t===$t?er:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Cl(t,s);else{e=s;var a=$e;$e|=2;var l=tm();($t!==t||er!==e)&&(An=null,Bs=Rt()+500,ji(t,e));do try{Tw();break}catch(p){em(t,p)}while(!0);Gd(),El.current=l,$e=a,Pt!==null?e=0:($t=null,er=0,e=zt)}if(e!==0){if(e===2&&(a=bu(t),a!==0&&(s=a,e=Yu(t,a))),e===1)throw r=Xo,ji(t,0),Yn(t,s),Ar(t,Rt()),r;if(e===6)Yn(t,s);else{if(a=t.current.alternate,!(s&30)&&!Iw(a)&&(e=Cl(t,s),e===2&&(l=bu(t),l!==0&&(s=l,e=Yu(t,l))),e===1))throw r=Xo,ji(t,0),Yn(t,s),Ar(t,Rt()),r;switch(t.finishedWork=a,t.finishedLanes=s,e){case 0:case 1:throw Error(oe(345));case 2:Ni(t,Er,An);break;case 3:if(Yn(t,s),(s&130023424)===s&&(e=oh+500-Rt(),10<e)){if(ol(t,0)!==0)break;if(a=t.suspendedLanes,(a&s)!==s){hr(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Ru(Ni.bind(null,t,Er,An),e);break}Ni(t,Er,An);break;case 4:if(Yn(t,s),(s&4194240)===s)break;for(e=t.eventTimes,a=-1;0<s;){var h=31-an(s);l=1<<h,h=e[h],h>a&&(a=h),s&=~l}if(s=a,s=Rt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Sw(s/1960))-s,10<s){t.timeoutHandle=Ru(Ni.bind(null,t,Er,An),s);break}Ni(t,Er,An);break;case 5:Ni(t,Er,An);break;default:throw Error(oe(329))}}}return Ar(t,Rt()),t.callbackNode===r?Jg.bind(null,t):null}function Yu(t,e){var r=Io;return t.current.memoizedState.isDehydrated&&(ji(t,e).flags|=256),t=Cl(t,e),t!==2&&(e=Er,Er=r,e!==null&&Zu(e)),t}function Zu(t){Er===null?Er=t:Er.push.apply(Er,t)}function Iw(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],l=a.getSnapshot;a=a.value;try{if(!cn(l(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yn(t,e){for(e&=~sh,e&=~Xl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-an(e),s=1<<r;t[r]=-1,e&=~s}}function Qf(t){if($e&6)throw Error(oe(327));Rs();var e=ol(t,0);if(!(e&1))return Ar(t,Rt()),null;var r=Cl(t,e);if(t.tag!==0&&r===2){var s=bu(t);s!==0&&(e=s,r=Yu(t,s))}if(r===1)throw r=Xo,ji(t,0),Yn(t,e),Ar(t,Rt()),r;if(r===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ni(t,Er,An),Ar(t,Rt()),null}function ah(t,e){var r=$e;$e|=1;try{return t(e)}finally{$e=r,$e===0&&(Bs=Rt()+500,Wl&&mi())}}function Wi(t){ei!==null&&ei.tag===0&&!($e&6)&&Rs();var e=$e;$e|=1;var r=Gr.transition,s=Je;try{if(Gr.transition=null,Je=1,t)return t()}finally{Je=s,Gr.transition=r,$e=e,!($e&6)&&mi()}}function lh(){Nr=_s.current,gt(_s)}function ji(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,nw(r)),Pt!==null)for(r=Pt.return;r!==null;){var s=r;switch(Vd(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&dl();break;case 3:Ls(),gt(_r),gt(ar),Zd();break;case 5:Yd(s);break;case 4:Ls();break;case 13:gt(vt);break;case 19:gt(vt);break;case 10:$d(s.type._context);break;case 22:case 23:lh()}r=r.return}if($t=t,Pt=t=ci(t.current,null),er=Nr=e,zt=0,Xo=null,sh=Xl=Vi=0,Er=Io=null,Di!==null){for(e=0;e<Di.length;e++)if(r=Di[e],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,l=r.pending;if(l!==null){var h=l.next;l.next=a,s.next=h}r.pending=s}Di=null}return t}function em(t,e){do{var r=Pt;try{if(Gd(),Ka.current=vl,yl){for(var s=Et.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}yl=!1}if(zi=0,Gt=Ft=Et=null,Ao=!1,Ho=0,ih.current=null,r===null||r.return===null){zt=1,Xo=e,Pt=null;break}e:{var l=t,h=r.return,p=r,m=e;if(e=er,p.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var g=m,v=p,E=v.tag;if(!(v.mode&1)&&(E===0||E===11||E===15)){var _=v.alternate;_?(v.updateQueue=_.updateQueue,v.memoizedState=_.memoizedState,v.lanes=_.lanes):(v.updateQueue=null,v.memoizedState=null)}var T=Ff(h);if(T!==null){T.flags&=-257,Uf(T,h,p,l,e),T.mode&1&&Bf(l,g,e),e=T,m=g;var O=e.updateQueue;if(O===null){var j=new Set;j.add(m),e.updateQueue=j}else O.add(m);break e}else{if(!(e&1)){Bf(l,g,e),ch();break e}m=Error(oe(426))}}else if(xt&&p.mode&1){var B=Ff(h);if(B!==null){!(B.flags&65536)&&(B.flags|=256),Uf(B,h,p,l,e),Wd(js(m,p));break e}}l=m=js(m,p),zt!==4&&(zt=2),Io===null?Io=[l]:Io.push(l),l=h;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var P=jg(l,m,e);kf(l,P);break e;case 1:p=m;var N=l.type,I=l.stateNode;if(!(l.flags&128)&&(typeof N.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(ai===null||!ai.has(I)))){l.flags|=65536,e&=-e,l.lanes|=e;var L=Bg(l,p,e);kf(l,L);break e}}l=l.return}while(l!==null)}nm(r)}catch(W){e=W,Pt===r&&r!==null&&(Pt=r=r.return);continue}break}while(!0)}function tm(){var t=El.current;return El.current=vl,t===null?vl:t}function ch(){(zt===0||zt===3||zt===2)&&(zt=4),$t===null||!(Vi&268435455)&&!(Xl&268435455)||Yn($t,er)}function Cl(t,e){var r=$e;$e|=2;var s=tm();($t!==t||er!==e)&&(An=null,ji(t,e));do try{Nw();break}catch(a){em(t,a)}while(!0);if(Gd(),$e=r,El.current=s,Pt!==null)throw Error(oe(261));return $t=null,er=0,zt}function Nw(){for(;Pt!==null;)rm(Pt)}function Tw(){for(;Pt!==null&&!e2();)rm(Pt)}function rm(t){var e=sm(t.alternate,t,Nr);t.memoizedProps=t.pendingProps,e===null?nm(t):Pt=e,ih.current=null}function nm(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=bw(r,e),r!==null){r.flags&=32767,Pt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{zt=6,Pt=null;return}}else if(r=Ew(r,e,Nr),r!==null){Pt=r;return}if(e=e.sibling,e!==null){Pt=e;return}Pt=e=t}while(e!==null);zt===0&&(zt=5)}function Ni(t,e,r){var s=Je,a=Gr.transition;try{Gr.transition=null,Je=1,Rw(t,e,r,s)}finally{Gr.transition=a,Je=s}return null}function Rw(t,e,r,s){do Rs();while(ei!==null);if($e&6)throw Error(oe(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var l=r.lanes|r.childLanes;if(u2(t,l),t===$t&&(Pt=$t=null,er=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ra||(Ra=!0,om(sl,function(){return Rs(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=Gr.transition,Gr.transition=null;var h=Je;Je=1;var p=$e;$e|=4,ih.current=null,Cw(t,r),Zg(r,t),Y2(Nu),al=!!Iu,Nu=Iu=null,t.current=r,Aw(r),t2(),$e=p,Je=h,Gr.transition=l}else t.current=r;if(Ra&&(Ra=!1,ei=t,_l=a),l=t.pendingLanes,l===0&&(ai=null),i2(r.stateNode),Ar(t,Rt()),e!==null)for(s=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(bl)throw bl=!1,t=qu,qu=null,t;return _l&1&&t.tag!==0&&Rs(),l=t.pendingLanes,l&1?t===Ku?No++:(No=0,Ku=t):No=0,mi(),null}function Rs(){if(ei!==null){var t=j1(_l),e=Gr.transition,r=Je;try{if(Gr.transition=null,Je=16>t?16:t,ei===null)var s=!1;else{if(t=ei,ei=null,_l=0,$e&6)throw Error(oe(331));var a=$e;for($e|=4,ve=t.current;ve!==null;){var l=ve,h=l.child;if(ve.flags&16){var p=l.deletions;if(p!==null){for(var m=0;m<p.length;m++){var g=p[m];for(ve=g;ve!==null;){var v=ve;switch(v.tag){case 0:case 11:case 15:So(8,v,l)}var E=v.child;if(E!==null)E.return=v,ve=E;else for(;ve!==null;){v=ve;var _=v.sibling,T=v.return;if(qg(v),v===g){ve=null;break}if(_!==null){_.return=T,ve=_;break}ve=T}}}var O=l.alternate;if(O!==null){var j=O.child;if(j!==null){O.child=null;do{var B=j.sibling;j.sibling=null,j=B}while(j!==null)}}ve=l}}if(l.subtreeFlags&2064&&h!==null)h.return=l,ve=h;else e:for(;ve!==null;){if(l=ve,l.flags&2048)switch(l.tag){case 0:case 11:case 15:So(9,l,l.return)}var P=l.sibling;if(P!==null){P.return=l.return,ve=P;break e}ve=l.return}}var N=t.current;for(ve=N;ve!==null;){h=ve;var I=h.child;if(h.subtreeFlags&2064&&I!==null)I.return=h,ve=I;else e:for(h=N;ve!==null;){if(p=ve,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:$l(9,p)}}catch(W){It(p,p.return,W)}if(p===h){ve=null;break e}var L=p.sibling;if(L!==null){L.return=p.return,ve=L;break e}ve=p.return}}if($e=a,mi(),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(Bl,t)}catch{}s=!0}return s}finally{Je=r,Gr.transition=e}}return!1}function Jf(t,e,r){e=js(r,e),e=jg(t,e,1),t=oi(t,e,1),e=hr(),t!==null&&(ea(t,1,e),Ar(t,e))}function It(t,e,r){if(t.tag===3)Jf(t,t,r);else for(;e!==null;){if(e.tag===3){Jf(e,t,r);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ai===null||!ai.has(s))){t=js(r,t),t=Bg(e,t,1),e=oi(e,t,1),t=hr(),e!==null&&(ea(e,1,t),Ar(e,t));break}}e=e.return}}function Ow(t,e,r){var s=t.pingCache;s!==null&&s.delete(e),e=hr(),t.pingedLanes|=t.suspendedLanes&r,$t===t&&(er&r)===r&&(zt===4||zt===3&&(er&130023424)===er&&500>Rt()-oh?ji(t,0):sh|=r),Ar(t,e)}function im(t,e){e===0&&(t.mode&1?(e=va,va<<=1,!(va&130023424)&&(va=4194304)):e=1);var r=hr();t=Pn(t,e),t!==null&&(ea(t,e,r),Ar(t,r))}function kw(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),im(t,r)}function Pw(t,e){var r=0;switch(t.tag){case 13:var s=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(oe(314))}s!==null&&s.delete(e),im(t,r)}var sm;sm=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||_r.current)br=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return br=!1,vw(t,e,r);br=!!(t.flags&131072)}else br=!1,xt&&e.flags&1048576&&cg(e,gl,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Za(t,e),t=e.pendingProps;var a=Ps(e,ar.current);Ts(e,r),a=Jd(null,e,s,t,a,r);var l=eh();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Cr(s)?(l=!0,hl(e)):l=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,qd(e),a.updater=Gl,e.stateNode=a,a._reactInternals=e,ju(e,s,t,r),e=Uu(null,e,s,!0,l,r)):(e.tag=0,xt&&l&&zd(e),ur(null,e,a,r),e=e.child),e;case 16:s=e.elementType;e:{switch(Za(t,e),t=e.pendingProps,a=s._init,s=a(s._payload),e.type=s,a=e.tag=Mw(s),t=rn(s,t),a){case 0:e=Fu(null,e,s,t,r);break e;case 1:e=Wf(null,e,s,t,r);break e;case 11:e=zf(null,e,s,t,r);break e;case 14:e=Vf(null,e,s,rn(s.type,t),r);break e}throw Error(oe(306,s,""))}return e;case 0:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:rn(s,a),Fu(t,e,s,a,r);case 1:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:rn(s,a),Wf(t,e,s,a,r);case 3:e:{if(Vg(e),t===null)throw Error(oe(387));s=e.pendingProps,l=e.memoizedState,a=l.element,mg(t,e),xl(e,s,null,r);var h=e.memoizedState;if(s=h.element,l.isDehydrated)if(l={element:s,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){a=js(Error(oe(423)),e),e=Hf(t,e,s,r,a);break e}else if(s!==a){a=js(Error(oe(424)),e),e=Hf(t,e,s,r,a);break e}else for(Or=si(e.stateNode.containerInfo.firstChild),kr=e,xt=!0,on=null,r=fg(e,null,s,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ds(),s===a){e=Dn(t,e,r);break e}ur(t,e,s,r)}e=e.child}return e;case 5:return pg(e),t===null&&Du(e),s=e.type,a=e.pendingProps,l=t!==null?t.memoizedProps:null,h=a.children,Tu(s,a)?h=null:l!==null&&Tu(s,l)&&(e.flags|=32),zg(t,e),ur(t,e,h,r),e.child;case 6:return t===null&&Du(e),null;case 13:return Wg(t,e,r);case 4:return Kd(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ms(e,null,s,r):ur(t,e,s,r),e.child;case 11:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:rn(s,a),zf(t,e,s,a,r);case 7:return ur(t,e,e.pendingProps,r),e.child;case 8:return ur(t,e,e.pendingProps.children,r),e.child;case 12:return ur(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(s=e.type._context,a=e.pendingProps,l=e.memoizedProps,h=a.value,ut(ml,s._currentValue),s._currentValue=h,l!==null)if(cn(l.value,h)){if(l.children===a.children&&!_r.current){e=Dn(t,e,r);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var p=l.dependencies;if(p!==null){h=l.child;for(var m=p.firstContext;m!==null;){if(m.context===s){if(l.tag===1){m=Rn(-1,r&-r),m.tag=2;var g=l.updateQueue;if(g!==null){g=g.shared;var v=g.pending;v===null?m.next=m:(m.next=v.next,v.next=m),g.pending=m}}l.lanes|=r,m=l.alternate,m!==null&&(m.lanes|=r),Mu(l.return,r,e),p.lanes|=r;break}m=m.next}}else if(l.tag===10)h=l.type===e.type?null:l.child;else if(l.tag===18){if(h=l.return,h===null)throw Error(oe(341));h.lanes|=r,p=h.alternate,p!==null&&(p.lanes|=r),Mu(h,r,e),h=l.sibling}else h=l.child;if(h!==null)h.return=l;else for(h=l;h!==null;){if(h===e){h=null;break}if(l=h.sibling,l!==null){l.return=h.return,h=l;break}h=h.return}l=h}ur(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,s=e.pendingProps.children,Ts(e,r),a=$r(a),s=s(a),e.flags|=1,ur(t,e,s,r),e.child;case 14:return s=e.type,a=rn(s,e.pendingProps),a=rn(s.type,a),Vf(t,e,s,a,r);case 15:return Fg(t,e,e.type,e.pendingProps,r);case 17:return s=e.type,a=e.pendingProps,a=e.elementType===s?a:rn(s,a),Za(t,e),e.tag=1,Cr(s)?(t=!0,hl(e)):t=!1,Ts(e,r),Lg(e,s,a),ju(e,s,a,r),Uu(null,e,s,!0,t,r);case 19:return Hg(t,e,r);case 22:return Ug(t,e,r)}throw Error(oe(156,e.tag))};function om(t,e){return P1(t,e)}function Dw(t,e,r,s){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(t,e,r,s){return new Dw(t,e,r,s)}function uh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mw(t){if(typeof t=="function")return uh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Td)return 11;if(t===Rd)return 14}return 2}function ci(t,e){var r=t.alternate;return r===null?(r=Hr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function el(t,e,r,s,a,l){var h=2;if(s=t,typeof t=="function")uh(t)&&(h=1);else if(typeof t=="string")h=5;else e:switch(t){case fs:return Bi(r.children,a,l,e);case Nd:h=8,a|=8;break;case au:return t=Hr(12,r,e,a|2),t.elementType=au,t.lanes=l,t;case lu:return t=Hr(13,r,e,a),t.elementType=lu,t.lanes=l,t;case cu:return t=Hr(19,r,e,a),t.elementType=cu,t.lanes=l,t;case p1:return ql(r,a,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case g1:h=10;break e;case m1:h=9;break e;case Td:h=11;break e;case Rd:h=14;break e;case Xn:h=16,s=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=Hr(h,r,e,a),e.elementType=t,e.type=s,e.lanes=l,e}function Bi(t,e,r,s){return t=Hr(7,t,s,e),t.lanes=r,t}function ql(t,e,r,s){return t=Hr(22,t,s,e),t.elementType=p1,t.lanes=r,t.stateNode={isHidden:!1},t}function Xc(t,e,r){return t=Hr(6,t,null,e),t.lanes=r,t}function qc(t,e,r){return e=Hr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Lw(t,e,r,s,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nc(0),this.expirationTimes=Nc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nc(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function dh(t,e,r,s,a,l,h,p,m){return t=new Lw(t,e,r,p,m),e===1?(e=1,l===!0&&(e|=8)):e=0,l=Hr(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},qd(l),t}function jw(t,e,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hs,key:s==null?null:""+s,children:t,containerInfo:e,implementation:r}}function am(t){if(!t)return hi;t=t._reactInternals;e:{if($i(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Cr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var r=t.type;if(Cr(r))return ag(t,r,e)}return e}function lm(t,e,r,s,a,l,h,p,m){return t=dh(r,s,!0,t,a,l,h,p,m),t.context=am(null),r=t.current,s=hr(),a=li(r),l=Rn(s,a),l.callback=e??null,oi(r,l,a),t.current.lanes=a,ea(t,a,s),Ar(t,s),t}function Kl(t,e,r,s){var a=e.current,l=hr(),h=li(a);return r=am(r),e.context===null?e.context=r:e.pendingContext=r,e=Rn(l,h),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=oi(a,e,h),t!==null&&(ln(t,a,h,l),qa(t,a,h)),h}function Al(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function e0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function hh(t,e){e0(t,e),(t=t.alternate)&&e0(t,e)}function Bw(){return null}var cm=typeof reportError=="function"?reportError:function(t){console.error(t)};function fh(t){this._internalRoot=t}Yl.prototype.render=fh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));Kl(t,e,null,null)};Yl.prototype.unmount=fh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wi(function(){Kl(null,t,null,null)}),e[kn]=null}};function Yl(t){this._internalRoot=t}Yl.prototype.unstable_scheduleHydration=function(t){if(t){var e=U1();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Kn.length&&e!==0&&e<Kn[r].priority;r++);Kn.splice(r,0,t),r===0&&V1(t)}};function gh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function t0(){}function Fw(t,e,r,s,a){if(a){if(typeof s=="function"){var l=s;s=function(){var g=Al(h);l.call(g)}}var h=lm(e,s,t,0,null,!1,!1,"",t0);return t._reactRootContainer=h,t[kn]=h.current,Fo(t.nodeType===8?t.parentNode:t),Wi(),h}for(;a=t.lastChild;)t.removeChild(a);if(typeof s=="function"){var p=s;s=function(){var g=Al(m);p.call(g)}}var m=dh(t,0,!1,null,null,!1,!1,"",t0);return t._reactRootContainer=m,t[kn]=m.current,Fo(t.nodeType===8?t.parentNode:t),Wi(function(){Kl(e,m,r,s)}),m}function Ql(t,e,r,s,a){var l=r._reactRootContainer;if(l){var h=l;if(typeof a=="function"){var p=a;a=function(){var m=Al(h);p.call(m)}}Kl(e,h,t,a)}else h=Fw(r,e,t,a,s);return Al(h)}B1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=po(e.pendingLanes);r!==0&&(Pd(e,r|1),Ar(e,Rt()),!($e&6)&&(Bs=Rt()+500,mi()))}break;case 13:Wi(function(){var s=Pn(t,1);if(s!==null){var a=hr();ln(s,t,1,a)}}),hh(t,1)}};Dd=function(t){if(t.tag===13){var e=Pn(t,134217728);if(e!==null){var r=hr();ln(e,t,134217728,r)}hh(t,134217728)}};F1=function(t){if(t.tag===13){var e=li(t),r=Pn(t,e);if(r!==null){var s=hr();ln(r,t,e,s)}hh(t,e)}};U1=function(){return Je};z1=function(t,e){var r=Je;try{return Je=t,e()}finally{Je=r}};yu=function(t,e,r){switch(e){case"input":if(hu(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var s=r[e];if(s!==t&&s.form===t.form){var a=Vl(s);if(!a)throw Error(oe(90));w1(s),hu(s,a)}}}break;case"textarea":v1(t,r);break;case"select":e=r.value,e!=null&&As(t,!!r.multiple,e,!1)}};I1=ah;N1=Wi;var Uw={usingClientEntryPoint:!1,Events:[ra,xs,Vl,A1,S1,ah]},fo={findFiberByHostInstance:Pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zw={bundleType:fo.bundleType,version:fo.version,rendererPackageName:fo.rendererPackageName,rendererConfig:fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=O1(t),t===null?null:t.stateNode},findFiberByHostInstance:fo.findFiberByHostInstance||Bw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oa.isDisabled&&Oa.supportsFiber)try{Bl=Oa.inject(zw),En=Oa}catch{}}Dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uw;Dr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gh(e))throw Error(oe(200));return jw(t,e,null,r)};Dr.createRoot=function(t,e){if(!gh(t))throw Error(oe(299));var r=!1,s="",a=cm;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=dh(t,1,!1,null,null,r,!1,s,a),t[kn]=e.current,Fo(t.nodeType===8?t.parentNode:t),new fh(e)};Dr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=O1(e),t=t===null?null:t.stateNode,t};Dr.flushSync=function(t){return Wi(t)};Dr.hydrate=function(t,e,r){if(!Zl(e))throw Error(oe(200));return Ql(null,t,e,!0,r)};Dr.hydrateRoot=function(t,e,r){if(!gh(t))throw Error(oe(405));var s=r!=null&&r.hydratedSources||null,a=!1,l="",h=cm;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),e=lm(e,null,t,1,r??null,a,!1,l,h),t[kn]=e.current,Fo(t),s)for(t=0;t<s.length;t++)r=s[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new Yl(e)};Dr.render=function(t,e,r){if(!Zl(e))throw Error(oe(200));return Ql(null,t,e,!1,r)};Dr.unmountComponentAtNode=function(t){if(!Zl(t))throw Error(oe(40));return t._reactRootContainer?(Wi(function(){Ql(null,null,t,!1,function(){t._reactRootContainer=null,t[kn]=null})}),!0):!1};Dr.unstable_batchedUpdates=ah;Dr.unstable_renderSubtreeIntoContainer=function(t,e,r,s){if(!Zl(r))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return Ql(t,e,r,!1,s)};Dr.version="18.3.1-next-f1338f8080-20240426";function um(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(um)}catch(t){console.error(t)}}um(),u1.exports=Dr;var Vw=u1.exports,r0=Vw;su.createRoot=r0.createRoot,su.hydrateRoot=r0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qo(){return qo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},qo.apply(this,arguments)}var ti;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ti||(ti={}));const n0="popstate";function Ww(t){t===void 0&&(t={});function e(s,a){let{pathname:l,search:h,hash:p}=s.location;return Qu("",{pathname:l,search:h,hash:p},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:Sl(a)}return Gw(e,r,null,t)}function Ot(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Hw(){return Math.random().toString(36).substr(2,8)}function i0(t,e){return{usr:t.state,key:t.key,idx:e}}function Qu(t,e,r,s){return r===void 0&&(r=null),qo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ws(e):e,{state:r,key:e&&e.key||s||Hw()})}function Sl(t){let{pathname:e="/",search:r="",hash:s=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Ws(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function Gw(t,e,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:l=!1}=s,h=a.history,p=ti.Pop,m=null,g=v();g==null&&(g=0,h.replaceState(qo({},h.state,{idx:g}),""));function v(){return(h.state||{idx:null}).idx}function E(){p=ti.Pop;let B=v(),P=B==null?null:B-g;g=B,m&&m({action:p,location:j.location,delta:P})}function _(B,P){p=ti.Push;let N=Qu(j.location,B,P);g=v()+1;let I=i0(N,g),L=j.createHref(N);try{h.pushState(I,"",L)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;a.location.assign(L)}l&&m&&m({action:p,location:j.location,delta:1})}function T(B,P){p=ti.Replace;let N=Qu(j.location,B,P);g=v();let I=i0(N,g),L=j.createHref(N);h.replaceState(I,"",L),l&&m&&m({action:p,location:j.location,delta:0})}function O(B){let P=a.location.origin!=="null"?a.location.origin:a.location.href,N=typeof B=="string"?B:Sl(B);return N=N.replace(/ $/,"%20"),Ot(P,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,P)}let j={get action(){return p},get location(){return t(a,h)},listen(B){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(n0,E),m=B,()=>{a.removeEventListener(n0,E),m=null}},createHref(B){return e(a,B)},createURL:O,encodeLocation(B){let P=O(B);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:_,replace:T,go(B){return h.go(B)}};return j}var s0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(s0||(s0={}));function $w(t,e,r){return r===void 0&&(r="/"),Xw(t,e,r)}function Xw(t,e,r,s){let a=typeof e=="string"?Ws(e):e,l=mh(a.pathname||"/",r);if(l==null)return null;let h=hm(t);qw(h);let p=null;for(let m=0;p==null&&m<h.length;++m){let g=oy(l);p=ny(h[m],g)}return p}function hm(t,e,r,s){e===void 0&&(e=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(l,h,p)=>{let m={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};m.relativePath.startsWith("/")&&(Ot(m.relativePath.startsWith(s),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(s.length));let g=ui([s,m.relativePath]),v=r.concat(m);l.children&&l.children.length>0&&(Ot(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),hm(l.children,e,v,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:ty(g,l.index),routesMeta:v})};return t.forEach((l,h)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))a(l,h);else for(let m of fm(l.path))a(l,h,m)}),e}function fm(t){let e=t.split("/");if(e.length===0)return[];let[r,...s]=e,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let h=fm(s.join("/")),p=[];return p.push(...h.map(m=>m===""?l:[l,m].join("/"))),a&&p.push(...h),p.map(m=>t.startsWith("/")&&m===""?"/":m)}function qw(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:ry(e.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const Kw=/^:[\w-]+$/,Yw=3,Zw=2,Qw=1,Jw=10,ey=-2,o0=t=>t==="*";function ty(t,e){let r=t.split("/"),s=r.length;return r.some(o0)&&(s+=ey),e&&(s+=Zw),r.filter(a=>!o0(a)).reduce((a,l)=>a+(Kw.test(l)?Yw:l===""?Qw:Jw),s)}function ry(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function ny(t,e,r){let{routesMeta:s}=t,a={},l="/",h=[];for(let p=0;p<s.length;++p){let m=s[p],g=p===s.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=iy({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},v),_=m.route;if(!E)return null;Object.assign(a,E.params),h.push({params:a,pathname:ui([l,E.pathname]),pathnameBase:uy(ui([l,E.pathnameBase])),route:_}),E.pathnameBase!=="/"&&(l=ui([l,E.pathnameBase]))}return h}function iy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=sy(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let l=a[0],h=l.replace(/(.)\/+$/,"$1"),p=a.slice(1);return{params:s.reduce((g,v,E)=>{let{paramName:_,isOptional:T}=v;if(_==="*"){let j=p[E]||"";h=l.slice(0,l.length-j.length).replace(/(.)\/+$/,"$1")}const O=p[E];return T&&!O?g[_]=void 0:g[_]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:h,pattern:t}}function sy(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),dm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,m)=>(s.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function oy(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function mh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}function ay(t,e){e===void 0&&(e="/");let{pathname:r,search:s="",hash:a=""}=typeof t=="string"?Ws(t):t;return{pathname:r?r.startsWith("/")?r:ly(r,e):e,search:dy(s),hash:hy(a)}}function ly(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Kc(t,e,r,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cy(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function ph(t,e){let r=cy(t);return e?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function xh(t,e,r,s){s===void 0&&(s=!1);let a;typeof t=="string"?a=Ws(t):(a=qo({},t),Ot(!a.pathname||!a.pathname.includes("?"),Kc("?","pathname","search",a)),Ot(!a.pathname||!a.pathname.includes("#"),Kc("#","pathname","hash",a)),Ot(!a.search||!a.search.includes("#"),Kc("#","search","hash",a)));let l=t===""||a.pathname==="",h=l?"/":a.pathname,p;if(h==null)p=r;else{let E=e.length-1;if(!s&&h.startsWith("..")){let _=h.split("/");for(;_[0]==="..";)_.shift(),E-=1;a.pathname=_.join("/")}p=E>=0?e[E]:"/"}let m=ay(a,p),g=h&&h!=="/"&&h.endsWith("/"),v=(l||h===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(g||v)&&(m.pathname+="/"),m}const ui=t=>t.join("/").replace(/\/\/+/g,"/"),uy=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dy=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,hy=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function fy(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const gm=["post","put","patch","delete"];new Set(gm);const gy=["get",...gm];new Set(gy);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ko(){return Ko=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ko.apply(this,arguments)}const wh=H.createContext(null),my=H.createContext(null),pi=H.createContext(null),Jl=H.createContext(null),jn=H.createContext({outlet:null,matches:[],isDataRoute:!1}),mm=H.createContext(null);function py(t,e){let{relative:r}=e===void 0?{}:e;Hs()||Ot(!1);let{basename:s,navigator:a}=H.useContext(pi),{hash:l,pathname:h,search:p}=xm(t,{relative:r}),m=h;return s!=="/"&&(m=h==="/"?s:ui([s,h])),a.createHref({pathname:m,search:p,hash:l})}function Hs(){return H.useContext(Jl)!=null}function Xi(){return Hs()||Ot(!1),H.useContext(Jl).location}function pm(t){H.useContext(pi).static||H.useLayoutEffect(t)}function Gs(){let{isDataRoute:t}=H.useContext(jn);return t?Ry():xy()}function xy(){Hs()||Ot(!1);let t=H.useContext(wh),{basename:e,future:r,navigator:s}=H.useContext(pi),{matches:a}=H.useContext(jn),{pathname:l}=Xi(),h=JSON.stringify(ph(a,r.v7_relativeSplatPath)),p=H.useRef(!1);return pm(()=>{p.current=!0}),H.useCallback(function(g,v){if(v===void 0&&(v={}),!p.current)return;if(typeof g=="number"){s.go(g);return}let E=xh(g,JSON.parse(h),l,v.relative==="path");t==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:ui([e,E.pathname])),(v.replace?s.replace:s.push)(E,v.state,v)},[e,s,h,l,t])}function wy(){let{matches:t}=H.useContext(jn),e=t[t.length-1];return e?e.params:{}}function xm(t,e){let{relative:r}=e===void 0?{}:e,{future:s}=H.useContext(pi),{matches:a}=H.useContext(jn),{pathname:l}=Xi(),h=JSON.stringify(ph(a,s.v7_relativeSplatPath));return H.useMemo(()=>xh(t,JSON.parse(h),l,r==="path"),[t,h,l,r])}function yy(t,e){return vy(t,e)}function vy(t,e,r,s){Hs()||Ot(!1);let{navigator:a}=H.useContext(pi),{matches:l}=H.useContext(jn),h=l[l.length-1],p=h?h.params:{};h&&h.pathname;let m=h?h.pathnameBase:"/";h&&h.route;let g=Xi(),v;if(e){var E;let B=typeof e=="string"?Ws(e):e;m==="/"||(E=B.pathname)!=null&&E.startsWith(m)||Ot(!1),v=B}else v=g;let _=v.pathname||"/",T=_;if(m!=="/"){let B=m.replace(/^\//,"").split("/");T="/"+_.replace(/^\//,"").split("/").slice(B.length).join("/")}let O=$w(t,{pathname:T}),j=Ay(O&&O.map(B=>Object.assign({},B,{params:Object.assign({},p,B.params),pathname:ui([m,a.encodeLocation?a.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?m:ui([m,a.encodeLocation?a.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),l,r,s);return e&&j?H.createElement(Jl.Provider,{value:{location:Ko({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:ti.Pop}},j):j}function Ey(){let t=Ty(),e=fy(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),r?H.createElement("pre",{style:a},r):null,null)}const by=H.createElement(Ey,null);class _y extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?H.createElement(jn.Provider,{value:this.props.routeContext},H.createElement(mm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Cy(t){let{routeContext:e,match:r,children:s}=t,a=H.useContext(wh);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),H.createElement(jn.Provider,{value:e},s)}function Ay(t,e,r,s){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),s===void 0&&(s=null),t==null){var l;if(!r)return null;if(r.errors)t=r.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let h=t,p=(a=r)==null?void 0:a.errors;if(p!=null){let v=h.findIndex(E=>E.route.id&&(p==null?void 0:p[E.route.id])!==void 0);v>=0||Ot(!1),h=h.slice(0,Math.min(h.length,v+1))}let m=!1,g=-1;if(r&&s&&s.v7_partialHydration)for(let v=0;v<h.length;v++){let E=h[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=v),E.route.id){let{loaderData:_,errors:T}=r,O=E.route.loader&&_[E.route.id]===void 0&&(!T||T[E.route.id]===void 0);if(E.route.lazy||O){m=!0,g>=0?h=h.slice(0,g+1):h=[h[0]];break}}}return h.reduceRight((v,E,_)=>{let T,O=!1,j=null,B=null;r&&(T=p&&E.route.id?p[E.route.id]:void 0,j=E.route.errorElement||by,m&&(g<0&&_===0?(Oy("route-fallback"),O=!0,B=null):g===_&&(O=!0,B=E.route.hydrateFallbackElement||null)));let P=e.concat(h.slice(0,_+1)),N=()=>{let I;return T?I=j:O?I=B:E.route.Component?I=H.createElement(E.route.Component,null):E.route.element?I=E.route.element:I=v,H.createElement(Cy,{match:E,routeContext:{outlet:v,matches:P,isDataRoute:r!=null},children:I})};return r&&(E.route.ErrorBoundary||E.route.errorElement||_===0)?H.createElement(_y,{location:r.location,revalidation:r.revalidation,component:j,error:T,children:N(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):N()},null)}var wm=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(wm||{}),ym=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ym||{});function Sy(t){let e=H.useContext(wh);return e||Ot(!1),e}function Iy(t){let e=H.useContext(my);return e||Ot(!1),e}function Ny(t){let e=H.useContext(jn);return e||Ot(!1),e}function vm(t){let e=Ny(),r=e.matches[e.matches.length-1];return r.route.id||Ot(!1),r.route.id}function Ty(){var t;let e=H.useContext(mm),r=Iy(),s=vm();return e!==void 0?e:(t=r.errors)==null?void 0:t[s]}function Ry(){let{router:t}=Sy(wm.UseNavigateStable),e=vm(ym.UseNavigateStable),r=H.useRef(!1);return pm(()=>{r.current=!0}),H.useCallback(function(a,l){l===void 0&&(l={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Ko({fromRouteId:e},l)))},[t,e])}const a0={};function Oy(t,e,r){a0[t]||(a0[t]=!0)}function ky(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function l0(t){let{to:e,replace:r,state:s,relative:a}=t;Hs()||Ot(!1);let{future:l,static:h}=H.useContext(pi),{matches:p}=H.useContext(jn),{pathname:m}=Xi(),g=Gs(),v=xh(e,ph(p,l.v7_relativeSplatPath),m,a==="path"),E=JSON.stringify(v);return H.useEffect(()=>g(JSON.parse(E),{replace:r,state:s,relative:a}),[g,E,a,r,s]),null}function xn(t){Ot(!1)}function Py(t){let{basename:e="/",children:r=null,location:s,navigationType:a=ti.Pop,navigator:l,static:h=!1,future:p}=t;Hs()&&Ot(!1);let m=e.replace(/^\/*/,"/"),g=H.useMemo(()=>({basename:m,navigator:l,static:h,future:Ko({v7_relativeSplatPath:!1},p)}),[m,p,l,h]);typeof s=="string"&&(s=Ws(s));let{pathname:v="/",search:E="",hash:_="",state:T=null,key:O="default"}=s,j=H.useMemo(()=>{let B=mh(v,m);return B==null?null:{location:{pathname:B,search:E,hash:_,state:T,key:O},navigationType:a}},[m,v,E,_,T,O,a]);return j==null?null:H.createElement(pi.Provider,{value:g},H.createElement(Jl.Provider,{children:r,value:j}))}function Dy(t){let{children:e,location:r}=t;return yy(Ju(e),r)}new Promise(()=>{});function Ju(t,e){e===void 0&&(e=[]);let r=[];return H.Children.forEach(t,(s,a)=>{if(!H.isValidElement(s))return;let l=[...e,a];if(s.type===H.Fragment){r.push.apply(r,Ju(s.props.children,l));return}s.type!==xn&&Ot(!1),!s.props.index||!s.props.children||Ot(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Ju(s.props.children,l)),r.push(h)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ed(){return ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},ed.apply(this,arguments)}function My(t,e){if(t==null)return{};var r={},s=Object.keys(t),a,l;for(l=0;l<s.length;l++)a=s[l],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function Ly(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function jy(t,e){return t.button===0&&(!e||e==="_self")&&!Ly(t)}function td(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let s=t[r];return e.concat(Array.isArray(s)?s.map(a=>[r,a]):[[r,s]])},[]))}function By(t,e){let r=td(t);return e&&e.forEach((s,a)=>{r.has(a)||e.getAll(a).forEach(l=>{r.append(a,l)})}),r}const Fy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Uy="6";try{window.__reactRouterVersion=Uy}catch{}const zy="startTransition",c0=Ox[zy];function Vy(t){let{basename:e,children:r,future:s,window:a}=t,l=H.useRef();l.current==null&&(l.current=Ww({window:a,v5Compat:!0}));let h=l.current,[p,m]=H.useState({action:h.action,location:h.location}),{v7_startTransition:g}=s||{},v=H.useCallback(E=>{g&&c0?c0(()=>m(E)):m(E)},[m,g]);return H.useLayoutEffect(()=>h.listen(v),[h,v]),H.useEffect(()=>ky(s),[s]),H.createElement(Py,{basename:e,children:r,location:p.location,navigationType:p.action,navigator:h,future:s})}const Wy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Hy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qr=H.forwardRef(function(e,r){let{onClick:s,relative:a,reloadDocument:l,replace:h,state:p,target:m,to:g,preventScrollReset:v,viewTransition:E}=e,_=My(e,Fy),{basename:T}=H.useContext(pi),O,j=!1;if(typeof g=="string"&&Hy.test(g)&&(O=g,Wy))try{let I=new URL(window.location.href),L=g.startsWith("//")?new URL(I.protocol+g):new URL(g),W=mh(L.pathname,T);L.origin===I.origin&&W!=null?g=W+L.search+L.hash:j=!0}catch{}let B=py(g,{relative:a}),P=Gy(g,{replace:h,state:p,target:m,preventScrollReset:v,relative:a,viewTransition:E});function N(I){s&&s(I),I.defaultPrevented||P(I)}return H.createElement("a",ed({},_,{href:O||B,onClick:j||l?s:N,ref:r,target:m}))});var u0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(u0||(u0={}));var d0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(d0||(d0={}));function Gy(t,e){let{target:r,replace:s,state:a,preventScrollReset:l,relative:h,viewTransition:p}=e===void 0?{}:e,m=Gs(),g=Xi(),v=xm(t,{relative:h});return H.useCallback(E=>{if(jy(E,r)){E.preventDefault();let _=s!==void 0?s:Sl(g)===Sl(v);m(t,{replace:_,state:a,preventScrollReset:l,relative:h,viewTransition:p})}},[g,m,v,s,a,r,t,l,h,p])}function $y(t){let e=H.useRef(td(t)),r=H.useRef(!1),s=Xi(),a=H.useMemo(()=>By(s.search,r.current?null:e.current),[s.search]),l=Gs(),h=H.useCallback((p,m)=>{const g=td(typeof p=="function"?p(a):p);r.current=!0,l("?"+g,m)},[l,a]);return[a,h]}let Xy={data:""},qy=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||Xy},Ky=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Yy=/\/\*[^]*?\*\/|  +/g,h0=/\n+/g,Zn=(t,e)=>{let r="",s="",a="";for(let l in t){let h=t[l];l[0]=="@"?l[1]=="i"?r=l+" "+h+";":s+=l[1]=="f"?Zn(h,l):l+"{"+Zn(h,l[1]=="k"?"":e)+"}":typeof h=="object"?s+=Zn(h,e?e.replace(/([^,])+/g,p=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,p):p?p+" "+m:m)):l):h!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Zn.p?Zn.p(l,h):l+":"+h+";")}return r+(e&&a?e+"{"+a+"}":a)+s},_n={},Em=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+Em(t[r]);return e}return t},Zy=(t,e,r,s,a)=>{let l=Em(t),h=_n[l]||(_n[l]=(m=>{let g=0,v=11;for(;g<m.length;)v=101*v+m.charCodeAt(g++)>>>0;return"go"+v})(l));if(!_n[h]){let m=l!==t?t:(g=>{let v,E,_=[{}];for(;v=Ky.exec(g.replace(Yy,""));)v[4]?_.shift():v[3]?(E=v[3].replace(h0," ").trim(),_.unshift(_[0][E]=_[0][E]||{})):_[0][v[1]]=v[2].replace(h0," ").trim();return _[0]})(t);_n[h]=Zn(a?{["@keyframes "+h]:m}:m,r?"":"."+h)}let p=r&&_n.g?_n.g:null;return r&&(_n.g=_n[h]),((m,g,v,E)=>{E?g.data=g.data.replace(E,m):g.data.indexOf(m)===-1&&(g.data=v?m+g.data:g.data+m)})(_n[h],e,s,p),h},Qy=(t,e,r)=>t.reduce((s,a,l)=>{let h=e[l];if(h&&h.call){let p=h(r),m=p&&p.props&&p.props.className||/^go/.test(p)&&p;h=m?"."+m:p&&typeof p=="object"?p.props?"":Zn(p,""):p===!1?"":p}return s+a+(h??"")},"");function ec(t){let e=this||{},r=t.call?t(e.p):t;return Zy(r.unshift?r.raw?Qy(r,[].slice.call(arguments,1),e.p):r.reduce((s,a)=>Object.assign(s,a&&a.call?a(e.p):a),{}):r,qy(e.target),e.g,e.o,e.k)}let bm,rd,nd;ec.bind({g:1});let Mn=ec.bind({k:1});function Jy(t,e,r,s){Zn.p=e,bm=t,rd=r,nd=s}function xi(t,e){let r=this||{};return function(){let s=arguments;function a(l,h){let p=Object.assign({},l),m=p.className||a.className;r.p=Object.assign({theme:rd&&rd()},p),r.o=/ *go\d+/.test(m),p.className=ec.apply(r,s)+(m?" "+m:"");let g=t;return t[0]&&(g=p.as||t,delete p.as),nd&&g[0]&&nd(p),bm(g,p)}return a}}var ev=t=>typeof t=="function",Il=(t,e)=>ev(t)?t(e):t,tv=(()=>{let t=0;return()=>(++t).toString()})(),_m=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),rv=20,yh="default",Cm=(t,e)=>{let{toastLimit:r}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,r)};case 1:return{...t,toasts:t.toasts.map(h=>h.id===e.toast.id?{...h,...e.toast}:h)};case 2:let{toast:s}=e;return Cm(t,{type:t.toasts.find(h=>h.id===s.id)?1:0,toast:s});case 3:let{toastId:a}=e;return{...t,toasts:t.toasts.map(h=>h.id===a||a===void 0?{...h,dismissed:!0,visible:!1}:h)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(h=>h.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let l=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(h=>({...h,pauseDuration:h.pauseDuration+l}))}}},tl=[],Am={toasts:[],pausedAt:void 0,settings:{toastLimit:rv}},vn={},Sm=(t,e=yh)=>{vn[e]=Cm(vn[e]||Am,t),tl.forEach(([r,s])=>{r===e&&s(vn[e])})},Im=t=>Object.keys(vn).forEach(e=>Sm(t,e)),nv=t=>Object.keys(vn).find(e=>vn[e].toasts.some(r=>r.id===t)),tc=(t=yh)=>e=>{Sm(e,t)},iv={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},sv=(t={},e=yh)=>{let[r,s]=H.useState(vn[e]||Am),a=H.useRef(vn[e]);H.useEffect(()=>(a.current!==vn[e]&&s(vn[e]),tl.push([e,s]),()=>{let h=tl.findIndex(([p])=>p===e);h>-1&&tl.splice(h,1)}),[e]);let l=r.toasts.map(h=>{var p,m,g;return{...t,...t[h.type],...h,removeDelay:h.removeDelay||((p=t[h.type])==null?void 0:p.removeDelay)||(t==null?void 0:t.removeDelay),duration:h.duration||((m=t[h.type])==null?void 0:m.duration)||(t==null?void 0:t.duration)||iv[h.type],style:{...t.style,...(g=t[h.type])==null?void 0:g.style,...h.style}}});return{...r,toasts:l}},ov=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||tv()}),ia=t=>(e,r)=>{let s=ov(e,t,r);return tc(s.toasterId||nv(s.id))({type:2,toast:s}),s.id},Ut=(t,e)=>ia("blank")(t,e);Ut.error=ia("error");Ut.success=ia("success");Ut.loading=ia("loading");Ut.custom=ia("custom");Ut.dismiss=(t,e)=>{let r={type:3,toastId:t};e?tc(e)(r):Im(r)};Ut.dismissAll=t=>Ut.dismiss(void 0,t);Ut.remove=(t,e)=>{let r={type:4,toastId:t};e?tc(e)(r):Im(r)};Ut.removeAll=t=>Ut.remove(void 0,t);Ut.promise=(t,e,r)=>{let s=Ut.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(a=>{let l=e.success?Il(e.success,a):void 0;return l?Ut.success(l,{id:s,...r,...r==null?void 0:r.success}):Ut.dismiss(s),a}).catch(a=>{let l=e.error?Il(e.error,a):void 0;l?Ut.error(l,{id:s,...r,...r==null?void 0:r.error}):Ut.dismiss(s)}),t};var av=1e3,lv=(t,e="default")=>{let{toasts:r,pausedAt:s}=sv(t,e),a=H.useRef(new Map).current,l=H.useCallback((E,_=av)=>{if(a.has(E))return;let T=setTimeout(()=>{a.delete(E),h({type:4,toastId:E})},_);a.set(E,T)},[]);H.useEffect(()=>{if(s)return;let E=Date.now(),_=r.map(T=>{if(T.duration===1/0)return;let O=(T.duration||0)+T.pauseDuration-(E-T.createdAt);if(O<0){T.visible&&Ut.dismiss(T.id);return}return setTimeout(()=>Ut.dismiss(T.id,e),O)});return()=>{_.forEach(T=>T&&clearTimeout(T))}},[r,s,e]);let h=H.useCallback(tc(e),[e]),p=H.useCallback(()=>{h({type:5,time:Date.now()})},[h]),m=H.useCallback((E,_)=>{h({type:1,toast:{id:E,height:_}})},[h]),g=H.useCallback(()=>{s&&h({type:6,time:Date.now()})},[s,h]),v=H.useCallback((E,_)=>{let{reverseOrder:T=!1,gutter:O=8,defaultPosition:j}=_||{},B=r.filter(I=>(I.position||j)===(E.position||j)&&I.height),P=B.findIndex(I=>I.id===E.id),N=B.filter((I,L)=>L<P&&I.visible).length;return B.filter(I=>I.visible).slice(...T?[N+1]:[0,N]).reduce((I,L)=>I+(L.height||0)+O,0)},[r]);return H.useEffect(()=>{r.forEach(E=>{if(E.dismissed)l(E.id,E.removeDelay);else{let _=a.get(E.id);_&&(clearTimeout(_),a.delete(E.id))}})},[r,l]),{toasts:r,handlers:{updateHeight:m,startPause:p,endPause:g,calculateOffset:v}}},cv=Mn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,uv=Mn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,dv=Mn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,hv=xi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${cv} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${uv} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${dv} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,fv=Mn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,gv=xi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${fv} 1s linear infinite;
`,mv=Mn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,pv=Mn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,xv=xi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${mv} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${pv} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,wv=xi("div")`
  position: absolute;
`,yv=xi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,vv=Mn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ev=xi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${vv} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,bv=({toast:t})=>{let{icon:e,type:r,iconTheme:s}=t;return e!==void 0?typeof e=="string"?H.createElement(Ev,null,e):e:r==="blank"?null:H.createElement(yv,null,H.createElement(gv,{...s}),r!=="loading"&&H.createElement(wv,null,r==="error"?H.createElement(hv,{...s}):H.createElement(xv,{...s})))},_v=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Cv=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Av="0%{opacity:0;} 100%{opacity:1;}",Sv="0%{opacity:1;} 100%{opacity:0;}",Iv=xi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Nv=xi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Tv=(t,e)=>{let r=t.includes("top")?1:-1,[s,a]=_m()?[Av,Sv]:[_v(r),Cv(r)];return{animation:e?`${Mn(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Mn(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Rv=H.memo(({toast:t,position:e,style:r,children:s})=>{let a=t.height?Tv(t.position||e||"top-center",t.visible):{opacity:0},l=H.createElement(bv,{toast:t}),h=H.createElement(Nv,{...t.ariaProps},Il(t.message,t));return H.createElement(Iv,{className:t.className,style:{...a,...r,...t.style}},typeof s=="function"?s({icon:l,message:h}):H.createElement(H.Fragment,null,l,h))});Jy(H.createElement);var Ov=({id:t,className:e,style:r,onHeightUpdate:s,children:a})=>{let l=H.useCallback(h=>{if(h){let p=()=>{let m=h.getBoundingClientRect().height;s(t,m)};p(),new MutationObserver(p).observe(h,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return H.createElement("div",{ref:l,className:e,style:r},a)},kv=(t,e)=>{let r=t.includes("top"),s=r?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:_m()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...s,...a}},Pv=ec`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ka=16,Dv=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:s,children:a,toasterId:l,containerStyle:h,containerClassName:p})=>{let{toasts:m,handlers:g}=lv(r,l);return H.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:ka,left:ka,right:ka,bottom:ka,pointerEvents:"none",...h},className:p,onMouseEnter:g.startPause,onMouseLeave:g.endPause},m.map(v=>{let E=v.position||e,_=g.calculateOffset(v,{reverseOrder:t,gutter:s,defaultPosition:e}),T=kv(E,_);return H.createElement(Ov,{id:v.id,key:v.id,onHeightUpdate:g.updateHeight,className:v.visible?Pv:"",style:T},v.type==="custom"?Il(v.message,v):a?a(v):H.createElement(Rv,{toast:v,position:E}))}))},ge=Ut,id=function(t,e){return id=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},id(t,e)};function Nm(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");id(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Nl=function(){return Nl=Object.assign||function(e){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},Nl.apply(this,arguments)};function $s(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(r[s[a]]=t[s[a]]);return r}function Tm(t,e,r,s){var a=arguments.length,l=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,r):s,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,r,s);else for(var p=t.length-1;p>=0;p--)(h=t[p])&&(l=(a<3?h(l):a>3?h(e,r,l):h(e,r))||l);return a>3&&l&&Object.defineProperty(e,r,l),l}function Rm(t,e){return function(r,s){e(r,s,t)}}function Om(t,e,r,s,a,l){function h(P){if(P!==void 0&&typeof P!="function")throw new TypeError("Function expected");return P}for(var p=s.kind,m=p==="getter"?"get":p==="setter"?"set":"value",g=!e&&t?s.static?t:t.prototype:null,v=e||(g?Object.getOwnPropertyDescriptor(g,s.name):{}),E,_=!1,T=r.length-1;T>=0;T--){var O={};for(var j in s)O[j]=j==="access"?{}:s[j];for(var j in s.access)O.access[j]=s.access[j];O.addInitializer=function(P){if(_)throw new TypeError("Cannot add initializers after decoration has completed");l.push(h(P||null))};var B=(0,r[T])(p==="accessor"?{get:v.get,set:v.set}:v[m],O);if(p==="accessor"){if(B===void 0)continue;if(B===null||typeof B!="object")throw new TypeError("Object expected");(E=h(B.get))&&(v.get=E),(E=h(B.set))&&(v.set=E),(E=h(B.init))&&a.unshift(E)}else(E=h(B))&&(p==="field"?a.unshift(E):v[m]=E)}g&&Object.defineProperty(g,s.name,v),_=!0}function km(t,e,r){for(var s=arguments.length>2,a=0;a<e.length;a++)r=s?e[a].call(t,r):e[a].call(t);return s?r:void 0}function Pm(t){return typeof t=="symbol"?t:"".concat(t)}function Dm(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Mm(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Ee(t,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function p(v){try{g(s.next(v))}catch(E){h(E)}}function m(v){try{g(s.throw(v))}catch(E){h(E)}}function g(v){v.done?l(v.value):a(v.value).then(p,m)}g((s=s.apply(t,e||[])).next())})}function Lm(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=p(0),h.throw=p(1),h.return=p(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(g){return function(v){return m([g,v])}}function m(g){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(s=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(v){g=[6,v],a=0}finally{s=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var rc=Object.create?function(t,e,r,s){s===void 0&&(s=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,s,a)}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]};function jm(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&rc(e,t,r)}function Tl(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],s=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vh(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var s=r.call(t),a,l=[],h;try{for(;(e===void 0||e-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(p){h={error:p}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(h)throw h.error}}return l}function Bm(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(vh(arguments[e]));return t}function Fm(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var s=Array(t),a=0,e=0;e<r;e++)for(var l=arguments[e],h=0,p=l.length;h<p;h++,a++)s[a]=l[h];return s}function Um(t,e,r){if(r||arguments.length===2)for(var s=0,a=e.length,l;s<a;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return t.concat(l||Array.prototype.slice.call(e))}function Fs(t){return this instanceof Fs?(this.v=t,this):new Fs(t)}function zm(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(t,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",h),a[Symbol.asyncIterator]=function(){return this},a;function h(T){return function(O){return Promise.resolve(O).then(T,E)}}function p(T,O){s[T]&&(a[T]=function(j){return new Promise(function(B,P){l.push([T,j,B,P])>1||m(T,j)})},O&&(a[T]=O(a[T])))}function m(T,O){try{g(s[T](O))}catch(j){_(l[0][3],j)}}function g(T){T.value instanceof Fs?Promise.resolve(T.value.v).then(v,E):_(l[0][2],T)}function v(T){m("next",T)}function E(T){m("throw",T)}function _(T,O){T(O),l.shift(),l.length&&m(l[0][0],l[0][1])}}function Vm(t){var e,r;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,l){e[a]=t[a]?function(h){return(r=!r)?{value:Fs(t[a](h)),done:!1}:l?l(h):h}:l}}function Wm(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Tl=="function"?Tl(t):t[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(l){r[l]=t[l]&&function(h){return new Promise(function(p,m){h=t[l](h),a(p,m,h.done,h.value)})}}function a(l,h,p,m){Promise.resolve(m).then(function(g){l({value:g,done:p})},h)}}function Hm(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Mv=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},sd=function(t){return sd=Object.getOwnPropertyNames||function(e){var r=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[r.length]=s);return r},sd(t)};function Gm(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=sd(t),s=0;s<r.length;s++)r[s]!=="default"&&rc(e,t,r[s]);return Mv(e,t),e}function $m(t){return t&&t.__esModule?t:{default:t}}function Xm(t,e,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(t):s?s.value:e.get(t)}function qm(t,e,r,s,a){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?a.call(t,r):a?a.value=r:e.set(t,r),r}function Km(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Ym(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],r&&(a=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");a&&(s=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:e,dispose:s,async:r})}else r&&t.stack.push({async:!0});return e}var Lv=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var s=new Error(r);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function Zm(t){function e(l){t.error=t.hasError?new Lv(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var r,s=0;function a(){for(;r=t.stack.pop();)try{if(!r.async&&s===1)return s=0,t.stack.push(r),Promise.resolve().then(a);if(r.dispose){var l=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(l).then(a,function(h){return e(h),a()})}else s|=1}catch(h){e(h)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function Qm(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,s,a,l,h){return s?e?".jsx":".js":a&&(!l||!h)?r:a+l+"."+h.toLowerCase()+"js"}):t}const jv={__extends:Nm,__assign:Nl,__rest:$s,__decorate:Tm,__param:Rm,__esDecorate:Om,__runInitializers:km,__propKey:Pm,__setFunctionName:Dm,__metadata:Mm,__awaiter:Ee,__generator:Lm,__createBinding:rc,__exportStar:jm,__values:Tl,__read:vh,__spread:Bm,__spreadArrays:Fm,__spreadArray:Um,__await:Fs,__asyncGenerator:zm,__asyncDelegator:Vm,__asyncValues:Wm,__makeTemplateObject:Hm,__importStar:Gm,__importDefault:$m,__classPrivateFieldGet:Xm,__classPrivateFieldSet:qm,__classPrivateFieldIn:Km,__addDisposableResource:Ym,__disposeResources:Zm,__rewriteRelativeImportExtension:Qm},Bv=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Ym,get __assign(){return Nl},__asyncDelegator:Vm,__asyncGenerator:zm,__asyncValues:Wm,__await:Fs,__awaiter:Ee,__classPrivateFieldGet:Xm,__classPrivateFieldIn:Km,__classPrivateFieldSet:qm,__createBinding:rc,__decorate:Tm,__disposeResources:Zm,__esDecorate:Om,__exportStar:jm,__extends:Nm,__generator:Lm,__importDefault:$m,__importStar:Gm,__makeTemplateObject:Hm,__metadata:Mm,__param:Rm,__propKey:Pm,__read:vh,__rest:$s,__rewriteRelativeImportExtension:Qm,__runInitializers:km,__setFunctionName:Dm,__spread:Bm,__spreadArray:Um,__spreadArrays:Fm,__values:Tl,default:jv},Symbol.toStringTag,{value:"Module"})),Fv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Eh extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class Uv extends Eh{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class f0 extends Eh{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class g0 extends Eh{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var od;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(od||(od={}));class zv{constructor(e,{headers:r={},customFetch:s,region:a=od.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=Fv(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Ee(this,arguments,void 0,function*(r,s={}){var a;let l,h;try{const{headers:p,method:m,body:g,signal:v,timeout:E}=s;let _={},{region:T}=s;T||(T=this.region);const O=new URL(`${this.url}/${r}`);T&&T!=="any"&&(_["x-region"]=T,O.searchParams.set("forceFunctionRegion",T));let j;g&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",j=g):typeof g=="string"?(_["Content-Type"]="text/plain",j=g):typeof FormData<"u"&&g instanceof FormData?j=g:(_["Content-Type"]="application/json",j=JSON.stringify(g)):j=g;let B=v;E&&(h=new AbortController,l=setTimeout(()=>h.abort(),E),v?(B=h.signal,v.addEventListener("abort",()=>h.abort())):B=h.signal);const P=yield this.fetch(O.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),p),body:j,signal:B}).catch(W=>{throw new Uv(W)}),N=P.headers.get("x-relay-error");if(N&&N==="true")throw new f0(P);if(!P.ok)throw new g0(P);let I=((a=P.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),L;return I==="application/json"?L=yield P.json():I==="application/octet-stream"||I==="application/pdf"?L=yield P.blob():I==="text/event-stream"?L=P:I==="multipart/form-data"?L=yield P.formData():L=yield P.text(),{data:L,error:null,response:P}}catch(p){return{data:null,error:p,response:p instanceof g0||p instanceof f0?p.context:void 0}}finally{l&&clearTimeout(l)}})}}var dr={};const Xs=mx(Bv);var Pa={},Da={},Ma={},La={},ja={},Ba={},m0;function Jm(){if(m0)return Ba;m0=1,Object.defineProperty(Ba,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Ba.default=t,Ba}var p0;function ep(){if(p0)return ja;p0=1,Object.defineProperty(ja,"__esModule",{value:!0});const e=Xs.__importDefault(Jm());class r{constructor(a){var l,h;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(h=a.isMaybeSingle)!==null&&h!==void 0?h:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let p=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var g,v,E,_;let T=null,O=null,j=null,B=m.status,P=m.statusText;if(m.ok){if(this.method!=="HEAD"){const W=await m.text();W===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?O=W:O=JSON.parse(W))}const I=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),L=(E=m.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");I&&L&&L.length>1&&(j=parseInt(L[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(O)&&(O.length>1?(T={code:"PGRST116",details:`Results contain ${O.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},O=null,j=null,B=406,P="Not Acceptable"):O.length===1?O=O[0]:O=null)}else{const I=await m.text();try{T=JSON.parse(I),Array.isArray(T)&&m.status===404&&(O=[],T=null,B=200,P="OK")}catch{m.status===404&&I===""?(B=204,P="No Content"):T={message:I}}if(T&&this.isMaybeSingle&&(!((_=T==null?void 0:T.details)===null||_===void 0)&&_.includes("0 rows"))&&(T=null,B=200,P="OK"),T&&this.shouldThrowOnError)throw new e.default(T)}return{error:T,data:O,count:j,status:B,statusText:P}});return this.shouldThrowOnError||(p=p.catch(m=>{var g,v,E;return{error:{message:`${(g=m==null?void 0:m.name)!==null&&g!==void 0?g:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(v=m==null?void 0:m.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(E=m==null?void 0:m.code)!==null&&E!==void 0?E:""}`},data:null,count:null,status:0,statusText:""}})),p.then(a,l)}returns(){return this}overrideTypes(){return this}}return ja.default=r,ja}var x0;function tp(){if(x0)return La;x0=1,Object.defineProperty(La,"__esModule",{value:!0});const e=Xs.__importDefault(ep());class r extends e.default{select(a){let l=!1;const h=(a??"*").split("").map(p=>/\s/.test(p)&&!l?"":(p==='"'&&(l=!l),p)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:h,foreignTable:p,referencedTable:m=p}={}){const g=m?`${m}.order`:"order",v=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${v?`${v},`:""}${a}.${l?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:h=l}={}){const p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(p,`${a}`),this}range(a,l,{foreignTable:h,referencedTable:p=h}={}){const m=typeof p>"u"?"offset":`${p}.offset`,g=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(m,`${a}`),this.url.searchParams.set(g,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:h=!1,buffers:p=!1,wal:m=!1,format:g="text"}={}){var v;const E=[a?"analyze":null,l?"verbose":null,h?"settings":null,p?"buffers":null,m?"wal":null].filter(Boolean).join("|"),_=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${_}"; options=${E};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return La.default=r,La}var w0;function bh(){if(w0)return Ma;w0=1,Object.defineProperty(Ma,"__esModule",{value:!0});const e=Xs.__importDefault(tp()),r=new RegExp("[,()]");class s extends e.default{eq(l,h){return this.url.searchParams.append(l,`eq.${h}`),this}neq(l,h){return this.url.searchParams.append(l,`neq.${h}`),this}gt(l,h){return this.url.searchParams.append(l,`gt.${h}`),this}gte(l,h){return this.url.searchParams.append(l,`gte.${h}`),this}lt(l,h){return this.url.searchParams.append(l,`lt.${h}`),this}lte(l,h){return this.url.searchParams.append(l,`lte.${h}`),this}like(l,h){return this.url.searchParams.append(l,`like.${h}`),this}likeAllOf(l,h){return this.url.searchParams.append(l,`like(all).{${h.join(",")}}`),this}likeAnyOf(l,h){return this.url.searchParams.append(l,`like(any).{${h.join(",")}}`),this}ilike(l,h){return this.url.searchParams.append(l,`ilike.${h}`),this}ilikeAllOf(l,h){return this.url.searchParams.append(l,`ilike(all).{${h.join(",")}}`),this}ilikeAnyOf(l,h){return this.url.searchParams.append(l,`ilike(any).{${h.join(",")}}`),this}is(l,h){return this.url.searchParams.append(l,`is.${h}`),this}in(l,h){const p=Array.from(new Set(h)).map(m=>typeof m=="string"&&r.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(l,`in.(${p})`),this}contains(l,h){return typeof h=="string"?this.url.searchParams.append(l,`cs.${h}`):Array.isArray(h)?this.url.searchParams.append(l,`cs.{${h.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(h)}`),this}containedBy(l,h){return typeof h=="string"?this.url.searchParams.append(l,`cd.${h}`):Array.isArray(h)?this.url.searchParams.append(l,`cd.{${h.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(h)}`),this}rangeGt(l,h){return this.url.searchParams.append(l,`sr.${h}`),this}rangeGte(l,h){return this.url.searchParams.append(l,`nxl.${h}`),this}rangeLt(l,h){return this.url.searchParams.append(l,`sl.${h}`),this}rangeLte(l,h){return this.url.searchParams.append(l,`nxr.${h}`),this}rangeAdjacent(l,h){return this.url.searchParams.append(l,`adj.${h}`),this}overlaps(l,h){return typeof h=="string"?this.url.searchParams.append(l,`ov.${h}`):this.url.searchParams.append(l,`ov.{${h.join(",")}}`),this}textSearch(l,h,{config:p,type:m}={}){let g="";m==="plain"?g="pl":m==="phrase"?g="ph":m==="websearch"&&(g="w");const v=p===void 0?"":`(${p})`;return this.url.searchParams.append(l,`${g}fts${v}.${h}`),this}match(l){return Object.entries(l).forEach(([h,p])=>{this.url.searchParams.append(h,`eq.${p}`)}),this}not(l,h,p){return this.url.searchParams.append(l,`not.${h}.${p}`),this}or(l,{foreignTable:h,referencedTable:p=h}={}){const m=p?`${p}.or`:"or";return this.url.searchParams.append(m,`(${l})`),this}filter(l,h,p){return this.url.searchParams.append(l,`${h}.${p}`),this}}return Ma.default=s,Ma}var y0;function rp(){if(y0)return Da;y0=1,Object.defineProperty(Da,"__esModule",{value:!0});const e=Xs.__importDefault(bh());class r{constructor(a,{headers:l={},schema:h,fetch:p}){this.url=a,this.headers=new Headers(l),this.schema=h,this.fetch=p}select(a,l){const{head:h=!1,count:p}=l??{},m=h?"HEAD":"GET";let g=!1;const v=(a??"*").split("").map(E=>/\s/.test(E)&&!g?"":(E==='"'&&(g=!g),E)).join("");return this.url.searchParams.set("select",v),p&&this.headers.append("Prefer",`count=${p}`),new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:h=!0}={}){var p;const m="POST";if(l&&this.headers.append("Prefer",`count=${l}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const g=a.reduce((v,E)=>v.concat(Object.keys(E)),[]);if(g.length>0){const v=[...new Set(g)].map(E=>`"${E}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:h=!1,count:p,defaultToNull:m=!0}={}){var g;const v="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),p&&this.headers.append("Prefer",`count=${p}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const E=a.reduce((_,T)=>_.concat(Object.keys(T)),[]);if(E.length>0){const _=[...new Set(E)].map(T=>`"${T}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(a,{count:l}={}){var h;const p="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:a}={}){var l;const h="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return Da.default=r,Da}var v0;function Vv(){if(v0)return Pa;v0=1,Object.defineProperty(Pa,"__esModule",{value:!0});const t=Xs,e=t.__importDefault(rp()),r=t.__importDefault(bh());class s{constructor(l,{headers:h={},schema:p,fetch:m}={}){this.url=l,this.headers=new Headers(h),this.schemaName=p,this.fetch=m}from(l){const h=new URL(`${this.url}/${l}`);return new e.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,h={},{head:p=!1,get:m=!1,count:g}={}){var v;let E;const _=new URL(`${this.url}/rpc/${l}`);let T;p||m?(E=p?"HEAD":"GET",Object.entries(h).filter(([j,B])=>B!==void 0).map(([j,B])=>[j,Array.isArray(B)?`{${B.join(",")}}`:`${B}`]).forEach(([j,B])=>{_.searchParams.append(j,B)})):(E="POST",T=h);const O=new Headers(this.headers);return g&&O.set("Prefer",`count=${g}`),new r.default({method:E,url:_,headers:O,schema:this.schemaName,body:T,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return Pa.default=s,Pa}Object.defineProperty(dr,"__esModule",{value:!0});var np=dr.PostgrestError=fp=dr.PostgrestBuilder=dp=dr.PostgrestTransformBuilder=cp=dr.PostgrestFilterBuilder=ap=dr.PostgrestQueryBuilder=sp=dr.PostgrestClient=void 0;const qs=Xs,ip=qs.__importDefault(Vv());var sp=dr.PostgrestClient=ip.default;const op=qs.__importDefault(rp());var ap=dr.PostgrestQueryBuilder=op.default;const lp=qs.__importDefault(bh());var cp=dr.PostgrestFilterBuilder=lp.default;const up=qs.__importDefault(tp());var dp=dr.PostgrestTransformBuilder=up.default;const hp=qs.__importDefault(ep());var fp=dr.PostgrestBuilder=hp.default;const gp=qs.__importDefault(Jm());np=dr.PostgrestError=gp.default;var mp=dr.default={PostgrestClient:ip.default,PostgrestQueryBuilder:op.default,PostgrestFilterBuilder:lp.default,PostgrestTransformBuilder:up.default,PostgrestBuilder:hp.default,PostgrestError:gp.default};const Wv=yd({__proto__:null,get PostgrestBuilder(){return fp},get PostgrestClient(){return sp},get PostgrestError(){return np},get PostgrestFilterBuilder(){return cp},get PostgrestQueryBuilder(){return ap},get PostgrestTransformBuilder(){return dp},default:mp},[dr]),{PostgrestClient:Hv,PostgrestQueryBuilder:o_,PostgrestFilterBuilder:a_,PostgrestTransformBuilder:l_,PostgrestBuilder:c_,PostgrestError:u_}=mp||Wv;class Gv{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const s=this.getWebSocketConstructor();return new s(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const $v="2.81.1",Xv=`realtime-js/${$v}`,pp="1.0.0",qv="2.0.0",E0=pp,ad=1e4,Kv=1e3,Yv=100;var Ri;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ri||(Ri={}));var Bt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Bt||(Bt={}));var zr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(zr||(zr={}));var ld;(function(t){t.websocket="websocket"})(ld||(ld={}));var Oi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Oi||(Oi={}));class Zv{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,r){if(this._isArrayBuffer(e.payload))return r(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(s))}_binaryEncodePush(e){const{join_ref:r,ref:s,event:a,topic:l,payload:h}=e,p=this.META_LENGTH+r.length+s.length+l.length+a.length,m=new ArrayBuffer(this.HEADER_LENGTH+p);let g=new DataView(m),v=0;g.setUint8(v++,this.KINDS.push),g.setUint8(v++,r.length),g.setUint8(v++,s.length),g.setUint8(v++,l.length),g.setUint8(v++,a.length),Array.from(r,_=>g.setUint8(v++,_.charCodeAt(0))),Array.from(s,_=>g.setUint8(v++,_.charCodeAt(0))),Array.from(l,_=>g.setUint8(v++,_.charCodeAt(0))),Array.from(a,_=>g.setUint8(v++,_.charCodeAt(0)));var E=new Uint8Array(m.byteLength+h.byteLength);return E.set(new Uint8Array(m),0),E.set(new Uint8Array(h),m.byteLength),E.buffer}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,s;const{join_ref:a,ref:l,topic:h}=e,p=e.payload.event,m=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0),g=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+l.length+h.length+p.length,v=new ArrayBuffer(this.HEADER_LENGTH+g);let E=new DataView(v),_=0;E.setUint8(_++,this.KINDS.userBroadcastPush),E.setUint8(_++,a.length),E.setUint8(_++,l.length),E.setUint8(_++,h.length),E.setUint8(_++,p.length),E.setUint8(_++,this.BINARY_ENCODING),Array.from(a,O=>E.setUint8(_++,O.charCodeAt(0))),Array.from(l,O=>E.setUint8(_++,O.charCodeAt(0))),Array.from(h,O=>E.setUint8(_++,O.charCodeAt(0))),Array.from(p,O=>E.setUint8(_++,O.charCodeAt(0)));var T=new Uint8Array(v.byteLength+m.byteLength);return T.set(new Uint8Array(v),0),T.set(new Uint8Array(m),v.byteLength),T.buffer}_encodeJsonUserBroadcastPush(e){var r,s;const{join_ref:a,ref:l,topic:h}=e,p=e.payload.event,m=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},v=new TextEncoder().encode(JSON.stringify(m)).buffer,E=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+l.length+h.length+p.length,_=new ArrayBuffer(this.HEADER_LENGTH+E);let T=new DataView(_),O=0;T.setUint8(O++,this.KINDS.userBroadcastPush),T.setUint8(O++,a.length),T.setUint8(O++,l.length),T.setUint8(O++,h.length),T.setUint8(O++,p.length),T.setUint8(O++,this.JSON_ENCODING),Array.from(a,B=>T.setUint8(O++,B.charCodeAt(0))),Array.from(l,B=>T.setUint8(O++,B.charCodeAt(0))),Array.from(h,B=>T.setUint8(O++,B.charCodeAt(0))),Array.from(p,B=>T.setUint8(O++,B.charCodeAt(0)));var j=new Uint8Array(_.byteLength+v.byteLength);return j.set(new Uint8Array(_),0),j.set(new Uint8Array(v),_.byteLength),j.buffer}decode(e,r){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return r(s)}if(typeof e=="string"){const s=JSON.parse(e),[a,l,h,p,m]=s;return r({join_ref:a,ref:l,topic:h,event:p,payload:m})}return r({})}_binaryDecode(e){const r=new DataView(e),s=r.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.push:return this._decodePush(e,r,a);case this.KINDS.reply:return this._decodeReply(e,r,a);case this.KINDS.broadcast:return this._decodeBroadcast(e,r,a);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,a)}}_decodePush(e,r,s){const a=r.getUint8(1),l=r.getUint8(2),h=r.getUint8(3);let p=this.HEADER_LENGTH+this.META_LENGTH-1;const m=s.decode(e.slice(p,p+a));p=p+a;const g=s.decode(e.slice(p,p+l));p=p+l;const v=s.decode(e.slice(p,p+h));p=p+h;const E=JSON.parse(s.decode(e.slice(p,e.byteLength)));return{join_ref:m,ref:null,topic:g,event:v,payload:E}}_decodeReply(e,r,s){const a=r.getUint8(1),l=r.getUint8(2),h=r.getUint8(3),p=r.getUint8(4);let m=this.HEADER_LENGTH+this.META_LENGTH;const g=s.decode(e.slice(m,m+a));m=m+a;const v=s.decode(e.slice(m,m+l));m=m+l;const E=s.decode(e.slice(m,m+h));m=m+h;const _=s.decode(e.slice(m,m+p));m=m+p;const T=JSON.parse(s.decode(e.slice(m,e.byteLength))),O={status:_,response:T};return{join_ref:g,ref:v,topic:E,event:zr.reply,payload:O}}_decodeBroadcast(e,r,s){const a=r.getUint8(1),l=r.getUint8(2);let h=this.HEADER_LENGTH+2;const p=s.decode(e.slice(h,h+a));h=h+a;const m=s.decode(e.slice(h,h+l));h=h+l;const g=JSON.parse(s.decode(e.slice(h,e.byteLength)));return{join_ref:null,ref:null,topic:p,event:m,payload:g}}_decodeUserBroadcast(e,r,s){const a=r.getUint8(1),l=r.getUint8(2),h=r.getUint8(3),p=r.getUint8(4);let m=this.HEADER_LENGTH+4;const g=s.decode(e.slice(m,m+a));m=m+a;const v=s.decode(e.slice(m,m+l));m=m+l;const E=s.decode(e.slice(m,m+h));m=m+h;const _=e.slice(m,e.byteLength),T=p===this.JSON_ENCODING?JSON.parse(s.decode(_)):_,O={type:this.BROADCAST,event:v,payload:T};return h>0&&(O.meta=JSON.parse(E)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST,payload:O}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class xp{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ct;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ct||(ct={}));const b0=(t,e,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,h)=>(l[h]=Qv(h,t,e,a),l),{}):{}},Qv=(t,e,r,s)=>{const a=e.find(p=>p.name===t),l=a==null?void 0:a.type,h=r[t];return l&&!s.includes(l)?wp(l,h):cd(h)},wp=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return rE(e,r)}switch(t){case ct.bool:return Jv(e);case ct.float4:case ct.float8:case ct.int2:case ct.int4:case ct.int8:case ct.numeric:case ct.oid:return eE(e);case ct.json:case ct.jsonb:return tE(e);case ct.timestamp:return nE(e);case ct.abstime:case ct.date:case ct.daterange:case ct.int4range:case ct.int8range:case ct.money:case ct.reltime:case ct.text:case ct.time:case ct.timestamptz:case ct.timetz:case ct.tsrange:case ct.tstzrange:return cd(e);default:return cd(e)}},cd=t=>t,Jv=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},eE=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},tE=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},rE=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let l;const h=t.slice(1,r);try{l=JSON.parse("["+h+"]")}catch{l=h?h.split(","):[]}return l.map(p=>wp(e,p))}return t},nE=t=>typeof t=="string"?t.replace(" ","T"):t,yp=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Yc{constructor(e,r,s={},a=ad){this.channel=e,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var _0;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(_0||(_0={}));class To{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:h,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=To.syncState(this.state,a,l,h),this.pendingDiffs.forEach(m=>{this.state=To.syncDiff(this.state,m,l,h)}),this.pendingDiffs=[],p()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:h,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=To.syncDiff(this.state,a,l,h),p())}),this.onJoin((a,l,h)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:h})}),this.onLeave((a,l,h)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,a){const l=this.cloneDeep(e),h=this.transformState(r),p={},m={};return this.map(l,(g,v)=>{h[g]||(m[g]=v)}),this.map(h,(g,v)=>{const E=l[g];if(E){const _=v.map(B=>B.presence_ref),T=E.map(B=>B.presence_ref),O=v.filter(B=>T.indexOf(B.presence_ref)<0),j=E.filter(B=>_.indexOf(B.presence_ref)<0);O.length>0&&(p[g]=O),j.length>0&&(m[g]=j)}else p[g]=v}),this.syncDiff(l,{joins:p,leaves:m},s,a)}static syncDiff(e,r,s,a){const{joins:l,leaves:h}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(p,m)=>{var g;const v=(g=e[p])!==null&&g!==void 0?g:[];if(e[p]=this.cloneDeep(m),v.length>0){const E=e[p].map(T=>T.presence_ref),_=v.filter(T=>E.indexOf(T.presence_ref)<0);e[p].unshift(..._)}s(p,v,m)}),this.map(h,(p,m)=>{let g=e[p];if(!g)return;const v=m.map(E=>E.presence_ref);g=g.filter(E=>v.indexOf(E.presence_ref)<0),e[p]=g,a(p,g,m),g.length===0&&delete e[p]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const a=e[s];return"metas"in a?r[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[s]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var C0;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(C0||(C0={}));var Ro;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ro||(Ro={}));var Sn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Sn||(Sn={}));class _h{constructor(e,r={config:{}},s){var a,l;if(this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=Bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Yc(this,zr.join,this.params,this.timeout),this.rejoinTimer=new xp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bt.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(zr.reply,{},(h,p)=>{this._trigger(this._replyEventName(p),h)}),this.presence=new To(this),this.broadcastEndpointURL=yp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var s,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Bt.closed){const{config:{broadcast:h,presence:p,private:m}}=this.params,g=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(T=>T.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[Ro.PRESENCE]&&this.bindings[Ro.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,E={},_={broadcast:h,presence:Object.assign(Object.assign({},p),{enabled:v}),postgres_changes:g,private:m};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(T=>e==null?void 0:e(Sn.CHANNEL_ERROR,T)),this._onClose(()=>e==null?void 0:e(Sn.CLOSED)),this.updateJoinPayload(Object.assign({config:_},E)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:T})=>{var O;if(this.socket.setAuth(),T===void 0){e==null||e(Sn.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,B=(O=j==null?void 0:j.length)!==null&&O!==void 0?O:0,P=[];for(let N=0;N<B;N++){const I=j[N],{filter:{event:L,schema:W,table:G,filter:U}}=I,k=T&&T[N];if(k&&k.event===L&&k.schema===W&&k.table===G&&k.filter===U)P.push(Object.assign(Object.assign({},I),{id:k.id}));else{this.unsubscribe(),this.state=Bt.errored,e==null||e(Sn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,e&&e(Sn.SUBSCRIBED);return}}).receive("error",T=>{this.state=Bt.errored,e==null||e(Sn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Sn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this.state===Bt.joined&&e===Ro.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,s)}async httpSend(e,r,s={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const h={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(p.status===202)return{success:!0};let m=p.statusText;try{const g=await p.json();m=g.error||g.message||m}catch{}return Promise.reject(new Error(m))}async send(e,r={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:h}=e,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=g.body)===null||a===void 0?void 0:a.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var h,p,m;const g=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(p=(h=this.params)===null||h===void 0?void 0:h.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),g.receive("ok",()=>l("ok")),g.receive("error",()=>l("error")),g.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Bt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(zr.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Yc(this,zr.leave,{},e),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bt.closed,this.bindings={}}async _fetchWithTimeout(e,r,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),h=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(l),h}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Yc(this,e,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Yv){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var a,l;const h=e.toLocaleLowerCase(),{close:p,error:m,leave:g,join:v}=zr;if(s&&[p,m,g,v].indexOf(h)>=0&&s!==this._joinRef())return;let _=this._onMessage(h,r,s);if(r&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(T=>{var O,j,B;return((O=T.filter)===null||O===void 0?void 0:O.event)==="*"||((B=(j=T.filter)===null||j===void 0?void 0:j.event)===null||B===void 0?void 0:B.toLocaleLowerCase())===h}).map(T=>T.callback(_,s)):(l=this.bindings[h])===null||l===void 0||l.filter(T=>{var O,j,B,P,N,I;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in T){const L=T.id,W=(O=T.filter)===null||O===void 0?void 0:O.event;return L&&((j=r.ids)===null||j===void 0?void 0:j.includes(L))&&(W==="*"||(W==null?void 0:W.toLocaleLowerCase())===((B=r.data)===null||B===void 0?void 0:B.type.toLocaleLowerCase()))}else{const L=(N=(P=T==null?void 0:T.filter)===null||P===void 0?void 0:P.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return L==="*"||L===((I=r==null?void 0:r.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===h}).map(T=>{if(typeof _=="object"&&"ids"in _){const O=_.data,{schema:j,table:B,commit_timestamp:P,type:N,errors:I}=O;_=Object.assign(Object.assign({},{schema:j,table:B,commit_timestamp:P,eventType:N,new:{},old:{},errors:I}),this._getPayloadRecords(O))}T.callback(_,s)})}_isClosed(){return this.state===Bt.closed}_isJoined(){return this.state===Bt.joined}_isJoining(){return this.state===Bt.joining}_isLeaving(){return this.state===Bt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const a=e.toLocaleLowerCase(),l={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&_h.isEqual(a.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(zr.close,{},e)}_onError(e){this._on(zr.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=b0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=b0(e.columns,e.old_record)),r}}const Zc=()=>{},Fa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},iE=[1e3,2e3,5e3,1e4],sE=1e4,oE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aE{constructor(e,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ad,this.transport=null,this.heartbeatIntervalMs=Fa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Zc,this.ref=0,this.reconnectTimer=null,this.vsn=E0,this.logger=Zc,this.conn=null,this.sendBuffer=[],this.serializer=new Zv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${ld.websocket}`,this.httpEndpoint=yp(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gv.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ri.connecting:return Oi.Connecting;case Ri.open:return Oi.Open;case Ri.closing:return Oi.Closing;default:return Oi.Closed}}isConnected(){return this.connectionState()===Oi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new _h(`realtime:${e}`,r,this);return this.channels.push(l),l}}push(e){const{topic:r,event:s,payload:a,ref:l}=e,h=()=>{this.encode(e,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${r} ${s} (${l})`,a),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Kv,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Fa.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:l,ref:h}=r,p=h?`(${h})`:"",m=l.status||"";this.log("receive",`${m} ${s} ${a} ${p}`.trim(),l),this.channels.filter(g=>g._isMember(s)).forEach(g=>g._trigger(a,l,h)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ri.open||this.conn.readyState===Ri.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(zr.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${s}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([oE],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:Xv};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(zr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new xp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,s,a,l,h,p,m,g,v,E,_,T;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:ad,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Fa.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(h=e==null?void 0:e.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(p=e==null?void 0:e.heartbeatCallback)!==null&&p!==void 0?p:Zc,this.vsn=(m=e==null?void 0:e.vsn)!==null&&m!==void 0?m:E0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e==null?void 0:e.reconnectAfterMs)!==null&&g!==void 0?g:O=>iE[O-1]||sE,this.vsn){case pp:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:(O,j)=>j(JSON.stringify(O)),this.decode=(E=e==null?void 0:e.decode)!==null&&E!==void 0?E:(O,j)=>j(JSON.parse(O));break;case qv:this.encode=(_=e==null?void 0:e.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(T=e==null?void 0:e.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Ch extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function yt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class lE extends Ch{constructor(e,r,s){super(e),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ud extends Ch{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Ah=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),cE=()=>Response,dd=t=>{if(Array.isArray(t))return t.map(r=>dd(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=dd(s)}),e},uE=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Qc=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},dE=(t,e,r)=>Ee(void 0,void 0,void 0,function*(){const s=yield cE();t instanceof s&&!(r!=null&&r.noResolveJson)?t.json().then(a=>{const l=t.status||500,h=(a==null?void 0:a.statusCode)||l+"";e(new lE(Qc(a),l,h))}).catch(a=>{e(new ud(Qc(a),a))}):e(new ud(Qc(t),t))}),hE=(t,e,r,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?a:(uE(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),r))};function sa(t,e,r,s,a,l){return Ee(this,void 0,void 0,function*(){return new Promise((h,p)=>{t(r,hE(e,s,a,l)).then(m=>{if(!m.ok)throw m;return s!=null&&s.noResolveJson?m:m.json()}).then(m=>h(m)).catch(m=>dE(m,p,s))})})}function Yo(t,e,r,s){return Ee(this,void 0,void 0,function*(){return sa(t,"GET",e,r,s)})}function nn(t,e,r,s,a){return Ee(this,void 0,void 0,function*(){return sa(t,"POST",e,s,a,r)})}function hd(t,e,r,s,a){return Ee(this,void 0,void 0,function*(){return sa(t,"PUT",e,s,a,r)})}function fE(t,e,r,s){return Ee(this,void 0,void 0,function*(){return sa(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Sh(t,e,r,s,a){return Ee(this,void 0,void 0,function*(){return sa(t,"DELETE",e,s,a,r)})}class gE{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return Ee(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yt(e))return{data:null,error:e};throw e}})}}var vp;class mE{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[vp]="BlobDownloadBuilder",this.promise=null}asStream(){return new gE(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ee(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yt(e))return{data:null,error:e};throw e}})}}vp=Symbol.toStringTag;const pE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},A0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class xE{constructor(e,r={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=s,this.fetch=Ah(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,s,a){return Ee(this,void 0,void 0,function*(){try{let l;const h=Object.assign(Object.assign({},A0),a);let p=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",h.cacheControl),m&&l.append("metadata",this.encodeMetadata(m)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",h.cacheControl),m&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(m))):(l=s,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType,m&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!h.duplex&&(h.duplex="half")),a!=null&&a.headers&&(p=Object.assign(Object.assign({},p),a.headers));const g=this._removeEmptyFolders(r),v=this._getFinalPath(g),E=yield(e=="PUT"?hd:nn)(this.fetch,`${this.url}/object/${v}`,l,Object.assign({headers:p},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{data:{path:g,id:E.Id,fullPath:E.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(yt(l))return{data:null,error:l};throw l}})}upload(e,r,s){return Ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,a){return Ee(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),h=this._getFinalPath(l),p=new URL(this.url+`/object/upload/sign/${h}`);p.searchParams.set("token",r);try{let m;const g=Object.assign({upsert:A0.upsert},a),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&s instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",s)):typeof FormData<"u"&&s instanceof FormData?(m=s,m.append("cacheControl",g.cacheControl)):(m=s,v["cache-control"]=`max-age=${g.cacheControl}`,v["content-type"]=g.contentType);const E=yield hd(this.fetch,p.toString(),m,{headers:v});return{data:{path:l,fullPath:E.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(yt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(e,r){return Ee(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const l=yield nn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),h=new URL(this.url+l.url),p=h.searchParams.get("token");if(!p)throw new Ch("No token returned by API");return{data:{signedUrl:h.toString(),path:e,token:p},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s))return{data:null,error:s};throw s}})}update(e,r,s){return Ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return Ee(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}copy(e,r,s){return Ee(this,void 0,void 0,function*(){try{return{data:{path:(yield nn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,s){return Ee(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield nn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const h=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${h}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,s){return Ee(this,void 0,void 0,function*(){try{const a=yield nn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}download(e,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),h=l?`?${l}`:"",p=this._getFinalPath(e),m=()=>Yo(this.fetch,`${this.url}/${a}/${p}${h}`,{headers:this.headers,noResolveJson:!0});return new mE(m,this.shouldThrowOnError)}info(e){return Ee(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield Yo(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:dd(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s))return{data:null,error:s};throw s}})}exists(e){return Ee(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield fE(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s)&&s instanceof ud){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),a=[],l=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";l!==""&&a.push(l);const p=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",m=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});m!==""&&a.push(m);let g=a.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${s}${g}`)}}}remove(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield Sh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}list(e,r,s){return Ee(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},pE),r),{prefix:e||""});return{data:yield nn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}listV2(e,r){return Ee(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield nn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Ep="2.81.1",bp={"X-Client-Info":`storage-js/${Ep}`};class wE{constructor(e,r={},s,a){this.shouldThrowOnError=!1;const l=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bp),r),this.fetch=Ah(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Ee(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield Yo(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}getBucket(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield Yo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}createBucket(e){return Ee(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield nn(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}updateBucket(e,r){return Ee(this,void 0,void 0,function*(){try{return{data:yield hd(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield Sh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class yE{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bp),r),this.fetch=Ah(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}listBuckets(e){return Ee(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const s=r.toString(),a=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Yo(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield Sh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}}const Ih={"X-Client-Info":`storage-js/${Ep}`,"Content-Type":"application/json"};class _p extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Tr(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Jc extends _p{constructor(e,r,s){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vE extends _p{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var S0;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(S0||(S0={}));const Nh=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),EE=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},I0=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),bE=(t,e,r)=>Ee(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const a=t.status||500,l=t;if(typeof l.json=="function")l.json().then(h=>{const p=(h==null?void 0:h.statusCode)||(h==null?void 0:h.code)||a+"";e(new Jc(I0(h),a,p))}).catch(()=>{const h=a+"",p=l.statusText||`HTTP ${a} error`;e(new Jc(p,a,h))});else{const h=a+"",p=l.statusText||`HTTP ${a} error`;e(new Jc(p,a,h))}}else e(new vE(I0(t),t))}),_E=(t,e,r,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return s?(EE(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),r)):a};function CE(t,e,r,s,a,l){return Ee(this,void 0,void 0,function*(){return new Promise((h,p)=>{t(r,_E(e,s,a,l)).then(m=>{if(!m.ok)throw m;if(s!=null&&s.noResolveJson)return m;const g=m.headers.get("content-type");return!g||!g.includes("application/json")?{}:m.json()}).then(m=>h(m)).catch(m=>bE(m,p,s))})})}function Rr(t,e,r,s,a){return Ee(this,void 0,void 0,function*(){return CE(t,"POST",e,s,a,r)})}class AE{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ih),r),this.fetch=Nh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Ee(this,void 0,void 0,function*(){try{return{data:(yield Rr(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}getIndex(e,r){return Ee(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Tr(s))return{data:null,error:s};throw s}})}listIndexes(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return Ee(this,void 0,void 0,function*(){try{return{data:(yield Rr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Tr(s))return{data:null,error:s};throw s}})}}class SE{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ih),r),this.fetch=Nh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Ee(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Rr(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}getVectors(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}listVectors(e){return Ee(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Rr(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}queryVectors(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}deleteVectors(e){return Ee(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Rr(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}}class IE{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ih),r),this.fetch=Nh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Ee(this,void 0,void 0,function*(){try{return{data:(yield Rr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}getBucket(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}listBuckets(){return Ee(this,arguments,void 0,function*(e={}){try{return{data:yield Rr(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Ee(this,void 0,void 0,function*(){try{return{data:(yield Rr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}})}}class NE extends IE{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new TE(this.url,this.headers,e,this.fetch)}}class TE extends AE{constructor(e,r,s,a){super(e,r,a),this.vectorBucketName=s}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ee(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ee(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ee(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ee(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new RE(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class RE extends SE{constructor(e,r,s,a,l){super(e,r,l),this.vectorBucketName=s,this.indexName=a}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ee(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ee(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ee(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ee(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ee(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class OE extends wE{constructor(e,r={},s,a){super(e,r,s,a)}from(e){return new xE(this.url,this.headers,e,this.fetch)}get vectors(){return new NE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new yE(this.url+"/iceberg",this.headers,this.fetch)}}const kE="2.81.1";let wo="";typeof Deno<"u"?wo="deno":typeof document<"u"?wo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wo="react-native":wo="node";const PE={"X-Client-Info":`supabase-js-${wo}/${kE}`},DE={headers:PE},ME={schema:"public"},LE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jE={},BE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),FE=()=>Headers,UE=(t,e,r)=>{const s=BE(r),a=FE();return async(l,h)=>{var p;const m=(p=await e())!==null&&p!==void 0?p:t;let g=new a(h==null?void 0:h.headers);return g.has("apikey")||g.set("apikey",t),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),s(l,Object.assign(Object.assign({},h),{headers:g}))}};function zE(t){return t.endsWith("/")?t:t+"/"}function VE(t,e){var r,s;const{db:a,auth:l,realtime:h,global:p}=t,{db:m,auth:g,realtime:v,global:E}=e,_={db:Object.assign(Object.assign({},m),a),auth:Object.assign(Object.assign({},g),l),realtime:Object.assign(Object.assign({},v),h),storage:{},global:Object.assign(Object.assign(Object.assign({},E),p),{headers:Object.assign(Object.assign({},(r=E==null?void 0:E.headers)!==null&&r!==void 0?r:{}),(s=p==null?void 0:p.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?_.accessToken=t.accessToken:delete _.accessToken,_}function WE(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(zE(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Cp="2.81.1",us=30*1e3,fd=3,eu=fd*us,HE="http://localhost:9999",GE="supabase.auth.token",$E={"X-Client-Info":`gotrue-js/${Cp}`},gd="X-Supabase-Api-Version",Ap={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},XE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,qE=10*60*1e3;class Zo extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function Ae(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class KE extends Zo{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function YE(t){return Ae(t)&&t.name==="AuthApiError"}class ki extends Zo{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class wi extends Zo{constructor(e,r,s,a){super(e,s,a),this.name=r,this.status=s}}class Jr extends wi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ZE(t){return Ae(t)&&t.name==="AuthSessionMissingError"}class is extends wi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ua extends wi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class za extends wi{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function QE(t){return Ae(t)&&t.name==="AuthImplicitGrantRedirectError"}class N0 extends wi{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class md extends wi{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function tu(t){return Ae(t)&&t.name==="AuthRetryableFetchError"}class T0 extends wi{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class pd extends wi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Rl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),R0=` 	
\r=`.split(""),JE=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<R0.length;e+=1)t[R0[e].charCodeAt(0)]=-2;for(let e=0;e<Rl.length;e+=1)t[Rl[e].charCodeAt(0)]=e;return t})();function O0(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Rl[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Rl[s]),e.queuedBits-=6}}function Sp(t,e,r){const s=JE[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function k0(t){const e=[],r=h=>{e.push(String.fromCodePoint(h))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=h=>{r3(h,s,r)};for(let h=0;h<t.length;h+=1)Sp(t.charCodeAt(h),a,l);return e.join("")}function e3(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function t3(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}e3(s,e)}}function r3(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Os(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)Sp(t.charCodeAt(a),r,s);return new Uint8Array(e)}function n3(t){const e=[];return t3(t,r=>e.push(r)),new Uint8Array(e)}function Li(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>O0(a,r,s)),O0(null,r,s),e.join("")}function i3(t){return Math.round(Date.now()/1e3)+t}function s3(){return Symbol("auth-callback")}const Qt=()=>typeof window<"u"&&typeof document<"u",Ai={tested:!1,writable:!1},Ip=()=>{if(!Qt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ai.tested)return Ai.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ai.tested=!0,Ai.writable=!0}catch{Ai.tested=!0,Ai.writable=!1}return Ai.writable};function o3(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return r.searchParams.forEach((s,a)=>{e[a]=s}),e}const Np=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),a3=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ds=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Si=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},$n=async(t,e)=>{await t.removeItem(e)};class nc{constructor(){this.promise=new nc.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}nc.promiseConstructor=Promise;function ru(t){const e=t.split(".");if(e.length!==3)throw new pd("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!XE.test(e[s]))throw new pd("JWT not in base64url format");return{header:JSON.parse(k0(e[0])),payload:JSON.parse(k0(e[1])),signature:Os(e[2]),raw:{header:e[0],payload:e[1]}}}async function l3(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function c3(t,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const h=await t(l);if(!e(l,null,h)){s(h);return}}catch(h){if(!e(l,h)){a(h);return}}})()})}function u3(t){return("0"+t.toString(16)).substr(-2)}function d3(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let l=0;l<56;l++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,u3).join("")}async function h3(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function f3(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await h3(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ss(t,e,r=!1){const s=d3();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await ds(t,`${e}-code-verifier`,a);const l=await f3(s);return[l,s===l?"plain":"s256"]}const g3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function m3(t){const e=t.headers.get(gd);if(!e||!e.match(g3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function p3(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function x3(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const w3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function os(t){if(!w3.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function nu(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function y3(t,e){return new Proxy(t,{get:(r,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,s,a)}})}function P0(t){return JSON.parse(JSON.stringify(t))}const Ti=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),v3=[502,503,504];async function D0(t){var e;if(!a3(t))throw new md(Ti(t),0);if(v3.includes(t.status))throw new md(Ti(t),t.status);let r;try{r=await t.json()}catch(l){throw new ki(Ti(l),l)}let s;const a=m3(t);if(a&&a.getTime()>=Ap["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new T0(Ti(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Jr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,h)=>l&&typeof h=="string",!0))throw new T0(Ti(r),t.status,r.weak_password.reasons);throw new KE(Ti(r),t.status||500,s)}const E3=(t,e,r,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function ke(t,e,r,s){var a;const l=Object.assign({},s==null?void 0:s.headers);l[gd]||(l[gd]=Ap["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const h=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(h.redirect_to=s.redirectTo);const p=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=await b3(t,e,r+p,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(m):{data:Object.assign({},m),error:null}}async function b3(t,e,r,s,a,l){const h=E3(e,s,a,l);let p;try{p=await t(r,Object.assign({},h))}catch(m){throw console.error(m),new md(Ti(m),0)}if(p.ok||await D0(p),s!=null&&s.noResolveJson)return p;try{return await p.json()}catch(m){await D0(m)}}function en(t){var e;let r=null;A3(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=i3(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function M0(t){const e=en(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Qn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function _3(t){return{data:t,error:null}}function C3(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:l}=t,h=$s(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:l},m=Object.assign({},h);return{data:{properties:p,user:m},error:null}}function L0(t){return t}function A3(t){return t.access_token&&t.refresh_token&&t.expires_in}const iu=["global","local","others"];class S3{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=Np(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=iu[0]){if(iu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${iu.join(", ")}`);try{return await ke(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ae(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await ke(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Qn})}catch(s){if(Ae(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=$s(e,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await ke(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:C3,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ae(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ke(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Qn})}catch(r){if(Ae(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,a,l,h,p,m;try{const g={nextPage:null,lastPage:0,total:0},v=await ke(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:L0});if(v.error)throw v.error;const E=await v.json(),_=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,T=(m=(p=v.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return T.length>0&&(T.forEach(O=>{const j=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),B=JSON.parse(O.split(";")[1].split("=")[1]);g[`${B}Page`]=j}),g.total=parseInt(_)),{data:Object.assign(Object.assign({},E),g),error:null}}catch(g){if(Ae(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){os(e);try{return await ke(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Qn})}catch(r){if(Ae(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){os(e);try{return await ke(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Qn})}catch(s){if(Ae(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){os(e);try{return await ke(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Qn})}catch(s){if(Ae(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){os(e.userId);try{const{data:r,error:s}=await ke(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(Ae(r))return{data:null,error:r};throw r}}async _deleteFactor(e){os(e.userId),os(e.id);try{return{data:await ke(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,s,a,l,h,p,m;try{const g={nextPage:null,lastPage:0,total:0},v=await ke(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:L0});if(v.error)throw v.error;const E=await v.json(),_=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,T=(m=(p=v.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return T.length>0&&(T.forEach(O=>{const j=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),B=JSON.parse(O.split(";")[1].split("=")[1]);g[`${B}Page`]=j}),g.total=parseInt(_)),{data:Object.assign(Object.assign({},E),g),error:null}}catch(g){if(Ae(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(e){try{return await ke(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ae(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await ke(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ae(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await ke(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ae(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await ke(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await ke(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ae(r))return{data:null,error:r};throw r}}}function j0(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const as={debug:!!(globalThis&&Ip()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Tp extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class I3 extends Tp{}async function N3(t,e,r){as.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),as.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){as.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{as.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw as.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new I3(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(as.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function T3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Rp(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function R3(t){return parseInt(t,16)}function O3(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function k3(t){var e;const{chainId:r,domain:s,expirationTime:a,issuedAt:l=new Date,nonce:h,notBefore:p,requestId:m,resources:g,scheme:v,uri:E,version:_}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const T=Rp(t.address),O=v?`${v}://${s}`:s,j=t.statement?`${t.statement}
`:"",B=`${O} wants you to sign in with your Ethereum account:
${T}

${j}`;let P=`URI: ${E}
Version: ${_}
Chain ID: ${r}${h?`
Nonce: ${h}`:""}
Issued At: ${l.toISOString()}`;if(a&&(P+=`
Expiration Time: ${a.toISOString()}`),p&&(P+=`
Not Before: ${p.toISOString()}`),m&&(P+=`
Request ID: ${m}`),g){let N=`
Resources:`;for(const I of g){if(!I||typeof I!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${I}`);N+=`
- ${I}`}P+=N}return`${B}
${P}`}class kt extends Error{constructor({message:e,code:r,cause:s,name:a}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=a??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=r}}class Ol extends kt{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function P3({error:t,options:e}){var r,s,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new kt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=l.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new kt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new kt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new kt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new kt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new kt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new kt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new kt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const h=window.location.hostname;if(Op(h)){if(l.rp.id!==h)return new kt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new kt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new kt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new kt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new kt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function D3({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new kt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new kt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(Op(s)){if(r.rpId!==s)return new kt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new kt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new kt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new kt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class M3{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const L3=new M3;function j3(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:s}=t,a=$s(t,["challenge","user","excludeCredentials"]),l=Os(e).buffer,h=Object.assign(Object.assign({},r),{id:Os(r.id).buffer}),p=Object.assign(Object.assign({},a),{challenge:l,user:h});if(s&&s.length>0){p.excludeCredentials=new Array(s.length);for(let m=0;m<s.length;m++){const g=s[m];p.excludeCredentials[m]=Object.assign(Object.assign({},g),{id:Os(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return p}function B3(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,s=$s(t,["challenge","allowCredentials"]),a=Os(e).buffer,l=Object.assign(Object.assign({},s),{challenge:a});if(r&&r.length>0){l.allowCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const p=r[h];l.allowCredentials[h]=Object.assign(Object.assign({},p),{id:Os(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return l}function F3(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Li(new Uint8Array(t.response.attestationObject)),clientDataJSON:Li(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function U3(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,s=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Li(new Uint8Array(a.authenticatorData)),clientDataJSON:Li(new Uint8Array(a.clientDataJSON)),signature:Li(new Uint8Array(a.signature)),userHandle:a.userHandle?Li(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Op(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function B0(){var t,e;return!!(Qt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function z3(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ol("Browser returned unexpected credential type",e)}:{data:null,error:new Ol("Empty credential response",e)}}catch(e){return{data:null,error:P3({error:e,options:t})}}}async function V3(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ol("Browser returned unexpected credential type",e)}:{data:null,error:new Ol("Empty credential response",e)}}catch(e){return{data:null,error:D3({error:e,options:t})}}}const W3={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},H3={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function kl(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of t)if(a)for(const l in a){const h=a[l];if(h!==void 0)if(Array.isArray(h))s[l]=h;else if(r(h))s[l]=h;else if(e(h)){const p=s[l];e(p)?s[l]=kl(p,h):s[l]=kl(h)}else s[l]=h}return s}function G3(t,e){return kl(W3,t,e||{})}function $3(t,e){return kl(H3,t,e||{})}class X3{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:s,signal:a},l){try{const{data:h,error:p}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!h)return{data:null,error:p};const m=a??L3.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:g}=h.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${s}`),g.displayName||(g.displayName=g.name)}switch(h.webauthn.type){case"create":{const g=G3(h.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:v,error:E}=await z3({publicKey:g,signal:m});return v?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:E}}case"request":{const g=$3(h.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:v,error:E}=await V3(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:g,signal:m}));return v?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:v}},error:null}:{data:null,error:E}}}}catch(h){return Ae(h)?{data:null,error:h}:{data:null,error:new ki("Unexpected error in challenge",h)}}}async _verify({challengeId:e,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!r)return{data:null,error:new Zo("rpId is required for WebAuthn authentication")};try{if(!B0())return{data:null,error:new ki("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:s},signal:a},{request:l});if(!h)return{data:null,error:p};const{webauthn:m}=h;return this._verify({factorId:e,challengeId:h.challengeId,webauthn:{type:m.type,rpId:r,rpOrigins:s,credential_response:m.credential_response}})}catch(h){return Ae(h)?{data:null,error:h}:{data:null,error:new ki("Unexpected error in authenticate",h)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!r)return{data:null,error:new Zo("rpId is required for WebAuthn registration")};try{if(!B0())return{data:null,error:new ki("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this._enroll({friendlyName:e});if(!h)return await this.client.mfa.listFactors().then(v=>{var E;return(E=v.data)===null||E===void 0?void 0:E.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===e&&_.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:p};const{data:m,error:g}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:a},{create:l});return m?this._verify({factorId:h.id,challengeId:m.challengeId,webauthn:{rpId:r,rpOrigins:s,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:g}}catch(h){return Ae(h)?{data:null,error:h}:{data:null,error:new ki("Unexpected error in register",h)}}}}T3();const q3={url:HE,storageKey:GE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$E,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function F0(t,e,r){return await r()}const ls={};class Qo{get jwks(){var e,r;return(r=(e=ls[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){ls[this.storageKey]=Object.assign(Object.assign({},ls[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=ls[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ls[this.storageKey]=Object.assign(Object.assign({},ls[this.storageKey]),{cachedAt:e})}constructor(e){var r,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},q3),e);if(this.storageKey=l.storageKey,this.instanceID=(r=Qo.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Qo.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Qt()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new S3({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Np(l.fetch),this.lock=l.lock||F0,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:Qt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=N3:this.lock=F0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new X3(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Ip()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=j0(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=j0(this.memoryStorage)),Qt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Cp}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},s="none";if(Qt()&&(r=o3(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),Qt()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(r,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),QE(l)){const m=(e=l.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:h,redirectType:p}=a;return this._debug("#_initialize()","detected session in URL",h,"redirect type",p),await this._saveSession(h),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ae(r)?this._returnResult({error:r}):this._returnResult({error:new ki("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,a;try{const l=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:en}),{data:h,error:p}=l;if(p||!h)return this._returnResult({data:{user:null,session:null},error:p});const m=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(l){if(Ae(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var r,s,a;try{let l;if("email"in e){const{email:v,password:E,options:_}=e;let T=null,O=null;this.flowType==="pkce"&&([T,O]=await ss(this.storage,this.storageKey)),l=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:v,password:E,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:T,code_challenge_method:O},xform:en})}else if("phone"in e){const{phone:v,password:E,options:_}=e;l=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:E,data:(s=_==null?void 0:_.data)!==null&&s!==void 0?s:{},channel:(a=_==null?void 0:_.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:en})}else throw new Ua("You must provide either an email or phone number and a password");const{data:h,error:p}=l;if(p||!h)return this._returnResult({data:{user:null,session:null},error:p});const m=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(l){if(Ae(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let r;if("email"in e){const{email:l,password:h,options:p}=e;r=await ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:h,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:M0})}else if("phone"in e){const{phone:l,password:h,options:p}=e;r=await ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:h,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:M0})}else throw new Ua("You must provide either an email or phone number and a password");const{data:s,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const l=new is;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(Ae(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,s,a,l,h,p,m,g,v,E,_;let T,O;if("message"in e)T=e.message,O=e.signature;else{const{chain:j,wallet:B,statement:P,options:N}=e;let I;if(Qt())if(typeof B=="object")I=B;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")I=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof B!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=B}const L=new URL((r=N==null?void 0:N.url)!==null&&r!==void 0?r:window.location.href),W=await I.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!W||W.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const G=Rp(W[0]);let U=(s=N==null?void 0:N.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!U){const A=await I.request({method:"eth_chainId"});U=R3(A)}const k={domain:L.host,address:G,statement:P,uri:L.href,version:"1",chainId:U,nonce:(a=N==null?void 0:N.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(h=(l=N==null?void 0:N.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(p=N==null?void 0:N.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(m=N==null?void 0:N.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(g=N==null?void 0:N.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(v=N==null?void 0:N.signInWithEthereum)===null||v===void 0?void 0:v.resources};T=k3(k),O=await I.request({method:"personal_sign",params:[O3(T),G]})}try{const{data:j,error:B}=await ke(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:O},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:en});if(B)throw B;if(!j||!j.session||!j.user){const P=new is;return this._returnResult({data:{user:null,session:null},error:P})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:B})}catch(j){if(Ae(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async signInWithSolana(e){var r,s,a,l,h,p,m,g,v,E,_,T;let O,j;if("message"in e)O=e.message,j=e.signature;else{const{chain:B,wallet:P,statement:N,options:I}=e;let L;if(Qt())if(typeof P=="object")L=P;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))L=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!(I!=null&&I.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=P}const W=new URL((r=I==null?void 0:I.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in L&&L.signIn){const G=await L.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I==null?void 0:I.signInWithSolana),{version:"1",domain:W.host,uri:W.href}),N?{statement:N}:null));let U;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")U=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)U=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)O=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),j=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in L)||typeof L.signMessage!="function"||!("publicKey"in L)||typeof L!="object"||!L.publicKey||!("toBase58"in L.publicKey)||typeof L.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");O=[`${W.host} wants you to sign in with your Solana account:`,L.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${W.href}`,`Issued At: ${(a=(s=I==null?void 0:I.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=I==null?void 0:I.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((h=I==null?void 0:I.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((p=I==null?void 0:I.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((m=I==null?void 0:I.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((g=I==null?void 0:I.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((E=(v=I==null?void 0:I.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||E===void 0)&&E.length?["Resources",...I.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const G=await L.signMessage(new TextEncoder().encode(O),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=G}}try{const{data:B,error:P}=await ke(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:O,signature:Li(j)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:en});if(P)throw P;if(!B||!B.session||!B.user){const N=new is;return this._returnResult({data:{user:null,session:null},error:N})}return B.session&&(await this._saveSession(B.session),await this._notifyAllSubscribers("SIGNED_IN",B.session)),this._returnResult({data:Object.assign({},B),error:P})}catch(B){if(Ae(B))return this._returnResult({data:{user:null,session:null},error:B});throw B}}async _exchangeCodeForSession(e){const r=await Si(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{const{data:l,error:h}=await ke(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:en});if(await $n(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!l||!l.session||!l.user){const p=new is;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:h})}catch(l){if(Ae(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:r,provider:s,token:a,access_token:l,nonce:h}=e,p=await ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:h,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:en}),{data:m,error:g}=p;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m||!m.session||!m.user){const v=new is;return this._returnResult({data:{user:null,session:null},error:v})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:g})}catch(r){if(Ae(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,s,a,l,h;try{if("email"in e){const{email:p,options:m}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await ss(this.storage,this.storageKey));const{error:E}=await ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},create_user:(s=m==null?void 0:m.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:v},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}if("phone"in e){const{phone:p,options:m}=e,{data:g,error:v}=await ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(a=m==null?void 0:m.data)!==null&&a!==void 0?a:{},create_user:(l=m==null?void 0:m.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(h=m==null?void 0:m.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:v})}throw new Ua("You must provide either an email or phone number.")}catch(p){if(Ae(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(e){var r,s;try{let a,l;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:h,error:p}=await ke(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:en});if(p)throw p;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,g=h.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(a){if(Ae(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var r,s,a,l,h;try{let p=null,m=null;this.flowType==="pkce"&&([p,m]=await ss(this.storage,this.storageKey));const g=await ke(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:m}),headers:this.headers,xform:_3});return!((l=g.data)===null||l===void 0)&&l.url&&Qt()&&!(!((h=e.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(p){if(Ae(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new Jr;const{error:a}=await ke(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(Ae(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:h}=await ke(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:h,error:p}=await ke(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p})}throw new Ua("You must provide either an email or phone number and a type")}catch(r){if(Ae(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Si(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<eu:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const h=await Si(this.userStorage,this.storageKey+"-user");h!=null&&h.user?e.user=h.user:e.user=nu()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};e.user=y3(e.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Qn}):await this._useSession(async r=>{var s,a,l;const{data:h,error:p}=r;if(p)throw p;return!(!((s=h.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Jr}:await ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=h.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:Qn})})}catch(r){if(Ae(r))return ZE(r)&&(await this._removeSession(),await $n(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new Jr;const h=a.session;let p=null,m=null;this.flowType==="pkce"&&e.email!=null&&([p,m]=await ss(this.storage,this.storageKey));const{data:g,error:v}=await ke(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:p,code_challenge_method:m}),jwt:h.access_token,xform:Qn});if(v)throw v;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(s){if(Ae(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Jr;const r=Date.now()/1e3;let s=r,a=!0,l=null;const{payload:h}=ru(e.access_token);if(h.exp&&(s=h.exp,a=s<=r),a){const{data:p,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p)return{data:{user:null,session:null},error:null};l=p}else{const{data:p,error:m}=await this._getUser(e.access_token);if(m)throw m;l={access_token:e.access_token,refresh_token:e.refresh_token,user:p.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(r){if(Ae(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:h,error:p}=r;if(p)throw p;e=(s=h.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Jr;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Ae(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Qt())throw new za("No browser detected.");if(e.error||e.error_description||e.error_code)throw new za(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new N0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new za("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new N0("No code detected.");const{data:N,error:I}=await this._exchangeCodeForSession(e.code);if(I)throw I;const L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:h,expires_in:p,expires_at:m,token_type:g}=e;if(!l||!p||!h||!g)throw new za("No session defined in URL");const v=Math.round(Date.now()/1e3),E=parseInt(p);let _=v+E;m&&(_=parseInt(m));const T=_-v;T*1e3<=us&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${E}s`);const O=_-E;v-O>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",O,_,v):v-O<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",O,_,v);const{data:j,error:B}=await this._getUser(l);if(B)throw B;const P={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:E,expires_at:_,refresh_token:h,token_type:g,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:P,redirectType:e.type},error:null})}catch(s){if(Ae(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Si(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:l}=r;if(l)return this._returnResult({error:l});const h=(s=a.session)===null||s===void 0?void 0:s.access_token;if(h){const{error:p}=await this.admin.signOut(h,e);if(p&&!(YE(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return e!=="others"&&(await this._removeSession(),await $n(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=s3(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,a;try{const{data:{session:l},error:h}=r;if(h)throw h;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await ss(this.storage,this.storageKey,!0));try{return await ke(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(Ae(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:s,error:a}=await this._useSession(async l=>{var h,p,m,g,v;const{data:E,error:_}=l;if(_)throw _;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(h=e.options)===null||h===void 0?void 0:h.redirectTo,scopes:(p=e.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await ke(this.fetch,"GET",T,{headers:this.headers,jwt:(v=(g=E.session)===null||g===void 0?void 0:g.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return Qt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(Ae(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var s;try{const{error:a,data:{session:l}}=r;if(a)throw a;const{options:h,provider:p,token:m,access_token:g,nonce:v}=e,E=await ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:p,id_token:m,access_token:g,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:en}),{data:_,error:T}=E;return T?this._returnResult({data:{user:null,session:null},error:T}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new is}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:T}))}catch(a){if(Ae(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,a;const{data:l,error:h}=r;if(h)throw h;return await ke(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await c3(async a=>(a>0&&await l3(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await ke(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:en})),(a,l)=>{const h=200*Math.pow(2,a);return l&&tu(l)&&Date.now()+h-s<us})}catch(s){if(this._debug(r,"error",s),Ae(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),Qt()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Si(this.storage,this.storageKey);if(a&&this.userStorage){let h=await Si(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:a.user},await ds(this.userStorage,this.storageKey+"-user",h)),a.user=(e=h==null?void 0:h.user)!==null&&e!==void 0?e:nu()}else if(a&&!a.user&&!a.user){const h=await Si(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(a.user=h.user,await $n(this.storage,this.storageKey+"-user"),await ds(this.storage,this.storageKey,a)):a.user=nu()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<eu;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${eu}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:h}=await this._callRefreshToken(a.refresh_token);h&&(console.error(h),tu(h)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:p}=await this._getUser(a.access_token);!p&&(h!=null&&h.user)?(a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(s,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new Jr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new nc;const{data:l,error:h}=await this._refreshAccessToken(e);if(h)throw h;if(!l.session)throw new Jr;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const p={data:l.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(l){if(this._debug(a,"error",l),Ae(l)){const h={data:null,error:l};return tu(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(h),h}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const l=[],h=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(e,r)}catch(m){l.push(m)}});if(await Promise.all(h),l.length>0){for(let p=0;p<l.length;p+=1)console.error(l[p]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await ds(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const l=P0(a);await ds(this.storage,this.storageKey,l)}else{const a=P0(r);await ds(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await $n(this.storage,this.storageKey),await $n(this.storage,this.storageKey+"-code-verifier"),await $n(this.storage,this.storageKey+"-user"),this.userStorage&&await $n(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),us);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/us);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${us}ms, refresh threshold is ${fd} ticks`),a<=fd&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Tp)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,h]=await ss(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(h)}`});a.push(p.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:a,error:l}=r;return l?this._returnResult({data:null,error:l}):await ke(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,a;const{data:l,error:h}=r;if(h)return this._returnResult({data:null,error:h});const p=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:m,error:g}=await ke(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(e.factorType==="totp"&&m.type==="totp"&&(!((a=m==null?void 0:m.totp)===null||a===void 0)&&a.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:l}=r;if(l)return this._returnResult({data:null,error:l});const h=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?F3(e.webauthn.credential_response):U3(e.webauthn.credential_response)})}:{code:e.code}),{data:p,error:m}=await ke(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:h,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:m}))})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:l}=r;if(l)return this._returnResult({data:null,error:l});const h=await ke(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(h.error)return h;const{data:p}=h;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:j3(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:B3(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=ru(s.access_token);let h=null;l.aal&&(h=l.aal);let p=h;((r=(e=s.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(p="aal2");const g=l.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?await ke(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Jr})})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Jr});const h=await ke(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&Qt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(s){if(Ae(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Jr});const h=await ke(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&Qt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(s){if(Ae(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(p=>p.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(p=>p.kid===e),s&&this.jwks_cached_at+qE>a)return s;const{data:l,error:h}=await ke(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,s=l.keys.find(p=>p.kid===e),!s)?null:s}async getClaims(e,r={}){try{let s=e;if(!s){const{data:T,error:O}=await this.getSession();if(O||!T.session)return this._returnResult({data:null,error:O});s=T.session.access_token}const{header:a,payload:l,signature:h,raw:{header:p,payload:m}}=ru(s);r!=null&&r.allowExpired||p3(l.exp);const g=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!g){const{error:T}=await this.getUser(s);if(T)throw T;return{data:{claims:l,header:a,signature:h},error:null}}const v=x3(a.alg),E=await crypto.subtle.importKey("jwk",g,v,!0,["verify"]);if(!await crypto.subtle.verify(v,E,h,n3(`${p}.${m}`)))throw new pd("Invalid JWT signature");return{data:{claims:l,header:a,signature:h},error:null}}catch(s){if(Ae(s))return this._returnResult({data:null,error:s});throw s}}}Qo.nextInstanceID={};const K3=Qo;class Y3 extends K3{constructor(e){super(e)}}class Z3{constructor(e,r,s){var a,l,h;this.supabaseUrl=e,this.supabaseKey=r;const p=WE(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const m=`sb-${p.hostname.split(".")[0]}-auth-token`,g={db:ME,realtime:jE,auth:Object.assign(Object.assign({},LE),{storageKey:m}),global:DE},v=VE(s??{},g);this.storageKey=(a=v.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=v.global.headers)!==null&&l!==void 0?l:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(E,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=v.auth)!==null&&h!==void 0?h:{},this.headers,v.global.fetch),this.fetch=UE(r,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&this.accessToken().then(E=>this.realtime.setAuth(E)).catch(E=>console.warn("Failed to set initial Realtime auth token:",E)),this.rest=new Hv(new URL("rest/v1",p).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new OE(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new zv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:l,storageKey:h,flowType:p,lock:m,debug:g,throwOnError:v},E,_){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Y3({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),E),storageKey:h,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:l,flowType:p,lock:m,debug:g,throwOnError:v,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(O=>O.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new aE(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Q3=(t,e,r)=>new Z3(t,e,r);function J3(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}J3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const eb="https://hricrwfhshdmchbpfpqh.supabase.co",tb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhyaWNyd2Zoc2hkbWNoYnBmcHFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwMzkzMzcsImV4cCI6MjA3ODYxNTMzN30.kCdMMdoXayK3HwoGPMHkj1qLUWTu-21U5n2vVpPnAfo",Le=Q3(eb,tb);function rb(){const t=Gs(),[e,r]=H.useState(!1),[s,a]=H.useState(!1),[l,h]=H.useState(null),[p,m]=H.useState(null),[g,v]=H.useState({nome:"",data:"",hora:"",local:"",imagem_url:""}),E=B=>{v({...g,[B.target.name]:B.target.value})},_=B=>{const P=B.target.files[0];if(!P)return;if(!P.type.startsWith("image/")){ge.error("Por favor, selecione um ficheiro de imagem vlido");return}if(P.size>5*1024*1024){ge.error("A imagem deve ter no mximo 5MB");return}m(P);const N=new FileReader;N.onloadend=()=>{h(N.result)},N.readAsDataURL(P)},T=()=>{m(null),h(null),v({...g,imagem_url:""})},O=async B=>{if(!p)return null;a(!0);try{const P=p.name.split(".").pop(),I=`${`${B}-${Date.now()}.${P}`}`,{error:L}=await Le.storage.from("event-images").upload(I,p,{cacheControl:"3600",upsert:!1});if(L)throw L;const{data:{publicUrl:W}}=Le.storage.from("event-images").getPublicUrl(I);return W}catch(P){return console.error("Erro ao fazer upload da imagem:",P),ge.error("Erro ao fazer upload da imagem"),null}finally{a(!1)}},j=async B=>{if(B.preventDefault(),!g.nome||!g.data||!g.hora||!g.local){ge.error("Por favor, preencha todos os campos obrigatrios");return}r(!0);try{const{data:P,error:N}=await Le.from("eventos").insert([{nome:g.nome,data:g.data,hora:g.hora,local:g.local,imagem_url:null}]).select().single();if(N)throw N;if(p){const I=await O(P.id);if(I){const{error:L}=await Le.from("eventos").update({imagem_url:I}).eq("id",P.id);L&&(console.error("Erro ao atualizar URL da imagem:",L),ge.error("Evento criado, mas falhou o upload da imagem"))}}localStorage.setItem("currentEventId",P.id),ge.success("Evento criado com sucesso!"),t("/upload")}catch(P){console.error("Erro ao criar evento:",P),ge.error("Erro ao criar evento: "+P.message)}finally{r(!1)}};return y.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[y.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Criar Novo Evento"}),y.jsxs("form",{onSubmit:j,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagem do Evento (opcional)"}),l?y.jsxs("div",{className:"relative",children:[y.jsx("img",{src:l,alt:"Preview",className:"w-full h-64 object-cover rounded-lg"}),y.jsx("button",{type:"button",onClick:T,className:"absolute top-2 right-2 bg-red-600 text-white p-2 rounded-full hover:bg-red-700 shadow-lg transition",children:y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):y.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition",children:[y.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:_,className:"hidden"}),y.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer flex flex-col items-center",children:[y.jsx("svg",{className:"w-12 h-12 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),y.jsx("span",{className:"text-sm text-gray-600",children:"Clique para escolher uma imagem"}),y.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF at 5MB"})]})]})]}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"nome",className:"block text-sm font-medium text-gray-700 mb-1",children:["Nome do Evento ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"text",id:"nome",name:"nome",value:g.nome,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Casamento Joo e Maria",required:!0})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"data",className:"block text-sm font-medium text-gray-700 mb-1",children:["Data ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"date",id:"data",name:"data",value:g.data,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"hora",className:"block text-sm font-medium text-gray-700 mb-1",children:["Hora ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"time",id:"hora",name:"hora",value:g.hora,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"local",className:"block text-sm font-medium text-gray-700 mb-1",children:["Local ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"text",id:"local",name:"local",value:g.local,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Quinta do Palcio, Lisboa",required:!0})]}),y.jsx("button",{type:"submit",disabled:e||s,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition",children:e||s?y.jsxs("span",{className:"flex items-center justify-center gap-2",children:[y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),s?"A fazer upload da imagem...":"A criar evento..."]}):"Criar Evento"})]})]}),y.jsx("div",{className:"mt-6 bg-blue-50 border-l-4 border-blue-400 p-4",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),y.jsxs("div",{className:"ml-3",children:[y.jsx("p",{className:"text-sm text-blue-700",children:"Aps criar o evento, ser redirecionado para fazer upload da lista de convidados."}),y.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"A imagem do evento aparecer no convite enviado aos convidados."})]})]})})]})}var kp={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((r,s)=>{t.exports=s()})(cs,function r(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},a,l=!s.document&&!!s.postMessage,h=s.IS_PAPA_WORKER||!1,p={},m=0,g={};function v(k){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(A){var F=W(A);F.chunkSize=parseInt(F.chunkSize),A.step||A.chunk||(F.chunkSize=null),this._handle=new j(F),(this._handle.streamer=this)._config=F}).call(this,k),this.parseChunk=function(A,F){var J=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<J){let se=this._config.newline;se||(X=this._config.quoteChar||'"',se=this._handle.guessLineEndings(A,X)),A=[...A.split(se).slice(J)].join(se)}this.isFirstChunk&&U(this._config.beforeFirstChunk)&&(X=this._config.beforeFirstChunk(A))!==void 0&&(A=X),this.isFirstChunk=!1,this._halted=!1;var J=this._partialLine+A,X=(this._partialLine="",this._handle.parse(J,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(A=X.meta.cursor,J=(this._finished||(this._partialLine=J.substring(A-this._baseIndex),this._baseIndex=A),X&&X.data&&(this._rowCount+=X.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),h)s.postMessage({results:X,workerId:g.WORKER_ID,finished:J});else if(U(this._config.chunk)&&!F){if(this._config.chunk(X,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=X=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(X.data),this._completeResults.errors=this._completeResults.errors.concat(X.errors),this._completeResults.meta=X.meta),this._completed||!J||!U(this._config.complete)||X&&X.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),J||X&&X.meta.paused||this._nextChunk(),X}this._halted=!0},this._sendError=function(A){U(this._config.error)?this._config.error(A):h&&this._config.error&&s.postMessage({workerId:g.WORKER_ID,error:A,finished:!1})}}function E(k){var A;(k=k||{}).chunkSize||(k.chunkSize=g.RemoteChunkSize),v.call(this,k),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(F){this._input=F,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(A=new XMLHttpRequest,this._config.withCredentials&&(A.withCredentials=this._config.withCredentials),l||(A.onload=G(this._chunkLoaded,this),A.onerror=G(this._chunkError,this)),A.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var F,J=this._config.downloadRequestHeaders;for(F in J)A.setRequestHeader(F,J[F])}var X;this._config.chunkSize&&(X=this._start+this._config.chunkSize-1,A.setRequestHeader("Range","bytes="+this._start+"-"+X));try{A.send(this._config.downloadRequestBody)}catch(se){this._chunkError(se.message)}l&&A.status===0&&this._chunkError()}},this._chunkLoaded=function(){A.readyState===4&&(A.status<200||400<=A.status?this._chunkError():(this._start+=this._config.chunkSize||A.responseText.length,this._finished=!this._config.chunkSize||this._start>=(F=>(F=F.getResponseHeader("Content-Range"))!==null?parseInt(F.substring(F.lastIndexOf("/")+1)):-1)(A),this.parseChunk(A.responseText)))},this._chunkError=function(F){F=A.statusText||F,this._sendError(new Error(F))}}function _(k){(k=k||{}).chunkSize||(k.chunkSize=g.LocalChunkSize),v.call(this,k);var A,F,J=typeof FileReader<"u";this.stream=function(X){this._input=X,F=X.slice||X.webkitSlice||X.mozSlice,J?((A=new FileReader).onload=G(this._chunkLoaded,this),A.onerror=G(this._chunkError,this)):A=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var X=this._input,se=(this._config.chunkSize&&(se=Math.min(this._start+this._config.chunkSize,this._input.size),X=F.call(X,this._start,se)),A.readAsText(X,this._config.encoding));J||this._chunkLoaded({target:{result:se}})},this._chunkLoaded=function(X){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(X.target.result)},this._chunkError=function(){this._sendError(A.error)}}function T(k){var A;v.call(this,k=k||{}),this.stream=function(F){return A=F,this._nextChunk()},this._nextChunk=function(){var F,J;if(!this._finished)return F=this._config.chunkSize,A=F?(J=A.substring(0,F),A.substring(F)):(J=A,""),this._finished=!A,this.parseChunk(J)}}function O(k){v.call(this,k=k||{});var A=[],F=!0,J=!1;this.pause=function(){v.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){v.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(X){this._input=X,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){J&&A.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),A.length?this.parseChunk(A.shift()):F=!0},this._streamData=G(function(X){try{A.push(typeof X=="string"?X:X.toString(this._config.encoding)),F&&(F=!1,this._checkIsFinished(),this.parseChunk(A.shift()))}catch(se){this._streamError(se)}},this),this._streamError=G(function(X){this._streamCleanUp(),this._sendError(X)},this),this._streamEnd=G(function(){this._streamCleanUp(),J=!0,this._streamData("")},this),this._streamCleanUp=G(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function j(k){var A,F,J,X,se=Math.pow(2,53),xe=-se,K=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Q=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,te=this,ee=0,re=0,he=!1,fe=!1,ue=[],me={data:[],errors:[],meta:{}};function Pe(Se){return k.skipEmptyLines==="greedy"?Se.join("").trim()==="":Se.length===1&&Se[0].length===0}function et(){if(me&&J&&(Nt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+g.DefaultDelimiter+"'"),J=!1),k.skipEmptyLines&&(me.data=me.data.filter(function(Qe){return!Pe(Qe)})),de()){let Qe=function(Re,Xe){U(k.transformHeader)&&(Re=k.transformHeader(Re,Xe)),ue.push(Re)};var Ne=Qe;if(me)if(Array.isArray(me.data[0])){for(var Se=0;de()&&Se<me.data.length;Se++)me.data[Se].forEach(Qe);me.data.splice(0,1)}else me.data.forEach(Qe)}function Ue(Qe,Re){for(var Xe=k.header?{}:[],Be=0;Be<Qe.length;Be++){var De=Be,He=Qe[Be],He=((_e,be)=>(mt=>(k.dynamicTypingFunction&&k.dynamicTyping[mt]===void 0&&(k.dynamicTyping[mt]=k.dynamicTypingFunction(mt)),(k.dynamicTyping[mt]||k.dynamicTyping)===!0))(_e)?be==="true"||be==="TRUE"||be!=="false"&&be!=="FALSE"&&((mt=>{if(K.test(mt)&&(mt=parseFloat(mt),xe<mt&&mt<se))return 1})(be)?parseFloat(be):Q.test(be)?new Date(be):be===""?null:be):be)(De=k.header?Be>=ue.length?"__parsed_extra":ue[Be]:De,He=k.transform?k.transform(He,De):He);De==="__parsed_extra"?(Xe[De]=Xe[De]||[],Xe[De].push(He)):Xe[De]=He}return k.header&&(Be>ue.length?Nt("FieldMismatch","TooManyFields","Too many fields: expected "+ue.length+" fields but parsed "+Be,re+Re):Be<ue.length&&Nt("FieldMismatch","TooFewFields","Too few fields: expected "+ue.length+" fields but parsed "+Be,re+Re)),Xe}var tt;me&&(k.header||k.dynamicTyping||k.transform)&&(tt=1,!me.data.length||Array.isArray(me.data[0])?(me.data=me.data.map(Ue),tt=me.data.length):me.data=Ue(me.data,0),k.header&&me.meta&&(me.meta.fields=ue),re+=tt)}function de(){return k.header&&ue.length===0}function Nt(Se,Ue,tt,Ne){Se={type:Se,code:Ue,message:tt},Ne!==void 0&&(Se.row=Ne),me.errors.push(Se)}U(k.step)&&(X=k.step,k.step=function(Se){me=Se,de()?et():(et(),me.data.length!==0&&(ee+=Se.data.length,k.preview&&ee>k.preview?F.abort():(me.data=me.data[0],X(me,te))))}),this.parse=function(Se,Ue,tt){var Ne=k.quoteChar||'"',Ne=(k.newline||(k.newline=this.guessLineEndings(Se,Ne)),J=!1,k.delimiter?U(k.delimiter)&&(k.delimiter=k.delimiter(Se),me.meta.delimiter=k.delimiter):((Ne=((Qe,Re,Xe,Be,De)=>{var He,_e,be,mt;De=De||[",","	","|",";",g.RECORD_SEP,g.UNIT_SEP];for(var pe=0;pe<De.length;pe++){for(var lr,Bn=De[pe],ot=0,mr=0,Ye=0,Xt=(be=void 0,new P({comments:Be,delimiter:Bn,newline:Re,preview:10}).parse(Qe)),Vt=0;Vt<Xt.data.length;Vt++)Xe&&Pe(Xt.data[Vt])?Ye++:(lr=Xt.data[Vt].length,mr+=lr,be===void 0?be=lr:0<lr&&(ot+=Math.abs(lr-be),be=lr));0<Xt.data.length&&(mr/=Xt.data.length-Ye),(_e===void 0||ot<=_e)&&(mt===void 0||mt<mr)&&1.99<mr&&(_e=ot,He=Bn,mt=mr)}return{successful:!!(k.delimiter=He),bestDelimiter:He}})(Se,k.newline,k.skipEmptyLines,k.comments,k.delimitersToGuess)).successful?k.delimiter=Ne.bestDelimiter:(J=!0,k.delimiter=g.DefaultDelimiter),me.meta.delimiter=k.delimiter),W(k));return k.preview&&k.header&&Ne.preview++,A=Se,F=new P(Ne),me=F.parse(A,Ue,tt),et(),he?{meta:{paused:!0}}:me||{meta:{paused:!1}}},this.paused=function(){return he},this.pause=function(){he=!0,F.abort(),A=U(k.chunk)?"":A.substring(F.getCharIndex())},this.resume=function(){te.streamer._halted?(he=!1,te.streamer.parseChunk(A,!0)):setTimeout(te.resume,3)},this.aborted=function(){return fe},this.abort=function(){fe=!0,F.abort(),me.meta.aborted=!0,U(k.complete)&&k.complete(me),A=""},this.guessLineEndings=function(Qe,Ne){Qe=Qe.substring(0,1048576);var Ne=new RegExp(B(Ne)+"([^]*?)"+B(Ne),"gm"),tt=(Qe=Qe.replace(Ne,"")).split("\r"),Ne=Qe.split(`
`),Qe=1<Ne.length&&Ne[0].length<tt[0].length;if(tt.length===1||Qe)return`
`;for(var Re=0,Xe=0;Xe<tt.length;Xe++)tt[Xe][0]===`
`&&Re++;return Re>=tt.length/2?`\r
`:"\r"}}function B(k){return k.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function P(k){var A=(k=k||{}).delimiter,F=k.newline,J=k.comments,X=k.step,se=k.preview,xe=k.fastMode,K=null,Q=!1,te=k.quoteChar==null?'"':k.quoteChar,ee=te;if(k.escapeChar!==void 0&&(ee=k.escapeChar),(typeof A!="string"||-1<g.BAD_DELIMITERS.indexOf(A))&&(A=","),J===A)throw new Error("Comment character same as delimiter");J===!0?J="#":(typeof J!="string"||-1<g.BAD_DELIMITERS.indexOf(J))&&(J=!1),F!==`
`&&F!=="\r"&&F!==`\r
`&&(F=`
`);var re=0,he=!1;this.parse=function(fe,ue,me){if(typeof fe!="string")throw new Error("Input must be a string");var Pe=fe.length,et=A.length,de=F.length,Nt=J.length,Se=U(X),Ue=[],tt=[],Ne=[],Qe=re=0;if(!fe)return ot();if(xe||xe!==!1&&fe.indexOf(te)===-1){for(var Re=fe.split(F),Xe=0;Xe<Re.length;Xe++){if(Ne=Re[Xe],re+=Ne.length,Xe!==Re.length-1)re+=F.length;else if(me)return ot();if(!J||Ne.substring(0,Nt)!==J){if(Se){if(Ue=[],mt(Ne.split(A)),mr(),he)return ot()}else mt(Ne.split(A));if(se&&se<=Xe)return Ue=Ue.slice(0,se),ot(!0)}}return ot()}for(var Be=fe.indexOf(A,re),De=fe.indexOf(F,re),He=new RegExp(B(ee)+B(te),"g"),_e=fe.indexOf(te,re);;)if(fe[re]===te)for(_e=re,re++;;){if((_e=fe.indexOf(te,_e+1))===-1)return me||tt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Ue.length,index:re}),lr();if(_e===Pe-1)return lr(fe.substring(re,_e).replace(He,te));if(te===ee&&fe[_e+1]===ee)_e++;else if(te===ee||_e===0||fe[_e-1]!==ee){Be!==-1&&Be<_e+1&&(Be=fe.indexOf(A,_e+1));var be=pe((De=De!==-1&&De<_e+1?fe.indexOf(F,_e+1):De)===-1?Be:Math.min(Be,De));if(fe.substr(_e+1+be,et)===A){Ne.push(fe.substring(re,_e).replace(He,te)),fe[re=_e+1+be+et]!==te&&(_e=fe.indexOf(te,re)),Be=fe.indexOf(A,re),De=fe.indexOf(F,re);break}if(be=pe(De),fe.substring(_e+1+be,_e+1+be+de)===F){if(Ne.push(fe.substring(re,_e).replace(He,te)),Bn(_e+1+be+de),Be=fe.indexOf(A,re),_e=fe.indexOf(te,re),Se&&(mr(),he))return ot();if(se&&Ue.length>=se)return ot(!0);break}tt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Ue.length,index:re}),_e++}}else if(J&&Ne.length===0&&fe.substring(re,re+Nt)===J){if(De===-1)return ot();re=De+de,De=fe.indexOf(F,re),Be=fe.indexOf(A,re)}else if(Be!==-1&&(Be<De||De===-1))Ne.push(fe.substring(re,Be)),re=Be+et,Be=fe.indexOf(A,re);else{if(De===-1)break;if(Ne.push(fe.substring(re,De)),Bn(De+de),Se&&(mr(),he))return ot();if(se&&Ue.length>=se)return ot(!0)}return lr();function mt(Ye){Ue.push(Ye),Qe=re}function pe(Ye){var Xt=0;return Xt=Ye!==-1&&(Ye=fe.substring(_e+1,Ye))&&Ye.trim()===""?Ye.length:Xt}function lr(Ye){return me||(Ye===void 0&&(Ye=fe.substring(re)),Ne.push(Ye),re=Pe,mt(Ne),Se&&mr()),ot()}function Bn(Ye){re=Ye,mt(Ne),Ne=[],De=fe.indexOf(F,re)}function ot(Ye){if(k.header&&!ue&&Ue.length&&!Q){var Xt=Ue[0],Vt=Object.create(null),Dt=new Set(Xt);let Ks=!1;for(let qr=0;qr<Xt.length;qr++){let Lr=Xt[qr];if(Vt[Lr=U(k.transformHeader)?k.transformHeader(Lr,qr):Lr]){let at,ce=Vt[Lr];for(;at=Lr+"_"+ce,ce++,Dt.has(at););Dt.add(at),Xt[qr]=at,Vt[Lr]++,Ks=!0,(K=K===null?{}:K)[at]=Lr}else Vt[Lr]=1,Xt[qr]=Lr;Dt.add(Lr)}Ks&&console.warn("Duplicate headers found and renamed."),Q=!0}return{data:Ue,errors:tt,meta:{delimiter:A,linebreak:F,aborted:he,truncated:!!Ye,cursor:Qe+(ue||0),renamedHeaders:K}}}function mr(){X(ot()),Ue=[],tt=[]}},this.abort=function(){he=!0},this.getCharIndex=function(){return re}}function N(k){var A=k.data,F=p[A.workerId],J=!1;if(A.error)F.userError(A.error,A.file);else if(A.results&&A.results.data){var X={abort:function(){J=!0,I(A.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:L,resume:L};if(U(F.userStep)){for(var se=0;se<A.results.data.length&&(F.userStep({data:A.results.data[se],errors:A.results.errors,meta:A.results.meta},X),!J);se++);delete A.results}else U(F.userChunk)&&(F.userChunk(A.results,X,A.file),delete A.results)}A.finished&&!J&&I(A.workerId,A.results)}function I(k,A){var F=p[k];U(F.userComplete)&&F.userComplete(A),F.terminate(),delete p[k]}function L(){throw new Error("Not implemented.")}function W(k){if(typeof k!="object"||k===null)return k;var A,F=Array.isArray(k)?[]:{};for(A in k)F[A]=W(k[A]);return F}function G(k,A){return function(){k.apply(A,arguments)}}function U(k){return typeof k=="function"}return g.parse=function(k,A){var F=(A=A||{}).dynamicTyping||!1;if(U(F)&&(A.dynamicTypingFunction=F,F={}),A.dynamicTyping=F,A.transform=!!U(A.transform)&&A.transform,!A.worker||!g.WORKERS_SUPPORTED)return F=null,g.NODE_STREAM_INPUT,typeof k=="string"?(k=(J=>J.charCodeAt(0)!==65279?J:J.slice(1))(k),F=new(A.download?E:T)(A)):k.readable===!0&&U(k.read)&&U(k.on)?F=new O(A):(s.File&&k instanceof File||k instanceof Object)&&(F=new _(A)),F.stream(k);(F=(()=>{var J;return!!g.WORKERS_SUPPORTED&&(J=(()=>{var X=s.URL||s.webkitURL||null,se=r.toString();return g.BLOB_URL||(g.BLOB_URL=X.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",se,")();"],{type:"text/javascript"})))})(),(J=new s.Worker(J)).onmessage=N,J.id=m++,p[J.id]=J)})()).userStep=A.step,F.userChunk=A.chunk,F.userComplete=A.complete,F.userError=A.error,A.step=U(A.step),A.chunk=U(A.chunk),A.complete=U(A.complete),A.error=U(A.error),delete A.worker,F.postMessage({input:k,config:A,workerId:F.id})},g.unparse=function(k,A){var F=!1,J=!0,X=",",se=`\r
`,xe='"',K=xe+xe,Q=!1,te=null,ee=!1,re=((()=>{if(typeof A=="object"){if(typeof A.delimiter!="string"||g.BAD_DELIMITERS.filter(function(ue){return A.delimiter.indexOf(ue)!==-1}).length||(X=A.delimiter),typeof A.quotes!="boolean"&&typeof A.quotes!="function"&&!Array.isArray(A.quotes)||(F=A.quotes),typeof A.skipEmptyLines!="boolean"&&typeof A.skipEmptyLines!="string"||(Q=A.skipEmptyLines),typeof A.newline=="string"&&(se=A.newline),typeof A.quoteChar=="string"&&(xe=A.quoteChar),typeof A.header=="boolean"&&(J=A.header),Array.isArray(A.columns)){if(A.columns.length===0)throw new Error("Option columns is empty");te=A.columns}A.escapeChar!==void 0&&(K=A.escapeChar+xe),A.escapeFormulae instanceof RegExp?ee=A.escapeFormulae:typeof A.escapeFormulae=="boolean"&&A.escapeFormulae&&(ee=/^[=+\-@\t\r].*$/)}})(),new RegExp(B(xe),"g"));if(typeof k=="string"&&(k=JSON.parse(k)),Array.isArray(k)){if(!k.length||Array.isArray(k[0]))return he(null,k,Q);if(typeof k[0]=="object")return he(te||Object.keys(k[0]),k,Q)}else if(typeof k=="object")return typeof k.data=="string"&&(k.data=JSON.parse(k.data)),Array.isArray(k.data)&&(k.fields||(k.fields=k.meta&&k.meta.fields||te),k.fields||(k.fields=Array.isArray(k.data[0])?k.fields:typeof k.data[0]=="object"?Object.keys(k.data[0]):[]),Array.isArray(k.data[0])||typeof k.data[0]=="object"||(k.data=[k.data])),he(k.fields||[],k.data||[],Q);throw new Error("Unable to serialize unrecognized input");function he(ue,me,Pe){var et="",de=(typeof ue=="string"&&(ue=JSON.parse(ue)),typeof me=="string"&&(me=JSON.parse(me)),Array.isArray(ue)&&0<ue.length),Nt=!Array.isArray(me[0]);if(de&&J){for(var Se=0;Se<ue.length;Se++)0<Se&&(et+=X),et+=fe(ue[Se],Se);0<me.length&&(et+=se)}for(var Ue=0;Ue<me.length;Ue++){var tt=(de?ue:me[Ue]).length,Ne=!1,Qe=de?Object.keys(me[Ue]).length===0:me[Ue].length===0;if(Pe&&!de&&(Ne=Pe==="greedy"?me[Ue].join("").trim()==="":me[Ue].length===1&&me[Ue][0].length===0),Pe==="greedy"&&de){for(var Re=[],Xe=0;Xe<tt;Xe++){var Be=Nt?ue[Xe]:Xe;Re.push(me[Ue][Be])}Ne=Re.join("").trim()===""}if(!Ne){for(var De=0;De<tt;De++){0<De&&!Qe&&(et+=X);var He=de&&Nt?ue[De]:De;et+=fe(me[Ue][He],De)}Ue<me.length-1&&(!Pe||0<tt&&!Qe)&&(et+=se)}}return et}function fe(ue,me){var Pe,et;return ue==null?"":ue.constructor===Date?JSON.stringify(ue).slice(1,25):(et=!1,ee&&typeof ue=="string"&&ee.test(ue)&&(ue="'"+ue,et=!0),Pe=ue.toString().replace(re,K),(et=et||F===!0||typeof F=="function"&&F(ue,me)||Array.isArray(F)&&F[me]||((de,Nt)=>{for(var Se=0;Se<Nt.length;Se++)if(-1<de.indexOf(Nt[Se]))return!0;return!1})(Pe,g.BAD_DELIMITERS)||-1<Pe.indexOf(X)||Pe.charAt(0)===" "||Pe.charAt(Pe.length-1)===" ")?xe+Pe+xe:Pe)}},g.RECORD_SEP="",g.UNIT_SEP="",g.BYTE_ORDER_MARK="\uFEFF",g.BAD_DELIMITERS=["\r",`
`,'"',g.BYTE_ORDER_MARK],g.WORKERS_SUPPORTED=!l&&!!s.Worker,g.NODE_STREAM_INPUT=1,g.LocalChunkSize=10485760,g.RemoteChunkSize=5242880,g.DefaultDelimiter=",",g.Parser=P,g.ParserHandle=j,g.NetworkStreamer=E,g.FileStreamer=_,g.StringStreamer=T,g.ReadableStreamStreamer=O,s.jQuery&&((a=s.jQuery).fn.parse=function(k){var A=k.config||{},F=[];return this.each(function(se){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var xe=0;xe<this.files.length;xe++)F.push({file:this.files[xe],inputElem:this,instanceConfig:a.extend({},A)})}),J(),this;function J(){if(F.length===0)U(k.complete)&&k.complete();else{var se,xe,K,Q,te=F[0];if(U(k.before)){var ee=k.before(te.file,te.inputElem);if(typeof ee=="object"){if(ee.action==="abort")return se="AbortError",xe=te.file,K=te.inputElem,Q=ee.reason,void(U(k.error)&&k.error({name:se},xe,K,Q));if(ee.action==="skip")return void X();typeof ee.config=="object"&&(te.instanceConfig=a.extend(te.instanceConfig,ee.config))}else if(ee==="skip")return void X()}var re=te.instanceConfig.complete;te.instanceConfig.complete=function(he){U(re)&&re(he,te.file,te.inputElem),X()},g.parse(te.file,te.instanceConfig)}}function X(){F.splice(0,1),J()}}),h&&(s.onmessage=function(k){k=k.data,g.WORKER_ID===void 0&&k&&(g.WORKER_ID=k.workerId),typeof k.input=="string"?s.postMessage({workerId:g.WORKER_ID,results:g.parse(k.input,k.config),finished:!0}):(s.File&&k.input instanceof File||k.input instanceof Object)&&(k=g.parse(k.input,k.config))&&s.postMessage({workerId:g.WORKER_ID,results:k,finished:!0})}),(E.prototype=Object.create(v.prototype)).constructor=E,(_.prototype=Object.create(v.prototype)).constructor=_,(T.prototype=Object.create(T.prototype)).constructor=T,(O.prototype=Object.create(v.prototype)).constructor=O,g})})(kp);var nb=kp.exports;const ib=vd(nb);let Va;const sb=new Uint8Array(16);function ob(){if(!Va&&(Va=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Va))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Va(sb)}const Zt=[];for(let t=0;t<256;++t)Zt.push((t+256).toString(16).slice(1));function ab(t,e=0){return Zt[t[e+0]]+Zt[t[e+1]]+Zt[t[e+2]]+Zt[t[e+3]]+"-"+Zt[t[e+4]]+Zt[t[e+5]]+"-"+Zt[t[e+6]]+Zt[t[e+7]]+"-"+Zt[t[e+8]]+Zt[t[e+9]]+"-"+Zt[t[e+10]]+Zt[t[e+11]]+Zt[t[e+12]]+Zt[t[e+13]]+Zt[t[e+14]]+Zt[t[e+15]]}const lb=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),U0={randomUUID:lb};function cb(t,e,r){if(U0.randomUUID&&!t)return U0.randomUUID();t=t||{};const s=t.random||(t.rng||ob)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,ab(s)}function ub(){const[t,e]=H.useState(!1),[r,s]=H.useState(null),[a,l]=H.useState([]),[h,p]=H.useState([]),[m,g]=H.useState(null),[v,E]=H.useState([]),[_,T]=H.useState(""),[O,j]=H.useState({});H.useEffect(()=>{B()},[]),H.useEffect(()=>{_&&P()},[_]);const B=async()=>{try{const{data:A,error:F}=await Le.from("eventos").select("*").order("created_at",{ascending:!1});if(F)throw F;E(A||[]);const J=localStorage.getItem("currentEventId");J&&(A!=null&&A.some(X=>X.id===J))?T(J):(A==null?void 0:A.length)>0&&T(A[0].id)}catch(A){console.error("Erro ao carregar eventos:",A),ge.error("Erro ao carregar eventos")}},P=async()=>{if(!_){g(null);return}try{const{data:A,error:F}=await Le.from("eventos").select("*").eq("id",_).single();if(F)throw F;g(A),localStorage.setItem("currentEventId",_)}catch(A){console.error("Erro ao carregar evento:",A),ge.error("Erro ao carregar evento")}},N=A=>{T(A),p([])},I=A=>{const F=A.target.files[0];F&&(s(F),L(F))},L=A=>{ib.parse(A,{header:!0,delimiter:";",skipEmptyLines:!0,encoding:"UTF-8",complete:F=>{const J=F.data.filter(X=>X.nome&&X.email&&X.nome.trim()&&X.email.trim()).map(X=>({nome:X.nome.trim(),email:X.email.trim().split(";")[0].trim(),mesa:X.mesa?X.mesa.trim():""}));l(J),J.length===0?ge.error("O ficheiro CSV no contm dados vlidos. Certifique-se de incluir pelo menos as colunas: nome, email"):ge.success(`${J.length} convidados carregados do CSV`)},error:F=>{ge.error("Erro ao processar o ficheiro CSV: "+F.message)}})},W=async()=>{if(!m){ge.error("Por favor, selecione um evento primeiro");return}if(a.length===0){ge.error("Nenhum convidado para fazer upload");return}e(!0);try{const A=a.map(se=>({id:cb(),evento_id:m.id,nome:se.nome,email:se.email,mesa:se.mesa||null,confirmado:!1,rejeitado:!1,checkin:!1})),{data:F,error:J}=await Le.from("convidados").insert(A).select();if(J)throw J;const X=F.map(se=>({...se,link:`${window.location.origin}/confirmar?id=${se.id}`}));p(X),ge.success(`${F.length} convidados adicionados com sucesso!`)}catch(A){console.error("Erro ao fazer upload dos convidados:",A),ge.error("Erro ao fazer upload: "+A.message)}finally{e(!1)}},G=(A,F)=>{navigator.clipboard.writeText(F),j({...O,[A]:!0}),ge.success("Link copiado!"),setTimeout(()=>{j({...O,[A]:!1})},2e3)},U=(A,F)=>{const J=encodeURIComponent(`Confirmao de Presena - ${(m==null?void 0:m.nome)||"Evento"}`),X=encodeURIComponent(`Ol,

Por favor confirme a sua presena no evento clicando no link abaixo:

${F}

Obrigado!`);window.open(`mailto:${A}?subject=${J}&body=${X}`)},k=A=>{if(!A)return"";const[F,J]=A.split(":");return`${F}:${J}`};return y.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[y.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Upload de Convidados"}),y.jsxs("div",{className:"mb-6",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecione o Evento"}),v.length>0?y.jsxs("select",{value:_,onChange:A=>N(A.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[y.jsx("option",{value:"",children:"Selecione um evento"}),v.map(A=>y.jsxs("option",{value:A.id,children:[A.nome," -"," ",new Date(A.data).toLocaleDateString("pt-PT")," s"," ",k(A.hora)]},A.id))]}):y.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:y.jsx("p",{className:"text-yellow-800 text-sm",children:"Nenhum evento disponvel. Por favor, crie um evento primeiro."})})]}),m&&y.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[y.jsx("p",{className:"text-sm text-blue-600 font-medium mb-1",children:"Evento selecionado:"}),y.jsx("p",{className:"font-bold text-blue-900 text-lg",children:m.nome}),y.jsxs("p",{className:"text-sm text-blue-700",children:[new Date(m.data).toLocaleDateString("pt-PT",{day:"numeric",month:"long",year:"numeric"})," ","s ",k(m.hora)," - ",m.local]})]}),m&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ficheiro CSV (colunas: nome;email ou nome;email;mesa)"}),y.jsx("input",{type:"file",accept:".csv",onChange:I,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),a.length>0&&y.jsxs("div",{className:"mt-4",children:[y.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["Pr-visualizao (",a.length," convidados)"]}),y.jsxs("div",{className:"max-h-60 overflow-y-auto border rounded-lg",children:[y.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[y.jsx("thead",{className:"bg-gray-50",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Nome"}),y.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),y.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Mesa"})]})}),y.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.slice(0,10).map((A,F)=>y.jsxs("tr",{children:[y.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:A.nome}),y.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:A.email}),y.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:A.mesa})]},F))})]}),a.length>10&&y.jsxs("p",{className:"text-sm text-gray-500 p-2 text-center",children:["... e mais ",a.length-10," convidados"]})]})]}),y.jsx("button",{onClick:W,disabled:t||a.length===0,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition",children:t?"A fazer upload...":`Fazer Upload de ${a.length} Convidados`})]})]}),h.length>0&&y.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[y.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Links de Confirmao"}),y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[y.jsx("thead",{className:"bg-gray-50",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nome"}),y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mesa"}),y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),y.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(A=>y.jsxs("tr",{children:[y.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:A.nome}),y.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:A.email}),y.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:A.mesa}),y.jsx("td",{className:"px-4 py-3 text-sm",children:y.jsxs("div",{className:"flex space-x-2",children:[y.jsx("button",{onClick:()=>G(A.id,A.link),className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:O[A.id]?" Copiado":" Copiar Link"}),y.jsx("button",{onClick:()=>U(A.email,A.link),className:"inline-flex items-center px-3 py-1 border border-blue-300 text-sm font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:" Email"})]})})]},A.id))})]})})]}),y.jsx("div",{className:"mt-6 bg-blue-50 border-l-4 border-blue-400 p-4",children:y.jsx("div",{className:"flex",children:y.jsxs("div",{className:"ml-3",children:[y.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Formato do ficheiro CSV (com ponto-e-vrgula):"}),y.jsx("pre",{className:"text-xs text-blue-700 bg-white p-2 rounded",children:`nome;email;mesa
Joo Silva;joao@email.com;1
Maria Santos;maria@email.com;2
Pedro Costa;pedro@email.com;1`}),y.jsx("p",{className:"text-xs text-blue-600 mt-2",children:'* A coluna "mesa"  opcional'})]})})})]})}var db=Object.defineProperty,Pl=Object.getOwnPropertySymbols,Pp=Object.prototype.hasOwnProperty,Dp=Object.prototype.propertyIsEnumerable,z0=(t,e,r)=>e in t?db(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,V0=(t,e)=>{for(var r in e||(e={}))Pp.call(e,r)&&z0(t,r,e[r]);if(Pl)for(var r of Pl(e))Dp.call(e,r)&&z0(t,r,e[r]);return t},hb=(t,e)=>{var r={};for(var s in t)Pp.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&Pl)for(var s of Pl(t))e.indexOf(s)<0&&Dp.call(t,s)&&(r[s]=t[s]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Hi;(t=>{const e=class{constructor(m,g,v,E){if(this.version=m,this.errorCorrectionLevel=g,this.modules=[],this.isFunction=[],m<e.MIN_VERSION||m>e.MAX_VERSION)throw new RangeError("Version value out of range");if(E<-1||E>7)throw new RangeError("Mask value out of range");this.size=m*4+17;let _=[];for(let O=0;O<this.size;O++)_.push(!1);for(let O=0;O<this.size;O++)this.modules.push(_.slice()),this.isFunction.push(_.slice());this.drawFunctionPatterns();const T=this.addEccAndInterleave(v);if(this.drawCodewords(T),E==-1){let O=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const B=this.getPenaltyScore();B<O&&(E=j,O=B),this.applyMask(j)}}l(0<=E&&E<=7),this.mask=E,this.applyMask(E),this.drawFormatBits(E),this.isFunction=[]}static encodeText(m,g){const v=t.QrSegment.makeSegments(m);return e.encodeSegments(v,g)}static encodeBinary(m,g){const v=t.QrSegment.makeBytes(m);return e.encodeSegments([v],g)}static encodeSegments(m,g,v=1,E=40,_=-1,T=!0){if(!(e.MIN_VERSION<=v&&v<=E&&E<=e.MAX_VERSION)||_<-1||_>7)throw new RangeError("Invalid value");let O,j;for(O=v;;O++){const I=e.getNumDataCodewords(O,g)*8,L=p.getTotalBits(m,O);if(L<=I){j=L;break}if(O>=E)throw new RangeError("Data too long")}for(const I of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])T&&j<=e.getNumDataCodewords(O,I)*8&&(g=I);let B=[];for(const I of m){s(I.mode.modeBits,4,B),s(I.numChars,I.mode.numCharCountBits(O),B);for(const L of I.getData())B.push(L)}l(B.length==j);const P=e.getNumDataCodewords(O,g)*8;l(B.length<=P),s(0,Math.min(4,P-B.length),B),s(0,(8-B.length%8)%8,B),l(B.length%8==0);for(let I=236;B.length<P;I^=253)s(I,8,B);let N=[];for(;N.length*8<B.length;)N.push(0);return B.forEach((I,L)=>N[L>>>3]|=I<<7-(L&7)),new e(O,g,N,_)}getModule(m,g){return 0<=m&&m<this.size&&0<=g&&g<this.size&&this.modules[g][m]}getModules(){return this.modules}drawFunctionPatterns(){for(let v=0;v<this.size;v++)this.setFunctionModule(6,v,v%2==0),this.setFunctionModule(v,6,v%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const m=this.getAlignmentPatternPositions(),g=m.length;for(let v=0;v<g;v++)for(let E=0;E<g;E++)v==0&&E==0||v==0&&E==g-1||v==g-1&&E==0||this.drawAlignmentPattern(m[v],m[E]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(m){const g=this.errorCorrectionLevel.formatBits<<3|m;let v=g;for(let _=0;_<10;_++)v=v<<1^(v>>>9)*1335;const E=(g<<10|v)^21522;l(E>>>15==0);for(let _=0;_<=5;_++)this.setFunctionModule(8,_,a(E,_));this.setFunctionModule(8,7,a(E,6)),this.setFunctionModule(8,8,a(E,7)),this.setFunctionModule(7,8,a(E,8));for(let _=9;_<15;_++)this.setFunctionModule(14-_,8,a(E,_));for(let _=0;_<8;_++)this.setFunctionModule(this.size-1-_,8,a(E,_));for(let _=8;_<15;_++)this.setFunctionModule(8,this.size-15+_,a(E,_));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let m=this.version;for(let v=0;v<12;v++)m=m<<1^(m>>>11)*7973;const g=this.version<<12|m;l(g>>>18==0);for(let v=0;v<18;v++){const E=a(g,v),_=this.size-11+v%3,T=Math.floor(v/3);this.setFunctionModule(_,T,E),this.setFunctionModule(T,_,E)}}drawFinderPattern(m,g){for(let v=-4;v<=4;v++)for(let E=-4;E<=4;E++){const _=Math.max(Math.abs(E),Math.abs(v)),T=m+E,O=g+v;0<=T&&T<this.size&&0<=O&&O<this.size&&this.setFunctionModule(T,O,_!=2&&_!=4)}}drawAlignmentPattern(m,g){for(let v=-2;v<=2;v++)for(let E=-2;E<=2;E++)this.setFunctionModule(m+E,g+v,Math.max(Math.abs(E),Math.abs(v))!=1)}setFunctionModule(m,g,v){this.modules[g][m]=v,this.isFunction[g][m]=!0}addEccAndInterleave(m){const g=this.version,v=this.errorCorrectionLevel;if(m.length!=e.getNumDataCodewords(g,v))throw new RangeError("Invalid argument");const E=e.NUM_ERROR_CORRECTION_BLOCKS[v.ordinal][g],_=e.ECC_CODEWORDS_PER_BLOCK[v.ordinal][g],T=Math.floor(e.getNumRawDataModules(g)/8),O=E-T%E,j=Math.floor(T/E);let B=[];const P=e.reedSolomonComputeDivisor(_);for(let I=0,L=0;I<E;I++){let W=m.slice(L,L+j-_+(I<O?0:1));L+=W.length;const G=e.reedSolomonComputeRemainder(W,P);I<O&&W.push(0),B.push(W.concat(G))}let N=[];for(let I=0;I<B[0].length;I++)B.forEach((L,W)=>{(I!=j-_||W>=O)&&N.push(L[I])});return l(N.length==T),N}drawCodewords(m){if(m.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let g=0;for(let v=this.size-1;v>=1;v-=2){v==6&&(v=5);for(let E=0;E<this.size;E++)for(let _=0;_<2;_++){const T=v-_,j=(v+1&2)==0?this.size-1-E:E;!this.isFunction[j][T]&&g<m.length*8&&(this.modules[j][T]=a(m[g>>>3],7-(g&7)),g++)}}l(g==m.length*8)}applyMask(m){if(m<0||m>7)throw new RangeError("Mask value out of range");for(let g=0;g<this.size;g++)for(let v=0;v<this.size;v++){let E;switch(m){case 0:E=(v+g)%2==0;break;case 1:E=g%2==0;break;case 2:E=v%3==0;break;case 3:E=(v+g)%3==0;break;case 4:E=(Math.floor(v/3)+Math.floor(g/2))%2==0;break;case 5:E=v*g%2+v*g%3==0;break;case 6:E=(v*g%2+v*g%3)%2==0;break;case 7:E=((v+g)%2+v*g%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[g][v]&&E&&(this.modules[g][v]=!this.modules[g][v])}}getPenaltyScore(){let m=0;for(let _=0;_<this.size;_++){let T=!1,O=0,j=[0,0,0,0,0,0,0];for(let B=0;B<this.size;B++)this.modules[_][B]==T?(O++,O==5?m+=e.PENALTY_N1:O>5&&m++):(this.finderPenaltyAddHistory(O,j),T||(m+=this.finderPenaltyCountPatterns(j)*e.PENALTY_N3),T=this.modules[_][B],O=1);m+=this.finderPenaltyTerminateAndCount(T,O,j)*e.PENALTY_N3}for(let _=0;_<this.size;_++){let T=!1,O=0,j=[0,0,0,0,0,0,0];for(let B=0;B<this.size;B++)this.modules[B][_]==T?(O++,O==5?m+=e.PENALTY_N1:O>5&&m++):(this.finderPenaltyAddHistory(O,j),T||(m+=this.finderPenaltyCountPatterns(j)*e.PENALTY_N3),T=this.modules[B][_],O=1);m+=this.finderPenaltyTerminateAndCount(T,O,j)*e.PENALTY_N3}for(let _=0;_<this.size-1;_++)for(let T=0;T<this.size-1;T++){const O=this.modules[_][T];O==this.modules[_][T+1]&&O==this.modules[_+1][T]&&O==this.modules[_+1][T+1]&&(m+=e.PENALTY_N2)}let g=0;for(const _ of this.modules)g=_.reduce((T,O)=>T+(O?1:0),g);const v=this.size*this.size,E=Math.ceil(Math.abs(g*20-v*10)/v)-1;return l(0<=E&&E<=9),m+=E*e.PENALTY_N4,l(0<=m&&m<=2568888),m}getAlignmentPatternPositions(){if(this.version==1)return[];{const m=Math.floor(this.version/7)+2,g=this.version==32?26:Math.ceil((this.version*4+4)/(m*2-2))*2;let v=[6];for(let E=this.size-7;v.length<m;E-=g)v.splice(1,0,E);return v}}static getNumRawDataModules(m){if(m<e.MIN_VERSION||m>e.MAX_VERSION)throw new RangeError("Version number out of range");let g=(16*m+128)*m+64;if(m>=2){const v=Math.floor(m/7)+2;g-=(25*v-10)*v-55,m>=7&&(g-=36)}return l(208<=g&&g<=29648),g}static getNumDataCodewords(m,g){return Math.floor(e.getNumRawDataModules(m)/8)-e.ECC_CODEWORDS_PER_BLOCK[g.ordinal][m]*e.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][m]}static reedSolomonComputeDivisor(m){if(m<1||m>255)throw new RangeError("Degree out of range");let g=[];for(let E=0;E<m-1;E++)g.push(0);g.push(1);let v=1;for(let E=0;E<m;E++){for(let _=0;_<g.length;_++)g[_]=e.reedSolomonMultiply(g[_],v),_+1<g.length&&(g[_]^=g[_+1]);v=e.reedSolomonMultiply(v,2)}return g}static reedSolomonComputeRemainder(m,g){let v=g.map(E=>0);for(const E of m){const _=E^v.shift();v.push(0),g.forEach((T,O)=>v[O]^=e.reedSolomonMultiply(T,_))}return v}static reedSolomonMultiply(m,g){if(m>>>8||g>>>8)throw new RangeError("Byte out of range");let v=0;for(let E=7;E>=0;E--)v=v<<1^(v>>>7)*285,v^=(g>>>E&1)*m;return l(v>>>8==0),v}finderPenaltyCountPatterns(m){const g=m[1];l(g<=this.size*3);const v=g>0&&m[2]==g&&m[3]==g*3&&m[4]==g&&m[5]==g;return(v&&m[0]>=g*4&&m[6]>=g?1:0)+(v&&m[6]>=g*4&&m[0]>=g?1:0)}finderPenaltyTerminateAndCount(m,g,v){return m&&(this.finderPenaltyAddHistory(g,v),g=0),g+=this.size,this.finderPenaltyAddHistory(g,v),this.finderPenaltyCountPatterns(v)}finderPenaltyAddHistory(m,g){g[0]==0&&(m+=this.size),g.pop(),g.unshift(m)}};let r=e;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function s(m,g,v){if(g<0||g>31||m>>>g)throw new RangeError("Value out of range");for(let E=g-1;E>=0;E--)v.push(m>>>E&1)}function a(m,g){return(m>>>g&1)!=0}function l(m){if(!m)throw new Error("Assertion error")}const h=class{constructor(m,g,v){if(this.mode=m,this.numChars=g,this.bitData=v,g<0)throw new RangeError("Invalid argument");this.bitData=v.slice()}static makeBytes(m){let g=[];for(const v of m)s(v,8,g);return new h(h.Mode.BYTE,m.length,g)}static makeNumeric(m){if(!h.isNumeric(m))throw new RangeError("String contains non-numeric characters");let g=[];for(let v=0;v<m.length;){const E=Math.min(m.length-v,3);s(parseInt(m.substr(v,E),10),E*3+1,g),v+=E}return new h(h.Mode.NUMERIC,m.length,g)}static makeAlphanumeric(m){if(!h.isAlphanumeric(m))throw new RangeError("String contains unencodable characters in alphanumeric mode");let g=[],v;for(v=0;v+2<=m.length;v+=2){let E=h.ALPHANUMERIC_CHARSET.indexOf(m.charAt(v))*45;E+=h.ALPHANUMERIC_CHARSET.indexOf(m.charAt(v+1)),s(E,11,g)}return v<m.length&&s(h.ALPHANUMERIC_CHARSET.indexOf(m.charAt(v)),6,g),new h(h.Mode.ALPHANUMERIC,m.length,g)}static makeSegments(m){return m==""?[]:h.isNumeric(m)?[h.makeNumeric(m)]:h.isAlphanumeric(m)?[h.makeAlphanumeric(m)]:[h.makeBytes(h.toUtf8ByteArray(m))]}static makeEci(m){let g=[];if(m<0)throw new RangeError("ECI assignment value out of range");if(m<128)s(m,8,g);else if(m<16384)s(2,2,g),s(m,14,g);else if(m<1e6)s(6,3,g),s(m,21,g);else throw new RangeError("ECI assignment value out of range");return new h(h.Mode.ECI,0,g)}static isNumeric(m){return h.NUMERIC_REGEX.test(m)}static isAlphanumeric(m){return h.ALPHANUMERIC_REGEX.test(m)}getData(){return this.bitData.slice()}static getTotalBits(m,g){let v=0;for(const E of m){const _=E.mode.numCharCountBits(g);if(E.numChars>=1<<_)return 1/0;v+=4+_+E.bitData.length}return v}static toUtf8ByteArray(m){m=encodeURI(m);let g=[];for(let v=0;v<m.length;v++)m.charAt(v)!="%"?g.push(m.charCodeAt(v)):(g.push(parseInt(m.substr(v+1,2),16)),v+=2);return g}};let p=h;p.NUMERIC_REGEX=/^[0-9]*$/,p.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,p.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=p})(Hi||(Hi={}));(t=>{(e=>{const r=class{constructor(a,l){this.ordinal=a,this.formatBits=l}};let s=r;s.LOW=new r(0,1),s.MEDIUM=new r(1,0),s.QUARTILE=new r(2,3),s.HIGH=new r(3,2),e.Ecc=s})(t.QrCode||(t.QrCode={}))})(Hi||(Hi={}));(t=>{(e=>{const r=class{constructor(a,l){this.modeBits=a,this.numBitsCharCount=l}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};let s=r;s.NUMERIC=new r(1,[10,12,14]),s.ALPHANUMERIC=new r(2,[9,11,13]),s.BYTE=new r(4,[8,16,16]),s.KANJI=new r(8,[8,10,12]),s.ECI=new r(7,[0,0,0]),e.Mode=s})(t.QrSegment||(t.QrSegment={}))})(Hi||(Hi={}));var yo=Hi;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var fb={L:yo.QrCode.Ecc.LOW,M:yo.QrCode.Ecc.MEDIUM,Q:yo.QrCode.Ecc.QUARTILE,H:yo.QrCode.Ecc.HIGH},gb=128,mb="L",pb="#FFFFFF",xb="#000000",wb=!1,Mp=4,yb=.1;function vb(t,e=0){const r=[];return t.forEach(function(s,a){let l=null;s.forEach(function(h,p){if(!h&&l!==null){r.push(`M${l+e} ${a+e}h${p-l}v1H${l+e}z`),l=null;return}if(p===s.length-1){if(!h)return;l===null?r.push(`M${p+e},${a+e} h1v1H${p+e}z`):r.push(`M${l+e},${a+e} h${p+1-l}v1H${l+e}z`);return}h&&l===null&&(l=p)})}),r.join("")}function Eb(t,e){return t.slice().map((r,s)=>s<e.y||s>=e.y+e.h?r:r.map((a,l)=>l<e.x||l>=e.x+e.w?a:!1))}function bb(t,e,r,s){if(s==null)return null;const a=r?Mp:0,l=t.length+a*2,h=Math.floor(e*yb),p=l/e,m=(s.width||h)*p,g=(s.height||h)*p,v=s.x==null?t.length/2-m/2:s.x*p,E=s.y==null?t.length/2-g/2:s.y*p;let _=null;if(s.excavate){let T=Math.floor(v),O=Math.floor(E),j=Math.ceil(m+v-T),B=Math.ceil(g+E-O);_={x:T,y:O,w:j,h:B}}return{x:v,y:E,h:g,w:m,excavation:_}}var _b=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function Cb(t){const e=t,{value:r,size:s=gb,level:a=mb,bgColor:l=pb,fgColor:h=xb,includeMargin:p=wb,style:m,imageSettings:g}=e,v=hb(e,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),E=g==null?void 0:g.src,_=tn.useRef(null),T=tn.useRef(null),[O,j]=tn.useState(!1);tn.useEffect(()=>{if(_.current!=null){const N=_.current,I=N.getContext("2d");if(!I)return;let L=yo.QrCode.encodeText(r,fb[a]).getModules();const W=p?Mp:0,G=L.length+W*2,U=bb(L,s,p,g),k=T.current,A=U!=null&&k!==null&&k.complete&&k.naturalHeight!==0&&k.naturalWidth!==0;A&&U.excavation!=null&&(L=Eb(L,U.excavation));const F=window.devicePixelRatio||1;N.height=N.width=s*F;const J=s/G*F;I.scale(J,J),I.fillStyle=l,I.fillRect(0,0,G,G),I.fillStyle=h,_b?I.fill(new Path2D(vb(L,W))):L.forEach(function(X,se){X.forEach(function(xe,K){xe&&I.fillRect(K+W,se+W,1,1)})}),A&&I.drawImage(k,U.x+W,U.y+W,U.w,U.h)}}),tn.useEffect(()=>{j(!1)},[E]);const B=V0({height:s,width:s},m);let P=null;return E!=null&&(P=tn.createElement("img",{src:E,key:E,style:{display:"none"},onLoad:()=>{j(!0)},ref:T})),tn.createElement(tn.Fragment,null,tn.createElement("canvas",V0({style:B,height:s,width:s,ref:_},v)),P)}function Ab(){const[t,e]=H.useState("#1e40af"),[r,s]=H.useState(!1),[a]=$y(),[l,h]=H.useState(!0),[p,m]=H.useState(null),[g,v]=H.useState(null),[E,_]=H.useState(!1),[T,O]=H.useState(!1),[j,B]=H.useState(""),P=H.useRef(null);H.useEffect(()=>{N()},[]),H.useEffect(()=>{if(!p||!E||p.checkin&&p.mesa)return;s(!0);const k=setInterval(async()=>{try{const{data:A,error:F}=await Le.from("convidados").select("id, mesa, checkin").eq("id",p.id).single();if(F){console.error("Erro a verificar mesa:",F);return}A!=null&&A.checkin&&(A!=null&&A.mesa)&&(clearInterval(k),m(J=>({...J,mesa:A.mesa,checkin:A.checkin})))}catch(A){console.error("Erro inesperado a verificar mesa:",A)}},3e3);return()=>clearInterval(k)},[p,E,m]);const N=async()=>{const k=a.get("id");if(!k){ge.error("Link invlido - ID do convidado no encontrado"),h(!1);return}try{const{data:A,error:F}=await Le.from("convidados").select("*").eq("id",k).single();if(F)throw F;m(A),_(A.confirmado),O(A.rejeitado||!1);const{data:J,error:X}=await Le.from("eventos").select("*").eq("id",A.evento_id).single();if(X)throw X;v(J),e(J.accent_color||"#1e40af");const se=JSON.stringify({id:A.id,nome:A.nome});B(se)}catch(A){console.error("Erro ao carregar dados:",A),ge.error("Erro ao carregar dados do convidado")}finally{h(!1)}},I=async()=>{if(p){h(!0);try{const{error:k}=await Le.from("convidados").update({confirmado:!0,rejeitado:!1}).eq("id",p.id);if(k)throw k;await W(),_(!0),O(!1),ge.success("Presena confirmada com sucesso!")}catch(k){console.error("Erro ao confirmar presena:",k),ge.error("Erro ao confirmar presena")}finally{h(!1)}}},L=async()=>{if(p){h(!0);try{const{error:k}=await Le.from("convidados").update({confirmado:!1,rejeitado:!0}).eq("id",p.id);if(k)throw k;_(!1),O(!0),ge.success("Resposta registada. Lamentamos a sua ausncia!")}catch(k){console.error("Erro ao rejeitar convite:",k),ge.error("Erro ao processar resposta")}finally{h(!1)}}},W=async()=>{if(P.current)try{const k=P.current.querySelector("canvas"),A=await new Promise(X=>k.toBlob(X)),F=`qrcodes/${p.id}.png`,{error:J}=await Le.storage.from("qrcodes").upload(F,A,{contentType:"image/png",upsert:!0});if(J)throw J}catch(k){console.error("Erro ao salvar QR code:",k)}},G=()=>{const A=P.current.querySelector("canvas").toDataURL("image/png"),F=document.createElement("a");F.href=A,F.download=`qrcode-${p.nome.replace(/\s+/g,"-")}.png`,document.body.appendChild(F),F.click(),document.body.removeChild(F),ge.success("QR Code descarregado!")},U=k=>{try{const A=document.createElement("canvas"),F=A.getContext("2d"),J=A.width=k.naturalWidth||k.width,X=A.height=k.naturalHeight||k.height;F.drawImage(k,0,0,J,X);const se=F.getImageData(0,0,J,X).data;let xe=0,K=0,Q=0,te=0;const ee=4*10;for(let fe=0;fe<se.length;fe+=ee)xe+=se[fe],K+=se[fe+1],Q+=se[fe+2],te++;if(!te)return;xe=Math.round(xe/te),K=Math.round(K/te),Q=Math.round(Q/te);const re=fe=>fe.toString(16).padStart(2,"0"),he=`#${re(xe)}${re(K)}${re(Q)}`;e(he)}catch(A){console.error("Erro a extrair cor da imagem:",A)}};return l?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:y.jsxs("div",{className:"text-center",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-gray-200 border-t-blue-600 mx-auto"}),y.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:y.jsx("span",{className:"text-2xl",children:""})})]}),y.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"A carregar o seu convite..."})]})}):!p||!g?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 px-4",children:y.jsx("div",{className:"text-center max-w-md",children:y.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[y.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),y.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Link Invlido"}),y.jsx("p",{className:"text-gray-600",children:"O link de confirmao no  vlido ou expirou. Por favor, contacte a organizao do evento."})]})})}):y.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",style:{backgroundColor:t||"#0f172a"},children:y.jsxs("div",{className:"max-w-3xl w-full bg-white/95 backdrop-blur-md rounded-3xl shadow-2xl overflow-hidden border border-white/40",children:[g!=null&&g.imagem_url?y.jsx("div",{className:"relative w-full h-56 sm:h-72 overflow-hidden",children:y.jsx("img",{src:g.imagem_url,alt:g.nome,className:"w-full h-full object-cover",onLoad:k=>{!g.accent_color&&typeof U=="function"&&U(k.target)}})}):y.jsx("div",{className:"w-full h-32 sm:h-40 flex items-center justify-center text-center px-6",style:{background:`linear-gradient(135deg, ${t}cc, ${t}88)`},children:y.jsxs("div",{children:[y.jsx("p",{className:"text-xs sm:text-sm uppercase tracking-[0.25em] text-white/80 mb-2",children:"Convite para evento"}),y.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:g?g.nome:"Convite"})]})}),y.jsxs("div",{className:"p-6 sm:p-8",children:[g&&y.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-6 mb-8",children:[y.jsxs("div",{className:"flex-1 space-y-3",children:[y.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold text-gray-900",children:g.nome}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-sm text-gray-700",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-lg",children:""}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold",children:"Data"}),y.jsx("p",{children:g.data})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-lg",children:""}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold",children:"Hora"}),y.jsx("p",{children:g.hora})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-lg",children:""}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold",children:"Local"}),y.jsx("p",{children:g.local})]})]})]})]}),p&&y.jsxs("div",{className:"md:w-56 bg-gray-50 rounded-2xl p-4 border border-gray-200",children:[y.jsxs("div",{className:"text-center mb-3",children:[y.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-full mb-2 shadow",children:y.jsx("span",{className:"text-3xl",children:""})}),y.jsx("p",{className:"text-sm font-semibold text-gray-800",children:"Convidado(a)"}),y.jsx("p",{className:"text-sm text-gray-600 truncate",children:p.nome})]}),p.mesa?y.jsxs("div",{className:"mt-2 text-center px-3 py-2 rounded-xl font-semibold",style:{backgroundColor:`${t}15`,color:t},children:[" Mesa ",p.mesa]}):y.jsx("p",{className:"mt-2 text-xs text-gray-500 text-center",children:"A sua mesa ser atribuda pela organizao aps o check-in."})]})]}),l?y.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-600",children:[y.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-gray-200 border-t-blue-600 mb-4"}),y.jsx("p",{children:"A carregar o seu convite"})]}):!p||!g?y.jsxs("div",{className:"text-center py-12",children:[y.jsx("p",{className:"text-red-600 font-semibold mb-2",children:"No foi possvel carregar o convite."}),y.jsx("p",{className:"text-gray-600 text-sm",children:"Verifique se o link est correto ou contacte a organizao."})]}):!E&&!T?y.jsx("div",{className:"text-center",children:y.jsxs("div",{className:"border-2 rounded-2xl p-6 sm:p-7 mb-4",style:{background:`linear-gradient(135deg, ${t}10, #fff)`,borderColor:`${t}33`},children:[y.jsxs("p",{className:"text-gray-700 mb-4 leading-relaxed",children:["Ser uma honra contar com a sua presena no"," ",y.jsx("span",{className:"font-semibold",children:g.nome}),". Por favor, confirme ou rejeite o convite clicando num dos botes abaixo."]}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mt-4",children:[y.jsxs("button",{onClick:I,disabled:l,className:"group relative inline-flex items-center justify-center gap-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-4 rounded-xl text-lg font-semibold hover:from-green-600 hover:to-emerald-700 focus:outline-none focus:ring-4 focus:ring-green-500 focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[y.jsx("span",{className:"text-2xl",children:""}),y.jsx("span",{children:l?"A confirmar...":"Confirmar Presena"})]}),y.jsxs("button",{onClick:L,disabled:l,className:"group relative inline-flex items-center justify-center gap-2 bg-gradient-to-r from-red-500 to-rose-600 text-white px-8 py-4 rounded-xl text-lg font-semibold hover:from-red-600 hover:to-rose-700 focus:outline-none focus:ring-4 focus:ring-red-500 focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[y.jsx("span",{className:"text-2xl",children:""}),y.jsx("span",{children:l?"A processar...":"No Posso Comparecer"})]})]})]})}):E?p.checkin&&p.mesa?y.jsx("div",{className:"space-y-6",children:y.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 border-2 border-emerald-200 rounded-2xl p-6 text-center",children:[y.jsxs("div",{className:"inline-flex items-center justify-center gap-2 text-emerald-700 font-bold text-xl mb-2",children:[y.jsx("span",{className:"text-3xl",children:""}),y.jsx("span",{children:"Bem-vindo(a) ao evento!"})]}),y.jsx("p",{className:"text-emerald-700 mb-4",children:"O seu check-in foi realizado com sucesso."}),y.jsx("p",{className:"text-gray-700 mb-1",children:"A sua mesa para o evento:"}),y.jsxs("p",{className:"text-4xl font-extrabold text-emerald-900 mb-3",children:["Mesa ",p.mesa]}),y.jsx("p",{className:"text-xs text-gray-500 max-w-xs mx-auto",children:"Mostre esta pgina  organizao se precisar de ajuda a encontrar a mesa."})]})}):y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-2xl p-6 text-center",children:[y.jsxs("div",{className:"inline-flex items-center justify-center gap-2 text-green-700 font-bold text-xl mb-2",children:[y.jsx("span",{className:"text-3xl animate-bounce",children:""}),y.jsx("span",{children:"Presena Confirmada!"})]}),y.jsx("p",{className:"text-green-600 mb-4",children:"Obrigado por confirmar a sua presena!"}),r&&y.jsx("p",{className:"text-xs text-green-700 mb-2",children:"Assim que o seu check-in for efetuado e a mesa atribuda, esta pgina ser atualizada automaticamente."}),y.jsx("button",{onClick:L,disabled:l,className:"text-sm text-red-600 hover:text-red-700 underline",children:"Alterar resposta (no posso comparecer)"})]}),y.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-2xl p-6 sm:p-8 border border-gray-200",children:[y.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[y.jsx("span",{className:"text-2xl",children:""}),y.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"O seu QR Code para Check-in"})]}),y.jsx("div",{ref:P,className:"flex justify-center mb-6",children:y.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-xl border-4 border-blue-100",children:y.jsx(Cb,{value:j,size:200,level:"H",includeMargin:!0})})}),y.jsx("p",{className:"text-center text-gray-600 mb-4 text-sm sm:text-base",children:"Apresente este QR Code na entrada do evento para fazer check-in rapidamente."}),y.jsxs("button",{onClick:G,className:"w-full sm:w-auto mx-auto flex items-center justify-center gap-2 px-6 py-3 border-2 border-blue-300 rounded-xl text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all duration-300 font-medium",children:[y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Descarregar QR Code"]})]}),y.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("span",{className:"text-2xl flex-shrink-0",children:""}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-bold text-blue-900 mb-3 text-lg",children:"Informaes importantes:"}),y.jsxs("ul",{className:"space-y-2 text-blue-700 text-sm",children:[y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx("span",{className:"text-blue-500 font-bold",children:""}),y.jsx("span",{children:"Guarde este QR Code no seu telemvel ou imprima-o."})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx("span",{className:"text-blue-500 font-bold",children:""}),y.jsx("span",{children:"Apresente-o na entrada para agilizar o check-in."})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx("span",{className:"text-blue-500 font-bold",children:""}),y.jsx("span",{children:"Cada QR Code  nico e intransmissvel."})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx("span",{className:"text-blue-500 font-bold",children:""}),y.jsx("span",{children:"Em caso de dvidas, contacte a organizao."})]})]})]})]})})]}):y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 border-2 border-red-200 rounded-2xl p-6 text-center",children:[y.jsxs("div",{className:"inline-flex items-center justify-center gap-2 text-red-700 font-bold text-xl mb-2",children:[y.jsx("span",{className:"text-3xl",children:""}),y.jsx("span",{children:"Presena No Confirmada"})]}),y.jsx("p",{className:"text-red-600 mb-4",children:"Lamentamos que no possa estar presente!"}),y.jsx("button",{onClick:I,disabled:l,className:"text-sm text-green-600 hover:text-green-700 underline",children:"Alterar resposta (confirmar presena)"})]}),y.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-2xl p-6 border border-gray-200 text-center",children:y.jsx("p",{className:"text-gray-600 text-sm",children:"Caso mude de ideias, pode alterar a sua resposta a qualquer momento clicando no boto acima."})})]})]})]})})}var ye;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ye||(ye={}));var W0=new Map([[ye.QR_CODE,"QR_CODE"],[ye.AZTEC,"AZTEC"],[ye.CODABAR,"CODABAR"],[ye.CODE_39,"CODE_39"],[ye.CODE_93,"CODE_93"],[ye.CODE_128,"CODE_128"],[ye.DATA_MATRIX,"DATA_MATRIX"],[ye.MAXICODE,"MAXICODE"],[ye.ITF,"ITF"],[ye.EAN_13,"EAN_13"],[ye.EAN_8,"EAN_8"],[ye.PDF_417,"PDF_417"],[ye.RSS_14,"RSS_14"],[ye.RSS_EXPANDED,"RSS_EXPANDED"],[ye.UPC_A,"UPC_A"],[ye.UPC_E,"UPC_E"],[ye.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),H0;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(H0||(H0={}));function Sb(t){return Object.values(ye).includes(t)}var Dl;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Dl||(Dl={}));var Ib=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Dl.SCAN_TYPE_CAMERA,Dl.SCAN_TYPE_FILE],t}(),Lp=function(){function t(e,r){this.format=e,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!W0.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,W0.get(e))},t}(),G0=function(){function t(){}return t.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),xd;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(xd||(xd={}));var Nb=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:xd.UNKWOWN_ERROR}},t}(),Tb=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Cn(t){return typeof t>"u"||t===null}var Cs=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),jp=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var s=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(s,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(a),h=Object.keys(e),p=0,m=h;p<m.length;p++){var g=m[p];if(l.has(g))return r.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},t}(),wd={exports:{}};(function(t,e){(function(r,s){s(e)})(cs,function(r){function s(C){return C==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,n){C.__proto__=n}||function(C,n){for(var i in n)n.hasOwnProperty(i)&&(C[i]=n[i])};function l(C,n){a(C,n);function i(){this.constructor=C}C.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}function h(C,n){var i=Object.setPrototypeOf;i?i(C,n):C.__proto__=n}function p(C,n){n===void 0&&(n=C.constructor);var i=Error.captureStackTrace;i&&i(C,n)}var m=function(C){l(n,C);function n(i){var o=this.constructor,c=C.call(this,i)||this;return Object.defineProperty(c,"name",{value:o.name,enumerable:!1}),h(c,o.prototype),p(c),c}return n}(Error);class g extends m{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}g.kind="Exception";class v extends g{}v.kind="ArgumentException";class E extends g{}E.kind="IllegalArgumentException";class _{constructor(n){if(this.binarizer=n,n===null)throw new E("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,i){return this.binarizer.getBlackRow(n,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,i,o,c){const u=this.binarizer.getLuminanceSource().crop(n,i,o,c);return new _(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class T extends g{static getChecksumInstance(){return new T}}T.kind="ChecksumException";class O{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class j{static arraycopy(n,i,o,c,u){for(;u--;)o[c++]=n[i++]}static currentTimeMillis(){return Date.now()}}class B extends g{}B.kind="IndexOutOfBoundsException";class P extends B{constructor(n=void 0,i=void 0){super(i),this.index=n,this.message=i}}P.kind="ArrayIndexOutOfBoundsException";class N{static fill(n,i){for(let o=0,c=n.length;o<c;o++)n[o]=i}static fillWithin(n,i,o,c){N.rangeCheck(n.length,i,o);for(let u=i;u<o;u++)n[u]=c}static rangeCheck(n,i,o){if(i>o)throw new E("fromIndex("+i+") > toIndex("+o+")");if(i<0)throw new P(i);if(o>n)throw new P(o)}static asList(...n){return n}static create(n,i,o){return Array.from({length:n}).map(u=>Array.from({length:i}).fill(o))}static createInt32Array(n,i,o){return Array.from({length:n}).map(u=>Int32Array.from({length:i}).fill(o))}static equals(n,i){if(!n||!i||!n.length||!i.length||n.length!==i.length)return!1;for(let o=0,c=n.length;o<c;o++)if(n[o]!==i[o])return!1;return!0}static hashCode(n){if(n===null)return 0;let i=1;for(const o of n)i=31*i+o;return i}static fillUint8Array(n,i){for(let o=0;o!==n.length;o++)n[o]=i}static copyOf(n,i){return n.slice(0,i)}static copyOfUint8Array(n,i){if(n.length<=i){const o=new Uint8Array(i);return o.set(n),o}return n.slice(0,i)}static copyOfRange(n,i,o){const c=o-i,u=new Int32Array(c);return j.arraycopy(n,i,u,0,c),u}static binarySearch(n,i,o){o===void 0&&(o=N.numberComparator);let c=0,u=n.length-1;for(;c<=u;){const d=u+c>>1,f=o(i,n[d]);if(f>0)c=d+1;else if(f<0)u=d-1;else return d}return-c-1}static numberComparator(n,i){return n-i}}class I{static numberOfTrailingZeros(n){let i;if(n===0)return 32;let o=31;return i=n<<16,i!==0&&(o-=16,n=i),i=n<<8,i!==0&&(o-=8,n=i),i=n<<4,i!==0&&(o-=4,n=i),i=n<<2,i!==0&&(o-=2,n=i),o-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let i=1;return n>>>16||(i+=16,n<<=16),n>>>24||(i+=8,n<<=8),n>>>28||(i+=4,n<<=4),n>>>30||(i+=2,n<<=2),i-=n>>>31,i}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,i){return Math.trunc(n/i)}static parseInt(n,i=void 0){return parseInt(n,i)}}I.MIN_VALUE_32_BITS=-2147483648,I.MAX_VALUE=Number.MAX_SAFE_INTEGER;class L{constructor(n,i){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,i==null?this.bits=L.makeArray(n):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const i=L.makeArray(n);j.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const i=this.size;if(n>=i)return i;const o=this.bits;let c=Math.floor(n/32),u=o[c];u&=~((1<<(n&31))-1);const d=o.length;for(;u===0;){if(++c===d)return i;u=o[c]}const f=c*32+I.numberOfTrailingZeros(u);return f>i?i:f}getNextUnset(n){const i=this.size;if(n>=i)return i;const o=this.bits;let c=Math.floor(n/32),u=~o[c];u&=~((1<<(n&31))-1);const d=o.length;for(;u===0;){if(++c===d)return i;u=~o[c]}const f=c*32+I.numberOfTrailingZeros(u);return f>i?i:f}setBulk(n,i){this.bits[Math.floor(n/32)]=i}setRange(n,i){if(i<n||n<0||i>this.size)throw new E;if(i===n)return;i--;const o=Math.floor(n/32),c=Math.floor(i/32),u=this.bits;for(let d=o;d<=c;d++){const f=d>o?0:n&31,w=(2<<(d<c?31:i&31))-(1<<f);u[d]|=w}}clear(){const n=this.bits.length,i=this.bits;for(let o=0;o<n;o++)i[o]=0}isRange(n,i,o){if(i<n||n<0||i>this.size)throw new E;if(i===n)return!0;i--;const c=Math.floor(n/32),u=Math.floor(i/32),d=this.bits;for(let f=c;f<=u;f++){const x=f>c?0:n&31,b=(2<<(f<u?31:i&31))-(1<<x)&4294967295;if((d[f]&b)!==(o?b:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,i){if(i<0||i>32)throw new E("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let o=i;o>0;o--)this.appendBit((n>>o-1&1)===1)}appendBitArray(n){const i=n.size;this.ensureCapacity(this.size+i);for(let o=0;o<i;o++)this.appendBit(n.get(o))}xor(n){if(this.size!==n.size)throw new E("Sizes don't match");const i=this.bits;for(let o=0,c=i.length;o<c;o++)i[o]^=n.bits[o]}toBytes(n,i,o,c){for(let u=0;u<c;u++){let d=0;for(let f=0;f<8;f++)this.get(n)&&(d|=1<<7-f),n++;i[o+u]=d}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),o=i+1,c=this.bits;for(let u=0;u<o;u++){let d=c[u];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,n[i-u]=d}if(this.size!==o*32){const u=o*32-this.size;let d=n[0]>>>u;for(let f=1;f<o;f++){const x=n[f];d|=x<<32-u,n[f-1]=d,d=x>>>u}n[o-1]=d}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof L))return!1;const i=n;return this.size===i.size&&N.equals(this.bits,i.bits)}hashCode(){return 31*this.size+N.hashCode(this.bits)}toString(){let n="";for(let i=0,o=this.size;i<o;i++)i&7||(n+=" "),n+=this.get(i)?"X":".";return n}clone(){return new L(this.size,this.bits.slice())}}var W;(function(C){C[C.OTHER=0]="OTHER",C[C.PURE_BARCODE=1]="PURE_BARCODE",C[C.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",C[C.TRY_HARDER=3]="TRY_HARDER",C[C.CHARACTER_SET=4]="CHARACTER_SET",C[C.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",C[C.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",C[C.ASSUME_GS1=7]="ASSUME_GS1",C[C.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",C[C.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",C[C.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(W||(W={}));var G=W;class U extends g{static getFormatInstance(){return new U}}U.kind="FormatException";var k;(function(C){C[C.Cp437=0]="Cp437",C[C.ISO8859_1=1]="ISO8859_1",C[C.ISO8859_2=2]="ISO8859_2",C[C.ISO8859_3=3]="ISO8859_3",C[C.ISO8859_4=4]="ISO8859_4",C[C.ISO8859_5=5]="ISO8859_5",C[C.ISO8859_6=6]="ISO8859_6",C[C.ISO8859_7=7]="ISO8859_7",C[C.ISO8859_8=8]="ISO8859_8",C[C.ISO8859_9=9]="ISO8859_9",C[C.ISO8859_10=10]="ISO8859_10",C[C.ISO8859_11=11]="ISO8859_11",C[C.ISO8859_13=12]="ISO8859_13",C[C.ISO8859_14=13]="ISO8859_14",C[C.ISO8859_15=14]="ISO8859_15",C[C.ISO8859_16=15]="ISO8859_16",C[C.SJIS=16]="SJIS",C[C.Cp1250=17]="Cp1250",C[C.Cp1251=18]="Cp1251",C[C.Cp1252=19]="Cp1252",C[C.Cp1256=20]="Cp1256",C[C.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",C[C.UTF8=22]="UTF8",C[C.ASCII=23]="ASCII",C[C.Big5=24]="Big5",C[C.GB18030=25]="GB18030",C[C.EUC_KR=26]="EUC_KR"})(k||(k={}));class A{constructor(n,i,o,...c){this.valueIdentifier=n,this.name=o,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=c,A.VALUE_IDENTIFIER_TO_ECI.set(n,this),A.NAME_TO_ECI.set(o,this);const u=this.values;for(let d=0,f=u.length;d!==f;d++){const x=u[d];A.VALUES_TO_ECI.set(x,this)}for(const d of c)A.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new U("incorect value");const i=A.VALUES_TO_ECI.get(n);if(i===void 0)throw new U("incorect value");return i}static getCharacterSetECIByName(n){const i=A.NAME_TO_ECI.get(n);if(i===void 0)throw new U("incorect value");return i}equals(n){if(!(n instanceof A))return!1;const i=n;return this.getName()===i.getName()}}A.VALUE_IDENTIFIER_TO_ECI=new Map,A.VALUES_TO_ECI=new Map,A.NAME_TO_ECI=new Map,A.Cp437=new A(k.Cp437,Int32Array.from([0,2]),"Cp437"),A.ISO8859_1=new A(k.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),A.ISO8859_2=new A(k.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),A.ISO8859_3=new A(k.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),A.ISO8859_4=new A(k.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),A.ISO8859_5=new A(k.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),A.ISO8859_6=new A(k.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),A.ISO8859_7=new A(k.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),A.ISO8859_8=new A(k.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),A.ISO8859_9=new A(k.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),A.ISO8859_10=new A(k.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),A.ISO8859_11=new A(k.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),A.ISO8859_13=new A(k.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),A.ISO8859_14=new A(k.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),A.ISO8859_15=new A(k.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),A.ISO8859_16=new A(k.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),A.SJIS=new A(k.SJIS,20,"SJIS","Shift_JIS"),A.Cp1250=new A(k.Cp1250,21,"Cp1250","windows-1250"),A.Cp1251=new A(k.Cp1251,22,"Cp1251","windows-1251"),A.Cp1252=new A(k.Cp1252,23,"Cp1252","windows-1252"),A.Cp1256=new A(k.Cp1256,24,"Cp1256","windows-1256"),A.UnicodeBigUnmarked=new A(k.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),A.UTF8=new A(k.UTF8,26,"UTF8","UTF-8"),A.ASCII=new A(k.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),A.Big5=new A(k.Big5,28,"Big5"),A.GB18030=new A(k.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),A.EUC_KR=new A(k.EUC_KR,30,"EUC_KR","EUC-KR");class F extends g{}F.kind="UnsupportedOperationException";class J{static decode(n,i){const o=this.encodingName(i);return this.customDecoder?this.customDecoder(n,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(n,o):new TextDecoder(o).decode(n)}static shouldDecodeOnFallback(n){return!J.isBrowser()&&n==="ISO-8859-1"}static encode(n,i){const o=this.encodingName(i);return this.customEncoder?this.customEncoder(n,o):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof A?n:A.getCharacterSetECIByName(n)}static decodeFallback(n,i){const o=this.encodingCharacterSet(i);if(J.isDecodeFallbackSupported(o)){let c="";for(let u=0,d=n.length;u<d;u++){let f=n[u].toString(16);f.length<2&&(f="0"+f),c+="%"+f}return decodeURIComponent(c)}if(o.equals(A.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new F(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(A.UTF8)||n.equals(A.ISO8859_1)||n.equals(A.ASCII)}static encodeFallback(n){const o=btoa(unescape(encodeURIComponent(n))).split(""),c=[];for(let u=0;u<o.length;u++)c.push(o[u].charCodeAt(0));return new Uint8Array(c)}}class X{static castAsNonUtf8Char(n,i=null){const o=i?i.getName():this.ISO88591;return J.decode(new Uint8Array([n]),o)}static guessEncoding(n,i){if(i!=null&&i.get(G.CHARACTER_SET)!==void 0)return i.get(G.CHARACTER_SET).toString();const o=n.length;let c=!0,u=!0,d=!0,f=0,x=0,w=0,b=0,S=0,R=0,M=0,z=0,V=0,$=0,Z=0;const ae=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let le=0;le<o&&(c||u||d);le++){const ie=n[le]&255;d&&(f>0?ie&128?f--:d=!1:ie&128&&(ie&64?(f++,ie&32?(f++,ie&16?(f++,ie&8?d=!1:b++):w++):x++):d=!1)),c&&(ie>127&&ie<160?c=!1:ie>159&&(ie<192||ie===215||ie===247)&&Z++),u&&(S>0?ie<64||ie===127||ie>252?u=!1:S--:ie===128||ie===160||ie>239?u=!1:ie>160&&ie<224?(R++,z=0,M++,M>V&&(V=M)):ie>127?(S++,M=0,z++,z>$&&($=z)):(M=0,z=0))}return d&&f>0&&(d=!1),u&&S>0&&(u=!1),d&&(ae||x+w+b>0)?X.UTF8:u&&(X.ASSUME_SHIFT_JIS||V>=3||$>=3)?X.SHIFT_JIS:c&&u?V===2&&R===2||Z*10>=o?X.SHIFT_JIS:X.ISO88591:c?X.ISO88591:u?X.SHIFT_JIS:d?X.UTF8:X.PLATFORM_DEFAULT_ENCODING}static format(n,...i){let o=-1;function c(d,f,x,w,b,S){if(d==="%%")return"%";if(i[++o]===void 0)return;d=w?parseInt(w.substr(1)):void 0;let R=b?parseInt(b.substr(1)):void 0,M;switch(S){case"s":M=i[o];break;case"c":M=i[o][0];break;case"f":M=parseFloat(i[o]).toFixed(d);break;case"p":M=parseFloat(i[o]).toPrecision(d);break;case"e":M=parseFloat(i[o]).toExponential(d);break;case"x":M=parseInt(i[o]).toString(R||16);break;case"d":M=parseFloat(parseInt(i[o],R||10).toPrecision(d)).toFixed(0);break}M=typeof M=="object"?JSON.stringify(M):(+M).toString(R);let z=parseInt(x),V=x&&x[0]+""=="0"?"0":" ";for(;M.length<z;)M=f!==void 0?M+V:V+M;return M}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(u,c)}static getBytes(n,i){return J.encode(n,i)}static getCharCode(n,i=0){return n.charCodeAt(i)}static getCharAt(n){return String.fromCharCode(n)}}X.SHIFT_JIS=A.SJIS.getName(),X.GB2312="GB2312",X.ISO88591=A.ISO8859_1.getName(),X.EUC_JP="EUC_JP",X.UTF8=A.UTF8.getName(),X.PLATFORM_DEFAULT_ENCODING=X.UTF8,X.ASSUME_SHIFT_JIS=!1;class se{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=X.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,i,o){for(let c=i;i<i+o;c++)this.append(n[c]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,i){this.value=this.value.substr(0,n)+i+this.value.substr(n+1)}substring(n,i){return this.value.substring(n,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,i){this.value=this.value.substr(0,n)+i+this.value.substr(n+i.length)}}class xe{constructor(n,i,o,c){if(this.width=n,this.height=i,this.rowSize=o,this.bits=c,i==null&&(i=n),this.height=i,n<1||i<1)throw new E("Both dimensions must be greater than 0");o==null&&(o=Math.floor((n+31)/32)),this.rowSize=o,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const i=n.length,o=n[0].length,c=new xe(o,i);for(let u=0;u<i;u++){const d=n[u];for(let f=0;f<o;f++)d[f]&&c.set(f,u)}return c}static parseFromString(n,i,o){if(n===null)throw new E("stringRepresentation cannot be null");const c=new Array(n.length);let u=0,d=0,f=-1,x=0,w=0;for(;w<n.length;)if(n.charAt(w)===`
`||n.charAt(w)==="\r"){if(u>d){if(f===-1)f=u-d;else if(u-d!==f)throw new E("row lengths do not match");d=u,x++}w++}else if(n.substring(w,w+i.length)===i)w+=i.length,c[u]=!0,u++;else if(n.substring(w,w+o.length)===o)w+=o.length,c[u]=!1,u++;else throw new E("illegal character encountered: "+n.substring(w));if(u>d){if(f===-1)f=u-d;else if(u-d!==f)throw new E("row lengths do not match");x++}const b=new xe(f,x);for(let S=0;S<u;S++)c[S]&&b.set(Math.floor(S%f),Math.floor(S/f));return b}get(n,i){const o=i*this.rowSize+Math.floor(n/32);return(this.bits[o]>>>(n&31)&1)!==0}set(n,i){const o=i*this.rowSize+Math.floor(n/32);this.bits[o]|=1<<(n&31)&4294967295}unset(n,i){const o=i*this.rowSize+Math.floor(n/32);this.bits[o]&=~(1<<(n&31)&4294967295)}flip(n,i){const o=i*this.rowSize+Math.floor(n/32);this.bits[o]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new E("input matrix dimensions do not match");const i=new L(Math.floor(this.width/32)+1),o=this.rowSize,c=this.bits;for(let u=0,d=this.height;u<d;u++){const f=u*o,x=n.getRow(u,i).getBitArray();for(let w=0;w<o;w++)c[f+w]^=x[w]}}clear(){const n=this.bits,i=n.length;for(let o=0;o<i;o++)n[o]=0}setRegion(n,i,o,c){if(i<0||n<0)throw new E("Left and top must be nonnegative");if(c<1||o<1)throw new E("Height and width must be at least 1");const u=n+o,d=i+c;if(d>this.height||u>this.width)throw new E("The region must fit inside the matrix");const f=this.rowSize,x=this.bits;for(let w=i;w<d;w++){const b=w*f;for(let S=n;S<u;S++)x[b+Math.floor(S/32)]|=1<<(S&31)&4294967295}}getRow(n,i){i==null||i.getSize()<this.width?i=new L(this.width):i.clear();const o=this.rowSize,c=this.bits,u=n*o;for(let d=0;d<o;d++)i.setBulk(d*32,c[u+d]);return i}setRow(n,i){j.arraycopy(i.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),i=this.getHeight();let o=new L(n),c=new L(n);for(let u=0,d=Math.floor((i+1)/2);u<d;u++)o=this.getRow(u,o),c=this.getRow(i-1-u,c),o.reverse(),c.reverse(),this.setRow(u,c),this.setRow(i-1-u,o)}getEnclosingRectangle(){const n=this.width,i=this.height,o=this.rowSize,c=this.bits;let u=n,d=i,f=-1,x=-1;for(let w=0;w<i;w++)for(let b=0;b<o;b++){const S=c[w*o+b];if(S!==0){if(w<d&&(d=w),w>x&&(x=w),b*32<u){let R=0;for(;!(S<<31-R&4294967295);)R++;b*32+R<u&&(u=b*32+R)}if(b*32+31>f){let R=31;for(;!(S>>>R);)R--;b*32+R>f&&(f=b*32+R)}}}return f<u||x<d?null:Int32Array.from([u,d,f-u+1,x-d+1])}getTopLeftOnBit(){const n=this.rowSize,i=this.bits;let o=0;for(;o<i.length&&i[o]===0;)o++;if(o===i.length)return null;const c=o/n;let u=o%n*32;const d=i[o];let f=0;for(;!(d<<31-f&4294967295);)f++;return u+=f,Int32Array.from([u,c])}getBottomRightOnBit(){const n=this.rowSize,i=this.bits;let o=i.length-1;for(;o>=0&&i[o]===0;)o--;if(o<0)return null;const c=Math.floor(o/n);let u=Math.floor(o%n)*32;const d=i[o];let f=31;for(;!(d>>>f);)f--;return u+=f,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof xe))return!1;const i=n;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&N.equals(this.bits,i.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+N.hashCode(this.bits),n}toString(n="X ",i="  ",o=`
`){return this.buildToString(n,i,o)}buildToString(n,i,o){let c=new se;for(let u=0,d=this.height;u<d;u++){for(let f=0,x=this.width;f<x;f++)c.append(this.get(f,u)?n:i);c.append(o)}return c.toString()}clone(){return new xe(this.width,this.height,this.rowSize,this.bits.slice())}}class K extends g{static getNotFoundInstance(){return new K}}K.kind="NotFoundException";class Q extends O{constructor(n){super(n),this.luminances=Q.EMPTY,this.buckets=new Int32Array(Q.LUMINANCE_BUCKETS)}getBlackRow(n,i){const o=this.getLuminanceSource(),c=o.getWidth();i==null||i.getSize()<c?i=new L(c):i.clear(),this.initArrays(c);const u=o.getRow(n,this.luminances),d=this.buckets;for(let x=0;x<c;x++)d[(u[x]&255)>>Q.LUMINANCE_SHIFT]++;const f=Q.estimateBlackPoint(d);if(c<3)for(let x=0;x<c;x++)(u[x]&255)<f&&i.set(x);else{let x=u[0]&255,w=u[1]&255;for(let b=1;b<c-1;b++){const S=u[b+1]&255;(w*4-x-S)/2<f&&i.set(b),x=w,w=S}}return i}getBlackMatrix(){const n=this.getLuminanceSource(),i=n.getWidth(),o=n.getHeight(),c=new xe(i,o);this.initArrays(i);const u=this.buckets;for(let x=1;x<5;x++){const w=Math.floor(o*x/5),b=n.getRow(w,this.luminances),S=Math.floor(i*4/5);for(let R=Math.floor(i/5);R<S;R++){const M=b[R]&255;u[M>>Q.LUMINANCE_SHIFT]++}}const d=Q.estimateBlackPoint(u),f=n.getMatrix();for(let x=0;x<o;x++){const w=x*i;for(let b=0;b<i;b++)(f[w+b]&255)<d&&c.set(b,x)}return c}createBinarizer(n){return new Q(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const i=this.buckets;for(let o=0;o<Q.LUMINANCE_BUCKETS;o++)i[o]=0}static estimateBlackPoint(n){const i=n.length;let o=0,c=0,u=0;for(let b=0;b<i;b++)n[b]>u&&(c=b,u=n[b]),n[b]>o&&(o=n[b]);let d=0,f=0;for(let b=0;b<i;b++){const S=b-c,R=n[b]*S*S;R>f&&(d=b,f=R)}if(c>d){const b=c;c=d,d=b}if(d-c<=i/16)throw new K;let x=d-1,w=-1;for(let b=d-1;b>c;b--){const S=b-c,R=S*S*(d-b)*(o-n[b]);R>w&&(x=b,w=R)}return x<<Q.LUMINANCE_SHIFT}}Q.LUMINANCE_BITS=5,Q.LUMINANCE_SHIFT=8-Q.LUMINANCE_BITS,Q.LUMINANCE_BUCKETS=1<<Q.LUMINANCE_BITS,Q.EMPTY=Uint8ClampedArray.from([0]);class te extends Q{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),i=n.getWidth(),o=n.getHeight();if(i>=te.MINIMUM_DIMENSION&&o>=te.MINIMUM_DIMENSION){const c=n.getMatrix();let u=i>>te.BLOCK_SIZE_POWER;i&te.BLOCK_SIZE_MASK&&u++;let d=o>>te.BLOCK_SIZE_POWER;o&te.BLOCK_SIZE_MASK&&d++;const f=te.calculateBlackPoints(c,u,d,i,o),x=new xe(i,o);te.calculateThresholdForBlock(c,u,d,i,o,f,x),this.matrix=x}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new te(n)}static calculateThresholdForBlock(n,i,o,c,u,d,f){const x=u-te.BLOCK_SIZE,w=c-te.BLOCK_SIZE;for(let b=0;b<o;b++){let S=b<<te.BLOCK_SIZE_POWER;S>x&&(S=x);const R=te.cap(b,2,o-3);for(let M=0;M<i;M++){let z=M<<te.BLOCK_SIZE_POWER;z>w&&(z=w);const V=te.cap(M,2,i-3);let $=0;for(let ae=-2;ae<=2;ae++){const le=d[R+ae];$+=le[V-2]+le[V-1]+le[V]+le[V+1]+le[V+2]}const Z=$/25;te.thresholdBlock(n,z,S,Z,c,f)}}}static cap(n,i,o){return n<i?i:n>o?o:n}static thresholdBlock(n,i,o,c,u,d){for(let f=0,x=o*u+i;f<te.BLOCK_SIZE;f++,x+=u)for(let w=0;w<te.BLOCK_SIZE;w++)(n[x+w]&255)<=c&&d.set(i+w,o+f)}static calculateBlackPoints(n,i,o,c,u){const d=u-te.BLOCK_SIZE,f=c-te.BLOCK_SIZE,x=new Array(o);for(let w=0;w<o;w++){x[w]=new Int32Array(i);let b=w<<te.BLOCK_SIZE_POWER;b>d&&(b=d);for(let S=0;S<i;S++){let R=S<<te.BLOCK_SIZE_POWER;R>f&&(R=f);let M=0,z=255,V=0;for(let Z=0,ae=b*c+R;Z<te.BLOCK_SIZE;Z++,ae+=c){for(let le=0;le<te.BLOCK_SIZE;le++){const ie=n[ae+le]&255;M+=ie,ie<z&&(z=ie),ie>V&&(V=ie)}if(V-z>te.MIN_DYNAMIC_RANGE)for(Z++,ae+=c;Z<te.BLOCK_SIZE;Z++,ae+=c)for(let le=0;le<te.BLOCK_SIZE;le++)M+=n[ae+le]&255}let $=M>>te.BLOCK_SIZE_POWER*2;if(V-z<=te.MIN_DYNAMIC_RANGE&&($=z/2,w>0&&S>0)){const Z=(x[w-1][S]+2*x[w][S-1]+x[w-1][S-1])/4;z<Z&&($=Z)}x[w][S]=$}}return x}}te.BLOCK_SIZE_POWER=3,te.BLOCK_SIZE=1<<te.BLOCK_SIZE_POWER,te.BLOCK_SIZE_MASK=te.BLOCK_SIZE-1,te.MINIMUM_DIMENSION=te.BLOCK_SIZE*5,te.MIN_DYNAMIC_RANGE=24;class ee{constructor(n,i){this.width=n,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,i,o,c){throw new F("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new F("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new F("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let i=new se;for(let o=0;o<this.height;o++){const c=this.getRow(o,n);for(let u=0;u<this.width;u++){const d=c[u]&255;let f;d<64?f="#":d<128?f="+":d<192?f=".":f=" ",i.append(f)}i.append(`
`)}return i.toString()}}class re extends ee{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,i){const o=this.delegate.getRow(n,i),c=this.getWidth();for(let u=0;u<c;u++)o[u]=255-(o[u]&255);return o}getMatrix(){const n=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(i);for(let c=0;c<i;c++)o[c]=255-(n[c]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(n,i,o,c){return new re(this.delegate.crop(n,i,o,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new re(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new re(this.delegate.rotateCounterClockwise45())}}class he extends ee{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=he.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const i=n.getContext("2d").getImageData(0,0,n.width,n.height);return he.toGrayscaleBuffer(i.data,n.width,n.height)}static toGrayscaleBuffer(n,i,o){const c=new Uint8ClampedArray(i*o);for(let u=0,d=0,f=n.length;u<f;u+=4,d++){let x;if(n[u+3]===0)x=255;else{const b=n[u],S=n[u+1],R=n[u+2];x=306*b+601*S+117*R+512>>10}c[d]=x}return c}getRow(n,i){if(n<0||n>=this.getHeight())throw new E("Requested row is outside the image: "+n);const o=this.getWidth(),c=n*o;return i===null?i=this.buffer.slice(c,c+o):(i.length<o&&(i=new Uint8ClampedArray(o)),i.set(this.buffer.slice(c,c+o))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,i,o,c){return super.crop(n,i,o,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const i=this.getTempCanvasElement(),o=i.getContext("2d"),c=n*he.DEGREE_TO_RADIANS,u=this.canvas.width,d=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*d),x=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*d);return i.width=f,i.height=x,o.translate(f/2,x/2),o.rotate(c),o.drawImage(this.canvas,u/-2,d/-2),this.buffer=he.makeBufferFromCanvasImageData(i),this}invert(){return new re(this)}}he.DEGREE_TO_RADIANS=Math.PI/180;class fe{constructor(n,i,o){this.deviceId=n,this.label=i,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ue=(globalThis||cs||self||window||void 0)&&(globalThis||cs||self||window||void 0).__awaiter||function(C,n,i,o){function c(u){return u instanceof i?u:new i(function(d){d(u)})}return new(i||(i=Promise))(function(u,d){function f(b){try{w(o.next(b))}catch(S){d(S)}}function x(b){try{w(o.throw(b))}catch(S){d(S)}}function w(b){b.done?u(b.value):c(b.value).then(f,x)}w((o=o.apply(C,n||[])).next())})};class me{constructor(n,i=500,o){this.reader=n,this.timeBetweenScansMillis=i,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return ue(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const o of n){const c=o.kind==="video"?"videoinput":o.kind;if(c!=="videoinput")continue;const u=o.deviceId||o.id,d=o.label||`Video device ${i.length+1}`,f=o.groupId,x={deviceId:u,label:d,kind:c,groupId:f};i.push(x)}return i})}getVideoInputDevices(){return ue(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new fe(i.deviceId,i.label))})}findDeviceById(n){return ue(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(o=>o.deviceId===n):null})}decodeFromInputVideoDevice(n,i){return ue(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,i)})}decodeOnceFromVideoDevice(n,i){return ue(this,void 0,void 0,function*(){this.reset();let o;n?o={deviceId:{exact:n}}:o={facingMode:"environment"};const c={video:o};return yield this.decodeOnceFromConstraints(c,i)})}decodeOnceFromConstraints(n,i){return ue(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(o,i)})}decodeOnceFromStream(n,i){return ue(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(n,i);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(n,i,o){return ue(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,i,o)})}decodeFromVideoDevice(n,i,o){return ue(this,void 0,void 0,function*(){let c;n?c={deviceId:{exact:n}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeFromConstraints(u,i,o)})}decodeFromConstraints(n,i,o){return ue(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(c,i,o)})}decodeFromStream(n,i,o){return ue(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(n,i);return yield this.decodeContinuously(c,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,i){return ue(this,void 0,void 0,function*(){const o=this.prepareVideoElement(i);return this.addVideoSource(o,n),this.videoElement=o,this.stream=n,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(n){return new Promise((i,o)=>this.playVideoOnLoad(n,()=>i()))}playVideoOnLoad(n,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",i),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return ue(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,i){const o=document.getElementById(n);if(!o)throw new v(`element with id '${n}' not found`);if(o.nodeName.toLowerCase()!==i.toLowerCase())throw new v(`element with id '${n}' must be an ${i} element`);return o}decodeFromImage(n,i){if(!n&&!i)throw new v("either imageElement with a src set or an url must be provided");return i&&!n?this.decodeFromImageUrl(i):this.decodeFromImageElement(n)}decodeFromVideo(n,i){if(!n&&!i)throw new v("Either an element with a src set or an URL must be provided");return i&&!n?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,i,o){if(n===void 0&&i===void 0)throw new v("Either an element with a src set or an URL must be provided");return i&&!n?this.decodeFromVideoUrlContinuously(i,o):this.decodeFromVideoElementContinuously(n,o)}decodeFromImageElement(n){if(!n)throw new v("An image element must be provided.");this.reset();const i=this.prepareImageElement(n);this.imageElement=i;let o;return this.isImageLoaded(i)?o=this.decodeOnce(i,!1,!0):o=this._decodeOnLoadImage(i),o}decodeFromVideoElement(n){const i=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(n,i){const o=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(o,i)}_decodeFromVideoElementSetup(n){if(!n)throw new v("A video element must be provided.");this.reset();const i=this.prepareVideoElement(n);return this.videoElement=i,i}decodeFromImageUrl(n){if(!n)throw new v("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const o=this._decodeOnLoadImage(i);return i.src=n,o}decodeFromVideoUrl(n){if(!n)throw new v("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),o=this.decodeFromVideoElement(i);return i.src=n,o}decodeFromVideoUrlContinuously(n,i){if(!n)throw new v("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(o,i);return o.src=n,c}_decodeOnLoadImage(n){return new Promise((i,o)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(i,o),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return ue(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,i){return ue(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,i)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let i;return typeof n>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof n=="string"&&(i=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(i=n),i}prepareVideoElement(n){let i;return!n&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof n=="string"&&(i=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(i=n),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(n,i=!0,o=!0){this._stopAsyncDecode=!1;const c=(u,d)=>{if(this._stopAsyncDecode){d(new K("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const f=this.decode(n);u(f)}catch(f){const x=i&&f instanceof K,b=(f instanceof T||f instanceof U)&&o;if(x||b)return setTimeout(c,this._timeBetweenDecodingAttempts,u,d);d(f)}};return new Promise((u,d)=>c(u,d))}decodeContinuously(n,i){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(n);i(c,null),setTimeout(o,this.timeBetweenScansMillis)}catch(c){i(null,c);const u=c instanceof T||c instanceof U,d=c instanceof K;(u||d)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(n){const i=this.createBinaryBitmap(n);return this.decodeBitmap(i)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,i,o){i||(i={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(n,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(n,i,o=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(n,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const i=this.getCaptureCanvas(n),o=new he(i),c=new te(o);return new _(c)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const i=this.createCaptureCanvas(n);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let o,c;return typeof n<"u"&&(n instanceof HTMLVideoElement?(o=n.videoWidth,c=n.videoHeight):n instanceof HTMLImageElement&&(o=n.naturalWidth||n.width,c=n.naturalHeight||n.height)),i.style.width=o+"px",i.style.height=c+"px",i.width=o,i.height=c,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,i){try{n.srcObject=i}catch{n.src=URL.createObjectURL(i)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class Pe{constructor(n,i,o=i==null?0:8*i.length,c,u,d=j.currentTimeMillis()){this.text=n,this.rawBytes=i,this.numBits=o,this.resultPoints=c,this.format=u,this.timestamp=d,this.text=n,this.rawBytes=i,o==null?this.numBits=i==null?0:8*i.length:this.numBits=o,this.resultPoints=c,this.format=u,this.resultMetadata=null,d==null?this.timestamp=j.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,i)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const i=this.resultPoints;if(i===null)this.resultPoints=n;else if(n!==null&&n.length>0){const o=new Array(i.length+n.length);j.arraycopy(i,0,o,0,i.length),j.arraycopy(n,0,o,i.length,n.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var et;(function(C){C[C.AZTEC=0]="AZTEC",C[C.CODABAR=1]="CODABAR",C[C.CODE_39=2]="CODE_39",C[C.CODE_93=3]="CODE_93",C[C.CODE_128=4]="CODE_128",C[C.DATA_MATRIX=5]="DATA_MATRIX",C[C.EAN_8=6]="EAN_8",C[C.EAN_13=7]="EAN_13",C[C.ITF=8]="ITF",C[C.MAXICODE=9]="MAXICODE",C[C.PDF_417=10]="PDF_417",C[C.QR_CODE=11]="QR_CODE",C[C.RSS_14=12]="RSS_14",C[C.RSS_EXPANDED=13]="RSS_EXPANDED",C[C.UPC_A=14]="UPC_A",C[C.UPC_E=15]="UPC_E",C[C.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(et||(et={}));var de=et,Nt;(function(C){C[C.OTHER=0]="OTHER",C[C.ORIENTATION=1]="ORIENTATION",C[C.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",C[C.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",C[C.ISSUE_NUMBER=4]="ISSUE_NUMBER",C[C.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",C[C.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",C[C.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",C[C.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",C[C.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",C[C.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Nt||(Nt={}));var Se=Nt;class Ue{constructor(n,i,o,c,u=-1,d=-1){this.rawBytes=n,this.text=i,this.byteSegments=o,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=d,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class tt{exp(n){return this.expTable[n]}log(n){if(n===0)throw new E;return this.logTable[n]}static addOrSubtract(n,i){return n^i}}class Ne{constructor(n,i){if(i.length===0)throw new E;this.field=n;const o=i.length;if(o>1&&i[0]===0){let c=1;for(;c<o&&i[c]===0;)c++;c===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-c),j.arraycopy(i,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const i=this.coefficients;let o;if(n===1){o=0;for(let d=0,f=i.length;d!==f;d++){const x=i[d];o=tt.addOrSubtract(o,x)}return o}o=i[0];const c=i.length,u=this.field;for(let d=1;d<c;d++)o=tt.addOrSubtract(u.multiply(n,o),i[d]);return o}addOrSubtract(n){if(!this.field.equals(n.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let i=this.coefficients,o=n.coefficients;if(i.length>o.length){const d=i;i=o,o=d}let c=new Int32Array(o.length);const u=o.length-i.length;j.arraycopy(o,0,c,0,u);for(let d=u;d<o.length;d++)c[d]=tt.addOrSubtract(i[d-u],o[d]);return new Ne(this.field,c)}multiply(n){if(!this.field.equals(n.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const i=this.coefficients,o=i.length,c=n.coefficients,u=c.length,d=new Int32Array(o+u-1),f=this.field;for(let x=0;x<o;x++){const w=i[x];for(let b=0;b<u;b++)d[x+b]=tt.addOrSubtract(d[x+b],f.multiply(w,c[b]))}return new Ne(f,d)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const i=this.coefficients.length,o=this.field,c=new Int32Array(i),u=this.coefficients;for(let d=0;d<i;d++)c[d]=o.multiply(u[d],n);return new Ne(o,c)}multiplyByMonomial(n,i){if(n<0)throw new E;if(i===0)return this.field.getZero();const o=this.coefficients,c=o.length,u=new Int32Array(c+n),d=this.field;for(let f=0;f<c;f++)u[f]=d.multiply(o[f],i);return new Ne(d,u)}divide(n){if(!this.field.equals(n.field))throw new E("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new E("Divide by 0");const i=this.field;let o=i.getZero(),c=this;const u=n.getCoefficient(n.getDegree()),d=i.inverse(u);for(;c.getDegree()>=n.getDegree()&&!c.isZero();){const f=c.getDegree()-n.getDegree(),x=i.multiply(c.getCoefficient(c.getDegree()),d),w=n.multiplyByMonomial(f,x),b=i.buildMonomial(f,x);o=o.addOrSubtract(b),c=c.addOrSubtract(w)}return[o,c]}toString(){let n="";for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);if(o!==0){if(o<0?(n+=" - ",o=-o):n.length>0&&(n+=" + "),i===0||o!==1){const c=this.field.log(o);c===0?n+="1":c===1?n+="a":(n+="a^",n+=c)}i!==0&&(i===1?n+="x":(n+="x^",n+=i))}}return n}}class Qe extends g{}Qe.kind="ArithmeticException";class Re extends tt{constructor(n,i,o){super(),this.primitive=n,this.size=i,this.generatorBase=o;const c=new Int32Array(i);let u=1;for(let f=0;f<i;f++)c[f]=u,u*=2,u>=i&&(u^=n,u&=i-1);this.expTable=c;const d=new Int32Array(i);for(let f=0;f<i-1;f++)d[c[f]]=f;this.logTable=d,this.zero=new Ne(this,Int32Array.from([0])),this.one=new Ne(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,i){if(n<0)throw new E;if(i===0)return this.zero;const o=new Int32Array(n+1);return o[0]=i,new Ne(this,o)}inverse(n){if(n===0)throw new Qe;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,i){return n===0||i===0?0:this.expTable[(this.logTable[n]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+I.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}Re.AZTEC_DATA_12=new Re(4201,4096,1),Re.AZTEC_DATA_10=new Re(1033,1024,1),Re.AZTEC_DATA_6=new Re(67,64,1),Re.AZTEC_PARAM=new Re(19,16,1),Re.QR_CODE_FIELD_256=new Re(285,256,0),Re.DATA_MATRIX_FIELD_256=new Re(301,256,1),Re.AZTEC_DATA_8=Re.DATA_MATRIX_FIELD_256,Re.MAXICODE_FIELD_64=Re.AZTEC_DATA_6;class Xe extends g{}Xe.kind="ReedSolomonException";class Be extends g{}Be.kind="IllegalStateException";class De{constructor(n){this.field=n}decode(n,i){const o=this.field,c=new Ne(o,n),u=new Int32Array(i);let d=!0;for(let M=0;M<i;M++){const z=c.evaluateAt(o.exp(M+o.getGeneratorBase()));u[u.length-1-M]=z,z!==0&&(d=!1)}if(d)return;const f=new Ne(o,u),x=this.runEuclideanAlgorithm(o.buildMonomial(i,1),f,i),w=x[0],b=x[1],S=this.findErrorLocations(w),R=this.findErrorMagnitudes(b,S);for(let M=0;M<S.length;M++){const z=n.length-1-o.log(S[M]);if(z<0)throw new Xe("Bad error location");n[z]=Re.addOrSubtract(n[z],R[M])}}runEuclideanAlgorithm(n,i,o){if(n.getDegree()<i.getDegree()){const M=n;n=i,i=M}const c=this.field;let u=n,d=i,f=c.getZero(),x=c.getOne();for(;d.getDegree()>=(o/2|0);){let M=u,z=f;if(u=d,f=x,u.isZero())throw new Xe("r_{i-1} was zero");d=M;let V=c.getZero();const $=u.getCoefficient(u.getDegree()),Z=c.inverse($);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){const ae=d.getDegree()-u.getDegree(),le=c.multiply(d.getCoefficient(d.getDegree()),Z);V=V.addOrSubtract(c.buildMonomial(ae,le)),d=d.addOrSubtract(u.multiplyByMonomial(ae,le))}if(x=V.multiply(f).addOrSubtract(z),d.getDegree()>=u.getDegree())throw new Be("Division algorithm failed to reduce polynomial?")}const w=x.getCoefficient(0);if(w===0)throw new Xe("sigmaTilde(0) was zero");const b=c.inverse(w),S=x.multiplyScalar(b),R=d.multiplyScalar(b);return[S,R]}findErrorLocations(n){const i=n.getDegree();if(i===1)return Int32Array.from([n.getCoefficient(1)]);const o=new Int32Array(i);let c=0;const u=this.field;for(let d=1;d<u.getSize()&&c<i;d++)n.evaluateAt(d)===0&&(o[c]=u.inverse(d),c++);if(c!==i)throw new Xe("Error locator degree does not match number of roots");return o}findErrorMagnitudes(n,i){const o=i.length,c=new Int32Array(o),u=this.field;for(let d=0;d<o;d++){const f=u.inverse(i[d]);let x=1;for(let w=0;w<o;w++)if(d!==w){const b=u.multiply(i[w],f),S=b&1?b&-2:b|1;x=u.multiply(x,S)}c[d]=u.multiply(n.evaluateAt(f),u.inverse(x)),u.getGeneratorBase()!==0&&(c[d]=u.multiply(c[d],f))}return c}}var He;(function(C){C[C.UPPER=0]="UPPER",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.DIGIT=3]="DIGIT",C[C.PUNCT=4]="PUNCT",C[C.BINARY=5]="BINARY"})(He||(He={}));class _e{decode(n){this.ddata=n;let i=n.getBits(),o=this.extractBits(i),c=this.correctBits(o),u=_e.convertBoolArrayToByteArray(c),d=_e.getEncodedData(c),f=new Ue(u,d,null,null);return f.setNumBits(c.length),f}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let i=n.length,o=He.UPPER,c=He.UPPER,u="",d=0;for(;d<i;)if(c===He.BINARY){if(i-d<5)break;let f=_e.readCode(n,d,5);if(d+=5,f===0){if(i-d<11)break;f=_e.readCode(n,d,11)+31,d+=11}for(let x=0;x<f;x++){if(i-d<8){d=i;break}const w=_e.readCode(n,d,8);u+=X.castAsNonUtf8Char(w),d+=8}c=o}else{let f=c===He.DIGIT?4:5;if(i-d<f)break;let x=_e.readCode(n,d,f);d+=f;let w=_e.getCharacter(c,x);w.startsWith("CTRL_")?(o=c,c=_e.getTable(w.charAt(5)),w.charAt(6)==="L"&&(o=c)):(u+=w,c=o)}return u}static getTable(n){switch(n){case"L":return He.LOWER;case"P":return He.PUNCT;case"M":return He.MIXED;case"D":return He.DIGIT;case"B":return He.BINARY;case"U":default:return He.UPPER}}static getCharacter(n,i){switch(n){case He.UPPER:return _e.UPPER_TABLE[i];case He.LOWER:return _e.LOWER_TABLE[i];case He.MIXED:return _e.MIXED_TABLE[i];case He.PUNCT:return _e.PUNCT_TABLE[i];case He.DIGIT:return _e.DIGIT_TABLE[i];default:throw new Be("Bad table")}}correctBits(n){let i,o;this.ddata.getNbLayers()<=2?(o=6,i=Re.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,i=Re.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,i=Re.AZTEC_DATA_10):(o=12,i=Re.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),u=n.length/o;if(u<c)throw new U;let d=n.length%o,f=new Int32Array(u);for(let R=0;R<u;R++,d+=o)f[R]=_e.readCode(n,d,o);try{new De(i).decode(f,u-c)}catch(R){throw new U(R)}let x=(1<<o)-1,w=0;for(let R=0;R<c;R++){let M=f[R];if(M===0||M===x)throw new U;(M===1||M===x-1)&&w++}let b=new Array(c*o-w),S=0;for(let R=0;R<c;R++){let M=f[R];if(M===1||M===x-1)b.fill(M>1,S,S+o-1),S+=o-1;else for(let z=o-1;z>=0;--z)b[S++]=(M&1<<z)!==0}return b}extractBits(n){let i=this.ddata.isCompact(),o=this.ddata.getNbLayers(),c=(i?11:14)+o*4,u=new Int32Array(c),d=new Array(this.totalBitsInLayer(o,i));if(i)for(let f=0;f<u.length;f++)u[f]=f;else{let f=c+1+2*I.truncDivision(I.truncDivision(c,2)-1,15),x=c/2,w=I.truncDivision(f,2);for(let b=0;b<x;b++){let S=b+I.truncDivision(b,15);u[x-b-1]=w-S-1,u[x+b]=w+S+1}}for(let f=0,x=0;f<o;f++){let w=(o-f)*4+(i?9:12),b=f*2,S=c-1-b;for(let R=0;R<w;R++){let M=R*2;for(let z=0;z<2;z++)d[x+M+z]=n.get(u[b+z],u[b+R]),d[x+2*w+M+z]=n.get(u[b+R],u[S-z]),d[x+4*w+M+z]=n.get(u[S-z],u[S-R]),d[x+6*w+M+z]=n.get(u[S-R],u[b+z])}x+=w*8}return d}static readCode(n,i,o){let c=0;for(let u=i;u<i+o;u++)c<<=1,n[u]&&(c|=1);return c}static readByte(n,i){let o=n.length-i;return o>=8?_e.readCode(n,i,8):_e.readCode(n,i,o)<<8-o}static convertBoolArrayToByteArray(n){let i=new Uint8Array((n.length+7)/8);for(let o=0;o<i.length;o++)i[o]=_e.readByte(n,8*o);return i}totalBitsInLayer(n,i){return((i?88:112)+16*n)*n}}_e.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],_e.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],_e.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],_e.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],_e.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class be{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,i,o,c){const u=n-o,d=i-c;return Math.sqrt(u*u+d*d)}static sum(n){let i=0;for(let o=0,c=n.length;o!==c;o++){const u=n[o];i+=u}return i}}class mt{static floatToIntBits(n){return n}}mt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class pe{constructor(n,i){this.x=n,this.y=i}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof pe){const i=n;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*mt.floatToIntBits(this.x)+mt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const i=this.distance(n[0],n[1]),o=this.distance(n[1],n[2]),c=this.distance(n[0],n[2]);let u,d,f;if(o>=i&&o>=c?(d=n[0],u=n[1],f=n[2]):c>=o&&c>=i?(d=n[1],u=n[0],f=n[2]):(d=n[2],u=n[0],f=n[1]),this.crossProductZ(u,d,f)<0){const x=u;u=f,f=x}n[0]=u,n[1]=d,n[2]=f}static distance(n,i){return be.distance(n.x,n.y,i.x,i.y)}static crossProductZ(n,i,o){const c=i.x,u=i.y;return(o.x-c)*(n.y-u)-(o.y-u)*(n.x-c)}}class lr{constructor(n,i){this.bits=n,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Bn extends lr{constructor(n,i,o,c,u){super(n,i),this.compact=o,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ot{constructor(n,i,o,c){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),i==null&&(i=ot.INIT_SIZE),o==null&&(o=n.getWidth()/2|0),c==null&&(c=n.getHeight()/2|0);const u=i/2|0;if(this.leftInit=o-u,this.rightInit=o+u,this.upInit=c-u,this.downInit=c+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new K}detect(){let n=this.leftInit,i=this.rightInit,o=this.upInit,c=this.downInit,u=!1,d=!0,f=!1,x=!1,w=!1,b=!1,S=!1;const R=this.width,M=this.height;for(;d;){d=!1;let z=!0;for(;(z||!x)&&i<R;)z=this.containsBlackPoint(o,c,i,!1),z?(i++,d=!0,x=!0):x||i++;if(i>=R){u=!0;break}let V=!0;for(;(V||!w)&&c<M;)V=this.containsBlackPoint(n,i,c,!0),V?(c++,d=!0,w=!0):w||c++;if(c>=M){u=!0;break}let $=!0;for(;($||!b)&&n>=0;)$=this.containsBlackPoint(o,c,n,!1),$?(n--,d=!0,b=!0):b||n--;if(n<0){u=!0;break}let Z=!0;for(;(Z||!S)&&o>=0;)Z=this.containsBlackPoint(n,i,o,!0),Z?(o--,d=!0,S=!0):S||o--;if(o<0){u=!0;break}d&&(f=!0)}if(!u&&f){const z=i-n;let V=null;for(let le=1;V===null&&le<z;le++)V=this.getBlackPointOnSegment(n,c-le,n+le,c);if(V==null)throw new K;let $=null;for(let le=1;$===null&&le<z;le++)$=this.getBlackPointOnSegment(n,o+le,n+le,o);if($==null)throw new K;let Z=null;for(let le=1;Z===null&&le<z;le++)Z=this.getBlackPointOnSegment(i,o+le,i-le,o);if(Z==null)throw new K;let ae=null;for(let le=1;ae===null&&le<z;le++)ae=this.getBlackPointOnSegment(i,c-le,i-le,c);if(ae==null)throw new K;return this.centerEdges(ae,V,Z,$)}else throw new K}getBlackPointOnSegment(n,i,o,c){const u=be.round(be.distance(n,i,o,c)),d=(o-n)/u,f=(c-i)/u,x=this.image;for(let w=0;w<u;w++){const b=be.round(n+w*d),S=be.round(i+w*f);if(x.get(b,S))return new pe(b,S)}return null}centerEdges(n,i,o,c){const u=n.getX(),d=n.getY(),f=i.getX(),x=i.getY(),w=o.getX(),b=o.getY(),S=c.getX(),R=c.getY(),M=ot.CORR;return u<this.width/2?[new pe(S-M,R+M),new pe(f+M,x+M),new pe(w-M,b-M),new pe(u+M,d-M)]:[new pe(S+M,R+M),new pe(f+M,x-M),new pe(w-M,b+M),new pe(u-M,d-M)]}containsBlackPoint(n,i,o,c){const u=this.image;if(c){for(let d=n;d<=i;d++)if(u.get(d,o))return!0}else for(let d=n;d<=i;d++)if(u.get(o,d))return!0;return!1}}ot.INIT_SIZE=10,ot.CORR=1;class mr{static checkAndNudgePoints(n,i){const o=n.getWidth(),c=n.getHeight();let u=!0;for(let d=0;d<i.length&&u;d+=2){const f=Math.floor(i[d]),x=Math.floor(i[d+1]);if(f<-1||f>o||x<-1||x>c)throw new K;u=!1,f===-1?(i[d]=0,u=!0):f===o&&(i[d]=o-1,u=!0),x===-1?(i[d+1]=0,u=!0):x===c&&(i[d+1]=c-1,u=!0)}u=!0;for(let d=i.length-2;d>=0&&u;d-=2){const f=Math.floor(i[d]),x=Math.floor(i[d+1]);if(f<-1||f>o||x<-1||x>c)throw new K;u=!1,f===-1?(i[d]=0,u=!0):f===o&&(i[d]=o-1,u=!0),x===-1?(i[d+1]=0,u=!0):x===c&&(i[d+1]=c-1,u=!0)}}}class Ye{constructor(n,i,o,c,u,d,f,x,w){this.a11=n,this.a21=i,this.a31=o,this.a12=c,this.a22=u,this.a32=d,this.a13=f,this.a23=x,this.a33=w}static quadrilateralToQuadrilateral(n,i,o,c,u,d,f,x,w,b,S,R,M,z,V,$){const Z=Ye.quadrilateralToSquare(n,i,o,c,u,d,f,x);return Ye.squareToQuadrilateral(w,b,S,R,M,z,V,$).times(Z)}transformPoints(n){const i=n.length,o=this.a11,c=this.a12,u=this.a13,d=this.a21,f=this.a22,x=this.a23,w=this.a31,b=this.a32,S=this.a33;for(let R=0;R<i;R+=2){const M=n[R],z=n[R+1],V=u*M+x*z+S;n[R]=(o*M+d*z+w)/V,n[R+1]=(c*M+f*z+b)/V}}transformPointsWithValues(n,i){const o=this.a11,c=this.a12,u=this.a13,d=this.a21,f=this.a22,x=this.a23,w=this.a31,b=this.a32,S=this.a33,R=n.length;for(let M=0;M<R;M++){const z=n[M],V=i[M],$=u*z+x*V+S;n[M]=(o*z+d*V+w)/$,i[M]=(c*z+f*V+b)/$}}static squareToQuadrilateral(n,i,o,c,u,d,f,x){const w=n-o+u-f,b=i-c+d-x;if(w===0&&b===0)return new Ye(o-n,u-o,n,c-i,d-c,i,0,0,1);{const S=o-u,R=f-u,M=c-d,z=x-d,V=S*z-R*M,$=(w*z-R*b)/V,Z=(S*b-w*M)/V;return new Ye(o-n+$*o,f-n+Z*f,n,c-i+$*c,x-i+Z*x,i,$,Z,1)}}static quadrilateralToSquare(n,i,o,c,u,d,f,x){return Ye.squareToQuadrilateral(n,i,o,c,u,d,f,x).buildAdjoint()}buildAdjoint(){return new Ye(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new Ye(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class Xt extends mr{sampleGrid(n,i,o,c,u,d,f,x,w,b,S,R,M,z,V,$,Z,ae,le){const ie=Ye.quadrilateralToQuadrilateral(c,u,d,f,x,w,b,S,R,M,z,V,$,Z,ae,le);return this.sampleGridWithTransform(n,i,o,ie)}sampleGridWithTransform(n,i,o,c){if(i<=0||o<=0)throw new K;const u=new xe(i,o),d=new Float32Array(2*i);for(let f=0;f<o;f++){const x=d.length,w=f+.5;for(let b=0;b<x;b+=2)d[b]=b/2+.5,d[b+1]=w;c.transformPoints(d),mr.checkAndNudgePoints(n,d);try{for(let b=0;b<x;b+=2)n.get(Math.floor(d[b]),Math.floor(d[b+1]))&&u.set(b/2,f)}catch{throw new K}}return u}}class Vt{static setGridSampler(n){Vt.gridSampler=n}static getInstance(){return Vt.gridSampler}}Vt.gridSampler=new Xt;class Dt{constructor(n,i){this.x=n,this.y=i}toResultPoint(){return new pe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ks{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let i=this.getMatrixCenter(),o=this.getBullsEyeCorners(i);if(n){let d=o[0];o[0]=o[2],o[2]=d}this.extractParameters(o);let c=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),u=this.getMatrixCornerPoints(o);return new Bn(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new K;let i=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(n[0],n[1],i),this.sampleLine(n[1],n[2],i),this.sampleLine(n[2],n[3],i),this.sampleLine(n[3],n[0],i)]);this.shift=this.getRotation(o,i);let c=0;for(let d=0;d<4;d++){let f=o[(this.shift+d)%4];this.compact?(c<<=7,c+=f>>1&127):(c<<=10,c+=(f>>2&992)+(f>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(n,i){let o=0;n.forEach((c,u,d)=>{let f=(c>>i-2<<1)+(c&1);o=(o<<3)+f}),o=((o&1)<<11)+(o>>1);for(let c=0;c<4;c++)if(I.bitCount(o^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new K}getCorrectedParameterData(n,i){let o,c;i?(o=7,c=2):(o=10,c=4);let u=o-c,d=new Int32Array(o);for(let x=o-1;x>=0;--x)d[x]=n&15,n>>=4;try{new De(Re.AZTEC_PARAM).decode(d,u)}catch{throw new K}let f=0;for(let x=0;x<c;x++)f=(f<<4)+d[x];return f}getBullsEyeCorners(n){let i=n,o=n,c=n,u=n,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let S=this.getFirstDifferent(i,d,1,-1),R=this.getFirstDifferent(o,d,1,1),M=this.getFirstDifferent(c,d,-1,1),z=this.getFirstDifferent(u,d,-1,-1);if(this.nbCenterLayers>2){let V=this.distancePoint(z,S)*this.nbCenterLayers/(this.distancePoint(u,i)*(this.nbCenterLayers+2));if(V<.75||V>1.25||!this.isWhiteOrBlackRectangle(S,R,M,z))break}i=S,o=R,c=M,u=z,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new K;this.compact=this.nbCenterLayers===5;let f=new pe(i.getX()+.5,i.getY()-.5),x=new pe(o.getX()+.5,o.getY()+.5),w=new pe(c.getX()-.5,c.getY()+.5),b=new pe(u.getX()-.5,u.getY()-.5);return this.expandSquare([f,x,w,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,i,o,c;try{let f=new ot(this.image).detect();n=f[0],i=f[1],o=f[2],c=f[3]}catch{let x=this.image.getWidth()/2,w=this.image.getHeight()/2;n=this.getFirstDifferent(new Dt(x+7,w-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Dt(x+7,w+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Dt(x-7,w+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Dt(x-7,w-7),!1,-1,-1).toResultPoint()}let u=be.round((n.getX()+c.getX()+i.getX()+o.getX())/4),d=be.round((n.getY()+c.getY()+i.getY()+o.getY())/4);try{let f=new ot(this.image,15,u,d).detect();n=f[0],i=f[1],o=f[2],c=f[3]}catch{n=this.getFirstDifferent(new Dt(u+7,d-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Dt(u+7,d+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Dt(u-7,d+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Dt(u-7,d-7),!1,-1,-1).toResultPoint()}return u=be.round((n.getX()+c.getX()+i.getX()+o.getX())/4),d=be.round((n.getY()+c.getY()+i.getY()+o.getY())/4),new Dt(u,d)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,i,o,c,u){let d=Vt.getInstance(),f=this.getDimension(),x=f/2-this.nbCenterLayers,w=f/2+this.nbCenterLayers;return d.sampleGrid(n,f,f,x,x,w,x,w,w,x,w,i.getX(),i.getY(),o.getX(),o.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(n,i,o){let c=0,u=this.distanceResultPoint(n,i),d=u/o,f=n.getX(),x=n.getY(),w=d*(i.getX()-n.getX())/u,b=d*(i.getY()-n.getY())/u;for(let S=0;S<o;S++)this.image.get(be.round(f+S*w),be.round(x+S*b))&&(c|=1<<o-S-1);return c}isWhiteOrBlackRectangle(n,i,o,c){let u=3;n=new Dt(n.getX()-u,n.getY()+u),i=new Dt(i.getX()-u,i.getY()-u),o=new Dt(o.getX()+u,o.getY()-u),c=new Dt(c.getX()+u,c.getY()+u);let d=this.getColor(c,n);if(d===0)return!1;let f=this.getColor(n,i);return f!==d||(f=this.getColor(i,o),f!==d)?!1:(f=this.getColor(o,c),f===d)}getColor(n,i){let o=this.distancePoint(n,i),c=(i.getX()-n.getX())/o,u=(i.getY()-n.getY())/o,d=0,f=n.getX(),x=n.getY(),w=this.image.get(n.getX(),n.getY()),b=Math.ceil(o);for(let R=0;R<b;R++)f+=c,x+=u,this.image.get(be.round(f),be.round(x))!==w&&d++;let S=d/o;return S>.1&&S<.9?0:S<=.1===w?1:-1}getFirstDifferent(n,i,o,c){let u=n.getX()+o,d=n.getY()+c;for(;this.isValid(u,d)&&this.image.get(u,d)===i;)u+=o,d+=c;for(u-=o,d-=c;this.isValid(u,d)&&this.image.get(u,d)===i;)u+=o;for(u-=o;this.isValid(u,d)&&this.image.get(u,d)===i;)d+=c;return d-=c,new Dt(u,d)}expandSquare(n,i,o){let c=o/(2*i),u=n[0].getX()-n[2].getX(),d=n[0].getY()-n[2].getY(),f=(n[0].getX()+n[2].getX())/2,x=(n[0].getY()+n[2].getY())/2,w=new pe(f+c*u,x+c*d),b=new pe(f-c*u,x-c*d);u=n[1].getX()-n[3].getX(),d=n[1].getY()-n[3].getY(),f=(n[1].getX()+n[3].getX())/2,x=(n[1].getY()+n[3].getY())/2;let S=new pe(f+c*u,x+c*d),R=new pe(f-c*u,x-c*d);return[w,S,b,R]}isValid(n,i){return n>=0&&n<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(n){let i=be.round(n.getX()),o=be.round(n.getY());return this.isValid(i,o)}distancePoint(n,i){return be.distance(n.getX(),n.getY(),i.getX(),i.getY())}distanceResultPoint(n,i){return be.distance(n.getX(),n.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(I.truncDivision(this.nbLayers-4,8)+1)+15}}class qr{decode(n,i=null){let o=null,c=new Ks(n.getBlackMatrix()),u=null,d=null;try{let b=c.detectMirror(!1);u=b.getPoints(),this.reportFoundResultPoints(i,u),d=new _e().decode(b)}catch(b){o=b}if(d==null)try{let b=c.detectMirror(!0);u=b.getPoints(),this.reportFoundResultPoints(i,u),d=new _e().decode(b)}catch(b){throw o??b}let f=new Pe(d.getText(),d.getRawBytes(),d.getNumBits(),u,de.AZTEC,j.currentTimeMillis()),x=d.getByteSegments();x!=null&&f.putMetadata(Se.BYTE_SEGMENTS,x);let w=d.getECLevel();return w!=null&&f.putMetadata(Se.ERROR_CORRECTION_LEVEL,w),f}reportFoundResultPoints(n,i){if(n!=null){let o=n.get(G.NEED_RESULT_POINT_CALLBACK);o!=null&&i.forEach((c,u,d)=>{o.foundPossibleResultPoint(c)})}}reset(){}}class Lr extends me{constructor(n=500){super(new qr,n)}}class at{decode(n,i){try{return this.doDecode(n,i)}catch{if(i&&i.get(G.TRY_HARDER)===!0&&n.isRotateSupported()){const u=n.rotateCounterClockwise(),d=this.doDecode(u,i),f=d.getResultMetadata();let x=270;f!==null&&f.get(Se.ORIENTATION)===!0&&(x=x+f.get(Se.ORIENTATION)%360),d.putMetadata(Se.ORIENTATION,x);const w=d.getResultPoints();if(w!==null){const b=u.getHeight();for(let S=0;S<w.length;S++)w[S]=new pe(b-w[S].getY()-1,w[S].getX())}return d}else throw new K}}reset(){}doDecode(n,i){const o=n.getWidth(),c=n.getHeight();let u=new L(o);const d=i&&i.get(G.TRY_HARDER)===!0,f=Math.max(1,c>>(d?8:5));let x;d?x=c:x=15;const w=Math.trunc(c/2);for(let b=0;b<x;b++){const S=Math.trunc((b+1)/2),R=(b&1)===0,M=w+f*(R?S:-S);if(M<0||M>=c)break;try{u=n.getBlackRow(M,u)}catch{continue}for(let z=0;z<2;z++){if(z===1&&(u.reverse(),i&&i.get(G.NEED_RESULT_POINT_CALLBACK)===!0)){const V=new Map;i.forEach(($,Z)=>V.set(Z,$)),V.delete(G.NEED_RESULT_POINT_CALLBACK),i=V}try{const V=this.decodeRow(M,u,i);if(z===1){V.putMetadata(Se.ORIENTATION,180);const $=V.getResultPoints();$!==null&&($[0]=new pe(o-$[0].getX()-1,$[0].getY()),$[1]=new pe(o-$[1].getX()-1,$[1].getY()))}return V}catch{}}}throw new K}static recordPattern(n,i,o){const c=o.length;for(let w=0;w<c;w++)o[w]=0;const u=n.getSize();if(i>=u)throw new K;let d=!n.get(i),f=0,x=i;for(;x<u;){if(n.get(x)!==d)o[f]++;else{if(++f===c)break;o[f]=1,d=!d}x++}if(!(f===c||f===c-1&&x===u))throw new K}static recordPatternInReverse(n,i,o){let c=o.length,u=n.get(i);for(;i>0&&c>=0;)n.get(--i)!==u&&(c--,u=!u);if(c>=0)throw new K;at.recordPattern(n,i+1,o)}static patternMatchVariance(n,i,o){const c=n.length;let u=0,d=0;for(let w=0;w<c;w++)u+=n[w],d+=i[w];if(u<d)return Number.POSITIVE_INFINITY;const f=u/d;o*=f;let x=0;for(let w=0;w<c;w++){const b=n[w],S=i[w]*f,R=b>S?b-S:S-b;if(R>o)return Number.POSITIVE_INFINITY;x+=R}return x/u}}class ce extends at{static findStartPattern(n){const i=n.getSize(),o=n.getNextSet(0);let c=0,u=Int32Array.from([0,0,0,0,0,0]),d=o,f=!1;const x=6;for(let w=o;w<i;w++)if(n.get(w)!==f)u[c]++;else{if(c===x-1){let b=ce.MAX_AVG_VARIANCE,S=-1;for(let R=ce.CODE_START_A;R<=ce.CODE_START_C;R++){const M=at.patternMatchVariance(u,ce.CODE_PATTERNS[R],ce.MAX_INDIVIDUAL_VARIANCE);M<b&&(b=M,S=R)}if(S>=0&&n.isRange(Math.max(0,d-(w-d)/2),d,!1))return Int32Array.from([d,w,S]);d+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,f=!f}throw new K}static decodeCode(n,i,o){at.recordPattern(n,o,i);let c=ce.MAX_AVG_VARIANCE,u=-1;for(let d=0;d<ce.CODE_PATTERNS.length;d++){const f=ce.CODE_PATTERNS[d],x=this.patternMatchVariance(i,f,ce.MAX_INDIVIDUAL_VARIANCE);x<c&&(c=x,u=d)}if(u>=0)return u;throw new K}decodeRow(n,i,o){const c=o&&o.get(G.ASSUME_GS1)===!0,u=ce.findStartPattern(i),d=u[2];let f=0;const x=new Uint8Array(20);x[f++]=d;let w;switch(d){case ce.CODE_START_A:w=ce.CODE_CODE_A;break;case ce.CODE_START_B:w=ce.CODE_CODE_B;break;case ce.CODE_START_C:w=ce.CODE_CODE_C;break;default:throw new U}let b=!1,S=!1,R="",M=u[0],z=u[1];const V=Int32Array.from([0,0,0,0,0,0]);let $=0,Z=0,ae=d,le=0,ie=!0,Ve=!1,Me=!1;for(;!b;){const rs=S;switch(S=!1,$=Z,Z=ce.decodeCode(i,V,z),x[f++]=Z,Z!==ce.CODE_STOP&&(ie=!0),Z!==ce.CODE_STOP&&(le++,ae+=le*Z),M=z,z+=V.reduce((fx,gx)=>fx+gx,0),Z){case ce.CODE_START_A:case ce.CODE_START_B:case ce.CODE_START_C:throw new U}switch(w){case ce.CODE_CODE_A:if(Z<64)Me===Ve?R+=String.fromCharCode(32+Z):R+=String.fromCharCode(32+Z+128),Me=!1;else if(Z<96)Me===Ve?R+=String.fromCharCode(Z-64):R+=String.fromCharCode(Z+64),Me=!1;else switch(Z!==ce.CODE_STOP&&(ie=!1),Z){case ce.CODE_FNC_1:c&&(R.length===0?R+="]C1":R+="");break;case ce.CODE_FNC_2:case ce.CODE_FNC_3:break;case ce.CODE_FNC_4_A:!Ve&&Me?(Ve=!0,Me=!1):Ve&&Me?(Ve=!1,Me=!1):Me=!0;break;case ce.CODE_SHIFT:S=!0,w=ce.CODE_CODE_B;break;case ce.CODE_CODE_B:w=ce.CODE_CODE_B;break;case ce.CODE_CODE_C:w=ce.CODE_CODE_C;break;case ce.CODE_STOP:b=!0;break}break;case ce.CODE_CODE_B:if(Z<96)Me===Ve?R+=String.fromCharCode(32+Z):R+=String.fromCharCode(32+Z+128),Me=!1;else switch(Z!==ce.CODE_STOP&&(ie=!1),Z){case ce.CODE_FNC_1:c&&(R.length===0?R+="]C1":R+="");break;case ce.CODE_FNC_2:case ce.CODE_FNC_3:break;case ce.CODE_FNC_4_B:!Ve&&Me?(Ve=!0,Me=!1):Ve&&Me?(Ve=!1,Me=!1):Me=!0;break;case ce.CODE_SHIFT:S=!0,w=ce.CODE_CODE_A;break;case ce.CODE_CODE_A:w=ce.CODE_CODE_A;break;case ce.CODE_CODE_C:w=ce.CODE_CODE_C;break;case ce.CODE_STOP:b=!0;break}break;case ce.CODE_CODE_C:if(Z<100)Z<10&&(R+="0"),R+=Z;else switch(Z!==ce.CODE_STOP&&(ie=!1),Z){case ce.CODE_FNC_1:c&&(R.length===0?R+="]C1":R+="");break;case ce.CODE_CODE_A:w=ce.CODE_CODE_A;break;case ce.CODE_CODE_B:w=ce.CODE_CODE_B;break;case ce.CODE_STOP:b=!0;break}break}rs&&(w=w===ce.CODE_CODE_A?ce.CODE_CODE_B:ce.CODE_CODE_A)}const yr=z-M;if(z=i.getNextUnset(z),!i.isRange(z,Math.min(i.getSize(),z+(z-M)/2),!1))throw new K;if(ae-=le*$,ae%103!==$)throw new T;const Yr=R.length;if(Yr===0)throw new K;Yr>0&&ie&&(w===ce.CODE_CODE_C?R=R.substring(0,Yr-2):R=R.substring(0,Yr-1));const vr=(u[1]+u[0])/2,st=M+yr/2,Yt=x.length,Sr=new Uint8Array(Yt);for(let rs=0;rs<Yt;rs++)Sr[rs]=x[rs];const ts=[new pe(vr,n),new pe(st,n)];return new Pe(R,Sr,0,ts,de.CODE_128,new Date().getTime())}}ce.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ce.MAX_AVG_VARIANCE=.25,ce.MAX_INDIVIDUAL_VARIANCE=.7,ce.CODE_SHIFT=98,ce.CODE_CODE_C=99,ce.CODE_CODE_B=100,ce.CODE_CODE_A=101,ce.CODE_FNC_1=102,ce.CODE_FNC_2=97,ce.CODE_FNC_3=96,ce.CODE_FNC_4_A=101,ce.CODE_FNC_4_B=100,ce.CODE_START_A=103,ce.CODE_START_B=104,ce.CODE_START_C=105,ce.CODE_STOP=106;class Mt extends at{constructor(n=!1,i=!1){super(),this.usingCheckDigit=n,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,i,o){let c=this.counters;c.fill(0),this.decodeRowResult="";let u=Mt.findAsteriskPattern(i,c),d=i.getNextSet(u[1]),f=i.getSize(),x,w;do{Mt.recordPattern(i,d,c);let V=Mt.toNarrowWidePattern(c);if(V<0)throw new K;x=Mt.patternToChar(V),this.decodeRowResult+=x,w=d;for(let $ of c)d+=$;d=i.getNextSet(d)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let b=0;for(let V of c)b+=V;let S=d-w-b;if(d!==f&&S*2<b)throw new K;if(this.usingCheckDigit){let V=this.decodeRowResult.length-1,$=0;for(let Z=0;Z<V;Z++)$+=Mt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Z));if(this.decodeRowResult.charAt(V)!==Mt.ALPHABET_STRING.charAt($%43))throw new T;this.decodeRowResult=this.decodeRowResult.substring(0,V)}if(this.decodeRowResult.length===0)throw new K;let R;this.extendedMode?R=Mt.decodeExtended(this.decodeRowResult):R=this.decodeRowResult;let M=(u[1]+u[0])/2,z=w+b/2;return new Pe(R,null,0,[new pe(M,n),new pe(z,n)],de.CODE_39,new Date().getTime())}static findAsteriskPattern(n,i){let o=n.getSize(),c=n.getNextSet(0),u=0,d=c,f=!1,x=i.length;for(let w=c;w<o;w++)if(n.get(w)!==f)i[u]++;else{if(u===x-1){if(this.toNarrowWidePattern(i)===Mt.ASTERISK_ENCODING&&n.isRange(Math.max(0,d-Math.floor((w-d)/2)),d,!1))return[d,w];d+=i[0]+i[1],i.copyWithin(0,2,2+u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,f=!f}throw new K}static toNarrowWidePattern(n){let i=n.length,o=0,c;do{let u=2147483647;for(let x of n)x<u&&x>o&&(u=x);o=u,c=0;let d=0,f=0;for(let x=0;x<i;x++){let w=n[x];w>o&&(f|=1<<i-1-x,c++,d+=w)}if(c===3){for(let x=0;x<i&&c>0;x++){let w=n[x];if(w>o&&(c--,w*2>=d))return-1}return f}}while(c>3);return-1}static patternToChar(n){for(let i=0;i<Mt.CHARACTER_ENCODINGS.length;i++)if(Mt.CHARACTER_ENCODINGS[i]===n)return Mt.ALPHABET_STRING.charAt(i);if(n===Mt.ASTERISK_ENCODING)return"*";throw new K}static decodeExtended(n){let i=n.length,o="";for(let c=0;c<i;c++){let u=n.charAt(c);if(u==="+"||u==="$"||u==="%"||u==="/"){let d=n.charAt(c+1),f="\0";switch(u){case"+":if(d>="A"&&d<="Z")f=String.fromCharCode(d.charCodeAt(0)+32);else throw new U;break;case"$":if(d>="A"&&d<="Z")f=String.fromCharCode(d.charCodeAt(0)-64);else throw new U;break;case"%":if(d>="A"&&d<="E")f=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")f=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")f=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")f=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")f="\0";else if(d==="V")f="@";else if(d==="W")f="`";else if(d==="X"||d==="Y"||d==="Z")f="";else throw new U;break;case"/":if(d>="A"&&d<="O")f=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")f=":";else throw new U;break}o+=f,c++}else o+=u}return o}}Mt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Mt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Mt.ASTERISK_ENCODING=148;class nt extends at{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,i,o){let c=this.decodeStart(i),u=this.decodeEnd(i),d=new se;nt.decodeMiddle(i,c[1],u[0],d);let f=d.toString(),x=null;o!=null&&(x=o.get(G.ALLOWED_LENGTHS)),x==null&&(x=nt.DEFAULT_ALLOWED_LENGTHS);let w=f.length,b=!1,S=0;for(let z of x){if(w===z){b=!0;break}z>S&&(S=z)}if(!b&&w>S&&(b=!0),!b)throw new U;const R=[new pe(c[1],n),new pe(u[0],n)];return new Pe(f,null,0,R,de.ITF,new Date().getTime())}static decodeMiddle(n,i,o,c){let u=new Int32Array(10),d=new Int32Array(5),f=new Int32Array(5);for(u.fill(0),d.fill(0),f.fill(0);i<o;){at.recordPattern(n,i,u);for(let w=0;w<5;w++){let b=2*w;d[w]=u[b],f[w]=u[b+1]}let x=nt.decodeDigit(d);c.append(x.toString()),x=this.decodeDigit(f),c.append(x.toString()),u.forEach(function(w){i+=w})}}decodeStart(n){let i=nt.skipWhiteSpace(n),o=nt.findGuardPattern(n,i,nt.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(n,o[0]),o}validateQuietZone(n,i){let o=this.narrowLineWidth*10;o=o<i?o:i;for(let c=i-1;o>0&&c>=0&&!n.get(c);c--)o--;if(o!==0)throw new K}static skipWhiteSpace(n){const i=n.getSize(),o=n.getNextSet(0);if(o===i)throw new K;return o}decodeEnd(n){n.reverse();try{let i=nt.skipWhiteSpace(n),o;try{o=nt.findGuardPattern(n,i,nt.END_PATTERN_REVERSED[0])}catch(u){u instanceof K&&(o=nt.findGuardPattern(n,i,nt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,o[0]);let c=o[0];return o[0]=n.getSize()-o[1],o[1]=n.getSize()-c,o}finally{n.reverse()}}static findGuardPattern(n,i,o){let c=o.length,u=new Int32Array(c),d=n.getSize(),f=!1,x=0,w=i;u.fill(0);for(let b=i;b<d;b++)if(n.get(b)!==f)u[x]++;else{if(x===c-1){if(at.patternMatchVariance(u,o,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return[w,b];w+=u[0]+u[1],j.arraycopy(u,2,u,0,x-1),u[x-1]=0,u[x]=0,x--}else x++;u[x]=1,f=!f}throw new K}static decodeDigit(n){let i=nt.MAX_AVG_VARIANCE,o=-1,c=nt.PATTERNS.length;for(let u=0;u<c;u++){let d=nt.PATTERNS[u],f=at.patternMatchVariance(n,d,nt.MAX_INDIVIDUAL_VARIANCE);f<i?(i=f,o=u):f===i&&(o=-1)}if(o>=0)return o%10;throw new K}}nt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],nt.MAX_AVG_VARIANCE=.38,nt.MAX_INDIVIDUAL_VARIANCE=.5,nt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],nt.START_PATTERN=Int32Array.from([1,1,1,1]),nt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class _t extends at{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let i=!1,o,c=0,u=Int32Array.from([0,0,0]);for(;!i;){u=Int32Array.from([0,0,0]),o=_t.findGuardPattern(n,c,!1,this.START_END_PATTERN,u);let d=o[0];c=o[1];let f=d-(c-d);f>=0&&(i=n.isRange(f,d,!1))}return o}static checkChecksum(n){return _t.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let i=n.length;if(i===0)return!1;let o=parseInt(n.charAt(i-1),10);return _t.getStandardUPCEANChecksum(n.substring(0,i-1))===o}static getStandardUPCEANChecksum(n){let i=n.length,o=0;for(let c=i-1;c>=0;c-=2){let u=n.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new U;o+=u}o*=3;for(let c=i-2;c>=0;c-=2){let u=n.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new U;o+=u}return(1e3-o)%10}static decodeEnd(n,i){return _t.findGuardPattern(n,i,!1,_t.START_END_PATTERN,new Int32Array(_t.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,i,o,c){return this.findGuardPattern(n,i,o,c,new Int32Array(c.length))}static findGuardPattern(n,i,o,c,u){let d=n.getSize();i=o?n.getNextUnset(i):n.getNextSet(i);let f=0,x=i,w=c.length,b=o;for(let S=i;S<d;S++)if(n.get(S)!==b)u[f]++;else{if(f===w-1){if(at.patternMatchVariance(u,c,_t.MAX_INDIVIDUAL_VARIANCE)<_t.MAX_AVG_VARIANCE)return Int32Array.from([x,S]);x+=u[0]+u[1];let R=u.slice(2,u.length-1);for(let M=0;M<f-1;M++)u[M]=R[M];u[f-1]=0,u[f]=0,f--}else f++;u[f]=1,b=!b}throw new K}static decodeDigit(n,i,o,c){this.recordPattern(n,o,i);let u=this.MAX_AVG_VARIANCE,d=-1,f=c.length;for(let x=0;x<f;x++){let w=c[x],b=at.patternMatchVariance(i,w,_t.MAX_INDIVIDUAL_VARIANCE);b<u&&(u=b,d=x)}if(d>=0)return d;throw new K}}_t.MAX_AVG_VARIANCE=.48,_t.MAX_INDIVIDUAL_VARIANCE=.7,_t.START_END_PATTERN=Int32Array.from([1,1,1]),_t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),_t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),_t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ys{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,i,o){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(i,o,c),d=c.toString(),f=Ys.parseExtensionString(d),x=[new pe((o[0]+o[1])/2,n),new pe(u,n)],w=new Pe(d,null,0,x,de.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&w.putAllMetadata(f),w}decodeMiddle(n,i,o){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=n.getSize(),d=i[1],f=0;for(let w=0;w<5&&d<u;w++){let b=_t.decodeDigit(n,c,d,_t.L_AND_G_PATTERNS);o+=String.fromCharCode(48+b%10);for(let S of c)d+=S;b>=10&&(f|=1<<4-w),w!==4&&(d=n.getNextSet(d),d=n.getNextUnset(d))}if(o.length!==5)throw new K;let x=this.determineCheckDigit(f);if(Ys.extensionChecksum(o.toString())!==x)throw new K;return d}static extensionChecksum(n){let i=n.length,o=0;for(let c=i-2;c>=0;c-=2)o+=n.charAt(c).charCodeAt(0)-48;o*=3;for(let c=i-1;c>=0;c-=2)o+=n.charAt(c).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(n){for(let i=0;i<10;i++)if(n===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new K}static parseExtensionString(n){if(n.length!==5)return null;let i=Ys.parseExtension5String(n);return i==null?null:new Map([[Se.SUGGESTED_PRICE,i]])}static parseExtension5String(n){let i;switch(n.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let o=parseInt(n.substring(1)),c=(o/100).toString(),u=o%100,d=u<10?"0"+u:u.toString();return i+c+"."+d}}class ic{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,i,o){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(i,o,c),d=c.toString(),f=ic.parseExtensionString(d),x=[new pe((o[0]+o[1])/2,n),new pe(u,n)],w=new Pe(d,null,0,x,de.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&w.putAllMetadata(f),w}decodeMiddle(n,i,o){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=n.getSize(),d=i[1],f=0;for(let x=0;x<2&&d<u;x++){let w=_t.decodeDigit(n,c,d,_t.L_AND_G_PATTERNS);o+=String.fromCharCode(48+w%10);for(let b of c)d+=b;w>=10&&(f|=1<<1-x),x!==1&&(d=n.getNextSet(d),d=n.getNextUnset(d))}if(o.length!==2)throw new K;if(parseInt(o.toString())%4!==f)throw new K;return d}static parseExtensionString(n){return n.length!==2?null:new Map([[Se.ISSUE_NUMBER,parseInt(n)]])}}class Rh{static decodeRow(n,i,o){let c=_t.findGuardPattern(i,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ys().decodeRow(n,i,c)}catch{return new ic().decodeRow(n,i,c)}}}Rh.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class qe extends _t{constructor(){super(),this.decodeRowStringBuffer="",qe.L_AND_G_PATTERNS=qe.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let i=qe.L_PATTERNS[n-10],o=new Int32Array(i.length);for(let c=0;c<i.length;c++)o[c]=i[i.length-c-1];qe.L_AND_G_PATTERNS[n]=o}}decodeRow(n,i,o){let c=qe.findStartGuardPattern(i),u=o==null?null:o.get(G.NEED_RESULT_POINT_CALLBACK);if(u!=null){const ie=new pe((c[0]+c[1])/2,n);u.foundPossibleResultPoint(ie)}let d=this.decodeMiddle(i,c,this.decodeRowStringBuffer),f=d.rowOffset,x=d.resultString;if(u!=null){const ie=new pe(f,n);u.foundPossibleResultPoint(ie)}let w=this.decodeEnd(i,f);if(u!=null){const ie=new pe((w[0]+w[1])/2,n);u.foundPossibleResultPoint(ie)}let b=w[1],S=b+(b-w[0]);if(S>=i.getSize()||!i.isRange(b,S,!1))throw new K;let R=x.toString();if(R.length<8)throw new U;if(!qe.checkChecksum(R))throw new T;let M=(c[1]+c[0])/2,z=(w[1]+w[0])/2,V=this.getBarcodeFormat(),$=[new pe(M,n),new pe(z,n)],Z=new Pe(R,null,0,$,V,new Date().getTime()),ae=0;try{let ie=Rh.decodeRow(n,i,w[1]);Z.putMetadata(Se.UPC_EAN_EXTENSION,ie.getText()),Z.putAllMetadata(ie.getResultMetadata()),Z.addResultPoints(ie.getResultPoints()),ae=ie.getText().length}catch{}let le=o==null?null:o.get(G.ALLOWED_EAN_EXTENSIONS);if(le!=null){let ie=!1;for(let Ve in le)if(ae.toString()===Ve){ie=!0;break}if(!ie)throw new K}return Z}decodeEnd(n,i){return qe.findGuardPattern(n,i,!1,qe.START_END_PATTERN,new Int32Array(qe.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return qe.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let i=n.length;if(i===0)return!1;let o=parseInt(n.charAt(i-1),10);return qe.getStandardUPCEANChecksum(n.substring(0,i-1))===o}static getStandardUPCEANChecksum(n){let i=n.length,o=0;for(let c=i-1;c>=0;c-=2){let u=n.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new U;o+=u}o*=3;for(let c=i-2;c>=0;c-=2){let u=n.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new U;o+=u}return(1e3-o)%10}}class yi extends qe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,i,o){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=n.getSize(),d=i[1],f=0;for(let w=0;w<6&&d<u;w++){let b=qe.decodeDigit(n,c,d,qe.L_AND_G_PATTERNS);o+=String.fromCharCode(48+b%10);for(let S of c)d+=S;b>=10&&(f|=1<<5-w)}o=yi.determineFirstDigit(o,f),d=qe.findGuardPattern(n,d,!0,qe.MIDDLE_PATTERN,new Int32Array(qe.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<6&&d<u;w++){let b=qe.decodeDigit(n,c,d,qe.L_PATTERNS);o+=String.fromCharCode(48+b);for(let S of c)d+=S}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return de.EAN_13}static determineFirstDigit(n,i){for(let o=0;o<10;o++)if(i===this.FIRST_DIGIT_ENCODINGS[o])return n=String.fromCharCode(48+o)+n,n;throw new K}}yi.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Oh extends qe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,i,o){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=n.getSize(),d=i[1];for(let x=0;x<4&&d<u;x++){let w=qe.decodeDigit(n,c,d,qe.L_PATTERNS);o+=String.fromCharCode(48+w);for(let b of c)d+=b}d=qe.findGuardPattern(n,d,!0,qe.MIDDLE_PATTERN,new Int32Array(qe.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<4&&d<u;x++){let w=qe.decodeDigit(n,c,d,qe.L_PATTERNS);o+=String.fromCharCode(48+w);for(let b of c)d+=b}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return de.EAN_8}}class kh extends qe{constructor(){super(...arguments),this.ean13Reader=new yi}getBarcodeFormat(){return de.UPC_A}decode(n,i){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,i,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,i,o))}decodeMiddle(n,i,o){return this.ean13Reader.decodeMiddle(n,i,o)}maybeReturnResult(n){let i=n.getText();if(i.charAt(0)==="0"){let o=new Pe(i.substring(1),null,null,n.getResultPoints(),de.UPC_A);return n.getResultMetadata()!=null&&o.putAllMetadata(n.getResultMetadata()),o}else throw new K}reset(){this.ean13Reader.reset()}}class Kr extends qe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,i,o){const c=this.decodeMiddleCounters.map(w=>w);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const u=n.getSize();let d=i[1],f=0;for(let w=0;w<6&&d<u;w++){const b=Kr.decodeDigit(n,c,d,Kr.L_AND_G_PATTERNS);o+=String.fromCharCode(48+b%10);for(let S of c)d+=S;b>=10&&(f|=1<<5-w)}let x=Kr.determineNumSysAndCheckDigit(o,f);return{rowOffset:d,resultString:x}}decodeEnd(n,i){return Kr.findGuardPatternWithoutCounters(n,i,!0,Kr.MIDDLE_END_PATTERN)}checkChecksum(n){return qe.checkChecksum(Kr.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,i){for(let o=0;o<=1;o++)for(let c=0;c<10;c++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][c]){let u=String.fromCharCode(48+o),d=String.fromCharCode(48+c);return u+n+d}throw K.getNotFoundInstance()}getBarcodeFormat(){return de.UPC_E}static convertUPCEtoUPCA(n){const i=n.slice(1,7).split("").map(u=>u.charCodeAt(0)),o=new se;o.append(n.charAt(0));let c=i[5];switch(c){case 0:case 1:case 2:o.appendChars(i,0,2),o.append(c),o.append("0000"),o.appendChars(i,2,3);break;case 3:o.appendChars(i,0,3),o.append("00000"),o.appendChars(i,3,2);break;case 4:o.appendChars(i,0,4),o.append("00000"),o.append(i[4]);break;default:o.appendChars(i,0,5),o.append("0000"),o.append(c);break}return n.length>=8&&o.append(n.charAt(7)),o.toString()}}Kr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Kr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class sc extends at{constructor(n){super();let i=n==null?null:n.get(G.POSSIBLE_FORMATS),o=[];s(i)?(o.push(new yi),o.push(new kh),o.push(new Oh),o.push(new Kr)):(i.indexOf(de.EAN_13)>-1&&o.push(new yi),i.indexOf(de.UPC_A)>-1&&o.push(new kh),i.indexOf(de.EAN_8)>-1&&o.push(new Oh),i.indexOf(de.UPC_E)>-1&&o.push(new Kr)),this.readers=o}decodeRow(n,i,o){for(let c of this.readers)try{const u=c.decodeRow(n,i,o),d=u.getBarcodeFormat()===de.EAN_13&&u.getText().charAt(0)==="0",f=o==null?null:o.get(G.POSSIBLE_FORMATS),x=f==null||f.includes(de.UPC_A);if(d&&x){const w=u.getRawBytes(),b=new Pe(u.getText().substring(1),w,w?w.length:null,u.getResultPoints(),de.UPC_A);return b.putAllMetadata(u.getResultMetadata()),b}return u}catch{}throw new K}reset(){for(let n of this.readers)n.reset()}}class rr extends at{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,i){for(let o=0;o<i.length;o++)if(at.patternMatchVariance(n,i[o],rr.MAX_INDIVIDUAL_VARIANCE)<rr.MAX_AVG_VARIANCE)return o;throw new K}static count(n){return be.sum(new Int32Array(n))}static increment(n,i){let o=0,c=i[0];for(let u=1;u<n.length;u++)i[u]>c&&(c=i[u],o=u);n[o]++}static decrement(n,i){let o=0,c=i[0];for(let u=1;u<n.length;u++)i[u]<c&&(c=i[u],o=u);n[o]--}static isFinderPattern(n){let i=n[0]+n[1],o=i+n[2]+n[3],c=i/o;if(c>=rr.MIN_FINDER_PATTERN_RATIO&&c<=rr.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let f of n)f>d&&(d=f),f<u&&(u=f);return d<10*u}return!1}}rr.MAX_AVG_VARIANCE=.2,rr.MAX_INDIVIDUAL_VARIANCE=.45,rr.MIN_FINDER_PATTERN_RATIO=9.5/12,rr.MAX_FINDER_PATTERN_RATIO=12.5/14;class qi{constructor(n,i){this.value=n,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof qi))return!1;const i=n;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class oa{constructor(n,i,o,c,u){this.value=n,this.startEnd=i,this.value=n,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new pe(o,u)),this.resultPoints.push(new pe(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof oa))return!1;const i=n;return this.value===i.value}hashCode(){return this.value}}class un{constructor(){}static getRSSvalue(n,i,o){let c=0;for(let x of n)c+=x;let u=0,d=0,f=n.length;for(let x=0;x<f-1;x++){let w;for(w=1,d|=1<<x;w<n[x];w++,d&=~(1<<x)){let b=un.combins(c-w-1,f-x-2);if(o&&d===0&&c-w-(f-x-1)>=f-x-1&&(b-=un.combins(c-w-(f-x),f-x-2)),f-x-1>1){let S=0;for(let R=c-w-(f-x-2);R>i;R--)S+=un.combins(c-w-R-1,f-x-3);b-=S*(f-1-x)}else c-w>i&&b--;u+=b}c-=w}return u}static combins(n,i){let o,c;n-i>i?(c=i,o=n-i):(c=n-i,o=i);let u=1,d=1;for(let f=n;f>o;f--)u*=f,d<=c&&(u/=d,d++);for(;d<=c;)u/=d,d++;return u}}class Fp{static buildBitArray(n){let i=n.length*2-1;n[n.length-1].getRightChar()==null&&(i-=1);let o=12*i,c=new L(o),u=0,f=n[0].getRightChar().getValue();for(let x=11;x>=0;--x)f&1<<x&&c.set(u),u++;for(let x=1;x<n.length;++x){let w=n[x],b=w.getLeftChar().getValue();for(let S=11;S>=0;--S)b&1<<S&&c.set(u),u++;if(w.getRightChar()!=null){let S=w.getRightChar().getValue();for(let R=11;R>=0;--R)S&1<<R&&c.set(u),u++}}return c}}class vi{constructor(n,i){i?this.decodedInformation=null:(this.finished=n,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class oc{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class pr extends oc{constructor(n,i){super(n),this.value=i}getValue(){return this.value}isFNC1(){return this.value===pr.FNC1}}pr.FNC1="$";class Ei extends oc{constructor(n,i,o){super(n),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class jr extends oc{constructor(n,i,o){if(super(n),i<0||i>10||o<0||o>10)throw new U;this.firstDigit=i,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===jr.FNC1}isSecondDigitFNC1(){return this.secondDigit===jr.FNC1}isAnyFNC1(){return this.firstDigit===jr.FNC1||this.secondDigit===jr.FNC1}}jr.FNC1=10;class we{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new K;let i=n.substring(0,2);for(let u of we.TWO_DIGIT_DATA_LENGTH)if(u[0]===i)return u[1]===we.VARIABLE_LENGTH?we.processVariableAI(2,u[2],n):we.processFixedAI(2,u[1],n);if(n.length<3)throw new K;let o=n.substring(0,3);for(let u of we.THREE_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===we.VARIABLE_LENGTH?we.processVariableAI(3,u[2],n):we.processFixedAI(3,u[1],n);for(let u of we.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===we.VARIABLE_LENGTH?we.processVariableAI(4,u[2],n):we.processFixedAI(4,u[1],n);if(n.length<4)throw new K;let c=n.substring(0,4);for(let u of we.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===we.VARIABLE_LENGTH?we.processVariableAI(4,u[2],n):we.processFixedAI(4,u[1],n);throw new K}static processFixedAI(n,i,o){if(o.length<n)throw new K;let c=o.substring(0,n);if(o.length<n+i)throw new K;let u=o.substring(n,n+i),d=o.substring(n+i),f="("+c+")"+u,x=we.parseFieldsInGeneralPurpose(d);return x==null?f:f+x}static processVariableAI(n,i,o){let c=o.substring(0,n),u;o.length<n+i?u=o.length:u=n+i;let d=o.substring(n,u),f=o.substring(u),x="("+c+")"+d,w=we.parseFieldsInGeneralPurpose(f);return w==null?x:x+w}}we.VARIABLE_LENGTH=[],we.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",we.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",we.VARIABLE_LENGTH,20],["22",we.VARIABLE_LENGTH,29],["30",we.VARIABLE_LENGTH,8],["37",we.VARIABLE_LENGTH,8],["90",we.VARIABLE_LENGTH,30],["91",we.VARIABLE_LENGTH,30],["92",we.VARIABLE_LENGTH,30],["93",we.VARIABLE_LENGTH,30],["94",we.VARIABLE_LENGTH,30],["95",we.VARIABLE_LENGTH,30],["96",we.VARIABLE_LENGTH,30],["97",we.VARIABLE_LENGTH,3],["98",we.VARIABLE_LENGTH,30],["99",we.VARIABLE_LENGTH,30]],we.THREE_DIGIT_DATA_LENGTH=[["240",we.VARIABLE_LENGTH,30],["241",we.VARIABLE_LENGTH,30],["242",we.VARIABLE_LENGTH,6],["250",we.VARIABLE_LENGTH,30],["251",we.VARIABLE_LENGTH,30],["253",we.VARIABLE_LENGTH,17],["254",we.VARIABLE_LENGTH,20],["400",we.VARIABLE_LENGTH,30],["401",we.VARIABLE_LENGTH,30],["402",17],["403",we.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",we.VARIABLE_LENGTH,20],["421",we.VARIABLE_LENGTH,15],["422",3],["423",we.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],we.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",we.VARIABLE_LENGTH,15],["391",we.VARIABLE_LENGTH,18],["392",we.VARIABLE_LENGTH,15],["393",we.VARIABLE_LENGTH,18],["703",we.VARIABLE_LENGTH,30]],we.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",we.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",we.VARIABLE_LENGTH,20],["8003",we.VARIABLE_LENGTH,30],["8004",we.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",we.VARIABLE_LENGTH,30],["8008",we.VARIABLE_LENGTH,12],["8018",18],["8020",we.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",we.VARIABLE_LENGTH,70],["8200",we.VARIABLE_LENGTH,70]];class Ki{constructor(n){this.buffer=new se,this.information=n}decodeAllCodes(n,i){let o=i,c=null;do{let u=this.decodeGeneralPurposeField(o,c),d=we.parseFieldsInGeneralPurpose(u.getNewString());if(d!=null&&n.append(d),u.isRemaining()?c=""+u.getRemainingValue():c=null,o===u.getNewPosition())break;o=u.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let i=n;i<n+3;++i)if(this.information.get(i))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(n,4);return u===0?new jr(this.information.getSize(),jr.FNC1,jr.FNC1):new jr(this.information.getSize(),u-1,jr.FNC1)}let i=this.extractNumericValueFromBitArray(n,7),o=(i-8)/11,c=(i-8)%11;return new jr(n+7,o,c)}extractNumericValueFromBitArray(n,i){return Ki.extractNumericValueFromBitArray(this.information,n,i)}static extractNumericValueFromBitArray(n,i,o){let c=0;for(let u=0;u<o;++u)n.get(i+u)&&(c|=1<<o-u-1);return c}decodeGeneralPurposeField(n,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(n);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new Ei(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new Ei(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,i;do{let o=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),n=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),n=i.isFinished()):(i=this.parseNumericBlock(),n=i.isFinished()),!(o!==this.current.getPosition())&&!n)break}while(!n);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let i;return n.isSecondDigitFNC1()?i=new Ei(this.current.getPosition(),this.buffer.toString()):i=new Ei(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new vi(!0,i)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let i=new Ei(this.current.getPosition(),this.buffer.toString());return new vi(!0,i)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new vi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let i=new Ei(this.current.getPosition(),this.buffer.toString());return new vi(!0,i)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new vi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let i=new Ei(this.current.getPosition(),this.buffer.toString());return new vi(!0,i)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new vi(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,5);if(i>=5&&i<16)return!0;if(n+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(n,7);if(o>=64&&o<116)return!0;if(n+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(n,8);return c>=232&&c<253}decodeIsoIec646(n){let i=this.extractNumericValueFromBitArray(n,5);if(i===15)return new pr(n+5,pr.FNC1);if(i>=5&&i<15)return new pr(n+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(n,7);if(o>=64&&o<90)return new pr(n+7,""+(o+1));if(o>=90&&o<116)return new pr(n+7,""+(o+7));let c=this.extractNumericValueFromBitArray(n,8),u;switch(c){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new U}return new pr(n+8,u)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,5);if(i>=5&&i<16)return!0;if(n+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(n,6);return o>=16&&o<63}decodeAlphanumeric(n){let i=this.extractNumericValueFromBitArray(n,5);if(i===15)return new pr(n+5,pr.FNC1);if(i>=5&&i<15)return new pr(n+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(n,6);if(o>=32&&o<58)return new pr(n+6,""+(o+33));let c;switch(o){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Be("Decoding invalid alphanumeric value: "+o)}return new pr(n+6,c)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let i=0;i<5&&i+n<this.information.getSize();++i)if(i===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+i))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let i=n;i<n+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let i=0;i<4&&i+n<this.information.getSize();++i)if(this.information.get(n+i))return!1;return!0}}class ac{constructor(n){this.information=n,this.generalDecoder=new Ki(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class xr extends ac{constructor(n){super(n)}encodeCompressedGtin(n,i){n.append("(01)");let o=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,i,o)}encodeCompressedGtinWithoutAI(n,i,o){for(let c=0;c<4;++c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*c,10);u/100===0&&n.append("0"),u/10===0&&n.append("0"),n.append(u)}xr.appendCheckDigit(n,o)}static appendCheckDigit(n,i){let o=0;for(let c=0;c<13;c++){let u=n.charAt(c+i).charCodeAt(0)-48;o+=c&1?u:3*u}o=10-o%10,o===10&&(o=0),n.append(o)}}xr.GTIN_SIZE=40;class Yi extends xr{constructor(n){super(n)}parseInformation(){let n=new se;n.append("(01)");let i=n.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(Yi.HEADER_SIZE,4);return n.append(o),this.encodeCompressedGtinWithoutAI(n,Yi.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(n,Yi.HEADER_SIZE+44)}}Yi.HEADER_SIZE=4;class aa extends ac{constructor(n){super(n)}parseInformation(){let n=new se;return this.getGeneralDecoder().decodeAllCodes(n,aa.HEADER_SIZE)}}aa.HEADER_SIZE=5;class la extends xr{constructor(n){super(n)}encodeCompressedWeight(n,i,o){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(i,o);this.addWeightCode(n,c);let u=this.checkWeight(c),d=1e5;for(let f=0;f<5;++f)u/d===0&&n.append("0"),d/=10;n.append(u)}}class dn extends la{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=dn.HEADER_SIZE+la.GTIN_SIZE+dn.WEIGHT_SIZE)throw new K;let n=new se;return this.encodeCompressedGtin(n,dn.HEADER_SIZE),this.encodeCompressedWeight(n,dn.HEADER_SIZE+la.GTIN_SIZE,dn.WEIGHT_SIZE),n.toString()}}dn.HEADER_SIZE=5,dn.WEIGHT_SIZE=15;class Up extends dn{constructor(n){super(n)}addWeightCode(n,i){n.append("(3103)")}checkWeight(n){return n}}class zp extends dn{constructor(n){super(n)}addWeightCode(n,i){i<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class hn extends xr{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<hn.HEADER_SIZE+xr.GTIN_SIZE)throw new K;let n=new se;this.encodeCompressedGtin(n,hn.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(hn.HEADER_SIZE+xr.GTIN_SIZE,hn.LAST_DIGIT_SIZE);n.append("(392"),n.append(i),n.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(hn.HEADER_SIZE+xr.GTIN_SIZE+hn.LAST_DIGIT_SIZE,null);return n.append(o.getNewString()),n.toString()}}hn.HEADER_SIZE=8,hn.LAST_DIGIT_SIZE=2;class cr extends xr{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<cr.HEADER_SIZE+xr.GTIN_SIZE)throw new K;let n=new se;this.encodeCompressedGtin(n,cr.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(cr.HEADER_SIZE+xr.GTIN_SIZE,cr.LAST_DIGIT_SIZE);n.append("(393"),n.append(i),n.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(cr.HEADER_SIZE+xr.GTIN_SIZE+cr.LAST_DIGIT_SIZE,cr.FIRST_THREE_DIGITS_SIZE);o/100==0&&n.append("0"),o/10==0&&n.append("0"),n.append(o);let c=this.getGeneralDecoder().decodeGeneralPurposeField(cr.HEADER_SIZE+xr.GTIN_SIZE+cr.LAST_DIGIT_SIZE+cr.FIRST_THREE_DIGITS_SIZE,null);return n.append(c.getNewString()),n.toString()}}cr.HEADER_SIZE=8,cr.LAST_DIGIT_SIZE=2,cr.FIRST_THREE_DIGITS_SIZE=10;class pt extends la{constructor(n,i,o){super(n),this.dateCode=o,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=pt.HEADER_SIZE+pt.GTIN_SIZE+pt.WEIGHT_SIZE+pt.DATE_SIZE)throw new K;let n=new se;return this.encodeCompressedGtin(n,pt.HEADER_SIZE),this.encodeCompressedWeight(n,pt.HEADER_SIZE+pt.GTIN_SIZE,pt.WEIGHT_SIZE),this.encodeCompressedDate(n,pt.HEADER_SIZE+pt.GTIN_SIZE+pt.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,i){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(i,pt.DATE_SIZE);if(o==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let c=o%32;o/=32;let u=o%12+1;o/=12;let d=o;d/10==0&&n.append("0"),n.append(d),u/10==0&&n.append("0"),n.append(u),c/10==0&&n.append("0"),n.append(c)}addWeightCode(n,i){n.append("("),n.append(this.firstAIdigits),n.append(i/1e5),n.append(")")}checkWeight(n){return n%1e5}}pt.HEADER_SIZE=8,pt.WEIGHT_SIZE=20,pt.DATE_SIZE=16;function Ph(C){try{if(C.get(1))return new Yi(C);if(!C.get(2))return new aa(C);switch(Ki.extractNumericValueFromBitArray(C,1,4)){case 4:return new Up(C);case 5:return new zp(C)}switch(Ki.extractNumericValueFromBitArray(C,1,5)){case 12:return new hn(C);case 13:return new cr(C)}switch(Ki.extractNumericValueFromBitArray(C,1,7)){case 56:return new pt(C,"310","11");case 57:return new pt(C,"320","11");case 58:return new pt(C,"310","13");case 59:return new pt(C,"320","13");case 60:return new pt(C,"310","15");case 61:return new pt(C,"320","15");case 62:return new pt(C,"310","17");case 63:return new pt(C,"320","17")}}catch(n){throw console.log(n),new Be("unknown decoder: "+C)}}class Fn{constructor(n,i,o,c){this.leftchar=n,this.rightchar=i,this.finderpattern=o,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,i){return n instanceof Fn?Fn.equalsOrNull(n.leftchar,i.leftchar)&&Fn.equalsOrNull(n.rightchar,i.rightchar)&&Fn.equalsOrNull(n.finderpattern,i.finderpattern):!1}static equalsOrNull(n,i){return n===null?i===null:Fn.equals(n,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class lc{constructor(n,i,o){this.pairs=n,this.rowNumber=i,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,i){return n instanceof lc?this.checkEqualitity(n,i)&&n.wasReversed===i.wasReversed:!1}checkEqualitity(n,i){if(!n||!i)return;let o;return n.forEach((c,u)=>{i.forEach(d=>{c.getLeftChar().getValue()===d.getLeftChar().getValue()&&c.getRightChar().getValue()===d.getRightChar().getValue()&&c.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(o=!0)})}),o}}class ne extends rr{constructor(n){super(...arguments),this.pairs=new Array(ne.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,i,o){this.pairs.length=0,this.startFromEven=!1;try{return ne.constructResult(this.decodeRow2pairs(n,i))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,ne.constructResult(this.decodeRow2pairs(n,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,i){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,n))}catch(u){if(u instanceof K){if(!this.pairs.length)throw new K;o=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(n,!1),c){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new K}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return n&&(this.rows=this.rows.reverse()),i}checkRows(n,i){for(let o=i;o<this.rows.length;o++){let c=this.rows[o];this.pairs.length=0;for(let d of n)this.pairs.push(d.getPairs());if(this.pairs.push(c.getPairs()),!ne.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(n);u.push(c);try{return this.checkRows(u,o+1)}catch(d){this.verbose&&console.log(d)}}throw new K}static isValidSequence(n){for(let i of ne.FINDER_PATTERN_SEQUENCES){if(n.length>i.length)continue;let o=!0;for(let c=0;c<n.length;c++)if(n[c].getFinderPattern().getValue()!=i[c]){o=!1;break}if(o)return!0}return!1}storeRow(n,i){let o=0,c=!1,u=!1;for(;o<this.rows.length;){let d=this.rows[o];if(d.getRowNumber()>n){u=d.isEquivalent(this.pairs);break}c=d.isEquivalent(this.pairs),o++}u||c||ne.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new lc(this.pairs,n,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,i){for(let o of i)if(o.getPairs().length!==n.length){for(let c of o.getPairs())for(let u of n)if(Fn.equals(c,u))break}}static isPartialRow(n,i){for(let o of i){let c=!0;for(let u of n){let d=!1;for(let f of o.getPairs())if(u.equals(f)){d=!0;break}if(!d){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(n){let i=Fp.buildBitArray(n),c=Ph(i).parseInformation(),u=n[0].getFinderPattern().getResultPoints(),d=n[n.length-1].getFinderPattern().getResultPoints(),f=[u[0],u[1],d[0],d[1]];return new Pe(c,null,null,f,de.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),i=n.getLeftChar(),o=n.getRightChar();if(o==null)return!1;let c=o.getChecksumPortion(),u=2;for(let f=1;f<this.pairs.size();++f){let x=this.pairs.get(f);c+=x.getLeftChar().getChecksumPortion(),u++;let w=x.getRightChar();w!=null&&(c+=w.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==i.getValue()}static getNextSecondBar(n,i){let o;return n.get(i)?(o=n.getNextUnset(i),o=n.getNextSet(o)):(o=n.getNextSet(i),o=n.getNextUnset(o)),o}retrieveNextPair(n,i,o){let c=i.length%2==0;this.startFromEven&&(c=!c);let u,d=!0,f=-1;do this.findNextPair(n,i,f),u=this.parseFoundFinderPattern(n,o,c),u==null?f=ne.getNextSecondBar(n,this.startEnd[0]):d=!1;while(d);let x=this.decodeDataCharacter(n,u,c,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new K;let w;try{w=this.decodeDataCharacter(n,u,c,!1)}catch(b){w=null,this.verbose&&console.log(b)}return new Fn(x,w,u,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,i,o){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=n.getSize(),d;o>=0?d=o:this.isEmptyPair(i)?d=0:d=i[i.length-1].getFinderPattern().getStartEnd()[1];let f=i.length%2!=0;this.startFromEven&&(f=!f);let x=!1;for(;d<u&&(x=!n.get(d),!!x);)d++;let w=0,b=d;for(let S=d;S<u;S++)if(n.get(S)!=x)c[w]++;else{if(w==3){if(f&&ne.reverseCounters(c),ne.isFinderPattern(c)){this.startEnd[0]=b,this.startEnd[1]=S;return}f&&ne.reverseCounters(c),b+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,x=!x}throw new K}static reverseCounters(n){let i=n.length;for(let o=0;o<i/2;++o){let c=n[o];n[o]=n[i-o-1],n[i-o-1]=c}}parseFoundFinderPattern(n,i,o){let c,u,d;if(o){let w=this.startEnd[0]-1;for(;w>=0&&!n.get(w);)w--;w++,c=this.startEnd[0]-w,u=w,d=this.startEnd[1]}else u=this.startEnd[0],d=n.getNextUnset(this.startEnd[1]+1),c=d-this.startEnd[1];let f=this.getDecodeFinderCounters();j.arraycopy(f,0,f,1,f.length-1),f[0]=c;let x;try{x=this.parseFinderValue(f,ne.FINDER_PATTERNS)}catch{return null}return new oa(x,[u,d],u,d,i)}decodeDataCharacter(n,i,o,c){let u=this.getDataCharacterCounters();for(let st=0;st<u.length;st++)u[st]=0;if(c)ne.recordPatternInReverse(n,i.getStartEnd()[0],u);else{ne.recordPattern(n,i.getStartEnd()[1],u);for(let st=0,Yt=u.length-1;st<Yt;st++,Yt--){let Sr=u[st];u[st]=u[Yt],u[Yt]=Sr}}let d=17,f=be.sum(new Int32Array(u))/d,x=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(f-x)/x>.3)throw new K;let w=this.getOddCounts(),b=this.getEvenCounts(),S=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let st=0;st<u.length;st++){let Yt=1*u[st]/f,Sr=Yt+.5;if(Sr<1){if(Yt<.3)throw new K;Sr=1}else if(Sr>8){if(Yt>8.7)throw new K;Sr=8}let ts=st/2;st&1?(b[ts]=Sr,R[ts]=Yt-Sr):(w[ts]=Sr,S[ts]=Yt-Sr)}this.adjustOddEvenCounts(d);let M=4*i.getValue()+(o?0:2)+(c?0:1)-1,z=0,V=0;for(let st=w.length-1;st>=0;st--){if(ne.isNotA1left(i,o,c)){let Yt=ne.WEIGHTS[M][2*st];V+=w[st]*Yt}z+=w[st]}let $=0;for(let st=b.length-1;st>=0;st--)if(ne.isNotA1left(i,o,c)){let Yt=ne.WEIGHTS[M][2*st+1];$+=b[st]*Yt}let Z=V+$;if(z&1||z>13||z<4)throw new K;let ae=(13-z)/2,le=ne.SYMBOL_WIDEST[ae],ie=9-le,Ve=un.getRSSvalue(w,le,!0),Me=un.getRSSvalue(b,ie,!1),yr=ne.EVEN_TOTAL_SUBSET[ae],Yr=ne.GSUM[ae],vr=Ve*yr+Me+Yr;return new qi(vr,Z)}static isNotA1left(n,i,o){return!(n.getValue()==0&&i&&o)}adjustOddEvenCounts(n){let i=be.sum(new Int32Array(this.getOddCounts())),o=be.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;i>13?u=!0:i<4&&(c=!0);let d=!1,f=!1;o>13?f=!0:o<4&&(d=!0);let x=i+o-n,w=(i&1)==1,b=(o&1)==0;if(x==1)if(w){if(b)throw new K;u=!0}else{if(!b)throw new K;f=!0}else if(x==-1)if(w){if(b)throw new K;c=!0}else{if(!b)throw new K;d=!0}else if(x==0){if(w){if(!b)throw new K;i<o?(c=!0,f=!0):(u=!0,d=!0)}else if(b)throw new K}else throw new K;if(c){if(u)throw new K;ne.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&ne.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(f)throw new K;ne.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&ne.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ne.SYMBOL_WIDEST=[7,5,4,3,1],ne.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ne.GSUM=[0,348,1388,2948,3988],ne.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ne.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ne.FINDER_PAT_A=0,ne.FINDER_PAT_B=1,ne.FINDER_PAT_C=2,ne.FINDER_PAT_D=3,ne.FINDER_PAT_E=4,ne.FINDER_PAT_F=5,ne.FINDER_PATTERN_SEQUENCES=[[ne.FINDER_PAT_A,ne.FINDER_PAT_A],[ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B],[ne.FINDER_PAT_A,ne.FINDER_PAT_C,ne.FINDER_PAT_B,ne.FINDER_PAT_D],[ne.FINDER_PAT_A,ne.FINDER_PAT_E,ne.FINDER_PAT_B,ne.FINDER_PAT_D,ne.FINDER_PAT_C],[ne.FINDER_PAT_A,ne.FINDER_PAT_E,ne.FINDER_PAT_B,ne.FINDER_PAT_D,ne.FINDER_PAT_D,ne.FINDER_PAT_F],[ne.FINDER_PAT_A,ne.FINDER_PAT_E,ne.FINDER_PAT_B,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_F,ne.FINDER_PAT_F],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_D],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_E],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_F,ne.FINDER_PAT_F],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_E,ne.FINDER_PAT_F,ne.FINDER_PAT_F]],ne.MAX_PAIRS=11;class Vp extends qi{constructor(n,i,o){super(n,i),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ct extends rr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,i,o){const c=this.decodePair(i,!1,n,o);Ct.addOrTally(this.possibleLeftPairs,c),i.reverse();let u=this.decodePair(i,!0,n,o);Ct.addOrTally(this.possibleRightPairs,u),i.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let f of this.possibleRightPairs)if(f.getCount()>1&&Ct.checkChecksum(d,f))return Ct.constructResult(d,f)}throw new K}static addOrTally(n,i){if(i==null)return;let o=!1;for(let c of n)if(c.getValue()===i.getValue()){c.incrementCount(),o=!0;break}o||n.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,i){let o=4537077*n.getValue()+i.getValue(),c=new String(o).toString(),u=new se;for(let w=13-c.length;w>0;w--)u.append("0");u.append(c);let d=0;for(let w=0;w<13;w++){let b=u.charAt(w).charCodeAt(0)-48;d+=w&1?b:3*b}d=10-d%10,d===10&&(d=0),u.append(d.toString());let f=n.getFinderPattern().getResultPoints(),x=i.getFinderPattern().getResultPoints();return new Pe(u.toString(),null,0,[f[0],f[1],x[0],x[1]],de.RSS_14,new Date().getTime())}static checkChecksum(n,i){let o=(n.getChecksumPortion()+16*i.getChecksumPortion())%79,c=9*n.getFinderPattern().getValue()+i.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,o===c}decodePair(n,i,o,c){try{let u=this.findFinderPattern(n,i),d=this.parseFoundFinderPattern(n,o,i,u),f=c==null?null:c.get(G.NEED_RESULT_POINT_CALLBACK);if(f!=null){let b=(u[0]+u[1])/2;i&&(b=n.getSize()-1-b),f.foundPossibleResultPoint(new pe(b,o))}let x=this.decodeDataCharacter(n,d,!0),w=this.decodeDataCharacter(n,d,!1);return new Vp(1597*x.getValue()+w.getValue(),x.getChecksumPortion()+4*w.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(n,i,o){let c=this.getDataCharacterCounters();for(let $=0;$<c.length;$++)c[$]=0;if(o)at.recordPatternInReverse(n,i.getStartEnd()[0],c);else{at.recordPattern(n,i.getStartEnd()[1]+1,c);for(let $=0,Z=c.length-1;$<Z;$++,Z--){let ae=c[$];c[$]=c[Z],c[Z]=ae}}let u=o?16:15,d=be.sum(new Int32Array(c))/u,f=this.getOddCounts(),x=this.getEvenCounts(),w=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors();for(let $=0;$<c.length;$++){let Z=c[$]/d,ae=Math.floor(Z+.5);ae<1?ae=1:ae>8&&(ae=8);let le=Math.floor($/2);$&1?(x[le]=ae,b[le]=Z-ae):(f[le]=ae,w[le]=Z-ae)}this.adjustOddEvenCounts(o,u);let S=0,R=0;for(let $=f.length-1;$>=0;$--)R*=9,R+=f[$],S+=f[$];let M=0,z=0;for(let $=x.length-1;$>=0;$--)M*=9,M+=x[$],z+=x[$];let V=R+3*M;if(o){if(S&1||S>12||S<4)throw new K;let $=(12-S)/2,Z=Ct.OUTSIDE_ODD_WIDEST[$],ae=9-Z,le=un.getRSSvalue(f,Z,!1),ie=un.getRSSvalue(x,ae,!0),Ve=Ct.OUTSIDE_EVEN_TOTAL_SUBSET[$],Me=Ct.OUTSIDE_GSUM[$];return new qi(le*Ve+ie+Me,V)}else{if(z&1||z>10||z<4)throw new K;let $=(10-z)/2,Z=Ct.INSIDE_ODD_WIDEST[$],ae=9-Z,le=un.getRSSvalue(f,Z,!0),ie=un.getRSSvalue(x,ae,!1),Ve=Ct.INSIDE_ODD_TOTAL_SUBSET[$],Me=Ct.INSIDE_GSUM[$];return new qi(ie*Ve+le+Me,V)}}findFinderPattern(n,i){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let c=n.getSize(),u=!1,d=0;for(;d<c&&(u=!n.get(d),i!==u);)d++;let f=0,x=d;for(let w=d;w<c;w++)if(n.get(w)!==u)o[f]++;else{if(f===3){if(rr.isFinderPattern(o))return[x,w];x+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,f--}else f++;o[f]=1,u=!u}throw new K}parseFoundFinderPattern(n,i,o,c){let u=n.get(c[0]),d=c[0]-1;for(;d>=0&&u!==n.get(d);)d--;d++;const f=c[0]-d,x=this.getDecodeFinderCounters(),w=new Int32Array(x.length);j.arraycopy(x,0,w,1,x.length-1),w[0]=f;const b=this.parseFinderValue(w,Ct.FINDER_PATTERNS);let S=d,R=c[1];return o&&(S=n.getSize()-1-S,R=n.getSize()-1-R),new oa(b,[d,c[1]],S,R,i)}adjustOddEvenCounts(n,i){let o=be.sum(new Int32Array(this.getOddCounts())),c=be.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1,f=!1,x=!1;n?(o>12?d=!0:o<4&&(u=!0),c>12?x=!0:c<4&&(f=!0)):(o>11?d=!0:o<5&&(u=!0),c>10?x=!0:c<4&&(f=!0));let w=o+c-i,b=(o&1)===(n?1:0),S=(c&1)===1;if(w===1)if(b){if(S)throw new K;d=!0}else{if(!S)throw new K;x=!0}else if(w===-1)if(b){if(S)throw new K;u=!0}else{if(!S)throw new K;f=!0}else if(w===0){if(b){if(!S)throw new K;o<c?(u=!0,x=!0):(d=!0,f=!0)}else if(S)throw new K}else throw new K;if(u){if(d)throw new K;rr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&rr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(x)throw new K;rr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&rr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ct.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ct.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ct.OUTSIDE_GSUM=[0,161,961,2015,2715],Ct.INSIDE_GSUM=[0,336,1036,1516],Ct.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ct.INSIDE_ODD_WIDEST=[2,4,6,8],Ct.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Zi extends at{constructor(n,i){super(),this.readers=[],this.verbose=i===!0;const o=n?n.get(G.POSSIBLE_FORMATS):null,c=n&&n.get(G.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(de.EAN_13)||o.includes(de.UPC_A)||o.includes(de.EAN_8)||o.includes(de.UPC_E))&&this.readers.push(new sc(n)),o.includes(de.CODE_39)&&this.readers.push(new Mt(c)),o.includes(de.CODE_128)&&this.readers.push(new ce),o.includes(de.ITF)&&this.readers.push(new nt),o.includes(de.RSS_14)&&this.readers.push(new Ct),o.includes(de.RSS_EXPANDED)&&this.readers.push(new ne(this.verbose))):(this.readers.push(new sc(n)),this.readers.push(new Mt),this.readers.push(new sc(n)),this.readers.push(new ce),this.readers.push(new nt),this.readers.push(new Ct),this.readers.push(new ne(this.verbose)))}decodeRow(n,i,o){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(n,i,o)}catch{}throw new K}reset(){this.readers.forEach(n=>n.reset())}}class Wp extends me{constructor(n=500,i){super(new Zi(i),n,i)}}class Ze{constructor(n,i,o){this.ecCodewords=n,this.ecBlocks=[i],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ke{constructor(n,i){this.count=n,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class We{constructor(n,i,o,c,u,d){this.versionNumber=n,this.symbolSizeRows=i,this.symbolSizeColumns=o,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=d;let f=0;const x=d.getECCodewords(),w=d.getECBlocks();for(let b of w)f+=b.getCount()*(b.getDataCodewords()+x);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,i){if(n&1||i&1)throw new U;for(let o of We.VERSIONS)if(o.symbolSizeRows===n&&o.symbolSizeColumns===i)return o;throw new U}toString(){return""+this.versionNumber}static buildVersions(){return[new We(1,10,10,8,8,new Ze(5,new Ke(1,3))),new We(2,12,12,10,10,new Ze(7,new Ke(1,5))),new We(3,14,14,12,12,new Ze(10,new Ke(1,8))),new We(4,16,16,14,14,new Ze(12,new Ke(1,12))),new We(5,18,18,16,16,new Ze(14,new Ke(1,18))),new We(6,20,20,18,18,new Ze(18,new Ke(1,22))),new We(7,22,22,20,20,new Ze(20,new Ke(1,30))),new We(8,24,24,22,22,new Ze(24,new Ke(1,36))),new We(9,26,26,24,24,new Ze(28,new Ke(1,44))),new We(10,32,32,14,14,new Ze(36,new Ke(1,62))),new We(11,36,36,16,16,new Ze(42,new Ke(1,86))),new We(12,40,40,18,18,new Ze(48,new Ke(1,114))),new We(13,44,44,20,20,new Ze(56,new Ke(1,144))),new We(14,48,48,22,22,new Ze(68,new Ke(1,174))),new We(15,52,52,24,24,new Ze(42,new Ke(2,102))),new We(16,64,64,14,14,new Ze(56,new Ke(2,140))),new We(17,72,72,16,16,new Ze(36,new Ke(4,92))),new We(18,80,80,18,18,new Ze(48,new Ke(4,114))),new We(19,88,88,20,20,new Ze(56,new Ke(4,144))),new We(20,96,96,22,22,new Ze(68,new Ke(4,174))),new We(21,104,104,24,24,new Ze(56,new Ke(6,136))),new We(22,120,120,18,18,new Ze(68,new Ke(6,175))),new We(23,132,132,20,20,new Ze(62,new Ke(8,163))),new We(24,144,144,22,22,new Ze(62,new Ke(8,156),new Ke(2,155))),new We(25,8,18,6,16,new Ze(7,new Ke(1,5))),new We(26,8,32,6,14,new Ze(11,new Ke(1,10))),new We(27,12,26,10,24,new Ze(14,new Ke(1,16))),new We(28,12,36,10,16,new Ze(18,new Ke(1,22))),new We(29,16,36,14,16,new Ze(24,new Ke(1,32))),new We(30,16,48,14,22,new Ze(28,new Ke(1,49)))]}}We.VERSIONS=We.buildVersions();class cc{constructor(n){const i=n.getHeight();if(i<8||i>144||i&1)throw new U;this.version=cc.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new xe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const i=n.getHeight(),o=n.getWidth();return We.getVersionForDimensions(i,o)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let i=0,o=4,c=0;const u=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let f=!1,x=!1,w=!1,b=!1;do if(o===u&&c===0&&!f)n[i++]=this.readCorner1(u,d)&255,o-=2,c+=2,f=!0;else if(o===u-2&&c===0&&d&3&&!x)n[i++]=this.readCorner2(u,d)&255,o-=2,c+=2,x=!0;else if(o===u+4&&c===2&&!(d&7)&&!w)n[i++]=this.readCorner3(u,d)&255,o-=2,c+=2,w=!0;else if(o===u-2&&c===0&&(d&7)===4&&!b)n[i++]=this.readCorner4(u,d)&255,o-=2,c+=2,b=!0;else{do o<u&&c>=0&&!this.readMappingMatrix.get(c,o)&&(n[i++]=this.readUtah(o,c,u,d)&255),o-=2,c+=2;while(o>=0&&c<d);o+=1,c+=3;do o>=0&&c<d&&!this.readMappingMatrix.get(c,o)&&(n[i++]=this.readUtah(o,c,u,d)&255),o+=2,c-=2;while(o<u&&c>=0);o+=3,c+=1}while(o<u||c<d);if(i!==this.version.getTotalCodewords())throw new U;return n}readModule(n,i,o,c){return n<0&&(n+=o,i+=4-(o+4&7)),i<0&&(i+=c,n+=4-(c+4&7)),this.readMappingMatrix.set(i,n),this.mappingBitMatrix.get(i,n)}readUtah(n,i,o,c){let u=0;return this.readModule(n-2,i-2,o,c)&&(u|=1),u<<=1,this.readModule(n-2,i-1,o,c)&&(u|=1),u<<=1,this.readModule(n-1,i-2,o,c)&&(u|=1),u<<=1,this.readModule(n-1,i-1,o,c)&&(u|=1),u<<=1,this.readModule(n-1,i,o,c)&&(u|=1),u<<=1,this.readModule(n,i-2,o,c)&&(u|=1),u<<=1,this.readModule(n,i-1,o,c)&&(u|=1),u<<=1,this.readModule(n,i,o,c)&&(u|=1),u}readCorner1(n,i){let o=0;return this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,1,n,i)&&(o|=1),o<<=1,this.readModule(n-1,2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o<<=1,this.readModule(2,i-1,n,i)&&(o|=1),o<<=1,this.readModule(3,i-1,n,i)&&(o|=1),o}readCorner2(n,i){let o=0;return this.readModule(n-3,0,n,i)&&(o|=1),o<<=1,this.readModule(n-2,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(0,i-4,n,i)&&(o|=1),o<<=1,this.readModule(0,i-3,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o}readCorner3(n,i){let o=0;return this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,i-1,n,i)&&(o|=1),o<<=1,this.readModule(0,i-3,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-3,n,i)&&(o|=1),o<<=1,this.readModule(1,i-2,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o}readCorner4(n,i){let o=0;return this.readModule(n-3,0,n,i)&&(o|=1),o<<=1,this.readModule(n-2,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o<<=1,this.readModule(2,i-1,n,i)&&(o|=1),o<<=1,this.readModule(3,i-1,n,i)&&(o|=1),o}extractDataRegion(n){const i=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(n.getHeight()!==i)throw new E("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),d=i/c|0,f=o/u|0,x=d*c,w=f*u,b=new xe(w,x);for(let S=0;S<d;++S){const R=S*c;for(let M=0;M<f;++M){const z=M*u;for(let V=0;V<c;++V){const $=S*(c+2)+1+V,Z=R+V;for(let ae=0;ae<u;++ae){const le=M*(u+2)+1+ae;if(n.get(le,$)){const ie=z+ae;b.set(ie,Z)}}}}}return b}}class uc{constructor(n,i){this.numDataCodewords=n,this.codewords=i}static getDataBlocks(n,i){const o=i.getECBlocks();let c=0;const u=o.getECBlocks();for(let V of u)c+=V.getCount();const d=new Array(c);let f=0;for(let V of u)for(let $=0;$<V.getCount();$++){const Z=V.getDataCodewords(),ae=o.getECCodewords()+Z;d[f++]=new uc(Z,new Uint8Array(ae))}const w=d[0].codewords.length-o.getECCodewords(),b=w-1;let S=0;for(let V=0;V<b;V++)for(let $=0;$<f;$++)d[$].codewords[V]=n[S++];const R=i.getVersionNumber()===24,M=R?8:f;for(let V=0;V<M;V++)d[V].codewords[w-1]=n[S++];const z=d[0].codewords.length;for(let V=w;V<z;V++)for(let $=0;$<f;$++){const Z=R?($+8)%f:$,ae=R&&Z>7?V-1:V;d[Z].codewords[ae]=n[S++]}if(S!==n.length)throw new E;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class dc{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new E(""+n);let i=0,o=this.bitOffset,c=this.byteOffset;const u=this.bytes;if(o>0){const d=8-o,f=n<d?n:d,x=d-f,w=255>>8-f<<x;i=(u[c]&w)>>x,n-=f,o+=f,o===8&&(o=0,c++)}if(n>0){for(;n>=8;)i=i<<8|u[c]&255,c++,n-=8;if(n>0){const d=8-n,f=255>>d<<d;i=i<<n|(u[c]&f)>>d,o+=n}}return this.bitOffset=o,this.byteOffset=c,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Lt;(function(C){C[C.PAD_ENCODE=0]="PAD_ENCODE",C[C.ASCII_ENCODE=1]="ASCII_ENCODE",C[C.C40_ENCODE=2]="C40_ENCODE",C[C.TEXT_ENCODE=3]="TEXT_ENCODE",C[C.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",C[C.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",C[C.BASE256_ENCODE=6]="BASE256_ENCODE"})(Lt||(Lt={}));class Un{static decode(n){const i=new dc(n),o=new se,c=new se,u=new Array;let d=Lt.ASCII_ENCODE;do if(d===Lt.ASCII_ENCODE)d=this.decodeAsciiSegment(i,o,c);else{switch(d){case Lt.C40_ENCODE:this.decodeC40Segment(i,o);break;case Lt.TEXT_ENCODE:this.decodeTextSegment(i,o);break;case Lt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,o);break;case Lt.EDIFACT_ENCODE:this.decodeEdifactSegment(i,o);break;case Lt.BASE256_ENCODE:this.decodeBase256Segment(i,o,u);break;default:throw new U}d=Lt.ASCII_ENCODE}while(d!==Lt.PAD_ENCODE&&i.available()>0);return c.length()>0&&o.append(c.toString()),new Ue(n,o.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(n,i,o){let c=!1;do{let u=n.readBits(8);if(u===0)throw new U;if(u<=128)return c&&(u+=128),i.append(String.fromCharCode(u-1)),Lt.ASCII_ENCODE;if(u===129)return Lt.PAD_ENCODE;if(u<=229){const d=u-130;d<10&&i.append("0"),i.append(""+d)}else switch(u){case 230:return Lt.C40_ENCODE;case 231:return Lt.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:i.append("[)>05"),o.insert(0,"");break;case 237:i.append("[)>06"),o.insert(0,"");break;case 238:return Lt.ANSIX12_ENCODE;case 239:return Lt.TEXT_ENCODE;case 240:return Lt.EDIFACT_ENCODE;case 241:break;default:if(u!==254||n.available()!==0)throw new U;break}}while(n.available()>0);return Lt.ASCII_ENCODE}static decodeC40Segment(n,i){let o=!1;const c=[];let u=0;do{if(n.available()===8)return;const d=n.readBits(8);if(d===254)return;this.parseTwoBytes(d,n.readBits(8),c);for(let f=0;f<3;f++){const x=c[f];switch(u){case 0:if(x<3)u=x+1;else if(x<this.C40_BASIC_SET_CHARS.length){const w=this.C40_BASIC_SET_CHARS[x];o?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):i.append(w)}else throw new U;break;case 1:o?(i.append(String.fromCharCode(x+128)),o=!1):i.append(String.fromCharCode(x)),u=0;break;case 2:if(x<this.C40_SHIFT2_SET_CHARS.length){const w=this.C40_SHIFT2_SET_CHARS[x];o?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):i.append(w)}else switch(x){case 27:i.append("");break;case 30:o=!0;break;default:throw new U}u=0;break;case 3:o?(i.append(String.fromCharCode(x+224)),o=!1):i.append(String.fromCharCode(x+96)),u=0;break;default:throw new U}}}while(n.available()>0)}static decodeTextSegment(n,i){let o=!1,c=[],u=0;do{if(n.available()===8)return;const d=n.readBits(8);if(d===254)return;this.parseTwoBytes(d,n.readBits(8),c);for(let f=0;f<3;f++){const x=c[f];switch(u){case 0:if(x<3)u=x+1;else if(x<this.TEXT_BASIC_SET_CHARS.length){const w=this.TEXT_BASIC_SET_CHARS[x];o?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):i.append(w)}else throw new U;break;case 1:o?(i.append(String.fromCharCode(x+128)),o=!1):i.append(String.fromCharCode(x)),u=0;break;case 2:if(x<this.TEXT_SHIFT2_SET_CHARS.length){const w=this.TEXT_SHIFT2_SET_CHARS[x];o?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):i.append(w)}else switch(x){case 27:i.append("");break;case 30:o=!0;break;default:throw new U}u=0;break;case 3:if(x<this.TEXT_SHIFT3_SET_CHARS.length){const w=this.TEXT_SHIFT3_SET_CHARS[x];o?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):i.append(w),u=0}else throw new U;break;default:throw new U}}}while(n.available()>0)}static decodeAnsiX12Segment(n,i){const o=[];do{if(n.available()===8)return;const c=n.readBits(8);if(c===254)return;this.parseTwoBytes(c,n.readBits(8),o);for(let u=0;u<3;u++){const d=o[u];switch(d){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(d<14)i.append(String.fromCharCode(d+44));else if(d<40)i.append(String.fromCharCode(d+51));else throw new U;break}}}while(n.available()>0)}static parseTwoBytes(n,i,o){let c=(n<<8)+i-1,u=Math.floor(c/1600);o[0]=u,c-=u*1600,u=Math.floor(c/40),o[1]=u,o[2]=c-u*40}static decodeEdifactSegment(n,i){do{if(n.available()<=16)return;for(let o=0;o<4;o++){let c=n.readBits(6);if(c===31){const u=8-n.getBitOffset();u!==8&&n.readBits(u);return}c&32||(c|=64),i.append(String.fromCharCode(c))}}while(n.available()>0)}static decodeBase256Segment(n,i,o){let c=1+n.getByteOffset();const u=this.unrandomize255State(n.readBits(8),c++);let d;if(u===0?d=n.available()/8|0:u<250?d=u:d=250*(u-249)+this.unrandomize255State(n.readBits(8),c++),d<0)throw new U;const f=new Uint8Array(d);for(let x=0;x<d;x++){if(n.available()<8)throw new U;f[x]=this.unrandomize255State(n.readBits(8),c++)}o.push(f);try{i.append(J.decode(f,X.ISO88591))}catch(x){throw new Be("Platform does not support required encoding: "+x.message)}}static unrandomize255State(n,i){const o=149*i%255+1,c=n-o;return c>=0?c:c+256}}Un.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Un.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Un.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Un.TEXT_SHIFT2_SET_CHARS=Un.C40_SHIFT2_SET_CHARS,Un.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Hp{constructor(){this.rsDecoder=new De(Re.DATA_MATRIX_FIELD_256)}decode(n){const i=new cc(n),o=i.getVersion(),c=i.readCodewords(),u=uc.getDataBlocks(c,o);let d=0;for(let w of u)d+=w.getNumDataCodewords();const f=new Uint8Array(d),x=u.length;for(let w=0;w<x;w++){const b=u[w],S=b.getCodewords(),R=b.getNumDataCodewords();this.correctErrors(S,R);for(let M=0;M<R;M++)f[M*x+w]=S[M]}return Un.decode(f)}correctErrors(n,i){const o=new Int32Array(n);try{this.rsDecoder.decode(o,n.length-i)}catch{throw new T}for(let c=0;c<i;c++)n[c]=o[c]}}class Tt{constructor(n){this.image=n,this.rectangleDetector=new ot(this.image)}detect(){const n=this.rectangleDetector.detect();let i=this.detectSolid1(n);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new K;i=this.shiftToModuleCenter(i);const o=i[0],c=i[1],u=i[2],d=i[3];let f=this.transitionsBetween(o,d)+1,x=this.transitionsBetween(u,d)+1;(f&1)===1&&(f+=1),(x&1)===1&&(x+=1),4*f<7*x&&4*x<7*f&&(f=x=Math.max(f,x));let w=Tt.sampleGrid(this.image,o,c,u,d,f,x);return new lr(w,[o,c,u,d])}static shiftPoint(n,i,o){let c=(i.getX()-n.getX())/(o+1),u=(i.getY()-n.getY())/(o+1);return new pe(n.getX()+c,n.getY()+u)}static moveAway(n,i,o){let c=n.getX(),u=n.getY();return c<i?c-=1:c+=1,u<o?u-=1:u+=1,new pe(c,u)}detectSolid1(n){let i=n[0],o=n[1],c=n[3],u=n[2],d=this.transitionsBetween(i,o),f=this.transitionsBetween(o,c),x=this.transitionsBetween(c,u),w=this.transitionsBetween(u,i),b=d,S=[u,i,o,c];return b>f&&(b=f,S[0]=i,S[1]=o,S[2]=c,S[3]=u),b>x&&(b=x,S[0]=o,S[1]=c,S[2]=u,S[3]=i),b>w&&(S[0]=c,S[1]=u,S[2]=i,S[3]=o),S}detectSolid2(n){let i=n[0],o=n[1],c=n[2],u=n[3],d=this.transitionsBetween(i,u),f=Tt.shiftPoint(o,c,(d+1)*4),x=Tt.shiftPoint(c,o,(d+1)*4),w=this.transitionsBetween(f,i),b=this.transitionsBetween(x,u);return w<b?(n[0]=i,n[1]=o,n[2]=c,n[3]=u):(n[0]=o,n[1]=c,n[2]=u,n[3]=i),n}correctTopRight(n){let i=n[0],o=n[1],c=n[2],u=n[3],d=this.transitionsBetween(i,u),f=this.transitionsBetween(o,u),x=Tt.shiftPoint(i,o,(f+1)*4),w=Tt.shiftPoint(c,o,(d+1)*4);d=this.transitionsBetween(x,u),f=this.transitionsBetween(w,u);let b=new pe(u.getX()+(c.getX()-o.getX())/(d+1),u.getY()+(c.getY()-o.getY())/(d+1)),S=new pe(u.getX()+(i.getX()-o.getX())/(f+1),u.getY()+(i.getY()-o.getY())/(f+1));if(!this.isValid(b))return this.isValid(S)?S:null;if(!this.isValid(S))return b;let R=this.transitionsBetween(x,b)+this.transitionsBetween(w,b),M=this.transitionsBetween(x,S)+this.transitionsBetween(w,S);return R>M?b:S}shiftToModuleCenter(n){let i=n[0],o=n[1],c=n[2],u=n[3],d=this.transitionsBetween(i,u)+1,f=this.transitionsBetween(c,u)+1,x=Tt.shiftPoint(i,o,f*4),w=Tt.shiftPoint(c,o,d*4);d=this.transitionsBetween(x,u)+1,f=this.transitionsBetween(w,u)+1,(d&1)===1&&(d+=1),(f&1)===1&&(f+=1);let b=(i.getX()+o.getX()+c.getX()+u.getX())/4,S=(i.getY()+o.getY()+c.getY()+u.getY())/4;i=Tt.moveAway(i,b,S),o=Tt.moveAway(o,b,S),c=Tt.moveAway(c,b,S),u=Tt.moveAway(u,b,S);let R,M;return x=Tt.shiftPoint(i,o,f*4),x=Tt.shiftPoint(x,u,d*4),R=Tt.shiftPoint(o,i,f*4),R=Tt.shiftPoint(R,c,d*4),w=Tt.shiftPoint(c,u,f*4),w=Tt.shiftPoint(w,o,d*4),M=Tt.shiftPoint(u,c,f*4),M=Tt.shiftPoint(M,i,d*4),[x,R,w,M]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,i,o,c,u,d,f){return Vt.getInstance().sampleGrid(n,d,f,.5,.5,d-.5,.5,d-.5,f-.5,.5,f-.5,i.getX(),i.getY(),u.getX(),u.getY(),c.getX(),c.getY(),o.getX(),o.getY())}transitionsBetween(n,i){let o=Math.trunc(n.getX()),c=Math.trunc(n.getY()),u=Math.trunc(i.getX()),d=Math.trunc(i.getY()),f=Math.abs(d-c)>Math.abs(u-o);if(f){let V=o;o=c,c=V,V=u,u=d,d=V}let x=Math.abs(u-o),w=Math.abs(d-c),b=-x/2,S=c<d?1:-1,R=o<u?1:-1,M=0,z=this.image.get(f?c:o,f?o:c);for(let V=o,$=c;V!==u;V+=R){let Z=this.image.get(f?$:V,f?V:$);if(Z!==z&&(M++,z=Z),b+=w,b>0){if($===d)break;$+=S,b-=x}}return M}}class zn{constructor(){this.decoder=new Hp}decode(n,i=null){let o,c;if(i!=null&&i.has(G.PURE_BARCODE)){const w=zn.extractPureBits(n.getBlackMatrix());o=this.decoder.decode(w),c=zn.NO_POINTS}else{const w=new Tt(n.getBlackMatrix()).detect();o=this.decoder.decode(w.getBits()),c=w.getPoints()}const u=o.getRawBytes(),d=new Pe(o.getText(),u,8*u.length,c,de.DATA_MATRIX,j.currentTimeMillis()),f=o.getByteSegments();f!=null&&d.putMetadata(Se.BYTE_SEGMENTS,f);const x=o.getECLevel();return x!=null&&d.putMetadata(Se.ERROR_CORRECTION_LEVEL,x),d}reset(){}static extractPureBits(n){const i=n.getTopLeftOnBit(),o=n.getBottomRightOnBit();if(i==null||o==null)throw new K;const c=this.moduleSize(i,n);let u=i[1];const d=o[1];let f=i[0];const w=(o[0]-f+1)/c,b=(d-u+1)/c;if(w<=0||b<=0)throw new K;const S=c/2;u+=S,f+=S;const R=new xe(w,b);for(let M=0;M<b;M++){const z=u+M*c;for(let V=0;V<w;V++)n.get(f+V*c,z)&&R.set(V,M)}return R}static moduleSize(n,i){const o=i.getWidth();let c=n[0];const u=n[1];for(;c<o&&i.get(c,u);)c++;if(c===o)throw new K;const d=c-n[0];if(d===0)throw new K;return d}}zn.NO_POINTS=[];class Gp extends me{constructor(n=500){super(new zn,n)}}var Qi;(function(C){C[C.L=0]="L",C[C.M=1]="M",C[C.Q=2]="Q",C[C.H=3]="H"})(Qi||(Qi={}));class lt{constructor(n,i,o){this.value=n,this.stringValue=i,this.bits=o,lt.FOR_BITS.set(o,this),lt.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return lt.L;case"M":return lt.M;case"Q":return lt.Q;case"H":return lt.H;default:throw new v(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof lt))return!1;const i=n;return this.value===i.value}static forBits(n){if(n<0||n>=lt.FOR_BITS.size)throw new E;return lt.FOR_BITS.get(n)}}lt.FOR_BITS=new Map,lt.FOR_VALUE=new Map,lt.L=new lt(Qi.L,"L",1),lt.M=new lt(Qi.M,"M",0),lt.Q=new lt(Qi.Q,"Q",3),lt.H=new lt(Qi.H,"H",2);class nr{constructor(n){this.errorCorrectionLevel=lt.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,i){return I.bitCount(n^i)}static decodeFormatInformation(n,i){const o=nr.doDecodeFormatInformation(n,i);return o!==null?o:nr.doDecodeFormatInformation(n^nr.FORMAT_INFO_MASK_QR,i^nr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,i){let o=Number.MAX_SAFE_INTEGER,c=0;for(const u of nr.FORMAT_INFO_DECODE_LOOKUP){const d=u[0];if(d===n||d===i)return new nr(u[1]);let f=nr.numBitsDiffering(n,d);f<o&&(c=u[1],o=f),n!==i&&(f=nr.numBitsDiffering(i,d),f<o&&(c=u[1],o=f))}return o<=3?new nr(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof nr))return!1;const i=n;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}nr.FORMAT_INFO_MASK_QR=21522,nr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class q{constructor(n,...i){this.ecCodewordsPerBlock=n,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const i=this.ecBlocks;for(const o of i)n+=o.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class D{constructor(n,i){this.count=n,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ce{constructor(n,i,...o){this.versionNumber=n,this.alignmentPatternCenters=i,this.ecBlocks=o;let c=0;const u=o[0].getECCodewordsPerBlock(),d=o[0].getECBlocks();for(const f of d)c+=f.getCount()*(f.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new U;try{return this.getVersionForNumber((n-17)/4)}catch{throw new U}}static getVersionForNumber(n){if(n<1||n>40)throw new E;return Ce.VERSIONS[n-1]}static decodeVersionInformation(n){let i=Number.MAX_SAFE_INTEGER,o=0;for(let c=0;c<Ce.VERSION_DECODE_INFO.length;c++){const u=Ce.VERSION_DECODE_INFO[c];if(u===n)return Ce.getVersionForNumber(c+7);const d=nr.numBitsDiffering(n,u);d<i&&(o=c+7,i=d)}return i<=3?Ce.getVersionForNumber(o):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),i=new xe(n);i.setRegion(0,0,9,9),i.setRegion(n-8,0,8,9),i.setRegion(0,n-8,9,8);const o=this.alignmentPatternCenters.length;for(let c=0;c<o;c++){const u=this.alignmentPatternCenters[c]-2;for(let d=0;d<o;d++)c===0&&(d===0||d===o-1)||c===o-1&&d===0||i.setRegion(this.alignmentPatternCenters[d]-2,u,5,5)}return i.setRegion(6,9,1,n-17),i.setRegion(9,6,n-17,1),this.versionNumber>6&&(i.setRegion(n-11,0,3,6),i.setRegion(0,n-11,6,3)),i}toString(){return""+this.versionNumber}}Ce.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ce.VERSIONS=[new Ce(1,new Int32Array(0),new q(7,new D(1,19)),new q(10,new D(1,16)),new q(13,new D(1,13)),new q(17,new D(1,9))),new Ce(2,Int32Array.from([6,18]),new q(10,new D(1,34)),new q(16,new D(1,28)),new q(22,new D(1,22)),new q(28,new D(1,16))),new Ce(3,Int32Array.from([6,22]),new q(15,new D(1,55)),new q(26,new D(1,44)),new q(18,new D(2,17)),new q(22,new D(2,13))),new Ce(4,Int32Array.from([6,26]),new q(20,new D(1,80)),new q(18,new D(2,32)),new q(26,new D(2,24)),new q(16,new D(4,9))),new Ce(5,Int32Array.from([6,30]),new q(26,new D(1,108)),new q(24,new D(2,43)),new q(18,new D(2,15),new D(2,16)),new q(22,new D(2,11),new D(2,12))),new Ce(6,Int32Array.from([6,34]),new q(18,new D(2,68)),new q(16,new D(4,27)),new q(24,new D(4,19)),new q(28,new D(4,15))),new Ce(7,Int32Array.from([6,22,38]),new q(20,new D(2,78)),new q(18,new D(4,31)),new q(18,new D(2,14),new D(4,15)),new q(26,new D(4,13),new D(1,14))),new Ce(8,Int32Array.from([6,24,42]),new q(24,new D(2,97)),new q(22,new D(2,38),new D(2,39)),new q(22,new D(4,18),new D(2,19)),new q(26,new D(4,14),new D(2,15))),new Ce(9,Int32Array.from([6,26,46]),new q(30,new D(2,116)),new q(22,new D(3,36),new D(2,37)),new q(20,new D(4,16),new D(4,17)),new q(24,new D(4,12),new D(4,13))),new Ce(10,Int32Array.from([6,28,50]),new q(18,new D(2,68),new D(2,69)),new q(26,new D(4,43),new D(1,44)),new q(24,new D(6,19),new D(2,20)),new q(28,new D(6,15),new D(2,16))),new Ce(11,Int32Array.from([6,30,54]),new q(20,new D(4,81)),new q(30,new D(1,50),new D(4,51)),new q(28,new D(4,22),new D(4,23)),new q(24,new D(3,12),new D(8,13))),new Ce(12,Int32Array.from([6,32,58]),new q(24,new D(2,92),new D(2,93)),new q(22,new D(6,36),new D(2,37)),new q(26,new D(4,20),new D(6,21)),new q(28,new D(7,14),new D(4,15))),new Ce(13,Int32Array.from([6,34,62]),new q(26,new D(4,107)),new q(22,new D(8,37),new D(1,38)),new q(24,new D(8,20),new D(4,21)),new q(22,new D(12,11),new D(4,12))),new Ce(14,Int32Array.from([6,26,46,66]),new q(30,new D(3,115),new D(1,116)),new q(24,new D(4,40),new D(5,41)),new q(20,new D(11,16),new D(5,17)),new q(24,new D(11,12),new D(5,13))),new Ce(15,Int32Array.from([6,26,48,70]),new q(22,new D(5,87),new D(1,88)),new q(24,new D(5,41),new D(5,42)),new q(30,new D(5,24),new D(7,25)),new q(24,new D(11,12),new D(7,13))),new Ce(16,Int32Array.from([6,26,50,74]),new q(24,new D(5,98),new D(1,99)),new q(28,new D(7,45),new D(3,46)),new q(24,new D(15,19),new D(2,20)),new q(30,new D(3,15),new D(13,16))),new Ce(17,Int32Array.from([6,30,54,78]),new q(28,new D(1,107),new D(5,108)),new q(28,new D(10,46),new D(1,47)),new q(28,new D(1,22),new D(15,23)),new q(28,new D(2,14),new D(17,15))),new Ce(18,Int32Array.from([6,30,56,82]),new q(30,new D(5,120),new D(1,121)),new q(26,new D(9,43),new D(4,44)),new q(28,new D(17,22),new D(1,23)),new q(28,new D(2,14),new D(19,15))),new Ce(19,Int32Array.from([6,30,58,86]),new q(28,new D(3,113),new D(4,114)),new q(26,new D(3,44),new D(11,45)),new q(26,new D(17,21),new D(4,22)),new q(26,new D(9,13),new D(16,14))),new Ce(20,Int32Array.from([6,34,62,90]),new q(28,new D(3,107),new D(5,108)),new q(26,new D(3,41),new D(13,42)),new q(30,new D(15,24),new D(5,25)),new q(28,new D(15,15),new D(10,16))),new Ce(21,Int32Array.from([6,28,50,72,94]),new q(28,new D(4,116),new D(4,117)),new q(26,new D(17,42)),new q(28,new D(17,22),new D(6,23)),new q(30,new D(19,16),new D(6,17))),new Ce(22,Int32Array.from([6,26,50,74,98]),new q(28,new D(2,111),new D(7,112)),new q(28,new D(17,46)),new q(30,new D(7,24),new D(16,25)),new q(24,new D(34,13))),new Ce(23,Int32Array.from([6,30,54,78,102]),new q(30,new D(4,121),new D(5,122)),new q(28,new D(4,47),new D(14,48)),new q(30,new D(11,24),new D(14,25)),new q(30,new D(16,15),new D(14,16))),new Ce(24,Int32Array.from([6,28,54,80,106]),new q(30,new D(6,117),new D(4,118)),new q(28,new D(6,45),new D(14,46)),new q(30,new D(11,24),new D(16,25)),new q(30,new D(30,16),new D(2,17))),new Ce(25,Int32Array.from([6,32,58,84,110]),new q(26,new D(8,106),new D(4,107)),new q(28,new D(8,47),new D(13,48)),new q(30,new D(7,24),new D(22,25)),new q(30,new D(22,15),new D(13,16))),new Ce(26,Int32Array.from([6,30,58,86,114]),new q(28,new D(10,114),new D(2,115)),new q(28,new D(19,46),new D(4,47)),new q(28,new D(28,22),new D(6,23)),new q(30,new D(33,16),new D(4,17))),new Ce(27,Int32Array.from([6,34,62,90,118]),new q(30,new D(8,122),new D(4,123)),new q(28,new D(22,45),new D(3,46)),new q(30,new D(8,23),new D(26,24)),new q(30,new D(12,15),new D(28,16))),new Ce(28,Int32Array.from([6,26,50,74,98,122]),new q(30,new D(3,117),new D(10,118)),new q(28,new D(3,45),new D(23,46)),new q(30,new D(4,24),new D(31,25)),new q(30,new D(11,15),new D(31,16))),new Ce(29,Int32Array.from([6,30,54,78,102,126]),new q(30,new D(7,116),new D(7,117)),new q(28,new D(21,45),new D(7,46)),new q(30,new D(1,23),new D(37,24)),new q(30,new D(19,15),new D(26,16))),new Ce(30,Int32Array.from([6,26,52,78,104,130]),new q(30,new D(5,115),new D(10,116)),new q(28,new D(19,47),new D(10,48)),new q(30,new D(15,24),new D(25,25)),new q(30,new D(23,15),new D(25,16))),new Ce(31,Int32Array.from([6,30,56,82,108,134]),new q(30,new D(13,115),new D(3,116)),new q(28,new D(2,46),new D(29,47)),new q(30,new D(42,24),new D(1,25)),new q(30,new D(23,15),new D(28,16))),new Ce(32,Int32Array.from([6,34,60,86,112,138]),new q(30,new D(17,115)),new q(28,new D(10,46),new D(23,47)),new q(30,new D(10,24),new D(35,25)),new q(30,new D(19,15),new D(35,16))),new Ce(33,Int32Array.from([6,30,58,86,114,142]),new q(30,new D(17,115),new D(1,116)),new q(28,new D(14,46),new D(21,47)),new q(30,new D(29,24),new D(19,25)),new q(30,new D(11,15),new D(46,16))),new Ce(34,Int32Array.from([6,34,62,90,118,146]),new q(30,new D(13,115),new D(6,116)),new q(28,new D(14,46),new D(23,47)),new q(30,new D(44,24),new D(7,25)),new q(30,new D(59,16),new D(1,17))),new Ce(35,Int32Array.from([6,30,54,78,102,126,150]),new q(30,new D(12,121),new D(7,122)),new q(28,new D(12,47),new D(26,48)),new q(30,new D(39,24),new D(14,25)),new q(30,new D(22,15),new D(41,16))),new Ce(36,Int32Array.from([6,24,50,76,102,128,154]),new q(30,new D(6,121),new D(14,122)),new q(28,new D(6,47),new D(34,48)),new q(30,new D(46,24),new D(10,25)),new q(30,new D(2,15),new D(64,16))),new Ce(37,Int32Array.from([6,28,54,80,106,132,158]),new q(30,new D(17,122),new D(4,123)),new q(28,new D(29,46),new D(14,47)),new q(30,new D(49,24),new D(10,25)),new q(30,new D(24,15),new D(46,16))),new Ce(38,Int32Array.from([6,32,58,84,110,136,162]),new q(30,new D(4,122),new D(18,123)),new q(28,new D(13,46),new D(32,47)),new q(30,new D(48,24),new D(14,25)),new q(30,new D(42,15),new D(32,16))),new Ce(39,Int32Array.from([6,26,54,82,110,138,166]),new q(30,new D(20,117),new D(4,118)),new q(28,new D(40,47),new D(7,48)),new q(30,new D(43,24),new D(22,25)),new q(30,new D(10,15),new D(67,16))),new Ce(40,Int32Array.from([6,30,58,86,114,142,170]),new q(30,new D(19,118),new D(6,119)),new q(28,new D(18,47),new D(31,48)),new q(30,new D(34,24),new D(34,25)),new q(30,new D(20,15),new D(61,16)))];var Wt;(function(C){C[C.DATA_MASK_000=0]="DATA_MASK_000",C[C.DATA_MASK_001=1]="DATA_MASK_001",C[C.DATA_MASK_010=2]="DATA_MASK_010",C[C.DATA_MASK_011=3]="DATA_MASK_011",C[C.DATA_MASK_100=4]="DATA_MASK_100",C[C.DATA_MASK_101=5]="DATA_MASK_101",C[C.DATA_MASK_110=6]="DATA_MASK_110",C[C.DATA_MASK_111=7]="DATA_MASK_111"})(Wt||(Wt={}));class Br{constructor(n,i){this.value=n,this.isMasked=i}unmaskBitMatrix(n,i){for(let o=0;o<i;o++)for(let c=0;c<i;c++)this.isMasked(o,c)&&n.flip(c,o)}}Br.values=new Map([[Wt.DATA_MASK_000,new Br(Wt.DATA_MASK_000,(C,n)=>(C+n&1)===0)],[Wt.DATA_MASK_001,new Br(Wt.DATA_MASK_001,(C,n)=>(C&1)===0)],[Wt.DATA_MASK_010,new Br(Wt.DATA_MASK_010,(C,n)=>n%3===0)],[Wt.DATA_MASK_011,new Br(Wt.DATA_MASK_011,(C,n)=>(C+n)%3===0)],[Wt.DATA_MASK_100,new Br(Wt.DATA_MASK_100,(C,n)=>(Math.floor(C/2)+Math.floor(n/3)&1)===0)],[Wt.DATA_MASK_101,new Br(Wt.DATA_MASK_101,(C,n)=>C*n%6===0)],[Wt.DATA_MASK_110,new Br(Wt.DATA_MASK_110,(C,n)=>C*n%6<3)],[Wt.DATA_MASK_111,new Br(Wt.DATA_MASK_111,(C,n)=>(C+n+C*n%3&1)===0)]]);class $p{constructor(n){const i=n.getHeight();if(i<21||(i&3)!==1)throw new U;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let u=0;u<6;u++)n=this.copyBit(u,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let u=5;u>=0;u--)n=this.copyBit(8,u,n);const i=this.bitMatrix.getHeight();let o=0;const c=i-7;for(let u=i-1;u>=c;u--)o=this.copyBit(8,u,o);for(let u=i-8;u<i;u++)o=this.copyBit(u,8,o);if(this.parsedFormatInfo=nr.decodeFormatInformation(n,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new U}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),i=Math.floor((n-17)/4);if(i<=6)return Ce.getVersionForNumber(i);let o=0;const c=n-11;for(let d=5;d>=0;d--)for(let f=n-9;f>=c;f--)o=this.copyBit(f,d,o);let u=Ce.decodeVersionInformation(o);if(u!==null&&u.getDimensionForVersion()===n)return this.parsedVersion=u,u;o=0;for(let d=5;d>=0;d--)for(let f=n-9;f>=c;f--)o=this.copyBit(d,f,o);if(u=Ce.decodeVersionInformation(o),u!==null&&u.getDimensionForVersion()===n)return this.parsedVersion=u,u;throw new U}copyBit(n,i,o){return(this.isMirror?this.bitMatrix.get(i,n):this.bitMatrix.get(n,i))?o<<1|1:o<<1}readCodewords(){const n=this.readFormatInformation(),i=this.readVersion(),o=Br.values.get(n.getDataMask()),c=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,c);const u=i.buildFunctionPattern();let d=!0;const f=new Uint8Array(i.getTotalCodewords());let x=0,w=0,b=0;for(let S=c-1;S>0;S-=2){S===6&&S--;for(let R=0;R<c;R++){const M=d?c-1-R:R;for(let z=0;z<2;z++)u.get(S-z,M)||(b++,w<<=1,this.bitMatrix.get(S-z,M)&&(w|=1),b===8&&(f[x++]=w,b=0,w=0))}d=!d}if(x!==i.getTotalCodewords())throw new U;return f}remask(){if(this.parsedFormatInfo===null)return;const n=Br.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let i=0,o=n.getWidth();i<o;i++)for(let c=i+1,u=n.getHeight();c<u;c++)n.get(i,c)!==n.get(c,i)&&(n.flip(c,i),n.flip(i,c))}}class hc{constructor(n,i){this.numDataCodewords=n,this.codewords=i}static getDataBlocks(n,i,o){if(n.length!==i.getTotalCodewords())throw new E;const c=i.getECBlocksForLevel(o);let u=0;const d=c.getECBlocks();for(const z of d)u+=z.getCount();const f=new Array(u);let x=0;for(const z of d)for(let V=0;V<z.getCount();V++){const $=z.getDataCodewords(),Z=c.getECCodewordsPerBlock()+$;f[x++]=new hc($,new Uint8Array(Z))}const w=f[0].codewords.length;let b=f.length-1;for(;b>=0&&f[b].codewords.length!==w;)b--;b++;const S=w-c.getECCodewordsPerBlock();let R=0;for(let z=0;z<S;z++)for(let V=0;V<x;V++)f[V].codewords[z]=n[R++];for(let z=b;z<x;z++)f[z].codewords[S]=n[R++];const M=f[0].codewords.length;for(let z=S;z<M;z++)for(let V=0;V<x;V++){const $=V<b?z:z+1;f[V].codewords[$]=n[R++]}return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Fr;(function(C){C[C.TERMINATOR=0]="TERMINATOR",C[C.NUMERIC=1]="NUMERIC",C[C.ALPHANUMERIC=2]="ALPHANUMERIC",C[C.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",C[C.BYTE=4]="BYTE",C[C.ECI=5]="ECI",C[C.KANJI=6]="KANJI",C[C.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",C[C.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",C[C.HANZI=9]="HANZI"})(Fr||(Fr={}));class Ie{constructor(n,i,o,c){this.value=n,this.stringValue=i,this.characterCountBitsForVersions=o,this.bits=c,Ie.FOR_BITS.set(c,this),Ie.FOR_VALUE.set(n,this)}static forBits(n){const i=Ie.FOR_BITS.get(n);if(i===void 0)throw new E;return i}getCharacterCountBits(n){const i=n.getVersionNumber();let o;return i<=9?o=0:i<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof Ie))return!1;const i=n;return this.value===i.value}toString(){return this.stringValue}}Ie.FOR_BITS=new Map,Ie.FOR_VALUE=new Map,Ie.TERMINATOR=new Ie(Fr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ie.NUMERIC=new Ie(Fr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ie.ALPHANUMERIC=new Ie(Fr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ie.STRUCTURED_APPEND=new Ie(Fr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ie.BYTE=new Ie(Fr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ie.ECI=new Ie(Fr.ECI,"ECI",Int32Array.from([0,0,0]),7),Ie.KANJI=new Ie(Fr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ie.FNC1_FIRST_POSITION=new Ie(Fr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ie.FNC1_SECOND_POSITION=new Ie(Fr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ie.HANZI=new Ie(Fr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class wt{static decode(n,i,o,c){const u=new dc(n);let d=new se;const f=new Array;let x=-1,w=-1;try{let b=null,S=!1,R;do{if(u.available()<4)R=Ie.TERMINATOR;else{const M=u.readBits(4);R=Ie.forBits(M)}switch(R){case Ie.TERMINATOR:break;case Ie.FNC1_FIRST_POSITION:case Ie.FNC1_SECOND_POSITION:S=!0;break;case Ie.STRUCTURED_APPEND:if(u.available()<16)throw new U;x=u.readBits(8),w=u.readBits(8);break;case Ie.ECI:const M=wt.parseECIValue(u);if(b=A.getCharacterSetECIByValue(M),b===null)throw new U;break;case Ie.HANZI:const z=u.readBits(4),V=u.readBits(R.getCharacterCountBits(i));z===wt.GB2312_SUBSET&&wt.decodeHanziSegment(u,d,V);break;default:const $=u.readBits(R.getCharacterCountBits(i));switch(R){case Ie.NUMERIC:wt.decodeNumericSegment(u,d,$);break;case Ie.ALPHANUMERIC:wt.decodeAlphanumericSegment(u,d,$,S);break;case Ie.BYTE:wt.decodeByteSegment(u,d,$,b,f,c);break;case Ie.KANJI:wt.decodeKanjiSegment(u,d,$);break;default:throw new U}break}}while(R!==Ie.TERMINATOR)}catch{throw new U}return new Ue(n,d.toString(),f.length===0?null:f,o===null?null:o.toString(),x,w)}static decodeHanziSegment(n,i,o){if(o*13>n.available())throw new U;const c=new Uint8Array(2*o);let u=0;for(;o>0;){const d=n.readBits(13);let f=d/96<<8&4294967295|d%96;f<959?f+=41377:f+=42657,c[u]=f>>8&255,c[u+1]=f&255,u+=2,o--}try{i.append(J.decode(c,X.GB2312))}catch(d){throw new U(d)}}static decodeKanjiSegment(n,i,o){if(o*13>n.available())throw new U;const c=new Uint8Array(2*o);let u=0;for(;o>0;){const d=n.readBits(13);let f=d/192<<8&4294967295|d%192;f<7936?f+=33088:f+=49472,c[u]=f>>8,c[u+1]=f,u+=2,o--}try{i.append(J.decode(c,X.SHIFT_JIS))}catch(d){throw new U(d)}}static decodeByteSegment(n,i,o,c,u,d){if(8*o>n.available())throw new U;const f=new Uint8Array(o);for(let w=0;w<o;w++)f[w]=n.readBits(8);let x;c===null?x=X.guessEncoding(f,d):x=c.getName();try{i.append(J.decode(f,x))}catch(w){throw new U(w)}u.push(f)}static toAlphaNumericChar(n){if(n>=wt.ALPHANUMERIC_CHARS.length)throw new U;return wt.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,i,o,c){const u=i.length();for(;o>1;){if(n.available()<11)throw new U;const d=n.readBits(11);i.append(wt.toAlphaNumericChar(Math.floor(d/45))),i.append(wt.toAlphaNumericChar(d%45)),o-=2}if(o===1){if(n.available()<6)throw new U;i.append(wt.toAlphaNumericChar(n.readBits(6)))}if(c)for(let d=u;d<i.length();d++)i.charAt(d)==="%"&&(d<i.length()-1&&i.charAt(d+1)==="%"?i.deleteCharAt(d+1):i.setCharAt(d,""))}static decodeNumericSegment(n,i,o){for(;o>=3;){if(n.available()<10)throw new U;const c=n.readBits(10);if(c>=1e3)throw new U;i.append(wt.toAlphaNumericChar(Math.floor(c/100))),i.append(wt.toAlphaNumericChar(Math.floor(c/10)%10)),i.append(wt.toAlphaNumericChar(c%10)),o-=3}if(o===2){if(n.available()<7)throw new U;const c=n.readBits(7);if(c>=100)throw new U;i.append(wt.toAlphaNumericChar(Math.floor(c/10))),i.append(wt.toAlphaNumericChar(c%10))}else if(o===1){if(n.available()<4)throw new U;const c=n.readBits(4);if(c>=10)throw new U;i.append(wt.toAlphaNumericChar(c))}}static parseECIValue(n){const i=n.readBits(8);if(!(i&128))return i&127;if((i&192)===128){const o=n.readBits(8);return(i&63)<<8&4294967295|o}if((i&224)===192){const o=n.readBits(16);return(i&31)<<16&4294967295|o}throw new U}}wt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",wt.GB2312_SUBSET=1;class Dh{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const i=n[0];n[0]=n[2],n[2]=i}}class Xp{constructor(){this.rsDecoder=new De(Re.QR_CODE_FIELD_256)}decodeBooleanArray(n,i){return this.decodeBitMatrix(xe.parseFromBooleanArray(n),i)}decodeBitMatrix(n,i){const o=new $p(n);let c=null;try{return this.decodeBitMatrixParser(o,i)}catch(u){c=u}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const u=this.decodeBitMatrixParser(o,i);return u.setOther(new Dh(!0)),u}catch(u){throw c!==null?c:u}}decodeBitMatrixParser(n,i){const o=n.readVersion(),c=n.readFormatInformation().getErrorCorrectionLevel(),u=n.readCodewords(),d=hc.getDataBlocks(u,o,c);let f=0;for(const b of d)f+=b.getNumDataCodewords();const x=new Uint8Array(f);let w=0;for(const b of d){const S=b.getCodewords(),R=b.getNumDataCodewords();this.correctErrors(S,R);for(let M=0;M<R;M++)x[w++]=S[M]}return wt.decode(x,o,c,i)}correctErrors(n,i){const o=new Int32Array(n);try{this.rsDecoder.decode(o,n.length-i)}catch{throw new T}for(let c=0;c<i;c++)n[c]=o[c]}}class fc extends pe{constructor(n,i,o){super(n,i),this.estimatedModuleSize=o}aboutEquals(n,i,o){if(Math.abs(i-this.getY())<=n&&Math.abs(o-this.getX())<=n){const c=Math.abs(n-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(n,i,o){const c=(this.getX()+i)/2,u=(this.getY()+n)/2,d=(this.estimatedModuleSize+o)/2;return new fc(c,u,d)}}class ca{constructor(n,i,o,c,u,d,f){this.image=n,this.startX=i,this.startY=o,this.width=c,this.height=u,this.moduleSize=d,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,i=this.height,o=this.width,c=n+o,u=this.startY+i/2,d=new Int32Array(3),f=this.image;for(let x=0;x<i;x++){const w=u+(x&1?-Math.floor((x+1)/2):Math.floor((x+1)/2));d[0]=0,d[1]=0,d[2]=0;let b=n;for(;b<c&&!f.get(b,w);)b++;let S=0;for(;b<c;){if(f.get(b,w))if(S===1)d[1]++;else if(S===2){if(this.foundPatternCross(d)){const R=this.handlePossibleCenter(d,w,b);if(R!==null)return R}d[0]=d[2],d[1]=1,d[2]=0,S=1}else d[++S]++;else S===1&&S++,d[S]++;b++}if(this.foundPatternCross(d)){const R=this.handlePossibleCenter(d,w,c);if(R!==null)return R}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new K}static centerFromEnd(n,i){return i-n[2]-n[1]/2}foundPatternCross(n){const i=this.moduleSize,o=i/2;for(let c=0;c<3;c++)if(Math.abs(i-n[c])>=o)return!1;return!0}crossCheckVertical(n,i,o,c){const u=this.image,d=u.getHeight(),f=this.crossCheckStateCount;f[0]=0,f[1]=0,f[2]=0;let x=n;for(;x>=0&&u.get(i,x)&&f[1]<=o;)f[1]++,x--;if(x<0||f[1]>o)return NaN;for(;x>=0&&!u.get(i,x)&&f[0]<=o;)f[0]++,x--;if(f[0]>o)return NaN;for(x=n+1;x<d&&u.get(i,x)&&f[1]<=o;)f[1]++,x++;if(x===d||f[1]>o)return NaN;for(;x<d&&!u.get(i,x)&&f[2]<=o;)f[2]++,x++;if(f[2]>o)return NaN;const w=f[0]+f[1]+f[2];return 5*Math.abs(w-c)>=2*c?NaN:this.foundPatternCross(f)?ca.centerFromEnd(f,x):NaN}handlePossibleCenter(n,i,o){const c=n[0]+n[1]+n[2],u=ca.centerFromEnd(n,o),d=this.crossCheckVertical(i,u,2*n[1],c);if(!isNaN(d)){const f=(n[0]+n[1]+n[2])/3;for(const w of this.possibleCenters)if(w.aboutEquals(f,d,u))return w.combineEstimate(d,u,f);const x=new fc(u,d,f);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null}}class gc extends pe{constructor(n,i,o,c){super(n,i),this.estimatedModuleSize=o,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,i,o){if(Math.abs(i-this.getY())<=n&&Math.abs(o-this.getX())<=n){const c=Math.abs(n-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(n,i,o){const c=this.count+1,u=(this.count*this.getX()+i)/c,d=(this.count*this.getY()+n)/c,f=(this.count*this.estimatedModuleSize+o)/c;return new gc(u,d,f,c)}}class qp{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ht{constructor(n,i){this.image=n,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const i=n!=null&&n.get(G.TRY_HARDER)!==void 0,o=n!=null&&n.get(G.PURE_BARCODE)!==void 0,c=this.image,u=c.getHeight(),d=c.getWidth();let f=Math.floor(3*u/(4*Ht.MAX_MODULES));(f<Ht.MIN_SKIP||i)&&(f=Ht.MIN_SKIP);let x=!1;const w=new Int32Array(5);for(let S=f-1;S<u&&!x;S+=f){w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0;let R=0;for(let M=0;M<d;M++)if(c.get(M,S))(R&1)===1&&R++,w[R]++;else if(R&1)w[R]++;else if(R===4)if(Ht.foundPatternCross(w)){if(this.handlePossibleCenter(w,S,M,o)===!0)if(f=2,this.hasSkipped===!0)x=this.haveMultiplyConfirmedCenters();else{const V=this.findRowSkip();V>w[2]&&(S+=V-w[2]-f,M=d-1)}else{w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,R=3;continue}R=0,w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0}else w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,R=3;else w[++R]++;Ht.foundPatternCross(w)&&this.handlePossibleCenter(w,S,d,o)===!0&&(f=w[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const b=this.selectBestPatterns();return pe.orderBestPatterns(b),new qp(b)}static centerFromEnd(n,i){return i-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let i=0;for(let u=0;u<5;u++){const d=n[u];if(d===0)return!1;i+=d}if(i<7)return!1;const o=i/7,c=o/2;return Math.abs(o-n[0])<c&&Math.abs(o-n[1])<c&&Math.abs(3*o-n[2])<3*c&&Math.abs(o-n[3])<c&&Math.abs(o-n[4])<c}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,i,o,c){const u=this.getCrossCheckStateCount();let d=0;const f=this.image;for(;n>=d&&i>=d&&f.get(i-d,n-d);)u[2]++,d++;if(n<d||i<d)return!1;for(;n>=d&&i>=d&&!f.get(i-d,n-d)&&u[1]<=o;)u[1]++,d++;if(n<d||i<d||u[1]>o)return!1;for(;n>=d&&i>=d&&f.get(i-d,n-d)&&u[0]<=o;)u[0]++,d++;if(u[0]>o)return!1;const x=f.getHeight(),w=f.getWidth();for(d=1;n+d<x&&i+d<w&&f.get(i+d,n+d);)u[2]++,d++;if(n+d>=x||i+d>=w)return!1;for(;n+d<x&&i+d<w&&!f.get(i+d,n+d)&&u[3]<o;)u[3]++,d++;if(n+d>=x||i+d>=w||u[3]>=o)return!1;for(;n+d<x&&i+d<w&&f.get(i+d,n+d)&&u[4]<o;)u[4]++,d++;if(u[4]>=o)return!1;const b=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(b-c)<2*c&&Ht.foundPatternCross(u)}crossCheckVertical(n,i,o,c){const u=this.image,d=u.getHeight(),f=this.getCrossCheckStateCount();let x=n;for(;x>=0&&u.get(i,x);)f[2]++,x--;if(x<0)return NaN;for(;x>=0&&!u.get(i,x)&&f[1]<=o;)f[1]++,x--;if(x<0||f[1]>o)return NaN;for(;x>=0&&u.get(i,x)&&f[0]<=o;)f[0]++,x--;if(f[0]>o)return NaN;for(x=n+1;x<d&&u.get(i,x);)f[2]++,x++;if(x===d)return NaN;for(;x<d&&!u.get(i,x)&&f[3]<o;)f[3]++,x++;if(x===d||f[3]>=o)return NaN;for(;x<d&&u.get(i,x)&&f[4]<o;)f[4]++,x++;if(f[4]>=o)return NaN;const w=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(w-c)>=2*c?NaN:Ht.foundPatternCross(f)?Ht.centerFromEnd(f,x):NaN}crossCheckHorizontal(n,i,o,c){const u=this.image,d=u.getWidth(),f=this.getCrossCheckStateCount();let x=n;for(;x>=0&&u.get(x,i);)f[2]++,x--;if(x<0)return NaN;for(;x>=0&&!u.get(x,i)&&f[1]<=o;)f[1]++,x--;if(x<0||f[1]>o)return NaN;for(;x>=0&&u.get(x,i)&&f[0]<=o;)f[0]++,x--;if(f[0]>o)return NaN;for(x=n+1;x<d&&u.get(x,i);)f[2]++,x++;if(x===d)return NaN;for(;x<d&&!u.get(x,i)&&f[3]<o;)f[3]++,x++;if(x===d||f[3]>=o)return NaN;for(;x<d&&u.get(x,i)&&f[4]<o;)f[4]++,x++;if(f[4]>=o)return NaN;const w=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(w-c)>=c?NaN:Ht.foundPatternCross(f)?Ht.centerFromEnd(f,x):NaN}handlePossibleCenter(n,i,o,c){const u=n[0]+n[1]+n[2]+n[3]+n[4];let d=Ht.centerFromEnd(n,o),f=this.crossCheckVertical(i,Math.floor(d),n[2],u);if(!isNaN(f)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(f),n[2],u),!isNaN(d)&&(!c||this.crossCheckDiagonal(Math.floor(f),Math.floor(d),n[2],u)))){const x=u/7;let w=!1;const b=this.possibleCenters;for(let S=0,R=b.length;S<R;S++){const M=b[S];if(M.aboutEquals(x,f,d)){b[S]=M.combineEstimate(f,d,x),w=!0;break}}if(!w){const S=new gc(d,f,x);b.push(S),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(S)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const o of this.possibleCenters)if(o.getCount()>=Ht.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,i=0;const o=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Ht.CENTER_QUORUM&&(n++,i+=d.getEstimatedModuleSize());if(n<3)return!1;const c=i/o;let u=0;for(const d of this.possibleCenters)u+=Math.abs(d.getEstimatedModuleSize()-c);return u<=.05*i}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new K;const i=this.possibleCenters;let o;if(n>3){let c=0,u=0;for(const x of this.possibleCenters){const w=x.getEstimatedModuleSize();c+=w,u+=w*w}o=c/n;let d=Math.sqrt(u/n-o*o);i.sort((x,w)=>{const b=Math.abs(w.getEstimatedModuleSize()-o),S=Math.abs(x.getEstimatedModuleSize()-o);return b<S?-1:b>S?1:0});const f=Math.max(.2*o,d);for(let x=0;x<i.length&&i.length>3;x++){const w=i[x];Math.abs(w.getEstimatedModuleSize()-o)>f&&(i.splice(x,1),x--)}}if(i.length>3){let c=0;for(const u of i)c+=u.getEstimatedModuleSize();o=c/i.length,i.sort((u,d)=>{if(d.getCount()===u.getCount()){const f=Math.abs(d.getEstimatedModuleSize()-o),x=Math.abs(u.getEstimatedModuleSize()-o);return f<x?1:f>x?-1:0}else return d.getCount()-u.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}Ht.CENTER_QUORUM=2,Ht.MIN_SKIP=3,Ht.MAX_MODULES=57;class Zs{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(G.NEED_RESULT_POINT_CALLBACK);const o=new Ht(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(o)}processFinderPatternInfo(n){const i=n.getTopLeft(),o=n.getTopRight(),c=n.getBottomLeft(),u=this.calculateModuleSize(i,o,c);if(u<1)throw new K("No pattern found in proccess finder.");const d=Zs.computeDimension(i,o,c,u),f=Ce.getProvisionalVersionForDimension(d),x=f.getDimensionForVersion()-7;let w=null;if(f.getAlignmentPatternCenters().length>0){const M=o.getX()-i.getX()+c.getX(),z=o.getY()-i.getY()+c.getY(),V=1-3/x,$=Math.floor(i.getX()+V*(M-i.getX())),Z=Math.floor(i.getY()+V*(z-i.getY()));for(let ae=4;ae<=16;ae<<=1)try{w=this.findAlignmentInRegion(u,$,Z,ae);break}catch(le){if(!(le instanceof K))throw le}}const b=Zs.createTransform(i,o,c,w,d),S=Zs.sampleGrid(this.image,b,d);let R;return w===null?R=[c,i,o]:R=[c,i,o,w],new lr(S,R)}static createTransform(n,i,o,c,u){const d=u-3.5;let f,x,w,b;return c!==null?(f=c.getX(),x=c.getY(),w=d-3,b=w):(f=i.getX()-n.getX()+o.getX(),x=i.getY()-n.getY()+o.getY(),w=d,b=d),Ye.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,w,b,3.5,d,n.getX(),n.getY(),i.getX(),i.getY(),f,x,o.getX(),o.getY())}static sampleGrid(n,i,o){return Vt.getInstance().sampleGridWithTransform(n,o,o,i)}static computeDimension(n,i,o,c){const u=be.round(pe.distance(n,i)/c),d=be.round(pe.distance(n,o)/c);let f=Math.floor((u+d)/2)+7;switch(f&3){case 0:f++;break;case 2:f--;break;case 3:throw new K("Dimensions could be not found.")}return f}calculateModuleSize(n,i,o){return(this.calculateModuleSizeOneWay(n,i)+this.calculateModuleSizeOneWay(n,o))/2}calculateModuleSizeOneWay(n,i){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(i.getX()),Math.floor(i.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(o)?c/7:isNaN(c)?o/7:(o+c)/14}sizeOfBlackWhiteBlackRunBothWays(n,i,o,c){let u=this.sizeOfBlackWhiteBlackRun(n,i,o,c),d=1,f=n-(o-n);f<0?(d=n/(n-f),f=0):f>=this.image.getWidth()&&(d=(this.image.getWidth()-1-n)/(f-n),f=this.image.getWidth()-1);let x=Math.floor(i-(c-i)*d);return d=1,x<0?(d=i/(i-x),x=0):x>=this.image.getHeight()&&(d=(this.image.getHeight()-1-i)/(x-i),x=this.image.getHeight()-1),f=Math.floor(n+(f-n)*d),u+=this.sizeOfBlackWhiteBlackRun(n,i,f,x),u-1}sizeOfBlackWhiteBlackRun(n,i,o,c){const u=Math.abs(c-i)>Math.abs(o-n);if(u){let M=n;n=i,i=M,M=o,o=c,c=M}const d=Math.abs(o-n),f=Math.abs(c-i);let x=-d/2;const w=n<o?1:-1,b=i<c?1:-1;let S=0;const R=o+w;for(let M=n,z=i;M!==R;M+=w){const V=u?z:M,$=u?M:z;if(S===1===this.image.get(V,$)){if(S===2)return be.distance(M,z,n,i);S++}if(x+=f,x>0){if(z===c)break;z+=b,x-=d}}return S===2?be.distance(o+w,c,n,i):NaN}findAlignmentInRegion(n,i,o,c){const u=Math.floor(c*n),d=Math.max(0,i-u),f=Math.min(this.image.getWidth()-1,i+u);if(f-d<n*3)throw new K("Alignment top exceeds estimated module size.");const x=Math.max(0,o-u),w=Math.min(this.image.getHeight()-1,o+u);if(w-x<n*3)throw new K("Alignment bottom exceeds estimated module size.");return new ca(this.image,d,x,f-d,w-x,n,this.resultPointCallback).find()}}class Vn{constructor(){this.decoder=new Xp}getDecoder(){return this.decoder}decode(n,i){let o,c;if(i!=null&&i.get(G.PURE_BARCODE)!==void 0){const x=Vn.extractPureBits(n.getBlackMatrix());o=this.decoder.decodeBitMatrix(x,i),c=Vn.NO_POINTS}else{const x=new Zs(n.getBlackMatrix()).detect(i);o=this.decoder.decodeBitMatrix(x.getBits(),i),c=x.getPoints()}o.getOther()instanceof Dh&&o.getOther().applyMirroredCorrection(c);const u=new Pe(o.getText(),o.getRawBytes(),void 0,c,de.QR_CODE,void 0),d=o.getByteSegments();d!==null&&u.putMetadata(Se.BYTE_SEGMENTS,d);const f=o.getECLevel();return f!==null&&u.putMetadata(Se.ERROR_CORRECTION_LEVEL,f),o.hasStructuredAppend()&&(u.putMetadata(Se.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),u.putMetadata(Se.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),u}reset(){}static extractPureBits(n){const i=n.getTopLeftOnBit(),o=n.getBottomRightOnBit();if(i===null||o===null)throw new K;const c=this.moduleSize(i,n);let u=i[1],d=o[1],f=i[0],x=o[0];if(f>=x||u>=d)throw new K;if(d-u!==x-f&&(x=f+(d-u),x>=n.getWidth()))throw new K;const w=Math.round((x-f+1)/c),b=Math.round((d-u+1)/c);if(w<=0||b<=0)throw new K;if(b!==w)throw new K;const S=Math.floor(c/2);u+=S,f+=S;const R=f+Math.floor((w-1)*c)-x;if(R>0){if(R>S)throw new K;f-=R}const M=u+Math.floor((b-1)*c)-d;if(M>0){if(M>S)throw new K;u-=M}const z=new xe(w,b);for(let V=0;V<b;V++){const $=u+Math.floor(V*c);for(let Z=0;Z<w;Z++)n.get(f+Math.floor(Z*c),$)&&z.set(Z,V)}return z}static moduleSize(n,i){const o=i.getHeight(),c=i.getWidth();let u=n[0],d=n[1],f=!0,x=0;for(;u<c&&d<o;){if(f!==i.get(u,d)){if(++x===5)break;f=!f}u++,d++}if(u===c||d===o)throw new K;return(u-n[0])/7}}Vn.NO_POINTS=new Array;class Oe{PDF417Common(){}static getBitCountSum(n){return be.sum(n)}static toIntArray(n){if(n==null||!n.length)return Oe.EMPTY_INT_ARRAY;const i=new Int32Array(n.length);let o=0;for(const c of n)i[o++]=c;return i}static getCodeword(n){const i=N.binarySearch(Oe.SYMBOL_TABLE,n&262143);return i<0?-1:(Oe.CODEWORD_TABLE[i]-1)%Oe.NUMBER_OF_CODEWORDS}}Oe.NUMBER_OF_CODEWORDS=929,Oe.MAX_CODEWORDS_IN_BARCODE=Oe.NUMBER_OF_CODEWORDS-1,Oe.MIN_ROWS_IN_BARCODE=3,Oe.MAX_ROWS_IN_BARCODE=90,Oe.MODULES_IN_CODEWORD=17,Oe.MODULES_IN_STOP_PATTERN=18,Oe.BARS_IN_MODULE=8,Oe.EMPTY_INT_ARRAY=new Int32Array([]),Oe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Oe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Kp{constructor(n,i){this.bits=n,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class je{static detectMultiple(n,i,o){let c=n.getBlackMatrix(),u=je.detect(o,c);return u.length||(c=c.clone(),c.rotate180(),u=je.detect(o,c)),new Kp(c,u)}static detect(n,i){const o=new Array;let c=0,u=0,d=!1;for(;c<i.getHeight();){const f=je.findVertices(i,c,u);if(f[0]==null&&f[3]==null){if(!d)break;d=!1,u=0;for(const x of o)x[1]!=null&&(c=Math.trunc(Math.max(c,x[1].getY()))),x[3]!=null&&(c=Math.max(c,Math.trunc(x[3].getY())));c+=je.ROW_STEP;continue}if(d=!0,o.push(f),!n)break;f[2]!=null?(u=Math.trunc(f[2].getX()),c=Math.trunc(f[2].getY())):(u=Math.trunc(f[4].getX()),c=Math.trunc(f[4].getY()))}return o}static findVertices(n,i,o){const c=n.getHeight(),u=n.getWidth(),d=new Array(8);return je.copyToResult(d,je.findRowsWithPattern(n,c,u,i,o,je.START_PATTERN),je.INDEXES_START_PATTERN),d[4]!=null&&(o=Math.trunc(d[4].getX()),i=Math.trunc(d[4].getY())),je.copyToResult(d,je.findRowsWithPattern(n,c,u,i,o,je.STOP_PATTERN),je.INDEXES_STOP_PATTERN),d}static copyToResult(n,i,o){for(let c=0;c<o.length;c++)n[o[c]]=i[c]}static findRowsWithPattern(n,i,o,c,u,d){const f=new Array(4);let x=!1;const w=new Int32Array(d.length);for(;c<i;c+=je.ROW_STEP){let S=je.findGuardPattern(n,u,c,o,!1,d,w);if(S!=null){for(;c>0;){const R=je.findGuardPattern(n,u,--c,o,!1,d,w);if(R!=null)S=R;else{c++;break}}f[0]=new pe(S[0],c),f[1]=new pe(S[1],c),x=!0;break}}let b=c+1;if(x){let S=0,R=Int32Array.from([Math.trunc(f[0].getX()),Math.trunc(f[1].getX())]);for(;b<i;b++){const M=je.findGuardPattern(n,R[0],b,o,!1,d,w);if(M!=null&&Math.abs(R[0]-M[0])<je.MAX_PATTERN_DRIFT&&Math.abs(R[1]-M[1])<je.MAX_PATTERN_DRIFT)R=M,S=0;else{if(S>je.SKIPPED_ROW_COUNT_MAX)break;S++}}b-=S+1,f[2]=new pe(R[0],b),f[3]=new pe(R[1],b)}return b-c<je.BARCODE_MIN_HEIGHT&&N.fill(f,null),f}static findGuardPattern(n,i,o,c,u,d,f){N.fillWithin(f,0,f.length,0);let x=i,w=0;for(;n.get(x,o)&&x>0&&w++<je.MAX_PIXEL_DRIFT;)x--;let b=x,S=0,R=d.length;for(let M=u;b<c;b++)if(n.get(b,o)!==M)f[S]++;else{if(S===R-1){if(je.patternMatchVariance(f,d,je.MAX_INDIVIDUAL_VARIANCE)<je.MAX_AVG_VARIANCE)return new Int32Array([x,b]);x+=f[0]+f[1],j.arraycopy(f,2,f,0,S-1),f[S-1]=0,f[S]=0,S--}else S++;f[S]=1,M=!M}return S===R-1&&je.patternMatchVariance(f,d,je.MAX_INDIVIDUAL_VARIANCE)<je.MAX_AVG_VARIANCE?new Int32Array([x,b-1]):null}static patternMatchVariance(n,i,o){let c=n.length,u=0,d=0;for(let w=0;w<c;w++)u+=n[w],d+=i[w];if(u<d)return 1/0;let f=u/d;o*=f;let x=0;for(let w=0;w<c;w++){let b=n[w],S=i[w]*f,R=b>S?b-S:S-b;if(R>o)return 1/0;x+=R}return x/u}}je.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),je.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),je.MAX_AVG_VARIANCE=.42,je.MAX_INDIVIDUAL_VARIANCE=.8,je.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),je.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),je.MAX_PIXEL_DRIFT=3,je.MAX_PATTERN_DRIFT=5,je.SKIPPED_ROW_COUNT_MAX=25,je.ROW_STEP=5,je.BARCODE_MIN_HEIGHT=10;class qt{constructor(n,i){if(i.length===0)throw new E;this.field=n;let o=i.length;if(o>1&&i[0]===0){let c=1;for(;c<o&&i[c]===0;)c++;c===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-c),j.arraycopy(i,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let i=this.coefficients[0],o=this.coefficients.length;for(let c=1;c<o;c++)i=this.field.add(this.field.multiply(n,i),this.coefficients[c]);return i}add(n){if(!this.field.equals(n.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let i=this.coefficients,o=n.coefficients;if(i.length>o.length){let d=i;i=o,o=d}let c=new Int32Array(o.length),u=o.length-i.length;j.arraycopy(o,0,c,0,u);for(let d=u;d<o.length;d++)c[d]=this.field.add(i[d-u],o[d]);return new qt(this.field,c)}subtract(n){if(!this.field.equals(n.field))throw new E("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof qt?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new qt(this.field,new Int32Array([0]));let i=this.coefficients,o=i.length,c=n.coefficients,u=c.length,d=new Int32Array(o+u-1);for(let f=0;f<o;f++){let x=i[f];for(let w=0;w<u;w++)d[f+w]=this.field.add(d[f+w],this.field.multiply(x,c[w]))}return new qt(this.field,d)}negative(){let n=this.coefficients.length,i=new Int32Array(n);for(let o=0;o<n;o++)i[o]=this.field.subtract(0,this.coefficients[o]);return new qt(this.field,i)}multiplyScalar(n){if(n===0)return new qt(this.field,new Int32Array([0]));if(n===1)return this;let i=this.coefficients.length,o=new Int32Array(i);for(let c=0;c<i;c++)o[c]=this.field.multiply(this.coefficients[c],n);return new qt(this.field,o)}multiplyByMonomial(n,i){if(n<0)throw new E;if(i===0)return new qt(this.field,new Int32Array([0]));let o=this.coefficients.length,c=new Int32Array(o+n);for(let u=0;u<o;u++)c[u]=this.field.multiply(this.coefficients[u],i);return new qt(this.field,c)}toString(){let n=new se;for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);o!==0&&(o<0?(n.append(" - "),o=-o):n.length()>0&&n.append(" + "),(i===0||o!==1)&&n.append(o),i!==0&&(i===1?n.append("x"):(n.append("x^"),n.append(i))))}return n.toString()}}class Yp{add(n,i){return(n+i)%this.modulus}subtract(n,i){return(this.modulus+n-i)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new E;return this.logTable[n]}inverse(n){if(n===0)throw new Qe;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,i){return n===0||i===0?0:this.expTable[(this.logTable[n]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class mc extends Yp{constructor(n,i){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let o=1;for(let c=0;c<n;c++)this.expTable[c]=o,o=o*i%n;for(let c=0;c<n-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new qt(this,new Int32Array([0])),this.one=new qt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,i){if(n<0)throw new E;if(i===0)return this.zero;let o=new Int32Array(n+1);return o[0]=i,new qt(this,o)}}mc.PDF417_GF=new mc(Oe.NUMBER_OF_CODEWORDS,3);class Mh{constructor(){this.field=mc.PDF417_GF}decode(n,i,o){let c=new qt(this.field,n),u=new Int32Array(i),d=!1;for(let z=i;z>0;z--){let V=c.evaluateAt(this.field.exp(z));u[i-z]=V,V!==0&&(d=!0)}if(!d)return 0;let f=this.field.getOne();if(o!=null)for(const z of o){let V=this.field.exp(n.length-1-z),$=new qt(this.field,new Int32Array([this.field.subtract(0,V),1]));f=f.multiply($)}let x=new qt(this.field,u),w=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),x,i),b=w[0],S=w[1],R=this.findErrorLocations(b),M=this.findErrorMagnitudes(S,b,R);for(let z=0;z<R.length;z++){let V=n.length-1-this.field.log(R[z]);if(V<0)throw T.getChecksumInstance();n[V]=this.field.subtract(n[V],M[z])}return R.length}runEuclideanAlgorithm(n,i,o){if(n.getDegree()<i.getDegree()){let R=n;n=i,i=R}let c=n,u=i,d=this.field.getZero(),f=this.field.getOne();for(;u.getDegree()>=Math.round(o/2);){let R=c,M=d;if(c=u,d=f,c.isZero())throw T.getChecksumInstance();u=R;let z=this.field.getZero(),V=c.getCoefficient(c.getDegree()),$=this.field.inverse(V);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let Z=u.getDegree()-c.getDegree(),ae=this.field.multiply(u.getCoefficient(u.getDegree()),$);z=z.add(this.field.buildMonomial(Z,ae)),u=u.subtract(c.multiplyByMonomial(Z,ae))}f=z.multiply(d).subtract(M).negative()}let x=f.getCoefficient(0);if(x===0)throw T.getChecksumInstance();let w=this.field.inverse(x),b=f.multiply(w),S=u.multiply(w);return[b,S]}findErrorLocations(n){let i=n.getDegree(),o=new Int32Array(i),c=0;for(let u=1;u<this.field.getSize()&&c<i;u++)n.evaluateAt(u)===0&&(o[c]=this.field.inverse(u),c++);if(c!==i)throw T.getChecksumInstance();return o}findErrorMagnitudes(n,i,o){let c=i.getDegree(),u=new Int32Array(c);for(let w=1;w<=c;w++)u[c-w]=this.field.multiply(w,i.getCoefficient(w));let d=new qt(this.field,u),f=o.length,x=new Int32Array(f);for(let w=0;w<f;w++){let b=this.field.inverse(o[w]),S=this.field.subtract(0,n.evaluateAt(b)),R=this.field.inverse(d.evaluateAt(b));x[w]=this.field.multiply(S,R)}return x}}class bi{constructor(n,i,o,c,u){n instanceof bi?this.constructor_2(n):this.constructor_1(n,i,o,c,u)}constructor_1(n,i,o,c,u){const d=i==null||o==null,f=c==null||u==null;if(d&&f)throw new K;d?(i=new pe(0,c.getY()),o=new pe(0,u.getY())):f&&(c=new pe(n.getWidth()-1,i.getY()),u=new pe(n.getWidth()-1,o.getY())),this.image=n,this.topLeft=i,this.bottomLeft=o,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(i.getX(),o.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(i.getY(),c.getY())),this.maxY=Math.trunc(Math.max(o.getY(),u.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,i){return n==null?i:i==null?n:new bi(n.image,n.topLeft,n.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(n,i,o){let c=this.topLeft,u=this.bottomLeft,d=this.topRight,f=this.bottomRight;if(n>0){let x=o?this.topLeft:this.topRight,w=Math.trunc(x.getY()-n);w<0&&(w=0);let b=new pe(x.getX(),w);o?c=b:d=b}if(i>0){let x=o?this.bottomLeft:this.bottomRight,w=Math.trunc(x.getY()+i);w>=this.image.getHeight()&&(w=this.image.getHeight()-1);let b=new pe(x.getX(),w);o?u=b:f=b}return new bi(this.image,c,u,d,f)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Zp{constructor(n,i,o,c){this.columnCount=n,this.errorCorrectionLevel=c,this.rowCountUpperPart=i,this.rowCountLowerPart=o,this.rowCount=i+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Qs{constructor(){this.buffer=""}static form(n,i){let o=-1;function c(d,f,x,w,b,S){if(d==="%%")return"%";if(i[++o]===void 0)return;d=w?parseInt(w.substr(1)):void 0;let R=b?parseInt(b.substr(1)):void 0,M;switch(S){case"s":M=i[o];break;case"c":M=i[o][0];break;case"f":M=parseFloat(i[o]).toFixed(d);break;case"p":M=parseFloat(i[o]).toPrecision(d);break;case"e":M=parseFloat(i[o]).toExponential(d);break;case"x":M=parseInt(i[o]).toString(R||16);break;case"d":M=parseFloat(parseInt(i[o],R||10).toPrecision(d)).toFixed(0);break}M=typeof M=="object"?JSON.stringify(M):(+M).toString(R);let z=parseInt(x),V=x&&x[0]+""=="0"?"0":" ";for(;M.length<z;)M=f!==void 0?M+V:V+M;return M}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(u,c)}format(n,...i){this.buffer+=Qs.form(n,i)}toString(){return this.buffer}}class Js{constructor(n){this.boundingBox=new bi(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let i=this.getCodeword(n);if(i!=null)return i;for(let o=1;o<Js.MAX_NEARBY_DISTANCE;o++){let c=this.imageRowToCodewordIndex(n)-o;if(c>=0&&(i=this.codewords[c],i!=null)||(c=this.imageRowToCodewordIndex(n)+o,c<this.codewords.length&&(i=this.codewords[c],i!=null)))return i}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,i){this.codewords[this.imageRowToCodewordIndex(n)]=i}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new Qs;let i=0;for(const o of this.codewords){if(o==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}return n.toString()}}Js.MAX_NEARBY_DISTANCE=5;class eo{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let i=this.values.get(n);i==null&&(i=0),i++,this.values.set(n,i)}getValue(){let n=-1,i=new Array;for(const[o,c]of this.values.entries()){const u={getKey:()=>o,getValue:()=>c};u.getValue()>n?(n=u.getValue(),i=[],i.push(u.getKey())):u.getValue()===n&&i.push(u.getKey())}return Oe.toIntArray(i)}getConfidence(n){return this.values.get(n)}}class Lh extends Js{constructor(n,i){super(n),this._isLeft=i}setRowNumbers(){for(let n of this.getCodewords())n!=null&&n.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,n);let o=this.getBoundingBox(),c=this._isLeft?o.getTopLeft():o.getTopRight(),u=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=-1,w=1,b=0;for(let S=d;S<f;S++){if(i[S]==null)continue;let R=i[S],M=R.getRowNumber()-x;if(M===0)b++;else if(M===1)w=Math.max(w,b),b=1,x=R.getRowNumber();else if(M<0||R.getRowNumber()>=n.getRowCount()||M>S)i[S]=null;else{let z;w>2?z=(w-2)*M:z=M;let V=z>=S;for(let $=1;$<=z&&!V;$++)V=i[S-$]!=null;V?i[S]=null:(x=R.getRowNumber(),b=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let i=new Int32Array(n.getRowCount());for(let o of this.getCodewords())if(o!=null){let c=o.getRowNumber();if(c>=i.length)continue;i[c]++}return i}adjustIncompleteIndicatorColumnRowNumbers(n){let i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),c=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),f=this.getCodewords(),x=-1;for(let w=u;w<d;w++){if(f[w]==null)continue;let b=f[w];b.setRowNumberAsRowIndicatorColumn();let S=b.getRowNumber()-x;S===0||(S===1?x=b.getRowNumber():b.getRowNumber()>=n.getRowCount()?f[w]=null:x=b.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),i=new eo,o=new eo,c=new eo,u=new eo;for(let f of n){if(f==null)continue;f.setRowNumberAsRowIndicatorColumn();let x=f.getValue()%30,w=f.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:o.setValue(x*3+1);break;case 1:u.setValue(x/3),c.setValue(x%3);break;case 2:i.setValue(x+1);break}}if(i.getValue().length===0||o.getValue().length===0||c.getValue().length===0||u.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+c.getValue()[0]<Oe.MIN_ROWS_IN_BARCODE||o.getValue()[0]+c.getValue()[0]>Oe.MAX_ROWS_IN_BARCODE)return null;let d=new Zp(i.getValue()[0],o.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(n,d),d}removeIncorrectCodewords(n,i){for(let o=0;o<n.length;o++){let c=n[o];if(n[o]==null)continue;let u=c.getValue()%30,d=c.getRowNumber();if(d>i.getRowCount()){n[o]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:u*3+1!==i.getRowCountUpperPart()&&(n[o]=null);break;case 1:(Math.trunc(u/3)!==i.getErrorCorrectionLevel()||u%3!==i.getRowCountLowerPart())&&(n[o]=null);break;case 2:u+1!==i.getColumnCount()&&(n[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class to{constructor(n,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=Oe.MAX_CODEWORDS_IN_BARCODE,i;do i=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n!=null&&n.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let o=this.detectionResultColumns[i].getCodewords();for(let c=0;c<o.length;c++)o[c]!=null&&(o[c].hasValidRowNumber()||this.adjustRowNumbers(i,c,o))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<n.length;o++)if(n[o]!=null&&i[o]!=null&&n[o].getRowNumber()===i[o].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[o];u!=null&&(u.setRowNumber(n[o].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let c=i[o].getRowNumber(),u=0;for(let d=this.barcodeColumnCount+1;d>0&&u<this.ADJUST_ROW_NUMBER_SKIP;d--){let f=this.detectionResultColumns[d].getCodewords()[o];f!=null&&(u=to.adjustRowNumberIfValid(c,u,f),f.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,i=this.detectionResultColumns[0].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let c=i[o].getRowNumber(),u=0;for(let d=1;d<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;d++){let f=this.detectionResultColumns[d].getCodewords()[o];f!=null&&(u=to.adjustRowNumberIfValid(c,u,f),f.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,i,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(n)?(o.setRowNumber(n),i=0):++i),i}adjustRowNumbers(n,i,o){if(!this.detectionResultColumns[n-1])return;let c=o[i],u=this.detectionResultColumns[n-1].getCodewords(),d=u;this.detectionResultColumns[n+1]!=null&&(d=this.detectionResultColumns[n+1].getCodewords());let f=new Array(14);f[2]=u[i],f[3]=d[i],i>0&&(f[0]=o[i-1],f[4]=u[i-1],f[5]=d[i-1]),i>1&&(f[8]=o[i-2],f[10]=u[i-2],f[11]=d[i-2]),i<o.length-1&&(f[1]=o[i+1],f[6]=u[i+1],f[7]=d[i+1]),i<o.length-2&&(f[9]=o[i+2],f[12]=u[i+2],f[13]=d[i+2]);for(let x of f)if(to.adjustRowNumber(c,x))return}static adjustRowNumber(n,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===n.getBucket()?(n.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,i){this.detectionResultColumns[n]=i}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new Qs;for(let o=0;o<n.getCodewords().length;o++){i.format("CW %3d:",o);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){i.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[o];if(u==null){i.format("    |   ");continue}i.format(" %3d|%3d",u.getRowNumber(),u.getValue())}i.format("%n")}return i.toString()}}class ro{constructor(n,i,o,c){this.rowNumber=ro.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(i),this.bucket=Math.trunc(o),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==ro.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}ro.BARCODE_ROW_UNKNOWN=-1;class wr{static initialize(){for(let n=0;n<Oe.SYMBOL_TABLE.length;n++){let i=Oe.SYMBOL_TABLE[n],o=i&1;for(let c=0;c<Oe.BARS_IN_MODULE;c++){let u=0;for(;(i&1)===o;)u+=1,i>>=1;o=i&1,wr.RATIOS_TABLE[n]||(wr.RATIOS_TABLE[n]=new Array(Oe.BARS_IN_MODULE)),wr.RATIOS_TABLE[n][Oe.BARS_IN_MODULE-c-1]=Math.fround(u/Oe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let i=wr.getDecodedCodewordValue(wr.sampleBitCounts(n));return i!==-1?i:wr.getClosestDecodedValue(n)}static sampleBitCounts(n){let i=be.sum(n),o=new Int32Array(Oe.BARS_IN_MODULE),c=0,u=0;for(let d=0;d<Oe.MODULES_IN_CODEWORD;d++){let f=i/(2*Oe.MODULES_IN_CODEWORD)+d*i/Oe.MODULES_IN_CODEWORD;u+n[c]<=f&&(u+=n[c],c++),o[c]++}return o}static getDecodedCodewordValue(n){let i=wr.getBitValue(n);return Oe.getCodeword(i)===-1?-1:i}static getBitValue(n){let i=0;for(let o=0;o<n.length;o++)for(let c=0;c<n[o];c++)i=i<<1|(o%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(n){let i=be.sum(n),o=new Array(Oe.BARS_IN_MODULE);if(i>1)for(let d=0;d<o.length;d++)o[d]=Math.fround(n[d]/i);let c=mt.MAX_VALUE,u=-1;this.bSymbolTableReady||wr.initialize();for(let d=0;d<wr.RATIOS_TABLE.length;d++){let f=0,x=wr.RATIOS_TABLE[d];for(let w=0;w<Oe.BARS_IN_MODULE;w++){let b=Math.fround(x[w]-o[w]);if(f+=Math.fround(b*b),f>=c)break}f<c&&(c=f,u=Oe.SYMBOL_TABLE[d])}return u}}wr.bSymbolTableReady=!1,wr.RATIOS_TABLE=new Array(Oe.SYMBOL_TABLE.length).map(C=>new Array(Oe.BARS_IN_MODULE));class jh{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class Bh{static parseLong(n,i=void 0){return parseInt(n,i)}}class Fh extends g{}Fh.kind="NullPointerException";class Qp{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,i,o){if(n==null)throw new Fh;if(i<0||i>n.length||o<0||i+o>n.length||i+o<0)throw new B;if(o===0)return;for(let c=0;c<o;c++)this.write(n[i+c])}flush(){}close(){}}class Jp extends g{}class ex extends Qp{constructor(n=32){if(super(),this.count=0,n<0)throw new E("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let o=this.buf.length<<1;if(o-n<0&&(o=n),o<0){if(n<0)throw new Jp;o=I.MAX_VALUE}this.buf=N.copyOfUint8Array(this.buf,o)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,i,o){if(i<0||i>n.length||o<0||i+o-n.length>0)throw new B;this.ensureCapacity(this.count+o),j.arraycopy(n,i,this.buf,this.count,o),this.count+=o}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return N.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var rt;(function(C){C[C.ALPHA=0]="ALPHA",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.PUNCT=3]="PUNCT",C[C.ALPHA_SHIFT=4]="ALPHA_SHIFT",C[C.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(rt||(rt={}));function Uh(){if(typeof window<"u")return window.BigInt||null;if(typeof cs<"u")return cs.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ua;function Wn(C){if(typeof ua>"u"&&(ua=Uh()),ua===null)throw new Error("BigInt is not supported!");return ua(C)}function tx(){let C=[];C[0]=Wn(1);let n=Wn(900);C[1]=n;for(let i=2;i<16;i++)C[i]=C[i-1]*n;return C}class Y{static decode(n,i){let o=new se(""),c=A.ISO8859_1;o.enableDecoding(c);let u=1,d=n[u++],f=new jh;for(;u<n[0];){switch(d){case Y.TEXT_COMPACTION_MODE_LATCH:u=Y.textCompaction(n,u,o);break;case Y.BYTE_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH_6:u=Y.byteCompaction(d,n,c,u,o);break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[u++]);break;case Y.NUMERIC_COMPACTION_MODE_LATCH:u=Y.numericCompaction(n,u,o);break;case Y.ECI_CHARSET:A.getCharacterSetECIByValue(n[u++]);break;case Y.ECI_GENERAL_PURPOSE:u+=2;break;case Y.ECI_USER_DEFINED:u++;break;case Y.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=Y.decodeMacroBlock(n,u,f);break;case Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Y.MACRO_PDF417_TERMINATOR:throw new U;default:u--,u=Y.textCompaction(n,u,o);break}if(u<n.length)d=n[u++];else throw U.getFormatInstance()}if(o.length()===0)throw U.getFormatInstance();let x=new Ue(null,o.toString(),null,i);return x.setOther(f),x}static decodeMacroBlock(n,i,o){if(i+Y.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw U.getFormatInstance();let c=new Int32Array(Y.NUMBER_OF_SEQUENCE_CODEWORDS);for(let f=0;f<Y.NUMBER_OF_SEQUENCE_CODEWORDS;f++,i++)c[f]=n[i];o.setSegmentIndex(I.parseInt(Y.decodeBase900toBase10(c,Y.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new se;i=Y.textCompaction(n,i,u),o.setFileId(u.toString());let d=-1;for(n[i]===Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=i+1);i<n[0];)switch(n[i]){case Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,n[i]){case Y.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let f=new se;i=Y.textCompaction(n,i+1,f),o.setFileName(f.toString());break;case Y.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let x=new se;i=Y.textCompaction(n,i+1,x),o.setSender(x.toString());break;case Y.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let w=new se;i=Y.textCompaction(n,i+1,w),o.setAddressee(w.toString());break;case Y.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let b=new se;i=Y.numericCompaction(n,i+1,b),o.setSegmentCount(I.parseInt(b.toString()));break;case Y.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let S=new se;i=Y.numericCompaction(n,i+1,S),o.setTimestamp(Bh.parseLong(S.toString()));break;case Y.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let R=new se;i=Y.numericCompaction(n,i+1,R),o.setChecksum(I.parseInt(R.toString()));break;case Y.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let M=new se;i=Y.numericCompaction(n,i+1,M),o.setFileSize(Bh.parseLong(M.toString()));break;default:throw U.getFormatInstance()}break;case Y.MACRO_PDF417_TERMINATOR:i++,o.setLastSegment(!0);break;default:throw U.getFormatInstance()}if(d!==-1){let f=i-d;o.isLastSegment()&&f--,o.setOptionalData(N.copyOfRange(n,d,d+f))}return i}static textCompaction(n,i,o){let c=new Int32Array((n[0]-i)*2),u=new Int32Array((n[0]-i)*2),d=0,f=!1;for(;i<n[0]&&!f;){let x=n[i++];if(x<Y.TEXT_COMPACTION_MODE_LATCH)c[d]=x/30,c[d+1]=x%30,d+=2;else switch(x){case Y.TEXT_COMPACTION_MODE_LATCH:c[d++]=Y.TEXT_COMPACTION_MODE_LATCH;break;case Y.BYTE_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH_6:case Y.NUMERIC_COMPACTION_MODE_LATCH:case Y.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Y.MACRO_PDF417_TERMINATOR:i--,f=!0;break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[d]=Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,x=n[i++],u[d]=x,d++;break}}return Y.decodeTextCompaction(c,u,d,o),i}static decodeTextCompaction(n,i,o,c){let u=rt.ALPHA,d=rt.ALPHA,f=0;for(;f<o;){let x=n[f],w="";switch(u){case rt.ALPHA:if(x<26)w=String.fromCharCode(65+x);else switch(x){case 26:w=" ";break;case Y.LL:u=rt.LOWER;break;case Y.ML:u=rt.MIXED;break;case Y.PS:d=u,u=rt.PUNCT_SHIFT;break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[f]);break;case Y.TEXT_COMPACTION_MODE_LATCH:u=rt.ALPHA;break}break;case rt.LOWER:if(x<26)w=String.fromCharCode(97+x);else switch(x){case 26:w=" ";break;case Y.AS:d=u,u=rt.ALPHA_SHIFT;break;case Y.ML:u=rt.MIXED;break;case Y.PS:d=u,u=rt.PUNCT_SHIFT;break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[f]);break;case Y.TEXT_COMPACTION_MODE_LATCH:u=rt.ALPHA;break}break;case rt.MIXED:if(x<Y.PL)w=Y.MIXED_CHARS[x];else switch(x){case Y.PL:u=rt.PUNCT;break;case 26:w=" ";break;case Y.LL:u=rt.LOWER;break;case Y.AL:u=rt.ALPHA;break;case Y.PS:d=u,u=rt.PUNCT_SHIFT;break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[f]);break;case Y.TEXT_COMPACTION_MODE_LATCH:u=rt.ALPHA;break}break;case rt.PUNCT:if(x<Y.PAL)w=Y.PUNCT_CHARS[x];else switch(x){case Y.PAL:u=rt.ALPHA;break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[f]);break;case Y.TEXT_COMPACTION_MODE_LATCH:u=rt.ALPHA;break}break;case rt.ALPHA_SHIFT:if(u=d,x<26)w=String.fromCharCode(65+x);else switch(x){case 26:w=" ";break;case Y.TEXT_COMPACTION_MODE_LATCH:u=rt.ALPHA;break}break;case rt.PUNCT_SHIFT:if(u=d,x<Y.PAL)w=Y.PUNCT_CHARS[x];else switch(x){case Y.PAL:u=rt.ALPHA;break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[f]);break;case Y.TEXT_COMPACTION_MODE_LATCH:u=rt.ALPHA;break}break}w!==""&&c.append(w),f++}}static byteCompaction(n,i,o,c,u){let d=new ex,f=0,x=0,w=!1;switch(n){case Y.BYTE_COMPACTION_MODE_LATCH:let b=new Int32Array(6),S=i[c++];for(;c<i[0]&&!w;)switch(b[f++]=S,x=900*x+S,S=i[c++],S){case Y.TEXT_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH:case Y.NUMERIC_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH_6:case Y.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Y.MACRO_PDF417_TERMINATOR:c--,w=!0;break;default:if(f%5===0&&f>0){for(let R=0;R<6;++R)d.write(Number(Wn(x)>>Wn(8*(5-R))));x=0,f=0}break}c===i[0]&&S<Y.TEXT_COMPACTION_MODE_LATCH&&(b[f++]=S);for(let R=0;R<f;R++)d.write(b[R]);break;case Y.BYTE_COMPACTION_MODE_LATCH_6:for(;c<i[0]&&!w;){let R=i[c++];if(R<Y.TEXT_COMPACTION_MODE_LATCH)f++,x=900*x+R;else switch(R){case Y.TEXT_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH:case Y.NUMERIC_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH_6:case Y.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Y.MACRO_PDF417_TERMINATOR:c--,w=!0;break}if(f%5===0&&f>0){for(let M=0;M<6;++M)d.write(Number(Wn(x)>>Wn(8*(5-M))));x=0,f=0}}break}return u.append(J.decode(d.toByteArray(),o)),c}static numericCompaction(n,i,o){let c=0,u=!1,d=new Int32Array(Y.MAX_NUMERIC_CODEWORDS);for(;i<n[0]&&!u;){let f=n[i++];if(i===n[0]&&(u=!0),f<Y.TEXT_COMPACTION_MODE_LATCH)d[c]=f,c++;else switch(f){case Y.TEXT_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH_6:case Y.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Y.MACRO_PDF417_TERMINATOR:i--,u=!0;break}(c%Y.MAX_NUMERIC_CODEWORDS===0||f===Y.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(o.append(Y.decodeBase900toBase10(d,c)),c=0)}return i}static decodeBase900toBase10(n,i){let o=Wn(0);for(let u=0;u<i;u++)o+=Y.EXP900[i-u-1]*Wn(n[u]);let c=o.toString();if(c.charAt(0)!=="1")throw new U;return c.substring(1)}}Y.TEXT_COMPACTION_MODE_LATCH=900,Y.BYTE_COMPACTION_MODE_LATCH=901,Y.NUMERIC_COMPACTION_MODE_LATCH=902,Y.BYTE_COMPACTION_MODE_LATCH_6=924,Y.ECI_USER_DEFINED=925,Y.ECI_GENERAL_PURPOSE=926,Y.ECI_CHARSET=927,Y.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Y.MACRO_PDF417_TERMINATOR=922,Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Y.MAX_NUMERIC_CODEWORDS=15,Y.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Y.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Y.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Y.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Y.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Y.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Y.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Y.PL=25,Y.LL=27,Y.AS=27,Y.ML=28,Y.AL=28,Y.PS=29,Y.PAL=29,Y.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Y.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Y.EXP900=Uh()?tx():[],Y.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Fe{constructor(){}static decode(n,i,o,c,u,d,f){let x=new bi(n,i,o,c,u),w=null,b=null,S;for(let z=!0;;z=!1){if(i!=null&&(w=Fe.getRowIndicatorColumn(n,x,i,!0,d,f)),c!=null&&(b=Fe.getRowIndicatorColumn(n,x,c,!1,d,f)),S=Fe.merge(w,b),S==null)throw K.getNotFoundInstance();let V=S.getBoundingBox();if(z&&V!=null&&(V.getMinY()<x.getMinY()||V.getMaxY()>x.getMaxY()))x=V;else break}S.setBoundingBox(x);let R=S.getBarcodeColumnCount()+1;S.setDetectionResultColumn(0,w),S.setDetectionResultColumn(R,b);let M=w!=null;for(let z=1;z<=R;z++){let V=M?z:R-z;if(S.getDetectionResultColumn(V)!==void 0)continue;let $;V===0||V===R?$=new Lh(x,V===0):$=new Js(x),S.setDetectionResultColumn(V,$);let Z=-1,ae=Z;for(let le=x.getMinY();le<=x.getMaxY();le++){if(Z=Fe.getStartColumn(S,V,le,M),Z<0||Z>x.getMaxX()){if(ae===-1)continue;Z=ae}let ie=Fe.detectCodeword(n,x.getMinX(),x.getMaxX(),M,Z,le,d,f);ie!=null&&($.setCodeword(le,ie),ae=Z,d=Math.min(d,ie.getWidth()),f=Math.max(f,ie.getWidth()))}}return Fe.createDecoderResult(S)}static merge(n,i){if(n==null&&i==null)return null;let o=Fe.getBarcodeMetadata(n,i);if(o==null)return null;let c=bi.merge(Fe.adjustBoundingBox(n),Fe.adjustBoundingBox(i));return new to(o,c)}static adjustBoundingBox(n){if(n==null)return null;let i=n.getRowHeights();if(i==null)return null;let o=Fe.getMax(i),c=0;for(let f of i)if(c+=o-f,f>0)break;let u=n.getCodewords();for(let f=0;c>0&&u[f]==null;f++)c--;let d=0;for(let f=i.length-1;f>=0&&(d+=o-i[f],!(i[f]>0));f--);for(let f=u.length-1;d>0&&u[f]==null;f--)d--;return n.getBoundingBox().addMissingRows(c,d,n.isLeft())}static getMax(n){let i=-1;for(let o of n)i=Math.max(i,o);return i}static getBarcodeMetadata(n,i){let o;if(n==null||(o=n.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let c;return i==null||(c=i.getBarcodeMetadata())==null?o:o.getColumnCount()!==c.getColumnCount()&&o.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&o.getRowCount()!==c.getRowCount()?null:o}static getRowIndicatorColumn(n,i,o,c,u,d){let f=new Lh(i,c);for(let x=0;x<2;x++){let w=x===0?1:-1,b=Math.trunc(Math.trunc(o.getX()));for(let S=Math.trunc(Math.trunc(o.getY()));S<=i.getMaxY()&&S>=i.getMinY();S+=w){let R=Fe.detectCodeword(n,0,n.getWidth(),c,b,S,u,d);R!=null&&(f.setCodeword(S,R),c?b=R.getStartX():b=R.getEndX())}}return f}static adjustCodewordCount(n,i){let o=i[0][1],c=o.getValue(),u=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-Fe.getNumberOfECCodeWords(n.getBarcodeECLevel());if(c.length===0){if(u<1||u>Oe.MAX_CODEWORDS_IN_BARCODE)throw K.getNotFoundInstance();o.setValue(u)}else c[0]!==u&&o.setValue(u)}static createDecoderResult(n){let i=Fe.createBarcodeMatrix(n);Fe.adjustCodewordCount(n,i);let o=new Array,c=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),u=[],d=new Array;for(let x=0;x<n.getBarcodeRowCount();x++)for(let w=0;w<n.getBarcodeColumnCount();w++){let b=i[x][w+1].getValue(),S=x*n.getBarcodeColumnCount()+w;b.length===0?o.push(S):b.length===1?c[S]=b[0]:(d.push(S),u.push(b))}let f=new Array(u.length);for(let x=0;x<f.length;x++)f[x]=u[x];return Fe.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),c,Oe.toIntArray(o),Oe.toIntArray(d),f)}static createDecoderResultFromAmbiguousValues(n,i,o,c,u){let d=new Int32Array(c.length),f=100;for(;f-- >0;){for(let x=0;x<d.length;x++)i[c[x]]=u[x][d[x]];try{return Fe.decodeCodewords(i,n,o)}catch(x){if(!(x instanceof T))throw x}if(d.length===0)throw T.getChecksumInstance();for(let x=0;x<d.length;x++)if(d[x]<u[x].length-1){d[x]++;break}else if(d[x]=0,x===d.length-1)throw T.getChecksumInstance()}throw T.getChecksumInstance()}static createBarcodeMatrix(n){let i=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let c=0;c<i.length;c++)for(let u=0;u<i[c].length;u++)i[c][u]=new eo;let o=0;for(let c of n.getDetectionResultColumns()){if(c!=null){for(let u of c.getCodewords())if(u!=null){let d=u.getRowNumber();if(d>=0){if(d>=i.length)continue;i[d][o].setValue(u.getValue())}}}o++}return i}static isValidBarcodeColumn(n,i){return i>=0&&i<=n.getBarcodeColumnCount()+1}static getStartColumn(n,i,o,c){let u=c?1:-1,d=null;if(Fe.isValidBarcodeColumn(n,i-u)&&(d=n.getDetectionResultColumn(i-u).getCodeword(o)),d!=null)return c?d.getEndX():d.getStartX();if(d=n.getDetectionResultColumn(i).getCodewordNearby(o),d!=null)return c?d.getStartX():d.getEndX();if(Fe.isValidBarcodeColumn(n,i-u)&&(d=n.getDetectionResultColumn(i-u).getCodewordNearby(o)),d!=null)return c?d.getEndX():d.getStartX();let f=0;for(;Fe.isValidBarcodeColumn(n,i-u);){i-=u;for(let x of n.getDetectionResultColumn(i).getCodewords())if(x!=null)return(c?x.getEndX():x.getStartX())+u*f*(x.getEndX()-x.getStartX());f++}return c?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,i,o,c,u,d,f,x){u=Fe.adjustCodewordStartColumn(n,i,o,c,u,d);let w=Fe.getModuleBitCount(n,i,o,c,u,d);if(w==null)return null;let b,S=be.sum(w);if(c)b=u+S;else{for(let z=0;z<w.length/2;z++){let V=w[z];w[z]=w[w.length-1-z],w[w.length-1-z]=V}b=u,u=b-S}if(!Fe.checkCodewordSkew(S,f,x))return null;let R=wr.getDecodedValue(w),M=Oe.getCodeword(R);return M===-1?null:new ro(u,b,Fe.getCodewordBucketNumber(R),M)}static getModuleBitCount(n,i,o,c,u,d){let f=u,x=new Int32Array(8),w=0,b=c?1:-1,S=c;for(;(c?f<o:f>=i)&&w<x.length;)n.get(f,d)===S?(x[w]++,f+=b):(w++,S=!S);return w===x.length||f===(c?o:i)&&w===x.length-1?x:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,i,o,c,u,d){let f=u,x=c?-1:1;for(let w=0;w<2;w++){for(;(c?f>=i:f<o)&&c===n.get(f,d);){if(Math.abs(u-f)>Fe.CODEWORD_SKEW_SIZE)return u;f+=x}x=-x,c=!c}return f}static checkCodewordSkew(n,i,o){return i-Fe.CODEWORD_SKEW_SIZE<=n&&n<=o+Fe.CODEWORD_SKEW_SIZE}static decodeCodewords(n,i,o){if(n.length===0)throw U.getFormatInstance();let c=1<<i+1,u=Fe.correctErrors(n,o,c);Fe.verifyCodewordCount(n,c);let d=Y.decode(n,""+i);return d.setErrorsCorrected(u),d.setErasures(o.length),d}static correctErrors(n,i,o){if(i!=null&&i.length>o/2+Fe.MAX_ERRORS||o<0||o>Fe.MAX_EC_CODEWORDS)throw T.getChecksumInstance();return Fe.errorCorrection.decode(n,o,i)}static verifyCodewordCount(n,i){if(n.length<4)throw U.getFormatInstance();let o=n[0];if(o>n.length)throw U.getFormatInstance();if(o===0)if(i<n.length)n[0]=n.length-i;else throw U.getFormatInstance()}static getBitCountForCodeword(n){let i=new Int32Array(8),o=0,c=i.length-1;for(;!((n&1)!==o&&(o=n&1,c--,c<0));)i[c]++,n>>=1;return i}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return Fe.getCodewordBucketNumber(Fe.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let i=new Qs;for(let o=0;o<n.length;o++){i.format("Row %2d: ",o);for(let c=0;c<n[o].length;c++){let u=n[o][c];u.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}i.format("%n")}return i.toString()}}Fe.CODEWORD_SKEW_SIZE=2,Fe.MAX_ERRORS=3,Fe.MAX_EC_CODEWORDS=512,Fe.errorCorrection=new Mh;class Kt{decode(n,i=null){let o=Kt.decode(n,i,!1);if(o==null||o.length===0||o[0]==null)throw K.getNotFoundInstance();return o[0]}decodeMultiple(n,i=null){try{return Kt.decode(n,i,!0)}catch(o){throw o instanceof U||o instanceof T?K.getNotFoundInstance():o}}static decode(n,i,o){const c=new Array,u=je.detectMultiple(n,i,o);for(const d of u.getPoints()){const f=Fe.decode(u.getBits(),d[4],d[5],d[6],d[7],Kt.getMinCodewordWidth(d),Kt.getMaxCodewordWidth(d)),x=new Pe(f.getText(),f.getRawBytes(),void 0,d,de.PDF_417);x.putMetadata(Se.ERROR_CORRECTION_LEVEL,f.getECLevel());const w=f.getOther();w!=null&&x.putMetadata(Se.PDF417_EXTRA_METADATA,w),c.push(x)}return c.map(d=>d)}static getMaxWidth(n,i){return n==null||i==null?0:Math.trunc(Math.abs(n.getX()-i.getX()))}static getMinWidth(n,i){return n==null||i==null?I.MAX_VALUE:Math.trunc(Math.abs(n.getX()-i.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(Kt.getMaxWidth(n[0],n[4]),Kt.getMaxWidth(n[6],n[2])*Oe.MODULES_IN_CODEWORD/Oe.MODULES_IN_STOP_PATTERN),Math.max(Kt.getMaxWidth(n[1],n[5]),Kt.getMaxWidth(n[7],n[3])*Oe.MODULES_IN_CODEWORD/Oe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(Kt.getMinWidth(n[0],n[4]),Kt.getMinWidth(n[6],n[2])*Oe.MODULES_IN_CODEWORD/Oe.MODULES_IN_STOP_PATTERN),Math.min(Kt.getMinWidth(n[1],n[5]),Kt.getMinWidth(n[7],n[3])*Oe.MODULES_IN_CODEWORD/Oe.MODULES_IN_STOP_PATTERN)))}reset(){}}class da extends g{}da.kind="ReaderException";class zh{constructor(n,i){this.verbose=n===!0,i&&this.setHints(i)}decode(n,i){return i&&this.setHints(i),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const i=!s(n)&&n.get(G.TRY_HARDER)===!0,o=s(n)?null:n.get(G.POSSIBLE_FORMATS),c=new Array;if(!s(o)){const u=o.some(d=>d===de.UPC_A||d===de.UPC_E||d===de.EAN_13||d===de.EAN_8||d===de.CODABAR||d===de.CODE_39||d===de.CODE_93||d===de.CODE_128||d===de.ITF||d===de.RSS_14||d===de.RSS_EXPANDED);u&&!i&&c.push(new Zi(n,this.verbose)),o.includes(de.QR_CODE)&&c.push(new Vn),o.includes(de.DATA_MATRIX)&&c.push(new zn),o.includes(de.AZTEC)&&c.push(new qr),o.includes(de.PDF_417)&&c.push(new Kt),u&&i&&c.push(new Zi(n,this.verbose))}c.length===0&&(i||c.push(new Zi(n,this.verbose)),c.push(new Vn),c.push(new zn),c.push(new qr),c.push(new Kt),i&&c.push(new Zi(n,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new da("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(n,this.hints)}catch(o){if(o instanceof da)continue}throw new K("No MultiFormat Readers were able to detect the code.")}}class rx extends me{constructor(n=null,i=500){const o=new zh;o.setHints(n),super(o,i)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class nx extends me{constructor(n=500){super(new Kt,n)}}class ix extends me{constructor(n=500){super(new Vn,n)}}var pc;(function(C){C[C.ERROR_CORRECTION=0]="ERROR_CORRECTION",C[C.CHARACTER_SET=1]="CHARACTER_SET",C[C.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",C[C.MIN_SIZE=3]="MIN_SIZE",C[C.MAX_SIZE=4]="MAX_SIZE",C[C.MARGIN=5]="MARGIN",C[C.PDF417_COMPACT=6]="PDF417_COMPACT",C[C.PDF417_COMPACTION=7]="PDF417_COMPACTION",C[C.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",C[C.AZTEC_LAYERS=9]="AZTEC_LAYERS",C[C.QR_VERSION=10]="QR_VERSION"})(pc||(pc={}));var jt=pc;class xc{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new Ne(n,Int32Array.from([1])))}buildGenerator(n){const i=this.cachedGenerators;if(n>=i.length){let o=i[i.length-1];const c=this.field;for(let u=i.length;u<=n;u++){const d=o.multiply(new Ne(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));i.push(d),o=d}}return i[n]}encode(n,i){if(i===0)throw new E("No error correction bytes");const o=n.length-i;if(o<=0)throw new E("No data bytes provided");const c=this.buildGenerator(i),u=new Int32Array(o);j.arraycopy(n,0,u,0,o);let d=new Ne(this.field,u);d=d.multiplyByMonomial(i,1);const x=d.divide(c)[1].getCoefficients(),w=i-x.length;for(let b=0;b<w;b++)n[o+b]=0;j.arraycopy(x,0,n,o+w,x.length)}}class At{constructor(){}static applyMaskPenaltyRule1(n){return At.applyMaskPenaltyRule1Internal(n,!0)+At.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let i=0;const o=n.getArray(),c=n.getWidth(),u=n.getHeight();for(let d=0;d<u-1;d++){const f=o[d];for(let x=0;x<c-1;x++){const w=f[x];w===f[x+1]&&w===o[d+1][x]&&w===o[d+1][x+1]&&i++}}return At.N2*i}static applyMaskPenaltyRule3(n){let i=0;const o=n.getArray(),c=n.getWidth(),u=n.getHeight();for(let d=0;d<u;d++)for(let f=0;f<c;f++){const x=o[d];f+6<c&&x[f]===1&&x[f+1]===0&&x[f+2]===1&&x[f+3]===1&&x[f+4]===1&&x[f+5]===0&&x[f+6]===1&&(At.isWhiteHorizontal(x,f-4,f)||At.isWhiteHorizontal(x,f+7,f+11))&&i++,d+6<u&&o[d][f]===1&&o[d+1][f]===0&&o[d+2][f]===1&&o[d+3][f]===1&&o[d+4][f]===1&&o[d+5][f]===0&&o[d+6][f]===1&&(At.isWhiteVertical(o,f,d-4,d)||At.isWhiteVertical(o,f,d+7,d+11))&&i++}return i*At.N3}static isWhiteHorizontal(n,i,o){i=Math.max(i,0),o=Math.min(o,n.length);for(let c=i;c<o;c++)if(n[c]===1)return!1;return!0}static isWhiteVertical(n,i,o,c){o=Math.max(o,0),c=Math.min(c,n.length);for(let u=o;u<c;u++)if(n[u][i]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let i=0;const o=n.getArray(),c=n.getWidth(),u=n.getHeight();for(let x=0;x<u;x++){const w=o[x];for(let b=0;b<c;b++)w[b]===1&&i++}const d=n.getHeight()*n.getWidth();return Math.floor(Math.abs(i*2-d)*10/d)*At.N4}static getDataMaskBit(n,i,o){let c,u;switch(n){case 0:c=o+i&1;break;case 1:c=o&1;break;case 2:c=i%3;break;case 3:c=(o+i)%3;break;case 4:c=Math.floor(o/2)+Math.floor(i/3)&1;break;case 5:u=o*i,c=(u&1)+u%3;break;case 6:u=o*i,c=(u&1)+u%3&1;break;case 7:u=o*i,c=u%3+(o+i&1)&1;break;default:throw new E("Invalid mask pattern: "+n)}return c===0}static applyMaskPenaltyRule1Internal(n,i){let o=0;const c=i?n.getHeight():n.getWidth(),u=i?n.getWidth():n.getHeight(),d=n.getArray();for(let f=0;f<c;f++){let x=0,w=-1;for(let b=0;b<u;b++){const S=i?d[f][b]:d[b][f];S===w?x++:(x>=5&&(o+=At.N1+(x-5)),x=1,w=S)}x>=5&&(o+=At.N1+(x-5))}return o}}At.N1=3,At.N2=3,At.N3=40,At.N4=10;class ha{constructor(n,i){this.width=n,this.height=i;const o=new Array(i);for(let c=0;c!==i;c++)o[c]=new Uint8Array(n);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(n,i){return this.bytes[i][n]}getArray(){return this.bytes}setNumber(n,i,o){this.bytes[i][n]=o}setBoolean(n,i,o){this.bytes[i][n]=o?1:0}clear(n){for(const i of this.bytes)N.fill(i,n)}equals(n){if(!(n instanceof ha))return!1;const i=n;if(this.width!==i.width||this.height!==i.height)return!1;for(let o=0,c=this.height;o<c;++o){const u=this.bytes[o],d=i.bytes[o];for(let f=0,x=this.width;f<x;++f)if(u[f]!==d[f])return!1}return!0}toString(){const n=new se;for(let i=0,o=this.height;i<o;++i){const c=this.bytes[i];for(let u=0,d=this.width;u<d;++u)switch(c[u]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class _i{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new se;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<_i.NUM_MASK_PATTERNS}}_i.NUM_MASK_PATTERNS=8;class it extends g{}it.kind="WriterException";class Te{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,i,o,c,u){Te.clearMatrix(u),Te.embedBasicPatterns(o,u),Te.embedTypeInfo(i,c,u),Te.maybeEmbedVersionInfo(o,u),Te.embedDataBits(n,c,u)}static embedBasicPatterns(n,i){Te.embedPositionDetectionPatternsAndSeparators(i),Te.embedDarkDotAtLeftBottomCorner(i),Te.maybeEmbedPositionAdjustmentPatterns(n,i),Te.embedTimingPatterns(i)}static embedTypeInfo(n,i,o){const c=new L;Te.makeTypeInfoBits(n,i,c);for(let u=0,d=c.getSize();u<d;++u){const f=c.get(c.getSize()-1-u),x=Te.TYPE_INFO_COORDINATES[u],w=x[0],b=x[1];if(o.setBoolean(w,b,f),u<8){const S=o.getWidth()-u-1;o.setBoolean(S,8,f)}else{const R=o.getHeight()-7+(u-8);o.setBoolean(8,R,f)}}}static maybeEmbedVersionInfo(n,i){if(n.getVersionNumber()<7)return;const o=new L;Te.makeVersionInfoBits(n,o);let c=6*3-1;for(let u=0;u<6;++u)for(let d=0;d<3;++d){const f=o.get(c);c--,i.setBoolean(u,i.getHeight()-11+d,f),i.setBoolean(i.getHeight()-11+d,u,f)}}static embedDataBits(n,i,o){let c=0,u=-1,d=o.getWidth()-1,f=o.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);f>=0&&f<o.getHeight();){for(let x=0;x<2;++x){const w=d-x;if(!Te.isEmpty(o.get(w,f)))continue;let b;c<n.getSize()?(b=n.get(c),++c):b=!1,i!==255&&At.getDataMaskBit(i,w,f)&&(b=!b),o.setBoolean(w,f,b)}f+=u}u=-u,f+=u,d-=2}if(c!==n.getSize())throw new it("Not all bits consumed: "+c+"/"+n.getSize())}static findMSBSet(n){return 32-I.numberOfLeadingZeros(n)}static calculateBCHCode(n,i){if(i===0)throw new E("0 polynomial");const o=Te.findMSBSet(i);for(n<<=o-1;Te.findMSBSet(n)>=o;)n^=i<<Te.findMSBSet(n)-o;return n}static makeTypeInfoBits(n,i,o){if(!_i.isValidMaskPattern(i))throw new it("Invalid mask pattern");const c=n.getBits()<<3|i;o.appendBits(c,5);const u=Te.calculateBCHCode(c,Te.TYPE_INFO_POLY);o.appendBits(u,10);const d=new L;if(d.appendBits(Te.TYPE_INFO_MASK_PATTERN,15),o.xor(d),o.getSize()!==15)throw new it("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(n,i){i.appendBits(n.getVersionNumber(),6);const o=Te.calculateBCHCode(n.getVersionNumber(),Te.VERSION_INFO_POLY);if(i.appendBits(o,12),i.getSize()!==18)throw new it("should not happen but we got: "+i.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let i=8;i<n.getWidth()-8;++i){const o=(i+1)%2;Te.isEmpty(n.get(i,6))&&n.setNumber(i,6,o),Te.isEmpty(n.get(6,i))&&n.setNumber(6,i,o)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new it;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,i,o){for(let c=0;c<8;++c){if(!Te.isEmpty(o.get(n+c,i)))throw new it;o.setNumber(n+c,i,0)}}static embedVerticalSeparationPattern(n,i,o){for(let c=0;c<7;++c){if(!Te.isEmpty(o.get(n,i+c)))throw new it;o.setNumber(n,i+c,0)}}static embedPositionAdjustmentPattern(n,i,o){for(let c=0;c<5;++c){const u=Te.POSITION_ADJUSTMENT_PATTERN[c];for(let d=0;d<5;++d)o.setNumber(n+d,i+c,u[d])}}static embedPositionDetectionPattern(n,i,o){for(let c=0;c<7;++c){const u=Te.POSITION_DETECTION_PATTERN[c];for(let d=0;d<7;++d)o.setNumber(n+d,i+c,u[d])}}static embedPositionDetectionPatternsAndSeparators(n){const i=Te.POSITION_DETECTION_PATTERN[0].length;Te.embedPositionDetectionPattern(0,0,n),Te.embedPositionDetectionPattern(n.getWidth()-i,0,n),Te.embedPositionDetectionPattern(0,n.getWidth()-i,n);const o=8;Te.embedHorizontalSeparationPattern(0,o-1,n),Te.embedHorizontalSeparationPattern(n.getWidth()-o,o-1,n),Te.embedHorizontalSeparationPattern(0,n.getWidth()-o,n);const c=7;Te.embedVerticalSeparationPattern(c,0,n),Te.embedVerticalSeparationPattern(n.getHeight()-c-1,0,n),Te.embedVerticalSeparationPattern(c,n.getHeight()-c,n)}static maybeEmbedPositionAdjustmentPatterns(n,i){if(n.getVersionNumber()<2)return;const o=n.getVersionNumber()-1,c=Te.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let u=0,d=c.length;u!==d;u++){const f=c[u];if(f>=0)for(let x=0;x!==d;x++){const w=c[x];w>=0&&Te.isEmpty(i.get(w,f))&&Te.embedPositionAdjustmentPattern(w-2,f-2,i)}}}}Te.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Te.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Te.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Te.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Te.VERSION_INFO_POLY=7973,Te.TYPE_INFO_POLY=1335,Te.TYPE_INFO_MASK_PATTERN=21522;class sx{constructor(n,i){this.dataBytes=n,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class dt{constructor(){}static calculateMaskPenalty(n){return At.applyMaskPenaltyRule1(n)+At.applyMaskPenaltyRule2(n)+At.applyMaskPenaltyRule3(n)+At.applyMaskPenaltyRule4(n)}static encode(n,i,o=null){let c=dt.DEFAULT_BYTE_MODE_ENCODING;const u=o!==null&&o.get(jt.CHARACTER_SET)!==void 0;u&&(c=o.get(jt.CHARACTER_SET).toString());const d=this.chooseMode(n,c),f=new L;if(d===Ie.BYTE&&(u||dt.DEFAULT_BYTE_MODE_ENCODING!==c)){const le=A.getCharacterSetECIByName(c);le!==void 0&&this.appendECI(le,f)}this.appendModeInfo(d,f);const x=new L;this.appendBytes(n,d,x,c);let w;if(o!==null&&o.get(jt.QR_VERSION)!==void 0){const le=Number.parseInt(o.get(jt.QR_VERSION).toString(),10);w=Ce.getVersionForNumber(le);const ie=this.calculateBitsNeeded(d,f,x,w);if(!this.willFit(ie,w,i))throw new it("Data too big for requested version")}else w=this.recommendVersion(i,d,f,x);const b=new L;b.appendBitArray(f);const S=d===Ie.BYTE?x.getSizeInBytes():n.length;this.appendLengthInfo(S,w,d,b),b.appendBitArray(x);const R=w.getECBlocksForLevel(i),M=w.getTotalCodewords()-R.getTotalECCodewords();this.terminateBits(M,b);const z=this.interleaveWithECBytes(b,w.getTotalCodewords(),M,R.getNumBlocks()),V=new _i;V.setECLevel(i),V.setMode(d),V.setVersion(w);const $=w.getDimensionForVersion(),Z=new ha($,$),ae=this.chooseMaskPattern(z,i,w,Z);return V.setMaskPattern(ae),Te.buildMatrix(z,i,w,ae,Z),V.setMatrix(Z),V}static recommendVersion(n,i,o,c){const u=this.calculateBitsNeeded(i,o,c,Ce.getVersionForNumber(1)),d=this.chooseVersion(u,n),f=this.calculateBitsNeeded(i,o,c,d);return this.chooseVersion(f,n)}static calculateBitsNeeded(n,i,o,c){return i.getSize()+n.getCharacterCountBits(c)+o.getSize()}static getAlphanumericCode(n){return n<dt.ALPHANUMERIC_TABLE.length?dt.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,i=null){if(A.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(n))return Ie.KANJI;let o=!1,c=!1;for(let u=0,d=n.length;u<d;++u){const f=n.charAt(u);if(dt.isDigit(f))o=!0;else if(this.getAlphanumericCode(f.charCodeAt(0))!==-1)c=!0;else return Ie.BYTE}return c?Ie.ALPHANUMERIC:o?Ie.NUMERIC:Ie.BYTE}static isOnlyDoubleByteKanji(n){let i;try{i=J.encode(n,A.SJIS)}catch{return!1}const o=i.length;if(o%2!==0)return!1;for(let c=0;c<o;c+=2){const u=i[c]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(n,i,o,c){let u=Number.MAX_SAFE_INTEGER,d=-1;for(let f=0;f<_i.NUM_MASK_PATTERNS;f++){Te.buildMatrix(n,i,o,f,c);let x=this.calculateMaskPenalty(c);x<u&&(u=x,d=f)}return d}static chooseVersion(n,i){for(let o=1;o<=40;o++){const c=Ce.getVersionForNumber(o);if(dt.willFit(n,c,i))return c}throw new it("Data too big")}static willFit(n,i,o){const c=i.getTotalCodewords(),d=i.getECBlocksForLevel(o).getTotalECCodewords(),f=c-d,x=(n+7)/8;return f>=x}static terminateBits(n,i){const o=n*8;if(i.getSize()>o)throw new it("data bits cannot fit in the QR Code"+i.getSize()+" > "+o);for(let d=0;d<4&&i.getSize()<o;++d)i.appendBit(!1);const c=i.getSize()&7;if(c>0)for(let d=c;d<8;d++)i.appendBit(!1);const u=n-i.getSizeInBytes();for(let d=0;d<u;++d)i.appendBits(d&1?17:236,8);if(i.getSize()!==o)throw new it("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,i,o,c,u,d){if(c>=o)throw new it("Block ID too large");const f=n%o,x=o-f,w=Math.floor(n/o),b=w+1,S=Math.floor(i/o),R=S+1,M=w-S,z=b-R;if(M!==z)throw new it("EC bytes mismatch");if(o!==x+f)throw new it("RS blocks mismatch");if(n!==(S+M)*x+(R+z)*f)throw new it("Total bytes mismatch");c<x?(u[0]=S,d[0]=M):(u[0]=R,d[0]=z)}static interleaveWithECBytes(n,i,o,c){if(n.getSizeInBytes()!==o)throw new it("Number of bits and data bytes does not match");let u=0,d=0,f=0;const x=new Array;for(let b=0;b<c;++b){const S=new Int32Array(1),R=new Int32Array(1);dt.getNumDataBytesAndNumECBytesForBlockID(i,o,c,b,S,R);const M=S[0],z=new Uint8Array(M);n.toBytes(8*u,z,0,M);const V=dt.generateECBytes(z,R[0]);x.push(new sx(z,V)),d=Math.max(d,M),f=Math.max(f,V.length),u+=S[0]}if(o!==u)throw new it("Data bytes does not match offset");const w=new L;for(let b=0;b<d;++b)for(const S of x){const R=S.getDataBytes();b<R.length&&w.appendBits(R[b],8)}for(let b=0;b<f;++b)for(const S of x){const R=S.getErrorCorrectionBytes();b<R.length&&w.appendBits(R[b],8)}if(i!==w.getSizeInBytes())throw new it("Interleaving error: "+i+" and "+w.getSizeInBytes()+" differ.");return w}static generateECBytes(n,i){const o=n.length,c=new Int32Array(o+i);for(let d=0;d<o;d++)c[d]=n[d]&255;new xc(Re.QR_CODE_FIELD_256).encode(c,i);const u=new Uint8Array(i);for(let d=0;d<i;d++)u[d]=c[o+d];return u}static appendModeInfo(n,i){i.appendBits(n.getBits(),4)}static appendLengthInfo(n,i,o,c){const u=o.getCharacterCountBits(i);if(n>=1<<u)throw new it(n+" is bigger than "+((1<<u)-1));c.appendBits(n,u)}static appendBytes(n,i,o,c){switch(i){case Ie.NUMERIC:dt.appendNumericBytes(n,o);break;case Ie.ALPHANUMERIC:dt.appendAlphanumericBytes(n,o);break;case Ie.BYTE:dt.append8BitBytes(n,o,c);break;case Ie.KANJI:dt.appendKanjiBytes(n,o);break;default:throw new it("Invalid mode: "+i)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const i=dt.getDigit(n);return i>=0&&i<=9}static appendNumericBytes(n,i){const o=n.length;let c=0;for(;c<o;){const u=dt.getDigit(n.charAt(c));if(c+2<o){const d=dt.getDigit(n.charAt(c+1)),f=dt.getDigit(n.charAt(c+2));i.appendBits(u*100+d*10+f,10),c+=3}else if(c+1<o){const d=dt.getDigit(n.charAt(c+1));i.appendBits(u*10+d,7),c+=2}else i.appendBits(u,4),c++}}static appendAlphanumericBytes(n,i){const o=n.length;let c=0;for(;c<o;){const u=dt.getAlphanumericCode(n.charCodeAt(c));if(u===-1)throw new it;if(c+1<o){const d=dt.getAlphanumericCode(n.charCodeAt(c+1));if(d===-1)throw new it;i.appendBits(u*45+d,11),c+=2}else i.appendBits(u,6),c++}}static append8BitBytes(n,i,o){let c;try{c=J.encode(n,o)}catch(u){throw new it(u)}for(let u=0,d=c.length;u!==d;u++){const f=c[u];i.appendBits(f,8)}}static appendKanjiBytes(n,i){let o;try{o=J.encode(n,A.SJIS)}catch(u){throw new it(u)}const c=o.length;for(let u=0;u<c;u+=2){const d=o[u]&255,f=o[u+1]&255,x=d<<8&4294967295|f;let w=-1;if(x>=33088&&x<=40956?w=x-33088:x>=57408&&x<=60351&&(w=x-49472),w===-1)throw new it("Invalid byte sequence");const b=(w>>8)*192+(w&255);i.appendBits(b,13)}}static appendECI(n,i){i.appendBits(Ie.ECI.getBits(),4),i.appendBits(n.getValue(),8)}}dt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),dt.DEFAULT_BYTE_MODE_ENCODING=A.UTF8.getName();class Ci{write(n,i,o,c=null){if(n.length===0)throw new E("Found empty contents");if(i<0||o<0)throw new E("Requested dimensions are too small: "+i+"x"+o);let u=lt.L,d=Ci.QUIET_ZONE_SIZE;c!==null&&(c.get(jt.ERROR_CORRECTION)!==void 0&&(u=lt.fromString(c.get(jt.ERROR_CORRECTION).toString())),c.get(jt.MARGIN)!==void 0&&(d=Number.parseInt(c.get(jt.MARGIN).toString(),10)));const f=dt.encode(n,u,c);return this.renderResult(f,i,o,d)}writeToDom(n,i,o,c,u=null){typeof n=="string"&&(n=document.querySelector(n));const d=this.write(i,o,c,u);n&&n.appendChild(d)}renderResult(n,i,o,c){const u=n.getMatrix();if(u===null)throw new Be;const d=u.getWidth(),f=u.getHeight(),x=d+c*2,w=f+c*2,b=Math.max(i,x),S=Math.max(o,w),R=Math.min(Math.floor(b/x),Math.floor(S/w)),M=Math.floor((b-d*R)/2),z=Math.floor((S-f*R)/2),V=this.createSVGElement(b,S);for(let $=0,Z=z;$<f;$++,Z+=R)for(let ae=0,le=M;ae<d;ae++,le+=R)if(u.get(ae,$)===1){const ie=this.createSvgRectElement(le,Z,R,R);V.appendChild(ie)}return V}createSVGElement(n,i){const o=document.createElementNS(Ci.SVG_NS,"svg");return o.setAttributeNS(null,"height",n.toString()),o.setAttributeNS(null,"width",i.toString()),o}createSvgRectElement(n,i,o,c){const u=document.createElementNS(Ci.SVG_NS,"rect");return u.setAttributeNS(null,"x",n.toString()),u.setAttributeNS(null,"y",i.toString()),u.setAttributeNS(null,"height",o.toString()),u.setAttributeNS(null,"width",c.toString()),u.setAttributeNS(null,"fill","#000000"),u}}Ci.QUIET_ZONE_SIZE=4,Ci.SVG_NS="http://www.w3.org/2000/svg";class Ji{encode(n,i,o,c,u){if(n.length===0)throw new E("Found empty contents");if(i!==de.QR_CODE)throw new E("Can only encode QR_CODE, but got "+i);if(o<0||c<0)throw new E(`Requested dimensions are too small: ${o}x${c}`);let d=lt.L,f=Ji.QUIET_ZONE_SIZE;u!==null&&(u.get(jt.ERROR_CORRECTION)!==void 0&&(d=lt.fromString(u.get(jt.ERROR_CORRECTION).toString())),u.get(jt.MARGIN)!==void 0&&(f=Number.parseInt(u.get(jt.MARGIN).toString(),10)));const x=dt.encode(n,d,u);return Ji.renderResult(x,o,c,f)}static renderResult(n,i,o,c){const u=n.getMatrix();if(u===null)throw new Be;const d=u.getWidth(),f=u.getHeight(),x=d+c*2,w=f+c*2,b=Math.max(i,x),S=Math.max(o,w),R=Math.min(Math.floor(b/x),Math.floor(S/w)),M=Math.floor((b-d*R)/2),z=Math.floor((S-f*R)/2),V=new xe(b,S);for(let $=0,Z=z;$<f;$++,Z+=R)for(let ae=0,le=M;ae<d;ae++,le+=R)u.get(ae,$)===1&&V.setRegion(le,Z,R,R);return V}}Ji.QUIET_ZONE_SIZE=4;class ox{encode(n,i,o,c,u){let d;switch(i){case de.QR_CODE:d=new Ji;break;default:throw new E("No encoder available for format "+i)}return d.encode(n,i,o,c,u)}}class fn extends ee{constructor(n,i,o,c,u,d,f,x){if(super(d,f),this.yuvData=n,this.dataWidth=i,this.dataHeight=o,this.left=c,this.top=u,c+d>i||u+f>o)throw new E("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(d,f)}getRow(n,i){if(n<0||n>=this.getHeight())throw new E("Requested row is outside the image: "+n);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const c=(n+this.top)*this.dataWidth+this.left;return j.arraycopy(this.yuvData,c,i,0,o),i}getMatrix(){const n=this.getWidth(),i=this.getHeight();if(n===this.dataWidth&&i===this.dataHeight)return this.yuvData;const o=n*i,c=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return j.arraycopy(this.yuvData,u,c,0,o),c;for(let d=0;d<i;d++){const f=d*n;j.arraycopy(this.yuvData,u,c,f,n),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(n,i,o,c){return new fn(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+i,o,c,!1)}renderThumbnail(){const n=this.getWidth()/fn.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/fn.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(n*i),c=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let d=0;d<i;d++){const f=d*n;for(let x=0;x<n;x++){const w=c[u+x*fn.THUMBNAIL_SCALE_FACTOR]&255;o[f+x]=4278190080|w*65793}u+=this.dataWidth*fn.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/fn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/fn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,i){const o=this.yuvData;for(let c=0,u=this.top*this.dataWidth+this.left;c<i;c++,u+=this.dataWidth){const d=u+n/2;for(let f=u,x=u+n-1;f<d;f++,x--){const w=o[f];o[f]=o[x],o[x]=w}}}invert(){return new re(this)}}fn.THUMBNAIL_SCALE_FACTOR=2;class wc extends ee{constructor(n,i,o,c,u,d,f){if(super(i,o),this.dataWidth=c,this.dataHeight=u,this.left=d,this.top=f,n.BYTES_PER_ELEMENT===4){const x=i*o,w=new Uint8ClampedArray(x);for(let b=0;b<x;b++){const S=n[b],R=S>>16&255,M=S>>7&510,z=S&255;w[b]=(R+M+z)/4&255}this.luminances=w}else this.luminances=n;if(c===void 0&&(this.dataWidth=i),u===void 0&&(this.dataHeight=o),d===void 0&&(this.left=0),f===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+o>this.dataHeight)throw new E("Crop rectangle does not fit within image data.")}getRow(n,i){if(n<0||n>=this.getHeight())throw new E("Requested row is outside the image: "+n);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const c=(n+this.top)*this.dataWidth+this.left;return j.arraycopy(this.luminances,c,i,0,o),i}getMatrix(){const n=this.getWidth(),i=this.getHeight();if(n===this.dataWidth&&i===this.dataHeight)return this.luminances;const o=n*i,c=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return j.arraycopy(this.luminances,u,c,0,o),c;for(let d=0;d<i;d++){const f=d*n;j.arraycopy(this.luminances,u,c,f,n),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(n,i,o,c){return new wc(this.luminances,o,c,this.dataWidth,this.dataHeight,this.left+n,this.top+i)}invert(){return new re(this)}}class Vh extends A{static forName(n){return this.getCharacterSetECIByName(n)}}class yc{}yc.ISO_8859_1=A.ISO8859_1;class Wh{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class Hh{static singletonList(n){return[n]}static min(n,i){return n.sort(i)[0]}}class ax{constructor(n){this.previous=n}getPrevious(){return this.previous}}class es extends ax{constructor(n,i,o){super(n),this.value=i,this.bitCount=o}appendTo(n,i){n.appendBits(this.value,this.bitCount)}add(n,i){return new es(this,n,i)}addBinaryShift(n,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new es(this,n,i)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+I.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class vc extends es{constructor(n,i,o){super(n,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=o}appendTo(n,i){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):o===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(i[this.binaryShiftStart+o],8)}addBinaryShift(n,i){return new vc(this,n,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function lx(C,n,i){return new vc(C,n,i)}function no(C,n,i){return new es(C,n,i)}const cx=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Hn=0,fa=1,Ur=2,Gh=3,gn=4,ux=new es(null,0,0),Ec=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function dx(C){for(let n of C)N.fill(n,-1);return C[Hn][gn]=0,C[fa][gn]=0,C[fa][Hn]=28,C[Gh][gn]=0,C[Ur][gn]=0,C[Ur][Hn]=15,C}const $h=dx(N.createInt32Array(6,6));class mn{constructor(n,i,o,c){this.token=n,this.mode=i,this.binaryShiftByteCount=o,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,i){let o=this.bitCount,c=this.token;if(n!==this.mode){let d=Ec[this.mode][n];c=no(c,d&65535,d>>16),o+=d>>16}let u=n===Ur?4:5;return c=no(c,i,u),new mn(c,n,0,o+u)}shiftAndAppend(n,i){let o=this.token,c=this.mode===Ur?4:5;return o=no(o,$h[this.mode][n],c),o=no(o,i,5),new mn(o,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(n){let i=this.token,o=this.mode,c=this.bitCount;if(this.mode===gn||this.mode===Ur){let f=Ec[o][Hn];i=no(i,f&65535,f>>16),c+=f>>16,o=Hn}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new mn(i,o,this.binaryShiftByteCount+1,c+u);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(n+1)),d}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=lx(i,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new mn(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let i=this.bitCount+(Ec[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?i+=mn.calculateBinaryShiftCost(n)-mn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(i+=10),i<=n.bitCount}toBitArray(n){let i=[];for(let c=this.endBinaryShift(n.length).token;c!==null;c=c.getPrevious())i.unshift(c);let o=new L;for(const c of i)c.appendTo(o,n);return o}toString(){return X.format("%s bits=%d bytes=%d",cx[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}mn.INITIAL_STATE=new mn(ux,Hn,0,0);function hx(C){const n=X.getCharCode(" "),i=X.getCharCode("."),o=X.getCharCode(",");C[Hn][n]=1;const c=X.getCharCode("Z"),u=X.getCharCode("A");for(let R=u;R<=c;R++)C[Hn][R]=R-u+2;C[fa][n]=1;const d=X.getCharCode("z"),f=X.getCharCode("a");for(let R=f;R<=d;R++)C[fa][R]=R-f+2;C[Ur][n]=1;const x=X.getCharCode("9"),w=X.getCharCode("0");for(let R=w;R<=x;R++)C[Ur][R]=R-w+2;C[Ur][o]=12,C[Ur][i]=13;const b=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let R=0;R<b.length;R++)C[Gh][X.getCharCode(b[R])]=R;const S=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let R=0;R<S.length;R++)X.getCharCode(S[R])>0&&(C[gn][X.getCharCode(S[R])]=R);return C}const bc=hx(N.createInt32Array(5,256));class io{constructor(n){this.text=n}encode(){const n=X.getCharCode(" "),i=X.getCharCode(`
`);let o=Hh.singletonList(mn.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let d,f=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case X.getCharCode("\r"):d=f===i?2:0;break;case X.getCharCode("."):d=f===n?3:0;break;case X.getCharCode(","):d=f===n?4:0;break;case X.getCharCode(":"):d=f===n?5:0;break;default:d=0}d>0?(o=io.updateStateListForPair(o,u,d),u++):o=this.updateStateListForChar(o,u)}return Hh.min(o,(u,d)=>u.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,i){const o=[];for(let c of n)this.updateStateForChar(c,i,o);return io.simplifyStates(o)}updateStateForChar(n,i,o){let c=this.text[i]&255,u=bc[n.getMode()][c]>0,d=null;for(let f=0;f<=gn;f++){let x=bc[f][c];if(x>0){if(d==null&&(d=n.endBinaryShift(i)),!u||f===n.getMode()||f===Ur){const w=d.latchAndAppend(f,x);o.push(w)}if(!u&&$h[n.getMode()][f]>=0){const w=d.shiftAndAppend(f,x);o.push(w)}}}if(n.getBinaryShiftByteCount()>0||bc[n.getMode()][c]===0){let f=n.addBinaryShiftChar(i);o.push(f)}}static updateStateListForPair(n,i,o){const c=[];for(let u of n)this.updateStateForPair(u,i,o,c);return this.simplifyStates(c)}static updateStateForPair(n,i,o,c){let u=n.endBinaryShift(i);if(c.push(u.latchAndAppend(gn,o)),n.getMode()!==gn&&c.push(u.shiftAndAppend(gn,o)),o===3||o===4){let d=u.latchAndAppend(Ur,16-o).latchAndAppend(Ur,1);c.push(d)}if(n.getBinaryShiftByteCount()>0){let d=n.addBinaryShiftChar(i).addBinaryShiftChar(i+1);c.push(d)}}static simplifyStates(n){let i=[];for(const o of n){let c=!0;for(const u of i){if(u.isBetterThanOrEqualTo(o)){c=!1;break}o.isBetterThanOrEqualTo(u)&&(i=i.filter(d=>d!==u))}c&&i.push(o)}return i}}class Ge{constructor(){}static encodeBytes(n){return Ge.encode(n,Ge.DEFAULT_EC_PERCENT,Ge.DEFAULT_AZTEC_LAYERS)}static encode(n,i,o){let c=new io(n).encode(),u=I.truncDivision(c.getSize()*i,100)+11,d=c.getSize()+u,f,x,w,b,S;if(o!==Ge.DEFAULT_AZTEC_LAYERS){if(f=o<0,x=Math.abs(o),x>(f?Ge.MAX_NB_BITS_COMPACT:Ge.MAX_NB_BITS))throw new E(X.format("Illegal value %s for layers",o));w=Ge.totalBitsInLayer(x,f),b=Ge.WORD_SIZE[x];let ie=w-w%b;if(S=Ge.stuffBits(c,b),S.getSize()+u>ie)throw new E("Data to large for user specified layer");if(f&&S.getSize()>b*64)throw new E("Data to large for user specified layer")}else{b=0,S=null;for(let ie=0;;ie++){if(ie>Ge.MAX_NB_BITS)throw new E("Data too large for an Aztec code");if(f=ie<=3,x=f?ie+1:ie,w=Ge.totalBitsInLayer(x,f),d>w)continue;(S==null||b!==Ge.WORD_SIZE[x])&&(b=Ge.WORD_SIZE[x],S=Ge.stuffBits(c,b));let Ve=w-w%b;if(!(f&&S.getSize()>b*64)&&S.getSize()+u<=Ve)break}}let R=Ge.generateCheckWords(S,w,b),M=S.getSize()/b,z=Ge.generateModeMessage(f,x,M),V=(f?11:14)+x*4,$=new Int32Array(V),Z;if(f){Z=V;for(let ie=0;ie<$.length;ie++)$[ie]=ie}else{Z=V+1+2*I.truncDivision(I.truncDivision(V,2)-1,15);let ie=I.truncDivision(V,2),Ve=I.truncDivision(Z,2);for(let Me=0;Me<ie;Me++){let yr=Me+I.truncDivision(Me,15);$[ie-Me-1]=Ve-yr-1,$[ie+Me]=Ve+yr+1}}let ae=new xe(Z);for(let ie=0,Ve=0;ie<x;ie++){let Me=(x-ie)*4+(f?9:12);for(let yr=0;yr<Me;yr++){let Yr=yr*2;for(let vr=0;vr<2;vr++)R.get(Ve+Yr+vr)&&ae.set($[ie*2+vr],$[ie*2+yr]),R.get(Ve+Me*2+Yr+vr)&&ae.set($[ie*2+yr],$[V-1-ie*2-vr]),R.get(Ve+Me*4+Yr+vr)&&ae.set($[V-1-ie*2-vr],$[V-1-ie*2-yr]),R.get(Ve+Me*6+Yr+vr)&&ae.set($[V-1-ie*2-yr],$[ie*2+vr])}Ve+=Me*8}if(Ge.drawModeMessage(ae,f,Z,z),f)Ge.drawBullsEye(ae,I.truncDivision(Z,2),5);else{Ge.drawBullsEye(ae,I.truncDivision(Z,2),7);for(let ie=0,Ve=0;ie<I.truncDivision(V,2)-1;ie+=15,Ve+=16)for(let Me=I.truncDivision(Z,2)&1;Me<Z;Me+=2)ae.set(I.truncDivision(Z,2)-Ve,Me),ae.set(I.truncDivision(Z,2)+Ve,Me),ae.set(Me,I.truncDivision(Z,2)-Ve),ae.set(Me,I.truncDivision(Z,2)+Ve)}let le=new Wh;return le.setCompact(f),le.setSize(Z),le.setLayers(x),le.setCodeWords(M),le.setMatrix(ae),le}static drawBullsEye(n,i,o){for(let c=0;c<o;c+=2)for(let u=i-c;u<=i+c;u++)n.set(u,i-c),n.set(u,i+c),n.set(i-c,u),n.set(i+c,u);n.set(i-o,i-o),n.set(i-o+1,i-o),n.set(i-o,i-o+1),n.set(i+o,i-o),n.set(i+o,i-o+1),n.set(i+o,i+o-1)}static generateModeMessage(n,i,o){let c=new L;return n?(c.appendBits(i-1,2),c.appendBits(o-1,6),c=Ge.generateCheckWords(c,28,4)):(c.appendBits(i-1,5),c.appendBits(o-1,11),c=Ge.generateCheckWords(c,40,4)),c}static drawModeMessage(n,i,o,c){let u=I.truncDivision(o,2);if(i)for(let d=0;d<7;d++){let f=u-3+d;c.get(d)&&n.set(f,u-5),c.get(d+7)&&n.set(u+5,f),c.get(20-d)&&n.set(f,u+5),c.get(27-d)&&n.set(u-5,f)}else for(let d=0;d<10;d++){let f=u-5+d+I.truncDivision(d,5);c.get(d)&&n.set(f,u-7),c.get(d+10)&&n.set(u+7,f),c.get(29-d)&&n.set(f,u+7),c.get(39-d)&&n.set(u-7,f)}}static generateCheckWords(n,i,o){let c=n.getSize()/o,u=new xc(Ge.getGF(o)),d=I.truncDivision(i,o),f=Ge.bitsToWords(n,o,d);u.encode(f,d-c);let x=i%o,w=new L;w.appendBits(0,x);for(const b of Array.from(f))w.appendBits(b,o);return w}static bitsToWords(n,i,o){let c=new Int32Array(o),u,d;for(u=0,d=n.getSize()/i;u<d;u++){let f=0;for(let x=0;x<i;x++)f|=n.get(u*i+x)?1<<i-x-1:0;c[u]=f}return c}static getGF(n){switch(n){case 4:return Re.AZTEC_PARAM;case 6:return Re.AZTEC_DATA_6;case 8:return Re.AZTEC_DATA_8;case 10:return Re.AZTEC_DATA_10;case 12:return Re.AZTEC_DATA_12;default:throw new E("Unsupported word size "+n)}}static stuffBits(n,i){let o=new L,c=n.getSize(),u=(1<<i)-2;for(let d=0;d<c;d+=i){let f=0;for(let x=0;x<i;x++)(d+x>=c||n.get(d+x))&&(f|=1<<i-1-x);(f&u)===u?(o.appendBits(f&u,i),d--):f&u?o.appendBits(f,i):(o.appendBits(f|1,i),d--)}return o}static totalBitsInLayer(n,i){return((i?88:112)+16*n)*n}}Ge.DEFAULT_EC_PERCENT=33,Ge.DEFAULT_AZTEC_LAYERS=0,Ge.MAX_NB_BITS=32,Ge.MAX_NB_BITS_COMPACT=4,Ge.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ga{encode(n,i,o,c){return this.encodeWithHints(n,i,o,c,null)}encodeWithHints(n,i,o,c,u){let d=yc.ISO_8859_1,f=Ge.DEFAULT_EC_PERCENT,x=Ge.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(jt.CHARACTER_SET)&&(d=Vh.forName(u.get(jt.CHARACTER_SET).toString())),u.has(jt.ERROR_CORRECTION)&&(f=I.parseInt(u.get(jt.ERROR_CORRECTION).toString())),u.has(jt.AZTEC_LAYERS)&&(x=I.parseInt(u.get(jt.AZTEC_LAYERS).toString()))),ga.encodeLayers(n,i,o,c,d,f,x)}static encodeLayers(n,i,o,c,u,d,f){if(i!==de.AZTEC)throw new E("Can only encode AZTEC, but got "+i);let x=Ge.encode(X.getBytes(n,u),d,f);return ga.renderResult(x,o,c)}static renderResult(n,i,o){let c=n.getMatrix();if(c==null)throw new Be;let u=c.getWidth(),d=c.getHeight(),f=Math.max(i,u),x=Math.max(o,d),w=Math.min(f/u,x/d),b=(f-u*w)/2,S=(x-d*w)/2,R=new xe(f,x);for(let M=0,z=S;M<d;M++,z+=w)for(let V=0,$=b;V<u;V++,$+=w)c.get(V,M)&&R.setRegion($,z,w,w);return R}}r.AbstractExpandedDecoder=ac,r.ArgumentException=v,r.ArithmeticException=Qe,r.AztecCode=Wh,r.AztecCodeReader=qr,r.AztecCodeWriter=ga,r.AztecDecoder=_e,r.AztecDetector=Ks,r.AztecDetectorResult=Bn,r.AztecEncoder=Ge,r.AztecHighLevelEncoder=io,r.AztecPoint=Dt,r.BarcodeFormat=de,r.Binarizer=O,r.BinaryBitmap=_,r.BitArray=L,r.BitMatrix=xe,r.BitSource=dc,r.BrowserAztecCodeReader=Lr,r.BrowserBarcodeReader=Wp,r.BrowserCodeReader=me,r.BrowserDatamatrixCodeReader=Gp,r.BrowserMultiFormatReader=rx,r.BrowserPDF417Reader=nx,r.BrowserQRCodeReader=ix,r.BrowserQRCodeSvgWriter=Ci,r.CharacterSetECI=A,r.ChecksumException=T,r.Code128Reader=ce,r.Code39Reader=Mt,r.DataMatrixDecodedBitStreamParser=Un,r.DataMatrixReader=zn,r.DecodeHintType=G,r.DecoderResult=Ue,r.DefaultGridSampler=Xt,r.DetectorResult=lr,r.EAN13Reader=yi,r.EncodeHintType=jt,r.Exception=g,r.FormatException=U,r.GenericGF=Re,r.GenericGFPoly=Ne,r.GlobalHistogramBinarizer=Q,r.GridSampler=mr,r.GridSamplerInstance=Vt,r.HTMLCanvasElementLuminanceSource=he,r.HybridBinarizer=te,r.ITFReader=nt,r.IllegalArgumentException=E,r.IllegalStateException=Be,r.InvertedLuminanceSource=re,r.LuminanceSource=ee,r.MathUtils=be,r.MultiFormatOneDReader=Zi,r.MultiFormatReader=zh,r.MultiFormatWriter=ox,r.NotFoundException=K,r.OneDReader=at,r.PDF417DecodedBitStreamParser=Y,r.PDF417DecoderErrorCorrection=Mh,r.PDF417Reader=Kt,r.PDF417ResultMetadata=jh,r.PerspectiveTransform=Ye,r.PlanarYUVLuminanceSource=fn,r.QRCodeByteMatrix=ha,r.QRCodeDataMask=Br,r.QRCodeDecodedBitStreamParser=wt,r.QRCodeDecoderErrorCorrectionLevel=lt,r.QRCodeDecoderFormatInformation=nr,r.QRCodeEncoder=dt,r.QRCodeEncoderQRCode=_i,r.QRCodeMaskUtil=At,r.QRCodeMatrixUtil=Te,r.QRCodeMode=Ie,r.QRCodeReader=Vn,r.QRCodeVersion=Ce,r.QRCodeWriter=Ji,r.RGBLuminanceSource=wc,r.RSS14Reader=Ct,r.RSSExpandedReader=ne,r.ReaderException=da,r.ReedSolomonDecoder=De,r.ReedSolomonEncoder=xc,r.ReedSolomonException=Xe,r.Result=Pe,r.ResultMetadataType=Se,r.ResultPoint=pe,r.StringUtils=X,r.UnsupportedOperationException=F,r.VideoInputDevice=fe,r.WhiteRectangleDetector=ot,r.WriterException=it,r.ZXingArrays=N,r.ZXingCharset=Vh,r.ZXingInteger=I,r.ZXingStandardCharsets=yc,r.ZXingStringBuilder=se,r.ZXingStringEncoding=J,r.ZXingSystem=j,r.createAbstractExpandedDecoder=Ph,Object.defineProperty(r,"__esModule",{value:!0})})})(wd,wd.exports);var ft=wd.exports;const Rb=vd(ft),Ob=yd({__proto__:null,default:Rb},[ft]);var $0=function(){function t(e,r,s){if(this.formatMap=new Map([[ye.QR_CODE,ft.BarcodeFormat.QR_CODE],[ye.AZTEC,ft.BarcodeFormat.AZTEC],[ye.CODABAR,ft.BarcodeFormat.CODABAR],[ye.CODE_39,ft.BarcodeFormat.CODE_39],[ye.CODE_93,ft.BarcodeFormat.CODE_93],[ye.CODE_128,ft.BarcodeFormat.CODE_128],[ye.DATA_MATRIX,ft.BarcodeFormat.DATA_MATRIX],[ye.MAXICODE,ft.BarcodeFormat.MAXICODE],[ye.ITF,ft.BarcodeFormat.ITF],[ye.EAN_13,ft.BarcodeFormat.EAN_13],[ye.EAN_8,ft.BarcodeFormat.EAN_8],[ye.PDF_417,ft.BarcodeFormat.PDF_417],[ye.RSS_14,ft.BarcodeFormat.RSS_14],[ye.RSS_EXPANDED,ft.BarcodeFormat.RSS_EXPANDED],[ye.UPC_A,ft.BarcodeFormat.UPC_A],[ye.UPC_E,ft.BarcodeFormat.UPC_E],[ye.UPC_EAN_EXTENSION,ft.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Ob)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=s;var a=this.createZXingFormats(e),l=new Map;l.set(ft.DecodeHintType.POSSIBLE_FORMATS,a),l.set(ft.DecodeHintType.TRY_HARDER,!1),this.hints=l}return t.prototype.decodeAsync=function(e){var r=this;return new Promise(function(s,a){try{s(r.decode(e))}catch(l){a(l)}})},t.prototype.decode=function(e){var r=new ft.MultiFormatReader(this.verbose,this.hints),s=new ft.HTMLCanvasElementLuminanceSource(e),a=new ft.BinaryBitmap(new ft.HybridBinarizer(s)),l=r.decode(a);return{text:l.text,format:Lp.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,s,a){e.set(r,s)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var r=[],s=0,a=e;s<a.length;s++){var l=a[s];this.formatMap.has(l)?r.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),kb=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function p(v){try{g(s.next(v))}catch(E){h(E)}}function m(v){try{g(s.throw(v))}catch(E){h(E)}}function g(v){v.done?l(v.value):a(v.value).then(p,m)}g((s=s.apply(t,e||[])).next())})},Pb=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(g){return function(v){return m([g,v])}}function m(g){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(s=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(v){g=[6,v],a=0}finally{s=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},X0=function(){function t(e,r,s){if(this.formatMap=new Map([[ye.QR_CODE,"qr_code"],[ye.AZTEC,"aztec"],[ye.CODABAR,"codabar"],[ye.CODE_39,"code_39"],[ye.CODE_93,"code_93"],[ye.CODE_128,"code_128"],[ye.DATA_MATRIX,"data_matrix"],[ye.ITF,"itf"],[ye.EAN_13,"ean_13"],[ye.EAN_8,"ean_8"],[ye.PDF_417,"pdf417"],[ye.UPC_A,"upc_a"],[ye.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=s;var a=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return kb(this,void 0,void 0,function(){var r,s;return Pb(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=a.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return s=this.selectLargestBarcode(r),[2,{text:s.rawValue,format:Lp.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var r=null,s=0,a=0,l=e;a<l.length;a++){var h=l[a],p=h.boundingBox.width*h.boundingBox.height;p>s&&(s=p,r=h)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],s=0,a=e;s<a.length;s++){var l=a[s];this.formatMap.has(l)?r.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,s,a){e.set(r,s)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),q0=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function p(v){try{g(s.next(v))}catch(E){h(E)}}function m(v){try{g(s.throw(v))}catch(E){h(E)}}function g(v){v.done?l(v.value):a(v.value).then(p,m)}g((s=s.apply(t,e||[])).next())})},K0=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(g){return function(v){return m([g,v])}}function m(g){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(s=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(v){g=[6,v],a=0}finally{s=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Db=function(){function t(e,r,s,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=s,r&&X0.isSupported()?(this.primaryDecoder=new X0(e,s,a),this.secondaryDecoder=new $0(e,s,a)):this.primaryDecoder=new $0(e,s,a)}return t.prototype.decodeAsync=function(e){return q0(this,void 0,void 0,function(){var r;return K0(this,function(s){switch(s.label){case 0:r=performance.now(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,s.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return q0(this,void 0,void 0,function(){var r,s;return K0(this,function(a){switch(a.label){case 0:r=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,a.sent()];case 3:if(s=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw s;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,s=this.executionResults;r<s.length;r++){var a=s[r];e+=a}var l=e/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Th=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function s(){this.constructor=e}e.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),Ml=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function p(v){try{g(s.next(v))}catch(E){h(E)}}function m(v){try{g(s.throw(v))}catch(E){h(E)}}function g(v){v.done?l(v.value):a(v.value).then(p,m)}g((s=s.apply(t,e||[])).next())})},Ll=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(g){return function(v){return m([g,v])}}function m(g){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(s=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(v){g=[6,v],a=0}finally{s=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Bp=function(){function t(e,r){this.name=e,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var r={};r[this.name]=e;var s={advanced:[r]};return this.track.applyConstraints(s)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},t}(),Mb=function(t){Th(e,t);function e(r,s){return t.call(this,r,s)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var s={};s[this.name]=r;var a={advanced:[s]};return this.track.applyConstraints(a)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),s=r[this.name];return{min:s.min,max:s.max,step:s.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(Bp),Lb=function(t){Th(e,t);function e(r){return t.call(this,"zoom",r)||this}return e}(Mb),jb=function(t){Th(e,t);function e(r){return t.call(this,"torch",r)||this}return e}(Bp),Bb=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new Lb(this.track)},t.prototype.torchFeature=function(){return new jb(this.track)},t}(),Fb=function(){function t(e,r,s){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=s,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var s=e.surface.clientWidth,a=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(s,a),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,r,s,a){return Ml(this,void 0,void 0,function(){var l,h;return Ll(this,function(p){switch(p.label){case 0:return l=new t(e,r,a),s.aspectRatio?(h={aspectRatio:s.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(h)]):[3,2];case 1:p.sent(),p.label=2;case 2:return l.setupSurface(),[2,l]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var r=this,s=function(){setTimeout(e,200),r.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Ml(this,void 0,void 0,function(){return Ll(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,s){var a=e.mediaStream.getVideoTracks(),l=a.length,h=0;e.mediaStream.getVideoTracks().forEach(function(p){e.mediaStream.removeTrack(p),p.stop(),++h,h>=l&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},t.prototype.getCapabilities=function(){return new Bb(this.getFirstTrackOrFail())},t}(),Ub=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,r,s){return Ml(this,void 0,void 0,function(){return Ll(this,function(a){return[2,Fb.create(e,this.mediaStream,r,s)]})})},t.create=function(e){return Ml(this,void 0,void 0,function(){var r,s;return Ll(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return s=a.sent(),[2,new t(s)]}})})},t}(),Y0=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function p(v){try{g(s.next(v))}catch(E){h(E)}}function m(v){try{g(s.throw(v))}catch(E){h(E)}}function g(v){v.done?l(v.value):a(v.value).then(p,m)}g((s=s.apply(t,e||[])).next())})},Z0=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(g){return function(v){return m([g,v])}}function m(g){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(s=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(v){g=[6,v],a=0}finally{s=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},zb=function(){function t(){}return t.failIfNotSupported=function(){return Y0(this,void 0,void 0,function(){return Z0(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Y0(this,void 0,void 0,function(){return Z0(this,function(r){return[2,Ub.create(e)]})})},t}(),Vb=function(t,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function p(v){try{g(s.next(v))}catch(E){h(E)}}function m(v){try{g(s.throw(v))}catch(E){h(E)}}function g(v){v.done?l(v.value):a(v.value).then(p,m)}g((s=s.apply(t,e||[])).next())})},Wb=function(t,e){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(g){return function(v){return m([g,v])}}function m(g){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(r=0)),r;)try{if(s=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){r.label=g[1];break}if(g[0]===6&&r.label<l[1]){r.label=l[1],l=g;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(g);break}l[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(v){g=[6,v],a=0}finally{s=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Hb=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Cs.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Cs.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return Vb(this,void 0,void 0,function(){var e,r,s,a,l,h,p;return Wb(this,function(m){switch(m.label){case 0:return e=function(g){for(var v=g.getVideoTracks(),E=0,_=v;E<_.length;E++){var T=_[E];T.enabled=!1,T.stop(),g.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(s=m.sent(),a=[],l=0,h=s;l<h.length;l++)p=h[l],p.kind==="videoinput"&&a.push({id:p.deviceId,label:p.label});return e(r),[2,a]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var s=function(l){for(var h=[],p=0,m=l;p<m.length;p++){var g=m[p];g.kind==="video"&&h.push({id:g.id,label:g.label})}e(h)},a=MediaStreamTrack;a.getSources(s)})},t}(),St;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(St||(St={}));var Gb=function(){function t(){this.state=St.NOT_STARTED,this.onGoingTransactionNewState=St.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===St.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=St.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===St.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=St.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==St.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case St.UNKNOWN:throw"Transition from unknown is not allowed";case St.NOT_STARTED:this.failIfNewStateIs(e,[St.PAUSED]);break;case St.SCANNING:break;case St.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,r){for(var s=0,a=r;s<a.length;s++){var l=a[s];if(e===l)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),$b=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===St.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==St.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===St.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===St.PAUSED},t}(),Xb=function(){function t(){}return t.create=function(){return new $b(new Gb)},t}(),qb=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function s(){this.constructor=e}e.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),Ir=function(t){qb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Ib),Kb=function(){function t(e,r){this.logger=r,this.fps=Ir.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Ir.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?jp.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Cn(this.qrbox)},t.create=function(e,r){return new t(e,r)},t}(),Yb=function(){function t(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var s;typeof r=="boolean"?this.verbose=r===!0:r&&(s=r,this.verbose=s.verbose===!0,s.experimentalFeatures),this.logger=new Tb(this.verbose),this.qrcode=new Db(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Xb.create()}return t.prototype.start=function(e,r,s,a){var l=this;if(!e)throw"cameraIdOrConfig is required";if(!s||typeof s!="function")throw"qrCodeSuccessCallback is required and should be a function.";var h;a?h=a:h=this.verbose?this.logger.log:function(){};var p=Kb.create(r,this.logger);this.clearElement();var m=!1;p.videoConstraints&&(p.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var g=m,v=document.getElementById(this.elementId);v.clientWidth?v.clientWidth:Ir.DEFAULT_WIDTH,v.style.position="relative",this.shouldScan=!0,this.element=v;var E=this,_=this.stateManagerProxy.startTransition(St.SCANNING);return new Promise(function(T,O){var j=g?p.videoConstraints:E.createVideoConstraints(e);if(!j){_.cancel(),O("videoConstraints should be defined");return}var B={};(!g||p.aspectRatio)&&(B.aspectRatio=p.aspectRatio);var P={onRenderSurfaceReady:function(N,I){E.setupUi(N,I,p),E.isScanning=!0,E.foreverScan(p,s,h)}};zb.failIfNotSupported().then(function(N){N.create(j).then(function(I){return I.render(l.element,B,P).then(function(L){E.renderedCamera=L,_.execute(),T(null)}).catch(function(L){_.cancel(),O(L)})}).catch(function(I){_.cancel(),O(Cs.errorGettingUserMedia(I))})}).catch(function(N){_.cancel(),O(Cs.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(St.PAUSED),this.showPausedState(),(Cn(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(St.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(St.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=function(){if(e.element){var l=document.getElementById(Ir.SHADED_REGION_ELEMENT_ID);l&&e.element.removeChild(l)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),s(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),r.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(s){return s.decodedText})},t.prototype.scanFileV2=function(e,r){var s=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Cn(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,l){s.possiblyCloseLastScanImageFile(),s.clearElement(),s.lastScanImageFile=URL.createObjectURL(e);var h=new Image;h.onload=function(){var p=h.width,m=h.height,g=document.getElementById(s.elementId),v=g.clientWidth?g.clientWidth:Ir.DEFAULT_WIDTH,E=Math.max(g.clientHeight?g.clientHeight:m,Ir.FILE_SCAN_MIN_HEIGHT),_=s.computeCanvasDrawConfig(p,m,v,E);if(r){var T=s.createCanvasElement(v,E,"qr-canvas-visible");T.style.display="inline-block",g.appendChild(T);var O=T.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=v,O.canvas.height=E,O.drawImage(h,0,0,p,m,_.x,_.y,_.width,_.height)}var j=Ir.FILE_SCAN_HIDDEN_CANVAS_PADDING,B=Math.max(h.width,_.width),P=Math.max(h.height,_.height),N=B+2*j,I=P+2*j,L=s.createCanvasElement(N,I);g.appendChild(L);var W=L.getContext("2d");if(!W)throw"Unable to get 2d context from canvas";W.canvas.width=N,W.canvas.height=I,W.drawImage(h,0,0,p,m,j,j,B,P);try{s.qrcode.decodeRobustlyAsync(L).then(function(G){a(G0.createFromQrcodeResult(G))}).catch(l)}catch(G){l("QR code parse error, error = ".concat(G))}},h.onerror=l,h.onabort=l,h.onstalled=l,h.onsuspend=l,h.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return Hb.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!jp.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var r=[ye.QR_CODE,ye.AZTEC,ye.CODABAR,ye.CODE_39,ye.CODE_93,ye.CODE_128,ye.DATA_MATRIX,ye.MAXICODE,ye.ITF,ye.EAN_13,ye.EAN_8,ye.PDF_417,ye.RSS_14,ye.RSS_EXPANDED,ye.UPC_A,ye.UPC_E,ye.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var s=[],a=0,l=e.formatsToSupport;a<l.length;a++){var h=l[a];Sb(h)?s.push(h):this.logger.warn("Invalid format: ".concat(h," passed in config, ignoring."))}if(s.length===0)throw"None of formatsToSupport match supported values.";return s},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Cn(e))return!0;if(!Cn(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Cn(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return Cn(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,r,s){var a=this,l=s.qrbox;this.validateQrboxConfig(l);var h=this.toQrdimensions(e,r,l),p=function(g){if(g<Ir.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ir.MIN_QR_BOX_SIZE,"px.")},m=function(g){return g>e&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),g=e),g};p(h.width),p(h.height),h.width=m(h.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,r,s){if(typeof s=="number")return{width:s,height:s};if(typeof s=="function")try{return s(e,r)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return s},t.prototype.setupUi=function(e,r,s){s.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,s);var a=Cn(s.qrbox)?{width:e,height:r}:s.qrbox;this.validateQrboxConfig(a);var l=this.toQrdimensions(e,r,a);l.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var h=s.isShadedBoxEnabled()&&l.height<=r,p={x:0,y:0,width:e,height:r},m=h?this.getShadedRegionBounds(e,r,l):p,g=this.createCanvasElement(m.width,m.height),v={willReadFrequently:!0},E=g.getContext("2d",v);E.canvas.width=m.width,E.canvas.height=m.height,this.element.append(g),h&&this.possiblyInsertShadingElement(this.element,e,r,l),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=E,this.canvasElement=g},t.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=Cs.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(e,r){var s=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return e(a.text,G0.createFromQrcodeResult(a)),s.possiblyUpdateShaders(!0),!0}).catch(function(a){s.possiblyUpdateShaders(!1);var l=Cs.codeParseError(a);return r(l,Nb.createFrom(l)),!1})},t.prototype.foreverScan=function(e,r,s){var a=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),h=l.videoWidth/l.clientWidth,p=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*h,g=this.qrRegion.height*p,v=this.qrRegion.x*h,E=this.qrRegion.y*p;this.context.drawImage(l,v,E,m,g,0,0,this.qrRegion.width,this.qrRegion.height);var _=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(e,r,s)},a.getTimeoutFps(e.fps))};this.scanContext(r,s).then(function(T){!T&&e.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(r,s).finally(function(){_()})):_()}).catch(function(T){a.logger.logError("Error happend while scanning context",T),_()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",s="deviceId",a={user:!0,environment:!0},l="exact",h=function(O){if(O in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(O,"'")},p=Object.keys(e);if(p.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(p.length," keys");var m=Object.keys(e)[0];if(m!==r&&m!==s)throw"Only '".concat(r,"' and '").concat(s,"' ")+" are supported for 'cameraIdOrConfig'";if(m===r){var g=e.facingMode;if(typeof g=="string"){if(h(g))return{facingMode:g}}else if(typeof g=="object")if(l in g){if(h(g["".concat(l)]))return{facingMode:{exact:g["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var v=typeof g;throw"Invalid type of 'facingMode' = ".concat(v)}}else{var E=e.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(l in E)return{deviceId:{exact:E["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var _=typeof E;throw"Invalid type of 'deviceId' = ".concat(_)}}}var T=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(T)},t.prototype.computeCanvasDrawConfig=function(e,r,s,a){if(e<=s&&r<=a){var l=(s-e)/2,h=(a-r)/2;return{x:l,y:h,width:e,height:r}}else{var p=e,m=r;return e>s&&(r=s/e*r,e=s),r>a&&(e=a/r*e,r=a),this.logger.log("Image downsampled from "+"".concat(p,"X").concat(m)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,s,a)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?Ir.BORDER_SHADER_MATCH_COLOR:Ir.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,r,s){var a=e,l=r,h=document.createElement("canvas");return h.style.width="".concat(a,"px"),h.style.height="".concat(l,"px"),h.style.display="none",h.id=Cn(s)?"qr-canvas":s,h},t.prototype.getShadedRegionBounds=function(e,r,s){if(s.width>e||s.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-s.width)/2,y:(r-s.height)/2,width:s.width,height:s.height}},t.prototype.possiblyInsertShadingElement=function(e,r,s,a){if(!(r-a.width<1||s-a.height<1)){var l=document.createElement("div");l.style.position="absolute";var h=(r-a.width)/2,p=(s-a.height)/2;if(l.style.borderLeft="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(Ir.SHADED_REGION_ELEMENT_ID),r-a.width<11||s-a.height<11)this.hasBorderShaders=!1;else{var m=5,g=40;this.insertShaderBorders(l,g,m,-m,null,0,!0),this.insertShaderBorders(l,g,m,-m,null,0,!1),this.insertShaderBorders(l,g,m,null,-m,0,!0),this.insertShaderBorders(l,g,m,null,-m,0,!1),this.insertShaderBorders(l,m,g+m,-m,null,-m,!0),this.insertShaderBorders(l,m,g+m,null,-m,-m,!0),this.insertShaderBorders(l,m,g+m,-m,null,-m,!1),this.insertShaderBorders(l,m,g+m,null,-m,-m,!1),this.hasBorderShaders=!0}e.append(l)}},t.prototype.insertShaderBorders=function(e,r,s,a,l,h,p){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=Ir.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(r,"px"),m.style.height="".concat(s,"px"),a!==null&&(m.style.top="".concat(a,"px")),l!==null&&(m.style.bottom="".concat(l,"px")),p?m.style.left="".concat(h,"px"):m.style.right="".concat(h,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),e.appendChild(m)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Q0;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Q0||(Q0={}));function Zb(){const[t,e]=H.useState(null),[r,s]=H.useState(!1),[a,l]=H.useState(null),[h,p]=H.useState([]),[m,g]=H.useState({total:0,confirmados:0,presentes:0}),[v,E]=H.useState(""),[_,T]=H.useState([]),[O,j]=H.useState("");H.useEffect(()=>(B(),()=>{t&&t.clear()}),[]),H.useEffect(()=>{O&&(P(),N())},[O]);const B=async()=>{try{const{data:A,error:F}=await Le.from("eventos").select("*").order("created_at",{ascending:!1});if(F)throw F;T(A||[]);const J=localStorage.getItem("currentEventId");J&&(A!=null&&A.some(X=>X.id===J))?j(J):(A==null?void 0:A.length)>0&&j(A[0].id)}catch(A){console.error("Erro ao carregar eventos:",A),ge.error("Erro ao carregar eventos")}},P=async()=>{if(O)try{const{data:A,error:F}=await Le.from("convidados").select("confirmado, checkin").eq("evento_id",O);if(F)throw F;const J={total:A.length,confirmados:A.filter(X=>X.confirmado).length,presentes:A.filter(X=>X.checkin).length};g(J)}catch(A){console.error("Erro ao carregar estatsticas:",A)}},N=async()=>{if(O)try{const{data:A,error:F}=await Le.from("convidados").select("*").eq("evento_id",O).eq("checkin",!0).order("updated_at",{ascending:!1}).limit(10);if(F)throw F;p(A||[])}catch(A){console.error("Erro ao carregar histrico:",A)}},I=()=>{if(t)return;const A=new Yb("qr-reader");A.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},W,G).then(()=>{e(A),s(!0)}).catch(F=>{console.error("Erro ao iniciar a cmara:",F),ge.error("No foi possvel iniciar a cmara")})},L=()=>{t&&t.stop().then(()=>{t.clear(),e(null),s(!1)}).catch(A=>console.error("Erro ao parar scanner:",A))},W=async A=>{try{const F=JSON.parse(A);if(!F.id){ge.error("QR Code invlido");return}await U(F.id),t&&t.stop().then(()=>{t.clear(),e(null),setTimeout(()=>{I()},2e3)})}catch(F){console.error("Erro ao processar QR code:",F),ge.error("QR Code invlido")}},G=A=>{console.log("QR scan failure:",A)},U=async A=>{try{const{data:F,error:J}=await Le.from("convidados").select("*").eq("id",A).eq("evento_id",O).single();if(J||!F){ge.error("Convidado no encontrado neste evento");return}if(F.checkin){ge.warning(`${F.nome} j fez check-in anteriormente`),l({...F,alreadyCheckedIn:!0});return}const{error:X}=await Le.from("convidados").update({checkin:!0,updated_at:new Date().toISOString()}).eq("id",A);if(X)throw X;l({...F,alreadyCheckedIn:!1}),ge.success(` Check-in efetuado: ${F.nome}${F.mesa?"  Mesa "+F.mesa:""}`),P(),N(),navigator.vibrate&&navigator.vibrate(200)}catch(F){console.error("Erro ao fazer check-in:",F),ge.error("Erro ao processar check-in")}},k=async A=>{if(A.preventDefault(),!!v.trim())try{const{data:F,error:J}=await Le.from("convidados").select("*").eq("evento_id",O).or(`nome.ilike.%${v}%,email.ilike.%${v}%`).limit(1).single();if(J||!F){ge.error("Convidado no encontrado");return}await U(F.id),E("")}catch(F){console.error("Erro no check-in manual:",F),ge.error("Erro ao processar check-in manual")}};return y.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-4",children:[y.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6",children:[y.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between mb-4",children:[y.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Check-in de Convidados"}),_.length>0&&y.jsxs("select",{value:O,onChange:A=>j(A.target.value),className:"w-full md:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500",children:[y.jsx("option",{value:"",children:"Selecione um evento"}),_.map(A=>y.jsxs("option",{value:A.id,children:[A.nome," -"," ",new Date(A.data).toLocaleDateString("pt-PT")]},A.id))]})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[y.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 sm:p-4 text-center",children:[y.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-blue-600",children:m.total}),y.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Total Convidados"})]}),y.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3 sm:p-4 text-center",children:[y.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-yellow-600",children:m.confirmados}),y.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Confirmados"})]}),y.jsxs("div",{className:"bg-green-50 rounded-lg p-3 sm:p-4 text-center",children:[y.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-green-600",children:m.presentes}),y.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Presentes"})]})]}),O&&y.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Estatsticas referentes ao evento selecionado."})]}),O&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6",children:[y.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-4",children:"Scanner QR Code"}),y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4",children:[y.jsx("div",{className:"flex-1 text-center",children:r?y.jsx("button",{onClick:L,className:"w-full sm:w-auto bg-red-600 text-white px-5 py-2.5 rounded-md text-sm sm:text-base font-medium shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition",children:"Parar Scanner"}):y.jsx("button",{onClick:I,className:"w-full sm:w-auto bg-blue-600 text-white px-5 py-2.5 rounded-md text-sm sm:text-base font-medium shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition",children:" Iniciar Scanner"})}),m&&y.jsx("p",{className:"text-xs sm:text-sm text-gray-500 text-center sm:text-right",children:"Aproxime o QR code da cmara. Aps um check-in com sucesso, o prximo scan comea automaticamente passados 3 segundos."})]}),y.jsx("div",{id:"qr-reader",className:"mx-auto w-full max-w-xs sm:max-w-sm md:max-w-md rounded-lg overflow-hidden",style:{minHeight:"260px"}}),a&&y.jsxs("div",{className:`mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4 rounded-lg p-4 border ${a.alreadyCheckedIn?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"}`,children:[y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold text-gray-900",children:a.nome}),y.jsxs("p",{className:"text-sm text-gray-600",children:["Mesa ",a.mesa]}),a.alreadyCheckedIn&&y.jsx("p",{className:"text-xs sm:text-sm text-yellow-700 mt-1",children:"J tinha feito check-in anteriormente."})]}),y.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"ltimo registo atualizado."})]})]}),y.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6",children:[y.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-4",children:"Check-in Manual"}),y.jsxs("form",{onSubmit:k,className:"flex flex-col sm:flex-row gap-2",children:[y.jsx("input",{type:"text",value:v,onChange:A=>E(A.target.value),placeholder:"Nome ou email do convidado",className:"w-full flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500"}),y.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-green-600 text-white px-5 py-2.5 rounded-md text-sm sm:text-base font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition",children:"Check-in"})]})]}),y.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[y.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-4",children:"ltimos Check-ins"}),h.length>0?y.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:h.map(A=>y.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1 sm:gap-0 py-2 border-b",children:[y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-gray-900 text-sm sm:text-base",children:A.nome}),y.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Mesa ",A.mesa]})]}),y.jsx("span",{className:"text-xs sm:text-sm text-gray-500",children:new Date(A.updated_at).toLocaleTimeString("pt-PT",{hour:"2-digit",minute:"2-digit"})})]},A.id))}):y.jsx("p",{className:"text-gray-500 text-center py-4 text-sm",children:"Nenhum check-in realizado ainda"})]})]})]})}function Qb(){const[t,e]=H.useState([]),[r,s]=H.useState(null),[a,l]=H.useState([]),[h,p]=H.useState({total:0,confirmados:0,rejeitados:0,presentes:0,pendentes:0}),[m,g]=H.useState(!0),[v,E]=H.useState(""),[_,T]=H.useState("table"),[O,j]=H.useState(null),[B,P]=H.useState({nome:"",email:"",mesa:""}),N=Gs();H.useEffect(()=>{I()},[]),H.useEffect(()=>{r&&L()},[r]);const I=async()=>{try{const{data:Q,error:te}=await Le.from("eventos").select("*").order("created_at",{ascending:!1});if(te)throw te;if(e(Q||[]),Q&&Q.length>0){const ee=localStorage.getItem("currentEventId"),re=Q.find(he=>he.id===ee)||Q[0];s(re)}}catch(Q){console.error("Erro ao carregar eventos:",Q),ge.error("Erro ao carregar eventos")}finally{g(!1)}},L=async()=>{if(r)try{const{data:Q,error:te}=await Le.from("convidados").select("*").eq("evento_id",r.id).order("nome");if(te)throw te;l(Q||[]);const ee={total:Q.length,confirmados:Q.filter(re=>re.confirmado).length,rejeitados:Q.filter(re=>re.rejeitado).length,presentes:Q.filter(re=>re.checkin).length,pendentes:Q.filter(re=>!re.confirmado&&!re.rejeitado).length};p(ee),localStorage.setItem("currentEventId",r.id)}catch(Q){console.error("Erro ao carregar convidados:",Q),ge.error("Erro ao carregar dados do evento")}},W=Q=>{const te=t.find(ee=>ee.id===Q);s(te)},G=async(Q,te)=>{try{const{error:ee}=await Le.from("convidados").update({confirmado:!te,rejeitado:!1}).eq("id",Q);if(ee)throw ee;ge.success("Status atualizado"),L()}catch(ee){console.error("Erro ao atualizar confirmao:",ee),ge.error("Erro ao atualizar status")}},U=async(Q,te)=>{try{const{error:ee}=await Le.from("convidados").update({checkin:!te}).eq("id",Q);if(ee)throw ee;ge.success("Check-in atualizado"),L()}catch(ee){console.error("Erro ao atualizar check-in:",ee),ge.error("Erro ao atualizar check-in")}},k=async(Q,te)=>{try{const{error:ee}=await Le.from("convidados").update({mesa:te||null}).eq("id",Q);if(ee)throw ee;ge.success("Mesa atualizada"),L()}catch(ee){console.error("Erro ao atualizar mesa:",ee),ge.error("Erro ao atualizar mesa")}},A=Q=>{j(Q),P({nome:Q.nome,email:Q.email,mesa:Q.mesa||""})},F=()=>{j(null),P({nome:"",email:"",mesa:""})},J=async Q=>{if(Q.preventDefault(),!B.nome.trim()){ge.error("Nome  obrigatrio");return}if(!B.email.trim()){ge.error("Email  obrigatrio");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(B.email)){ge.error("Email invlido");return}try{const{error:ee}=await Le.from("convidados").update({nome:B.nome.trim(),email:B.email.trim(),mesa:B.mesa.trim()||null}).eq("id",O.id);if(ee)throw ee;ge.success("Convidado atualizado com sucesso"),F(),L()}catch(ee){console.error("Erro ao atualizar convidado:",ee),ge.error("Erro ao atualizar convidado: "+ee.message)}},X=async Q=>{if(window.confirm("Tem a certeza que deseja remover este convidado?"))try{const{error:te}=await Le.from("convidados").delete().eq("id",Q);if(te)throw te;ge.success("Convidado removido"),L()}catch(te){console.error("Erro ao remover convidado:",te),ge.error("Erro ao remover convidado")}},se=()=>{if(a.length===0){ge.error("Nenhum convidado para exportar");return}const Q=["Nome","Email","Mesa","Confirmado","Rejeitado","Check-in"],te=a.map(ue=>[ue.nome,ue.email,ue.mesa,ue.confirmado?"Sim":"No",ue.rejeitado?"Sim":"No",ue.checkin?"Sim":"No"]),ee=[Q.join(","),...te.map(ue=>ue.map(me=>`"${me}"`).join(","))].join(`
`),re=new Blob([ee],{type:"text/csv;charset=utf-8;"}),he=document.createElement("a"),fe=URL.createObjectURL(re);he.setAttribute("href",fe),he.setAttribute("download",`convidados-${r.nome.replace(/\s+/g,"-")}.csv`),he.style.visibility="hidden",document.body.appendChild(he),he.click(),document.body.removeChild(he),ge.success("Ficheiro CSV exportado")},xe=a.filter(Q=>Q.nome.toLowerCase().includes(v.toLowerCase())||Q.email.toLowerCase().includes(v.toLowerCase())||Q.mesa&&Q.mesa.toString().includes(v)),K=Q=>{if(!Q)return"";const[te,ee]=Q.split(":");return`${te}:${ee}`};return m?y.jsx("div",{className:"max-w-7xl mx-auto px-4 flex items-center justify-center min-h-[50vh]",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),y.jsx("p",{className:"text-gray-600",children:"A carregar..."})]})}):y.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[t.length>0&&y.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 sm:p-6 mb-6",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[y.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Dashboard"}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[y.jsx("button",{onClick:()=>N("/eventos/"+r.id+"/editar"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm font-medium shadow-md hover:shadow-lg",children:" Editar Evento"}),y.jsx("button",{onClick:()=>N("/enviar-emails"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition text-sm font-medium shadow-md hover:shadow-lg",children:" Enviar Emails"}),y.jsx("button",{onClick:se,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-sm font-medium shadow-md hover:shadow-lg",children:" Exportar CSV"})]})]}),y.jsxs("div",{className:"mb-6",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecionar Evento"}),y.jsx("select",{value:(r==null?void 0:r.id)||"",onChange:Q=>W(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:t.map(Q=>y.jsxs("option",{value:Q.id,children:[Q.nome," -"," ",new Date(Q.data).toLocaleDateString("pt-PT")," s"," ",K(Q.hora)]},Q.id))})]}),r&&y.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[y.jsx("h2",{className:"text-lg font-bold text-blue-900 mb-2",children:r.nome}),y.jsxs("p",{className:"text-sm text-blue-700",children:[""," ",new Date(r.data).toLocaleDateString("pt-PT",{day:"numeric",month:"long",year:"numeric"})," ","s ",K(r.hora)]}),y.jsxs("p",{className:"text-sm text-blue-700",children:[" ",r.local]})]}),y.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3 sm:gap-4 mb-6",children:[y.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[y.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-600 mb-1",children:"Total"}),y.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-blue-900",children:h.total})]}),y.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200",children:[y.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-600 mb-1",children:"Confirmados"}),y.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-green-900",children:h.confirmados})]}),y.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 p-4 rounded-lg border border-yellow-200",children:[y.jsx("p",{className:"text-xs sm:text-sm font-medium text-yellow-600 mb-1",children:"Pendentes"}),y.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-yellow-900",children:h.pendentes})]}),y.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 p-4 rounded-lg border border-red-200",children:[y.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-600 mb-1",children:"Rejeitados"}),y.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-red-900",children:h.rejeitados})]}),y.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border border-purple-200 col-span-2 sm:col-span-1",children:[y.jsx("p",{className:"text-xs sm:text-sm font-medium text-purple-600 mb-1",children:"Presentes"}),y.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-purple-900",children:h.presentes})]})]}),y.jsx("div",{className:"mb-4",children:y.jsx("input",{type:"text",placeholder:" Pesquisar por nome, email ou mesa...",value:v,onChange:Q=>E(Q.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"})}),y.jsx("div",{className:"flex justify-end mb-4 sm:hidden",children:y.jsxs("div",{className:"inline-flex rounded-lg border border-gray-200 bg-gray-50 p-1",children:[y.jsx("button",{onClick:()=>T("cards"),className:`px-3 py-1 text-xs font-medium rounded-md transition ${_==="cards"?"bg-white text-blue-600 shadow-sm":"text-gray-600"}`,children:" Cards"}),y.jsx("button",{onClick:()=>T("table"),className:`px-3 py-1 text-xs font-medium rounded-md transition ${_==="table"?"bg-white text-blue-600 shadow-sm":"text-gray-600"}`,children:" Tabela"})]})}),xe.length>0?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:`${_==="cards"?"block sm:hidden":"hidden"} space-y-4`,children:xe.map(Q=>y.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4 hover:border-blue-300 transition",children:[y.jsxs("div",{className:"flex justify-between items-start mb-3",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("h3",{className:"font-semibold text-gray-900",children:Q.nome}),y.jsx("p",{className:"text-sm text-gray-500",children:Q.email}),Q.mesa&&y.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Mesa: ",Q.mesa]})]}),y.jsxs("div",{className:"flex space-x-1",children:[y.jsx("button",{onClick:()=>A(Q),className:"text-blue-600 hover:text-blue-900 p-1",title:"Editar",children:y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),y.jsx("button",{onClick:()=>X(Q.id),className:"text-red-600 hover:text-red-900 p-1",title:"Remover",children:y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),y.jsxs("div",{className:"flex space-x-2 mb-2",children:[y.jsx("button",{onClick:()=>G(Q.id,Q.confirmado),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition ${Q.confirmado?"bg-green-100 text-green-800":Q.rejeitado?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:Q.confirmado?" Confirmado":Q.rejeitado?" Rejeitado":"Confirmar"}),y.jsx("button",{onClick:()=>U(Q.id,Q.checkin),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition ${Q.checkin?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:Q.checkin?" Presente":"Check-in"})]}),y.jsx("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/confirmar?id=${Q.id}`).then(()=>ge.success("Link copiado!")),className:"w-full bg-blue-50 text-blue-600 px-3 py-2 rounded-lg text-sm font-medium hover:bg-blue-100 transition",children:" Copiar Link de Confirmao"})]},Q.id))}),y.jsx("div",{className:`${_==="table"?"block":"hidden sm:block"} overflow-x-auto`,children:y.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[y.jsx("thead",{className:"bg-gray-50",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nome"}),y.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase hidden md:table-cell",children:"Email"}),y.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Mesa"}),y.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"}),y.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Check-in"}),y.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),y.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:xe.map(Q=>y.jsxs("tr",{className:"hover:bg-gray-50",children:[y.jsx("td",{className:"px-4 py-3",children:y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-medium text-gray-900",children:Q.nome}),y.jsx("p",{className:"text-xs text-gray-500 md:hidden",children:Q.email})]})}),y.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 hidden md:table-cell",children:Q.email}),y.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:y.jsx("input",{type:"text",defaultValue:Q.mesa||"",onBlur:te=>{const ee=te.target.value.trim();ee!==(Q.mesa||"")&&k(Q.id,ee)},className:"w-16 px-2 py-1 border-2 border-gray-200 rounded text-center text-sm",placeholder:"-"})}),y.jsx("td",{className:"px-4 py-3 text-center",children:y.jsx("button",{onClick:()=>G(Q.id,Q.confirmado),className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition ${Q.confirmado?"bg-green-100 text-green-800":Q.rejeitado?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:Q.confirmado?" Confirmado":Q.rejeitado?" Rejeitado":"Pendente"})}),y.jsx("td",{className:"px-4 py-3 text-center",children:y.jsx("button",{onClick:()=>U(Q.id,Q.checkin),className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition ${Q.checkin?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:Q.checkin?" Sim":"No"})}),y.jsx("td",{className:"px-4 py-3 text-center",children:y.jsxs("div",{className:"flex justify-center space-x-2",children:[y.jsx("button",{onClick:()=>A(Q),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),y.jsx("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/confirmar?id=${Q.id}`).then(()=>ge.success("Link copiado!")),className:"text-blue-600 hover:text-blue-900",title:"Copiar link",children:y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),y.jsx("button",{onClick:()=>X(Q.id),className:"text-red-600 hover:text-red-900",title:"Remover",children:y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},Q.id))})]})})]}):y.jsxs("div",{className:"text-center py-12",children:[y.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),y.jsx("p",{className:"text-gray-500",children:v?"Nenhum convidado encontrado com este termo de pesquisa":"Nenhum convidado adicionado ainda"})]})]}),t.length===0&&y.jsxs("div",{className:"bg-white rounded-xl shadow-md p-12 text-center",children:[y.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),y.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nenhum evento criado"}),y.jsx("p",{className:"text-gray-600 mb-4",children:"Crie o seu primeiro evento para comear a gerir convidados."}),y.jsx("a",{href:"/",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition shadow-md hover:shadow-lg",children:"Criar Evento"})]}),O&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Editar Convidado"}),y.jsx("button",{onClick:F,className:"text-gray-400 hover:text-gray-600 transition",children:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),y.jsxs("form",{onSubmit:J,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nome ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"text",value:B.nome,onChange:Q=>P({...B,nome:Q.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nome completo",required:!0})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"email",value:B.email,onChange:Q=>P({...B,email:Q.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"email@exemplo.com",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mesa (opcional)"}),y.jsx("input",{type:"text",value:B.mesa,onChange:Q=>P({...B,mesa:Q.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nmero da mesa"})]}),y.jsxs("div",{className:"flex space-x-3 pt-4",children:[y.jsx("button",{type:"button",onClick:F,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition font-medium",children:"Cancelar"}),y.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium shadow-md hover:shadow-lg",children:"Guardar"})]})]})]})})]})}const Jb="UTAD2025";function e_({onLogin:t}){const[e,r]=H.useState(""),[s,a]=H.useState(!1),[l,h]=H.useState(!1),p=m=>{if(m.preventDefault(),!e.trim()){ge.error("Introduza o cdigo de acesso");return}a(!0),setTimeout(()=>{e.trim()===Jb?(ge.success("Login efetuado com sucesso!"),t()):(ge.error("Cdigo de acesso invlido"),r("")),a(!1)},500)};return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 px-4 py-12",children:y.jsxs("div",{className:"w-full max-w-md",children:[y.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden transform hover:scale-[1.01] transition-transform duration-300",children:[y.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 px-8 py-10 text-center relative overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 opacity-10",children:y.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("defs",{children:y.jsx("pattern",{id:"loginPattern",x:"0",y:"0",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:y.jsx("circle",{cx:"20",cy:"20",r:"2",fill:"white"})})}),y.jsx("rect",{width:"100%",height:"100%",fill:"url(#loginPattern)"})]})}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"bg-white bg-opacity-20 backdrop-blur-sm rounded-full p-4 w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:y.jsx("span",{className:"text-5xl",children:""})}),y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Gestor de Eventos"}),y.jsx("p",{className:"text-blue-100 text-sm",children:"Acesso  rea administrativa"})]})]}),y.jsxs("div",{className:"p-8",children:[y.jsxs("form",{onSubmit:p,className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"access-code",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cdigo de acesso"}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{id:"access-code",type:l?"text":"password",value:e,onChange:m=>r(m.target.value),className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",placeholder:"Introduza o cdigo",disabled:s}),y.jsx("button",{type:"button",onClick:()=>h(!l),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:l?y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):y.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),y.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-6 rounded-xl text-lg font-semibold hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 flex items-center justify-center gap-2",children:s?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),y.jsx("span",{children:"A validar..."})]}):y.jsxs(y.Fragment,{children:[y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),y.jsx("span",{children:"Entrar"})]})})]}),y.jsx("div",{className:"mt-6 bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-100 rounded-xl p-4",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("span",{className:"text-2xl flex-shrink-0",children:""}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-blue-900 font-medium mb-1",children:"Acesso Restrito"}),y.jsx("p",{className:"text-xs text-blue-700 leading-relaxed",children:"O acesso  reservado  equipa de organizao para criar eventos, fazer upload de convidados, gerir confirmaes e realizar check-in."})]})]})})]}),y.jsx("div",{className:"bg-gray-50 px-8 py-4 border-t border-gray-100",children:y.jsxs("p",{className:"text-center text-xs text-gray-500",children:[" ",new Date().getFullYear()," Gestor de Eventos UTAD - Todos os direitos reservados"]})})]}),y.jsx("div",{className:"mt-6 text-center",children:y.jsx("p",{className:"text-sm text-gray-600",children:"Necessita de ajuda? Contacte o administrador do sistema"})})]})})}function t_(){const{id:t}=wy(),e=Gs(),[r,s]=H.useState(!0),[a,l]=H.useState(!1),[h,p]=H.useState(!1),[m,g]=H.useState(null),[v,E]=H.useState(null),[_,T]=H.useState({nome:"",data:"",hora:"",local:"",imagem_url:"",accent_color:"#1e40af"});H.useEffect(()=>{O()},[t]),H.useEffect(()=>{if(!m||!v)return;const L=new Image;L.src=m,L.crossOrigin="anonymous",L.onload=()=>{try{const W=document.createElement("canvas"),G=W.getContext("2d");W.width=L.width,W.height=L.height,G.drawImage(L,0,0);const U=G.getImageData(0,0,L.width,L.height).data;let k=0,A=0,F=0,J=0;for(let xe=0;xe<U.length;xe+=40)k+=U[xe],A+=U[xe+1],F+=U[xe+2],J++;const X=xe=>xe.toString(16).padStart(2,"0"),se=`#${X(k/J|0)}${X(A/J|0)}${X(F/J|0)}`;T(xe=>({...xe,accent_color:se}))}catch(W){console.log("Erro ao extrair cor:",W)}}},[m,v]);const O=async()=>{try{const{data:L,error:W}=await Le.from("eventos").select("*").eq("id",t).single();if(W)throw W;T({nome:L.nome||"",data:L.data||"",hora:L.hora||"",local:L.local||"",imagem_url:L.imagem_url||"",accent_color:L.accent_color||"#1e40af"}),g(L.imagem_url||null)}catch(L){console.error("Erro ao carregar evento:",L),ge.error("Erro ao carregar evento")}finally{s(!1)}},j=L=>{T(W=>({...W,[L.target.name]:L.target.value}))},B=L=>{const W=L.target.files[0];if(!W)return;if(!W.type.startsWith("image/")){ge.error("Por favor, selecione um ficheiro de imagem vlido");return}if(W.size>5*1024*1024){ge.error("A imagem deve ter no mximo 5MB");return}E(W);const G=new FileReader;G.onloadend=()=>{g(G.result)},G.readAsDataURL(W)},P=()=>{E(null),g(null),T(L=>({...L,imagem_url:""}))},N=async()=>{if(!v)return null;p(!0);try{const L=v.name.split(".").pop(),G=`${`${t}-${Date.now()}.${L}`}`,{error:U}=await Le.storage.from("event-images").upload(G,v,{cacheControl:"3600",upsert:!1});if(U)throw U;const{data:{publicUrl:k}}=Le.storage.from("event-images").getPublicUrl(G);return k}catch(L){return console.error("Erro ao fazer upload da imagem:",L),ge.error("Erro ao fazer upload da imagem"),null}finally{p(!1)}},I=async L=>{if(L.preventDefault(),!_.nome||!_.data||!_.hora||!_.local){ge.error("Por favor, preencha todos os campos obrigatrios");return}l(!0);try{let W=_.imagem_url||null;if(v){const U=await N();U&&(W=U)}!m&&!v&&(W=null);const{error:G}=await Le.from("eventos").update({nome:_.nome,data:_.data,hora:_.hora,local:_.local,imagem_url:W,accent_color:_.accent_color}).eq("id",t);if(G)throw G;ge.success("Evento atualizado com sucesso!"),e("/dashboard")}catch(W){console.error("Erro ao atualizar evento:",W),ge.error("Erro ao atualizar evento: "+W.message)}finally{l(!1)}};return r?y.jsx("div",{className:"flex items-center justify-center h-64",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-600 mx-auto"}),y.jsx("p",{className:"mt-4 text-gray-600",children:"A carregar evento..."})]})}):y.jsx("div",{className:"max-w-2xl mx-auto px-4",children:y.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Editar Evento"}),y.jsxs("form",{onSubmit:I,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagem do Evento (opcional)"}),m?y.jsxs("div",{className:"relative",children:[y.jsx("img",{src:m,alt:"Preview",className:"w-full h-64 object-cover rounded-lg"}),y.jsx("button",{type:"button",onClick:P,className:"absolute top-2 right-2 bg-red-600 text-white p-2 rounded-full hover:bg-red-700 shadow-lg transition",children:y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):y.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition",children:[y.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:B,className:"hidden"}),y.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer flex flex-col items-center",children:[y.jsx("svg",{className:"w-12 h-12 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),y.jsx("span",{className:"text-sm text-gray-600",children:"Clique para escolher uma imagem"}),y.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF at 5MB"})]})]})]}),y.jsxs("div",{className:"mt-4",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cor do Convite"}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("input",{type:"color",value:_.accent_color,onChange:L=>T(W=>({...W,accent_color:L.target.value})),className:"w-12 h-12 rounded-md cursor-pointer border border-gray-300 shadow-sm"}),y.jsx("div",{className:"w-14 h-14 rounded-lg border",style:{backgroundColor:_.accent_color}})]}),y.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Esta cor ser usada como cor principal do convite."})]}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"nome",className:"block text-sm font-medium text-gray-700 mb-1",children:["Nome do Evento ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"text",id:"nome",name:"nome",value:_.nome,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"data",className:"block text-sm font-medium text-gray-700 mb-1",children:["Data ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"date",id:"data",name:"data",value:_.data,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"hora",className:"block text-sm font-medium text-gray-700 mb-1",children:["Hora ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"time",id:"hora",name:"hora",value:_.hora,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"local",className:"block text-sm font-medium text-gray-700 mb-1",children:["Local ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"text",id:"local",name:"local",value:_.local,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),y.jsx("button",{type:"submit",disabled:a||h,className:"w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-60 flex items-center justify-center gap-2",children:a||h?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),y.jsx("span",{children:h?"A atualizar imagem...":"A guardar alteraes..."})]}):"Guardar alteraes"})]})]})})}function r_(){const[t,e]=H.useState([]),[r,s]=H.useState(""),[a,l]=H.useState({assunto:"",corpo:"",remetente_nome:"Universidade de Trs-os-Montes e Alto Douro",remetente_email:"eventos@utad.pt"}),[h,p]=H.useState({nome:"Joo Silva",email:"exemplo@email.com",id:"preview-id"}),[m,g]=H.useState(!1),[v,E]=H.useState(!1);H.useEffect(()=>{_()},[]),H.useEffect(()=>{r&&T()},[r]);const _=async()=>{try{const{data:N,error:I}=await Le.from("eventos").select("*").order("created_at",{ascending:!1});if(I)throw I;e(N||[]),(N==null?void 0:N.length)>0&&s(N[0].id)}catch(N){console.error("Erro ao carregar eventos:",N),ge.error("Erro ao carregar eventos")}},T=async()=>{var N;try{const{data:I,error:L}=await Le.from("email_templates").select("*").eq("evento_id",r).single();if(L&&L.code!=="PGRST116")throw L;l(I||{assunto:`Confirmao de Presena - ${((N=t.find(W=>W.id===r))==null?void 0:N.nome)||"Evento"}`,corpo:`Caro(a) {{nome}},

 com grande prazer que convidamos V. Ex. para o evento {{evento}}.

Data: {{data}}
Hora: {{hora}}
Local: {{local}}

Para confirmar a sua presena, por favor clique no link abaixo:
{{link}}

Contamos com a sua presena.

Com os melhores cumprimentos,
Universidade de Trs-os-Montes e Alto Douro`,remetente_nome:"Universidade de Trs-os-Montes e Alto Douro",remetente_email:"eventos@utad.pt"})}catch(I){console.error("Erro ao carregar template:",I),ge.error("Erro ao carregar template")}},O=async()=>{if(!r){ge.error("Selecione um evento primeiro");return}if(!a.assunto.trim()||!a.corpo.trim()){ge.error("Assunto e corpo do email so obrigatrios");return}E(!0);try{const{data:N}=await Le.from("email_templates").select("id").eq("evento_id",r).single();if(N){const{error:I}=await Le.from("email_templates").update({assunto:a.assunto,corpo:a.corpo,remetente_nome:a.remetente_nome,remetente_email:a.remetente_email,updated_at:new Date().toISOString()}).eq("evento_id",r);if(I)throw I}else{const{error:I}=await Le.from("email_templates").insert({evento_id:r,assunto:a.assunto,corpo:a.corpo,remetente_nome:a.remetente_nome,remetente_email:a.remetente_email});if(I)throw I}ge.success("Template guardado com sucesso!")}catch(N){console.error("Erro ao guardar template:",N),ge.error("Erro ao guardar template: "+N.message)}finally{E(!1)}},j=()=>{var G;const N=t.find(U=>U.id===r);if(!N)return{assunto:"",corpo:""};const I={"{{nome}}":h.nome,"{{email}}":h.email,"{{link}}":`${window.location.origin}/confirmar?id=${h.id}`,"{{evento}}":N.nome,"{{data}}":new Date(N.data).toLocaleDateString("pt-PT",{day:"numeric",month:"long",year:"numeric"}),"{{hora}}":(G=N.hora)==null?void 0:G.slice(0,5),"{{local}}":N.local};let L=a.assunto,W=a.corpo;return Object.entries(I).forEach(([U,k])=>{L=L.replace(new RegExp(U,"g"),k),W=W.replace(new RegExp(U,"g"),k)}),{assunto:L,corpo:W}},B=N=>{l({...a,corpo:a.corpo+N})},P=j();return y.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[y.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:" Templates de Email"}),y.jsxs("div",{className:"mb-6",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecionar Evento"}),y.jsxs("select",{value:r,onChange:N=>s(N.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[y.jsx("option",{value:"",children:"Selecione um evento"}),t.map(N=>y.jsxs("option",{value:N.id,children:[N.nome," -"," ",new Date(N.data).toLocaleDateString("pt-PT")]},N.id))]})]}),r&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Remetente"}),y.jsx("input",{type:"text",value:a.remetente_nome,onChange:N=>l({...a,remetente_nome:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Universidade de Trs-os-Montes e Alto Douro"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email do Remetente"}),y.jsx("input",{type:"email",value:a.remetente_email,onChange:N=>l({...a,remetente_email:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"eventos@utad.pt"})]})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Assunto do Email ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"text",value:a.assunto,onChange:N=>l({...a,assunto:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Confirmao de Presena - {{evento}}"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Variveis Disponveis (clique para inserir)"}),y.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"Nome",value:"{{nome}}"},{label:"Email",value:"{{email}}"},{label:"Link",value:"{{link}}"},{label:"Evento",value:"{{evento}}"},{label:"Data",value:"{{data}}"},{label:"Hora",value:"{{hora}}"},{label:"Local",value:"{{local}}"}].map(N=>y.jsx("button",{onClick:()=>B(N.value),className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-md text-sm font-medium hover:bg-blue-100 transition",children:N.label},N.value))})]}),y.jsxs("div",{className:"mb-6",children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Corpo do Email ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("textarea",{value:a.corpo,onChange:N=>l({...a,corpo:N.target.value}),rows:12,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:`Caro(a) {{nome}},

 com grande prazer que convidamos V. Ex....`}),y.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use as variveis acima para personalizar o email"})]}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[y.jsx("button",{onClick:O,disabled:v,className:"flex-1 bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition font-medium shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:v?"A guardar...":" Guardar Template"}),y.jsx("button",{onClick:()=>g(!m),className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition font-medium shadow-md hover:shadow-lg",children:m?" Editar":" Preview"})]}),m&&y.jsxs("div",{className:"mt-6 border-2 border-blue-200 rounded-lg p-6 bg-blue-50",children:[y.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:" Preview do Email"}),y.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[y.jsxs("div",{className:"mb-4 pb-4 border-b",children:[y.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"De:"}),y.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[a.remetente_nome," <",a.remetente_email,">"]})]}),y.jsxs("div",{className:"mb-4 pb-4 border-b",children:[y.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Para:"}),y.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[h.nome," <",h.email,">"]})]}),y.jsxs("div",{className:"mb-4 pb-4 border-b",children:[y.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Assunto:"}),y.jsx("p",{className:"text-sm font-bold text-gray-900",children:P.assunto})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Corpo:"}),y.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:P.corpo})]})]}),y.jsxs("div",{className:"mt-4",children:[y.jsx("label",{className:"block text-xs text-gray-600 mb-2",children:"Testar preview com outro nome:"}),y.jsx("input",{type:"text",value:h.nome,onChange:N=>p({...h,nome:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Nome de exemplo"})]})]})]})]}),y.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded",children:[y.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:" Como usar:"}),y.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[y.jsx("li",{children:"1. Selecione o evento para o qual quer criar o template"}),y.jsx("li",{children:"2. Personalize o assunto e corpo do email"}),y.jsx("li",{children:"3. Use as variveis para personalizao automtica"}),y.jsx("li",{children:'4. Clique em "Preview" para ver como ficar o email'}),y.jsx("li",{children:"5. Guarde o template"}),y.jsx("li",{children:"6. V ao Dashboard para enviar emails em massa"})]})]})]})}async function n_({to:t,subject:e,body:r,fromName:s,fromEmail:a}){try{const h=await fetch("https://hricrwfhshdmchbpfpqh.supabase.co/functions/v1/send-email-smtp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:t,subject:e,body:r,fromName:s,fromEmail:a})});if(!h.ok){const p=await h.json();throw new Error(p.message||"Erro ao enviar email")}return await h.json()}catch(l){throw l}}function i_({eventId:t,eventData:e,guests:r,onComplete:s}){const[a,l]=H.useState(!1),[h,p]=H.useState({sent:0,total:0,errors:0}),[m,g]=H.useState(!1),[v,E]=H.useState(null),[_,T]=H.useState(!1),[O,j]=H.useState("todos"),B=async()=>{T(!0);try{const{data:W,error:G}=await Le.from("email_templates").select("*").eq("evento_id",t).single();if(G)throw G;return W?(E(W),!0):(ge.error("Template de email no configurado. Configure primeiro em Templates de Email."),!1)}catch(W){return console.error("Erro ao carregar template:",W),ge.error("Erro ao carregar template de email"),!1}finally{T(!1)}},P=()=>{let W=r;switch(O){case"pendentes":W=r.filter(G=>!G.confirmado&&!G.rejeitado);break;case"confirmados":W=r.filter(G=>G.confirmado);break;case"nao-enviados":W=r.filter(G=>!G.email_enviado);break}return W},N=async()=>{await B()&&g(!0)},I=async()=>{var A;g(!1),l(!0);const W=P(),G=W.length;let U=0,k=0;p({sent:U,total:G,errors:k});for(const F of W)try{const J={"{{nome}}":F.nome,"{{email}}":F.email,"{{link}}":`${window.location.origin}/confirmar?id=${F.id}`,"{{evento}}":e.nome,"{{data}}":new Date(e.data).toLocaleDateString("pt-PT",{day:"numeric",month:"long",year:"numeric"}),"{{hora}}":(A=e.hora)==null?void 0:A.slice(0,5),"{{local}}":e.local};let X=v.assunto,se=v.corpo;Object.entries(J).forEach(([xe,K])=>{X=X.replace(new RegExp(xe,"g"),K),se=se.replace(new RegExp(xe,"g"),K)}),await n_({to:F.email,subject:X,body:se,fromName:v.remetente_nome,fromEmail:v.remetente_email}),await Le.from("email_logs").insert({convidado_id:F.id,evento_id:t,email_destinatario:F.email,assunto:X,corpo:se,status:"enviado"}),await Le.from("convidados").update({email_enviado:!0,email_enviado_em:new Date().toISOString()}).eq("id",F.id),U++,p({sent:U,total:G,errors:k}),await new Promise(xe=>setTimeout(xe,100))}catch(J){console.error(`Erro ao enviar email para ${F.email}:`,J),k++,p({sent:U,total:G,errors:k}),await Le.from("email_logs").insert({convidado_id:F.id,evento_id:t,email_destinatario:F.email,assunto:v.assunto,corpo:v.corpo,status:"erro",erro_mensagem:J.message})}l(!1),ge.success(`Envio concludo! ${U} emails enviados, ${k} erros.`),s&&s()},L=P().length;return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enviar para:"}),y.jsxs("select",{value:O,onChange:W=>j(W.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:a,children:[y.jsxs("option",{value:"todos",children:["Todos os convidados (",r.length,")"]}),y.jsxs("option",{value:"pendentes",children:["Pendentes (",r.filter(W=>!W.confirmado&&!W.rejeitado).length,")"]}),y.jsxs("option",{value:"confirmados",children:["Confirmados (",r.filter(W=>W.confirmado).length,")"]}),y.jsxs("option",{value:"nao-enviados",children:["Ainda no receberam email (",r.filter(W=>!W.email_enviado).length,")"]})]})]}),y.jsx("button",{onClick:N,disabled:a||_||L===0,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition font-medium shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:_?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),y.jsx("span",{children:"A carregar template..."})]}):a?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),y.jsx("span",{children:"A enviar emails..."})]}):y.jsxs(y.Fragment,{children:[y.jsx("span",{children:""}),y.jsxs("span",{children:["Enviar Emails em Massa (",L," ",L===1?"destinatrio":"destinatrios",")"]})]})}),a&&y.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Progresso do Envio"}),y.jsxs("span",{className:"text-sm text-blue-700",children:[h.sent," / ",h.total]})]}),y.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2.5 mb-2",children:y.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${h.sent/h.total*100}%`}})}),h.errors>0&&y.jsxs("p",{className:"text-xs text-red-600",children:[" ",h.errors," erro(s) durante o envio"]})]}),m&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[y.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:" Confirmar Envio em Massa"}),y.jsxs("p",{className:"text-gray-700 mb-4",children:["Est prestes a enviar ",y.jsxs("strong",{children:[L," emails"]})," para os convidados selecionados."]}),y.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:y.jsxs("p",{className:"text-sm text-yellow-800",children:[y.jsx("strong",{children:"Nota:"})," Esta ao no pode ser desfeita. Certifique-se de que o template est correto."]})}),y.jsxs("div",{className:"flex space-x-3",children:[y.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition font-medium",children:"Cancelar"}),y.jsx("button",{onClick:I,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium shadow-md hover:shadow-lg",children:"Enviar Agora"})]})]})}),y.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded",children:y.jsxs("p",{className:"text-xs text-blue-800",children:[" ",y.jsx("strong",{children:"Dica:"}),' Certifique-se de que configurou o template de email em "Templates de Email" antes de enviar.']})})]})}function s_(){const t=Xi(),[e,r]=H.useState(()=>localStorage.getItem("isAuthenticated")==="true"),[s,a]=H.useState(!1),l=!t.pathname.includes("/confirmar")&&!t.pathname.includes("/login"),h=()=>{r(!0),localStorage.setItem("isAuthenticated","true")},p=()=>{r(!1),localStorage.removeItem("isAuthenticated"),a(!1)};H.useEffect(()=>{a(!1)},[t.pathname]);const m=({children:v})=>e?v:y.jsx(l0,{to:"/login",replace:!0});function g(){const[v,E]=H.useState(null),[_,T]=H.useState([]),[O,j]=H.useState(!0),B=localStorage.getItem("currentEventId");return H.useEffect(()=>{async function P(){try{if(!B){j(!1);return}const{data:N}=await Le.from("eventos").select("*").eq("id",B).single(),{data:I}=await Le.from("convidados").select("*").eq("evento_id",B);E(N),T(I||[])}finally{j(!1)}}P()},[B]),O?y.jsx("p",{className:"px-4",children:"A carregar"}):!B||!v?y.jsx("div",{className:"max-w-3xl mx-auto px-4",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 text-center",children:[y.jsx("p",{className:"text-gray-700 mb-2",children:"No foi possvel encontrar um evento selecionado."}),y.jsx("p",{className:"text-gray-500 text-sm",children:"Vai ao Dashboard, escolhe um evento e tenta novamente."})]})}):_.length===0?y.jsx("div",{className:"max-w-3xl mx-auto px-4",children:y.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 text-center",children:y.jsx("p",{className:"text-gray-700 mb-2",children:"Este evento ainda no tem convidados."})})}):y.jsx(i_,{eventId:B,eventData:v,guests:_})}return y.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l&&y.jsxs(y.Fragment,{children:[y.jsx("nav",{className:"bg-white shadow-sm border-b sticky top-0 z-50",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex justify-between h-16",children:[y.jsxs("div",{className:"flex items-center space-x-8",children:[y.jsxs(Qr,{to:"/",className:"flex items-center space-x-2 text-xl font-semibold text-gray-900 hover:text-blue-600 transition",onClick:()=>a(!1),children:[y.jsx("span",{className:"text-2xl",children:""}),y.jsx("span",{className:"hidden sm:inline",children:"Gestor de Eventos"})]}),y.jsxs("div",{className:"hidden md:flex space-x-1",children:[y.jsx(Qr,{to:"/",className:`px-3 py-2 text-sm font-medium rounded-md transition ${t.pathname==="/"?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:"Criar Evento"}),y.jsx(Qr,{to:"/upload",className:`px-3 py-2 text-sm font-medium rounded-md transition ${t.pathname==="/upload"?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:"Convidados"}),y.jsx(Qr,{to:"/email-templates",className:`px-3 py-2 text-sm font-medium rounded-md transition ${t.pathname==="/email-templates"?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:"Templates Email"}),y.jsx(Qr,{to:"/checkin",className:`px-3 py-2 text-sm font-medium rounded-md transition ${t.pathname==="/checkin"?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:"Check-in"}),y.jsx(Qr,{to:"/dashboard",className:`px-3 py-2 text-sm font-medium rounded-md transition ${t.pathname==="/dashboard"?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:"Dashboard"})]})]}),y.jsxs("div",{className:"flex items-center space-x-4",children:[e&&y.jsxs("button",{onClick:p,className:"hidden md:flex items-center space-x-1 text-red-600 hover:text-red-700 px-3 py-2 text-sm font-medium transition",children:[y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),y.jsx("span",{children:"Sair"})]}),y.jsx("button",{onClick:()=>a(!s),className:"md:hidden p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:y.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]})})}),s&&y.jsx("div",{className:"md:hidden bg-white shadow-lg border-b",children:y.jsxs("div",{className:"px-4 py-3 space-y-1",children:[y.jsx(Qr,{to:"/",className:`block px-3 py-2 rounded-md text-base font-medium transition ${t.pathname==="/"?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:"Criar Evento"}),y.jsx(Qr,{to:"/upload",className:`block px-3 py-2 rounded-md text-base font-medium transition ${t.pathname==="/upload"?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:"Convidados"}),y.jsx(Qr,{to:"/email-templates",className:`block px-3 py-2 rounded-md text-base font-medium transition ${t.pathname==="/email-templates"?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:"Templates Email"}),y.jsx(Qr,{to:"/checkin",className:`block px-3 py-2 rounded-md text-base font-medium transition ${t.pathname==="/checkin"?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:"Check-in"}),y.jsx(Qr,{to:"/dashboard",className:`block px-3 py-2 rounded-md text-base font-medium transition ${t.pathname==="/dashboard"?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:"Dashboard"}),e&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"border-t my-2"}),y.jsx("button",{onClick:p,className:"w-full text-left px-3 py-2 rounded-md text-base font-medium text-red-600 hover:bg-red-50 transition",children:"Sair"})]})]})})]}),y.jsx("main",{className:l?"py-6 sm:py-8":"",children:y.jsxs(Dy,{children:[y.jsx(xn,{path:"/login",element:e?y.jsx(l0,{to:"/",replace:!0}):y.jsx(e_,{onLogin:h})}),y.jsx(xn,{path:"/confirmar",element:y.jsx(Ab,{})}),y.jsx(xn,{path:"/",element:y.jsx(m,{children:y.jsx(rb,{})})}),y.jsx(xn,{path:"/upload",element:y.jsx(m,{children:y.jsx(ub,{})})}),y.jsx(xn,{path:"/email-templates",element:y.jsx(m,{children:y.jsx(r_,{})})}),y.jsx(xn,{path:"/checkin",element:y.jsx(m,{children:y.jsx(Zb,{})})}),y.jsx(xn,{path:"/dashboard",element:y.jsx(m,{children:y.jsx(Qb,{})})}),y.jsx(xn,{path:"/eventos/:id/editar",element:y.jsx(m,{children:y.jsx(t_,{})})}),y.jsx(xn,{path:"/enviar-emails",element:y.jsx(m,{children:y.jsx(g,{})})})]})})]})}su.createRoot(document.getElementById("root")).render(y.jsx(tn.StrictMode,{children:y.jsxs(Vy,{children:[y.jsx(s_,{}),y.jsx(Dv,{position:"top-right",toastOptions:{duration:3e3,style:{background:"#363636",color:"#fff"},success:{style:{background:"#10b981"}},error:{style:{background:"#ef4444"}}}})]})}));
//# sourceMappingURL=index-0VsOFKPH.js.map
